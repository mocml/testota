import{u as x,N as f,B as m,O as z,P as L,v as k,x as T,Q as H,I as N,R as P,S as $}from"./index-BSLLjLoM.js";const C=["innerHTML"],V=x({__name:"MazIcon",props:{src:{type:String,default:void 0},path:{type:String,default:void 0},name:{type:String,default:void 0},size:{type:String,default:void 0},title:{type:String,default:void 0},transformSource:{type:Function,default:u=>u}},emits:["loaded","unloaded","error"],setup(u,{emit:p}){const a=u,i=p,l={},s=f(),c=f();function v(){try{return P("mazIconPath")}catch(e){return}}const d=m(()=>{var e;return(e=a.path)!=null?e:v()}),g=m(()=>a.src?a.src:d.value?"".concat(d.value,"/").concat(a.name,".svg"):"/".concat(a.name,".svg"));z(()=>{!a.name&&!a.src&&console.error('[maz-ui](MazIcon) you should provide "name" or "src" as prop')});function y(e,n){const t=e.querySelectorAll("title");if(t.length>0)t[0].textContent=n;else{const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=n,e.append(r)}}function S(e){return Object.keys(e).reduce((n,t)=>(e[t]!==!1&&e[t]!==null&&e[t]!==void 0&&(n[t]=e[t]),n),{})}function h(e){const n={},t=e.attributes;if(!t)return n;for(let r=t.length-1;r>=0;r--)n[t[r].name]=t[r].value;return n}function w(e){e.cloneNode(!0);const n=a.transformSource(e);return a.title&&y(n,a.title),e.innerHTML}async function E(e){l[e]||(l[e]=M(e));try{s.value=await l[e],await $(),i("loaded",c.value)}catch(n){s.value&&(s.value=void 0,i("unloaded")),delete l[e],i("error",n)}}function M(e){return new Promise((n,t)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.addEventListener("load",()=>{if(r.status>=200&&r.status<400)try{let o=new DOMParser().parseFromString(r.responseText,"text/xml").querySelectorAll("svg")[0];o?(o=a.transformSource(o),n(o)):t(new Error('Loaded file is not valid SVG"'))}catch(o){t(o)}else t(new Error("Error loading SVG"))}),r.addEventListener("error",o=>t(o)),r.send()})}return L(()=>E(g.value)),(e,n)=>s.value?(k(),T("svg",H({key:0,ref_key:"svgElem",ref:c,class:"m-icon m-reset-css",width:"1em",height:"1em"},{...h(s.value),...S(e.$attrs)},{style:"font-size: ".concat(u.size),innerHTML:w(s.value)}),null,16,C)):N("v-if",!0)}});export{V as default};
