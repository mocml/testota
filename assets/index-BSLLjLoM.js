const __vite__fileDeps=["assets/MazSpinner.DZT5jj-c-BaUX9pCM.js","assets/MazSpinner-BWRGVdU4.css","assets/MazBtn.1qp5aQ4N-BJ-H3EoN.js","assets/MazBtn-Bg_8HBPP.css","assets/MazCheckbox.UAnkvAoS-xQYwohE0.js","assets/check.C9Q_W85g-D9ztUmKg.js","assets/MazCheckbox-DgHa4qTI.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var UI=Object.freeze,zI=Object.defineProperty;var QZ=(n,e,t)=>e in n?zI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $=(n,e,t)=>(QZ(n,typeof e!="symbol"?e+"":e,t),t),T2=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Le=(n,e,t)=>(T2(n,e,"read from private field"),t?t.call(n):e.get(n)),Qt=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Bt=(n,e,t,i)=>(T2(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);var T1=(n,e,t,i)=>({set _(s){Bt(n,e,s,t)},get _(){return Le(n,e,i)}}),jn=(n,e,t)=>(T2(n,e,"access private method"),t);var Jh=(n,e)=>UI(zI(n,"raw",{value:UI(e||n.slice())}));function Mct(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function TS(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const ui={},Nf=[],_l=()=>{},ZZ=()=>!1,Gw=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),CS=n=>n.startsWith("onUpdate:"),Ns=Object.assign,SS=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},JZ=Object.prototype.hasOwnProperty,vi=(n,e)=>JZ.call(n,e),Kt=Array.isArray,Ff=n=>Z0(n)==="[object Map]",Hp=n=>Z0(n)==="[object Set]",HI=n=>Z0(n)==="[object Date]",yn=n=>typeof n=="function",ss=n=>typeof n=="string",Ia=n=>typeof n=="symbol",$i=n=>n!==null&&typeof n=="object",I9=n=>($i(n)||yn(n))&&yn(n.then)&&yn(n.catch),P9=Object.prototype.toString,Z0=n=>P9.call(n),eJ=n=>Z0(n).slice(8,-1),R9=n=>Z0(n)==="[object Object]",AS=n=>ss(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,lg=TS(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ww=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},tJ=/-(\w)/g,yo=Ww(n=>n.replace(tJ,(e,t)=>t?t.toUpperCase():"")),nJ=/\B([A-Z])/g,jd=Ww(n=>n.replace(nJ,"-$1").toLowerCase()),qw=Ww(n=>n.charAt(0).toUpperCase()+n.slice(1)),Iv=Ww(n=>n?"on".concat(qw(n)):""),jr=(n,e)=>!Object.is(n,e),Pv=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},$9=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},uy=n=>{const e=parseFloat(n);return isNaN(e)?n:e},iJ=n=>{const e=ss(n)?Number(n):NaN;return isNaN(e)?n:e};let jI;const Kw=()=>jI||(jI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bo(n){if(Kt(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=ss(i)?aJ(i):bo(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(ss(n)||$i(n))return n}const sJ=/;(?![^(]*\))/g,rJ=/:([^]+)/,oJ=/\/\*[^]*?\*\//g;function aJ(n){const e={};return n.replace(oJ,"").split(sJ).forEach(t=>{if(t){const i=t.split(rJ);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function gt(n){let e="";if(ss(n))e=n;else if(Kt(n))for(let t=0;t<n.length;t++){const i=gt(n[t]);i&&(e+=i+" ")}else if($i(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function lJ(n){if(!n)return null;let{class:e,style:t}=n;return e&&!ss(e)&&(n.class=gt(e)),t&&(n.style=bo(t)),n}const cJ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dJ=TS(cJ);function L9(n){return!!n||n===""}function uJ(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=ah(n[i],e[i]);return t}function ah(n,e){if(n===e)return!0;let t=HI(n),i=HI(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=Ia(n),i=Ia(e),t||i)return n===e;if(t=Kt(n),i=Kt(e),t||i)return t&&i?uJ(n,e):!1;if(t=$i(n),i=$i(e),t||i){if(!t||!i)return!1;const s=Object.keys(n).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ah(n[o],e[o]))return!1}}return String(n)===String(e)}function IS(n,e){return n.findIndex(t=>ah(t,e))}const O9=n=>!!(n&&n.__v_isRef===!0),Q=n=>ss(n)?n:n==null?"":Kt(n)||$i(n)&&(n.toString===P9||!yn(n.toString))?O9(n)?Q(n.value):JSON.stringify(n,D9,2):String(n),D9=(n,e)=>O9(e)?D9(n,e.value):Ff(e)?{["Map(".concat(e.size,")")]:[...e.entries()].reduce((t,[i,s],r)=>(t[C2(i,r)+" =>"]=s,t),{})}:Hp(e)?{["Set(".concat(e.size,")")]:[...e.values()].map(t=>C2(t))}:Ia(e)?C2(e):$i(e)&&!Kt(e)&&!R9(e)?String(e):e,C2=(n,e="")=>{var t;return Ia(n)?"Symbol(".concat((t=n.description)!=null?t:e,")"):n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Er;class M9{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Er,!e&&Er&&(this.index=(Er.scopes||(Er.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Er;try{return Er=this,e()}finally{Er=t}}}on(){Er=this}off(){Er=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function N9(n){return new M9(n)}function F9(){return Er}function B9(n,e=!1){Er&&Er.cleanups.push(n)}let Ui;const S2=new WeakSet;class V9{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Er&&Er.active&&Er.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,S2.has(this)&&(S2.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||z9(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,GI(this),H9(this);const e=Ui,t=ka;Ui=this,ka=!0;try{return this.fn()}finally{j9(this),Ui=e,ka=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$S(e);this.deps=this.depsTail=void 0,GI(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?S2.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){BE(this)&&this.run()}get dirty(){return BE(this)}}let U9=0,cg,dg;function z9(n,e=!1){if(n.flags|=8,e){n.next=dg,dg=n;return}n.next=cg,cg=n}function PS(){U9++}function RS(){if(--U9>0)return;if(dg){let e=dg;for(dg=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;cg;){let e=cg;for(cg=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function H9(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function j9(n){let e,t=n.depsTail,i=t;for(;i;){const s=i.prevDep;i.version===-1?(i===t&&(t=s),$S(i),hJ(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=e,n.depsTail=t}function BE(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(G9(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function G9(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Bg))return;n.globalVersion=Bg;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!BE(n)){n.flags&=-3;return}const t=Ui,i=ka;Ui=n,ka=!0;try{H9(n);const s=n.fn(n._value);(e.version===0||jr(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ui=t,ka=i,j9(n),n.flags&=-3}}function $S(n,e=!1){const{dep:t,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)$S(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function hJ(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let ka=!0;const W9=[];function Gd(){W9.push(ka),ka=!1}function Wd(){const n=W9.pop();ka=n===void 0?!0:n}function GI(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ui;Ui=void 0;try{e()}finally{Ui=t}}}let Bg=0;class fJ{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yw{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ui||!ka||Ui===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ui)t=this.activeLink=new fJ(Ui,this),Ui.deps?(t.prevDep=Ui.depsTail,Ui.depsTail.nextDep=t,Ui.depsTail=t):Ui.deps=Ui.depsTail=t,q9(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Ui.depsTail,t.nextDep=void 0,Ui.depsTail.nextDep=t,Ui.depsTail=t,Ui.deps===t&&(Ui.deps=i)}return t}trigger(e){this.version++,Bg++,this.notify(e)}notify(e){PS();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{RS()}}}function q9(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)q9(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const hy=new WeakMap,Ju=Symbol(""),VE=Symbol(""),Vg=Symbol("");function dr(n,e,t){if(ka&&Ui){let i=hy.get(n);i||hy.set(n,i=new Map);let s=i.get(t);s||(i.set(t,s=new Yw),s.map=i,s.key=t),s.track()}}function dc(n,e,t,i,s,r){const o=hy.get(n);if(!o){Bg++;return}const a=l=>{l&&l.trigger()};if(PS(),e==="clear")o.forEach(a);else{const l=Kt(n),c=l&&AS(t);if(l&&t==="length"){const d=Number(i);o.forEach((u,h)=>{(h==="length"||h===Vg||!Ia(h)&&h>=d)&&a(u)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Vg)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ju)),Ff(n)&&a(o.get(VE)));break;case"delete":l||(a(o.get(Ju)),Ff(n)&&a(o.get(VE)));break;case"set":Ff(n)&&a(o.get(Ju));break}}RS()}function pJ(n,e){const t=hy.get(n);return t&&t.get(e)}function ef(n){const e=Xn(n);return e===n?e:(dr(e,"iterate",Vg),Go(n)?e:e.map(ur))}function Xw(n){return dr(n=Xn(n),"iterate",Vg),n}const mJ={__proto__:null,[Symbol.iterator](){return A2(this,Symbol.iterator,ur)},concat(...n){return ef(this).concat(...n.map(e=>Kt(e)?ef(e):e))},entries(){return A2(this,"entries",n=>(n[1]=ur(n[1]),n))},every(n,e){return Kl(this,"every",n,e,void 0,arguments)},filter(n,e){return Kl(this,"filter",n,e,t=>t.map(ur),arguments)},find(n,e){return Kl(this,"find",n,e,ur,arguments)},findIndex(n,e){return Kl(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Kl(this,"findLast",n,e,ur,arguments)},findLastIndex(n,e){return Kl(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Kl(this,"forEach",n,e,void 0,arguments)},includes(...n){return I2(this,"includes",n)},indexOf(...n){return I2(this,"indexOf",n)},join(n){return ef(this).join(n)},lastIndexOf(...n){return I2(this,"lastIndexOf",n)},map(n,e){return Kl(this,"map",n,e,void 0,arguments)},pop(){return $m(this,"pop")},push(...n){return $m(this,"push",n)},reduce(n,...e){return WI(this,"reduce",n,e)},reduceRight(n,...e){return WI(this,"reduceRight",n,e)},shift(){return $m(this,"shift")},some(n,e){return Kl(this,"some",n,e,void 0,arguments)},splice(...n){return $m(this,"splice",n)},toReversed(){return ef(this).toReversed()},toSorted(n){return ef(this).toSorted(n)},toSpliced(...n){return ef(this).toSpliced(...n)},unshift(...n){return $m(this,"unshift",n)},values(){return A2(this,"values",ur)}};function A2(n,e,t){const i=Xw(n),s=i[e]();return i!==n&&!Go(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=t(r.value)),r}),s}const gJ=Array.prototype;function Kl(n,e,t,i,s,r){const o=Xw(n),a=o!==n&&!Go(n),l=o[e];if(l!==gJ[e]){const u=l.apply(n,r);return a?ur(u):u}let c=t;o!==n&&(a?c=function(u,h){return t.call(this,ur(u),h,n)}:t.length>2&&(c=function(u,h){return t.call(this,u,h,n)}));const d=l.call(o,c,i);return a&&s?s(d):d}function WI(n,e,t,i){const s=Xw(n);let r=t;return s!==n&&(Go(n)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,n)}):r=function(o,a,l){return t.call(this,o,ur(a),l,n)}),s[e](r,...i)}function I2(n,e,t){const i=Xn(n);dr(i,"iterate",Vg);const s=i[e](...t);return(s===-1||s===!1)&&MS(t[0])?(t[0]=Xn(t[0]),i[e](...t)):s}function $m(n,e,t=[]){Gd(),PS();const i=Xn(n)[e].apply(n,t);return RS(),Wd(),i}const bJ=TS("__proto__,__v_isRef,__isVue"),K9=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ia));function vJ(n){Ia(n)||(n=String(n));const e=Xn(this);return dr(e,"has",n),e.hasOwnProperty(n)}class Y9{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(s?r?AJ:J9:r?Z9:Q9).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Kt(e);if(!s){let l;if(o&&(l=mJ[t]))return l;if(t==="hasOwnProperty")return vJ}const a=Reflect.get(e,t,Pi(e)?e:i);return(Ia(t)?K9.has(t):bJ(t))||(s||dr(e,"get",t),r)?a:Pi(a)?o&&AS(t)?a:a.value:$i(a)?s?e7(a):Yi(a):a}}class X9 extends Y9{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const l=lh(r);if(!Go(i)&&!lh(i)&&(r=Xn(r),i=Xn(i)),!Kt(e)&&Pi(r)&&!Pi(i))return l?!1:(r.value=i,!0)}const o=Kt(e)&&AS(t)?Number(t)<e.length:vi(e,t),a=Reflect.set(e,t,i,Pi(e)?e:s);return e===Xn(s)&&(o?jr(i,r)&&dc(e,"set",t,i):dc(e,"add",t,i)),a}deleteProperty(e,t){const i=vi(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&dc(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!Ia(t)||!K9.has(t))&&dr(e,"has",t),i}ownKeys(e){return dr(e,"iterate",Kt(e)?"length":Ju),Reflect.ownKeys(e)}}class yJ extends Y9{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const wJ=new X9,xJ=new yJ,_J=new X9(!0);const UE=n=>n,C1=n=>Reflect.getPrototypeOf(n);function kJ(n,e,t){return function(...i){const s=this.__v_raw,r=Xn(s),o=Ff(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),d=t?UE:e?zE:ur;return!e&&dr(r,"iterate",l?VE:Ju),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function S1(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function EJ(n,e){const t={get(s){const r=this.__v_raw,o=Xn(r),a=Xn(s);n||(jr(s,a)&&dr(o,"get",s),dr(o,"get",a));const{has:l}=C1(o),c=e?UE:n?zE:ur;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!n&&dr(Xn(s),"iterate",Ju),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=Xn(r),a=Xn(s);return n||(jr(s,a)&&dr(o,"has",s),dr(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=Xn(a),c=e?UE:n?zE:ur;return!n&&dr(l,"iterate",Ju),a.forEach((d,u)=>s.call(r,c(d),c(u),o))}};return Ns(t,n?{add:S1("add"),set:S1("set"),delete:S1("delete"),clear:S1("clear")}:{add(s){!e&&!Go(s)&&!lh(s)&&(s=Xn(s));const r=Xn(this);return C1(r).has.call(r,s)||(r.add(s),dc(r,"add",s,s)),this},set(s,r){!e&&!Go(r)&&!lh(r)&&(r=Xn(r));const o=Xn(this),{has:a,get:l}=C1(o);let c=a.call(o,s);c||(s=Xn(s),c=a.call(o,s));const d=l.call(o,s);return o.set(s,r),c?jr(r,d)&&dc(o,"set",s,r):dc(o,"add",s,r),this},delete(s){const r=Xn(this),{has:o,get:a}=C1(r);let l=o.call(r,s);l||(s=Xn(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&dc(r,"delete",s,void 0),c},clear(){const s=Xn(this),r=s.size!==0,o=s.clear();return r&&dc(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=kJ(s,n,e)}),t}function LS(n,e){const t=EJ(n,e);return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(vi(t,s)&&s in i?t:i,s,r)}const TJ={get:LS(!1,!1)},CJ={get:LS(!1,!0)},SJ={get:LS(!0,!1)};const Q9=new WeakMap,Z9=new WeakMap,J9=new WeakMap,AJ=new WeakMap;function IJ(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function PJ(n){return n.__v_skip||!Object.isExtensible(n)?0:IJ(eJ(n))}function Yi(n){return lh(n)?n:DS(n,!1,wJ,TJ,Q9)}function OS(n){return DS(n,!1,_J,CJ,Z9)}function e7(n){return DS(n,!0,xJ,SJ,J9)}function DS(n,e,t,i,s){if(!$i(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=PJ(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function bc(n){return lh(n)?bc(n.__v_raw):!!(n&&n.__v_isReactive)}function lh(n){return!!(n&&n.__v_isReadonly)}function Go(n){return!!(n&&n.__v_isShallow)}function MS(n){return n?!!n.__v_raw:!1}function Xn(n){const e=n&&n.__v_raw;return e?Xn(e):n}function Qw(n){return!vi(n,"__v_skip")&&Object.isExtensible(n)&&$9(n,"__v_skip",!0),n}const ur=n=>$i(n)?Yi(n):n,zE=n=>$i(n)?e7(n):n;function Pi(n){return n?n.__v_isRef===!0:!1}function K(n){return t7(n,!1)}function jp(n){return t7(n,!0)}function t7(n,e){return Pi(n)?n:new RJ(n,e)}class RJ{constructor(e,t){this.dep=new Yw,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Xn(e),this._value=t?e:ur(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Go(e)||lh(e);e=i?e:Xn(e),jr(e,t)&&(this._rawValue=e,this._value=i?e:ur(e),this.dep.trigger())}}function y(n){return Pi(n)?n.value:n}const $J={get:(n,e,t)=>e==="__v_raw"?n:y(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return Pi(s)&&!Pi(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function n7(n){return bc(n)?n:new Proxy(n,$J)}class LJ{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Yw,{get:i,set:s}=e(t.track.bind(t),t.trigger.bind(t));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function OJ(n){return new LJ(n)}function i7(n){const e=Kt(n)?new Array(n.length):{};for(const t in n)e[t]=s7(n,t);return e}class DJ{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return pJ(Xn(this._object),this._key)}}class MJ{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function NJ(n,e,t){return Pi(n)?n:yn(n)?new MJ(n):$i(n)&&arguments.length>1?s7(n,e,t):K(n)}function s7(n,e,t){const i=n[e];return Pi(i)?i:new DJ(n,e,t)}class FJ{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Yw(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Bg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Ui!==this)return z9(this,!0),!0}get value(){const e=this.dep.track();return G9(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function BJ(n,e,t=!1){let i,s;return yn(n)?i=n:(i=n.get,s=n.set),new FJ(i,s,t)}const A1={},fy=new WeakMap;let $u;function VJ(n,e=!1,t=$u){if(t){let i=fy.get(t);i||fy.set(t,i=[]),i.push(n)}}function UJ(n,e,t=ui){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=t,c=E=>s?E:Go(E)||s===!1||s===0?uc(E,1):uc(E);let d,u,h,f,m=!1,g=!1;if(Pi(n)?(u=()=>n.value,m=Go(n)):bc(n)?(u=()=>c(n),m=!0):Kt(n)?(g=!0,m=n.some(E=>bc(E)||Go(E)),u=()=>n.map(E=>{if(Pi(E))return E.value;if(bc(E))return c(E);if(yn(E))return l?l(E,2):E()})):yn(n)?e?u=l?()=>l(n,2):n:u=()=>{if(h){Gd();try{h()}finally{Wd()}}const E=$u;$u=d;try{return l?l(n,3,[f]):n(f)}finally{$u=E}}:u=_l,e&&s){const E=u,T=s===!0?1/0:s;u=()=>uc(E(),T)}const b=F9(),w=()=>{d.stop(),b&&b.active&&SS(b.effects,d)};if(r&&e){const E=e;e=(...T)=>{E(...T),w()}}let x=g?new Array(n.length).fill(A1):A1;const k=E=>{if(!(!(d.flags&1)||!d.dirty&&!E))if(e){const T=d.run();if(s||m||(g?T.some((P,C)=>jr(P,x[C])):jr(T,x))){h&&h();const P=$u;$u=d;try{const C=[T,x===A1?void 0:g&&x[0]===A1?[]:x,f];l?l(e,3,C):e(...C),x=T}finally{$u=P}}}else d.run()};return a&&a(k),d=new V9(u),d.scheduler=o?()=>o(k,!1):k,f=E=>VJ(E,!1,d),h=d.onStop=()=>{const E=fy.get(d);if(E){if(l)l(E,4);else for(const T of E)T();fy.delete(d)}},e?i?k(!0):x=d.run():o?o(k.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function uc(n,e=1/0,t){if(e<=0||!$i(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Pi(n))uc(n.value,e,t);else if(Kt(n))for(let i=0;i<n.length;i++)uc(n[i],e,t);else if(Hp(n)||Ff(n))n.forEach(i=>{uc(i,e,t)});else if(R9(n)){for(const i in n)uc(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&uc(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function J0(n,e,t,i){try{return i?n(...i):n()}catch(s){eb(s,e,t)}}function Pa(n,e,t,i){if(yn(n)){const s=J0(n,e,t,i);return s&&I9(s)&&s.catch(r=>{eb(r,e,t)}),s}if(Kt(n)){const s=[];for(let r=0;r<n.length;r++)s.push(Pa(n[r],e,t,i));return s}}function eb(n,e,t,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ui;if(e){let a=e.parent;const l=e.proxy,c="https://vuejs.org/error-reference/#runtime-".concat(t);for(;a;){const d=a.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](n,l,c)===!1)return}a=a.parent}if(r){Gd(),J0(r,null,10,[n,l,c]),Wd();return}}zJ(n,t,s,i,o)}function zJ(n,e,t,i=!0,s=!1){if(s)throw n;console.error(n)}const Cr=[];let sl=-1;const Bf=[];let ld=null,vf=0;const r7=Promise.resolve();let py=null;function vc(n){const e=py||r7;return n?e.then(this?n.bind(this):n):e}function HJ(n){let e=sl+1,t=Cr.length;for(;e<t;){const i=e+t>>>1,s=Cr[i],r=Ug(s);r<n||r===n&&s.flags&2?e=i+1:t=i}return e}function NS(n){if(!(n.flags&1)){const e=Ug(n),t=Cr[Cr.length-1];!t||!(n.flags&2)&&e>=Ug(t)?Cr.push(n):Cr.splice(HJ(e),0,n),n.flags|=1,o7()}}function o7(){py||(py=r7.then(l7))}function jJ(n){Kt(n)?Bf.push(...n):ld&&n.id===-1?ld.splice(vf+1,0,n):n.flags&1||(Bf.push(n),n.flags|=1),o7()}function qI(n,e,t=sl+1){for(;t<Cr.length;t++){const i=Cr[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;Cr.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function a7(n){if(Bf.length){const e=[...new Set(Bf)].sort((t,i)=>Ug(t)-Ug(i));if(Bf.length=0,ld){ld.push(...e);return}for(ld=e,vf=0;vf<ld.length;vf++){const t=ld[vf];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}ld=null,vf=0}}const Ug=n=>n.id==null?n.flags&2?-1:1/0:n.id;function l7(n){try{for(sl=0;sl<Cr.length;sl++){const e=Cr[sl];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),J0(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;sl<Cr.length;sl++){const e=Cr[sl];e&&(e.flags&=-2)}sl=-1,Cr.length=0,a7(),py=null,(Cr.length||Bf.length)&&l7()}}let Ds=null,c7=null;function my(n){const e=Ds;return Ds=n,c7=n&&n.type.__scopeId||null,e}function j(n,e=Ds,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&aP(-1);const r=my(e);let o;try{o=n(...s)}finally{my(r),i._d&&aP(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function si(n,e){if(Ds===null)return n;const t=ix(Ds),i=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=ui]=e[s];r&&(yn(r)&&(r={mounted:r,updated:r}),r.deep&&uc(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function vu(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Gd(),Pa(l,t,8,[n.el,a,n,e]),Wd())}}const d7=Symbol("_vte"),u7=n=>n.__isTeleport,ug=n=>n&&(n.disabled||n.disabled===""),KI=n=>n&&(n.defer||n.defer===""),YI=n=>typeof SVGElement<"u"&&n instanceof SVGElement,XI=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,HE=(n,e)=>{const t=n&&n.to;return ss(t)?e?e(t):null:t},h7={name:"Teleport",__isTeleport:!0,process(n,e,t,i,s,r,o,a,l,c){const{mc:d,pc:u,pbc:h,o:{insert:f,querySelector:m,createText:g,createComment:b}}=c,w=ug(e.props);let{shapeFlag:x,children:k,dynamicChildren:E}=e;if(n==null){const T=e.el=g(""),P=e.anchor=g("");f(T,t,i),f(P,t,i);const C=(R,M)=>{x&16&&(s&&s.isCE&&(s.ce._teleportTarget=R),d(k,R,M,s,r,o,a,l))},A=()=>{const R=e.target=HE(e.props,m),M=f7(R,e,g,f);R&&(o!=="svg"&&YI(R)?o="svg":o!=="mathml"&&XI(R)&&(o="mathml"),w||(C(R,M),Rv(e,!1)))};w&&(C(t,P),Rv(e,!0)),KI(e.props)?kr(()=>{A(),e.el.__isMounted=!0},r):A()}else{if(KI(e.props)&&!n.el.__isMounted){kr(()=>{h7.process(n,e,t,i,s,r,o,a,l,c),delete n.el.__isMounted},r);return}e.el=n.el,e.targetStart=n.targetStart;const T=e.anchor=n.anchor,P=e.target=n.target,C=e.targetAnchor=n.targetAnchor,A=ug(n.props),R=A?t:P,M=A?T:C;if(o==="svg"||YI(P)?o="svg":(o==="mathml"||XI(P))&&(o="mathml"),E?(h(n.dynamicChildren,E,R,s,r,o,a),US(n,e,!0)):l||u(n,e,R,M,s,r,o,a,!1),w)A?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):I1(e,t,T,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const N=e.target=HE(e.props,m);N&&I1(e,N,null,c,0)}else A&&I1(e,P,C,c,1);Rv(e,w)}},remove(n,e,t,{um:i,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:u,props:h}=n;if(u&&(s(c),s(d)),r&&s(l),o&16){const f=r||!ug(h);for(let m=0;m<a.length;m++){const g=a[m];i(g,e,t,f,!!g.dynamicChildren)}}},move:I1,hydrate:GJ};function I1(n,e,t,{o:{insert:i},m:s},r=2){r===0&&i(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=n,u=r===2;if(u&&i(o,e,t),(!u||ug(d))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,t,2);u&&i(a,e,t)}function GJ(n,e,t,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},u){const h=e.target=HE(e.props,l);if(h){const f=ug(e.props),m=h._lpa||h.firstChild;if(e.shapeFlag&16)if(f)e.anchor=u(o(n),e,a(n),t,i,s,r),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(n);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}g=o(g)}e.targetAnchor||f7(h,e,d,c),u(m&&o(m),e,h,t,i,s,r)}Rv(e,f)}return e.anchor&&o(e.anchor)}const WJ=h7;function Rv(n,e){const t=n.ctx;if(t&&t.ut){let i,s;for(e?(i=n.el,s=n.anchor):(i=n.targetStart,s=n.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function f7(n,e,t,i){const s=e.targetStart=t(""),r=e.targetAnchor=t("");return s[d7]=r,n&&(i(s,n),i(r,n)),r}const cd=Symbol("_leaveCb"),P1=Symbol("_enterCb");function qJ(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return on(()=>{n.isMounted=!0}),_h(()=>{n.isUnmounting=!0}),n}const Do=[Function,Array],p7={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Do,onEnter:Do,onAfterEnter:Do,onEnterCancelled:Do,onBeforeLeave:Do,onLeave:Do,onAfterLeave:Do,onLeaveCancelled:Do,onBeforeAppear:Do,onAppear:Do,onAfterAppear:Do,onAppearCancelled:Do},m7=n=>{const e=n.subTree;return e.component?m7(e.component):e},KJ={name:"BaseTransition",props:p7,setup(n,{slots:e}){const t=kh(),i=qJ();return()=>{const s=e.default&&v7(e.default(),!0);if(!s||!s.length)return;const r=g7(s),o=Xn(n),{mode:a}=o;if(i.isLeaving)return P2(r);const l=QI(r);if(!l)return P2(r);let c=jE(l,o,i,t,u=>c=u);l.type!==Sr&&zg(l,c);let d=t.subTree&&QI(t.subTree);if(d&&d.type!==Sr&&!Mu(l,d)&&m7(t).type!==Sr){let u=jE(d,o,i,t);if(zg(d,u),a==="out-in"&&l.type!==Sr)return i.isLeaving=!0,u.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete u.afterLeave,d=void 0},P2(r);a==="in-out"&&l.type!==Sr?u.delayLeave=(h,f,m)=>{const g=b7(i,d);g[String(d.key)]=d,h[cd]=()=>{f(),h[cd]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return r}}};function g7(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Sr){e=t;break}}return e}const YJ=KJ;function b7(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function jE(n,e,t,i,s){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:b,onAppear:w,onAfterAppear:x,onAppearCancelled:k}=e,E=String(n.key),T=b7(t,n),P=(R,M)=>{R&&Pa(R,i,9,M)},C=(R,M)=>{const N=M[1];P(R,M),Kt(R)?R.every(U=>U.length<=1)&&N():R.length<=1&&N()},A={mode:o,persisted:a,beforeEnter(R){let M=l;if(!t.isMounted)if(r)M=b||l;else return;R[cd]&&R[cd](!0);const N=T[E];N&&Mu(n,N)&&N.el[cd]&&N.el[cd](),P(M,[R])},enter(R){let M=c,N=d,U=u;if(!t.isMounted)if(r)M=w||c,N=x||d,U=k||u;else return;let G=!1;const B=R[P1]=te=>{G||(G=!0,te?P(U,[R]):P(N,[R]),A.delayedLeave&&A.delayedLeave(),R[P1]=void 0)};M?C(M,[R,B]):B()},leave(R,M){const N=String(n.key);if(R[P1]&&R[P1](!0),t.isUnmounting)return M();P(h,[R]);let U=!1;const G=R[cd]=B=>{U||(U=!0,M(),B?P(g,[R]):P(m,[R]),R[cd]=void 0,T[N]===n&&delete T[N])};T[N]=n,f?C(f,[R,G]):G()},clone(R){const M=jE(R,e,t,i,s);return s&&s(M),M}};return A}function P2(n){if(tb(n))return n=$d(n),n.children=null,n}function QI(n){if(!tb(n))return u7(n.type)&&n.children?g7(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&yn(t.default))return t.default()}}function zg(n,e){n.shapeFlag&6&&n.component?(n.transition=e,zg(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function v7(n,e=!1,t){let i=[],s=0;for(let r=0;r<n.length;r++){let o=n[r];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===Ue?(o.patchFlag&128&&s++,i=i.concat(v7(o.children,e,a))):(e||o.type!==Sr)&&i.push(a!=null?$d(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Fe(n,e){return yn(n)?Ns({name:n.name},e,{setup:n}):n}function XJ(){const n=kh();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function FS(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function gy(n,e,t,i,s=!1){if(Kt(n)){n.forEach((m,g)=>gy(m,e&&(Kt(e)?e[g]:e),t,i,s));return}if(Vf(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&gy(n,e,t,i.component.subTree);return}const r=i.shapeFlag&4?ix(i.component):i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,d=a.refs===ui?a.refs={}:a.refs,u=a.setupState,h=Xn(u),f=u===ui?()=>!1:m=>vi(h,m);if(c!=null&&c!==l&&(ss(c)?(d[c]=null,f(c)&&(u[c]=null)):Pi(c)&&(c.value=null)),yn(l))J0(l,a,12,[o,d]);else{const m=ss(l),g=Pi(l);if(m||g){const b=()=>{if(n.f){const w=m?f(l)?u[l]:d[l]:l.value;s?Kt(w)&&SS(w,r):Kt(w)?w.includes(r)||w.push(r):m?(d[l]=[r],f(l)&&(u[l]=d[l])):(l.value=[r],n.k&&(d[n.k]=l.value))}else m?(d[l]=o,f(l)&&(u[l]=o)):g&&(l.value=o,n.k&&(d[n.k]=o))};o?(b.id=-1,kr(b,t)):b()}}}const ZI=n=>n.nodeType===8;Kw().requestIdleCallback;Kw().cancelIdleCallback;function QJ(n,e){if(ZI(n)&&n.data==="["){let t=1,i=n.nextSibling;for(;i;){if(i.nodeType===1){if(e(i)===!1)break}else if(ZI(i))if(i.data==="]"){if(--t===0)break}else i.data==="["&&t++;i=i.nextSibling}}else e(n)}const Vf=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function ml(n){yn(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:i,delay:s=200,hydrate:r,timeout:o,suspensible:a=!0,onError:l}=n;let c=null,d,u=0;const h=()=>(u++,c=null,f()),f=()=>{let m;return c||(m=c=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((b,w)=>{l(g,()=>b(h()),()=>w(g),u+1)});throw g}).then(g=>m!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),d=g,g)))};return Fe({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(m,g,b){const w=r?()=>{const x=r(b,k=>QJ(m,k));x&&(g.bum||(g.bum=[])).push(x)}:b;d?w():f().then(()=>!g.isUnmounted&&w())},get __asyncResolved(){return d},setup(){const m=Os;if(FS(m),d)return()=>R2(d,m);const g=k=>{c=null,eb(k,m,13,!i)};if(a&&m.suspense||hp)return f().then(k=>()=>R2(k,m)).catch(k=>(g(k),()=>i?L(i,{error:k}):null));const b=K(!1),w=K(),x=K(!!s);return s&&setTimeout(()=>{x.value=!1},s),o!=null&&setTimeout(()=>{if(!b.value&&!w.value){const k=new Error("Async component timed out after ".concat(o,"ms."));g(k),w.value=k}},o),f().then(()=>{b.value=!0,m.parent&&tb(m.parent.vnode)&&m.parent.update()}).catch(k=>{g(k),w.value=k}),()=>{if(b.value&&d)return R2(d,m);if(w.value&&i)return L(i,{error:w.value});if(t&&!x.value)return L(t)}}})}function R2(n,e){const{ref:t,props:i,children:s,ce:r}=e.vnode,o=L(n,i,s);return o.ref=t,o.ce=r,delete e.vnode.ce,o}const tb=n=>n.type.__isKeepAlive;function ZJ(n,e){y7(n,"a",e)}function JJ(n,e){y7(n,"da",e)}function y7(n,e,t=Os){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Zw(e,i,t),t){let s=t.parent;for(;s&&s.parent;)tb(s.parent.vnode)&&eee(i,e,t,s),s=s.parent}}function eee(n,e,t,i){const s=Zw(e,n,i,!0);Jw(()=>{SS(i[e],s)},t)}function Zw(n,e,t=Os,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{Gd();const a=ib(t),l=Pa(e,t,n,o);return a(),Wd(),l});return i?s.unshift(r):s.push(r),r}}const Nc=n=>(e,t=Os)=>{(!hp||n==="sp")&&Zw(n,(...i)=>e(...i),t)},tr=Nc("bm"),on=Nc("m"),tee=Nc("bu"),BS=Nc("u"),_h=Nc("bum"),Jw=Nc("um"),nee=Nc("sp"),iee=Nc("rtg"),see=Nc("rtc");function ree(n,e=Os){Zw("ec",n,e)}const w7="components";function nb(n,e){return _7(w7,n,!0,e)||n}const x7=Symbol.for("v-ndc");function GE(n){return ss(n)?_7(w7,n,!1)||n:n||x7}function _7(n,e,t=!0,i=!1){const s=Ds||Os;if(s){const r=s.type;{const a=Gee(r,!1);if(a&&(a===e||a===yo(e)||a===qw(yo(e))))return r}const o=JI(s[n]||r[n],e)||JI(s.appContext[n],e);return!o&&i?r:o}}function JI(n,e){return n&&(n[e]||n[yo(e)]||n[qw(yo(e))])}function ct(n,e,t,i){let s;const r=t,o=Kt(n);if(o||ss(n)){const a=o&&bc(n);let l=!1;a&&(l=!Go(n),n=Xw(n)),s=new Array(n.length);for(let c=0,d=n.length;c<d;c++)s[c]=e(l?ur(n[c]):n[c],c,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,r)}else if($i(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];s[l]=e(n[d],d,l,r)}}else s=[];return s}function qr(n,e,t={},i,s){if(Ds.ce||Ds.parent&&Vf(Ds.parent)&&Ds.parent.ce)return e!=="default"&&(t.name=e),I(),ve(Ue,null,[L("slot",t,i&&i())],64);let r=n[e];r&&r._c&&(r._d=!1),I();const o=r&&k7(r(t)),a=t.key||o&&o.key,l=ve(Ue,{key:(a&&!Ia(a)?a:"_".concat(e))+(!o&&i?"_fb":"")},o||(i?i():[]),o&&n._===1?64:-2);return r&&r._c&&(r._d=!0),l}function k7(n){return n.some(e=>up(e)?!(e.type===Sr||e.type===Ue&&!k7(e.children)):!0)?n:null}function oee(n,e){const t={};for(const i in n)t[/[A-Z]/.test(i)?"on:".concat(i):Iv(i)]=n[i];return t}const WE=n=>n?W7(n)?ix(n):WE(n.parent):null,hg=Ns(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>WE(n.parent),$root:n=>WE(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>C7(n),$forceUpdate:n=>n.f||(n.f=()=>{NS(n.update)}),$nextTick:n=>n.n||(n.n=vc.bind(n.proxy)),$watch:n=>Pee.bind(n)}),$2=(n,e)=>n!==ui&&!n.__isScriptSetup&&vi(n,e),aee={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if($2(i,e))return o[e]=1,i[e];if(s!==ui&&vi(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&vi(c,e))return o[e]=3,r[e];if(t!==ui&&vi(t,e))return o[e]=4,t[e];qE&&(o[e]=0)}}const d=hg[e];let u,h;if(d)return e==="$attrs"&&dr(n.attrs,"get",""),d(n);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==ui&&vi(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,vi(h,e))return h[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return $2(s,e)?(s[e]=t,!0):i!==ui&&vi(i,e)?(i[e]=t,!0):vi(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==ui&&vi(n,o)||$2(e,o)||(a=r[0])&&vi(a,o)||vi(i,o)||vi(hg,o)||vi(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:vi(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function lee(){return E7().slots}function Nct(){return E7().attrs}function E7(){const n=kh();return n.setupContext||(n.setupContext=K7(n))}function by(n){return Kt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function Hg(n,e){return!n||!e?n||e:Kt(n)&&Kt(e)?n.concat(e):Ns({},by(n),by(e))}function cee(n,e){const t={};for(const i in n)e.includes(i)||Object.defineProperty(t,i,{enumerable:!0,get:()=>n[i]});return t}let qE=!0;function dee(n){const e=C7(n),t=n.proxy,i=n.ctx;qE=!1,e.beforeCreate&&eP(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:f,updated:m,activated:g,deactivated:b,beforeDestroy:w,beforeUnmount:x,destroyed:k,unmounted:E,render:T,renderTracked:P,renderTriggered:C,errorCaptured:A,serverPrefetch:R,expose:M,inheritAttrs:N,components:U,directives:G,filters:B}=e;if(c&&uee(c,i,null),o)for(const ue in o){const he=o[ue];yn(he)&&(i[ue]=he.bind(t))}if(s){const ue=s.call(t,t);$i(ue)&&(n.data=Yi(ue))}if(qE=!0,r)for(const ue in r){const he=r[ue],Ie=yn(he)?he.bind(t,t):yn(he.get)?he.get.bind(t,t):_l,xe=!yn(he)&&yn(he.set)?he.set.bind(t):_l,Be=lt({get:Ie,set:xe});Object.defineProperty(i,ue,{enumerable:!0,configurable:!0,get:()=>Be.value,set:Pe=>Be.value=Pe})}if(a)for(const ue in a)T7(a[ue],i,t,ue);if(l){const ue=yn(l)?l.call(t):l;Reflect.ownKeys(ue).forEach(he=>{Ad(he,ue[he])})}d&&eP(d,n,"c");function X(ue,he){Kt(he)?he.forEach(Ie=>ue(Ie.bind(t))):he&&ue(he.bind(t))}if(X(tr,u),X(on,h),X(tee,f),X(BS,m),X(ZJ,g),X(JJ,b),X(ree,A),X(see,P),X(iee,C),X(_h,x),X(Jw,E),X(nee,R),Kt(M))if(M.length){const ue=n.exposed||(n.exposed={});M.forEach(he=>{Object.defineProperty(ue,he,{get:()=>t[he],set:Ie=>t[he]=Ie})})}else n.exposed||(n.exposed={});T&&n.render===_l&&(n.render=T),N!=null&&(n.inheritAttrs=N),U&&(n.components=U),G&&(n.directives=G),R&&FS(n)}function uee(n,e,t=_l){Kt(n)&&(n=KE(n));for(const i in n){const s=n[i];let r;$i(s)?"default"in s?r=qi(s.from||i,s.default,!0):r=qi(s.from||i):r=qi(s),Pi(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function eP(n,e,t){Pa(Kt(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function T7(n,e,t,i){let s=i.includes(".")?B7(t,i):()=>t[i];if(ss(n)){const r=e[n];yn(r)&&ki(s,r)}else if(yn(n))ki(s,n.bind(t));else if($i(n))if(Kt(n))n.forEach(r=>T7(r,e,t,i));else{const r=yn(n.handler)?n.handler.bind(t):e[n.handler];yn(r)&&ki(s,r,n)}}function C7(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>vy(l,c,o,!0)),vy(l,e,o)),$i(e)&&r.set(e,l),l}function vy(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&vy(n,r,t,!0),s&&s.forEach(o=>vy(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=hee[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const hee={data:tP,props:nP,emits:nP,methods:Zm,computed:Zm,beforeCreate:yr,created:yr,beforeMount:yr,mounted:yr,beforeUpdate:yr,updated:yr,beforeDestroy:yr,beforeUnmount:yr,destroyed:yr,unmounted:yr,activated:yr,deactivated:yr,errorCaptured:yr,serverPrefetch:yr,components:Zm,directives:Zm,watch:pee,provide:tP,inject:fee};function tP(n,e){return e?n?function(){return Ns(yn(n)?n.call(this,this):n,yn(e)?e.call(this,this):e)}:e:n}function fee(n,e){return Zm(KE(n),KE(e))}function KE(n){if(Kt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function yr(n,e){return n?[...new Set([].concat(n,e))]:e}function Zm(n,e){return n?Ns(Object.create(null),n,e):e}function nP(n,e){return n?Kt(n)&&Kt(e)?[...new Set([...n,...e])]:Ns(Object.create(null),by(n),by(e!=null?e:{})):e}function pee(n,e){if(!n)return e;if(!e)return n;const t=Ns(Object.create(null),n);for(const i in e)t[i]=yr(n[i],e[i]);return t}function S7(){return{app:null,config:{isNativeTag:ZZ,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mee=0;function gee(n,e){return function(i,s=null){yn(i)||(i=Ns({},i)),s!=null&&!$i(s)&&(s=null);const r=S7(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:mee++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:HS,get config(){return r.config},set config(d){},use(d,...u){return o.has(d)||(d&&yn(d.install)?(o.add(d),d.install(c,...u)):yn(d)&&(o.add(d),d(c,...u))),c},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),c},component(d,u){return u?(r.components[d]=u,c):r.components[d]},directive(d,u){return u?(r.directives[d]=u,c):r.directives[d]},mount(d,u,h){if(!l){const f=c._ceVNode||L(i,s);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),n(f,d,h),l=!0,c._container=d,d.__vue_app__=c,ix(f.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Pa(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(d,u){return r.provides[d]=u,c},runWithContext(d){const u=eh;eh=c;try{return d()}finally{eh=u}}};return c}}let eh=null;function Ad(n,e){if(Os){let t=Os.provides;const i=Os.parent&&Os.parent.provides;i===t&&(t=Os.provides=Object.create(i)),t[n]=e}}function qi(n,e,t=!1){const i=Os||Ds;if(i||eh){const s=eh?eh._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&yn(e)?e.call(i&&i.proxy):e}}function A7(){return!!(Os||Ds||eh)}const I7={},P7=()=>Object.create(I7),R7=n=>Object.getPrototypeOf(n)===I7;function bee(n,e,t,i=!1){const s={},r=P7();n.propsDefaults=Object.create(null),$7(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:OS(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function vee(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=Xn(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(tx(n.emitsOptions,h))continue;const f=e[h];if(l)if(vi(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const m=yo(h);s[m]=YE(l,a,m,f,n,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{$7(n,e,s,r)&&(c=!0);let d;for(const u in a)(!e||!vi(e,u)&&((d=jd(u))===u||!vi(e,d)))&&(l?t&&(t[u]!==void 0||t[d]!==void 0)&&(s[u]=YE(l,a,u,void 0,n,!0)):delete s[u]);if(r!==a)for(const u in r)(!e||!vi(e,u))&&(delete r[u],c=!0)}c&&dc(n.attrs,"set","")}function $7(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(lg(l))continue;const c=e[l];let d;s&&vi(s,d=yo(l))?!r||!r.includes(d)?t[d]=c:(a||(a={}))[d]=c:tx(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=Xn(t),c=a||ui;for(let d=0;d<r.length;d++){const u=r[d];t[u]=YE(s,l,u,c[u],n,!vi(c,u))}}return o}function YE(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=vi(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&yn(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const d=ib(s);i=c[t]=l.call(null,e),d()}}else i=l;s.ce&&s.ce._setProp(t,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===jd(t))&&(i=!0))}return i}const yee=new WeakMap;function L7(n,e,t=!1){const i=t?yee:e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!yn(n)){const d=u=>{l=!0;const[h,f]=L7(u,e,!0);Ns(o,h),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!l)return $i(n)&&i.set(n,Nf),Nf;if(Kt(r))for(let d=0;d<r.length;d++){const u=yo(r[d]);iP(u)&&(o[u]=ui)}else if(r)for(const d in r){const u=yo(d);if(iP(u)){const h=r[d],f=o[u]=Kt(h)||yn(h)?{type:h}:Ns({},h),m=f.type;let g=!1,b=!0;if(Kt(m))for(let w=0;w<m.length;++w){const x=m[w],k=yn(x)&&x.name;if(k==="Boolean"){g=!0;break}else k==="String"&&(b=!1)}else g=yn(m)&&m.name==="Boolean";f[0]=g,f[1]=b,(g||vi(f,"default"))&&a.push(u)}}const c=[o,a];return $i(n)&&i.set(n,c),c}function iP(n){return n[0]!=="$"&&!lg(n)}const O7=n=>n[0]==="_"||n==="$stable",VS=n=>Kt(n)?n.map(fl):[fl(n)],wee=(n,e,t)=>{if(e._n)return e;const i=j((...s)=>VS(e(...s)),t);return i._c=!1,i},D7=(n,e,t)=>{const i=n._ctx;for(const s in n){if(O7(s))continue;const r=n[s];if(yn(r))e[s]=wee(s,r,i);else if(r!=null){const o=VS(r);e[s]=()=>o}}},M7=(n,e)=>{const t=VS(e);n.slots.default=()=>t},N7=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},xee=(n,e,t)=>{const i=n.slots=P7();if(n.vnode.shapeFlag&32){const s=e._;s?(N7(i,e,t),t&&$9(i,"_",s,!0)):D7(e,i)}else e&&M7(n,e)},_ee=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=ui;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:N7(s,e,t):(r=!e.$stable,D7(e,s)),o=e}else e&&(M7(n,e),o={default:1});if(r)for(const a in s)!O7(a)&&o[a]==null&&delete s[a]},kr=Mee;function kee(n){return Eee(n)}function Eee(n,e){const t=Kw();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:f=_l,insertStaticContent:m}=n,g=(V,F,z,se=null,Te=null,ke=null,Ce=void 0,ge=null,He=!!F.dynamicChildren)=>{if(V===F)return;V&&!Mu(V,F)&&(se=le(V),Pe(V,Te,ke,!0),V=null),F.patchFlag===-2&&(He=!1,F.dynamicChildren=null);const{type:Ge,ref:mt,shapeFlag:ut}=F;switch(Ge){case nx:b(V,F,z,se);break;case Sr:w(V,F,z,se);break;case O2:V==null&&x(F,z,se,Ce);break;case Ue:U(V,F,z,se,Te,ke,Ce,ge,He);break;default:ut&1?T(V,F,z,se,Te,ke,Ce,ge,He):ut&6?G(V,F,z,se,Te,ke,Ce,ge,He):(ut&64||ut&128)&&Ge.process(V,F,z,se,Te,ke,Ce,ge,He,ie)}mt!=null&&Te&&gy(mt,V&&V.ref,ke,F||V,!F)},b=(V,F,z,se)=>{if(V==null)i(F.el=a(F.children),z,se);else{const Te=F.el=V.el;F.children!==V.children&&c(Te,F.children)}},w=(V,F,z,se)=>{V==null?i(F.el=l(F.children||""),z,se):F.el=V.el},x=(V,F,z,se)=>{[V.el,V.anchor]=m(V.children,F,z,se,V.el,V.anchor)},k=({el:V,anchor:F},z,se)=>{let Te;for(;V&&V!==F;)Te=h(V),i(V,z,se),V=Te;i(F,z,se)},E=({el:V,anchor:F})=>{let z;for(;V&&V!==F;)z=h(V),s(V),V=z;s(F)},T=(V,F,z,se,Te,ke,Ce,ge,He)=>{F.type==="svg"?Ce="svg":F.type==="math"&&(Ce="mathml"),V==null?P(F,z,se,Te,ke,Ce,ge,He):R(V,F,Te,ke,Ce,ge,He)},P=(V,F,z,se,Te,ke,Ce,ge)=>{let He,Ge;const{props:mt,shapeFlag:ut,transition:xt,dirs:kt}=V;if(He=V.el=o(V.type,ke,mt&&mt.is,mt),ut&8?d(He,V.children):ut&16&&A(V.children,He,null,se,Te,L2(V,ke),Ce,ge),kt&&vu(V,null,se,"created"),C(He,V,V.scopeId,Ce,se),mt){for(const Je in mt)Je!=="value"&&!lg(Je)&&r(He,Je,null,mt[Je],ke,se);"value"in mt&&r(He,"value",null,mt.value,ke),(Ge=mt.onVnodeBeforeMount)&&Za(Ge,se,V)}kt&&vu(V,null,se,"beforeMount");const It=Tee(Te,xt);It&&xt.beforeEnter(He),i(He,F,z),((Ge=mt&&mt.onVnodeMounted)||It||kt)&&kr(()=>{Ge&&Za(Ge,se,V),It&&xt.enter(He),kt&&vu(V,null,se,"mounted")},Te)},C=(V,F,z,se,Te)=>{if(z&&f(V,z),se)for(let ke=0;ke<se.length;ke++)f(V,se[ke]);if(Te){let ke=Te.subTree;if(F===ke||z7(ke.type)&&(ke.ssContent===F||ke.ssFallback===F)){const Ce=Te.vnode;C(V,Ce,Ce.scopeId,Ce.slotScopeIds,Te.parent)}}},A=(V,F,z,se,Te,ke,Ce,ge,He=0)=>{for(let Ge=He;Ge<V.length;Ge++){const mt=V[Ge]=ge?dd(V[Ge]):fl(V[Ge]);g(null,mt,F,z,se,Te,ke,Ce,ge)}},R=(V,F,z,se,Te,ke,Ce)=>{const ge=F.el=V.el;let{patchFlag:He,dynamicChildren:Ge,dirs:mt}=F;He|=V.patchFlag&16;const ut=V.props||ui,xt=F.props||ui;let kt;if(z&&yu(z,!1),(kt=xt.onVnodeBeforeUpdate)&&Za(kt,z,F,V),mt&&vu(F,V,z,"beforeUpdate"),z&&yu(z,!0),(ut.innerHTML&&xt.innerHTML==null||ut.textContent&&xt.textContent==null)&&d(ge,""),Ge?M(V.dynamicChildren,Ge,ge,z,se,L2(F,Te),ke):Ce||he(V,F,ge,null,z,se,L2(F,Te),ke,!1),He>0){if(He&16)N(ge,ut,xt,z,Te);else if(He&2&&ut.class!==xt.class&&r(ge,"class",null,xt.class,Te),He&4&&r(ge,"style",ut.style,xt.style,Te),He&8){const It=F.dynamicProps;for(let Je=0;Je<It.length;Je++){const rt=It[Je],Ct=ut[rt],Pt=xt[rt];(Pt!==Ct||rt==="value")&&r(ge,rt,Ct,Pt,Te,z)}}He&1&&V.children!==F.children&&d(ge,F.children)}else!Ce&&Ge==null&&N(ge,ut,xt,z,Te);((kt=xt.onVnodeUpdated)||mt)&&kr(()=>{kt&&Za(kt,z,F,V),mt&&vu(F,V,z,"updated")},se)},M=(V,F,z,se,Te,ke,Ce)=>{for(let ge=0;ge<F.length;ge++){const He=V[ge],Ge=F[ge],mt=He.el&&(He.type===Ue||!Mu(He,Ge)||He.shapeFlag&70)?u(He.el):z;g(He,Ge,mt,null,se,Te,ke,Ce,!0)}},N=(V,F,z,se,Te)=>{if(F!==z){if(F!==ui)for(const ke in F)!lg(ke)&&!(ke in z)&&r(V,ke,F[ke],null,Te,se);for(const ke in z){if(lg(ke))continue;const Ce=z[ke],ge=F[ke];Ce!==ge&&ke!=="value"&&r(V,ke,ge,Ce,Te,se)}"value"in z&&r(V,"value",F.value,z.value,Te)}},U=(V,F,z,se,Te,ke,Ce,ge,He)=>{const Ge=F.el=V?V.el:a(""),mt=F.anchor=V?V.anchor:a("");let{patchFlag:ut,dynamicChildren:xt,slotScopeIds:kt}=F;kt&&(ge=ge?ge.concat(kt):kt),V==null?(i(Ge,z,se),i(mt,z,se),A(F.children||[],z,mt,Te,ke,Ce,ge,He)):ut>0&&ut&64&&xt&&V.dynamicChildren?(M(V.dynamicChildren,xt,z,Te,ke,Ce,ge),(F.key!=null||Te&&F===Te.subTree)&&US(V,F,!0)):he(V,F,z,mt,Te,ke,Ce,ge,He)},G=(V,F,z,se,Te,ke,Ce,ge,He)=>{F.slotScopeIds=ge,V==null?F.shapeFlag&512?Te.ctx.activate(F,z,se,Ce,He):B(F,z,se,Te,ke,Ce,He):te(V,F,He)},B=(V,F,z,se,Te,ke,Ce)=>{const ge=V.component=Uee(V,se,Te);if(tb(V)&&(ge.ctx.renderer=ie),zee(ge,!1,Ce),ge.asyncDep){if(Te&&Te.registerDep(ge,X,Ce),!V.el){const He=ge.subTree=L(Sr);w(null,He,F,z)}}else X(ge,V,F,z,Te,ke,Ce)},te=(V,F,z)=>{const se=F.component=V.component;if(Oee(V,F,z))if(se.asyncDep&&!se.asyncResolved){ue(se,F,z);return}else se.next=F,se.update();else F.el=V.el,se.vnode=F},X=(V,F,z,se,Te,ke,Ce)=>{const ge=()=>{if(V.isMounted){let{next:ut,bu:xt,u:kt,parent:It,vnode:Je}=V;{const mn=F7(V);if(mn){ut&&(ut.el=Je.el,ue(V,ut,Ce)),mn.asyncDep.then(()=>{V.isUnmounted||ge()});return}}let rt=ut,Ct;yu(V,!1),ut?(ut.el=Je.el,ue(V,ut,Ce)):ut=Je,xt&&Pv(xt),(Ct=ut.props&&ut.props.onVnodeBeforeUpdate)&&Za(Ct,It,ut,Je),yu(V,!0);const Pt=rP(V),Xt=V.subTree;V.subTree=Pt,g(Xt,Pt,u(Xt.el),le(Xt),V,Te,ke),ut.el=Pt.el,rt===null&&Dee(V,Pt.el),kt&&kr(kt,Te),(Ct=ut.props&&ut.props.onVnodeUpdated)&&kr(()=>Za(Ct,It,ut,Je),Te)}else{let ut;const{el:xt,props:kt}=F,{bm:It,m:Je,parent:rt,root:Ct,type:Pt}=V,Xt=Vf(F);yu(V,!1),It&&Pv(It),!Xt&&(ut=kt&&kt.onVnodeBeforeMount)&&Za(ut,rt,F),yu(V,!0);{Ct.ce&&Ct.ce._injectChildStyle(Pt);const mn=V.subTree=rP(V);g(null,mn,z,se,V,Te,ke),F.el=mn.el}if(Je&&kr(Je,Te),!Xt&&(ut=kt&&kt.onVnodeMounted)){const mn=F;kr(()=>Za(ut,rt,mn),Te)}(F.shapeFlag&256||rt&&Vf(rt.vnode)&&rt.vnode.shapeFlag&256)&&V.a&&kr(V.a,Te),V.isMounted=!0,F=z=se=null}};V.scope.on();const He=V.effect=new V9(ge);V.scope.off();const Ge=V.update=He.run.bind(He),mt=V.job=He.runIfDirty.bind(He);mt.i=V,mt.id=V.uid,He.scheduler=()=>NS(mt),yu(V,!0),Ge()},ue=(V,F,z)=>{F.component=V;const se=V.vnode.props;V.vnode=F,V.next=null,vee(V,F.props,se,z),_ee(V,F.children,z),Gd(),qI(V),Wd()},he=(V,F,z,se,Te,ke,Ce,ge,He=!1)=>{const Ge=V&&V.children,mt=V?V.shapeFlag:0,ut=F.children,{patchFlag:xt,shapeFlag:kt}=F;if(xt>0){if(xt&128){xe(Ge,ut,z,se,Te,ke,Ce,ge,He);return}else if(xt&256){Ie(Ge,ut,z,se,Te,ke,Ce,ge,He);return}}kt&8?(mt&16&&ze(Ge,Te,ke),ut!==Ge&&d(z,ut)):mt&16?kt&16?xe(Ge,ut,z,se,Te,ke,Ce,ge,He):ze(Ge,Te,ke,!0):(mt&8&&d(z,""),kt&16&&A(ut,z,se,Te,ke,Ce,ge,He))},Ie=(V,F,z,se,Te,ke,Ce,ge,He)=>{V=V||Nf,F=F||Nf;const Ge=V.length,mt=F.length,ut=Math.min(Ge,mt);let xt;for(xt=0;xt<ut;xt++){const kt=F[xt]=He?dd(F[xt]):fl(F[xt]);g(V[xt],kt,z,null,Te,ke,Ce,ge,He)}Ge>mt?ze(V,Te,ke,!0,!1,ut):A(F,z,se,Te,ke,Ce,ge,He,ut)},xe=(V,F,z,se,Te,ke,Ce,ge,He)=>{let Ge=0;const mt=F.length;let ut=V.length-1,xt=mt-1;for(;Ge<=ut&&Ge<=xt;){const kt=V[Ge],It=F[Ge]=He?dd(F[Ge]):fl(F[Ge]);if(Mu(kt,It))g(kt,It,z,null,Te,ke,Ce,ge,He);else break;Ge++}for(;Ge<=ut&&Ge<=xt;){const kt=V[ut],It=F[xt]=He?dd(F[xt]):fl(F[xt]);if(Mu(kt,It))g(kt,It,z,null,Te,ke,Ce,ge,He);else break;ut--,xt--}if(Ge>ut){if(Ge<=xt){const kt=xt+1,It=kt<mt?F[kt].el:se;for(;Ge<=xt;)g(null,F[Ge]=He?dd(F[Ge]):fl(F[Ge]),z,It,Te,ke,Ce,ge,He),Ge++}}else if(Ge>xt)for(;Ge<=ut;)Pe(V[Ge],Te,ke,!0),Ge++;else{const kt=Ge,It=Ge,Je=new Map;for(Ge=It;Ge<=xt;Ge++){const ri=F[Ge]=He?dd(F[Ge]):fl(F[Ge]);ri.key!=null&&Je.set(ri.key,Ge)}let rt,Ct=0;const Pt=xt-It+1;let Xt=!1,mn=0;const In=new Array(Pt);for(Ge=0;Ge<Pt;Ge++)In[Ge]=0;for(Ge=kt;Ge<=ut;Ge++){const ri=V[Ge];if(Ct>=Pt){Pe(ri,Te,ke,!0);continue}let wn;if(ri.key!=null)wn=Je.get(ri.key);else for(rt=It;rt<=xt;rt++)if(In[rt-It]===0&&Mu(ri,F[rt])){wn=rt;break}wn===void 0?Pe(ri,Te,ke,!0):(In[wn-It]=Ge+1,wn>=mn?mn=wn:Xt=!0,g(ri,F[wn],z,null,Te,ke,Ce,ge,He),Ct++)}const ci=Xt?Cee(In):Nf;for(rt=ci.length-1,Ge=Pt-1;Ge>=0;Ge--){const ri=It+Ge,wn=F[ri],Mn=ri+1<mt?F[ri+1].el:se;In[Ge]===0?g(null,wn,z,Mn,Te,ke,Ce,ge,He):Xt&&(rt<0||Ge!==ci[rt]?Be(wn,z,Mn,2):rt--)}}},Be=(V,F,z,se,Te=null)=>{const{el:ke,type:Ce,transition:ge,children:He,shapeFlag:Ge}=V;if(Ge&6){Be(V.component.subTree,F,z,se);return}if(Ge&128){V.suspense.move(F,z,se);return}if(Ge&64){Ce.move(V,F,z,ie);return}if(Ce===Ue){i(ke,F,z);for(let ut=0;ut<He.length;ut++)Be(He[ut],F,z,se);i(V.anchor,F,z);return}if(Ce===O2){k(V,F,z);return}if(se!==2&&Ge&1&&ge)if(se===0)ge.beforeEnter(ke),i(ke,F,z),kr(()=>ge.enter(ke),Te);else{const{leave:ut,delayLeave:xt,afterLeave:kt}=ge,It=()=>i(ke,F,z),Je=()=>{ut(ke,()=>{It(),kt&&kt()})};xt?xt(ke,It,Je):Je()}else i(ke,F,z)},Pe=(V,F,z,se=!1,Te=!1)=>{const{type:ke,props:Ce,ref:ge,children:He,dynamicChildren:Ge,shapeFlag:mt,patchFlag:ut,dirs:xt,cacheIndex:kt}=V;if(ut===-2&&(Te=!1),ge!=null&&gy(ge,null,z,V,!0),kt!=null&&(F.renderCache[kt]=void 0),mt&256){F.ctx.deactivate(V);return}const It=mt&1&&xt,Je=!Vf(V);let rt;if(Je&&(rt=Ce&&Ce.onVnodeBeforeUnmount)&&Za(rt,F,V),mt&6)we(V.component,z,se);else{if(mt&128){V.suspense.unmount(z,se);return}It&&vu(V,null,F,"beforeUnmount"),mt&64?V.type.remove(V,F,z,ie,se):Ge&&!Ge.hasOnce&&(ke!==Ue||ut>0&&ut&64)?ze(Ge,F,z,!1,!0):(ke===Ue&&ut&384||!Te&&mt&16)&&ze(He,F,z),se&&Ae(V)}(Je&&(rt=Ce&&Ce.onVnodeUnmounted)||It)&&kr(()=>{rt&&Za(rt,F,V),It&&vu(V,null,F,"unmounted")},z)},Ae=V=>{const{type:F,el:z,anchor:se,transition:Te}=V;if(F===Ue){de(z,se);return}if(F===O2){E(V);return}const ke=()=>{s(z),Te&&!Te.persisted&&Te.afterLeave&&Te.afterLeave()};if(V.shapeFlag&1&&Te&&!Te.persisted){const{leave:Ce,delayLeave:ge}=Te,He=()=>Ce(z,ke);ge?ge(V.el,ke,He):He()}else ke()},de=(V,F)=>{let z;for(;V!==F;)z=h(V),s(V),V=z;s(F)},we=(V,F,z)=>{const{bum:se,scope:Te,job:ke,subTree:Ce,um:ge,m:He,a:Ge}=V;sP(He),sP(Ge),se&&Pv(se),Te.stop(),ke&&(ke.flags|=8,Pe(Ce,V,F,z)),ge&&kr(ge,F),kr(()=>{V.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},ze=(V,F,z,se=!1,Te=!1,ke=0)=>{for(let Ce=ke;Ce<V.length;Ce++)Pe(V[Ce],F,z,se,Te)},le=V=>{if(V.shapeFlag&6)return le(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const F=h(V.anchor||V.el),z=F&&F[d7];return z?h(z):F};let Se=!1;const ne=(V,F,z)=>{V==null?F._vnode&&Pe(F._vnode,null,null,!0):g(F._vnode||null,V,F,null,null,null,z),F._vnode=V,Se||(Se=!0,qI(),a7(),Se=!1)},ie={p:g,um:Pe,m:Be,r:Ae,mt:B,mc:A,pc:he,pbc:M,n:le,o:n};return{render:ne,hydrate:void 0,createApp:gee(ne)}}function L2({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function yu({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Tee(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function US(n,e,t=!1){const i=n.children,s=e.children;if(Kt(i)&&Kt(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=dd(s[r]),a.el=o.el),!t&&a.patchFlag!==-2&&US(o,a)),a.type===nx&&(a.el=o.el)}}function Cee(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function F7(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:F7(e)}function sP(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const See=Symbol.for("v-scx"),Aee=()=>qi(See);function Fct(n,e){return ex(n,null,e)}function Iee(n,e){return ex(n,null,{flush:"sync"})}function ki(n,e,t){return ex(n,e,t)}function ex(n,e,t=ui){const{immediate:i,deep:s,flush:r,once:o}=t,a=Ns({},t),l=e&&i||!e&&r!=="post";let c;if(hp){if(r==="sync"){const f=Aee();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=_l,f.resume=_l,f.pause=_l,f}}const d=Os;a.call=(f,m,g)=>Pa(f,d,m,g);let u=!1;r==="post"?a.scheduler=f=>{kr(f,d&&d.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(f,m)=>{m?f():NS(f)}),a.augmentJob=f=>{e&&(f.flags|=4),u&&(f.flags|=2,d&&(f.id=d.uid,f.i=d))};const h=UJ(n,e,a);return hp&&(c?c.push(h):l&&h()),h}function Pee(n,e,t){const i=this.proxy,s=ss(n)?n.includes(".")?B7(i,n):()=>i[n]:n.bind(i,i);let r;yn(e)?r=e:(r=e.handler,t=e);const o=ib(this),a=ex(s,r.bind(i),t);return o(),a}function B7(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function jg(n,e,t=ui){const i=kh(),s=yo(e),r=jd(e),o=V7(n,s),a=OJ((l,c)=>{let d,u=ui,h;return Iee(()=>{const f=n[s];jr(d,f)&&(d=f,c())}),{get(){return l(),t.get?t.get(d):d},set(f){const m=t.set?t.set(f):f;if(!jr(m,d)&&!(u!==ui&&jr(f,u)))return;const g=i.vnode.props;g&&(e in g||s in g||r in g)&&("onUpdate:".concat(e)in g||"onUpdate:".concat(s)in g||"onUpdate:".concat(r)in g)||(d=f,c()),i.emit("update:".concat(e),m),jr(f,m)&&jr(f,u)&&!jr(m,h)&&c(),u=f,h=m}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||ui:a,done:!1}:{done:!0}}}},a}const V7=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n["".concat(e,"Modifiers")]||n["".concat(yo(e),"Modifiers")]||n["".concat(jd(e),"Modifiers")];function Ree(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||ui;let s=t;const r=e.startsWith("update:"),o=r&&V7(i,e.slice(7));o&&(o.trim&&(s=t.map(d=>ss(d)?d.trim():d)),o.number&&(s=t.map(uy)));let a,l=i[a=Iv(e)]||i[a=Iv(yo(e))];!l&&r&&(l=i[a=Iv(jd(e))]),l&&Pa(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Pa(c,n,6,s)}}function U7(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!yn(n)){const l=c=>{const d=U7(c,e,!0);d&&(a=!0,Ns(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?($i(n)&&i.set(n,null),null):(Kt(r)?r.forEach(l=>o[l]=null):Ns(o,r),$i(n)&&i.set(n,o),o)}function tx(n,e){return!n||!Gw(e)?!1:(e=e.slice(2).replace(/Once$/,""),vi(n,e[0].toLowerCase()+e.slice(1))||vi(n,jd(e))||vi(n,e))}function rP(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:u,data:h,setupState:f,ctx:m,inheritAttrs:g}=n,b=my(n);let w,x;try{if(t.shapeFlag&4){const E=s||i,T=E;w=fl(c.call(T,E,d,u,f,h,m)),x=a}else{const E=e;w=fl(E.length>1?E(u,{attrs:a,slots:o,emit:l}):E(u,null)),x=e.props?a:$ee(a)}}catch(E){fg.length=0,eb(E,n,1),w=L(Sr)}let k=w;if(x&&g!==!1){const E=Object.keys(x),{shapeFlag:T}=k;E.length&&T&7&&(r&&E.some(CS)&&(x=Lee(x,r)),k=$d(k,x,!1,!0))}return t.dirs&&(k=$d(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(t.dirs):t.dirs),t.transition&&zg(k,t.transition),w=k,my(b),w}const $ee=n=>{let e;for(const t in n)(t==="class"||t==="style"||Gw(t))&&((e||(e={}))[t]=n[t]);return e},Lee=(n,e)=>{const t={};for(const i in n)(!CS(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function Oee(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?oP(i,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(o[h]!==i[h]&&!tx(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?oP(i,o,c):!0:!!o;return!1}function oP(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!tx(t,r))return!0}return!1}function Dee({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const z7=n=>n.__isSuspense;function Mee(n,e){e&&e.pendingBranch?Kt(n)?e.effects.push(...n):e.effects.push(n):jJ(n)}const Ue=Symbol.for("v-fgt"),nx=Symbol.for("v-txt"),Sr=Symbol.for("v-cmt"),O2=Symbol.for("v-stc"),fg=[];let mo=null;function I(n=!1){fg.push(mo=n?null:[])}function Nee(){fg.pop(),mo=fg[fg.length-1]||null}let Gg=1;function aP(n,e=!1){Gg+=n,n<0&&mo&&e&&(mo.hasOnce=!0)}function H7(n){return n.dynamicChildren=Gg>0?mo||Nf:null,Nee(),Gg>0&&mo&&mo.push(n),n}function O(n,e,t,i,s,r){return H7(_(n,e,t,i,s,r,!0))}function ve(n,e,t,i,s){return H7(L(n,e,t,i,s,!0))}function up(n){return n?n.__v_isVNode===!0:!1}function Mu(n,e){return n.type===e.type&&n.key===e.key}const j7=({key:n})=>n!=null?n:null,$v=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?ss(n)||Pi(n)||yn(n)?{i:Ds,r:n,k:e,f:!!t}:n:null);function _(n,e=null,t=null,i=0,s=null,r=n===Ue?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&j7(e),ref:e&&$v(e),scopeId:c7,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ds};return a?(zS(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=ss(t)?8:16),Gg>0&&!o&&mo&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&mo.push(l),l}const L=Fee;function Fee(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===x7)&&(n=Sr),up(n)){const a=$d(n,e,!0);return t&&zS(a,t),Gg>0&&!r&&mo&&(a.shapeFlag&6?mo[mo.indexOf(n)]=a:mo.push(a)),a.patchFlag=-2,a}if(Wee(n)&&(n=n.__vccOpts),e){e=G7(e);let{class:a,style:l}=e;a&&!ss(a)&&(e.class=gt(a)),$i(l)&&(MS(l)&&!Kt(l)&&(l=Ns({},l)),e.style=bo(l))}const o=ss(n)?1:z7(n)?128:u7(n)?64:$i(n)?4:yn(n)?2:0;return _(n,e,t,i,s,o,r,!0)}function G7(n){return n?MS(n)||R7(n)?Ns({},n):n:null}function $d(n,e,t=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,c=e?Ld(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&j7(c),ref:e&&e.ref?t&&r?Kt(r)?r.concat($v(e)):[r,$v(e)]:$v(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Ue?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&$d(n.ssContent),ssFallback:n.ssFallback&&$d(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&zg(d,l.clone(d)),d}function be(n=" ",e=0){return L(nx,null,n,e)}function re(n="",e=!1){return e?(I(),ve(Sr,null,n)):L(Sr,null,n)}function fl(n){return n==null||typeof n=="boolean"?L(Sr):Kt(n)?L(Ue,null,n.slice()):up(n)?dd(n):L(nx,null,String(n))}function dd(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:$d(n)}function zS(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Kt(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),zS(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!R7(e)?e._ctx=Ds:s===3&&Ds&&(Ds.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else yn(e)?(e={default:e,_ctx:Ds},t=32):(e=String(e),i&64?(t=16,e=[be(e)]):t=8);n.children=e,n.shapeFlag|=t}function Ld(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=gt([e.class,i.class]));else if(s==="style")e.style=bo([e.style,i.style]);else if(Gw(s)){const r=e[s],o=i[s];o&&r!==o&&!(Kt(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function Za(n,e,t,i=null){Pa(n,e,7,[t,i])}const Bee=S7();let Vee=0;function Uee(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||Bee,r={uid:Vee++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new M9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:L7(i,s),emitsOptions:U7(i,s),emit:null,emitted:null,propsDefaults:ui,inheritAttrs:i.inheritAttrs,ctx:ui,data:ui,props:ui,attrs:ui,slots:ui,refs:ui,setupState:ui,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Ree.bind(null,r),n.ce&&n.ce(r),r}let Os=null;const kh=()=>Os||Ds;let yy,XE;{const n=Kw(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};yy=e("__VUE_INSTANCE_SETTERS__",t=>Os=t),XE=e("__VUE_SSR_SETTERS__",t=>hp=t)}const ib=n=>{const e=Os;return yy(n),n.scope.on(),()=>{n.scope.off(),yy(e)}},lP=()=>{Os&&Os.scope.off(),yy(null)};function W7(n){return n.vnode.shapeFlag&4}let hp=!1;function zee(n,e=!1,t=!1){e&&XE(e);const{props:i,children:s}=n.vnode,r=W7(n);bee(n,i,r,e),xee(n,s,t);const o=r?Hee(n,e):void 0;return e&&XE(!1),o}function Hee(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,aee);const{setup:i}=t;if(i){Gd();const s=n.setupContext=i.length>1?K7(n):null,r=ib(n),o=J0(i,n,0,[n.props,s]),a=I9(o);if(Wd(),r(),(a||n.sp)&&!Vf(n)&&FS(n),a){if(o.then(lP,lP),e)return o.then(l=>{cP(n,l)}).catch(l=>{eb(l,n,0)});n.asyncDep=o}else cP(n,o)}else q7(n)}function cP(n,e,t){yn(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:$i(e)&&(n.setupState=n7(e)),q7(n)}function q7(n,e,t){const i=n.type;n.render||(n.render=i.render||_l);{const s=ib(n);Gd();try{dee(n)}finally{Wd(),s()}}}const jee={get(n,e){return dr(n,"get",""),n[e]}};function K7(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,jee),slots:n.slots,emit:n.emit,expose:e}}function ix(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(n7(Qw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in hg)return hg[t](n)},has(e,t){return t in e||t in hg}})):n.proxy}function Gee(n,e=!0){return yn(n)?n.displayName||n.name:n.name||e&&n.__name}function Wee(n){return yn(n)&&"__vccOpts"in n}const lt=(n,e)=>BJ(n,e,hp);function hi(n,e,t){const i=arguments.length;return i===2?$i(e)&&!Kt(e)?up(e)?L(n,null,[e]):L(n,e):L(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&up(t)&&(t=[t]),L(n,e,t))}const HS="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let QE;const dP=typeof window<"u"&&window.trustedTypes;if(dP)try{QE=dP.createPolicy("vue",{createHTML:n=>n})}catch(n){}const Y7=QE?n=>QE.createHTML(n):n=>n,qee="http://www.w3.org/2000/svg",Kee="http://www.w3.org/1998/Math/MathML",ic=typeof document<"u"?document:null,uP=ic&&ic.createElement("template"),Yee={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?ic.createElementNS(qee,n):e==="mathml"?ic.createElementNS(Kee,n):t?ic.createElement(n,{is:t}):ic.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>ic.createTextNode(n),createComment:n=>ic.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ic.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{uP.innerHTML=Y7(i==="svg"?"<svg>".concat(n,"</svg>"):i==="mathml"?"<math>".concat(n,"</math>"):n);const a=uP.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Jc="transition",Lm="animation",Wg=Symbol("_vtc"),X7={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Xee=Ns({},p7,X7),Qee=n=>(n.displayName="Transition",n.props=Xee,n),Zee=Qee((n,{slots:e})=>hi(YJ,Jee(n),e)),wu=(n,e=[])=>{Kt(n)?n.forEach(t=>t(...e)):n&&n(...e)},hP=n=>n?Kt(n)?n.some(e=>e.length>1):n.length>1:!1;function Jee(n){const e={};for(const U in n)U in X7||(e[U]=n[U]);if(n.css===!1)return e;const{name:t="v",type:i,duration:s,enterFromClass:r="".concat(t,"-enter-from"),enterActiveClass:o="".concat(t,"-enter-active"),enterToClass:a="".concat(t,"-enter-to"),appearFromClass:l=r,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:u="".concat(t,"-leave-from"),leaveActiveClass:h="".concat(t,"-leave-active"),leaveToClass:f="".concat(t,"-leave-to")}=n,m=ete(s),g=m&&m[0],b=m&&m[1],{onBeforeEnter:w,onEnter:x,onEnterCancelled:k,onLeave:E,onLeaveCancelled:T,onBeforeAppear:P=w,onAppear:C=x,onAppearCancelled:A=k}=e,R=(U,G,B,te)=>{U._enterCancelled=te,xu(U,G?d:a),xu(U,G?c:o),B&&B()},M=(U,G)=>{U._isLeaving=!1,xu(U,u),xu(U,f),xu(U,h),G&&G()},N=U=>(G,B)=>{const te=U?C:x,X=()=>R(G,U,B);wu(te,[G,X]),fP(()=>{xu(G,U?l:r),Yl(G,U?d:a),hP(te)||pP(G,i,g,X)})};return Ns(e,{onBeforeEnter(U){wu(w,[U]),Yl(U,r),Yl(U,o)},onBeforeAppear(U){wu(P,[U]),Yl(U,l),Yl(U,c)},onEnter:N(!1),onAppear:N(!0),onLeave(U,G){U._isLeaving=!0;const B=()=>M(U,G);Yl(U,u),U._enterCancelled?(Yl(U,h),bP()):(bP(),Yl(U,h)),fP(()=>{U._isLeaving&&(xu(U,u),Yl(U,f),hP(E)||pP(U,i,b,B))}),wu(E,[U,B])},onEnterCancelled(U){R(U,!1,void 0,!0),wu(k,[U])},onAppearCancelled(U){R(U,!0,void 0,!0),wu(A,[U])},onLeaveCancelled(U){M(U),wu(T,[U])}})}function ete(n){if(n==null)return null;if($i(n))return[D2(n.enter),D2(n.leave)];{const e=D2(n);return[e,e]}}function D2(n){return iJ(n)}function Yl(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Wg]||(n[Wg]=new Set)).add(e)}function xu(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[Wg];t&&(t.delete(e),t.size||(n[Wg]=void 0))}function fP(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let tte=0;function pP(n,e,t,i){const s=n._endId=++tte,r=()=>{s===n._endId&&i()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:a,propCount:l}=nte(n,e);if(!o)return i();const c=o+"end";let d=0;const u=()=>{n.removeEventListener(c,h),r()},h=f=>{f.target===n&&++d>=l&&u()};setTimeout(()=>{d<l&&u()},a+1),n.addEventListener(c,h)}function nte(n,e){const t=window.getComputedStyle(n),i=m=>(t[m]||"").split(", "),s=i("".concat(Jc,"Delay")),r=i("".concat(Jc,"Duration")),o=mP(s,r),a=i("".concat(Lm,"Delay")),l=i("".concat(Lm,"Duration")),c=mP(a,l);let d=null,u=0,h=0;e===Jc?o>0&&(d=Jc,u=o,h=r.length):e===Lm?c>0&&(d=Lm,u=c,h=l.length):(u=Math.max(o,c),d=u>0?o>c?Jc:Lm:null,h=d?d===Jc?r.length:l.length:0);const f=d===Jc&&/\b(transform|all)(,|$)/.test(i("".concat(Jc,"Property")).toString());return{type:d,timeout:u,propCount:h,hasTransform:f}}function mP(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>gP(t)+gP(n[i])))}function gP(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function bP(){return document.body.offsetHeight}function ite(n,e,t){const i=n[Wg];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const vP=Symbol("_vod"),ste=Symbol("_vsh"),rte=Symbol(""),ote=/(^|;)\s*display\s*:/;function ate(n,e,t){const i=n.style,s=ss(t);let r=!1;if(t&&!s){if(e)if(ss(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Lv(i,a,"")}else for(const o in e)t[o]==null&&Lv(i,o,"");for(const o in t)o==="display"&&(r=!0),Lv(i,o,t[o])}else if(s){if(e!==t){const o=i[rte];o&&(t+=";"+o),i.cssText=t,r=ote.test(t)}}else e&&n.removeAttribute("style");vP in n&&(n[vP]=r?i.display:"",n[ste]&&(i.display="none"))}const yP=/\s*!important$/;function Lv(n,e,t){if(Kt(t))t.forEach(i=>Lv(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=lte(n,e);yP.test(t)?n.setProperty(jd(i),t.replace(yP,""),"important"):n[i]=t}}const wP=["Webkit","Moz","ms"],M2={};function lte(n,e){const t=M2[e];if(t)return t;let i=yo(e);if(i!=="filter"&&i in n)return M2[e]=i;i=qw(i);for(let s=0;s<wP.length;s++){const r=wP[s]+i;if(r in n)return M2[e]=r}return e}const xP="http://www.w3.org/1999/xlink";function _P(n,e,t,i,s,r=dJ(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(xP,e.slice(6,e.length)):n.setAttributeNS(xP,e,t):t==null||r&&!L9(t)?n.removeAttribute(e):n.setAttribute(e,r?"":Ia(t)?String(t):t)}function kP(n,e,t,i,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Y7(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=L9(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch(a){}o&&n.removeAttribute(s||e)}function hc(n,e,t,i){n.addEventListener(e,t,i)}function cte(n,e,t,i){n.removeEventListener(e,t,i)}const EP=Symbol("_vei");function dte(n,e,t,i,s=null){const r=n[EP]||(n[EP]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=ute(e);if(i){const c=r[e]=pte(i,s);hc(n,a,c,l)}else o&&(cte(n,a,o,l),r[e]=void 0)}}const TP=/(?:Once|Passive|Capture)$/;function ute(n){let e;if(TP.test(n)){e={};let i;for(;i=n.match(TP);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):jd(n.slice(2)),e]}let N2=0;const hte=Promise.resolve(),fte=()=>N2||(hte.then(()=>N2=0),N2=Date.now());function pte(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Pa(mte(i,t.value),e,5,[i])};return t.value=n,t.attached=fte(),t}function mte(n,e){if(Kt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const CP=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,gte=(n,e,t,i,s,r)=>{const o=s==="svg";e==="class"?ite(n,i,o):e==="style"?ate(n,t,i):Gw(e)?CS(e)||dte(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bte(n,e,i,o))?(kP(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&_P(n,e,i,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!ss(i))?kP(n,yo(e),i,r,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),_P(n,e,i,o))};function bte(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&CP(e)&&yn(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return CP(e)&&ss(t)?!1:e in n}const Od=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Kt(e)?t=>Pv(e,t):e};function vte(n){n.target.composing=!0}function SP(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Wo=Symbol("_assign"),Ti={created(n,{modifiers:{lazy:e,trim:t,number:i}},s){n[Wo]=Od(s);const r=i||s.props&&s.props.type==="number";hc(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),r&&(a=uy(a)),n[Wo](a)}),t&&hc(n,"change",()=>{n.value=n.value.trim()}),e||(hc(n,"compositionstart",vte),hc(n,"compositionend",SP),hc(n,"change",SP))},mounted(n,{value:e}){n.value=e==null?"":e},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:s,number:r}},o){if(n[Wo]=Od(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?uy(n.value):n.value,l=e==null?"":e;a!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||s&&n.value.trim()===l)||(n.value=l))}},yte={deep:!0,created(n,e,t){n[Wo]=Od(t),hc(n,"change",()=>{const i=n._modelValue,s=fp(n),r=n.checked,o=n[Wo];if(Kt(i)){const a=IS(i,s),l=a!==-1;if(r&&!l)o(i.concat(s));else if(!r&&l){const c=[...i];c.splice(a,1),o(c)}}else if(Hp(i)){const a=new Set(i);r?a.add(s):a.delete(s),o(a)}else o(Q7(n,r))})},mounted:AP,beforeUpdate(n,e,t){n[Wo]=Od(t),AP(n,e,t)}};function AP(n,{value:e,oldValue:t},i){n._modelValue=e;let s;if(Kt(e))s=IS(e,i.props.value)>-1;else if(Hp(e))s=e.has(i.props.value);else{if(e===t)return;s=ah(e,Q7(n,!0))}n.checked!==s&&(n.checked=s)}const ZE={created(n,{value:e},t){n.checked=ah(e,t.props.value),n[Wo]=Od(t),hc(n,"change",()=>{n[Wo](fp(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[Wo]=Od(i),e!==t&&(n.checked=ah(e,i.props.value))}},wte={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const s=Hp(e);hc(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?uy(fp(o)):fp(o));n[Wo](n.multiple?s?new Set(r):r:r[0]),n._assigning=!0,vc(()=>{n._assigning=!1})}),n[Wo]=Od(i)},mounted(n,{value:e}){IP(n,e)},beforeUpdate(n,e,t){n[Wo]=Od(t)},updated(n,{value:e}){n._assigning||IP(n,e)}};function IP(n,e){const t=n.multiple,i=Kt(e);if(!(t&&!i&&!Hp(e))){for(let s=0,r=n.options.length;s<r;s++){const o=n.options[s],a=fp(o);if(t)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=IS(e,a)>-1}else o.selected=e.has(a);else if(ah(fp(o),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function fp(n){return"_value"in n?n._value:n.value}function Q7(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const xte={created(n,e,t){R1(n,e,t,null,"created")},mounted(n,e,t){R1(n,e,t,null,"mounted")},beforeUpdate(n,e,t,i){R1(n,e,t,i,"beforeUpdate")},updated(n,e,t,i){R1(n,e,t,i,"updated")}};function _te(n,e){switch(n){case"SELECT":return wte;case"TEXTAREA":return Ti;default:switch(e){case"checkbox":return yte;case"radio":return ZE;default:return Ti}}}function R1(n,e,t,i,s){const o=_te(n.tagName,t.props&&t.props.type)[s];o&&o(n,e,t,i)}const kte=["ctrl","shift","alt","meta"],Ete={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>kte.some(t=>n["".concat(t,"Key")]&&!e.includes(t))},qt=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const a=Ete[e[o]];if(a&&a(s,e))return}return n(s,...r)})},Tte=Ns({patchProp:gte},Yee);let PP;function Cte(){return PP||(PP=kee(Tte))}const Ste=(...n)=>{const e=Cte().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=Ite(i);if(!s)return;const r=e._component;!yn(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,Ate(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Ate(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Ite(n){return ss(n)?document.querySelector(n):n}const Pte="modulepreload",Rte=function(n){return"/"+n},RP={},Kn=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.all(t.map(a=>{if(a=Rte(a),a in RP)return;RP[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(a,'"]').concat(c)))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Pte,l||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error("Unable to preload CSS for ".concat(a))))})}))}return s.then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};var wa={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},$te=Object.defineProperty,Lte=(n,e)=>{for(var t in e)$te(n,t,{get:e[t],enumerable:!0})},Ote={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Z7=new WeakMap,qd=n=>Z7.get(n),Dte=(n,e)=>{const t={$flags$:0,$hostElement$:n,$cmpMeta$:e,$instanceValues$:new Map};return Z7.set(n,t)},$P=(n,e)=>e in n,sb=(n,e)=>(0,console.error)(n,e),wy=new Map,J7=[],Mte="slot-fb{display:contents}slot-fb[hidden]{display:none}",LP="http://www.w3.org/1999/xlink",rb=typeof window<"u"?window:{},Ea=rb.document||{head:{}},jt=rb.HTMLElement||class{},qs={$flags$:0,$resourcesUrl$:"",jmp:n=>n(),raf:n=>requestAnimationFrame(n),ael:(n,e,t,i)=>n.addEventListener(e,t,i),rel:(n,e,t,i)=>n.removeEventListener(e,t,i),ce:(n,e)=>new CustomEvent(n,e)},Nte=n=>{Object.assign(qs,n)},Fte=(()=>{let n=!1;try{Ea.addEventListener("e",null,Object.defineProperty({},"passive",{get(){n=!0}}))}catch(e){}return n})(),Bte=n=>Promise.resolve(n),Vte=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(n){}return!1})(),JE=!1,eT=[],eM=[],tM=(n,e)=>t=>{n.push(t),JE||(JE=!0,e&&qs.$flags$&4?Ute(tT):qs.raf(tT))},OP=n=>{for(let e=0;e<n.length;e++)try{n[e](performance.now())}catch(t){sb(t)}n.length=0},tT=()=>{OP(eT),OP(eM),(JE=eT.length>0)&&qs.raf(tT)},Ute=n=>Bte().then(n),Cl=tM(eT,!1),fi=tM(eM,!0),nM=n=>{const e=new URL(n,qs.$resourcesUrl$);return e.origin!==rb.location.origin?e.href:e.pathname},DP={},zte="http://www.w3.org/2000/svg",Hte="http://www.w3.org/1999/xhtml",jte=n=>n!=null,jS=n=>(n=typeof n,n==="object"||n==="function");function Gte(n){var e,t,i;return(i=(t=(e=n.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:t.getAttribute("content"))!=null?i:void 0}var Wte={};Lte(Wte,{err:()=>iM,map:()=>qte,ok:()=>nT,unwrap:()=>Kte,unwrapErr:()=>Yte});var nT=n=>({isOk:!0,isErr:!1,value:n}),iM=n=>({isOk:!1,isErr:!0,value:n});function qte(n,e){if(n.isOk){const t=e(n.value);return t instanceof Promise?t.then(i=>nT(i)):nT(t)}if(n.isErr){const t=n.value;return iM(t)}throw"should never get here"}var Kte=n=>{if(n.isOk)return n.value;throw n.value},Yte=n=>{if(n.isErr)return n.value;throw n.value},ch=(n,e="")=>()=>{},q=(n,e,...t)=>{let i=null,s=null,r=null,o=!1,a=!1;const l=[],c=u=>{for(let h=0;h<u.length;h++)i=u[h],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((o=typeof n!="function"&&!jS(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?xy(null,i):i),a=o)};if(c(t),e){e.key&&(s=e.key),e.name&&(r=e.name);{const u=e.className||e.class;u&&(e.class=typeof u!="object"?u:Object.keys(u).filter(h=>u[h]).join(" "))}}if(typeof n=="function")return n(e===null?{}:e,l,Qte);const d=xy(n,null);return d.$attrs$=e,l.length>0&&(d.$children$=l),d.$key$=s,d.$name$=r,d},xy=(n,e)=>{const t={$flags$:0,$tag$:n,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},Yt={},Xte=n=>n&&n.$tag$===Yt,Qte={forEach:(n,e)=>n.map(MP).forEach(e),map:(n,e)=>n.map(MP).map(e).map(Zte)},MP=n=>({vattrs:n.$attrs$,vchildren:n.$children$,vkey:n.$key$,vname:n.$name$,vtag:n.$tag$,vtext:n.$text$}),Zte=n=>{if(typeof n.vtag=="function"){const t={...n.vattrs};return n.vkey&&(t.key=n.vkey),n.vname&&(t.name=n.vname),q(n.vtag,t,...n.vchildren||[])}const e=xy(n.vtag,n.vtext);return e.$attrs$=n.vattrs,e.$children$=n.vchildren,e.$key$=n.vkey,e.$name$=n.vname,e},Jte=n=>J7.map(e=>e(n)).find(e=>!!e),ene=n=>J7.push(n),tne=n=>qd(n).$modeName$,nne=(n,e)=>n!=null&&!jS(n)?e&4?n==="false"?!1:n===""||!!n:e&2?parseFloat(n):e&1?String(n):n:n,ine=n=>n,at=(n,e,t)=>{const i=ine(n);return{emit:s=>sne(i,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:s})}},sne=(n,e,t)=>{const i=qs.ce(e,t);return n.dispatchEvent(i),i},NP=new WeakMap,rne=(n,e,t)=>{let i=wy.get(n);Vte&&t?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,wy.set(n,i)},one=(n,e,t)=>{var i;const s=sM(e,t),r=wy.get(s);if(n=n.nodeType===11?n:Ea,r)if(typeof r=="string"){n=n.head||n;let o=NP.get(n),a;if(o||NP.set(n,o=new Set),!o.has(s)){{a=Ea.createElement("style"),a.innerHTML=r;const l=(i=qs.$nonce$)!=null?i:Gte(Ea);l!=null&&a.setAttribute("nonce",l),(!(e.$flags$&1)||e.$flags$&1&&n.nodeName!=="HEAD")&&n.insertBefore(a,n.querySelector("link"))}e.$flags$&4&&(a.innerHTML+=Mte),o&&o.add(s)}}else n.adoptedStyleSheets.includes(r)||(n.adoptedStyleSheets=[...n.adoptedStyleSheets,r]);return s},ane=n=>{const e=n.$cmpMeta$,t=n.$hostElement$,i=e.$flags$,s=ch("attachStyles",e.$tagName$),r=one(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,n.$modeName$);i&10&&i&2&&(t["s-sc"]=r,t.classList.add(r+"-h"),i&2&&t.classList.add(r+"-s")),s()},sM=(n,e)=>"sc-"+(e&&n.$flags$&32?n.$tagName$+"-"+e:n.$tagName$),FP=(n,e,t,i,s,r)=>{if(t!==i){let o=$P(n,e),a=e.toLowerCase();if(e==="class"){const l=n.classList,c=BP(t),d=BP(i);l.remove(...c.filter(u=>u&&!d.includes(u))),l.add(...d.filter(u=>u&&!c.includes(u)))}else if(e==="style"){for(const l in t)(!i||i[l]==null)&&(l.includes("-")?n.style.removeProperty(l):n.style[l]="");for(const l in i)(!t||i[l]!==t[l])&&(l.includes("-")?n.style.setProperty(l,i[l]):n.style[l]=i[l])}else if(e!=="key")if(e==="ref")i&&i(n);else if(!n.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):$P(rb,a)?e=a.slice(2):e=a[2]+e.slice(3),t||i){const l=e.endsWith(rM);e=e.replace(cne,""),t&&qs.rel(n,e,t,l),i&&qs.ael(n,e,i,l)}}else{const l=jS(i);if((o||l&&i!==null)&&!s)try{if(n.tagName.includes("-"))n[e]=i;else{const d=i==null?"":i;e==="list"?o=!1:(t==null||n[e]!=d)&&(n[e]=d)}}catch(d){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,c=!0),i==null||i===!1?(i!==!1||n.getAttribute(e)==="")&&(c?n.removeAttributeNS(LP,e):n.removeAttribute(e)):(!o||r&4||s)&&!l&&(i=i===!0?"":i,c?n.setAttributeNS(LP,e,i):n.setAttribute(e,i))}}},lne=/\s/,BP=n=>n?n.split(lne):[],rM="Capture",cne=new RegExp(rM+"$"),oM=(n,e,t)=>{const i=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=n&&n.$attrs$||DP,r=e.$attrs$||DP;for(const o of VP(Object.keys(s)))o in r||FP(i,o,s[o],void 0,t,e.$flags$);for(const o of VP(Object.keys(r)))FP(i,o,s[o],r[o],t,e.$flags$)};function VP(n){return n.includes("ref")?[...n.filter(e=>e!=="ref"),"ref"]:n}var yf,iT,qg,_y=!1,ky=!1,GS=!1,ho=!1,Ey=(n,e,t,i)=>{var s;const r=e.$children$[t];let o=0,a,l,c;if(_y||(GS=!0,r.$tag$==="slot"&&(yf&&i.classList.add(yf+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)a=r.$elm$=Ea.createTextNode(r.$text$);else if(r.$flags$&1)a=r.$elm$=Ea.createTextNode("");else{if(ho||(ho=r.$tag$==="svg"),a=r.$elm$=Ea.createElementNS(ho?zte:Hte,!_y&&wa.slotRelocation&&r.$flags$&2?"slot-fb":r.$tag$),ho&&r.$tag$==="foreignObject"&&(ho=!1),oM(null,r,ho),!!a.getRootNode().querySelector("body")&&wa.scoped&&jte(yf)&&a["s-si"]!==yf&&a.classList.add(a["s-si"]=yf),qS(a,i),r.$children$)for(o=0;o<r.$children$.length;++o)l=Ey(n,r,o,a),l&&a.appendChild(l);r.$tag$==="svg"?ho=!1:a.tagName==="foreignObject"&&(ho=!0)}return a["s-hn"]=qg,r.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=iT,a["s-sn"]=r.$name$||"",a["s-rf"]=(s=r.$attrs$)==null?void 0:s.ref,c=n&&n.$children$&&n.$children$[t],c&&c.$tag$===r.$tag$&&n.$elm$&&Kg(n.$elm$,!1)),a},Kg=(n,e)=>{qs.$flags$|=1;const t=Array.from(n.childNodes);n["s-sr"]&&wa.experimentalSlotFixes;for(let i=t.length-1;i>=0;i--){const s=t[i];s["s-hn"]!==qg&&s["s-ol"]&&(Id(cM(s),s,WS(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,GS=!0),e&&Kg(s,e)}qs.$flags$&=-2},aM=(n,e,t,i,s,r)=>{let o=n["s-cr"]&&n["s-cr"].parentNode||n,a;for(o.shadowRoot&&o.tagName===qg&&(o=o.shadowRoot);s<=r;++s)i[s]&&(a=Ey(null,t,s,n),a&&(i[s].$elm$=a,Id(o,a,WS(e))))},lM=(n,e,t)=>{for(let i=e;i<=t;++i){const s=n[i];if(s){const r=s.$elm$;hM(s),r&&(ky=!0,r["s-ol"]?r["s-ol"].remove():Kg(r,!0),r.remove())}}},dne=(n,e,t,i,s=!1)=>{let r=0,o=0,a=0,l=0,c=e.length-1,d=e[0],u=e[c],h=i.length-1,f=i[0],m=i[h],g,b;for(;r<=c&&o<=h;)if(d==null)d=e[++r];else if(u==null)u=e[--c];else if(f==null)f=i[++o];else if(m==null)m=i[--h];else if($1(d,f,s))wf(d,f,s),d=e[++r],f=i[++o];else if($1(u,m,s))wf(u,m,s),u=e[--c],m=i[--h];else if($1(d,m,s))(d.$tag$==="slot"||m.$tag$==="slot")&&Kg(d.$elm$.parentNode,!1),wf(d,m,s),Id(n,d.$elm$,u.$elm$.nextSibling),d=e[++r],m=i[--h];else if($1(u,f,s))(d.$tag$==="slot"||m.$tag$==="slot")&&Kg(u.$elm$.parentNode,!1),wf(u,f,s),Id(n,u.$elm$,d.$elm$),u=e[--c],f=i[++o];else{for(a=-1,l=r;l<=c;++l)if(e[l]&&e[l].$key$!==null&&e[l].$key$===f.$key$){a=l;break}a>=0?(b=e[a],b.$tag$!==f.$tag$?g=Ey(e&&e[o],t,a,n):(wf(b,f,s),e[a]=void 0,g=b.$elm$),f=i[++o]):(g=Ey(e&&e[o],t,o,n),f=i[++o]),g&&Id(cM(d.$elm$),g,WS(d.$elm$))}r>c?aM(n,i[h+1]==null?null:i[h+1].$elm$,t,i,o,h):o>h&&lM(e,r,c)},$1=(n,e,t=!1)=>n.$tag$===e.$tag$?n.$tag$==="slot"?"$nodeId$"in n&&t&&n.$elm$.nodeType!==8?!1:n.$name$===e.$name$:t?!0:n.$key$===e.$key$:!1,WS=n=>n&&n["s-ol"]||n,cM=n=>(n["s-ol"]?n["s-ol"]:n).parentNode,wf=(n,e,t=!1)=>{const i=e.$elm$=n.$elm$,s=n.$children$,r=e.$children$,o=e.$tag$,a=e.$text$;let l;a===null?(ho=o==="svg"?!0:o==="foreignObject"?!1:ho,o==="slot"&&!_y||oM(n,e,ho),s!==null&&r!==null?dne(i,s,e,r,t):r!==null?(n.$text$!==null&&(i.textContent=""),aM(i,null,e,r,0,r.length-1)):!t&&wa.updatable&&s!==null&&lM(s,0,s.length-1),ho&&o==="svg"&&(ho=!1)):(l=i["s-cr"])?l.parentNode.textContent=a:n.$text$!==a&&(i.data=a)},dM=n=>{const e=n.childNodes;for(const t of e)if(t.nodeType===1){if(t["s-sr"]){const i=t["s-sn"];t.hidden=!1;for(const s of e)if(s!==t){if(s["s-hn"]!==t["s-hn"]||i!==""){if(s.nodeType===1&&(i===s.getAttribute("slot")||i===s["s-sn"])||s.nodeType===3&&i===s["s-sn"]){t.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){t.hidden=!0;break}}}dM(t)}},oc=[],uM=n=>{let e,t,i;for(const s of n.childNodes){if(s["s-sr"]&&(e=s["s-cr"])&&e.parentNode){t=e.parentNode.childNodes;const r=s["s-sn"];for(i=t.length-1;i>=0;i--)if(e=t[i],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==s["s-hn"])if(UP(e,r)){let o=oc.find(a=>a.$nodeToRelocate$===e);ky=!0,e["s-sn"]=e["s-sn"]||r,o?(o.$nodeToRelocate$["s-sh"]=s["s-hn"],o.$slotRefNode$=s):(e["s-sh"]=s["s-hn"],oc.push({$slotRefNode$:s,$nodeToRelocate$:e})),e["s-sr"]&&oc.map(a=>{UP(a.$nodeToRelocate$,e["s-sn"])&&(o=oc.find(l=>l.$nodeToRelocate$===e),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else oc.some(o=>o.$nodeToRelocate$===e)||oc.push({$nodeToRelocate$:e})}s.nodeType===1&&uM(s)}},UP=(n,e)=>n.nodeType===1?n.getAttribute("slot")===null&&e===""||n.getAttribute("slot")===e:n["s-sn"]===e?!0:e==="",hM=n=>{n.$attrs$&&n.$attrs$.ref&&n.$attrs$.ref(null),n.$children$&&n.$children$.map(hM)},Id=(n,e,t)=>{const i=n==null?void 0:n.insertBefore(e,t);return qS(e,n),i},fM=n=>{const e=[];return n&&e.push(...n["s-scs"]||[],n["s-si"],n["s-sc"],...fM(n.parentElement)),e},qS=(n,e,t=!1)=>{var i;if(n&&e&&n.nodeType===1){const s=new Set(fM(e).filter(Boolean));if(s.size&&((i=n.classList)==null||i.add(...n["s-scs"]=[...s]),n["s-ol"]||t))for(const r of Array.from(n.childNodes))qS(r,n,!0)}},une=(n,e,t=!1)=>{var i,s,r,o,a;const l=n.$hostElement$,c=n.$cmpMeta$,d=n.$vnode$||xy(null,null),u=Xte(e)?e:q(null,null,e);if(qg=l.tagName,c.$attrsToReflect$&&(u.$attrs$=u.$attrs$||{},c.$attrsToReflect$.map(([h,f])=>u.$attrs$[f]=l[h])),t&&u.$attrs$)for(const h of Object.keys(u.$attrs$))l.hasAttribute(h)&&!["key","ref","style","class"].includes(h)&&(u.$attrs$[h]=l[h]);u.$tag$=null,u.$flags$|=4,n.$vnode$=u,u.$elm$=d.$elm$=l.shadowRoot||l,yf=l["s-sc"],_y=(c.$flags$&1)!==0,iT=l["s-cr"],ky=!1,wf(d,u,t);{if(qs.$flags$|=1,GS){uM(u.$elm$);for(const h of oc){const f=h.$nodeToRelocate$;if(!f["s-ol"]){const m=Ea.createTextNode("");m["s-nr"]=f,Id(f.parentNode,f["s-ol"]=m,f)}}for(const h of oc){const f=h.$nodeToRelocate$,m=h.$slotRefNode$;if(m){const g=m.parentNode;let b=m.nextSibling;{let w=(i=f["s-ol"])==null?void 0:i.previousSibling;for(;w;){let x=(s=w["s-nr"])!=null?s:null;if(x&&x["s-sn"]===f["s-sn"]&&g===x.parentNode){for(x=x.nextSibling;x===f||x!=null&&x["s-sr"];)x=x==null?void 0:x.nextSibling;if(!x||!x["s-nr"]){b=x;break}}w=w.previousSibling}}(!b&&g!==f.parentNode||f.nextSibling!==b)&&f!==b&&(!f["s-hn"]&&f["s-ol"]&&(f["s-hn"]=f["s-ol"].parentNode.nodeName),Id(g,f,b),f.nodeType===1&&(f.hidden=(r=f["s-ih"])!=null?r:!1)),f&&typeof m["s-rf"]=="function"&&m["s-rf"](f)}else f.nodeType===1&&(t&&(f["s-ih"]=(o=f.hidden)!=null?o:!1),f.hidden=!0)}}ky&&dM(u.$elm$),qs.$flags$&=-2,oc.length=0}if(wa.experimentalScopedSlotChanges&&c.$flags$&2)for(const h of u.$elm$.childNodes)h["s-hn"]!==qg&&!h["s-sh"]&&(t&&h["s-ih"]==null&&(h["s-ih"]=(a=h.hidden)!=null?a:!1),h.hidden=!0);iT=void 0},hne=(n,e)=>{},KS=(n,e)=>(n.$flags$|=16,hne(n,n.$ancestorComponent$),fi(()=>fne(n,e))),fne=(n,e)=>{const t=n.$hostElement$,i=ch("scheduleUpdate",n.$cmpMeta$.$tagName$),s=t;if(!s)throw new Error("Can't render component <".concat(t.tagName.toLowerCase()," /> with invalid Stencil runtime! Make sure this imported component is compiled with a `externalRuntime: true` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime"));let r;return e?r=Uf(s,"componentWillLoad"):r=Uf(s,"componentWillUpdate"),r=zP(r,()=>Uf(s,"componentWillRender")),i(),zP(r,()=>mne(n,s,e))},zP=(n,e)=>pne(n)?n.then(e).catch(t=>{console.error(t),e()}):e(),pne=n=>n instanceof Promise||n&&n.then&&typeof n.then=="function",mne=async(n,e,t)=>{const i=n.$hostElement$,s=ch("update",n.$cmpMeta$.$tagName$);i["s-rc"],t&&ane(n);const r=ch("render",n.$cmpMeta$.$tagName$);gne(n,e,i,t),r(),s(),bne(n)},HP=null,gne=(n,e,t,i)=>{try{HP=e,e=e.render&&e.render(),n.$flags$&=-17,n.$flags$|=2,(wa.hasRenderFn||wa.reflect)&&(wa.vdomRender||wa.reflect)&&(wa.hydrateServerSide||une(n,e,i))}catch(l){sb(l,n.$hostElement$)}return HP=null,null},bne=n=>{const e=n.$cmpMeta$.$tagName$,t=n.$hostElement$,i=ch("postUpdate",e),s=t;n.$ancestorComponent$,Uf(s,"componentDidRender"),n.$flags$&64?(Uf(s,"componentDidUpdate"),i()):(n.$flags$|=64,Uf(s,"componentDidLoad"),i())},kc=n=>{{const e=qd(n),t=e.$hostElement$.isConnected;return t&&(e.$flags$&18)===2&&KS(e,!1),t}},Uf=(n,e,t)=>{if(n&&n[e])try{return n[e](t)}catch(i){sb(i)}},vne=(n,e)=>qd(n).$instanceValues$.get(e),yne=(n,e,t,i)=>{const s=qd(n),r=n,o=s.$instanceValues$.get(e),a=s.$flags$,l=r;t=nne(t,i.$members$[e][0]);const c=Number.isNaN(o)&&Number.isNaN(t);if(t!==o&&!c){s.$instanceValues$.set(e,t);{if(i.$watchers$&&a&128){const u=i.$watchers$[e];u&&u.map(h=>{try{l[h](t,o,e)}catch(f){sb(f,r)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(t,o,e)===!1)return;KS(s,!1)}}}},wne=(n,e,t)=>{var i,s;const r=n.prototype;if(e.$members$||e.$watchers$||n.watchers){n.watchers&&!e.$watchers$&&(e.$watchers$=n.watchers);const o=Object.entries((i=e.$members$)!=null?i:{});o.map(([a,[l]])=>{(l&31||l&32)&&Object.defineProperty(r,a,{get(){return vne(this,a)},set(c){yne(this,a,c,e)},configurable:!0,enumerable:!0})});{const a=new Map;r.attributeChangedCallback=function(l,c,d){qs.jmp(()=>{var u;const h=a.get(l);if(this.hasOwnProperty(h))d=this[h],delete this[h];else{if(r.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==d)return;if(h==null){const f=qd(this),m=f==null?void 0:f.$flags$;if(m&&!(m&8)&&m&128&&d!==c){const b=this,w=(u=e.$watchers$)==null?void 0:u[l];w==null||w.forEach(x=>{b[x]!=null&&b[x].call(b,d,c,l)})}return}}this[h]=d===null&&typeof this[h]=="boolean"?!1:d})},n.observedAttributes=Array.from(new Set([...Object.keys((s=e.$watchers$)!=null?s:{}),...o.filter(([l,c])=>c[0]&15).map(([l,c])=>{var d;const u=c[1]||l;return a.set(u,l),c[0]&512&&((d=e.$attrsToReflect$)==null||d.push([l,u])),u})]))}}return n},xne=async(n,e,t,i)=>{let s;if(!(e.$flags$&32)){e.$flags$|=32,t.$lazyBundleId$;{s=n.constructor;const o=n.localName;customElements.whenDefined(o).then(()=>e.$flags$|=128)}if(s&&s.style){let o;typeof s.style=="string"?o=s.style:typeof s.style!="string"&&(e.$modeName$=Jte(n),e.$modeName$&&(o=s.style[e.$modeName$]));const a=sM(t,e.$modeName$);if(!wy.has(a)){const l=ch("registerStyles",t.$tagName$);rne(a,o,!!(t.$flags$&1)),l()}}}e.$ancestorComponent$,KS(e,!0)},jP=n=>{},_ne=n=>{if(!(qs.$flags$&1)){const e=qd(n),t=e.$cmpMeta$,i=ch("connectedCallback",t.$tagName$);e.$flags$&1?(pM(n,e,t.$listeners$),e!=null&&e.$lazyInstance$?jP(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>jP(e.$lazyInstance$))):(e.$flags$|=1,t.$flags$&12&&kne(n),t.$members$&&Object.entries(t.$members$).map(([s,[r]])=>{if(r&31&&n.hasOwnProperty(s)){const o=n[s];delete n[s],n[s]=o}}),xne(n,e,t)),i()}},kne=n=>{const e=n["s-cr"]=Ea.createComment("");e["s-cn"]=!0,Id(n,e,n.firstChild)},Ene=async n=>{if(!(qs.$flags$&1)){const e=qd(n);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},Gt=(n,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=n.$watchers$,t.$attrsToReflect$=[];const i=n.prototype.connectedCallback,s=n.prototype.disconnectedCallback;return Object.assign(n.prototype,{__registerHost(){Dte(this,t)},connectedCallback(){const r=qd(this);pM(this,r,t.$listeners$),_ne(this),i&&i.call(this)},disconnectedCallback(){Ene(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error("Unable to re-use existing shadow root for ".concat(t.$tagName$,"! Mode is set to ").concat(this.shadowRoot.mode," but Stencil only supports open shadow roots."))}}),n.is=t.$tagName$,wne(n,t)},pM=(n,e,t,i)=>{t&&t.map(([s,r,o])=>{const a=Cne(n,s),l=Tne(e,o),c=Sne(s);qs.ael(a,r,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>qs.rel(a,r,l,c))})},Tne=(n,e)=>t=>{var i;try{wa.lazyLoad||n.$hostElement$[e](t)}catch(s){sb(s)}},Cne=(n,e)=>e&4?Ea:e&8?rb:e&16?Ea.body:n,Sne=n=>Fte?{passive:(n&1)!==0,capture:(n&2)!==0}:(n&2)!==0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ty=(n,e=0)=>new Promise(t=>{Ane(n,e,t)}),Ane=(n,e=0,t)=>{let i,s;const r={passive:!0},o=500,a=()=>{i&&i()},l=c=>{(c===void 0||n===c.target)&&(a(),t(c))};return n&&(n.addEventListener("webkitTransitionEnd",l,r),n.addEventListener("transitionend",l,r),s=setTimeout(l,e+o),i=()=>{s!==void 0&&(clearTimeout(s),s=void 0),n.removeEventListener("webkitTransitionEnd",l,r),n.removeEventListener("transitionend",l,r)}),a},Ra=(n,e)=>{n.componentOnReady?n.componentOnReady().then(t=>e(t)):Qn(()=>e(n))},Yg=n=>n.componentOnReady!==void 0,Fc=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},Ine=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Kd=(n,e)=>Fc(n,Ine),pp=(n,e,t,i)=>{var s;if(typeof window<"u"){const r=window,o=(s=r==null?void 0:r.Ionic)===null||s===void 0?void 0:s.config;if(o){const a=o.get("_ael");if(a)return a(n,e,t,i);if(o._ael)return o._ael(n,e,t,i)}}return n.addEventListener(e,t,i)},Xg=(n,e,t,i)=>{var s;if(typeof window<"u"){const r=window,o=(s=r==null?void 0:r.Ionic)===null||s===void 0?void 0:s.config;if(o){const a=o.get("_rel");if(a)return a(n,e,t,i);if(o._rel)return o._rel(n,e,t,i)}}return n.removeEventListener(e,t,i)},Mi=(n,e=n)=>n.shadowRoot||e,Qn=n=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(n):typeof requestAnimationFrame=="function"?requestAnimationFrame(n):setTimeout(n),Pne=n=>!!n.shadowRoot&&!!n.attachShadow,mM=n=>{if(n.focus(),n.classList.contains("ion-focusable")){const e=n.closest("ion-app");e&&e.setFocus([n])}},YS=(n,e,t,i,s)=>{{let r=e.querySelector("input.aux-input");r||(r=e.ownerDocument.createElement("input"),r.type="hidden",r.classList.add("aux-input"),e.appendChild(r)),r.disabled=s,r.name=t,r.value=i||""}},qo=(n,e,t)=>Math.max(n,Math.min(e,t)),Us=(n,e)=>{if(!n){const t="ASSERT: "+e;console.error(t);debugger;throw new Error(t)}},Bct=n=>{if(n){const e=n.changedTouches;if(e&&e.length>0){const t=e[0];return{x:t.clientX,y:t.clientY}}if(n.pageX!==void 0)return{x:n.pageX,y:n.pageY}}return{x:0,y:0}},GP=n=>{const e=document.dir==="rtl";switch(n){case"start":return e;case"end":return!e;default:throw new Error('"'.concat(n,'" is not a valid value for [side]. Use "start" or "end" instead.'))}},gM=(n,e)=>{const t=n._original||n;return{_original:n,emit:Rne(t.emit.bind(t),e)}},Rne=(n,e=0)=>{let t;return(...i)=>{clearTimeout(t),t=setTimeout(n,e,...i)}},bM=(n,e)=>{if(n!=null||(n={}),e!=null||(e={}),n===e)return!0;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!(i in e)||n[i]!==e[i])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $ne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",Lne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",One="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M368 64L144 256l224 192V64z'/></svg>",Dne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 144l192 224 192-224H64z'/></svg>",Mne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 368L256 144 64 368h384z'/></svg>",vM="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",yM="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",Cy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",Nne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",Fne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",Bne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='64'/><path d='M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96c-42.52 0-84.33 12.15-124.27 36.11-40.73 24.43-77.63 60.12-109.68 106.07a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416c46.71 0 93.81-14.43 136.2-41.72 38.46-24.77 72.72-59.66 99.08-100.92a32.2 32.2 0 00-.1-34.76zM256 352a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",Vne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 448a15.92 15.92 0 01-11.31-4.69l-352-352a16 16 0 0122.62-22.62l352 352A16 16 0 01432 448zM248 315.85l-51.79-51.79a2 2 0 00-3.39 1.69 64.11 64.11 0 0053.49 53.49 2 2 0 001.69-3.39zM264 196.15L315.87 248a2 2 0 003.4-1.69 64.13 64.13 0 00-53.55-53.55 2 2 0 00-1.72 3.39z'/><path d='M491 273.36a32.2 32.2 0 00-.1-34.76c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.68 96a226.54 226.54 0 00-71.82 11.79 4 4 0 00-1.56 6.63l47.24 47.24a4 4 0 003.82 1.05 96 96 0 01116 116 4 4 0 001.05 3.81l67.95 68a4 4 0 005.4.24 343.81 343.81 0 0067.24-77.4zM256 352a96 96 0 01-93.3-118.63 4 4 0 00-1.05-3.81l-66.84-66.87a4 4 0 00-5.41-.23c-24.39 20.81-47 46.13-67.67 75.72a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.39 76.14 98.28 100.65C162.06 402 207.92 416 255.68 416a238.22 238.22 0 0072.64-11.55 4 4 0 001.61-6.64l-47.47-47.46a4 4 0 00-3.81-1.05A96 96 0 01256 352z'/></svg>",Une="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",zne="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Hne=class{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const i=this.m.get(e);return i!==void 0?i:t}getBoolean(e,t=!1){const i=this.m.get(e);return i===void 0?t:typeof i=="string"?i==="true":!!i}getNumber(e,t){const i=parseFloat(this.m.get(e));return isNaN(i)?t!==void 0?t:NaN:i}set(e,t){this.m.set(e,t)}};const Zt=new Hne,jne=n=>{try{const e=n.sessionStorage.getItem(wM);return e!==null?JSON.parse(e):{}}catch(e){return{}}},Gne=(n,e)=>{try{n.sessionStorage.setItem(wM,JSON.stringify(e))}catch(t){return}},Wne=n=>{const e={};return n.location.search.slice(1).split("&").map(t=>t.split("=")).map(([t,i])=>{try{return[decodeURIComponent(t),decodeURIComponent(i)]}catch(s){return["",""]}}).filter(([t])=>qne(t,WP)).map(([t,i])=>[t.slice(WP.length),i]).forEach(([t,i])=>{e[t]=i}),e},qne=(n,e)=>n.substr(0,e.length)===e,WP="ionic:",wM="ionic-persist-config",Kne=n=>xM(n),mi=(n,e)=>(typeof n=="string"&&(e=n,n=void 0),Kne(n).includes(e)),xM=(n=window)=>{if(typeof n>"u")return[];n.Ionic=n.Ionic||{};let e=n.Ionic.platforms;return e==null&&(e=n.Ionic.platforms=Yne(n),e.forEach(t=>n.document.documentElement.classList.add("plt-".concat(t)))),e},Yne=n=>{const e=Zt.get("platform");return Object.keys(qP).filter(t=>{const i=e==null?void 0:e[t];return typeof i=="function"?i(n):qP[t](n)})},Xne=n=>sx(n)&&!kM(n),XS=n=>!!(dh(n,/iPad/i)||dh(n,/Macintosh/i)&&sx(n)),Qne=n=>dh(n,/iPhone/i),Zne=n=>dh(n,/iPhone|iPod/i)||XS(n),_M=n=>dh(n,/android|sink/i),Jne=n=>_M(n)&&!dh(n,/mobile/i),eie=n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),s=Math.max(e,t);return i>390&&i<520&&s>620&&s<800},tie=n=>{const e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),s=Math.max(e,t);return XS(n)||Jne(n)||i>460&&i<820&&s>780&&s<1400},sx=n=>rie(n,"(any-pointer:coarse)"),nie=n=>!sx(n),kM=n=>EM(n)||TM(n),EM=n=>!!(n.cordova||n.phonegap||n.PhoneGap),TM=n=>{const e=n.Capacitor;return!!(e!=null&&e.isNative)},iie=n=>dh(n,/electron/i),sie=n=>{var e;return!!(!((e=n.matchMedia)===null||e===void 0)&&e.call(n,"(display-mode: standalone)").matches||n.navigator.standalone)},dh=(n,e)=>e.test(n.navigator.userAgent),rie=(n,e)=>{var t;return(t=n.matchMedia)===null||t===void 0?void 0:t.call(n,e).matches},qP={ipad:XS,iphone:Qne,ios:Zne,android:_M,phablet:eie,tablet:tie,cordova:EM,capacitor:TM,electron:iie,pwa:sie,mobile:sx,mobileweb:Xne,desktop:nie,hybrid:kM};let xf;const Tt=n=>n&&tne(n)||xf,oie=(n={})=>{if(typeof window>"u")return;const e=window.document,t=window,i=t.Ionic=t.Ionic||{},s={};n._ael&&(s.ael=n._ael),n._rel&&(s.rel=n._rel),n._ce&&(s.ce=n._ce),Nte(s);const r=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},jne(t)),{persistConfig:!1}),i.config),Wne(t)),n);Zt.reset(r),Zt.getBoolean("persistConfig")&&Gne(t,r),xM(t),i.config=Zt,i.mode=xf=Zt.get("mode",e.documentElement.getAttribute("mode")||(mi(t,"ios")?"ios":"md")),Zt.set("mode",xf),e.documentElement.setAttribute("mode",xf),e.documentElement.classList.add(xf),Zt.getBoolean("_testing")&&Zt.set("animated",!1);const o=l=>{var c;return(c=l.tagName)===null||c===void 0?void 0:c.startsWith("ION-")},a=l=>["ios","md"].includes(l);ene(l=>{for(;l;){const c=l.mode||l.getAttribute("mode");if(c){if(a(c))return c;o(l)&&console.warn('Invalid ionic mode: "'+c+'", expected: "ios" or "md"')}l=l.parentElement}return xf})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let F2;const aie=()=>{if(typeof window>"u")return new Map;if(!F2){const n=window;n.Ionicons=n.Ionicons||{},F2=n.Ionicons.map=n.Ionicons.map||new Map}return F2},lie=n=>{let e=B2(n.src);return e||(e=CM(n.name,n.icon,n.mode,n.ios,n.md),e?cie(e,n):n.icon&&(e=B2(n.icon),e||(e=B2(n.icon[n.mode]),e))?e:null)},cie=(n,e)=>{const t=aie().get(n);if(t)return t;try{return nM("svg/".concat(n,".svg"))}catch(i){console.warn('[Ionicons Warning]: Could not load icon with name "'.concat(n,'". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.'),e)}},CM=(n,e,t,i,s)=>(t=(t&&L1(t))==="ios"?"ios":"md",i&&t==="ios"?n=L1(i):s&&t==="md"?n=L1(s):(!n&&e&&!SM(e)&&(n=e),Sy(n)&&(n=L1(n))),!Sy(n)||n.trim()===""||n.replace(/[a-z]|-|\d/gi,"")!==""?null:n),B2=n=>Sy(n)&&(n=n.trim(),SM(n))?n:null,SM=n=>n.length>0&&/(\/|\.)/.test(n),Sy=n=>typeof n=="string",L1=n=>n.toLowerCase(),die=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},uie=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",hie=n=>{const e=document.createElement("div");e.innerHTML=n;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const i=t.getAttribute("class")||"";if(t.setAttribute("class",(i+" s-ion-icon").trim()),AM(t))return e.innerHTML}return""},AM=n=>{if(n.nodeType===1){if(n.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;if(Sy(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<n.childNodes.length;e++)if(!AM(n.childNodes[e]))return!1}return!0},fie=n=>n.startsWith("data:image/svg+xml"),pie=n=>n.indexOf(";utf8,")!==-1,Nu=new Map,KP=new Map;let V2;const mie=(n,e)=>{let t=KP.get(n);if(!t)if(typeof fetch<"u"&&typeof document<"u")if(fie(n)&&pie(n)){V2||(V2=new DOMParser);const s=V2.parseFromString(n,"text/html").querySelector("svg");return s&&Nu.set(n,s.outerHTML),Promise.resolve()}else t=fetch(n).then(i=>{if(i.ok)return i.text().then(s=>{s&&e!==!1&&(s=hie(s)),Nu.set(n,s||"")});Nu.set(n,"")}),KP.set(n,t);else return Nu.set(n,""),Promise.resolve();return t},gie=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",bie=gie,vie=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=yie(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=die(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,i){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const s=this.io=new window.IntersectionObserver(r=>{r[0].isIntersecting&&(s.disconnect(),this.io=void 0,i())},{rootMargin:t});s.observe(e)}else i()}loadIcon(){if(this.isVisible){const e=lie(this);e&&(Nu.has(e)?this.svgContent=Nu.get(e):mie(e,this.sanitize).then(()=>this.svgContent=Nu.get(e)),this.didLoadIcon=!0)}this.iconName=CM(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:i,el:s}=this,r=this.mode||"md",o=t?(t.includes("arrow")||t.includes("chevron"))&&e!==!1:!1,a=e||o;return q(Yt,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},wie(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":a,"icon-rtl":a&&uie(s)})},i),this.svgContent?q("div",{class:"icon-inner",innerHTML:this.svgContent}):q("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return bie}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),yie=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",wie=n=>n?{"ion-color":!0,["ion-color-".concat(n)]:!0}:null;function $l(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,vie);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xie=":host{display:block;position:relative;width:100%;background-color:var(--ion-background-color, #ffffff);overflow:hidden;z-index:0}:host(.accordion-expanding) ::slotted(ion-item[slot=header]),:host(.accordion-expanded) ::slotted(ion-item[slot=header]){--border-width:0px}:host(.accordion-animated){-webkit-transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}:host(.accordion-animated) #content{-webkit-transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}#content{overflow:hidden;will-change:max-height}:host(.accordion-collapsing) #content{max-height:0 !important}:host(.accordion-collapsed) #content{display:none}:host(.accordion-expanding) #content{max-height:0}:host(.accordion-expanding) #content-wrapper{overflow:auto}:host(.accordion-disabled) #header,:host(.accordion-readonly) #header,:host(.accordion-disabled) #content,:host(.accordion-readonly) #content{pointer-events:none}:host(.accordion-disabled) #header,:host(.accordion-disabled) #content{opacity:0.4}@media (prefers-reduced-motion: reduce){:host,#content{-webkit-transition:none !important;transition:none !important}}:host(.accordion-next) ::slotted(ion-item[slot=header]){--border-width:0.55px 0px 0.55px 0px}",_ie=xie,kie=":host{display:block;position:relative;width:100%;background-color:var(--ion-background-color, #ffffff);overflow:hidden;z-index:0}:host(.accordion-expanding) ::slotted(ion-item[slot=header]),:host(.accordion-expanded) ::slotted(ion-item[slot=header]){--border-width:0px}:host(.accordion-animated){-webkit-transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}:host(.accordion-animated) #content{-webkit-transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}#content{overflow:hidden;will-change:max-height}:host(.accordion-collapsing) #content{max-height:0 !important}:host(.accordion-collapsed) #content{display:none}:host(.accordion-expanding) #content{max-height:0}:host(.accordion-expanding) #content-wrapper{overflow:auto}:host(.accordion-disabled) #header,:host(.accordion-readonly) #header,:host(.accordion-disabled) #content,:host(.accordion-readonly) #content{pointer-events:none}:host(.accordion-disabled) #header,:host(.accordion-disabled) #content{opacity:0.4}@media (prefers-reduced-motion: reduce){:host,#content{-webkit-transition:none !important;transition:none !important}}",Eie=kie,Tie=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.updateListener=()=>this.updateState(!1),this.setItemDefaults=()=>{const e=this.getSlottedHeaderIonItem();e&&(e.button=!0,e.detail=!1,e.lines===void 0&&(e.lines="full"))},this.getSlottedHeaderIonItem=()=>{const{headerEl:e}=this;if(!e)return;const t=e.querySelector("slot");if(t&&t.assignedElements!==void 0)return t.assignedElements().find(i=>i.tagName==="ION-ITEM")},this.setAria=(e=!1)=>{const t=this.getSlottedHeaderIonItem();if(!t)return;const s=Mi(t).querySelector("button");s&&s.setAttribute("aria-expanded","".concat(e))},this.slotToggleIcon=()=>{const e=this.getSlottedHeaderIonItem();if(!e)return;const{toggleIconSlot:t,toggleIcon:i}=this;if(e.querySelector(".ion-accordion-toggle-icon"))return;const r=document.createElement("ion-icon");r.slot=t,r.lazy=!1,r.classList.add("ion-accordion-toggle-icon"),r.icon=i,r.setAttribute("aria-hidden","true"),e.appendChild(r)},this.expandAccordion=(e=!1)=>{const{contentEl:t,contentElWrapper:i}=this;if(e||t===void 0||i===void 0){this.state=4;return}this.state!==4&&(this.currentRaf!==void 0&&cancelAnimationFrame(this.currentRaf),this.shouldAnimate()?Qn(()=>{this.state=8,this.currentRaf=Qn(async()=>{const s=i.offsetHeight,r=Ty(t,2e3);t.style.setProperty("max-height","".concat(s,"px")),await r,this.state=4,t.style.removeProperty("max-height")})}):this.state=4)},this.collapseAccordion=(e=!1)=>{const{contentEl:t}=this;if(e||t===void 0){this.state=1;return}this.state!==1&&(this.currentRaf!==void 0&&cancelAnimationFrame(this.currentRaf),this.shouldAnimate()?this.currentRaf=Qn(async()=>{const i=t.offsetHeight;t.style.setProperty("max-height","".concat(i,"px")),Qn(async()=>{const s=Ty(t,2e3);this.state=2,await s,this.state=1,t.style.removeProperty("max-height")})}):this.state=1)},this.shouldAnimate=()=>!(typeof window>"u"||matchMedia("(prefers-reduced-motion: reduce)").matches||!Zt.get("animated",!0)||this.accordionGroupEl&&!this.accordionGroupEl.animated),this.updateState=async(e=!1)=>{const t=this.accordionGroupEl,i=this.value;if(!t)return;const s=t.value;if(Array.isArray(s)?s.includes(i):s===i)this.expandAccordion(e),this.isNext=this.isPrevious=!1;else{this.collapseAccordion(e);const o=this.getNextSibling(),a=o==null?void 0:o.value;a!==void 0&&(this.isPrevious=Array.isArray(s)?s.includes(a):s===a);const l=this.getPreviousSibling(),c=l==null?void 0:l.value;c!==void 0&&(this.isNext=Array.isArray(s)?s.includes(c):s===c)}},this.getNextSibling=()=>{if(!this.el)return;const e=this.el.nextElementSibling;if((e==null?void 0:e.tagName)==="ION-ACCORDION")return e},this.getPreviousSibling=()=>{if(!this.el)return;const e=this.el.previousElementSibling;if((e==null?void 0:e.tagName)==="ION-ACCORDION")return e},this.state=1,this.isNext=!1,this.isPrevious=!1,this.value="ion-accordion-".concat(Cie++),this.disabled=!1,this.readonly=!1,this.toggleIcon=yM,this.toggleIconSlot="end"}valueChanged(){this.updateState()}connectedCallback(){var e;const t=this.accordionGroupEl=(e=this.el)===null||e===void 0?void 0:e.closest("ion-accordion-group");t&&(this.updateState(!0),pp(t,"ionValueChange",this.updateListener))}disconnectedCallback(){const e=this.accordionGroupEl;e&&Xg(e,"ionValueChange",this.updateListener)}componentDidLoad(){this.setItemDefaults(),this.slotToggleIcon(),Qn(()=>{const e=this.state===4||this.state===8;this.setAria(e)})}toggleExpanded(){const{accordionGroupEl:e,disabled:t,readonly:i,value:s,state:r}=this;if(!(t||i)&&e){const o=r===1||r===2;e.requestAccordionToggle(s,o)}}render(){const{disabled:e,readonly:t}=this,i=Tt(this),s=this.state===4||this.state===8,r=s?"header expanded":"header",o=s?"content expanded":"content";return this.setAria(s),q(Yt,{key:"073e1d02c18dcbc20c68648426e87c14750c031d",class:{[i]:!0,"accordion-expanding":this.state===8,"accordion-expanded":this.state===4,"accordion-collapsing":this.state===2,"accordion-collapsed":this.state===1,"accordion-next":this.isNext,"accordion-previous":this.isPrevious,"accordion-disabled":e,"accordion-readonly":t,"accordion-animated":this.shouldAnimate()}},q("div",{key:"9b4cf326de8bb6b4033992903c0c1bfd7eea9bcc",onClick:()=>this.toggleExpanded(),id:"header",part:r,"aria-controls":"content",ref:a=>this.headerEl=a},q("slot",{key:"464c32a37f64655eacf4218284214f5f30b14a1e",name:"header"})),q("div",{key:"8bb52e6a62d7de0106b253201a89a32e79d9a594",id:"content",part:o,role:"region","aria-labelledby":"header",ref:a=>this.contentEl=a},q("div",{key:"1d9dfd952ad493754aaeea7a8f625b33c2dd90a0",id:"content-wrapper",ref:a=>this.contentElWrapper=a},q("slot",{key:"970dfbc55a612d739d0ca3b7b1a08e5c96d0c479",name:"content"}))))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:_ie,md:Eie}}},[49,"ion-accordion",{value:[1],disabled:[4],readonly:[4],toggleIcon:[1,"toggle-icon"],toggleIconSlot:[1,"toggle-icon-slot"],state:[32],isNext:[32],isPrevious:[32]},void 0,{value:["valueChanged"]}]);let Cie=0;function Sie(){if(typeof customElements>"u")return;["ion-accordion","ion-icon"].forEach(e=>{switch(e){case"ion-accordion":customElements.get(e)||customElements.define(e,Tie);break;case"ion-icon":customElements.get(e)||$l();break}})}const Aie=Sie;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const pi=(n,...e)=>console.warn("[Ionic Warning]: ".concat(n),...e),Pf=(n,...e)=>console.error("[Ionic Error]: ".concat(n),...e),Iie=(n,...e)=>console.error("<".concat(n.tagName.toLowerCase(),"> must be used inside ").concat(e.join(" or "),"."));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Pie=":host{display:block}:host(.accordion-group-expand-inset){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanding),:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanded){border-bottom:none}",Rie=Pie,$ie=":host{display:block}:host(.accordion-group-expand-inset){-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion){-webkit-box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanding),:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanded){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;border-radius:6px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-previous){border-end-end-radius:6px;border-end-start-radius:6px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-next){border-start-start-radius:6px;border-start-end-radius:6px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion):first-of-type{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",Lie=$ie,Oie=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=at(this,"ionChange",7),this.ionValueChange=at(this,"ionValueChange",7),this.animated=!0,this.multiple=void 0,this.value=void 0,this.disabled=!1,this.readonly=!1,this.expand="compact"}valueChanged(){const{value:e,multiple:t}=this;!t&&Array.isArray(e)&&pi('ion-accordion-group was passed an array of values, but multiple="false". This is incorrect usage and may result in unexpected behaviors. To dismiss this warning, pass a string to the "value" property when multiple="false".\n\n  Value Passed: ['.concat(e.map(i=>"'".concat(i,"'")).join(", "),"]\n"),this.el),this.ionValueChange.emit({value:this.value})}async disabledChanged(){const{disabled:e}=this,t=await this.getAccordions();for(const i of t)i.disabled=e}async readonlyChanged(){const{readonly:e}=this,t=await this.getAccordions();for(const i of t)i.readonly=e}async onKeydown(e){const t=document.activeElement;if(!t||!t.closest('ion-accordion [slot="header"]'))return;const s=t.tagName==="ION-ACCORDION"?t:t.closest("ion-accordion");if(!s||s.closest("ion-accordion-group")!==this.el)return;const o=await this.getAccordions(),a=o.findIndex(c=>c===s);if(a===-1)return;let l;e.key==="ArrowDown"?l=this.findNextAccordion(o,a):e.key==="ArrowUp"?l=this.findPreviousAccordion(o,a):e.key==="Home"?l=o[0]:e.key==="End"&&(l=o[o.length-1]),l!==void 0&&l!==t&&l.focus()}async componentDidLoad(){this.disabled&&this.disabledChanged(),this.readonly&&this.readonlyChanged(),this.valueChanged()}setValue(e){const t=this.value=e;this.ionChange.emit({value:t})}async requestAccordionToggle(e,t){const{multiple:i,value:s,readonly:r,disabled:o}=this;if(!(r||o))if(t)if(i){const a=s!=null?s:[],l=Array.isArray(a)?a:[a];l.find(d=>d===e)===void 0&&e!==void 0&&this.setValue([...l,e])}else this.setValue(e);else if(i){const a=s!=null?s:[],l=Array.isArray(a)?a:[a];this.setValue(l.filter(c=>c!==e))}else this.setValue(void 0)}findNextAccordion(e,t){const i=e[t+1];return i===void 0?e[0]:i}findPreviousAccordion(e,t){const i=e[t-1];return i===void 0?e[e.length-1]:i}async getAccordions(){return Array.from(this.el.querySelectorAll(":scope > ion-accordion"))}render(){const{disabled:e,readonly:t,expand:i}=this,s=Tt(this);return q(Yt,{key:"82f3e77066fabb4736638ee4c487ad56efd39c63",class:{[s]:!0,"accordion-group-disabled":e,"accordion-group-readonly":t,["accordion-group-expand-".concat(i)]:!0},role:"presentation"},q("slot",{key:"a3c791ea887fc640b512f81d429be465ae902b3d"}))}get el(){return this}static get watchers(){return{value:["valueChanged"],disabled:["disabledChanged"],readonly:["readonlyChanged"]}}static get style(){return{ios:Rie,md:Lie}}},[33,"ion-accordion-group",{animated:[4],multiple:[4],value:[1025],disabled:[4],readonly:[4],expand:[1],requestAccordionToggle:[64],getAccordions:[64]},[[0,"keydown","onKeydown"]],{value:["valueChanged"],disabled:["disabledChanged"],readonly:["readonlyChanged"]}]);function Die(){if(typeof customElements>"u")return;["ion-accordion-group"].forEach(e=>{switch(e){case"ion-accordion-group":customElements.get(e)||customElements.define(e,Oie);break}})}const Mie=Die;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Nie=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",Fie=Nie,Bie=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",Vie=Bie,Uie=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=at(this,"ionBackdropTap",7),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const e=Tt(this);return q(Yt,{key:"7abaf2c310aa399607451b14063265e8a5846938","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:Fie,md:Vie}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function Eh(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(e=>{switch(e){case"ion-backdrop":customElements.get(e)||customElements.define(e,Uie);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ts=(n,e)=>e.closest(n)!==null,ds=(n,e)=>typeof n=="string"&&n.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(n)]:!0},e):e,zie=n=>n!==void 0?(Array.isArray(n)?n:n.split(" ")).filter(t=>t!=null).map(t=>t.trim()).filter(t=>t!==""):[],Ko=n=>{const e={};return zie(n).forEach(t=>e[t]=!0),e},Hie=/^[a-z][a-z0-9+\-.]*:/,rx=async(n,e,t,i)=>{if(n!=null&&n[0]!=="#"&&!Hie.test(n)){const s=document.querySelector("ion-router");if(s)return e!=null&&e.preventDefault(),s.push(n,t,i)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jie=":host{--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:0.8125rem;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{border-radius:10px;font-size:max(13px, 0.8125rem)}",Gie=jie,Wie=":host{--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff);--padding-top:3px;--padding-end:8px;--padding-bottom:3px;--padding-start:8px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:inline-block;min-width:10px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:0.8125rem;font-weight:bold;line-height:1;text-align:center;white-space:nowrap;contain:content;vertical-align:baseline}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(:empty){display:none}:host{--padding-top:3px;--padding-end:4px;--padding-bottom:4px;--padding-start:4px;border-radius:4px}",qie=Wie,Kie=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=Tt(this);return q(Yt,{key:"1a2d39c5deec771a2f2196447627b62a7d4c8389",class:ds(this.color,{[e]:!0})},q("slot",{key:"fc1b6587f1ed24715748eb6785e7fb7a57cdd5cd"}))}static get style(){return{ios:Gie,md:qie}}},[33,"ion-badge",{color:[513]}]);function Yie(){if(typeof customElements>"u")return;["ion-badge"].forEach(e=>{switch(e){case"ion-badge":customElements.get(e)||customElements.define(e,Kie);break}})}const Xie=Yie;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Qie=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",Zie=Qie,Jie=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise(i=>{Cl(()=>{const s=this.el.getBoundingClientRect(),r=s.width,o=s.height,a=Math.sqrt(r*r+o*o),l=Math.max(o,r),c=this.unbounded?l:a+tse,d=Math.floor(l*nse),u=c/d;let h=e-s.left,f=t-s.top;this.unbounded&&(h=r*.5,f=o*.5);const m=h-d*.5,g=f-d*.5,b=r*.5-h,w=o*.5-f;fi(()=>{const x=document.createElement("div");x.classList.add("ripple-effect");const k=x.style;k.top=g+"px",k.left=m+"px",k.width=k.height=d+"px",k.setProperty("--final-scale","".concat(u)),k.setProperty("--translate-end","".concat(b,"px, ").concat(w,"px")),(this.el.shadowRoot||this.el).appendChild(x),setTimeout(()=>{i(()=>{ese(x)})},325)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=Tt(this);return q(Yt,{key:"7ae559bda5d2c1856a45bfa150c2cb4f83373f8e",role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return Zie}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),ese=n=>{n.classList.add("fade-out"),setTimeout(()=>{n.remove()},200)},tse=10,nse=.5;function Jo(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,Jie);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ise=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:min(1rem, 48px);font-weight:500;letter-spacing:0}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #004acd);--background-focused:var(--ion-color-primary-shade, #004acd);--background-hover:var(--ion-color-primary-tint, #1a65eb);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #0054e9);--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:transparent;--background-focused-opacity:.1;font-size:min(1.0625rem, 51px);font-weight:normal}:host(.in-buttons){font-size:clamp(17px, 1.0625rem, 21.08px);font-weight:400}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:min(1.25rem, 60px)}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:min(0.8125rem, 39px)}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.125em, 60px);min-height:clamp(30px, 2.125em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 1.125em, 43.02px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(12.1394px, 1.308125em, 40.1856px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.12px, 0.9em, 43.056px)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}',sse=ise,rse=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:normal;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #0054e9);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #0054e9);--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #0054e9)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:0.875rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #0054e9);--background-hover:var(--ion-color-primary, #0054e9);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:999px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:1.25rem}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:0.8125rem}:host(.button-strong){font-weight:bold}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:var(--padding-top);--padding-end:var(--padding-top);--padding-start:var(--padding-end);min-width:clamp(30px, 2.86em, 60px);min-height:clamp(30px, 2.86em, 60px)}::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.104px, 1.6em, 43.008px)}:host(.button-small.button-has-icon-only){min-width:clamp(23px, 2.16em, 54px);min-height:clamp(23px, 2.16em, 54px)}:host(.button-small) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(13.002px, 1.23125em, 40.385px)}:host(.button-large.button-has-icon-only){min-width:clamp(46px, 2.5em, 78px);min-height:clamp(46px, 2.5em, 78px)}:host(.button-large) ::slotted(ion-icon[slot=icon-only]){font-size:clamp(15.008px, 1.4em, 43.008px)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-background, var(--color));color:var(--ion-toolbar-color, var(--background), var(--ion-color-primary-contrast, #fff))}',ose=rse,ase=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=at(this,"ionFocus",7),this.ionBlur=at(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:t}=this;this.type==="button"?rx(this.href,e,this.routerDirection,this.routerAnimation):Pne(t)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.slotChanged=()=>{this.isCircle=this.hasIconOnly},this.isCircle=!1,this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:t}=this;if(t!==null&&e.contains(t))return;const i=this.formButtonEl=document.createElement("button");i.type=this.type,i.style.display="none",i.disabled=this.disabled,e.appendChild(i)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=Kd(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if(typeof e=="string"){const t=document.getElementById(e);return t?t instanceof HTMLFormElement?t:(pi('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is attached to a <form> element.'),this.el),null):(pi('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'),this.el),null)}return e!==void 0?(pi('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=Tt(this),{buttonType:t,type:i,disabled:s,rel:r,target:o,size:a,href:l,color:c,expand:d,hasIconOnly:u,shape:h,strong:f,inheritedAttributes:m}=this,g=a===void 0&&this.inItem?"small":a,b=l===void 0?"button":"a",w=b==="button"?{type:i}:{download:this.download,href:l,rel:r,target:o};let x=this.fill;return x==null&&(x=this.inToolbar||this.inListHeader?"clear":"solid"),i!=="button"&&this.renderHiddenButton(),q(Yt,{key:"340a809d85698741bb36e796355cae89a970655f",onClick:this.handleClick,"aria-disabled":s?"true":null,class:ds(c,{[e]:!0,[t]:!0,["".concat(t,"-").concat(d)]:d!==void 0,["".concat(t,"-").concat(g)]:g!==void 0,["".concat(t,"-").concat(h)]:h!==void 0,["".concat(t,"-").concat(x)]:!0,["".concat(t,"-strong")]:f,"in-toolbar":ts("ion-toolbar",this.el),"in-toolbar-color":ts("ion-toolbar[color]",this.el),"in-buttons":ts("ion-buttons",this.el),"button-has-icon-only":u,"button-disabled":s,"ion-activatable":!0,"ion-focusable":!0})},q(b,Object.assign({key:"03ae1b94a0d606aa65aa6f82c2fc76abcf3f1300"},w,{class:"button-native",part:"native",disabled:s,onFocus:this.onFocus,onBlur:this.onBlur},m),q("span",{key:"90bf53d4ffcab88ee596ece7113d5b6409e61143",class:"button-inner"},q("slot",{key:"a7876695f0d8702e8bcb471ae4c0984f27d77458",name:"icon-only",onSlotchange:this.slotChanged}),q("slot",{key:"2c8551586f8726884d7797a6d3fee2d4b3aab35f",name:"start"}),q("slot",{key:"9ab07accdb22b08d0a463a7c821c9793507d1f7d"}),q("slot",{key:"8984afe177e6ba021435875a3798e2a64f3bdf2c",name:"end"})),e==="md"&&q("ion-ripple-effect",{key:"3e9f01e7a1198b6b7109502293a971da7072a4f3",type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:sse,md:ose}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1],isCircle:[32]},void 0,{disabled:["disabledChanged"]}]);function QS(){if(typeof customElements>"u")return;["ion-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-button":customElements.get(e)||customElements.define(e,ase);break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lse=QS;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cse=".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:5px;--padding-end:5px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-ios-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.41em;line-height:0.67}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.65em;line-height:0.67}",dse=cse,use=".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:3px;--padding-bottom:3px;--padding-start:8px;--padding-end:8px;--box-shadow:none;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;min-height:32px}.sc-ion-buttons-md-s .button-has-icon-only{--padding-top:0;--padding-bottom:0}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:3rem;height:3rem}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-margin-start:0.4em;margin-inline-start:0.4em;font-size:1.4em}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}",hse=use,fse=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.collapse=!1}render(){const e=Tt(this);return q(Yt,{key:"58c1fc5eb867d0731c63549b1ccb3ec3bbbe6e1b",class:{[e]:!0,"buttons-collapse":this.collapse}},q("slot",{key:"0c8f95b9840c8fa0c4e50be84c5159620a3eb5c8"}))}static get style(){return{ios:dse,md:hse}}},[38,"ion-buttons",{collapse:[4]}]);function pse(){if(typeof customElements>"u")return;["ion-buttons"].forEach(e=>{switch(e){case"ion-buttons":customElements.get(e)||customElements.define(e,fse);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mse=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:0.875rem;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",gse=mse,bse=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:0.875rem;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}",vse=bse,yse=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=Fc(this.el,["aria-label"])}isClickable(){return this.href!==void 0||this.button}renderCard(e){const t=this.isClickable();if(!t)return[q("slot",null)];const{href:i,routerAnimation:s,routerDirection:r,inheritedAriaAttributes:o}=this,a=t?i===void 0?"button":"a":"div",l=a==="button"?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return q(a,Object.assign({},l,o,{class:"card-native",part:"native",disabled:this.disabled,onClick:c=>rx(i,c,r,s)}),q("slot",null),t&&e==="md"&&q("ion-ripple-effect",null))}render(){const e=Tt(this);return q(Yt,{key:"85e9b30bd81e79a0c7ac75cb3664bdcf9e4afc4d",class:ds(this.color,{[e]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(e))}get el(){return this}static get style(){return{ios:gse,md:vse}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]);function wse(){if(typeof customElements>"u")return;["ion-card","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-card":customElements.get(e)||customElements.define(e,yse);break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const xse=wse;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _se=":host{--checkbox-background-checked:var(--ion-color-primary, #0054e9);--border-color-checked:var(--ion-color-primary, #0054e9);--checkmark-color:var(--ion-color-primary-contrast, #fff);--transition:none;display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-color){--checkbox-background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}.checkbox-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper,:host(.in-item:not(.checkbox-label-placement-stacked):not([slot])) .native-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.checkbox-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.checkbox-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.checkbox-icon{border-radius:var(--border-radius);position:relative;width:var(--size);height:var(--size);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--checkbox-background);-webkit-box-sizing:border-box;box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-justify-space-between) .checkbox-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.checkbox-justify-start) .checkbox-wrapper{-ms-flex-pack:start;justify-content:start}:host(.checkbox-justify-end) .checkbox-wrapper{-ms-flex-pack:end;justify-content:end}:host(.checkbox-alignment-start) .checkbox-wrapper{-ms-flex-align:start;align-items:start}:host(.checkbox-alignment-center) .checkbox-wrapper{-ms-flex-align:center;align-items:center}:host(.checkbox-justify-space-between),:host(.checkbox-justify-start),:host(.checkbox-justify-end),:host(.checkbox-alignment-start),:host(.checkbox-alignment-center){display:block}:host(.checkbox-label-placement-start) .checkbox-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.checkbox-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-end) .checkbox-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.checkbox-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.checkbox-label-placement-stacked) .checkbox-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.checkbox-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--checkbox-background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:50%;--border-width:0.125rem;--border-style:solid;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.23);--checkbox-background:var(--ion-item-background, var(--ion-background-color, #fff));--size:min(1.375rem, 55.836px);--checkmark-width:1.5px}:host(.checkbox-disabled){opacity:0.3}",kse=_se,Ese=":host{--checkbox-background-checked:var(--ion-color-primary, #0054e9);--border-color-checked:var(--ion-color-primary, #0054e9);--checkmark-color:var(--ion-color-primary-contrast, #fff);--transition:none;display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}:host(.ion-color){--checkbox-background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}.checkbox-wrapper{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper,:host(.in-item:not(.checkbox-label-placement-stacked):not([slot])) .native-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.checkbox-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.checkbox-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.checkbox-icon{border-radius:var(--border-radius);position:relative;width:var(--size);height:var(--size);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--checkbox-background);-webkit-box-sizing:border-box;box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-justify-space-between) .checkbox-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.checkbox-justify-start) .checkbox-wrapper{-ms-flex-pack:start;justify-content:start}:host(.checkbox-justify-end) .checkbox-wrapper{-ms-flex-pack:end;justify-content:end}:host(.checkbox-alignment-start) .checkbox-wrapper{-ms-flex-align:start;align-items:start}:host(.checkbox-alignment-center) .checkbox-wrapper{-ms-flex-align:center;align-items:center}:host(.checkbox-justify-space-between),:host(.checkbox-justify-start),:host(.checkbox-justify-end),:host(.checkbox-alignment-start),:host(.checkbox-alignment-center){display:block}:host(.checkbox-label-placement-start) .checkbox-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.checkbox-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-end) .checkbox-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.checkbox-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.checkbox-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}:host(.checkbox-label-placement-stacked) .checkbox-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.checkbox-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.checkbox-label-placement-stacked.checkbox-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).checkbox-label-placement-stacked.checkbox-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.checkbox-label-placement-stacked.checkbox-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--checkbox-background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:calc(var(--size) * .125);--border-width:2px;--border-style:solid;--border-color:rgb(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--checkmark-width:3;--checkbox-background:var(--ion-item-background, var(--ion-background-color, #fff));--transition:background 180ms cubic-bezier(0.4, 0, 0.2, 1);--size:18px}.checkbox-icon path{stroke-dasharray:30;stroke-dashoffset:30}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{stroke-dashoffset:0;-webkit-transition:stroke-dashoffset 90ms linear 90ms;transition:stroke-dashoffset 90ms linear 90ms}:host(.checkbox-disabled) .label-text-wrapper{opacity:0.38}:host(.checkbox-disabled) .native-wrapper{opacity:0.63}",Tse=Ese,Cse=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=at(this,"ionChange",7),this.ionFocus=at(this,"ionFocus",7),this.ionBlur=at(this,"ionBlur",7),this.inputId="ion-cb-".concat(Sse++),this.inheritedAttributes={},this.setChecked=e=>{const t=this.checked=e;this.ionChange.emit({checked:t,value:this.value})},this.toggleChecked=e=>{e.preventDefault(),this.setFocus(),this.setChecked(!this.checked),this.indeterminate=!1},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.onClick=e=>{this.disabled||this.toggleChecked(e)},this.color=void 0,this.name=this.inputId,this.checked=!1,this.indeterminate=!1,this.disabled=!1,this.value="on",this.labelPlacement="start",this.justify=void 0,this.alignment=void 0}componentWillLoad(){this.inheritedAttributes=Object.assign({},Kd(this.el))}async setFocus(){this.focusEl&&this.focusEl.focus()}render(){const{color:e,checked:t,disabled:i,el:s,getSVGPath:r,indeterminate:o,inheritedAttributes:a,inputId:l,justify:c,labelPlacement:d,name:u,value:h,alignment:f}=this,m=Tt(this),g=r(m,o);return YS(!0,s,u,t?h:"",i),q(Yt,{key:"6dc787e1100521d08c4900104e1a3e2f594e919f","aria-checked":o?"mixed":"".concat(t),class:ds(e,{[m]:!0,"in-item":ts("ion-item",s),"checkbox-checked":t,"checkbox-disabled":i,"checkbox-indeterminate":o,interactive:!0,["checkbox-justify-".concat(c)]:c!==void 0,["checkbox-alignment-".concat(f)]:f!==void 0,["checkbox-label-placement-".concat(d)]:!0}),onClick:this.onClick},q("label",{key:"68222fb736a5ec3f2e488649b0e2ce0417dcb224",class:"checkbox-wrapper"},q("input",Object.assign({key:"f12962d7e9b19c744cfdbdeccc67ae7f5d080281",type:"checkbox",checked:t?!0:void 0,disabled:i,id:l,onChange:this.toggleChecked,onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),ref:b=>this.focusEl=b},a)),q("div",{key:"c72df2699414b1e5a41a1bc267bc634f0c93dcff",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":s.textContent===""},part:"label"},q("slot",{key:"a2a80285178a7e0e3b536fc9ca26b8b444aa4307"})),q("div",{key:"c2b05e0d1fe8df5dcd72858220b5ff51ecaee4cc",class:"native-wrapper"},q("svg",{key:"ee24913fded72258ebd9713654a6dba92a18fcf7",class:"checkbox-icon",viewBox:"0 0 24 24",part:"container"},g))))}getSVGPath(e,t){let i=t?q("path",{d:"M6 12L18 12",part:"mark"}):q("path",{d:"M5.9,12.5l3.8,3.8l8.8-8.8",part:"mark"});return e==="md"&&(i=t?q("path",{d:"M2 12H22",part:"mark"}):q("path",{d:"M1.73,12.91 8.1,19.28 22.79,4.59",part:"mark"})),i}get el(){return this}static get style(){return{ios:kse,md:Tse}}},[33,"ion-checkbox",{color:[513],name:[1],checked:[1028],indeterminate:[1028],disabled:[4],value:[8],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1],setFocus:[64]}]);let Sse=0;function Ase(){if(typeof customElements>"u")return;["ion-checkbox"].forEach(e=>{switch(e){case"ion-checkbox":customElements.get(e)||customElements.define(e,Cse);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ise=Ase;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Pse=":host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.87);border-radius:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:4px;margin-inline-end:4px;margin-top:4px;margin-bottom:4px;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:6px;padding-bottom:6px;display:-ms-inline-flexbox;display:inline-flex;position:relative;-ms-flex-align:center;align-items:center;min-height:32px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);cursor:pointer;overflow:hidden;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.chip-disabled){cursor:default;opacity:0.4;pointer-events:none}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.08);color:var(--ion-color-shade)}:host(.ion-color:focus){background:rgba(var(--ion-color-base-rgb), 0.12)}:host(.ion-color.ion-activated){background:rgba(var(--ion-color-base-rgb), 0.16)}:host(.chip-outline){border-width:1px;border-style:solid}:host(.chip-outline){border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.32);background:transparent}:host(.chip-outline.ion-color){border-color:rgba(var(--ion-color-base-rgb), 0.32)}:host(.chip-outline:not(.ion-color):focus){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.04)}:host(.chip-outline.ion-activated:not(.ion-color)){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)}::slotted(ion-icon){font-size:1.4285714286em}:host(:not(.ion-color)) ::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}::slotted(ion-icon:first-child){-webkit-margin-start:-4px;margin-inline-start:-4px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:-4px;margin-bottom:-4px}::slotted(ion-icon:last-child){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:-4px;margin-inline-end:-4px;margin-top:-4px;margin-bottom:-4px}::slotted(ion-avatar){-ms-flex-negative:0;flex-shrink:0;width:1.7142857143em;height:1.7142857143em}::slotted(ion-avatar:first-child){-webkit-margin-start:-8px;margin-inline-start:-8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:-4px;margin-bottom:-4px}::slotted(ion-avatar:last-child){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:-8px;margin-inline-end:-8px;margin-top:-4px;margin-bottom:-4px}:host(:focus){outline:none}:host(:focus){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.16)}:host(.ion-activated){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@media (any-hover: hover){:host(:hover){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.16)}:host(.ion-color:hover){background:rgba(var(--ion-color-base-rgb), 0.12)}:host(.chip-outline:not(.ion-color):hover){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.04)}}:host{font-size:clamp(13px, 0.875rem, 22px)}",Rse=Pse,$se=":host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.87);border-radius:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:4px;margin-inline-end:4px;margin-top:4px;margin-bottom:4px;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:6px;padding-bottom:6px;display:-ms-inline-flexbox;display:inline-flex;position:relative;-ms-flex-align:center;align-items:center;min-height:32px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);cursor:pointer;overflow:hidden;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.chip-disabled){cursor:default;opacity:0.4;pointer-events:none}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.08);color:var(--ion-color-shade)}:host(.ion-color:focus){background:rgba(var(--ion-color-base-rgb), 0.12)}:host(.ion-color.ion-activated){background:rgba(var(--ion-color-base-rgb), 0.16)}:host(.chip-outline){border-width:1px;border-style:solid}:host(.chip-outline){border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.32);background:transparent}:host(.chip-outline.ion-color){border-color:rgba(var(--ion-color-base-rgb), 0.32)}:host(.chip-outline:not(.ion-color):focus){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.04)}:host(.chip-outline.ion-activated:not(.ion-color)){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)}::slotted(ion-icon){font-size:1.4285714286em}:host(:not(.ion-color)) ::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}::slotted(ion-icon:first-child){-webkit-margin-start:-4px;margin-inline-start:-4px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:-4px;margin-bottom:-4px}::slotted(ion-icon:last-child){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:-4px;margin-inline-end:-4px;margin-top:-4px;margin-bottom:-4px}::slotted(ion-avatar){-ms-flex-negative:0;flex-shrink:0;width:1.7142857143em;height:1.7142857143em}::slotted(ion-avatar:first-child){-webkit-margin-start:-8px;margin-inline-start:-8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:-4px;margin-bottom:-4px}::slotted(ion-avatar:last-child){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:-8px;margin-inline-end:-8px;margin-top:-4px;margin-bottom:-4px}:host(:focus){outline:none}:host(:focus){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.16)}:host(.ion-activated){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@media (any-hover: hover){:host(:hover){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.16)}:host(.ion-color:hover){background:rgba(var(--ion-color-base-rgb), 0.12)}:host(.chip-outline:not(.ion-color):hover){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.04)}}:host{font-size:0.875rem}",Lse=$se,Ose=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.outline=!1,this.disabled=!1}render(){const e=Tt(this);return q(Yt,{key:"fa2e9a4837ef87a17ef10f388e8caa7f604d9145","aria-disabled":this.disabled?"true":null,class:ds(this.color,{[e]:!0,"chip-outline":this.outline,"chip-disabled":this.disabled,"ion-activatable":!0})},q("slot",{key:"3793fbd9d915cef7241fb101e2bc64c08b9ba482"}),e==="md"&&q("ion-ripple-effect",{key:"d3b95b53918611dec095a50f2aaaab65617947a4"}))}static get style(){return{ios:Rse,md:Lse}}},[33,"ion-chip",{color:[513],outline:[4],disabled:[4]}]);function Dse(){if(typeof customElements>"u")return;["ion-chip","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-chip":customElements.get(e)||customElements.define(e,Ose);break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Mse=Dse;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O1=typeof window<"u"?window:void 0;O1&&(O1.CSS&&O1.CSS.supports&&O1.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const md=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Nse=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',Fse=Nse,Bse=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=at(this,"ionScrollStart",7),this.ionScroll=at(this,"ionScroll",7),this.ionScrollEnd=at(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.inheritedAttributes={},this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.fixedSlotPlacement="after",this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}componentWillLoad(){this.inheritedAttributes=Kd(this.el)}connectedCallback(){if(this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null,Yg(this.el)){const e=this.tabsElement=this.el.closest("ion-tabs");e!==null&&(this.tabsLoadCallback=()=>this.resize(),e.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),Yg(this.el)){const{tabsElement:e,tabsLoadCallback:t}=this;e!==null&&t!==void 0&&e.removeEventListener("ionTabBarLoaded",t),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=Tt(this);return e===void 0?t==="ios"&&mi("ios"):e}resize(){this.fullscreen?Cl(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,kc(this))}readDimensions(){const e=Use(this.el),t=Math.max(this.el.offsetTop,0),i=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||i!==this.cBottom)&&(this.cTop=t,this.cBottom=i,kc(this))}onScroll(e){const t=Date.now(),i=!this.isScrolling;this.lastScroll=t,i&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,Cl(s=>{this.queued=!1,this.detail.event=e,zse(this.detail,this.scrollEl,s,i),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>Ra(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>Ra(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),i=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,i,e)}async scrollByPoint(e,t,i){const s=await this.getScrollElement();return this.scrollToPoint(e+s.scrollLeft,t+s.scrollTop,i)}async scrollToPoint(e,t,i=0){const s=await this.getScrollElement();if(i<32){t!=null&&(s.scrollTop=t),e!=null&&(s.scrollLeft=e);return}let r,o=0;const a=new Promise(f=>r=f),l=s.scrollTop,c=s.scrollLeft,d=t!=null?t-l:0,u=e!=null?e-c:0,h=f=>{const m=Math.min(1,(f-o)/i)-1,g=Math.pow(m,3)+1;d!==0&&(s.scrollTop=Math.floor(g*d+l)),u!==0&&(s.scrollLeft=Math.floor(g*u+c)),g<1?requestAnimationFrame(h):r()};return requestAnimationFrame(f=>{o=f,h(f)}),a}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{fixedSlotPlacement:e,inheritedAttributes:t,isMainContent:i,scrollX:s,scrollY:r,el:o}=this,a=md(o)?"rtl":"ltr",l=Tt(this),c=this.shouldForceOverscroll(),d=l==="ios";return this.resize(),q(Yt,Object.assign({key:"f2a24aa66dbf5c76f9d4b06f708eb73cadc239df",role:i?"main":void 0,class:ds(this.color,{[l]:!0,"content-sizing":ts("ion-popover",this.el),overscroll:c,["content-".concat(a)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},t),q("div",{key:"6480ca7648b278abb36477b3838bccbcd4995e2a",ref:u=>this.backgroundContentEl=u,id:"background-content",part:"background"}),e==="before"?q("slot",{name:"fixed"}):null,q("div",{key:"29a23b663f5f0215bb000820c01e1814c0d55985",class:{"inner-scroll":!0,"scroll-x":s,"scroll-y":r,overscroll:(s||r)&&c},ref:u=>this.scrollEl=u,onScroll:this.scrollEvents?u=>this.onScroll(u):void 0,part:"scroll"},q("slot",{key:"0fe1bd05609a4b88ae2ce9addf5d5dc5dc1806f0"})),d?q("div",{class:"transition-effect"},q("div",{class:"transition-cover"}),q("div",{class:"transition-shadow"})):null,e==="after"?q("slot",{name:"fixed"}):null)}get el(){return this}static get style(){return Fse}},[1,"ion-content",{color:[513],fullscreen:[4],fixedSlotPlacement:[1,"fixed-slot-placement"],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),Vse=n=>{var e;return n.parentElement?n.parentElement:!((e=n.parentNode)===null||e===void 0)&&e.host?n.parentNode.host:null},Use=n=>{const e=n.closest("ion-tabs");if(e)return e;const t=n.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return t||Vse(n)},zse=(n,e,t,i)=>{const s=n.currentX,r=n.currentY,o=n.currentTime,a=e.scrollLeft,l=e.scrollTop,c=t-o;if(i&&(n.startTime=t,n.startX=a,n.startY=l,n.velocityX=n.velocityY=0),n.currentTime=t,n.currentX=n.scrollLeft=a,n.currentY=n.scrollTop=l,n.deltaX=a-n.startX,n.deltaY=l-n.startY,c>0&&c<100){const d=(a-s)/c,u=(l-r)/c;n.velocityX=d*.7+n.velocityX*.3,n.velocityY=u*.7+n.velocityY*.3}};function Hse(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,Bse);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jse=Hse;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const YP="ion-focused",Gse="ion-focusable",Wse=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],IM=n=>{let e=[],t=!0;const i=n?n.shadowRoot:document,s=n||document.body,r=u=>{e.forEach(h=>h.classList.remove(YP)),u.forEach(h=>h.classList.add(YP)),e=u},o=()=>{t=!1,r([])},a=u=>{t=Wse.includes(u.key),t||r([])},l=u=>{if(t&&u.composedPath!==void 0){const h=u.composedPath().filter(f=>f.classList?f.classList.contains(Gse):!1);r(h)}},c=()=>{i.activeElement===s&&r([])};return i.addEventListener("keydown",a),i.addEventListener("focusin",l),i.addEventListener("focusout",c),i.addEventListener("touchstart",o,{passive:!0}),i.addEventListener("mousedown",o),{destroy:()=>{i.removeEventListener("keydown",a),i.removeEventListener("focusin",l),i.removeEventListener("focusout",c),i.removeEventListener("touchstart",o),i.removeEventListener("mousedown",o)},setFocus:r}},qse=Object.freeze(Object.defineProperty({__proto__:null,startFocusVisible:IM},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ho=(n,e)=>n.month===e.month&&n.day===e.day&&n.year===e.year,Ec=(n,e)=>n.year<e.year||n.year===e.year&&n.month<e.month||n.year===e.year&&n.month===e.month&&n.day!==null&&n.day<e.day,Th=(n,e)=>n.year>e.year||n.year===e.year&&n.month>e.month||n.year===e.year&&n.month===e.month&&n.day!==null&&n.day>e.day,Kse=(n,e,t)=>{const i=Array.isArray(n)?n:[n];for(const s of i)if(e!==void 0&&Ec(s,e)||t!==void 0&&Th(s,t)){pi("The value provided to ion-datetime is out of bounds.\n\n"+"Min: ".concat(JSON.stringify(e),"\n")+"Max: ".concat(JSON.stringify(t),"\n")+"Value: ".concat(JSON.stringify(n)));break}},Yse=n=>n%4===0&&n%100!==0||n%400===0,ZS=(n,e)=>{if(e!==void 0)return e;const t=new Intl.DateTimeFormat(n,{hour:"numeric"}),i=t.resolvedOptions();if(i.hourCycle!==void 0)return i.hourCycle;const s=new Date("5/18/2021 00:00"),o=t.formatToParts(s).find(a=>a.type==="hour");if(!o)throw new Error("Hour value not found from DateTimeFormat");switch(o.value){case"0":return"h11";case"12":return"h12";case"00":return"h23";case"24":return"h24";default:throw new Error('Invalid hour cycle "'.concat(e,'"'))}},JS=n=>n==="h23"||n==="h24",Ll=(n,e)=>n===4||n===6||n===9||n===11?30:n===2?Yse(e)?29:28:31,XP=(n,e={month:"numeric",year:"numeric"})=>new Intl.DateTimeFormat(n,e).formatToParts(new Date)[0].type==="month",Xse=n=>new Intl.DateTimeFormat(n,{hour:"numeric"}).formatToParts(new Date)[0].type==="dayPeriod",Qse=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,Zse=/^((\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,Ja=n=>{if(n===void 0)return;let e=n;typeof n=="string"&&(e=n.replace(/\[|\]|\s/g,"").split(","));let t;return Array.isArray(e)?t=e.map(i=>parseInt(i,10)).filter(isFinite):t=[e],t},Jse=n=>({month:parseInt(n.getAttribute("data-month"),10),day:parseInt(n.getAttribute("data-day"),10),year:parseInt(n.getAttribute("data-year"),10),dayOfWeek:parseInt(n.getAttribute("data-day-of-week"),10)});function Qg(n){if(Array.isArray(n)){const t=[];for(const i of n){const s=Qg(i);if(!s)return;t.push(s)}return t}let e=null;if(n!=null&&n!==""&&(e=Zse.exec(n),e?(e.unshift(void 0,void 0),e[2]=e[3]=void 0):e=Qse.exec(n)),e===null){pi("Unable to parse date string: ".concat(n,". Please provide a valid ISO 8601 datetime string."));return}for(let t=1;t<8;t++)e[t]=e[t]!==void 0?parseInt(e[t],10):void 0;return{year:e[1],month:e[2],day:e[3],hour:e[4],minute:e[5],ampm:e[4]<12?"am":"pm"}}const PM=(n,e,t)=>e&&Ec(n,e)?e:t&&Th(n,t)?t:n,RM=n=>n>=12?"pm":"am",ere=(n,e)=>{const t=Qg(n);if(t===void 0)return;const{month:i,day:s,year:r,hour:o,minute:a}=t,l=r!=null?r:e.year,c=i!=null?i:12;return{month:c,day:s!=null?s:Ll(c,l),year:l,hour:o!=null?o:23,minute:a!=null?a:59}},tre=(n,e)=>{const t=Qg(n);if(t===void 0)return;const{month:i,day:s,year:r,hour:o,minute:a}=t;return{month:i!=null?i:1,day:s!=null?s:1,year:r!=null?r:e.year,hour:o!=null?o:0,minute:a!=null?a:0}},tf=n=>("0"+(n!==void 0?Math.abs(n):"0")).slice(-2),nre=n=>("000"+(n!==void 0?Math.abs(n):"0")).slice(-4);function ud(n){if(Array.isArray(n))return n.map(t=>ud(t));let e="";return n.year!==void 0?(e=nre(n.year),n.month!==void 0&&(e+="-"+tf(n.month),n.day!==void 0&&(e+="-"+tf(n.day),n.hour!==void 0&&(e+="T".concat(tf(n.hour),":").concat(tf(n.minute),":00"))))):n.hour!==void 0&&(e=tf(n.hour)+":"+tf(n.minute)),e}const $M=(n,e)=>e===void 0?n:e==="am"?n===12?0:n:n===12?12:n+12,ire=n=>{const{dayOfWeek:e}=n;if(e==null)throw new Error("No day of week provided");return eA(n,e)},sre=n=>{const{dayOfWeek:e}=n;if(e==null)throw new Error("No day of week provided");return tA(n,6-e)},rre=n=>tA(n,1),ore=n=>eA(n,1),are=n=>eA(n,7),lre=n=>tA(n,7),eA=(n,e)=>{const{month:t,day:i,year:s}=n;if(i===null)throw new Error("No day provided");const r={month:t,day:i,year:s};if(r.day=i-e,r.day<1&&(r.month-=1),r.month<1&&(r.month=12,r.year-=1),r.day<1){const o=Ll(r.month,r.year);r.day=o+r.day}return r},tA=(n,e)=>{const{month:t,day:i,year:s}=n;if(i===null)throw new Error("No day provided");const r={month:t,day:i,year:s},o=Ll(t,s);return r.day=i+e,r.day>o&&(r.day-=o,r.month+=1),r.month>12&&(r.month=1,r.year+=1),r},Zg=n=>{const e=n.month===1?12:n.month-1,t=n.month===1?n.year-1:n.year,i=Ll(e,t),s=i<n.day?i:n.day;return{month:e,year:t,day:s}},mp=n=>{const e=n.month===12?1:n.month+1,t=n.month===12?n.year+1:n.year,i=Ll(e,t),s=i<n.day?i:n.day;return{month:e,year:t,day:s}},LM=(n,e)=>{const t=n.month,i=n.year+e,s=Ll(t,i),r=s<n.day?s:n.day;return{month:t,year:i,day:r}},cre=n=>LM(n,-1),dre=n=>LM(n,1),ure=(n,e,t)=>e?n:$M(n,t),hre=(n,e)=>{const{ampm:t,hour:i}=n;let s=i;return t==="am"&&e==="pm"?s=$M(s,"pm"):t==="pm"&&e==="am"&&(s=Math.abs(s-12)),s},fre=(n,e,t)=>{const{month:i,day:s,year:r}=n,o=PM(Object.assign({},n),e,t),a=Ll(i,r);return s!==null&&a<s&&(o.day=a),e!==void 0&&Ho(o,e)&&o.hour!==void 0&&e.hour!==void 0&&(o.hour<e.hour?(o.hour=e.hour,o.minute=e.minute):o.hour===e.hour&&o.minute!==void 0&&e.minute!==void 0&&o.minute<e.minute&&(o.minute=e.minute)),t!==void 0&&Ho(n,t)&&o.hour!==void 0&&t.hour!==void 0&&(o.hour>t.hour?(o.hour=t.hour,o.minute=t.minute):o.hour===t.hour&&o.minute!==void 0&&t.minute!==void 0&&o.minute>t.minute&&(o.minute=t.minute)),o},pre=({refParts:n,monthValues:e,dayValues:t,yearValues:i,hourValues:s,minuteValues:r,minParts:o,maxParts:a})=>{const{hour:l,minute:c,day:d,month:u,year:h}=n,f=Object.assign(Object.assign({},n),{dayOfWeek:void 0});if(i!==void 0){const m=i.filter(g=>!(o!==void 0&&g<o.year||a!==void 0&&g>a.year));f.year=Om(h,m)}if(e!==void 0){const m=e.filter(g=>!(o!==void 0&&f.year===o.year&&g<o.month||a!==void 0&&f.year===a.year&&g>a.month));f.month=Om(u,m)}if(d!==null&&t!==void 0){const m=t.filter(g=>!(o!==void 0&&Ec(Object.assign(Object.assign({},f),{day:g}),o)||a!==void 0&&Th(Object.assign(Object.assign({},f),{day:g}),a)));f.day=Om(d,m)}if(l!==void 0&&s!==void 0){const m=s.filter(g=>!((o==null?void 0:o.hour)!==void 0&&Ho(f,o)&&g<o.hour||(a==null?void 0:a.hour)!==void 0&&Ho(f,a)&&g>a.hour));f.hour=Om(l,m),f.ampm=RM(f.hour)}if(c!==void 0&&r!==void 0){const m=r.filter(g=>!((o==null?void 0:o.minute)!==void 0&&Ho(f,o)&&f.hour===o.hour&&g<o.minute||(a==null?void 0:a.minute)!==void 0&&Ho(f,a)&&f.hour===a.hour&&g>a.minute));f.minute=Om(c,m)}return f},Om=(n,e)=>{let t=e[0],i=Math.abs(t-n);for(let s=1;s<e.length;s++){const r=e[s],o=Math.abs(r-n);o<i&&(t=r,i=o)}return t},mre=n=>n===void 0?"":n.toUpperCase(),OM=n=>Object.assign(Object.assign({},n),{timeZone:"UTC",timeZoneName:void 0}),gre=(n,e,t,i={hour:"numeric",minute:"numeric"})=>{const s={hour:e.hour,minute:e.minute};return s.hour===void 0||s.minute===void 0?"Invalid Time":new Intl.DateTimeFormat(n,Object.assign(Object.assign({},OM(i)),{hourCycle:t})).format(new Date(ud(Object.assign({year:2023,day:1,month:1},s))+"Z"))},DM=n=>{const e=n.toString();return e.length>1?e:"0".concat(e)},bre=(n,e)=>{if(n===0)switch(e){case"h11":return"0";case"h12":return"12";case"h23":return"00";case"h24":return"24";default:throw new Error('Invalid hour cycle "'.concat(e,'"'))}return JS(e)?DM(n):n.toString()},vre=(n,e,t)=>{if(t.day===null)return null;const i=ox(t),s=new Intl.DateTimeFormat(n,{weekday:"long",month:"long",day:"numeric",timeZone:"UTC"}).format(i);return e?"Today, ".concat(s):s},yre=(n,e)=>{const t=ox(e);return new Intl.DateTimeFormat(n,{month:"long",year:"numeric",timeZone:"UTC"}).format(t)},wre=(n,e)=>_re(n,e,{day:"numeric"}).find(t=>t.type==="day").value,xre=(n,e)=>MM(n,e,{year:"numeric"}),ox=n=>{var e,t,i;const s=n.hour!==void 0&&n.minute!==void 0?" ".concat(n.hour,":").concat(n.minute):"";return new Date("".concat((e=n.month)!==null&&e!==void 0?e:1,"/").concat((t=n.day)!==null&&t!==void 0?t:1,"/").concat((i=n.year)!==null&&i!==void 0?i:2023).concat(s," GMT+0000"))},MM=(n,e,t)=>{const i=ox(e);return NM(n,OM(t)).format(i)},_re=(n,e,t)=>{const i=ox(e);return NM(n,t).formatToParts(i)},NM=(n,e)=>new Intl.DateTimeFormat(n,Object.assign(Object.assign({},e),{timeZone:"UTC"})),kre=n=>{if("RelativeTimeFormat"in Intl){const e=new Intl.RelativeTimeFormat(n,{numeric:"auto"}).format(0,"day");return e.charAt(0).toUpperCase()+e.slice(1)}else return"Today"},nA=n=>{const e=n.getTimezoneOffset();return n.setMinutes(n.getMinutes()-e),n},Ere=nA(new Date("2022T01:00")),Tre=nA(new Date("2022T13:00")),QP=(n,e)=>{const t=e==="am"?Ere:Tre,i=new Intl.DateTimeFormat(n,{hour:"numeric",timeZone:"UTC"}).formatToParts(t).find(s=>s.type==="dayPeriod");return i?i.value:mre(e)},Cre=n=>Array.isArray(n)?n.join(","):n,Sre=()=>nA(new Date).toISOString(),Are=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],Ire=[0,1,2,3,4,5,6,7,8,9,10,11],Pre=[0,1,2,3,4,5,6,7,8,9,10,11],Rre=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],$re=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0],Lre=(n,e,t=0)=>{const i=e==="ios"?"short":"narrow",s=new Intl.DateTimeFormat(n,{weekday:i}),r=new Date("11/01/2020"),o=[];for(let a=t;a<t+7;a++){const l=new Date(r);l.setDate(l.getDate()+a),o.push(s.format(l))}return o},Ore=(n,e,t)=>{const i=Ll(n,e),s=new Date("".concat(n,"/1/").concat(e)).getDay(),r=s>=t?s-(t+1):6-(t-s);let o=[];for(let a=1;a<=i;a++)o.push({day:a,dayOfWeek:(r+a)%7});for(let a=0;a<=r;a++)o=[{day:null,dayOfWeek:null},...o];return o},Dre=n=>{switch(n){case"h11":return Ire;case"h12":return Pre;case"h23":return Rre;case"h24":return $re;default:throw new Error('Invalid hour cycle "'.concat(n,'"'))}},Mre=(n,e,t="h12",i,s,r,o)=>{const a=ZS(n,t),l=JS(a);let c=Dre(a),d=Are,u=!0,h=!0;if(r&&(c=c.filter(f=>r.includes(f))),o&&(d=d.filter(f=>o.includes(f))),i)if(Ho(e,i)){if(i.hour!==void 0&&(c=c.filter(f=>{const m=e.ampm==="pm"?(f+12)%24:f;return(l?f:m)>=i.hour}),u=i.hour<13),i.minute!==void 0){let f=!1;i.hour!==void 0&&e.hour!==void 0&&e.hour>i.hour&&(f=!0),d=d.filter(m=>f?!0:m>=i.minute)}}else Ec(e,i)&&(c=[],d=[],u=h=!1);return s&&(Ho(e,s)?(s.hour!==void 0&&(c=c.filter(f=>{const m=e.ampm==="pm"?(f+12)%24:f;return(l?f:m)<=s.hour}),h=s.hour>=12),s.minute!==void 0&&e.hour===s.hour&&(d=d.filter(f=>f<=s.minute))):Th(e,s)&&(c=[],d=[],u=h=!1)),{hours:c,minutes:d,am:u,pm:h}},ZP=(n,e)=>{const t={month:n.month,year:n.year,day:n.day};if(e!==void 0&&(n.month!==e.month||n.year!==e.year)){const i={month:e.month,year:e.year,day:e.day};return Ec(i,t)?[i,t,mp(n)]:[Zg(n),t,i]}return[Zg(n),t,mp(n)]},Nre=(n,e,t,i,s,r={month:"long"})=>{const{year:o}=e,a=[];if(s!==void 0){let l=s;(i==null?void 0:i.month)!==void 0&&(l=l.filter(c=>c<=i.month)),(t==null?void 0:t.month)!==void 0&&(l=l.filter(c=>c>=t.month)),l.forEach(c=>{const d=new Date("".concat(c,"/1/").concat(o," GMT+0000")),u=new Intl.DateTimeFormat(n,Object.assign(Object.assign({},r),{timeZone:"UTC"})).format(d);a.push({text:u,value:c})})}else{const l=i&&i.year===o?i.month:12,c=t&&t.year===o?t.month:1;for(let d=c;d<=l;d++){const u=new Date("".concat(d,"/1/").concat(o," GMT+0000")),h=new Intl.DateTimeFormat(n,Object.assign(Object.assign({},r),{timeZone:"UTC"})).format(u);a.push({text:h,value:d})}}return a},FM=(n,e,t,i,s,r={day:"numeric"})=>{const{month:o,year:a}=e,l=[],c=Ll(o,a),d=(i==null?void 0:i.day)!==null&&(i==null?void 0:i.day)!==void 0&&i.year===a&&i.month===o?i.day:c,u=(t==null?void 0:t.day)!==null&&(t==null?void 0:t.day)!==void 0&&t.year===a&&t.month===o?t.day:1;if(s!==void 0){let h=s;h=h.filter(f=>f>=u&&f<=d),h.forEach(f=>{const m=new Date("".concat(o,"/").concat(f,"/").concat(a," GMT+0000")),g=new Intl.DateTimeFormat(n,Object.assign(Object.assign({},r),{timeZone:"UTC"})).format(m);l.push({text:g,value:f})})}else for(let h=u;h<=d;h++){const f=new Date("".concat(o,"/").concat(h,"/").concat(a," GMT+0000")),m=new Intl.DateTimeFormat(n,Object.assign(Object.assign({},r),{timeZone:"UTC"})).format(f);l.push({text:m,value:h})}return l},Fre=(n,e,t,i,s)=>{var r,o;let a=[];if(s!==void 0)a=s,(i==null?void 0:i.year)!==void 0&&(a=a.filter(l=>l<=i.year)),(t==null?void 0:t.year)!==void 0&&(a=a.filter(l=>l>=t.year));else{const{year:l}=e,c=(r=i==null?void 0:i.year)!==null&&r!==void 0?r:l,d=(o=t==null?void 0:t.year)!==null&&o!==void 0?o:l-100;for(let u=d;u<=c;u++)a.push(u)}return a.map(l=>({text:xre(n,{year:l,month:e.month,day:e.day}),value:l}))},BM=(n,e)=>n.month===e.month&&n.year===e.year?[n]:[n,...BM(mp(n),e)],Bre=(n,e,t,i,s,r)=>{let o=[],a=[],l=BM(t,i);return r&&(l=l.filter(({month:c})=>r.includes(c))),l.forEach(c=>{const d={month:c.month,day:null,year:c.year},u=FM(n,d,t,i,s,{month:"short",day:"numeric",weekday:"short"}),h=[],f=[];u.forEach(m=>{const g=Ho(Object.assign(Object.assign({},d),{day:m.value}),e);f.push({text:g?kre(n):m.text,value:"".concat(d.year,"-").concat(d.month,"-").concat(m.value)}),h.push({month:d.month,year:d.year,day:m.value})}),a=[...a,...h],o=[...o,...f]}),{parts:a,items:o}},Vre=(n,e,t,i,s,r,o)=>{const a=ZS(n,t),l=JS(a),{hours:c,minutes:d,am:u,pm:h}=Mre(n,e,a,i,s,r,o),f=c.map(b=>({text:bre(b,a),value:ure(b,l,e.ampm)})),m=d.map(b=>({text:DM(b),value:b})),g=[];return u&&!l&&g.push({text:QP(n,"am"),value:"am"}),h&&!l&&g.push({text:QP(n,"pm"),value:"pm"}),{minutesData:m,hoursData:f,dayPeriodData:g}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ure=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{top:0;height:83px}:host .picker-before{inset-inline-start:0}:host .picker-after{top:116px;height:84px}:host .picker-after{inset-inline-start:0}:host .picker-highlight{border-radius:var(--highlight-border-radius, 8px);left:0;right:0;top:50%;bottom:0;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;-webkit-transform:translateY(-50%);transform:translateY(-50%);background:var(--highlight-background);z-index:-1}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column:first-of-type){text-align:start}:host ::slotted(ion-picker-column:last-of-type){text-align:end}:host ::slotted(ion-picker-column:only-child){text-align:center}:host .picker-before{background:-webkit-gradient(linear, left top, left bottom, color-stop(20%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1)), to(rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0.8)));background:linear-gradient(to bottom, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 20%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0.8) 100%)}:host .picker-after{background:-webkit-gradient(linear, left bottom, left top, color-stop(20%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1)), to(rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0.8)));background:linear-gradient(to top, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 20%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0.8) 100%)}:host .picker-highlight{background:var(--highlight-background, var(--ion-color-step-150, var(--ion-background-color-step-150, #eeeeef)))}",zre=Ure,Hre=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{top:0;height:83px}:host .picker-before{inset-inline-start:0}:host .picker-after{top:116px;height:84px}:host .picker-after{inset-inline-start:0}:host .picker-highlight{border-radius:var(--highlight-border-radius, 8px);left:0;right:0;top:50%;bottom:0;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;-webkit-transform:translateY(-50%);transform:translateY(-50%);background:var(--highlight-background);z-index:-1}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column:first-of-type){text-align:start}:host ::slotted(ion-picker-column:last-of-type){text-align:end}:host ::slotted(ion-picker-column:only-child){text-align:center}:host .picker-before{background:-webkit-gradient(linear, left top, left bottom, color-stop(20%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1)), color-stop(90%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0)));background:linear-gradient(to bottom, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 20%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0) 90%)}:host .picker-after{background:-webkit-gradient(linear, left bottom, left top, color-stop(30%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1)), color-stop(90%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0)));background:linear-gradient(to top, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 30%, rgba(var(--fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0) 90%)}",jre=Hre,Gre=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionInputModeChange=at(this,"ionInputModeChange",7),this.useInputMode=!1,this.isInHighlightBounds=e=>{const{highlightEl:t}=this;if(!t)return!1;const i=t.getBoundingClientRect(),s=e.clientX<i.left||e.clientX>i.right,r=e.clientY<i.top||e.clientY>i.bottom;return!(s||r)},this.onFocusOut=e=>{const{relatedTarget:t}=e;(!t||t.tagName!=="ION-PICKER-COLUMN"&&t!==this.inputEl)&&this.exitInputMode()},this.onFocusIn=e=>{const{target:t}=e;if(t.tagName==="ION-PICKER-COLUMN"&&!this.actionOnClick){const i=t;i.numericInput?this.enterInputMode(i,!1):this.exitInputMode()}},this.onClick=()=>{const{actionOnClick:e}=this;e&&(e(),this.actionOnClick=void 0)},this.onPointerDown=e=>{const{useInputMode:t,inputModeColumn:i,el:s}=this;if(this.isInHighlightBounds(e)){if(t)e.target.tagName==="ION-PICKER-COLUMN"?i&&i===e.target?this.actionOnClick=()=>{this.enterInputMode()}:this.actionOnClick=()=>{this.enterInputMode(e.target)}:this.actionOnClick=()=>{this.exitInputMode()};else{const o=s.querySelectorAll("ion-picker-column.picker-column-numeric-input").length===1?e.target:void 0;this.actionOnClick=()=>{this.enterInputMode(o)}}return}this.actionOnClick=()=>{this.exitInputMode()}},this.enterInputMode=(e,t=!0)=>{const{inputEl:i,el:s}=this;!i||!s.querySelector("ion-picker-column.picker-column-numeric-input")||(this.useInputMode=!0,this.inputModeColumn=e,t?(this.destroyKeypressListener&&(this.destroyKeypressListener(),this.destroyKeypressListener=void 0),i.focus()):(s.addEventListener("keypress",this.onKeyPress),this.destroyKeypressListener=()=>{s.removeEventListener("keypress",this.onKeyPress)}),this.emitInputModeChange())},this.onKeyPress=e=>{const{inputEl:t}=this;if(!t)return;const i=parseInt(e.key,10);Number.isNaN(i)||(t.value+=e.key,this.onInputChange())},this.selectSingleColumn=()=>{const{inputEl:e,inputModeColumn:t,singleColumnSearchTimeout:i}=this;if(!e||!t)return;const s=Array.from(t.querySelectorAll("ion-picker-column-option")).filter(o=>o.disabled!==!0);if(i&&clearTimeout(i),this.singleColumnSearchTimeout=setTimeout(()=>{e.value="",this.singleColumnSearchTimeout=void 0},1e3),e.value.length>=3){const o=e.value.length-2,a=e.value.substring(o);e.value=a,this.selectSingleColumn();return}const r=s.find(({textContent:o})=>o.replace(/^0+(?=[1-9])|0+(?=0$)/,"")===e.value);if(r){t.setValue(r.value);return}if(e.value.length===2){const o=e.value.substring(e.value.length-1);e.value=o,this.selectSingleColumn()}},this.searchColumn=(e,t,i="start")=>{const s=i==="start"?/^0+/:/0$/,r=Array.from(e.querySelectorAll("ion-picker-column-option")).find(o=>o.disabled!==!0&&o.textContent.replace(s,"")===t);r&&e.setValue(r.value)},this.selectMultiColumn=()=>{const{inputEl:e,el:t}=this;if(!e)return;const i=Array.from(t.querySelectorAll("ion-picker-column")).filter(l=>l.numericInput),s=i[0],r=i[1];let o=e.value,a;switch(o.length){case 1:this.searchColumn(s,o);break;case 2:const l=e.value.substring(0,1);o=l==="0"||l==="1"?e.value:l,this.searchColumn(s,o),o.length===1&&(a=e.value.substring(e.value.length-1),this.searchColumn(r,a,"end"));break;case 3:const c=e.value.substring(0,1);o=c==="0"||c==="1"?e.value.substring(0,2):c,this.searchColumn(s,o),a=o.length===1?e.value.substring(1):e.value.substring(2),this.searchColumn(r,a,"end");break;case 4:const d=e.value.substring(0,1);o=d==="0"||d==="1"?e.value.substring(0,2):d,this.searchColumn(s,o);const u=o.length===1?e.value.substring(1,e.value.length):e.value.substring(2,e.value.length);this.searchColumn(r,u,"end");break;default:const h=e.value.length-4,f=e.value.substring(h);e.value=f,this.selectMultiColumn();break}},this.onInputChange=()=>{const{useInputMode:e,inputEl:t,inputModeColumn:i}=this;!e||!t||(i?this.selectSingleColumn():this.selectMultiColumn())},this.emitInputModeChange=()=>{const{useInputMode:e,inputModeColumn:t}=this;this.ionInputModeChange.emit({useInputMode:e,inputModeColumn:t})}}preventTouchStartPropagation(e){e.stopPropagation()}componentWillLoad(){Mi(this.el).addEventListener("focusin",this.onFocusIn),Mi(this.el).addEventListener("focusout",this.onFocusOut)}async exitInputMode(){const{inputEl:e,useInputMode:t}=this;!t||!e||(this.useInputMode=!1,this.inputModeColumn=void 0,e.blur(),e.value="",this.destroyKeypressListener&&(this.destroyKeypressListener(),this.destroyKeypressListener=void 0),this.emitInputModeChange())}render(){return q(Yt,{key:"f92214a09dc85b65873676f40fde2b802960e704",onPointerDown:e=>this.onPointerDown(e),onClick:()=>this.onClick()},q("input",{key:"6da37f75aca4ea1c9cb3bc733ebda2116279f313","aria-hidden":"true",tabindex:-1,inputmode:"numeric",type:"number",onKeyDown:e=>{var t;e.key==="Enter"&&((t=this.inputEl)===null||t===void 0||t.blur())},ref:e=>this.inputEl=e,onInput:()=>this.onInputChange(),onBlur:()=>this.exitInputMode()}),q("div",{key:"298e99d83dd3f5bf2798150bab0bb4024af472fa",class:"picker-before"}),q("div",{key:"ea578f04eb562a4dc6d6cc92de133dcb9fb7f42a",class:"picker-after"}),q("div",{key:"84567824956dfe967992a629904836ba8b75b3ec",class:"picker-highlight",ref:e=>this.highlightEl=e}),q("slot",{key:"df81f8fb90e1f649b608328034528f5c31c70c3b"}))}get el(){return this}static get style(){return{ios:zre,md:jre}}},[33,"ion-picker",{exitInputMode:[64]},[[1,"touchstart","preventTouchStartPropagation"]]]);function Wre(){if(typeof customElements>"u")return;["ion-picker"].forEach(e=>{switch(e){case"ion-picker":customElements.get(e)||customElements.define(e,Gre);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xi=typeof window<"u"?window:void 0,Kr=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ay=()=>{if(xi!==void 0)return xi.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Iy;(function(n){n.Heavy="HEAVY",n.Medium="MEDIUM",n.Light="LIGHT"})(Iy||(Iy={}));var JP;(function(n){n.Success="SUCCESS",n.Warning="WARNING",n.Error="ERROR"})(JP||(JP={}));const ob={getEngine(){const n=Ay();if(n!=null&&n.isPluginAvailable("Haptics"))return n.Plugins.Haptics},available(){if(!this.getEngine())return!1;const e=Ay();return(e==null?void 0:e.getPlatform())==="web"?typeof navigator<"u"&&navigator.vibrate!==void 0:!0},impact(n){const e=this.getEngine();e&&e.impact({style:n.style})},notification(n){const e=this.getEngine();e&&e.notification({type:n.type})},selection(){this.impact({style:Iy.Light})},selectionStart(){const n=this.getEngine();n&&n.selectionStart()},selectionChanged(){const n=this.getEngine();n&&n.selectionChanged()},selectionEnd(){const n=this.getEngine();n&&n.selectionEnd()}},ax=()=>ob.available(),iA=()=>{ax()&&ob.selectionStart()},sA=()=>{ax()&&ob.selectionChanged()},rA=()=>{ax()&&ob.selectionEnd()},qre=n=>{ax()&&ob.impact(n)};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Kre=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;max-width:100%;height:200px;font-size:22px;text-align:center}.assistive-focusable{left:0;right:0;top:0;bottom:0;position:absolute;z-index:1;pointer-events:none}.assistive-focusable:focus{outline:none}.picker-opts{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0px;padding-bottom:0px;min-width:26px;max-height:200px;outline:none;text-align:inherit;-webkit-scroll-snap-type:y mandatory;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory;overflow-x:hidden;overflow-y:scroll;scrollbar-width:none}.picker-item-empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.picker-opts::-webkit-scrollbar{display:none}::slotted(ion-picker-column-option){display:block;scroll-snap-align:center}.picker-item-empty,:host(:not([disabled])) ::slotted(ion-picker-column-option.option-disabled){scroll-snap-align:none}::slotted([slot=prefix]),::slotted([slot=suffix]){max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}::slotted([slot=prefix]){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-ms-flex-pack:end;justify-content:end}::slotted([slot=suffix]){-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:0;-ms-flex-pack:start;justify-content:start}:host(.picker-column-disabled) .picker-opts{overflow-y:hidden}:host(.picker-column-disabled) ::slotted(ion-picker-column-option){cursor:default;opacity:0.4;pointer-events:none}@media (any-hover: hover){:host(:focus) .picker-opts{outline:none;background:rgba(var(--ion-color-base-rgb), 0.2)}}",Yre=Kre,Xre=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=at(this,"ionChange",7),this.isScrolling=!1,this.isColumnVisible=!1,this.canExitInputMode=!0,this.updateValueTextOnScroll=!1,this.centerPickerItemInView=(e,t=!0,i=!0)=>{const{isColumnVisible:s,scrollEl:r}=this;if(s&&r){const o=e.offsetTop-3*e.clientHeight+e.clientHeight/2;r.scrollTop!==o&&(this.canExitInputMode=i,this.updateValueTextOnScroll=!1,r.scroll({top:o,left:0,behavior:t?"smooth":void 0}))}},this.setPickerItemActiveState=(e,t)=>{t?e.classList.add(U2):e.classList.remove(U2)},this.inputModeChange=e=>{if(!this.numericInput)return;const{useInputMode:t,inputModeColumn:i}=e.detail,s=i===void 0||i===this.el;if(!t||!s){this.setInputModeActive(!1);return}this.setInputModeActive(!0)},this.setInputModeActive=e=>{if(this.isScrolling){this.scrollEndCallback=()=>{this.isActive=e};return}this.isActive=e},this.initializeScrollListener=()=>{const e=mi("ios"),{el:t,scrollEl:i}=this;let s,r=this.activeItem;const o=()=>{Qn(()=>{var a;if(!i)return;s&&(clearTimeout(s),s=void 0),this.isScrolling||(e&&iA(),this.isScrolling=!0);const l=i.getBoundingClientRect(),c=l.x+l.width/2,d=l.y+l.height/2,u=t.getRootNode(),f=u instanceof ShadowRoot?u:Kr;if(f===void 0)return;const g=f.elementsFromPoint(c,d).find(b=>b.tagName==="ION-PICKER-COLUMN-OPTION");r!==void 0&&this.setPickerItemActiveState(r,!1),!(g===void 0||g.disabled)&&(g!==r&&(e&&sA(),this.canExitInputMode&&this.exitInputMode()),r=g,this.setPickerItemActiveState(g,!0),this.updateValueTextOnScroll&&((a=this.assistiveFocusable)===null||a===void 0||a.setAttribute("aria-valuetext",this.getOptionValueText(g))),s=setTimeout(()=>{this.isScrolling=!1,this.updateValueTextOnScroll=!0,e&&rA();const{scrollEndCallback:b}=this;b&&(b(),this.scrollEndCallback=void 0),this.canExitInputMode=!0,this.setValue(g.value)},250))})};Qn(()=>{i&&(i.addEventListener("scroll",o),this.destroyScrollListener=()=>{i.removeEventListener("scroll",o)})})},this.exitInputMode=()=>{const{parentEl:e}=this;e!=null&&(e.exitInputMode(),this.el.classList.remove("picker-column-active"))},this.findNextOption=(e=1)=>{const{activeItem:t}=this;if(!t)return null;let i=t,s=t.nextElementSibling;for(;s!=null;){if(e>0&&e--,s.tagName==="ION-PICKER-COLUMN-OPTION"&&!s.disabled&&e===0)return s;i=s,s=s.nextElementSibling}return i},this.findPreviousOption=(e=1)=>{const{activeItem:t}=this;if(!t)return null;let i=t,s=t.previousElementSibling;for(;s!=null;){if(e>0&&e--,s.tagName==="ION-PICKER-COLUMN-OPTION"&&!s.disabled&&e===0)return s;i=s,s=s.previousElementSibling}return i},this.onKeyDown=e=>{const t=mi("mobile");let i=null;switch(e.key){case"ArrowDown":i=t?this.findPreviousOption():this.findNextOption();break;case"ArrowUp":i=t?this.findNextOption():this.findPreviousOption();break;case"PageUp":i=t?this.findNextOption(5):this.findPreviousOption(5);break;case"PageDown":i=t?this.findPreviousOption(5):this.findNextOption(5);break;case"Home":i=this.el.querySelector("ion-picker-column-option:first-of-type");break;case"End":i=this.el.querySelector("ion-picker-column-option:last-of-type");break}i!==null&&(this.setValue(i.value),e.preventDefault())},this.getOptionValueText=e=>{var t;return e?(t=e.getAttribute("aria-label"))!==null&&t!==void 0?t:e.innerText:""},this.renderAssistiveFocusable=()=>{const{activeItem:e}=this,t=this.getOptionValueText(e);return q("div",{ref:i=>this.assistiveFocusable=i,class:"assistive-focusable",role:"slider",tabindex:this.disabled?void 0:0,"aria-label":this.ariaLabel,"aria-valuemin":0,"aria-valuemax":0,"aria-valuenow":0,"aria-valuetext":t,"aria-orientation":"vertical",onKeyDown:i=>this.onKeyDown(i)})},this.ariaLabel=null,this.isActive=!1,this.disabled=!1,this.value=void 0,this.color="primary",this.numericInput=!1}ariaLabelChanged(e){this.ariaLabel=e}valueChange(){this.isColumnVisible&&this.scrollActiveItemIntoView(!0)}componentWillLoad(){const e=this.parentEl=this.el.closest("ion-picker"),t=i=>{if(i[i.length-1].isIntersecting){const{activeItem:r,el:o}=this;this.isColumnVisible=!0;const a=Mi(o).querySelector(".".concat(U2));a&&this.setPickerItemActiveState(a,!1),this.scrollActiveItemIntoView(),r&&this.setPickerItemActiveState(r,!0),this.initializeScrollListener()}else this.isColumnVisible=!1,this.destroyScrollListener&&(this.destroyScrollListener(),this.destroyScrollListener=void 0)};new IntersectionObserver(t,{threshold:.001,root:this.parentEl}).observe(this.el),e!==null&&e.addEventListener("ionInputModeChange",i=>this.inputModeChange(i))}componentDidRender(){const{el:e,activeItem:t,isColumnVisible:i,value:s}=this;if(i&&!t){const r=e.querySelector("ion-picker-column-option");r!==null&&r.value!==s&&this.setValue(r.value)}}async scrollActiveItemIntoView(e=!1){const t=this.activeItem;t&&this.centerPickerItemInView(t,e,!1)}async setValue(e){this.disabled===!0||this.value===e||(this.value=e,this.ionChange.emit({value:e}))}async setFocus(){this.assistiveFocusable&&this.assistiveFocusable.focus()}connectedCallback(){var e;this.ariaLabel=(e=this.el.getAttribute("aria-label"))!==null&&e!==void 0?e:"Select a value"}get activeItem(){const{value:e}=this;return Array.from(this.el.querySelectorAll("ion-picker-column-option")).find(i=>!this.disabled&&i.disabled?!1:i.value===e)}render(){const{color:e,disabled:t,isActive:i,numericInput:s}=this,r=Tt(this);return q(Yt,{key:"a221dc10f1eb7c41637a16d2c7167c16939822fd",class:ds(e,{[r]:!0,"picker-column-active":i,"picker-column-numeric-input":s,"picker-column-disabled":t})},this.renderAssistiveFocusable(),q("slot",{key:"81b0656f606856f3dc0a657bf167d81a5011405e",name:"prefix"}),q("div",{key:"71b9de67c04150255dd66592601c9d926db0c31c","aria-hidden":"true",class:"picker-opts",ref:o=>{this.scrollEl=o},tabIndex:-1},q("div",{key:"ebdc2f08c83db0cf17b4be29f28fcb00f529601e",class:"picker-item-empty","aria-hidden":"true"}," "),q("div",{key:"04ab56fcb8e6a7d6af00204c4560feb99ff34a56",class:"picker-item-empty","aria-hidden":"true"}," "),q("div",{key:"6cf8f538903faf0fe1e4130f3eaf7b4e2e17cb52",class:"picker-item-empty","aria-hidden":"true"}," "),q("slot",{key:"1cc392307b70c576be5b81b5226ceba735957f0f"}),q("div",{key:"23e3f28e2a99b9aa8b7c8f68ad9583e3ca63e9e2",class:"picker-item-empty","aria-hidden":"true"}," "),q("div",{key:"8a0563f09780c3116af0caebe4f40587ec1f041f",class:"picker-item-empty","aria-hidden":"true"}," "),q("div",{key:"13207e248fc0009f37e0c90a3ee2bac2f130b856",class:"picker-item-empty","aria-hidden":"true"}," ")),q("slot",{key:"55ecf2ab5f214f936c2468cbdb7952daf89416b8",name:"suffix"}))}get el(){return this}static get watchers(){return{"aria-label":["ariaLabelChanged"],value:["valueChange"]}}static get style(){return Yre}},[1,"ion-picker-column",{disabled:[4],value:[1032],color:[513],numericInput:[4,"numeric-input"],ariaLabel:[32],isActive:[32],scrollActiveItemIntoView:[64],setValue:[64],setFocus:[64]},void 0,{"aria-label":["ariaLabelChanged"],value:["valueChange"]}]),U2="option-active";function Qre(){if(typeof customElements>"u")return;["ion-picker-column"].forEach(e=>{switch(e){case"ion-picker-column":customElements.get(e)||customElements.define(e,Xre);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Zre="button{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;overflow:hidden}:host(.option-disabled){opacity:0.4}:host(.option-disabled) button{cursor:default}",Jre=Zre,eoe="button{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;overflow:hidden}:host(.option-disabled){opacity:0.4}:host(.option-disabled) button{cursor:default}:host(.option-active){color:var(--ion-color-base)}",toe=eoe,noe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.pickerColumn=null,this.ariaLabel=null,this.disabled=!1,this.value=void 0,this.color="primary"}onAriaLabelChange(e){this.ariaLabel=e}componentWillLoad(){const e=Fc(this.el,["aria-label"]);this.ariaLabel=e["aria-label"]||null}connectedCallback(){this.pickerColumn=this.el.closest("ion-picker-column")}disconnectedCallback(){this.pickerColumn=null}componentDidLoad(){const{pickerColumn:e}=this;e!==null&&e.scrollActiveItemIntoView()}onClick(){const{pickerColumn:e}=this;e!==null&&e.setValue(this.value)}render(){const{color:e,disabled:t,ariaLabel:i}=this,s=Tt(this);return q(Yt,{key:"c743c6ef44bb9f765cc15b3b5d2864de6520203a",class:ds(e,{[s]:!0,"option-disabled":t})},q("button",{key:"4c3d9eb245c52b2c007f727e145cfb55759bd7a9",tabindex:"-1","aria-label":i,disabled:t,onClick:()=>this.onClick()},q("slot",{key:"4c907d2187cbe9d5941e27f2b12578e2b7271461"})))}get el(){return this}static get watchers(){return{"aria-label":["onAriaLabelChange"]}}static get style(){return{ios:Jre,md:toe}}},[33,"ion-picker-column-option",{disabled:[4],value:[8],color:[513],ariaLabel:[32]},void 0,{"aria-label":["onAriaLabelChange"]}]);function ioe(){if(typeof customElements>"u")return;["ion-picker-column-option"].forEach(e=>{switch(e){case"ion-picker-column-option":customElements.get(e)||customElements.define(e,noe);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gp=()=>Zt.get("experimentalCloseWatcher",!1)&&xi!==void 0&&"CloseWatcher"in xi,soe=()=>{document.addEventListener("backbutton",()=>{})},roe=()=>{const n=document;let e=!1;const t=()=>{if(e)return;let i=0,s=[];const r=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(l,c){s.push({priority:l,handler:c,id:i++})}}});n.dispatchEvent(r);const o=async l=>{try{if(l!=null&&l.handler){const c=l.handler(a);c!=null&&await c}}catch(c){console.error(c)}},a=()=>{if(s.length>0){let l={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};s.forEach(c=>{c.priority>=l.priority&&(l=c)}),e=!0,s=s.filter(c=>c.id!==l.id),o(l).then(()=>e=!1)}};a()};if(gp()){let i;const s=()=>{i==null||i.destroy(),i=new xi.CloseWatcher,i.onclose=()=>{t(),s()}};s()}else n.addEventListener("backbutton",t)},VM=100,UM=99,ooe=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:UM,OVERLAY_BACK_BUTTON_PRIORITY:VM,blockHardwareBackButton:soe,shouldUseCloseWatcher:gp,startHardwareBackButton:roe},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ab=async(n,e,t,i,s,r)=>{var o;if(n)return n.attachViewToDom(e,t,s,i);if(!r&&typeof t!="string"&&!(t instanceof HTMLElement))throw new Error("framework delegate is missing");const a=typeof t=="string"?(o=e.ownerDocument)===null||o===void 0?void 0:o.createElement(t):t;return i&&i.forEach(l=>a.classList.add(l)),s&&Object.assign(a,s),e.appendChild(a),await new Promise(l=>Ra(a,l)),a},oA=(n,e)=>{if(e){if(n){const t=e.parentElement;return n.removeViewFromDom(t,e)}e.remove()}return Promise.resolve()},aA=()=>{let n,e;return{attachViewToDom:async(s,r,o={},a=[])=>{var l,c;n=s;let d;if(r){const h=typeof r=="string"?(l=n.ownerDocument)===null||l===void 0?void 0:l.createElement(r):r;a.forEach(f=>h.classList.add(f)),Object.assign(h,o),n.appendChild(h),d=h,await new Promise(f=>Ra(h,f))}else if(n.children.length>0&&(n.tagName==="ION-MODAL"||n.tagName==="ION-POPOVER")&&!(d=n.children[0]).classList.contains("ion-delegate-host")){const f=(c=n.ownerDocument)===null||c===void 0?void 0:c.createElement("div");f.classList.add("ion-delegate-host"),a.forEach(m=>f.classList.add(m)),f.append(...n.children),n.appendChild(f),d=f}const u=document.querySelector("ion-app")||document.body;return e=document.createComment("ionic teleport"),n.parentNode.insertBefore(e,n),u.appendChild(n),d!=null?d:n},removeViewFromDom:()=>(n&&e&&(e.parentNode.insertBefore(n,e),e.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class aoe{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new loe(this,this.newID(),e.name,(t=e.priority)!==null&&t!==void 0?t:0,!!e.disableScroll)}createBlocker(e={}){return new coe(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,i){return this.canStart(e)?(this.requestedStart.set(t,i),!0):(this.requestedStart.delete(t),!1)}capture(e,t,i){if(!this.start(e,t,i))return!1;const s=this.requestedStart;let r=-1e4;if(s.forEach(o=>{r=Math.max(r,o)}),r===i){this.capturedId=t,s.clear();const o=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(o),!0}return s.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let i=this.disabledGestures.get(e);i===void 0&&(i=new Set,this.disabledGestures.set(e,i)),i.add(t)}enableGesture(e,t){const i=this.disabledGestures.get(e);i!==void 0&&i.delete(t)}disableScroll(e){this.disabledScroll.add(e),this.disabledScroll.size===1&&document.body.classList.add(Py)}enableScroll(e){this.disabledScroll.delete(e),this.disabledScroll.size===0&&document.body.classList.remove(Py)}canStart(e){return!(this.capturedId!==void 0||this.isDisabled(e))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}}class loe{constructor(e,t,i,s,r){this.id=t,this.name=i,this.disableScroll=r,this.priority=s*1e6+t,this.ctrl=e}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class coe{constructor(e,t,i,s){this.id=t,this.disable=i,this.disableScroll=s,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Py="backdrop-no-scroll",lA=new aoe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lb='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-checkbox:not([tabindex^="-"]):not([hidden]):not([disabled]), ion-radio:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Ry=(n,e)=>{const t=n.querySelector(lb);zM(t,e!=null?e:n)},sT=(n,e)=>{const t=Array.from(n.querySelectorAll(lb)),i=t.length>0?t[t.length-1]:null;zM(i,e!=null?e:n)},zM=(n,e)=>{let t=n;const i=n==null?void 0:n.shadowRoot;if(i&&(t=i.querySelector(lb)||n),t){const s=t.closest("ion-radio-group");s?s.setFocus():mM(t)}else e.focus()};let rT=0,doe=0;const $y=new WeakMap,cb=n=>({create(e){return goe(n,e)},dismiss(e,t,i){return woe(document,e,t,n,i)},async getTop(){return bp(document,n)}}),uoe=cb("ion-alert"),hoe=cb("ion-action-sheet"),foe=cb("ion-modal"),poe=cb("ion-popover"),moe=cb("ion-toast"),Gp=n=>{typeof document<"u"&&yoe(document);const e=rT++;n.overlayIndex=e},Wp=n=>(n.hasAttribute("id")||(n.id="ion-overlay-".concat(++doe)),n.id),goe=(n,e)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(n).then(()=>{const t=document.createElement(n);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},e),{hasController:!0})),jM(document).appendChild(t),new Promise(i=>Ra(t,i))}):Promise.resolve(),boe=n=>n.classList.contains("overlay-hidden"),eR=(n,e)=>{let t=n;const i=n==null?void 0:n.shadowRoot;i&&(t=i.querySelector(lb)||n),t?mM(t):e.focus()},voe=(n,e)=>{const t=bp(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),i=n.target;if(!t||!i||t.classList.contains(Jg))return;const s=()=>{if(t===i)t.lastFocus=void 0;else if(i.tagName==="ION-TOAST")eR(t.lastFocus,t);else{const o=Mi(t);if(!o.contains(i))return;const a=o.querySelector(".ion-overlay-wrapper");if(!a)return;if(a.contains(i)||i===o.querySelector("ion-backdrop"))t.lastFocus=i;else{const l=t.lastFocus;Ry(a,t),l===e.activeElement&&sT(a,t),t.lastFocus=e.activeElement}}},r=()=>{if(t.contains(i))t.lastFocus=i;else if(i.tagName==="ION-TOAST")eR(t.lastFocus,t);else{const o=t.lastFocus;Ry(t),o===e.activeElement&&sT(t),t.lastFocus=e.activeElement}};t.shadowRoot?r():s()},yoe=n=>{rT===0&&(rT=1,n.addEventListener("focus",e=>{voe(e,n)},!0),n.addEventListener("ionBackButton",e=>{const t=bp(n);t!=null&&t.backdropDismiss&&e.detail.register(VM,()=>{t.dismiss(void 0,Sl)})}),gp()||n.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=bp(n);t!=null&&t.backdropDismiss&&t.dismiss(void 0,Sl)}}))},woe=(n,e,t,i,s)=>{const r=bp(n,i,s);return r?r.dismiss(e,t):Promise.reject("overlay does not exist")},xoe=(n,e)=>(e===void 0&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter(t=>t.overlayIndex>0)),lx=(n,e)=>xoe(n,e).filter(t=>!boe(t)),bp=(n,e,t)=>{const i=lx(n,e);return t===void 0?i[i.length-1]:i.find(s=>s.id===t)},HM=(n=!1)=>{const t=jM(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},qp=async(n,e,t,i,s)=>{var r,o;if(n.presented)return;n.el.tagName!=="ION-TOAST"&&HM(!0),document.body.classList.add(Py),Toe(n.el),qM(n.el),n.presented=!0,n.willPresent.emit(),(r=n.willPresentShorthand)===null||r===void 0||r.emit();const a=Tt(n),l=n.enterAnimation?n.enterAnimation:Zt.get(e,a==="ios"?t:i);await GM(n,l,n.el,s)&&(n.didPresent.emit(),(o=n.didPresentShorthand)===null||o===void 0||o.emit()),n.el.tagName!=="ION-TOAST"&&_oe(n.el),n.keyboardClose&&(document.activeElement===null||!n.el.contains(document.activeElement))&&n.el.focus(),n.el.removeAttribute("aria-hidden")},_oe=async n=>{let e=document.activeElement;if(!e)return;const t=e==null?void 0:e.shadowRoot;t&&(e=t.querySelector(lb)||e),await n.onDidDismiss(),(document.activeElement===null||document.activeElement===document.body)&&e.focus()},Kp=async(n,e,t,i,s,r,o)=>{var a,l;if(!n.presented)return!1;const c=Kr!==void 0?lx(Kr).filter(u=>u.tagName!=="ION-TOAST"):[];c.length===1&&c[0].id===n.el.id&&(HM(!1),document.body.classList.remove(Py)),n.presented=!1;try{qM(n.el),n.el.style.setProperty("pointer-events","none"),n.willDismiss.emit({data:e,role:t}),(a=n.willDismissShorthand)===null||a===void 0||a.emit({data:e,role:t});const u=Tt(n),h=n.leaveAnimation?n.leaveAnimation:Zt.get(i,u==="ios"?s:r);t!==yc&&await GM(n,h,n.el,o),n.didDismiss.emit({data:e,role:t}),(l=n.didDismissShorthand)===null||l===void 0||l.emit({data:e,role:t}),($y.get(n)||[]).forEach(m=>m.destroy()),$y.delete(n),n.el.classList.add("overlay-hidden"),n.el.style.removeProperty("pointer-events"),n.el.lastFocus!==void 0&&(n.el.lastFocus=void 0)}catch(u){console.error(u)}return n.el.remove(),Coe(),!0},jM=n=>n.querySelector("ion-app")||n.body,GM=async(n,e,t,i)=>{t.classList.remove("overlay-hidden");const s=n.el,r=e(s,i);(!n.animated||!Zt.getBoolean("animated",!0))&&r.duration(0),n.keyboardClose&&r.beforeAddWrite(()=>{const a=t.ownerDocument.activeElement;a!=null&&a.matches("input,ion-input, ion-textarea")&&a.blur()});const o=$y.get(n)||[];return $y.set(n,[...o,r]),await r.play(),!0},Xo=(n,e)=>{let t;const i=new Promise(s=>t=s);return koe(n,e,s=>{t(s.detail)}),i},koe=(n,e,t)=>{const i=s=>{Xg(n,e,i),t(s)};pp(n,e,i)},uh=n=>n==="cancel"||n===Sl,Eoe=n=>n(),pg=(n,e)=>{if(typeof n=="function")return Zt.get("_zoneGate",Eoe)(()=>{try{return n(e)}catch(i){throw i}})},Sl="backdrop",yc="gesture",WM=39,cx=n=>{let e=!1,t;const i=aA(),s=(a=!1)=>{if(t&&!a)return{delegate:t,inline:e};const{el:l,hasController:c,delegate:d}=n;return e=l.parentNode!==null&&!c,t=e?d||i:d,{inline:e,delegate:t}};return{attachViewToDom:async a=>{const{delegate:l}=s(!0);if(l)return await l.attachViewToDom(n.el,a);const{hasController:c}=n;if(c&&a!==void 0)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:a}=s();a&&n.el!==void 0&&a.removeViewFromDom(n.el.parentElement,n.el)}}},db=()=>{let n;const e=()=>{n&&(n(),n=void 0)};return{addClickListener:(i,s)=>{e();const r=s!==void 0?document.getElementById(s):null;if(!r){pi('A trigger element with the ID "'.concat(s,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.'),i);return}n=((a,l)=>{const c=()=>{l.present()};return a.addEventListener("click",c),()=>{a.removeEventListener("click",c)}})(r,i)},removeClickListener:e}},qM=n=>{Kr!==void 0&&mi("android")&&n.setAttribute("aria-hidden","true")},Toe=n=>{var e;if(Kr===void 0)return;const t=lx(Kr);for(let i=t.length-1;i>=0;i--){const s=t[i],r=(e=t[i+1])!==null&&e!==void 0?e:n;(r.hasAttribute("aria-hidden")||r.tagName!=="ION-TOAST")&&s.setAttribute("aria-hidden","true")}},Coe=()=>{if(Kr===void 0)return;const n=lx(Kr);for(let e=n.length-1;e>=0;e--){const t=n[e];if(t.removeAttribute("aria-hidden"),t.tagName!=="ION-TOAST")break}},Jg="ion-disable-focus-trap";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ch=()=>{let n;return{lock:async()=>{const t=n;let i;return n=new Promise(s=>i=s),t!==void 0&&await t,i}}},cA="ionViewWillEnter",dA="ionViewDidEnter",dx="ionViewWillLeave",ux="ionViewDidLeave",z2="ionViewWillUnload",Dm=n=>{n.tabIndex=-1,n.focus()},D1=n=>n.offsetParent!==null,Soe=()=>({saveViewFocus:t=>{if(Zt.get("focusManagerPriority",!1)){const s=document.activeElement;s!==null&&(t!=null&&t.contains(s))&&s.setAttribute(tR,"true")}},setViewFocus:t=>{const i=Zt.get("focusManagerPriority",!1);if(Array.isArray(i)&&!t.contains(document.activeElement)){const s=t.querySelector("[".concat(tR,"]"));if(s&&D1(s)){Dm(s);return}for(const r of i)switch(r){case"content":const o=t.querySelector('main, [role="main"]');if(o&&D1(o)){Dm(o);return}break;case"heading":const a=t.querySelector('h1, [role="heading"][aria-level="1"]');if(a&&D1(a)){Dm(a);return}break;case"banner":const l=t.querySelector('header, [role="banner"]');if(l&&D1(l)){Dm(l);return}break;default:pi("Unrecognized focus manager priority value ".concat(r));break}Dm(t)}}}),tR="ion-last-focus",Aoe=()=>Kn(()=>import("./ios.transition-CBa3ZH6S.js"),[]),Ioe=()=>Kn(()=>import("./md.transition-Cgp-sYw4.js"),[]),KM=Soe(),YM=n=>new Promise((e,t)=>{fi(()=>{Poe(n),Roe(n).then(i=>{i.animation&&i.animation.destroy(),nR(n),e(i)},i=>{nR(n),t(i)})})}),Poe=n=>{const e=n.enteringEl,t=n.leavingEl;KM.saveViewFocus(t),Noe(e,t,n.direction),n.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),oT(e,!1),e.style.setProperty("pointer-events","none"),t&&(oT(t,!1),t.style.setProperty("pointer-events","none"))},Roe=async n=>{const e=await $oe(n);return e&&Ote.isBrowser?Loe(e,n):Ooe(n)},nR=n=>{const e=n.enteringEl,t=n.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),t!==void 0&&(t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events")),KM.setViewFocus(e)},$oe=async n=>!n.leavingEl||!n.animated||n.duration===0?void 0:n.animationBuilder?n.animationBuilder:n.mode==="ios"?(await Aoe()).iosTransitionAnimation:(await Ioe()).mdTransitionAnimation,Loe=async(n,e)=>{await XM(e,!0);const t=n(e.baseEl,e);QM(e.enteringEl,e.leavingEl);const i=await Moe(t,e);return e.progressCallback&&e.progressCallback(void 0),i&&ZM(e.enteringEl,e.leavingEl),{hasCompleted:i,animation:t}},Ooe=async n=>{const e=n.enteringEl,t=n.leavingEl,i=Zt.get("focusManagerPriority",!1);return await XM(n,i),QM(e,t),ZM(e,t),{hasCompleted:!0}},XM=async(n,e)=>{(n.deepWait!==void 0?n.deepWait:e)&&await Promise.all([e0(n.enteringEl),e0(n.leavingEl)]),await Doe(n.viewIsReady,n.enteringEl)},Doe=async(n,e)=>{n&&await n(e)},Moe=(n,e)=>{const t=e.progressCallback,i=new Promise(s=>{n.onFinish(r=>s(r===1))});return t?(n.progressStart(!0),t(n)):n.play(),i},QM=(n,e)=>{fc(e,dx),fc(n,cA)},ZM=(n,e)=>{fc(n,dA),fc(e,ux)},fc=(n,e)=>{if(n){const t=new CustomEvent(e,{bubbles:!1,cancelable:!1});n.dispatchEvent(t)}},JM=()=>new Promise(n=>Qn(()=>Qn(()=>n()))),e0=async n=>{const e=n;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(i=>Qn(i));return}await Promise.all(Array.from(e.children).map(e0))}},oT=(n,e)=>{e?(n.setAttribute("aria-hidden","true"),n.classList.add("ion-page-hidden")):(n.hidden=!1,n.removeAttribute("aria-hidden"),n.classList.remove("ion-page-hidden"))},Noe=(n,e,t)=>{n!==void 0&&(n.style.zIndex=t==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},ndt=n=>{if(n.classList.contains("ion-page"))return n;const e=n.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||n};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let H2;const Foe=n=>{if(H2===void 0){const e=n.style.animationName!==void 0,t=n.style.webkitAnimationName!==void 0;H2=!e&&t?"-webkit-":""}return H2},j2=(n,e,t)=>{const i=e.startsWith("animation")?Foe(n):"";n.style.setProperty(i+e,t)},M1=(n=[],e)=>{if(e!==void 0){const t=Array.isArray(e)?e:[e];return[...n,...t]}return n},bt=n=>{let e,t,i,s,r,o,a=[],l=[],c=[],d=!1,u,h={},f=[],m=[],g={},b=0,w=!1,x=!1,k,E,T,P=!0,C=!1,A=!0,R,M=!1;const N=n,U=[],G=[],B=[],te=[],X=[],ue=[],he=[],Ie=[],xe=[],Be=[],Pe=[],Ae=typeof AnimationEffect=="function"||xi!==void 0&&typeof xi.AnimationEffect=="function",de=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&Ae,we=()=>Pe,ze=ae=>(X.forEach(Ye=>{Ye.destroy(ae)}),le(ae),te.length=0,X.length=0,a.length=0,F(),d=!1,A=!0,R),le=ae=>{z(),ae&&se()},Se=()=>{w=!1,x=!1,A=!0,k=void 0,E=void 0,T=void 0,b=0,C=!1,P=!0,M=!1},ne=()=>b!==0&&!M,ie=(ae,Ye)=>{const vt=Ye.findIndex(Ft=>Ft.c===ae);vt>-1&&Ye.splice(vt,1)},me=(ae,Ye)=>(B.push({c:ae,o:Ye}),R),V=(ae,Ye)=>((Ye!=null&&Ye.oneTimeCallback?G:U).push({c:ae,o:Ye}),R),F=()=>(U.length=0,G.length=0,R),z=()=>{de&&(Pe.forEach(ae=>{ae.cancel()}),Pe.length=0)},se=()=>{ue.forEach(ae=>{ae!=null&&ae.parentNode&&ae.parentNode.removeChild(ae)}),ue.length=0},Te=ae=>(he.push(ae),R),ke=ae=>(Ie.push(ae),R),Ce=ae=>(xe.push(ae),R),ge=ae=>(Be.push(ae),R),He=ae=>(l=M1(l,ae),R),Ge=ae=>(c=M1(c,ae),R),mt=(ae={})=>(h=ae,R),ut=(ae=[])=>{for(const Ye of ae)h[Ye]="";return R},xt=ae=>(f=M1(f,ae),R),kt=ae=>(m=M1(m,ae),R),It=(ae={})=>(g=ae,R),Je=(ae=[])=>{for(const Ye of ae)g[Ye]="";return R},rt=()=>r!==void 0?r:u?u.getFill():"both",Ct=()=>k!==void 0?k:o!==void 0?o:u?u.getDirection():"normal",Pt=()=>w?"linear":i!==void 0?i:u?u.getEasing():"linear",Xt=()=>x?0:E!==void 0?E:t!==void 0?t:u?u.getDuration():0,mn=()=>s!==void 0?s:u?u.getIterations():1,In=()=>T!==void 0?T:e!==void 0?e:u?u.getDelay():0,ci=()=>a,ri=ae=>(o=ae,Jt(!0),R),wn=ae=>(r=ae,Jt(!0),R),Mn=ae=>(e=ae,Jt(!0),R),Oi=ae=>(i=ae,Jt(!0),R),$r=ae=>(!de&&ae===0&&(ae=1),t=ae,Jt(!0),R),us=ae=>(s=ae,Jt(!0),R),Lr=ae=>(u=ae,R),to=ae=>{if(ae!=null)if(ae.nodeType===1)te.push(ae);else if(ae.length>=0)for(let Ye=0;Ye<ae.length;Ye++)te.push(ae[Ye]);else console.error("Invalid addElement value");return R},no=ae=>{if(ae!=null)if(Array.isArray(ae))for(const Ye of ae)Ye.parent(R),X.push(Ye);else ae.parent(R),X.push(ae);return R},ja=ae=>{const Ye=a!==ae;return a=ae,Ye&&Ga(a),R},Ga=ae=>{de&&we().forEach(Ye=>{const vt=Ye.effect;if(vt.setKeyframes)vt.setKeyframes(ae);else{const Ft=new KeyframeEffect(vt.target,ae,vt.getTiming());Ye.effect=Ft}})},Wa=()=>{he.forEach(Ft=>Ft()),Ie.forEach(Ft=>Ft());const ae=l,Ye=c,vt=h;te.forEach(Ft=>{const En=Ft.classList;ae.forEach(hs=>En.add(hs)),Ye.forEach(hs=>En.remove(hs));for(const hs in vt)vt.hasOwnProperty(hs)&&j2(Ft,hs,vt[hs])})},sa=()=>{xe.forEach(En=>En()),Be.forEach(En=>En());const ae=P?1:0,Ye=f,vt=m,Ft=g;te.forEach(En=>{const hs=En.classList;Ye.forEach(Qi=>hs.add(Qi)),vt.forEach(Qi=>hs.remove(Qi));for(const Qi in Ft)Ft.hasOwnProperty(Qi)&&j2(En,Qi,Ft[Qi])}),E=void 0,k=void 0,T=void 0,U.forEach(En=>En.c(ae,R)),G.forEach(En=>En.c(ae,R)),G.length=0,A=!0,P&&(C=!0),P=!0},nr=()=>{b!==0&&(b--,b===0&&(sa(),u&&u.animationFinish()))},qa=()=>{te.forEach(ae=>{const Ye=ae.animate(a,{id:N,delay:In(),duration:Xt(),easing:Pt(),iterations:mn(),fill:rt(),direction:Ct()});Ye.pause(),Pe.push(Ye)}),Pe.length>0&&(Pe[0].onfinish=()=>{nr()})},To=()=>{Wa(),a.length>0&&de&&qa(),d=!0},Ts=ae=>{ae=Math.min(Math.max(ae,0),.9999),de&&Pe.forEach(Ye=>{Ye.currentTime=Ye.effect.getComputedTiming().delay+Xt()*ae,Ye.pause()})},Co=ae=>{Pe.forEach(Ye=>{Ye.effect.updateTiming({delay:In(),duration:Xt(),easing:Pt(),iterations:mn(),fill:rt(),direction:Ct()})}),ae!==void 0&&Ts(ae)},Jt=(ae=!1,Ye=!0,vt)=>(ae&&X.forEach(Ft=>{Ft.update(ae,Ye,vt)}),de&&Co(vt),R),ir=(ae=!1,Ye)=>(X.forEach(vt=>{vt.progressStart(ae,Ye)}),Nl(),w=ae,d||To(),Jt(!1,!0,Ye),R),Or=ae=>(X.forEach(Ye=>{Ye.progressStep(ae)}),Ts(ae),R),tu=(ae,Ye,vt)=>(w=!1,X.forEach(Ft=>{Ft.progressEnd(ae,Ye,vt)}),vt!==void 0&&(E=vt),C=!1,P=!0,ae===0?(k=Ct()==="reverse"?"normal":"reverse",k==="reverse"&&(P=!1),de?(Jt(),Ts(1-Ye)):(T=(1-Ye)*Xt()*-1,Jt(!1,!1))):ae===1&&(de?(Jt(),Ts(Ye)):(T=Ye*Xt()*-1,Jt(!1,!1))),ae!==void 0&&!u&&Ka(),R),Nl=()=>{d&&(de?Pe.forEach(ae=>{ae.pause()}):te.forEach(ae=>{j2(ae,"animation-play-state","paused")}),M=!0)},nu=()=>(X.forEach(ae=>{ae.pause()}),Nl(),R),iu=()=>{nr()},su=()=>{Pe.forEach(ae=>{ae.play()}),(a.length===0||te.length===0)&&nr()},ru=()=>{de&&(Ts(0),Co())},Ka=ae=>new Promise(Ye=>{ae!=null&&ae.sync&&(x=!0,V(()=>x=!1,{oneTimeCallback:!0})),d||To(),C&&(ru(),C=!1),A&&(b=X.length+1,A=!1);const vt=()=>{ie(Ft,G),Ye()},Ft=()=>{ie(vt,B),Ye()};V(Ft,{oneTimeCallback:!0}),me(vt,{oneTimeCallback:!0}),X.forEach(En=>{En.play()}),de?su():iu(),M=!1}),ou=()=>{X.forEach(ae=>{ae.stop()}),d&&(z(),d=!1),Se(),B.forEach(ae=>ae.c(0,R)),B.length=0},Fl=(ae,Ye)=>{const vt=a[0];return vt!==void 0&&(vt.offset===void 0||vt.offset===0)?vt[ae]=Ye:a=[{offset:0,[ae]:Ye},...a],R};return R={parentAnimation:u,elements:te,childAnimations:X,id:N,animationFinish:nr,from:Fl,to:(ae,Ye)=>{const vt=a[a.length-1];return vt!==void 0&&(vt.offset===void 0||vt.offset===1)?vt[ae]=Ye:a=[...a,{offset:1,[ae]:Ye}],R},fromTo:(ae,Ye,vt)=>Fl(ae,Ye).to(ae,vt),parent:Lr,play:Ka,pause:nu,stop:ou,destroy:ze,keyframes:ja,addAnimation:no,addElement:to,update:Jt,fill:wn,direction:ri,iterations:us,duration:$r,easing:Oi,delay:Mn,getWebAnimations:we,getKeyframes:ci,getFill:rt,getDirection:Ct,getDelay:In,getIterations:mn,getEasing:Pt,getDuration:Xt,afterAddRead:Ce,afterAddWrite:ge,afterClearStyles:Je,afterStyles:It,afterRemoveClass:kt,afterAddClass:xt,beforeAddRead:Te,beforeAddWrite:ke,beforeClearStyles:ut,beforeStyles:mt,beforeRemoveClass:Ge,beforeAddClass:He,onFinish:V,isRunning:ne,progressStart:ir,progressStep:Or,progressEnd:tu}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Boe=n=>{if(!n)return{arrowWidth:0,arrowHeight:0};const{width:e,height:t}=n.getBoundingClientRect();return{arrowWidth:e,arrowHeight:t}},eN=(n,e,t)=>{const i=e.getBoundingClientRect(),s=i.height;let r=i.width;return n==="cover"&&t&&(r=t.getBoundingClientRect().width),{contentWidth:r,contentHeight:s}},Voe=(n,e,t,i)=>{let s=[];const o=Mi(i).querySelector(".popover-content");switch(e){case"hover":s=[{eventName:"mouseenter",callback:a=>{document.elementFromPoint(a.clientX,a.clientY)!==n&&t.dismiss(void 0,void 0,!1)}}];break;case"context-menu":case"click":default:s=[{eventName:"click",callback:a=>{if(a.target.closest("[data-ion-popover-trigger]")===n){a.stopPropagation();return}t.dismiss(void 0,void 0,!1)}}];break}return s.forEach(({eventName:a,callback:l})=>o.addEventListener(a,l)),()=>{s.forEach(({eventName:a,callback:l})=>o.removeEventListener(a,l))}},Uoe=(n,e,t)=>{let i=[];switch(e){case"hover":let s;i=[{eventName:"mouseenter",callback:async r=>{r.stopPropagation(),s&&clearTimeout(s),s=setTimeout(()=>{Qn(()=>{t.presentFromTrigger(r),s=void 0})},100)}},{eventName:"mouseleave",callback:r=>{s&&clearTimeout(s);const o=r.relatedTarget;o&&o.closest("ion-popover")!==t&&t.dismiss(void 0,void 0,!1)}},{eventName:"click",callback:r=>r.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:r=>t.presentFromTrigger(r,!0)}];break;case"context-menu":i=[{eventName:"contextmenu",callback:r=>{r.preventDefault(),t.presentFromTrigger(r)}},{eventName:"click",callback:r=>r.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:r=>t.presentFromTrigger(r,!0)}];break;case"click":default:i=[{eventName:"click",callback:r=>t.presentFromTrigger(r)},{eventName:"ionPopoverActivateTrigger",callback:r=>t.presentFromTrigger(r,!0)}];break}return i.forEach(({eventName:s,callback:r})=>n.addEventListener(s,r)),n.setAttribute("data-ion-popover-trigger","true"),()=>{i.forEach(({eventName:s,callback:r})=>n.removeEventListener(s,r)),n.removeAttribute("data-ion-popover-trigger")}},tN=(n,e)=>!e||e.tagName!=="ION-ITEM"?-1:n.findIndex(t=>t===e),zoe=(n,e)=>{const t=tN(n,e);return n[t+1]},Hoe=(n,e)=>{const t=tN(n,e);return n[t-1]},N1=n=>{const t=Mi(n).querySelector("button");t&&Qn(()=>t.focus())},joe=n=>n.hasAttribute("data-ion-popover-trigger"),Goe=n=>{const e=async t=>{var i;const s=document.activeElement;let r=[];const o=(i=t.target)===null||i===void 0?void 0:i.tagName;if(!(o!=="ION-POPOVER"&&o!=="ION-ITEM")){try{r=Array.from(n.querySelectorAll("ion-item:not(ion-popover ion-popover *):not([disabled])"))}catch(a){}switch(t.key){case"ArrowLeft":await n.getParentPopover()&&n.dismiss(void 0,void 0,!1);break;case"ArrowDown":t.preventDefault();const l=zoe(r,s);l!==void 0&&N1(l);break;case"ArrowUp":t.preventDefault();const c=Hoe(r,s);c!==void 0&&N1(c);break;case"Home":t.preventDefault();const d=r[0];d!==void 0&&N1(d);break;case"End":t.preventDefault();const u=r[r.length-1];u!==void 0&&N1(u);break;case"ArrowRight":case" ":case"Enter":if(s&&joe(s)){const h=new CustomEvent("ionPopoverActivateTrigger");s.dispatchEvent(h)}break}}};return n.addEventListener("keydown",e),()=>n.removeEventListener("keydown",e)},nN=(n,e,t,i,s,r,o,a,l,c,d)=>{var u;let h={top:0,left:0,width:0,height:0};switch(r){case"event":if(!d)return l;const T=d;h={top:T.clientY,left:T.clientX,width:1,height:1};break;case"trigger":default:const P=d,C=c||((u=P==null?void 0:P.detail)===null||u===void 0?void 0:u.ionShadowTarget)||(P==null?void 0:P.target);if(!C)return l;const A=C.getBoundingClientRect();h={top:A.top,left:A.left,width:A.width,height:A.height};break}const f=Koe(o,h,e,t,i,s,n),m=Yoe(a,o,h,e,t),g=f.top+m.top,b=f.left+m.left,{arrowTop:w,arrowLeft:x}=qoe(o,i,s,g,b,e,t,n),{originX:k,originY:E}=Woe(o,a,n);return{top:g,left:b,referenceCoordinates:h,arrowTop:w,arrowLeft:x,originX:k,originY:E}},Woe=(n,e,t)=>{switch(n){case"top":return{originX:iR(e),originY:"bottom"};case"bottom":return{originX:iR(e),originY:"top"};case"left":return{originX:"right",originY:F1(e)};case"right":return{originX:"left",originY:F1(e)};case"start":return{originX:t?"left":"right",originY:F1(e)};case"end":return{originX:t?"right":"left",originY:F1(e)}}},iR=n=>{switch(n){case"start":return"left";case"center":return"center";case"end":return"right"}},F1=n=>{switch(n){case"start":return"top";case"center":return"center";case"end":return"bottom"}},qoe=(n,e,t,i,s,r,o,a)=>{const l={arrowTop:i+o/2-e/2,arrowLeft:s+r-e/2},c={arrowTop:i+o/2-e/2,arrowLeft:s-e*1.5};switch(n){case"top":return{arrowTop:i+o,arrowLeft:s+r/2-e/2};case"bottom":return{arrowTop:i-t,arrowLeft:s+r/2-e/2};case"left":return l;case"right":return c;case"start":return a?c:l;case"end":return a?l:c;default:return{arrowTop:0,arrowLeft:0}}},Koe=(n,e,t,i,s,r,o)=>{const a={top:e.top,left:e.left-t-s},l={top:e.top,left:e.left+e.width+s};switch(n){case"top":return{top:e.top-i-r,left:e.left};case"right":return l;case"bottom":return{top:e.top+e.height+r,left:e.left};case"left":return a;case"start":return o?l:a;case"end":return o?a:l}},Yoe=(n,e,t,i,s)=>{switch(n){case"center":return Qoe(e,t,i,s);case"end":return Xoe(e,t,i,s);case"start":default:return{top:0,left:0}}},Xoe=(n,e,t,i)=>{switch(n){case"start":case"end":case"left":case"right":return{top:-(i-e.height),left:0};case"top":case"bottom":default:return{top:0,left:-(t-e.width)}}},Qoe=(n,e,t,i)=>{switch(n){case"start":case"end":case"left":case"right":return{top:-(i/2-e.height/2),left:0};case"top":case"bottom":default:return{top:0,left:-(t/2-e.width/2)}}},iN=(n,e,t,i,s,r,o,a,l,c,d,u,h=0,f=0,m=0)=>{let g=h;const b=f;let w=t,x=e,k,E=c,T=d,P=!1,C=!1;const A=u?u.top+u.height:r/2-a/2,R=u?u.height:0;let M=!1;return w<i+l?(w=i,P=!0,E="left"):o+i+w+l>s&&(C=!0,w=s-o-i,E="right"),A+R+a>r&&(n==="top"||n==="bottom")&&(A-a>0?(x=Math.max(12,A-a-R-(m-1)),g=x+a,T="bottom",M=!0):k=i),{top:x,left:w,bottom:k,originX:E,originY:T,checkSafeAreaLeft:P,checkSafeAreaRight:C,arrowTop:g,arrowLeft:b,addPopoverBottomClass:M}},Zoe=(n,e=!1,t,i)=>!(!t&&!i||n!=="top"&&n!=="bottom"&&e),Joe=5,eae=(n,e)=>{var t;const{event:i,size:s,trigger:r,reference:o,side:a,align:l}=e,c=n.ownerDocument,d=c.dir==="rtl",u=c.defaultView.innerWidth,h=c.defaultView.innerHeight,f=Mi(n),m=f.querySelector(".popover-content"),g=f.querySelector(".popover-arrow"),b=r||((t=i==null?void 0:i.detail)===null||t===void 0?void 0:t.ionShadowTarget)||(i==null?void 0:i.target),{contentWidth:w,contentHeight:x}=eN(s,m,b),{arrowWidth:k,arrowHeight:E}=Boe(g),T={top:h/2-x/2,left:u/2-w/2,originX:d?"right":"left",originY:"top"},P=nN(d,w,x,k,E,o,a,l,T,r,i),C=s==="cover"?0:Joe,A=s==="cover"?0:25,{originX:R,originY:M,top:N,left:U,bottom:G,checkSafeAreaLeft:B,checkSafeAreaRight:te,arrowTop:X,arrowLeft:ue,addPopoverBottomClass:he}=iN(a,P.top,P.left,C,u,h,w,x,A,P.originX,P.originY,P.referenceCoordinates,P.arrowTop,P.arrowLeft,E),Ie=bt(),xe=bt(),Be=bt();return xe.addElement(f.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),Be.addElement(f.querySelector(".popover-arrow")).addElement(f.querySelector(".popover-content")).fromTo("opacity",.01,1),Ie.easing("ease").duration(100).beforeAddWrite(()=>{s==="cover"&&n.style.setProperty("--width","".concat(w,"px")),he&&n.classList.add("popover-bottom"),G!==void 0&&m.style.setProperty("bottom","".concat(G,"px"));const Pe=" + var(--ion-safe-area-left, 0)",Ae=" - var(--ion-safe-area-right, 0)";let de="".concat(U,"px");if(B&&(de="".concat(U,"px").concat(Pe)),te&&(de="".concat(U,"px").concat(Ae)),m.style.setProperty("top","calc(".concat(N,"px + var(--offset-y, 0))")),m.style.setProperty("left","calc(".concat(de," + var(--offset-x, 0))")),m.style.setProperty("transform-origin","".concat(M," ").concat(R)),g!==null){const we=P.top!==N||P.left!==U;Zoe(a,we,i,r)?(g.style.setProperty("top","calc(".concat(X,"px + var(--offset-y, 0))")),g.style.setProperty("left","calc(".concat(ue,"px + var(--offset-x, 0))"))):g.style.setProperty("display","none")}}).addAnimation([xe,Be])},tae=n=>{const e=Mi(n),t=e.querySelector(".popover-content"),i=e.querySelector(".popover-arrow"),s=bt(),r=bt(),o=bt();return r.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),o.addElement(e.querySelector(".popover-arrow")).addElement(e.querySelector(".popover-content")).fromTo("opacity",.99,0),s.easing("ease").afterAddWrite(()=>{n.style.removeProperty("--width"),n.classList.remove("popover-bottom"),t.style.removeProperty("top"),t.style.removeProperty("left"),t.style.removeProperty("bottom"),t.style.removeProperty("transform-origin"),i&&(i.style.removeProperty("top"),i.style.removeProperty("left"),i.style.removeProperty("display"))}).duration(300).addAnimation([r,o])},nae=12,iae=(n,e)=>{var t;const{event:i,size:s,trigger:r,reference:o,side:a,align:l}=e,c=n.ownerDocument,d=c.dir==="rtl",u=c.defaultView.innerWidth,h=c.defaultView.innerHeight,f=Mi(n),m=f.querySelector(".popover-content"),g=r||((t=i==null?void 0:i.detail)===null||t===void 0?void 0:t.ionShadowTarget)||(i==null?void 0:i.target),{contentWidth:b,contentHeight:w}=eN(s,m,g),x={top:h/2-w/2,left:u/2-b/2,originX:d?"right":"left",originY:"top"},k=nN(d,b,w,0,0,o,a,l,x,r,i),E=s==="cover"?0:nae,{originX:T,originY:P,top:C,left:A,bottom:R}=iN(a,k.top,k.left,E,u,h,b,w,0,k.originX,k.originY,k.referenceCoordinates),M=bt(),N=bt(),U=bt(),G=bt(),B=bt();return N.addElement(f.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),U.addElement(f.querySelector(".popover-wrapper")).duration(150).fromTo("opacity",.01,1),G.addElement(m).beforeStyles({top:"calc(".concat(C,"px + var(--offset-y, 0px))"),left:"calc(".concat(A,"px + var(--offset-x, 0px))"),"transform-origin":"".concat(P," ").concat(T)}).beforeAddWrite(()=>{R!==void 0&&m.style.setProperty("bottom","".concat(R,"px"))}).fromTo("transform","scale(0.8)","scale(1)"),B.addElement(f.querySelector(".popover-viewport")).fromTo("opacity",.01,1),M.easing("cubic-bezier(0.36,0.66,0.04,1)").duration(300).beforeAddWrite(()=>{s==="cover"&&n.style.setProperty("--width","".concat(b,"px")),P==="bottom"&&n.classList.add("popover-bottom")}).addAnimation([N,U,G,B])},sae=n=>{const e=Mi(n),t=e.querySelector(".popover-content"),i=bt(),s=bt(),r=bt();return s.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),i.easing("ease").afterAddWrite(()=>{n.style.removeProperty("--width"),n.classList.remove("popover-bottom"),t.style.removeProperty("top"),t.style.removeProperty("left"),t.style.removeProperty("bottom"),t.style.removeProperty("transform-origin")}).duration(150).addAnimation([s,r])},rae=':host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:200px;--max-height:90%;--box-shadow:none;--backdrop-opacity:var(--ion-backdrop-opacity, 0.08)}:host(.popover-desktop){--box-shadow:0px 4px 16px 0px rgba(0, 0, 0, 0.12)}.popover-content{border-radius:10px}:host(.popover-desktop) .popover-content{border:0.5px solid var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.popover-arrow{display:block;position:absolute;width:20px;height:10px;overflow:hidden;z-index:11}.popover-arrow::after{top:3px;border-radius:3px;position:absolute;width:14px;height:14px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background:var(--background);content:"";z-index:10}.popover-arrow::after{inset-inline-start:3px}:host(.popover-bottom) .popover-arrow{top:auto;bottom:-10px}:host(.popover-bottom) .popover-arrow::after{top:-6px}:host(.popover-side-left) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host(.popover-side-right) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host(.popover-side-top) .popover-arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.popover-side-start) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host-context([dir=rtl]):host(.popover-side-start) .popover-arrow,:host-context([dir=rtl]).popover-side-start .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}@supports selector(:dir(rtl)){:host(.popover-side-start:dir(rtl)) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}}:host(.popover-side-end) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host-context([dir=rtl]):host(.popover-side-end) .popover-arrow,:host-context([dir=rtl]).popover-side-end .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}@supports selector(:dir(rtl)){:host(.popover-side-end:dir(rtl)) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}.popover-arrow,.popover-content{opacity:0}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.popover-translucent) .popover-content,:host(.popover-translucent) .popover-arrow::after{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}',oae=rae,aae=":host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:250px;--max-height:90%;--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}.popover-content{border-radius:4px;-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]) .popover-content{-webkit-transform-origin:right top;transform-origin:right top}[dir=rtl] .popover-content{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.popover-content:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.popover-viewport{-webkit-transition-delay:100ms;transition-delay:100ms}.popover-wrapper{opacity:0}",lae=aae,cae=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=at(this,"ionPopoverDidPresent",7),this.willPresent=at(this,"ionPopoverWillPresent",7),this.willDismiss=at(this,"ionPopoverWillDismiss",7),this.didDismiss=at(this,"ionPopoverDidDismiss",7),this.didPresentShorthand=at(this,"didPresent",7),this.willPresentShorthand=at(this,"willPresent",7),this.willDismissShorthand=at(this,"willDismiss",7),this.didDismissShorthand=at(this,"didDismiss",7),this.ionMount=at(this,"ionMount",7),this.parentPopover=null,this.coreDelegate=aA(),this.lockController=Ch(),this.inline=!1,this.focusDescendantOnPresent=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Sl)},this.onLifecycle=e=>{const t=this.usersElement,i=dae[e.type];if(t&&i){const s=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:e.detail});t.dispatchEvent(s)}},this.configureTriggerInteraction=()=>{const{trigger:e,triggerAction:t,el:i,destroyTriggerInteraction:s}=this;if(s&&s(),e===void 0)return;const r=this.triggerEl=e!==void 0?document.getElementById(e):null;if(!r){pi('A trigger element with the ID "'.concat(e,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on ion-popover.'),this.el);return}this.destroyTriggerInteraction=Uoe(r,t,i)},this.configureKeyboardInteraction=()=>{const{destroyKeyboardInteraction:e,el:t}=this;e&&e(),this.destroyKeyboardInteraction=Goe(t)},this.configureDismissInteraction=()=>{const{destroyDismissInteraction:e,parentPopover:t,triggerAction:i,triggerEl:s,el:r}=this;!t||!s||(e&&e(),this.destroyDismissInteraction=Voe(s,i,r,t))},this.presented=!1,this.hasController=!1,this.delegate=void 0,this.overlayIndex=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.component=void 0,this.componentProps=void 0,this.keyboardClose=!0,this.cssClass=void 0,this.backdropDismiss=!0,this.event=void 0,this.showBackdrop=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.triggerAction="click",this.trigger=void 0,this.size="auto",this.dismissOnSelect=!1,this.reference="trigger",this.side="bottom",this.alignment=void 0,this.arrow=!0,this.isOpen=!1,this.keyboardEvents=!1,this.focusTrap=!0,this.keepContentsMounted=!1}onTriggerChange(){this.configureTriggerInteraction()}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}connectedCallback(){const{configureTriggerInteraction:e,el:t}=this;Gp(t),e()}disconnectedCallback(){const{destroyTriggerInteraction:e}=this;e&&e()}componentWillLoad(){var e,t;const{el:i}=this,s=(t=(e=this.htmlAttributes)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:Wp(i);this.parentPopover=i.closest("ion-popover:not(#".concat(s,")")),this.alignment===void 0&&(this.alignment=Tt(this)==="ios"?"center":"start")}componentDidLoad(){const{parentPopover:e,isOpen:t}=this;t===!0&&Qn(()=>this.present()),e&&pp(e,"ionPopoverWillDismiss",()=>{this.dismiss(void 0,void 0,!1)}),this.configureTriggerInteraction()}async presentFromTrigger(e,t=!1){this.focusDescendantOnPresent=t,await this.present(e),this.focusDescendantOnPresent=!1}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};const t=this.el.parentNode,i=this.inline=t!==null&&!this.hasController,s=this.workingDelegate=i?this.delegate||this.coreDelegate:this.delegate;return{inline:i,delegate:s}}async present(e){const t=await this.lockController.lock();if(this.presented){t();return}const{el:i}=this,{inline:s,delegate:r}=this.getDelegate(!0);this.ionMount.emit(),this.usersElement=await ab(r,i,this.component,["popover-viewport"],this.componentProps,s),this.keyboardEvents||this.configureKeyboardInteraction(),this.configureDismissInteraction(),Yg(i)?await e0(this.usersElement):this.keepContentsMounted||await JM(),await qp(this,"popoverEnter",eae,iae,{event:e||this.event,size:this.size,trigger:this.triggerEl,reference:this.reference,side:this.side,align:this.alignment}),this.focusDescendantOnPresent&&Ry(i),t()}async dismiss(e,t,i=!0){const s=await this.lockController.lock(),{destroyKeyboardInteraction:r,destroyDismissInteraction:o}=this;i&&this.parentPopover&&this.parentPopover.dismiss(e,t,i);const a=await Kp(this,e,t,"popoverLeave",tae,sae,this.event);if(a){r&&(r(),this.destroyKeyboardInteraction=void 0),o&&(o(),this.destroyDismissInteraction=void 0);const{delegate:l}=this.getDelegate();await oA(l,this.usersElement)}return s(),a}async getParentPopover(){return this.parentPopover}onDidDismiss(){return Xo(this.el,"ionPopoverDidDismiss")}onWillDismiss(){return Xo(this.el,"ionPopoverWillDismiss")}render(){const e=Tt(this),{onLifecycle:t,parentPopover:i,dismissOnSelect:s,side:r,arrow:o,htmlAttributes:a,focusTrap:l}=this,c=mi("desktop"),d=o&&!i;return q(Yt,Object.assign({key:"ffe8b37c9ffb5cac210a7307e6cdfcf78712905b","aria-modal":"true","no-router":!0,tabindex:"-1"},a,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign(Object.assign({},Ko(this.cssClass)),{[e]:!0,"popover-translucent":this.translucent,"overlay-hidden":!0,"popover-desktop":c,["popover-side-".concat(r)]:!0,[Jg]:l===!1,"popover-nested":!!i}),onIonPopoverDidPresent:t,onIonPopoverWillPresent:t,onIonPopoverWillDismiss:t,onIonPopoverDidDismiss:t,onIonBackdropTap:this.onBackdropTap}),!i&&q("ion-backdrop",{key:"12b3ffa3928b4d56a4f09c3d2f5d493d47b45255",tappable:this.backdropDismiss,visible:this.showBackdrop,part:"backdrop"}),q("div",{key:"2c2862d5c7e75b637973c712b4982bf4978c0cdf",class:"popover-wrapper ion-overlay-wrapper",onClick:s?()=>this.dismiss():void 0},d&&q("div",{key:"0cfacc52afaa7abc28c1b7742889d7a1c23a37ad",class:"popover-arrow",part:"arrow"}),q("div",{key:"3ef570c44d4fe7f063dd419008c92c8c40d3cd22",class:"popover-content",part:"content"},q("slot",{key:"6fc5dfdce20fee1642bc1f05d41b5bf7d1034457"}))))}get el(){return this}static get watchers(){return{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}}static get style(){return{ios:oae,md:lae}}},[33,"ion-popover",{hasController:[4,"has-controller"],delegate:[16],overlayIndex:[2,"overlay-index"],enterAnimation:[16],leaveAnimation:[16],component:[1],componentProps:[16],keyboardClose:[4,"keyboard-close"],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],event:[8],showBackdrop:[4,"show-backdrop"],translucent:[4],animated:[4],htmlAttributes:[16],triggerAction:[1,"trigger-action"],trigger:[1],size:[1],dismissOnSelect:[4,"dismiss-on-select"],reference:[1],side:[1],alignment:[1025],arrow:[4],isOpen:[4,"is-open"],keyboardEvents:[4,"keyboard-events"],focusTrap:[4,"focus-trap"],keepContentsMounted:[4,"keep-contents-mounted"],presented:[32],presentFromTrigger:[64],present:[64],dismiss:[64],getParentPopover:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}]),dae={ionPopoverDidPresent:"ionViewDidEnter",ionPopoverWillPresent:"ionViewWillEnter",ionPopoverWillDismiss:"ionViewWillLeave",ionPopoverDidDismiss:"ionViewDidLeave"};function sN(){if(typeof customElements>"u")return;["ion-popover","ion-backdrop"].forEach(e=>{switch(e){case"ion-popover":customElements.get(e)||customElements.define(e,cae);break;case"ion-backdrop":customElements.get(e)||Eh();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const uae=(n,e,t)=>!!(e&&e.year>n||t&&t.year<n),rN=(n,e,t,i)=>!!(n.day===null||i!==void 0&&!i.includes(n.day)||e&&Ec(n,e)||t&&Th(n,t)),hae=(n,e,t,i,s,r,o)=>{const l=(Array.isArray(t)?t:[t]).find(u=>Ho(e,u))!==void 0,c=Ho(e,i);return{disabled:rN(e,s,r,o),isActive:l,isToday:c,ariaSelected:l?"true":null,ariaLabel:vre(n,c,e),text:e.day!=null?wre(n,e):null}},Ly=(n,{minParts:e,maxParts:t})=>!!(uae(n.year,e,t)||e&&Ec(n,e)||t&&Th(n,t)),fae=(n,e,t)=>{const i=Object.assign(Object.assign({},Zg(n)),{day:null});return Ly(i,{minParts:e,maxParts:t})},pae=(n,e)=>{const t=Object.assign(Object.assign({},mp(n)),{day:null});return Ly(t,{maxParts:e})},mae=(n,e,t)=>{if(Array.isArray(n)){const i=e.split("T")[0],s=n.find(r=>r.date===i);if(s)return{textColor:s.textColor,backgroundColor:s.backgroundColor}}else try{return n(e)}catch(i){Pf("Exception thrown from provided `highlightedDates` callback. Please check your function and try again.",t,i)}},sR=(n,e)=>{var t,i,s,r;(!((t=e==null?void 0:e.date)===null||t===void 0)&&t.timeZone||!((i=e==null?void 0:e.date)===null||i===void 0)&&i.timeZoneName||!((s=e==null?void 0:e.time)===null||s===void 0)&&s.timeZone||!((r=e==null?void 0:e.time)===null||r===void 0)&&r.timeZoneName)&&pi('Datetime: "timeZone" and "timeZoneName" are not supported in "formatOptions".',n)},G2=(n,e,t)=>{if(t)switch(e){case"date":case"month-year":case"month":case"year":t.date===void 0&&pi("Datetime: The '".concat(e,"' presentation requires a date object in formatOptions."),n);break;case"time":t.time===void 0&&pi("Datetime: The 'time' presentation requires a time object in formatOptions.",n);break;case"date-time":case"time-date":t.date===void 0&&t.time===void 0&&pi("Datetime: The '".concat(e,"' presentation requires either a date or time object (or both) in formatOptions."),n);break}},gae=':host{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;background:var(--background);overflow:hidden}:host(.datetime-size-fixed){width:auto;height:auto}:host(.datetime-size-fixed:not(.datetime-prefer-wheel)){max-width:350px}:host(.datetime-size-fixed.datetime-prefer-wheel){min-width:350px;max-width:-webkit-max-content;max-width:-moz-max-content;max-width:max-content}:host(.datetime-size-cover){width:100%}:host .calendar-body,:host .datetime-year{opacity:0}:host(:not(.datetime-ready)) .datetime-year{position:absolute;pointer-events:none}:host(.datetime-ready) .calendar-body{opacity:1}:host(.datetime-ready) .datetime-year{display:none;opacity:1}:host .wheel-order-year-first .day-column{-ms-flex-order:3;order:3;text-align:end}:host .wheel-order-year-first .month-column{-ms-flex-order:2;order:2;text-align:end}:host .wheel-order-year-first .year-column{-ms-flex-order:1;order:1;text-align:start}:host .datetime-calendar,:host .datetime-year{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-flow:column;flex-flow:column}:host(.show-month-and-year) .datetime-year{display:-ms-flexbox;display:flex}:host(.show-month-and-year) .calendar-next-prev,:host(.show-month-and-year) .calendar-days-of-week,:host(.show-month-and-year) .calendar-body,:host(.show-month-and-year) .datetime-time{display:none}:host(.month-year-picker-open) .datetime-footer{display:none}:host(.datetime-disabled){pointer-events:none}:host(.datetime-disabled) .calendar-days-of-week,:host(.datetime-disabled) .datetime-time{opacity:0.4}:host(.datetime-readonly){pointer-events:none;}:host(.datetime-readonly) .calendar-action-buttons,:host(.datetime-readonly) .calendar-body,:host(.datetime-readonly) .datetime-year{pointer-events:initial}:host(.datetime-readonly) .calendar-day[disabled]:not(.calendar-day-constrained),:host(.datetime-readonly) .datetime-action-buttons ion-button[disabled]{opacity:1}:host .datetime-header .datetime-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host .datetime-action-buttons.has-clear-button{width:100%}:host .datetime-action-buttons ion-buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.datetime-action-buttons .datetime-action-buttons-container{display:-ms-flexbox;display:flex}:host .calendar-action-buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host .calendar-action-buttons ion-button{--background:transparent}:host .calendar-days-of-week{display:grid;grid-template-columns:repeat(7, 1fr);text-align:center}.calendar-days-of-week .day-of-week{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0}:host .calendar-body{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;overflow-x:scroll;overflow-y:hidden;scrollbar-width:none;outline:none}:host .calendar-body .calendar-month{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;scroll-snap-align:start;scroll-snap-stop:always;-ms-flex-negative:0;flex-shrink:0;width:100%}:host .calendar-body .calendar-month-disabled{scroll-snap-align:none}:host .calendar-body::-webkit-scrollbar{display:none}:host .calendar-body .calendar-month-grid{display:grid;grid-template-columns:repeat(7, 1fr)}:host .calendar-day-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;min-width:0;min-height:0;overflow:visible}.calendar-day{border-radius:50%;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:0px;margin-bottom:0px;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border:none;outline:none;background:none;color:currentColor;font-family:var(--ion-font-family, inherit);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:0}:host .calendar-day[disabled]{pointer-events:none;opacity:0.4}.calendar-day:focus{background:rgba(var(--ion-color-base-rgb), 0.2);-webkit-box-shadow:0px 0px 0px 4px rgba(var(--ion-color-base-rgb), 0.2);box-shadow:0px 0px 0px 4px rgba(var(--ion-color-base-rgb), 0.2)}:host .datetime-time{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host(.datetime-presentation-time) .datetime-time{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host ion-popover{--height:200px}:host .time-header{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host .time-body{border-radius:8px;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:6px;padding-bottom:6px;display:-ms-flexbox;display:flex;border:none;background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0));color:var(--ion-text-color, #000);font-family:inherit;font-size:inherit;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}:host .time-body-active{color:var(--ion-color-base)}:host(.in-item){position:static}:host(.show-month-and-year) .calendar-action-buttons .calendar-month-year-toggle{color:var(--ion-color-base)}.calendar-month-year{min-width:0}.calendar-month-year-toggle{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;position:relative;border:0;outline:none;background:transparent;cursor:pointer;z-index:1}.calendar-month-year-toggle::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:opacity 15ms linear, background-color 15ms linear;transition:opacity 15ms linear, background-color 15ms linear;z-index:-1}.calendar-month-year-toggle.ion-focused::after{background:currentColor}.calendar-month-year-toggle:disabled{opacity:0.3;pointer-events:none}.calendar-month-year-toggle ion-icon{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:0;padding-inline-end:0;padding-top:0;padding-bottom:0;-ms-flex-negative:0;flex-shrink:0}.calendar-month-year-toggle #toggle-wrapper{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center}ion-picker{--highlight-background:var(--wheel-highlight-background);--highlight-border-radius:var(--wheel-highlight-border-radius);--fade-background-rgb:var(--wheel-fade-background-rgb)}:host{--background:var(--ion-color-light, #f4f5f8);--background-rgb:var(--ion-color-light-rgb, 244, 245, 248);--title-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}:host(.datetime-presentation-date-time:not(.datetime-prefer-wheel)),:host(.datetime-presentation-time-date:not(.datetime-prefer-wheel)),:host(.datetime-presentation-date:not(.datetime-prefer-wheel)){min-height:350px}:host .datetime-header{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:16px;padding-bottom:16px;border-bottom:0.55px solid var(--ion-color-step-200, var(--ion-background-color-step-200, #cccccc));font-size:min(0.875rem, 22.4px)}:host .datetime-header .datetime-title{color:var(--title-color)}:host .datetime-header .datetime-selected-date{margin-top:10px}.calendar-month-year-toggle{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0px;padding-bottom:0px;min-height:44px;font-size:min(1rem, 25.6px);font-weight:600}.calendar-month-year-toggle.ion-focused::after{opacity:0.15}.calendar-month-year-toggle #toggle-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host .calendar-action-buttons .calendar-month-year-toggle ion-icon,:host .calendar-action-buttons ion-buttons ion-button{color:var(--ion-color-base)}:host .calendar-action-buttons ion-buttons{padding-left:0;padding-right:0;padding-top:8px;padding-bottom:0}:host .calendar-action-buttons ion-buttons ion-button{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host .calendar-days-of-week{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:0;padding-bottom:0;color:var(--ion-color-step-300, var(--ion-text-color-step-700, #b3b3b3));font-size:min(0.75rem, 19.2px);font-weight:600;line-height:24px;text-transform:uppercase}@supports (border-radius: mod(1px, 1px)){.calendar-days-of-week .day-of-week{width:clamp(20px, calc(mod(min(1rem, 24px), 24px) * 10), 100%);height:24px;overflow:hidden}.calendar-day{border-radius:max(8px, mod(min(1rem, 24px), 24px) * 10)}}@supports ((border-radius: mod(1px, 1px)) and (background: -webkit-named-image(apple-pay-logo-black)) and (not (contain-intrinsic-size: none))) or (not (border-radius: mod(1px, 1px))){.calendar-days-of-week .day-of-week{width:auto;height:auto;overflow:initial}.calendar-day{border-radius:32px}}:host .calendar-body .calendar-month .calendar-month-grid{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-ms-flex-align:center;align-items:center;height:calc(100% - 16px)}:host .calendar-day-wrapper{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;height:0;min-height:1rem}:host .calendar-day{width:40px;min-width:40px;height:40px;font-size:min(1.25rem, 32px)}.calendar-day.calendar-day-active{background:rgba(var(--ion-color-base-rgb), 0.2);font-size:min(1.375rem, 35.2px)}:host .calendar-day.calendar-day-today{color:var(--ion-color-base)}:host .calendar-day.calendar-day-active{color:var(--ion-color-base);font-weight:600}:host .calendar-day.calendar-day-today.calendar-day-active{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host .datetime-time{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:8px;padding-bottom:16px;font-size:min(1rem, 25.6px)}:host .datetime-time .time-header{font-weight:600}:host .datetime-buttons{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;border-top:0.55px solid var(--ion-color-step-200, var(--ion-background-color-step-200, #cccccc))}:host .datetime-buttons ::slotted(ion-buttons),:host .datetime-buttons ion-buttons{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}:host .datetime-action-buttons{width:100%}',bae=gae,vae=':host{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;background:var(--background);overflow:hidden}:host(.datetime-size-fixed){width:auto;height:auto}:host(.datetime-size-fixed:not(.datetime-prefer-wheel)){max-width:350px}:host(.datetime-size-fixed.datetime-prefer-wheel){min-width:350px;max-width:-webkit-max-content;max-width:-moz-max-content;max-width:max-content}:host(.datetime-size-cover){width:100%}:host .calendar-body,:host .datetime-year{opacity:0}:host(:not(.datetime-ready)) .datetime-year{position:absolute;pointer-events:none}:host(.datetime-ready) .calendar-body{opacity:1}:host(.datetime-ready) .datetime-year{display:none;opacity:1}:host .wheel-order-year-first .day-column{-ms-flex-order:3;order:3;text-align:end}:host .wheel-order-year-first .month-column{-ms-flex-order:2;order:2;text-align:end}:host .wheel-order-year-first .year-column{-ms-flex-order:1;order:1;text-align:start}:host .datetime-calendar,:host .datetime-year{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-flow:column;flex-flow:column}:host(.show-month-and-year) .datetime-year{display:-ms-flexbox;display:flex}:host(.show-month-and-year) .calendar-next-prev,:host(.show-month-and-year) .calendar-days-of-week,:host(.show-month-and-year) .calendar-body,:host(.show-month-and-year) .datetime-time{display:none}:host(.month-year-picker-open) .datetime-footer{display:none}:host(.datetime-disabled){pointer-events:none}:host(.datetime-disabled) .calendar-days-of-week,:host(.datetime-disabled) .datetime-time{opacity:0.4}:host(.datetime-readonly){pointer-events:none;}:host(.datetime-readonly) .calendar-action-buttons,:host(.datetime-readonly) .calendar-body,:host(.datetime-readonly) .datetime-year{pointer-events:initial}:host(.datetime-readonly) .calendar-day[disabled]:not(.calendar-day-constrained),:host(.datetime-readonly) .datetime-action-buttons ion-button[disabled]{opacity:1}:host .datetime-header .datetime-title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host .datetime-action-buttons.has-clear-button{width:100%}:host .datetime-action-buttons ion-buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.datetime-action-buttons .datetime-action-buttons-container{display:-ms-flexbox;display:flex}:host .calendar-action-buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host .calendar-action-buttons ion-button{--background:transparent}:host .calendar-days-of-week{display:grid;grid-template-columns:repeat(7, 1fr);text-align:center}.calendar-days-of-week .day-of-week{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0}:host .calendar-body{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;overflow-x:scroll;overflow-y:hidden;scrollbar-width:none;outline:none}:host .calendar-body .calendar-month{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;scroll-snap-align:start;scroll-snap-stop:always;-ms-flex-negative:0;flex-shrink:0;width:100%}:host .calendar-body .calendar-month-disabled{scroll-snap-align:none}:host .calendar-body::-webkit-scrollbar{display:none}:host .calendar-body .calendar-month-grid{display:grid;grid-template-columns:repeat(7, 1fr)}:host .calendar-day-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;min-width:0;min-height:0;overflow:visible}.calendar-day{border-radius:50%;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:0px;margin-bottom:0px;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border:none;outline:none;background:none;color:currentColor;font-family:var(--ion-font-family, inherit);cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:0}:host .calendar-day[disabled]{pointer-events:none;opacity:0.4}.calendar-day:focus{background:rgba(var(--ion-color-base-rgb), 0.2);-webkit-box-shadow:0px 0px 0px 4px rgba(var(--ion-color-base-rgb), 0.2);box-shadow:0px 0px 0px 4px rgba(var(--ion-color-base-rgb), 0.2)}:host .datetime-time{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}:host(.datetime-presentation-time) .datetime-time{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host ion-popover{--height:200px}:host .time-header{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host .time-body{border-radius:8px;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:6px;padding-bottom:6px;display:-ms-flexbox;display:flex;border:none;background:var(--ion-color-step-300, var(--ion-background-color-step-300, #edeef0));color:var(--ion-text-color, #000);font-family:inherit;font-size:inherit;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}:host .time-body-active{color:var(--ion-color-base)}:host(.in-item){position:static}:host(.show-month-and-year) .calendar-action-buttons .calendar-month-year-toggle{color:var(--ion-color-base)}.calendar-month-year{min-width:0}.calendar-month-year-toggle{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;position:relative;border:0;outline:none;background:transparent;cursor:pointer;z-index:1}.calendar-month-year-toggle::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:opacity 15ms linear, background-color 15ms linear;transition:opacity 15ms linear, background-color 15ms linear;z-index:-1}.calendar-month-year-toggle.ion-focused::after{background:currentColor}.calendar-month-year-toggle:disabled{opacity:0.3;pointer-events:none}.calendar-month-year-toggle ion-icon{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:0;padding-inline-end:0;padding-top:0;padding-bottom:0;-ms-flex-negative:0;flex-shrink:0}.calendar-month-year-toggle #toggle-wrapper{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center}ion-picker{--highlight-background:var(--wheel-highlight-background);--highlight-border-radius:var(--wheel-highlight-border-radius);--fade-background-rgb:var(--wheel-fade-background-rgb)}:host{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #ffffff));--title-color:var(--ion-color-contrast)}:host .datetime-header{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;background:var(--ion-color-base);color:var(--title-color)}:host .datetime-header .datetime-title{font-size:0.75rem;text-transform:uppercase}:host .datetime-header .datetime-selected-date{margin-top:30px;font-size:2.125rem}:host .calendar-action-buttons ion-button{--color:var(--ion-color-step-650, var(--ion-text-color-step-350, #595959))}.calendar-month-year-toggle{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:12px;min-height:48px;background:transparent;color:var(--ion-color-step-650, var(--ion-text-color-step-350, #595959));z-index:1}.calendar-month-year-toggle.ion-focused::after{opacity:0.04}.calendar-month-year-toggle ion-ripple-effect{color:currentColor}@media (any-hover: hover){.calendar-month-year-toggle.ion-activatable:not(.ion-focused):hover::after{background:currentColor;opacity:0.04}}:host .calendar-days-of-week{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:0px;padding-bottom:0px;color:var(--ion-color-step-500, var(--ion-text-color-step-500, gray));font-size:0.875rem;line-height:36px}:host .calendar-body .calendar-month .calendar-month-grid{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:4px;padding-bottom:4px;grid-template-rows:repeat(6, 1fr)}:host .calendar-day{width:42px;min-width:42px;height:42px;font-size:0.875rem}:host .calendar-day.calendar-day-today{border:1px solid var(--ion-color-base);color:var(--ion-color-base)}:host .calendar-day.calendar-day-active{color:var(--ion-color-contrast)}.calendar-day.calendar-day-active{border:1px solid var(--ion-color-base);background:var(--ion-color-base)}:host .datetime-time{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:8px;padding-bottom:8px}:host .time-header{color:var(--ion-color-step-650, var(--ion-text-color-step-350, #595959))}:host(.datetime-presentation-month) .datetime-year,:host(.datetime-presentation-year) .datetime-year,:host(.datetime-presentation-month-year) .datetime-year{margin-top:20px;margin-bottom:20px}:host .datetime-buttons{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end}',yae=vae,wae=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionCancel=at(this,"ionCancel",7),this.ionChange=at(this,"ionChange",7),this.ionValueChange=at(this,"ionValueChange",7),this.ionFocus=at(this,"ionFocus",7),this.ionBlur=at(this,"ionBlur",7),this.ionStyle=at(this,"ionStyle",7),this.ionRender=at(this,"ionRender",7),this.inputId="ion-dt-".concat(xae++),this.prevPresentation=null,this.warnIfIncorrectValueUsage=()=>{const{multiple:e,value:t}=this;!e&&Array.isArray(t)&&pi('ion-datetime was passed an array of values, but multiple="false". This is incorrect usage and may result in unexpected behaviors. To dismiss this warning, pass a string to the "value" property when multiple="false".\n\n  Value Passed: ['.concat(t.map(i=>"'".concat(i,"'")).join(", "),"]\n"),this.el)},this.setValue=e=>{this.value=e,this.ionChange.emit({value:e})},this.getActivePartsWithFallback=()=>{var e;const{defaultParts:t}=this;return(e=this.getActivePart())!==null&&e!==void 0?e:t},this.getActivePart=()=>{const{activeParts:e}=this;return Array.isArray(e)?e[0]:e},this.closeParentOverlay=e=>{const t=this.el.closest("ion-modal, ion-popover");t&&t.dismiss(void 0,e)},this.setWorkingParts=e=>{this.workingParts=Object.assign({},e)},this.setActiveParts=(e,t=!1)=>{if(this.readonly)return;const{multiple:i,minParts:s,maxParts:r,activeParts:o}=this,a=fre(e,s,r);if(this.setWorkingParts(a),i){const c=Array.isArray(o)?o:[o];t?this.activeParts=c.filter(d=>!Ho(d,a)):this.activeParts=[...c,a]}else this.activeParts=Object.assign({},a);this.el.querySelector('[slot="buttons"]')!==null||this.showDefaultButtons||this.confirm()},this.initializeKeyboardListeners=()=>{const e=this.calendarBodyRef;if(!e)return;const t=this.el.shadowRoot,i=e.querySelector(".calendar-month:nth-of-type(2)"),s=o=>{var a;!((a=o[0].oldValue)===null||a===void 0)&&a.includes("ion-focused")||!e.classList.contains("ion-focused")||this.focusWorkingDay(i)},r=new MutationObserver(s);r.observe(e,{attributeFilter:["class"],attributeOldValue:!0}),this.destroyKeyboardMO=()=>{r==null||r.disconnect()},e.addEventListener("keydown",o=>{const a=t.activeElement;if(!a||!a.classList.contains("calendar-day"))return;const l=Jse(a);let c;switch(o.key){case"ArrowDown":o.preventDefault(),c=lre(l);break;case"ArrowUp":o.preventDefault(),c=are(l);break;case"ArrowRight":o.preventDefault(),c=rre(l);break;case"ArrowLeft":o.preventDefault(),c=ore(l);break;case"Home":o.preventDefault(),c=ire(l);break;case"End":o.preventDefault(),c=sre(l);break;case"PageUp":o.preventDefault(),c=o.shiftKey?cre(l):Zg(l);break;case"PageDown":o.preventDefault(),c=o.shiftKey?dre(l):mp(l);break;default:return}rN(c,this.minParts,this.maxParts)||(this.setWorkingParts(Object.assign(Object.assign({},this.workingParts),c)),requestAnimationFrame(()=>this.focusWorkingDay(i)))})},this.focusWorkingDay=e=>{const t=e.querySelectorAll(".calendar-day-padding"),{day:i}=this.workingParts;if(i===null)return;const s=e.querySelector(".calendar-day-wrapper:nth-of-type(".concat(t.length+i,") .calendar-day"));s&&s.focus()},this.processMinParts=()=>{const{min:e,defaultParts:t}=this;if(e===void 0){this.minParts=void 0;return}this.minParts=tre(e,t)},this.processMaxParts=()=>{const{max:e,defaultParts:t}=this;if(e===void 0){this.maxParts=void 0;return}this.maxParts=ere(e,t)},this.initializeCalendarListener=()=>{const e=this.calendarBodyRef;if(!e)return;const t=e.querySelectorAll(".calendar-month"),i=t[0],s=t[1],r=t[2],a=Tt(this)==="ios"&&typeof navigator<"u"&&navigator.maxTouchPoints>1;fi(()=>{e.scrollLeft=i.clientWidth*(md(this.el)?-1:1);const l=f=>{const m=e.getBoundingClientRect(),b=(md(this.el)?e.scrollLeft>=-2:e.scrollLeft<=2)?i:r,w=b.getBoundingClientRect();if(Math.abs(w.x-m.x)>2)return;const{forceRenderDate:x}=this;return x!==void 0?{month:x.month,year:x.year,day:x.day}:b===i?Zg(f):b===r?mp(f):void 0},c=()=>{a&&(e.style.removeProperty("pointer-events"),u=!1);const f=l(this.workingParts);if(!f)return;const{month:m,day:g,year:b}=f;Ly({month:m,year:b,day:null},{minParts:Object.assign(Object.assign({},this.minParts),{day:null}),maxParts:Object.assign(Object.assign({},this.maxParts),{day:null})})||(e.style.setProperty("overflow","hidden"),fi(()=>{this.setWorkingParts(Object.assign(Object.assign({},this.workingParts),{month:m,day:g,year:b})),e.scrollLeft=s.clientWidth*(md(this.el)?-1:1),e.style.removeProperty("overflow"),this.resolveForceDateScrolling&&this.resolveForceDateScrolling()}))};let d,u=!1;const h=()=>{d&&clearTimeout(d),!u&&a&&(e.style.setProperty("pointer-events","none"),u=!0),d=setTimeout(c,50)};e.addEventListener("scroll",h),this.destroyCalendarListener=()=>{e.removeEventListener("scroll",h)}})},this.destroyInteractionListeners=()=>{const{destroyCalendarListener:e,destroyKeyboardMO:t}=this;e!==void 0&&e(),t!==void 0&&t()},this.processValue=e=>{const t=e!=null&&e!==""&&(!Array.isArray(e)||e.length>0),i=t?Qg(e):this.defaultParts,{minParts:s,maxParts:r,workingParts:o,el:a}=this;if(this.warnIfIncorrectValueUsage(),!i)return;t&&Kse(i,s,r);const l=Array.isArray(i)?i[0]:i,c=PM(l,s,r),{month:d,day:u,year:h,hour:f,minute:m}=c,g=RM(f);t?Array.isArray(i)?this.activeParts=[...i]:this.activeParts={month:d,day:u,year:h,hour:f,minute:m,ampm:g}:this.activeParts=[];const b=d!==void 0&&d!==o.month||h!==void 0&&h!==o.year,w=a.classList.contains("datetime-ready"),{isGridStyle:x,showMonthAndYear:k}=this;let E=!0;if(Array.isArray(i)){const T=i[0].month;for(const P of i)if(P.month!==T){E=!1;break}}E&&(x&&b&&w&&!k?this.animateToDate(c):this.setWorkingParts({month:d,day:u,year:h,hour:f,minute:m,ampm:g}))},this.animateToDate=async e=>{const{workingParts:t}=this;this.forceRenderDate=e;const i=new Promise(r=>{this.resolveForceDateScrolling=r});Ec(e,t)?this.prevMonth():this.nextMonth(),await i,this.resolveForceDateScrolling=void 0,this.forceRenderDate=void 0},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.hasValue=()=>this.value!=null,this.nextMonth=()=>{const e=this.calendarBodyRef;if(!e)return;const t=e.querySelector(".calendar-month:last-of-type");if(!t)return;const i=t.offsetWidth*2;e.scrollTo({top:0,left:i*(md(this.el)?-1:1),behavior:"smooth"})},this.prevMonth=()=>{const e=this.calendarBodyRef;!e||!e.querySelector(".calendar-month:first-of-type")||e.scrollTo({top:0,left:0,behavior:"smooth"})},this.toggleMonthAndYearView=()=>{this.showMonthAndYear=!this.showMonthAndYear},this.showMonthAndYear=!1,this.activeParts=[],this.workingParts={month:5,day:28,year:2021,hour:13,minute:52,ampm:"pm"},this.isTimePopoverOpen=!1,this.forceRenderDate=void 0,this.color="primary",this.name=this.inputId,this.disabled=!1,this.formatOptions=void 0,this.readonly=!1,this.isDateEnabled=void 0,this.min=void 0,this.max=void 0,this.presentation="date-time",this.cancelText="Cancel",this.doneText="Done",this.clearText="Clear",this.yearValues=void 0,this.monthValues=void 0,this.dayValues=void 0,this.hourValues=void 0,this.minuteValues=void 0,this.locale="default",this.firstDayOfWeek=0,this.titleSelectedDatesFormatter=void 0,this.multiple=!1,this.highlightedDates=void 0,this.value=void 0,this.showDefaultTitle=!1,this.showDefaultButtons=!1,this.showClearButton=!1,this.showDefaultTimeLabel=!0,this.hourCycle=void 0,this.size="fixed",this.preferWheel=!1}formatOptionsChanged(){const{el:e,formatOptions:t,presentation:i}=this;G2(e,i,t),sR(e,t)}disabledChanged(){this.emitStyle()}minChanged(){this.processMinParts()}maxChanged(){this.processMaxParts()}presentationChanged(){const{el:e,formatOptions:t,presentation:i}=this;G2(e,i,t)}get isGridStyle(){const{presentation:e,preferWheel:t}=this;return(e==="date"||e==="date-time"||e==="time-date")&&!t}yearValuesChanged(){this.parsedYearValues=Ja(this.yearValues)}monthValuesChanged(){this.parsedMonthValues=Ja(this.monthValues)}dayValuesChanged(){this.parsedDayValues=Ja(this.dayValues)}hourValuesChanged(){this.parsedHourValues=Ja(this.hourValues)}minuteValuesChanged(){this.parsedMinuteValues=Ja(this.minuteValues)}async valueChanged(){const{value:e}=this;this.hasValue()&&this.processValue(e),this.emitStyle(),this.ionValueChange.emit({value:e})}async confirm(e=!1){const{isCalendarPicker:t,activeParts:i,preferWheel:s,workingParts:r}=this;(i!==void 0||!t)&&(Array.isArray(i)&&i.length===0?s?this.setValue(ud(r)):this.setValue(void 0):this.setValue(ud(i))),e&&this.closeParentOverlay(kae)}async reset(e){this.processValue(e)}async cancel(e=!1){this.ionCancel.emit(),e&&this.closeParentOverlay(_ae)}get isCalendarPicker(){const{presentation:e}=this;return e==="date"||e==="date-time"||e==="time-date"}connectedCallback(){this.clearFocusVisible=IM(this.el).destroy}disconnectedCallback(){this.clearFocusVisible&&(this.clearFocusVisible(),this.clearFocusVisible=void 0)}initializeListeners(){this.initializeCalendarListener(),this.initializeKeyboardListeners()}componentDidLoad(){const{el:e,intersectionTrackerRef:t}=this,i=l=>{l[0].isIntersecting&&(this.initializeListeners(),fi(()=>{this.el.classList.add("datetime-ready")}))},s=new IntersectionObserver(i,{threshold:.01,root:e});Qn(()=>s==null?void 0:s.observe(t));const r=l=>{l[0].isIntersecting||(this.destroyInteractionListeners(),this.showMonthAndYear=!1,fi(()=>{this.el.classList.remove("datetime-ready")}))},o=new IntersectionObserver(r,{threshold:0,root:e});Qn(()=>o==null?void 0:o.observe(t));const a=Mi(this.el);a.addEventListener("ionFocus",l=>l.stopPropagation()),a.addEventListener("ionBlur",l=>l.stopPropagation())}componentDidRender(){const{presentation:e,prevPresentation:t,calendarBodyRef:i,minParts:s,preferWheel:r,forceRenderDate:o}=this,a=!r&&["date-time","time-date","date"].includes(e);if(s!==void 0&&a&&i){const l=i.querySelector(".calendar-month:nth-of-type(1)");l&&o===void 0&&(i.scrollLeft=l.clientWidth*(md(this.el)?-1:1))}if(t===null){this.prevPresentation=e;return}e!==t&&(this.prevPresentation=e,this.destroyInteractionListeners(),this.initializeListeners(),this.showMonthAndYear=!1,Qn(()=>{this.ionRender.emit()}))}componentWillLoad(){const{el:e,formatOptions:t,highlightedDates:i,multiple:s,presentation:r,preferWheel:o}=this;s&&(r!=="date"&&pi('Multiple date selection is only supported for presentation="date".',e),o&&pi('Multiple date selection is not supported with preferWheel="true".',e)),i!==void 0&&(r!=="date"&&r!=="date-time"&&r!=="time-date"&&pi("The highlightedDates property is only supported with the date, date-time, and time-date presentations.",e),o&&pi('The highlightedDates property is not supported with preferWheel="true".',e)),t&&(G2(e,r,t),sR(e,t));const a=this.parsedHourValues=Ja(this.hourValues),l=this.parsedMinuteValues=Ja(this.minuteValues),c=this.parsedMonthValues=Ja(this.monthValues),d=this.parsedYearValues=Ja(this.yearValues),u=this.parsedDayValues=Ja(this.dayValues),h=this.todayParts=Qg(Sre());this.processMinParts(),this.processMaxParts(),this.defaultParts=pre({refParts:h,monthValues:c,dayValues:u,yearValues:d,hourValues:a,minuteValues:l,minParts:this.minParts,maxParts:this.maxParts}),this.processValue(this.value),this.emitStyle()}emitStyle(){this.ionStyle.emit({interactive:!0,datetime:!0,"interactive-disabled":this.disabled})}renderFooter(){const{disabled:e,readonly:t,showDefaultButtons:i,showClearButton:s}=this,r=e||t;if(!(this.el.querySelector('[slot="buttons"]')!==null)&&!i&&!s)return;const a=()=>{this.reset(),this.setValue(void 0)};return q("div",{class:"datetime-footer"},q("div",{class:"datetime-buttons"},q("div",{class:{"datetime-action-buttons":!0,"has-clear-button":this.showClearButton}},q("slot",{name:"buttons"},q("ion-buttons",null,i&&q("ion-button",{id:"cancel-button",color:this.color,onClick:()=>this.cancel(!0),disabled:r},this.cancelText),q("div",{class:"datetime-action-buttons-container"},s&&q("ion-button",{id:"clear-button",color:this.color,onClick:()=>a(),disabled:r},this.clearText),i&&q("ion-button",{id:"confirm-button",color:this.color,onClick:()=>this.confirm(!0),disabled:r},this.doneText)))))))}renderWheelPicker(e=this.presentation){const t=e==="time-date"?[this.renderTimePickerColumns(e),this.renderDatePickerColumns(e)]:[this.renderDatePickerColumns(e),this.renderTimePickerColumns(e)];return q("ion-picker",null,t)}renderDatePickerColumns(e){return e==="date-time"||e==="time-date"?this.renderCombinedDatePickerColumn():this.renderIndividualDatePickerColumns(e)}renderCombinedDatePickerColumn(){const{defaultParts:e,disabled:t,workingParts:i,locale:s,minParts:r,maxParts:o,todayParts:a,isDateEnabled:l}=this,c=this.getActivePartsWithFallback(),d=ZP(i),u=d[d.length-1];d[0].day=1,u.day=Ll(u.month,u.year);const h=r!==void 0&&Th(r,d[0])?r:d[0],f=o!==void 0&&Ec(o,u)?o:u,m=Bre(s,a,h,f,this.parsedDayValues,this.parsedMonthValues);let g=m.items;const b=m.parts;l&&(g=g.map((x,k)=>{const E=b[k];let T;try{T=!l(ud(E))}catch(P){Pf("Exception thrown from provided `isDateEnabled` function. Please check your function and try again.",P)}return Object.assign(Object.assign({},x),{disabled:T})}));const w=i.day!==null?"".concat(i.year,"-").concat(i.month,"-").concat(i.day):"".concat(e.year,"-").concat(e.month,"-").concat(e.day);return q("ion-picker-column",{"aria-label":"Select a date",class:"date-column",color:this.color,disabled:t,value:w,onIonChange:x=>{const{value:k}=x.detail,E=b.find(({month:T,day:P,year:C})=>k==="".concat(C,"-").concat(T,"-").concat(P));this.setWorkingParts(Object.assign(Object.assign({},i),E)),this.setActiveParts(Object.assign(Object.assign({},c),E)),x.stopPropagation()}},g.map(x=>q("ion-picker-column-option",{part:x.value===w?"".concat(Br," ").concat(_u):Br,key:x.value,disabled:x.disabled,value:x.value},x.text)))}renderIndividualDatePickerColumns(e){const{workingParts:t,isDateEnabled:i}=this,r=e!=="year"&&e!=="time"?Nre(this.locale,t,this.minParts,this.maxParts,this.parsedMonthValues):[];let a=e==="date"?FM(this.locale,t,this.minParts,this.maxParts,this.parsedDayValues):[];i&&(a=a.map(h=>{const{value:f}=h,m=typeof f=="string"?parseInt(f):f,g={month:t.month,day:m,year:t.year};let b;try{b=!i(ud(g))}catch(w){Pf("Exception thrown from provided `isDateEnabled` function. Please check your function and try again.",w)}return Object.assign(Object.assign({},h),{disabled:b})}));const c=e!=="month"&&e!=="time"?Fre(this.locale,this.defaultParts,this.minParts,this.maxParts,this.parsedYearValues):[],d=XP(this.locale,{month:"numeric",day:"numeric"});let u=[];return d?u=[this.renderMonthPickerColumn(r),this.renderDayPickerColumn(a),this.renderYearPickerColumn(c)]:u=[this.renderDayPickerColumn(a),this.renderMonthPickerColumn(r),this.renderYearPickerColumn(c)],u}renderDayPickerColumn(e){var t;if(e.length===0)return[];const{disabled:i,workingParts:s}=this,r=this.getActivePartsWithFallback(),o=(t=s.day!==null?s.day:this.defaultParts.day)!==null&&t!==void 0?t:void 0;return q("ion-picker-column",{"aria-label":"Select a day",class:"day-column",color:this.color,disabled:i,value:o,onIonChange:a=>{this.setWorkingParts(Object.assign(Object.assign({},s),{day:a.detail.value})),this.setActiveParts(Object.assign(Object.assign({},r),{day:a.detail.value})),a.stopPropagation()}},e.map(a=>q("ion-picker-column-option",{part:a.value===o?"".concat(Br," ").concat(_u):Br,key:a.value,disabled:a.disabled,value:a.value},a.text)))}renderMonthPickerColumn(e){if(e.length===0)return[];const{disabled:t,workingParts:i}=this,s=this.getActivePartsWithFallback();return q("ion-picker-column",{"aria-label":"Select a month",class:"month-column",color:this.color,disabled:t,value:i.month,onIonChange:r=>{this.setWorkingParts(Object.assign(Object.assign({},i),{month:r.detail.value})),this.setActiveParts(Object.assign(Object.assign({},s),{month:r.detail.value})),r.stopPropagation()}},e.map(r=>q("ion-picker-column-option",{part:r.value===i.month?"".concat(Br," ").concat(_u):Br,key:r.value,disabled:r.disabled,value:r.value},r.text)))}renderYearPickerColumn(e){if(e.length===0)return[];const{disabled:t,workingParts:i}=this,s=this.getActivePartsWithFallback();return q("ion-picker-column",{"aria-label":"Select a year",class:"year-column",color:this.color,disabled:t,value:i.year,onIonChange:r=>{this.setWorkingParts(Object.assign(Object.assign({},i),{year:r.detail.value})),this.setActiveParts(Object.assign(Object.assign({},s),{year:r.detail.value})),r.stopPropagation()}},e.map(r=>q("ion-picker-column-option",{part:r.value===i.year?"".concat(Br," ").concat(_u):Br,key:r.value,disabled:r.disabled,value:r.value},r.text)))}renderTimePickerColumns(e){if(["date","month","month-year","year"].includes(e))return[];const i=this.getActivePart()!==void 0,{hoursData:s,minutesData:r,dayPeriodData:o}=Vre(this.locale,this.workingParts,this.hourCycle,i?this.minParts:void 0,i?this.maxParts:void 0,this.parsedHourValues,this.parsedMinuteValues);return[this.renderHourPickerColumn(s),this.renderMinutePickerColumn(r),this.renderDayPeriodPickerColumn(o)]}renderHourPickerColumn(e){const{disabled:t,workingParts:i}=this;if(e.length===0)return[];const s=this.getActivePartsWithFallback();return q("ion-picker-column",{"aria-label":"Select an hour",color:this.color,disabled:t,value:s.hour,numericInput:!0,onIonChange:r=>{this.setWorkingParts(Object.assign(Object.assign({},i),{hour:r.detail.value})),this.setActiveParts(Object.assign(Object.assign({},s),{hour:r.detail.value})),r.stopPropagation()}},e.map(r=>q("ion-picker-column-option",{part:r.value===s.hour?"".concat(Br," ").concat(_u):Br,key:r.value,disabled:r.disabled,value:r.value},r.text)))}renderMinutePickerColumn(e){const{disabled:t,workingParts:i}=this;if(e.length===0)return[];const s=this.getActivePartsWithFallback();return q("ion-picker-column",{"aria-label":"Select a minute",color:this.color,disabled:t,value:s.minute,numericInput:!0,onIonChange:r=>{this.setWorkingParts(Object.assign(Object.assign({},i),{minute:r.detail.value})),this.setActiveParts(Object.assign(Object.assign({},s),{minute:r.detail.value})),r.stopPropagation()}},e.map(r=>q("ion-picker-column-option",{part:r.value===s.minute?"".concat(Br," ").concat(_u):Br,key:r.value,disabled:r.disabled,value:r.value},r.text)))}renderDayPeriodPickerColumn(e){const{disabled:t,workingParts:i}=this;if(e.length===0)return[];const s=this.getActivePartsWithFallback(),r=Xse(this.locale);return q("ion-picker-column",{"aria-label":"Select a day period",style:r?{order:"-1"}:{},color:this.color,disabled:t,value:s.ampm,onIonChange:o=>{const a=hre(i,o.detail.value);this.setWorkingParts(Object.assign(Object.assign({},i),{ampm:o.detail.value,hour:a})),this.setActiveParts(Object.assign(Object.assign({},s),{ampm:o.detail.value,hour:a})),o.stopPropagation()}},e.map(o=>q("ion-picker-column-option",{part:o.value===s.ampm?"".concat(Br," ").concat(_u):Br,key:o.value,disabled:o.disabled,value:o.value},o.text)))}renderWheelView(e){const{locale:t}=this,s=XP(t)?"month-first":"year-first";return q("div",{class:{["wheel-order-".concat(s)]:!0}},this.renderWheelPicker(e))}renderCalendarHeader(e){const{disabled:t}=this,i=e==="ios"?yM:Mne,s=e==="ios"?Cy:Dne,r=t||fae(this.workingParts,this.minParts,this.maxParts),o=t||pae(this.workingParts,this.maxParts),a=this.el.getAttribute("dir")||void 0;return q("div",{class:"calendar-header"},q("div",{class:"calendar-action-buttons"},q("div",{class:"calendar-month-year"},q("button",{class:{"calendar-month-year-toggle":!0,"ion-activatable":!0,"ion-focusable":!0},part:"month-year-button",disabled:t,"aria-label":this.showMonthAndYear?"Hide year picker":"Show year picker",onClick:()=>this.toggleMonthAndYearView()},q("span",{id:"toggle-wrapper"},yre(this.locale,this.workingParts),q("ion-icon",{"aria-hidden":"true",icon:this.showMonthAndYear?i:s,lazy:!1,flipRtl:!0})),e==="md"&&q("ion-ripple-effect",null))),q("div",{class:"calendar-next-prev"},q("ion-buttons",null,q("ion-button",{"aria-label":"Previous month",disabled:r,onClick:()=>this.prevMonth()},q("ion-icon",{dir:a,"aria-hidden":"true",slot:"icon-only",icon:vM,lazy:!1,flipRtl:!0})),q("ion-button",{"aria-label":"Next month",disabled:o,onClick:()=>this.nextMonth()},q("ion-icon",{dir:a,"aria-hidden":"true",slot:"icon-only",icon:Cy,lazy:!1,flipRtl:!0}))))),q("div",{class:"calendar-days-of-week","aria-hidden":"true"},Lre(this.locale,e,this.firstDayOfWeek%7).map(l=>q("div",{class:"day-of-week"},l))))}renderMonth(e,t){const{disabled:i,readonly:s}=this,r=this.parsedYearValues===void 0||this.parsedYearValues.includes(t),o=this.parsedMonthValues===void 0||this.parsedMonthValues.includes(e),a=!r||!o,l=i||s,c=i||Ly({month:e,year:t,day:null},{minParts:Object.assign(Object.assign({},this.minParts),{day:null}),maxParts:Object.assign(Object.assign({},this.maxParts),{day:null})}),d=this.workingParts.month===e&&this.workingParts.year===t,u=this.getActivePartsWithFallback();return q("div",{"aria-hidden":d?null:"true",class:{"calendar-month":!0,"calendar-month-disabled":!d&&c}},q("div",{class:"calendar-month-grid"},Ore(e,t,this.firstDayOfWeek%7).map((h,f)=>{const{day:m,dayOfWeek:g}=h,{el:b,highlightedDates:w,isDateEnabled:x,multiple:k}=this,E={month:e,day:m,year:t},T=m===null,{isActive:P,isToday:C,ariaLabel:A,ariaSelected:R,disabled:M,text:N}=hae(this.locale,E,this.activeParts,this.todayParts,this.minParts,this.maxParts,this.parsedDayValues),U=ud(E);let G=a||M;if(!G&&x!==void 0)try{G=!x(U)}catch(he){Pf("Exception thrown from provided `isDateEnabled` function. Please check your function and try again.",b,he)}const B=G&&l,te=G||l;let X;w!==void 0&&!P&&m!==null&&(X=mae(w,U,b));let ue;return T||(ue="calendar-day".concat(P?" active":"").concat(C?" today":"").concat(G?" disabled":"")),q("div",{class:"calendar-day-wrapper"},q("button",{ref:he=>{he&&(he.style.setProperty("color","".concat(X?X.textColor:""),"important"),he.style.setProperty("background-color","".concat(X?X.backgroundColor:""),"important"))},tabindex:"-1","data-day":m,"data-month":e,"data-year":t,"data-index":f,"data-day-of-week":g,disabled:te,class:{"calendar-day-padding":T,"calendar-day":!0,"calendar-day-active":P,"calendar-day-constrained":B,"calendar-day-today":C},part:ue,"aria-hidden":T?"true":null,"aria-selected":R,"aria-label":A,onClick:()=>{T||(this.setWorkingParts(Object.assign(Object.assign({},this.workingParts),{month:e,day:m,year:t})),k?this.setActiveParts({month:e,day:m,year:t},P):this.setActiveParts(Object.assign(Object.assign({},u),{month:e,day:m,year:t})))}},N))})))}renderCalendarBody(){return q("div",{class:"calendar-body ion-focusable",ref:e=>this.calendarBodyRef=e,tabindex:"0"},ZP(this.workingParts,this.forceRenderDate).map(({month:e,year:t})=>this.renderMonth(e,t)))}renderCalendar(e){return q("div",{class:"datetime-calendar",key:"datetime-calendar"},this.renderCalendarHeader(e),this.renderCalendarBody())}renderTimeLabel(){if(!(!(this.el.querySelector('[slot="time-label"]')!==null)&&!this.showDefaultTimeLabel))return q("slot",{name:"time-label"},"Time")}renderTimeOverlay(){const{disabled:e,hourCycle:t,isTimePopoverOpen:i,locale:s,formatOptions:r}=this,o=ZS(s,t),a=this.getActivePartsWithFallback();return[q("div",{class:"time-header"},this.renderTimeLabel()),q("button",{class:{"time-body":!0,"time-body-active":i},part:"time-button".concat(i?" active":""),"aria-expanded":"false","aria-haspopup":"true",disabled:e,onClick:async l=>{const{popoverRef:c}=this;c&&(this.isTimePopoverOpen=!0,c.present(new CustomEvent("ionShadowTarget",{detail:{ionShadowTarget:l.target}})),await c.onWillDismiss(),this.isTimePopoverOpen=!1)}},gre(s,a,o,r==null?void 0:r.time)),q("ion-popover",{alignment:"center",translucent:!0,overlayIndex:1,arrow:!1,onWillPresent:l=>{l.target.querySelectorAll("ion-picker-column").forEach(d=>d.scrollActiveItemIntoView())},style:{"--offset-y":"-10px","--min-width":"fit-content"},keyboardEvents:!0,ref:l=>this.popoverRef=l},this.renderWheelPicker("time"))]}getHeaderSelectedDateText(){var e;const{activeParts:t,formatOptions:i,multiple:s,titleSelectedDatesFormatter:r}=this,o=Array.isArray(t);let a;if(s&&o&&t.length!==1){if(a="".concat(t.length," days"),r!==void 0)try{a=r(ud(t))}catch(l){Pf("Exception in provided `titleSelectedDatesFormatter`: ",l)}}else a=MM(this.locale,this.getActivePartsWithFallback(),(e=i==null?void 0:i.date)!==null&&e!==void 0?e:{weekday:"short",month:"short",day:"numeric"});return a}renderHeader(e=!0){if(!(!(this.el.querySelector('[slot="title"]')!==null)&&!this.showDefaultTitle))return q("div",{class:"datetime-header"},q("div",{class:"datetime-title"},q("slot",{name:"title"},"Select Date")),e&&q("div",{class:"datetime-selected-date"},this.getHeaderSelectedDateText()))}renderTime(){const{presentation:e}=this;return q("div",{class:"datetime-time"},e==="time"?this.renderWheelPicker():this.renderTimeOverlay())}renderCalendarViewMonthYearPicker(){return q("div",{class:"datetime-year"},this.renderWheelView("month-year"))}renderDatetime(e){const{presentation:t,preferWheel:i}=this;if(i&&(t==="date"||t==="date-time"||t==="time-date"))return[this.renderHeader(!1),this.renderWheelView(),this.renderFooter()];switch(t){case"date-time":return[this.renderHeader(),this.renderCalendar(e),this.renderCalendarViewMonthYearPicker(),this.renderTime(),this.renderFooter()];case"time-date":return[this.renderHeader(),this.renderTime(),this.renderCalendar(e),this.renderCalendarViewMonthYearPicker(),this.renderFooter()];case"time":return[this.renderHeader(!1),this.renderTime(),this.renderFooter()];case"month":case"month-year":case"year":return[this.renderHeader(!1),this.renderWheelView(),this.renderFooter()];default:return[this.renderHeader(),this.renderCalendar(e),this.renderCalendarViewMonthYearPicker(),this.renderFooter()]}}render(){const{name:e,value:t,disabled:i,el:s,color:r,readonly:o,showMonthAndYear:a,preferWheel:l,presentation:c,size:d,isGridStyle:u}=this,h=Tt(this),f=c==="year"||c==="month"||c==="month-year",m=a||f,g=a&&!f,w=(c==="date"||c==="date-time"||c==="time-date")&&l;return YS(!0,s,e,Cre(t),i),q(Yt,{key:"7afbb1a7e6c78389b4588999779e5c90e010e85d","aria-disabled":i?"true":null,onFocus:this.onFocus,onBlur:this.onBlur,class:Object.assign({},ds(r,{[h]:!0,"datetime-readonly":o,"datetime-disabled":i,"show-month-and-year":m,"month-year-picker-open":g,["datetime-presentation-".concat(c)]:!0,["datetime-size-".concat(d)]:!0,"datetime-prefer-wheel":w,"datetime-grid":u}))},q("div",{key:"297c458d4d17154cb297e2ef5926505bcb2d1fce",class:"intersection-tracker",ref:x=>this.intersectionTrackerRef=x}),this.renderDatetime(h))}get el(){return this}static get watchers(){return{formatOptions:["formatOptionsChanged"],disabled:["disabledChanged"],min:["minChanged"],max:["maxChanged"],presentation:["presentationChanged"],yearValues:["yearValuesChanged"],monthValues:["monthValuesChanged"],dayValues:["dayValuesChanged"],hourValues:["hourValuesChanged"],minuteValues:["minuteValuesChanged"],value:["valueChanged"]}}static get style(){return{ios:bae,md:yae}}},[33,"ion-datetime",{color:[1],name:[1],disabled:[4],formatOptions:[16],readonly:[4],isDateEnabled:[16],min:[1025],max:[1025],presentation:[1],cancelText:[1,"cancel-text"],doneText:[1,"done-text"],clearText:[1,"clear-text"],yearValues:[8,"year-values"],monthValues:[8,"month-values"],dayValues:[8,"day-values"],hourValues:[8,"hour-values"],minuteValues:[8,"minute-values"],locale:[1],firstDayOfWeek:[2,"first-day-of-week"],titleSelectedDatesFormatter:[16],multiple:[4],highlightedDates:[16],value:[1025],showDefaultTitle:[4,"show-default-title"],showDefaultButtons:[4,"show-default-buttons"],showClearButton:[4,"show-clear-button"],showDefaultTimeLabel:[4,"show-default-time-label"],hourCycle:[1,"hour-cycle"],size:[1],preferWheel:[4,"prefer-wheel"],showMonthAndYear:[32],activeParts:[32],workingParts:[32],isTimePopoverOpen:[32],forceRenderDate:[32],confirm:[64],reset:[64],cancel:[64]},void 0,{formatOptions:["formatOptionsChanged"],disabled:["disabledChanged"],min:["minChanged"],max:["maxChanged"],presentation:["presentationChanged"],yearValues:["yearValuesChanged"],monthValues:["monthValuesChanged"],dayValues:["dayValuesChanged"],hourValues:["hourValuesChanged"],minuteValues:["minuteValuesChanged"],value:["valueChanged"]}]);let xae=0;const _ae="datetime-cancel",kae="datetime-confirm",Br="wheel-item",_u="active";function Eae(){if(typeof customElements>"u")return;["ion-datetime","ion-backdrop","ion-button","ion-buttons","ion-icon","ion-picker","ion-picker-column","ion-picker-column-option","ion-popover","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-datetime":customElements.get(e)||customElements.define(e,wae);break;case"ion-backdrop":customElements.get(e)||Eh();break;case"ion-button":customElements.get(e)||QS();break;case"ion-buttons":customElements.get(e)||pse();break;case"ion-icon":customElements.get(e)||$l();break;case"ion-picker":customElements.get(e)||Wre();break;case"ion-picker-column":customElements.get(e)||Qre();break;case"ion-picker-column-option":customElements.get(e)||ioe();break;case"ion-popover":customElements.get(e)||sN();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Tae=Eae;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Cae="ION-CONTENT",uA="ion-content",mg=".ion-content-scroll-host",oN="".concat(uA,", ").concat(mg),Dd=n=>n.tagName===Cae,vp=async n=>Dd(n)?(await new Promise(e=>Ra(n,e)),n.getScrollElement()):n,Oy=n=>{const e=n.querySelector(mg);return e||n.querySelector(oN)},hx=n=>n.closest(oN),rdt=(n,e)=>Dd(n)?n.scrollToTop(e):Promise.resolve(n.scrollTo({top:0,left:0,behavior:"smooth"})),odt=(n,e,t,i)=>Dd(n)?n.scrollByPoint(e,t,i):Promise.resolve(n.scrollBy({top:t,left:e,behavior:i>0?"smooth":"auto"})),yp=n=>Iie(n,uA),rR=n=>{if(Dd(n)){const e=n,t=e.scrollY;return e.scrollY=!1,t}else return n.style.setProperty("overflow","hidden"),!0},Sae=(n,e)=>{Dd(n)?n.scrollY=e:n.style.removeProperty("overflow")};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var aT;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(aT||(aT={}));var lT;(function(n){n.Body="body",n.Ionic="ionic",n.Native="native",n.None="none"})(lT||(lT={}));const aN={getEngine(){const n=Ay();if(n!=null&&n.isPluginAvailable("Keyboard"))return n.Plugins.Keyboard},getResizeMode(){const n=this.getEngine();return n!=null&&n.getResizeMode?n.getResizeMode().catch(e=>{if(e.code!==aT.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lN=n=>{if(Kr===void 0||n===lT.None||n===void 0)return null;const e=Kr.querySelector("ion-app");return e!=null?e:Kr.body},oR=n=>{const e=lN(n);return e===null?0:e.clientHeight},cN=async n=>{let e,t,i,s;const r=async()=>{const d=await aN.getResizeMode(),u=d===void 0?void 0:d.mode;e=()=>{s===void 0&&(s=oR(u)),i=!0,o(i,u)},t=()=>{i=!1,o(i,u)},xi==null||xi.addEventListener("keyboardWillShow",e),xi==null||xi.addEventListener("keyboardWillHide",t)},o=(d,u)=>{n&&n(d,a(u))},a=d=>{if(s===0||s===oR(d))return;const u=lN(d);if(u!==null)return new Promise(h=>{const f=()=>{u.clientHeight===s&&(m.disconnect(),h())},m=new ResizeObserver(f);m.observe(u)})},l=()=>{xi==null||xi.removeEventListener("keyboardWillShow",e),xi==null||xi.removeEventListener("keyboardWillHide",t),e=t=void 0},c=()=>i;return await r(),{init:r,destroy:l,isKeyboardVisible:c}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const aR=(n,e)=>{Cl(()=>{const t=n.scrollTop,i=n.scrollHeight-n.clientHeight,s=10,r=i-s,o=t-r,a=qo(0,1-o/s,1);fi(()=>{e.style.setProperty("--opacity-scale",a.toString())})})},Aae="ion-footer{display:block;position:relative;-ms-flex-order:1;order:1;width:100%;z-index:10}ion-footer.footer-toolbar-padding ion-toolbar:last-of-type{padding-bottom:var(--ion-safe-area-bottom, 0)}.footer-ios ion-toolbar:first-of-type{--border-width:0.55px 0 0}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.footer-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.footer-translucent-ios ion-toolbar{--opacity:.8}}.footer-ios.ion-no-border ion-toolbar:first-of-type{--border-width:0}.footer-collapse-fade ion-toolbar{--opacity-scale:inherit}",Iae=Aae,Pae="ion-footer{display:block;position:relative;-ms-flex-order:1;order:1;width:100%;z-index:10}ion-footer.footer-toolbar-padding ion-toolbar:last-of-type{padding-bottom:var(--ion-safe-area-bottom, 0)}.footer-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.footer-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",Rae=Pae,$ae=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.keyboardCtrl=null,this.checkCollapsibleFooter=()=>{if(Tt(this)!=="ios")return;const{collapse:t}=this,i=t==="fade";if(this.destroyCollapsibleFooter(),i){const s=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),r=s?Oy(s):null;if(!r){yp(this.el);return}this.setupFadeFooter(r)}},this.setupFadeFooter=async e=>{const t=this.scrollEl=await vp(e);this.contentScrollCallback=()=>{aR(t,this.el)},t.addEventListener("scroll",this.contentScrollCallback),aR(t,this.el)},this.keyboardVisible=!1,this.collapse=void 0,this.translucent=!1}componentDidLoad(){this.checkCollapsibleFooter()}componentDidUpdate(){this.checkCollapsibleFooter()}async connectedCallback(){this.keyboardCtrl=await cN(async(e,t)=>{e===!1&&t!==void 0&&await t,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}destroyCollapsibleFooter(){this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0)}render(){const{translucent:e,collapse:t}=this,i=Tt(this),s=this.el.closest("ion-tabs"),r=s==null?void 0:s.querySelector(":scope > ion-tab-bar");return q(Yt,{key:"ddc228f1a1e7fa4f707dccf74db2490ca3241137",role:"contentinfo",class:{[i]:!0,["footer-".concat(i)]:!0,"footer-translucent":e,["footer-translucent-".concat(i)]:e,"footer-toolbar-padding":!this.keyboardVisible&&(!r||r.slot!=="bottom"),["footer-collapse-".concat(t)]:t!==void 0}},i==="ios"&&e&&q("div",{key:"e16ed4963ff94e06de77eb8038201820af73937c",class:"footer-background"}),q("slot",{key:"f186934febf85d37133d9351a96c1a64b0a4b203"}))}get el(){return this}static get style(){return{ios:Iae,md:Rae}}},[36,"ion-footer",{collapse:[1],translucent:[4],keyboardVisible:[32]}]);function Lae(){if(typeof customElements>"u")return;["ion-footer"].forEach(e=>{switch(e){case"ion-footer":customElements.get(e)||customElements.define(e,$ae);break}})}const Oae=Lae;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Dae="all 0.2s ease-in-out",lR=n=>{const e=document.querySelector("".concat(n,".ion-cloned-element"));if(e!==null)return e;const t=document.createElement(n);return t.classList.add("ion-cloned-element"),t.style.setProperty("display","none"),document.body.appendChild(t),t},cR=n=>{if(!n)return;const e=n.querySelectorAll("ion-toolbar");return{el:n,toolbars:Array.from(e).map(t=>{const i=t.querySelector("ion-title");return{el:t,background:t.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:i,innerTitleEl:i?i.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(t.querySelectorAll("ion-buttons"))}})}},Mae=(n,e,t)=>{Cl(()=>{const i=n.scrollTop,s=qo(1,1+-i/500,1.1);t.querySelector("ion-refresher.refresher-native")===null&&fi(()=>{Bae(e.toolbars,s)})})},hA=(n,e)=>{n.collapse!=="fade"&&(e===void 0?n.style.removeProperty("--opacity-scale"):n.style.setProperty("--opacity-scale",e.toString()))},Nae=(n,e,t)=>{if(!n[0].isIntersecting)return;const i=n[0].intersectionRatio>.9||t<=0?0:(1-n[0].intersectionRatio)*100/75;hA(e.el,i===1?void 0:i)},Fae=(n,e,t,i)=>{fi(()=>{const s=i.scrollTop;Nae(n,e,s);const r=n[0],o=r.intersectionRect,a=o.width*o.height,l=r.rootBounds.width*r.rootBounds.height,c=a===0&&l===0,d=Math.abs(o.left-r.boundingClientRect.left),u=Math.abs(o.right-r.boundingClientRect.right),h=a>0&&(d>=5||u>=5);c||h||(r.isIntersecting?(Jm(e,!1),Jm(t)):(o.x===0&&o.y===0||o.width!==0&&o.height!==0)&&s>0&&(Jm(e),Jm(t,!1),hA(e.el)))})},Jm=(n,e=!0)=>{const t=n.el,s=n.toolbars.map(r=>r.ionTitleEl);e?(t.classList.remove("header-collapse-condense-inactive"),s.forEach(r=>{r&&r.removeAttribute("aria-hidden")})):(t.classList.add("header-collapse-condense-inactive"),s.forEach(r=>{r&&r.setAttribute("aria-hidden","true")}))},Bae=(n=[],e=1,t=!1)=>{n.forEach(i=>{const s=i.ionTitleEl,r=i.innerTitleEl;!s||s.size!=="large"||(r.style.transition=t?Dae:"",r.style.transform="scale3d(".concat(e,", ").concat(e,", 1)"))})},dR=(n,e,t)=>{Cl(()=>{const i=n.scrollTop,s=e.clientHeight,r=t?t.clientHeight:0;if(t!==null&&i<r){e.style.setProperty("--opacity-scale","0"),n.style.setProperty("clip-path","inset(".concat(s,"px 0px 0px 0px)"));return}const o=i-r,l=qo(0,o/10,1);fi(()=>{n.style.removeProperty("clip-path"),e.style.setProperty("--opacity-scale",l.toString())})})},Vae="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:0px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}ion-header.header-ios:not(.header-collapse-main):has(~ion-content ion-header.header-ios[collapse=condense],~ion-content ion-header.header-ios.header-collapse-condense){opacity:0}",Uae=Vae,zae="ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md{-webkit-box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12);box-shadow:0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12)}.header-collapse-condense{display:none}.header-md.ion-no-border{-webkit-box-shadow:none;box-shadow:none}",Hae=zae,jae=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.inheritedAttributes={},this.setupFadeHeader=async(e,t)=>{const i=this.scrollEl=await vp(e);this.contentScrollCallback=()=>{dR(this.scrollEl,this.el,t)},i.addEventListener("scroll",this.contentScrollCallback),dR(this.scrollEl,this.el,t)},this.collapse=void 0,this.translucent=!1}componentWillLoad(){this.inheritedAttributes=Kd(this.el)}componentDidLoad(){this.checkCollapsibleHeader()}componentDidUpdate(){this.checkCollapsibleHeader()}disconnectedCallback(){this.destroyCollapsibleHeader()}async checkCollapsibleHeader(){if(Tt(this)!=="ios")return;const{collapse:t}=this,i=t==="condense",s=t==="fade";if(this.destroyCollapsibleHeader(),i){const r=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),o=r?Oy(r):null;fi(()=>{const a=lR("ion-title");a.size="large",lR("ion-back-button")}),await this.setupCondenseHeader(o,r)}else if(s){const r=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),o=r?Oy(r):null;if(!o){yp(this.el);return}const a=o.querySelector('ion-header[collapse="condense"]');await this.setupFadeHeader(o,a)}}destroyCollapsibleHeader(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}async setupCondenseHeader(e,t){if(!e||!t){yp(this.el);return}if(typeof IntersectionObserver>"u")return;this.scrollEl=await vp(e);const i=t.querySelectorAll("ion-header");if(this.collapsibleMainHeader=Array.from(i).find(a=>a.collapse!=="condense"),!this.collapsibleMainHeader)return;const s=cR(this.collapsibleMainHeader),r=cR(this.el);if(!s||!r)return;Jm(s,!1),hA(s.el,0);const o=a=>{Fae(a,s,r,this.scrollEl)};this.intersectionObserver=new IntersectionObserver(o,{root:e,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(r.toolbars[r.toolbars.length-1].el),this.contentScrollCallback=()=>{Mae(this.scrollEl,r,e)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),fi(()=>{this.collapsibleMainHeader!==void 0&&this.collapsibleMainHeader.classList.add("header-collapse-main")})}render(){const{translucent:e,inheritedAttributes:t}=this,i=Tt(this),s=this.collapse||"none",r=ts("ion-menu",this.el)?"none":"banner";return q(Yt,Object.assign({key:"b6cc27f0b08afc9fcc889683525da765d80ba672",role:r,class:{[i]:!0,["header-".concat(i)]:!0,"header-translucent":this.translucent,["header-collapse-".concat(s)]:!0,["header-translucent-".concat(i)]:this.translucent}},t),i==="ios"&&e&&q("div",{key:"395766d4dcee3398bc91960db21f922095292f14",class:"header-background"}),q("slot",{key:"09a67ece27b258ff1248805d43d92a49b2c6859a"}))}get el(){return this}static get style(){return{ios:Uae,md:Hae}}},[36,"ion-header",{collapse:[1],translucent:[4]}]);function Gae(){if(typeof customElements>"u")return;["ion-header"].forEach(e=>{switch(e){case"ion-header":customElements.get(e)||customElements.define(e,jae);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Wae=Gae;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qae="ion-infinite-scroll{display:none;width:100%}.infinite-scroll-enabled{display:block}",Kae=qae,Yae=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionInfinite=at(this,"ionInfinite",7),this.thrPx=0,this.thrPc=0,this.didFire=!1,this.isBusy=!1,this.onScroll=()=>{const e=this.scrollEl;if(!e||!this.canStart())return 1;const t=this.el.offsetHeight;if(t===0)return 2;const i=e.scrollTop,s=e.scrollHeight,r=e.offsetHeight,o=this.thrPc!==0?r*this.thrPc:this.thrPx;return(this.position==="bottom"?s-t-i-o-r:i-t-o)<0&&!this.didFire?(this.isLoading=!0,this.didFire=!0,this.ionInfinite.emit(),3):4},this.isLoading=!1,this.threshold="15%",this.disabled=!1,this.position="bottom"}thresholdChanged(){const e=this.threshold;e.lastIndexOf("%")>-1?(this.thrPx=0,this.thrPc=parseFloat(e)/100):(this.thrPx=parseFloat(e),this.thrPc=0)}disabledChanged(){const e=this.disabled;e&&(this.isLoading=!1,this.isBusy=!1),this.enableScrollEvents(!e)}async connectedCallback(){const e=hx(this.el);if(!e){yp(this.el);return}this.scrollEl=await vp(e),this.thresholdChanged(),this.disabledChanged(),this.position==="top"&&fi(()=>{this.scrollEl&&(this.scrollEl.scrollTop=this.scrollEl.scrollHeight-this.scrollEl.clientHeight)})}disconnectedCallback(){this.enableScrollEvents(!1),this.scrollEl=void 0}async complete(){const e=this.scrollEl;if(!(!this.isLoading||!e))if(this.isLoading=!1,this.position==="top"){this.isBusy=!0;const t=e.scrollHeight-e.scrollTop;requestAnimationFrame(()=>{Cl(()=>{const s=e.scrollHeight-t;requestAnimationFrame(()=>{fi(()=>{e.scrollTop=s,this.isBusy=!1,this.didFire=!1})})})})}else this.didFire=!1}canStart(){return!this.disabled&&!this.isBusy&&!!this.scrollEl&&!this.isLoading}enableScrollEvents(e){this.scrollEl&&(e?this.scrollEl.addEventListener("scroll",this.onScroll):this.scrollEl.removeEventListener("scroll",this.onScroll))}render(){const e=Tt(this),t=this.disabled;return q(Yt,{key:"e844956795f69be33396ce4480aa7a54ad01b28c",class:{[e]:!0,"infinite-scroll-loading":this.isLoading,"infinite-scroll-enabled":!t}})}get el(){return this}static get watchers(){return{threshold:["thresholdChanged"],disabled:["disabledChanged"]}}static get style(){return Kae}},[0,"ion-infinite-scroll",{threshold:[1],disabled:[4],position:[1],isLoading:[32],complete:[64]},void 0,{threshold:["thresholdChanged"],disabled:["disabledChanged"]}]);function Xae(){if(typeof customElements>"u")return;["ion-infinite-scroll"].forEach(e=>{switch(e){case"ion-infinite-scroll":customElements.get(e)||customElements.define(e,Yae);break}})}const Qae=Xae;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wp=n=>{try{if(n instanceof tle)return n.value;if(!Zae()||typeof n!="string"||n==="")return n;if(n.includes("onload="))return"";const e=document.createDocumentFragment(),t=document.createElement("div");e.appendChild(t),t.innerHTML=n,ele.forEach(o=>{const a=e.querySelectorAll(o);for(let l=a.length-1;l>=0;l--){const c=a[l];c.parentNode?c.parentNode.removeChild(c):e.removeChild(c);const d=dT(c);for(let u=0;u<d.length;u++)cT(d[u])}});const i=dT(e);for(let o=0;o<i.length;o++)cT(i[o]);const s=document.createElement("div");s.appendChild(e);const r=s.querySelector("div");return r!==null?r.innerHTML:s.innerHTML}catch(e){return console.error(e),""}},cT=n=>{if(n.nodeType&&n.nodeType!==1)return;if(typeof NamedNodeMap<"u"&&!(n.attributes instanceof NamedNodeMap)){n.remove();return}for(let t=n.attributes.length-1;t>=0;t--){const i=n.attributes.item(t),s=i.name;if(!Jae.includes(s.toLowerCase())){n.removeAttribute(s);continue}const r=i.value,o=n[s];(r!=null&&r.toLowerCase().includes("javascript:")||o!=null&&o.toLowerCase().includes("javascript:"))&&n.removeAttribute(s)}const e=dT(n);for(let t=0;t<e.length;t++)cT(e[t])},dT=n=>n.children!=null?n.children:n.childNodes,Zae=()=>{var n;const e=window,t=(n=e==null?void 0:e.Ionic)===null||n===void 0?void 0:n.config;return t?t.get?t.get("sanitizerEnabled",!0):t.sanitizerEnabled===!0||t.sanitizerEnabled===void 0:!0},Jae=["class","id","href","src","name","slot"],ele=["script","style","iframe","meta","link","object","embed"];class tle{constructor(e){this.value=e}}const ub=!1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const nle={bubbles:{dur:1e3,circles:9,fn:(n,e,t)=>{const i="".concat(n*e/t-n,"ms"),s=2*Math.PI*e/t;return{r:5,style:{top:"".concat(32*Math.sin(s),"%"),left:"".concat(32*Math.cos(s),"%"),"animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(n,e,t)=>{const i=e/t,s="".concat(n*i-n,"ms"),r=2*Math.PI*i;return{r:5,style:{top:"".concat(32*Math.sin(r),"%"),left:"".concat(32*Math.cos(r),"%"),"animation-delay":s}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(n,e)=>{const t=-(110*e)+"ms";return{r:6,style:{left:"".concat(32-32*e,"%"),"animation-delay":t}}}},lines:{dur:1e3,lines:8,fn:(n,e,t)=>{const i="rotate(".concat(360/t*e+(e<t/2?180:-180),"deg)"),s="".concat(n*e/t-n,"ms");return{y1:14,y2:26,style:{transform:i,"animation-delay":s}}}},"lines-small":{dur:1e3,lines:8,fn:(n,e,t)=>{const i="rotate(".concat(360/t*e+(e<t/2?180:-180),"deg)"),s="".concat(n*e/t-n,"ms");return{y1:12,y2:20,style:{transform:i,"animation-delay":s}}}},"lines-sharp":{dur:1e3,lines:12,fn:(n,e,t)=>{const i="rotate(".concat(30*e+(e<6?180:-180),"deg)"),s="".concat(n*e/t-n,"ms");return{y1:17,y2:29,style:{transform:i,"animation-delay":s}}}},"lines-sharp-small":{dur:1e3,lines:12,fn:(n,e,t)=>{const i="rotate(".concat(30*e+(e<6?180:-180),"deg)"),s="".concat(n*e/t-n,"ms");return{y1:12,y2:20,style:{transform:i,"animation-delay":s}}}}},uT=nle,ile=":host{display:inline-block;position:relative;width:28px;height:28px;color:var(--color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.ion-color){color:var(--ion-color-base)}svg{-webkit-transform-origin:center;transform-origin:center;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0)}:host-context([dir=rtl]) svg{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}[dir=rtl] svg{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}@supports selector(:dir(rtl)){svg:dir(rtl){-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}}:host(.spinner-lines) line,:host(.spinner-lines-small) line{stroke-width:7px}:host(.spinner-lines-sharp) line,:host(.spinner-lines-sharp-small) line{stroke-width:4px}:host(.spinner-lines) line,:host(.spinner-lines-small) line,:host(.spinner-lines-sharp) line,:host(.spinner-lines-sharp-small) line{stroke-linecap:round;stroke:currentColor}:host(.spinner-lines) svg,:host(.spinner-lines-small) svg,:host(.spinner-lines-sharp) svg,:host(.spinner-lines-sharp-small) svg{-webkit-animation:spinner-fade-out 1s linear infinite;animation:spinner-fade-out 1s linear infinite}:host(.spinner-bubbles) svg{-webkit-animation:spinner-scale-out 1s linear infinite;animation:spinner-scale-out 1s linear infinite;fill:currentColor}:host(.spinner-circles) svg{-webkit-animation:spinner-fade-out 1s linear infinite;animation:spinner-fade-out 1s linear infinite;fill:currentColor}:host(.spinner-crescent) circle{fill:transparent;stroke-width:4px;stroke-dasharray:128px;stroke-dashoffset:82px;stroke:currentColor}:host(.spinner-crescent) svg{-webkit-animation:spinner-rotate 1s linear infinite;animation:spinner-rotate 1s linear infinite}:host(.spinner-dots) circle{stroke-width:0;fill:currentColor}:host(.spinner-dots) svg{-webkit-animation:spinner-dots 1s linear infinite;animation:spinner-dots 1s linear infinite}:host(.spinner-circular) svg{-webkit-animation:spinner-circular linear infinite;animation:spinner-circular linear infinite}:host(.spinner-circular) circle{-webkit-animation:spinner-circular-inner ease-in-out infinite;animation:spinner-circular-inner ease-in-out infinite;stroke:currentColor;stroke-dasharray:80px, 200px;stroke-dashoffset:0px;stroke-width:5.6;fill:none}:host(.spinner-paused),:host(.spinner-paused) svg,:host(.spinner-paused) circle{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes spinner-fade-out{0%{opacity:1}100%{opacity:0}}@keyframes spinner-fade-out{0%{opacity:1}100%{opacity:0}}@-webkit-keyframes spinner-scale-out{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1)}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}}@keyframes spinner-scale-out{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1)}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}}@-webkit-keyframes spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-dots{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}50%{-webkit-transform:scale(0.4, 0.4);transform:scale(0.4, 0.4);opacity:0.3}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}}@keyframes spinner-dots{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}50%{-webkit-transform:scale(0.4, 0.4);transform:scale(0.4, 0.4);opacity:0.3}100%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:0.9}}@-webkit-keyframes spinner-circular{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-circular{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-circular-inner{0%{stroke-dasharray:1px, 200px;stroke-dashoffset:0px}50%{stroke-dasharray:100px, 200px;stroke-dashoffset:-15px}100%{stroke-dasharray:100px, 200px;stroke-dashoffset:-125px}}@keyframes spinner-circular-inner{0%{stroke-dasharray:1px, 200px;stroke-dashoffset:0px}50%{stroke-dasharray:100px, 200px;stroke-dashoffset:-15px}100%{stroke-dasharray:100px, 200px;stroke-dashoffset:-125px}}",sle=ile,rle=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0,this.duration=void 0,this.name=void 0,this.paused=!1}getName(){const e=this.name||Zt.get("spinner"),t=Tt(this);return e||(t==="ios"?"lines":"circular")}render(){var e;const t=this,i=Tt(t),s=t.getName(),r=(e=uT[s])!==null&&e!==void 0?e:uT.lines,o=typeof t.duration=="number"&&t.duration>10?t.duration:r.dur,a=[];if(r.circles!==void 0)for(let l=0;l<r.circles;l++)a.push(ole(r,o,l,r.circles));else if(r.lines!==void 0)for(let l=0;l<r.lines;l++)a.push(ale(r,o,l,r.lines));return q(Yt,{key:"9d30ee9f5aa0dd0e220da07e75d05b8b2435224d",class:ds(t.color,{[i]:!0,["spinner-".concat(s)]:!0,"spinner-paused":t.paused||Zt.getBoolean("_testing")}),role:"progressbar",style:r.elmDuration?{animationDuration:o+"ms"}:{}},a)}static get style(){return sle}},[1,"ion-spinner",{color:[513],duration:[2],name:[1],paused:[4]}]),ole=(n,e,t,i)=>{const s=n.fn(e,t,i);return s.style["animation-duration"]=e+"ms",q("svg",{viewBox:s.viewBox||"0 0 64 64",style:s.style},q("circle",{transform:s.transform||"translate(32,32)",cx:s.cx,cy:s.cy,r:s.r,style:n.elmDuration?{animationDuration:e+"ms"}:{}}))},ale=(n,e,t,i)=>{const s=n.fn(e,t,i);return s.style["animation-duration"]=e+"ms",q("svg",{viewBox:s.viewBox||"0 0 64 64",style:s.style},q("line",{transform:"translate(32,32)",y1:s.y1,y2:s.y2}))};function fx(){if(typeof customElements>"u")return;["ion-spinner"].forEach(e=>{switch(e){case"ion-spinner":customElements.get(e)||customElements.define(e,rle);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lle="ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:4px;margin-bottom:0}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-ios .infinite-loading-text{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-small-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}",cle=lle,dle="ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:4px;margin-bottom:0}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-md .infinite-loading-text{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-small-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.infinite-scroll-content-md .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}",ule=dle,hle=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.customHTMLEnabled=Zt.get("innerHTMLTemplatesEnabled",ub),this.loadingSpinner=void 0,this.loadingText=void 0}componentDidLoad(){if(this.loadingSpinner===void 0){const e=Tt(this);this.loadingSpinner=Zt.get("infiniteLoadingSpinner",Zt.get("spinner",e==="ios"?"lines":"crescent"))}}renderLoadingText(){const{customHTMLEnabled:e,loadingText:t}=this;return e?q("div",{class:"infinite-loading-text",innerHTML:wp(t)}):q("div",{class:"infinite-loading-text"},this.loadingText)}render(){const e=Tt(this);return q(Yt,{key:"7c16060dcfe2a0b0fb3e2f8f4c449589a76f1baa",class:{[e]:!0,["infinite-scroll-content-".concat(e)]:!0}},q("div",{key:"a94f4d8746e053dc718f97520bd7e48cb316443a",class:"infinite-loading"},this.loadingSpinner&&q("div",{key:"10143d5d2a50a2a2bc5de1cee8e7ab51263bcf23",class:"infinite-loading-spinner"},q("ion-spinner",{key:"8846e88191690d9c61a0b462889ed56fbfed8b0d",name:this.loadingSpinner})),this.loadingText!==void 0&&this.renderLoadingText()))}static get style(){return{ios:cle,md:ule}}},[32,"ion-infinite-scroll-content",{loadingSpinner:[1025,"loading-spinner"],loadingText:[1,"loading-text"]}]);function fle(){if(typeof customElements>"u")return;["ion-infinite-scroll-content","ion-spinner"].forEach(e=>{switch(e){case"ion-infinite-scroll-content":customElements.get(e)||customElements.define(e,hle);break;case"ion-spinner":customElements.get(e)||fx();break}})}const ple=fle;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const dN=(n,e,t)=>{let i;const s=()=>!(e()===void 0||n.label!==void 0||t()===null),r=()=>{s()&&Qn(()=>{o()})},o=()=>{const l=e();if(l===void 0)return;if(!s()){l.style.removeProperty("width");return}const c=t().scrollWidth;if(c===0&&l.offsetParent===null&&xi!==void 0&&"IntersectionObserver"in xi){if(i!==void 0)return;const d=i=new IntersectionObserver(u=>{u[0].intersectionRatio===1&&(o(),d.disconnect(),i=void 0)},{threshold:.01,root:n});d.observe(l);return}l.style.setProperty("width","".concat(c*.75,"px"))};return{calculateNotchWidth:r,destroy:()=>{i&&(i.disconnect(),i=void 0)}}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const uN=(n,e,t)=>{let i,s;if(xi!==void 0&&"MutationObserver"in xi){const l=Array.isArray(e)?e:[e];i=new MutationObserver(c=>{for(const d of c)for(const u of d.addedNodes)if(u.nodeType===Node.ELEMENT_NODE&&l.includes(u.slot)){t(),Qn(()=>r(u));return}}),i.observe(n,{childList:!0,subtree:!0})}const r=l=>{var c;s&&(s.disconnect(),s=void 0),s=new MutationObserver(d=>{t();for(const u of d)for(const h of u.removedNodes)h.nodeType===Node.ELEMENT_NODE&&h.slot===e&&a()}),s.observe((c=l.parentElement)!==null&&c!==void 0?c:l,{subtree:!0,childList:!0})},o=()=>{i&&(i.disconnect(),i=void 0),a()},a=()=>{s&&(s.disconnect(),s=void 0)};return{destroy:o}},hN=(n,e,t)=>{const i=n==null?0:n.toString().length,s=mle(i,e);if(t===void 0)return s;try{return t(i,e)}catch(r){return Pf("Exception in provided `counterFormatter`.",r),s}},mle=(n,e)=>"".concat(n," / ").concat(e);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const gle=".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-ios-h,ion-item [slot=start].sc-ion-input-ios-h,ion-item[slot=end].sc-ion-input-ios-h,ion-item [slot=end].sc-ion-input-ios-h{width:auto}.ion-color.sc-ion-input-ios-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-ios-h,.input-label-placement-stacked.sc-ion-input-ios-h{min-height:56px}.native-input.sc-ion-input-ios{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.cloned-input.sc-ion-input-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-ios{inset-inline-start:0}.cloned-input.sc-ion-input-ios:disabled{opacity:1}.input-clear-icon.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{color:inherit}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.input-wrapper.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-ios-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-input-ios-h,.ion-touched.ion-invalid.sc-ion-input-ios-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .error-text.sc-ion-input-ios{display:block}.ion-touched.ion-invalid.sc-ion-input-ios-h .input-bottom.sc-ion-input-ios .helper-text.sc-ion-input-ios{display:none}.input-bottom.sc-ion-input-ios .counter.sc-ion-input-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-ios{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-ios,.sc-ion-input-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-ios,.input-outline-notch-hidden.sc-ion-input-ios{display:none}.input-wrapper.sc-ion-input-ios input.sc-ion-input-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-ios-h .label-text.sc-ion-input-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .input-wrapper.sc-ion-input-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-stacked.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h -no-combinator.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl].input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios,[dir=rtl] .input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h:dir(rtl) .label-text-wrapper.sc-ion-input-ios{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-ios-h input.sc-ion-input-ios,.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios,.has-value.input-label-placement-floating.sc-ion-input-ios-h input.sc-ion-input-ios{opacity:1}.label-floating.sc-ion-input-ios-h .label-text-wrapper.sc-ion-input-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-ios-h[disabled].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[disabled] .sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly].sc-ion-input-ios-s>ion-input-password-toggle,.sc-ion-input-ios-h[readonly] .sc-ion-input-ios-s>ion-input-password-toggle{display:none}.sc-ion-input-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--highlight-height:0px;font-size:inherit}.input-clear-icon.sc-ion-input-ios ion-icon.sc-ion-input-ios{width:18px;height:18px}.input-disabled.sc-ion-input-ios-h{opacity:0.3}.sc-ion-input-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}",ble=gle,vle=".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0px;--padding-end:0px;--padding-bottom:0px;--padding-start:0px;--background:transparent;--color:initial;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;padding:0 !important;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item[slot=start].sc-ion-input-md-h,ion-item [slot=start].sc-ion-input-md-h,ion-item[slot=end].sc-ion-input-md-h,ion-item [slot=end].sc-ion-input-md-h{width:auto}.ion-color.sc-ion-input-md-h{--highlight-color-focused:var(--ion-color-base)}.input-label-placement-floating.sc-ion-input-md-h,.input-label-placement-stacked.sc-ion-input-md-h{min-height:56px}.native-input.sc-ion-input-md{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;z-index:1}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.cloned-input.sc-ion-input-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-input-md{inset-inline-start:0}.cloned-input.sc-ion-input-md:disabled{opacity:1}.input-clear-icon.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:30px;height:30px;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.in-item-color.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{color:inherit}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.input-wrapper.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:stretch;align-items:stretch;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;width:100%}.ion-touched.ion-invalid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-input-md-h{--highlight-color:var(--highlight-color-valid)}.input-bottom.sc-ion-input-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:none;color:var(--highlight-color-invalid)}.input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .error-text.sc-ion-input-md{display:block}.ion-touched.ion-invalid.sc-ion-input-md-h .input-bottom.sc-ion-input-md .helper-text.sc-ion-input-md{display:none}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.has-focus.sc-ion-input-md-h input.sc-ion-input-md{caret-color:var(--highlight-color)}.label-text-wrapper.sc-ion-input-md{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-input-md,.sc-ion-input-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-input-md,.input-outline-notch-hidden.sc-ion-input-md{display:none}.input-wrapper.sc-ion-input-md input.sc-ion-input-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.input-label-placement-start.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row;flex-direction:row}.input-label-placement-start.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-end.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.input-label-placement-end.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.input-label-placement-fixed.sc-ion-input-md-h .label-text.sc-ion-input-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.input-label-placement-stacked.sc-ion-input-md-h .input-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;max-width:100%;z-index:2}[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:1px;margin-bottom:0}.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:0}.has-focus.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md,.has-value.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{opacity:1}.label-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.sc-ion-input-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-input-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-input-md-h[disabled].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[disabled] .sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly].sc-ion-input-md-s>ion-input-password-toggle,.sc-ion-input-md-h[readonly] .sc-ion-input-md-s>ion-input-password-toggle{display:none}.input-fill-solid.sc-ion-input-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.input-fill-solid.ion-valid.sc-ion-input-md-h,.input-fill-solid.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-fill-solid.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}@media (any-hover: hover){.input-fill-solid.sc-ion-input-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-solid.has-focus.sc-ion-input-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.input-fill-solid.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.input-fill-solid.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{max-width:calc(100% / 0.75)}.input-fill-outline.sc-ion-input-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.input-fill-outline.input-shape-round.sc-ion-input-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h,.input-fill-outline.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.input-fill-outline.sc-ion-input-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.input-fill-outline.has-focus.sc-ion-input-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.input-fill-outline.sc-ion-input-md-h .input-bottom.sc-ion-input-md{border-top:none}.input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h -no-combinator.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl].input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,[dir=rtl] .input-fill-outline.input-label-placement-floating.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h:dir(rtl) .label-text-wrapper.sc-ion-input-md{-webkit-transform-origin:right top;transform-origin:right top}}.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{position:relative}.label-floating.input-fill-outline.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc((100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75)}.input-fill-outline.input-label-placement-stacked.sc-ion-input-md-h input.sc-ion-input-md,.input-fill-outline.input-label-placement-floating.sc-ion-input-md-h input.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:6px;margin-bottom:6px}.input-fill-outline.sc-ion-input-md-h .input-outline-container.sc-ion-input-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{pointer-events:none}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md,.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.input-fill-outline.sc-ion-input-md-h .notch-spacer.sc-ion-input-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.input-fill-outline.sc-ion-input-md-h .input-outline-start.sc-ion-input-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.input-fill-outline.sc-ion-input-md-h .input-outline-end.sc-ion-input-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.input-fill-outline.sc-ion-input-md-h .input-outline-notch.sc-ion-input-md{border-top:none}.sc-ion-input-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--highlight-height:2px;font-size:inherit}.input-clear-icon.sc-ion-input-md ion-icon.sc-ion-input-md{width:22px;height:22px}.input-disabled.sc-ion-input-md-h{opacity:0.38}.has-focus.ion-valid.sc-ion-input-md-h,.ion-touched.ion-invalid.sc-ion-input-md-h{--border-color:var(--highlight-color)}.input-bottom.sc-ion-input-md .counter.sc-ion-input-md{letter-spacing:0.0333333333em}.input-label-placement-floating.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.has-focus.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.has-focus.input-label-placement-floating.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-floating.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.has-focus.input-label-placement-stacked.ion-valid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md,.input-label-placement-stacked.ion-touched.ion-invalid.sc-ion-input-md-h .label-text-wrapper.sc-ion-input-md{color:var(--highlight-color)}.input-highlight.sc-ion-input-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.input-highlight.sc-ion-input-md{inset-inline-start:0}.has-focus.sc-ion-input-md-h .input-highlight.sc-ion-input-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{bottom:0}.in-item.sc-ion-input-md-h .input-highlight.sc-ion-input-md{inset-inline-start:0}.input-shape-round.sc-ion-input-md-h{--border-radius:16px}.sc-ion-input-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-input-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}",yle=vle,wle=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionInput=at(this,"ionInput",7),this.ionChange=at(this,"ionChange",7),this.ionBlur=at(this,"ionBlur",7),this.ionFocus=at(this,"ionFocus",7),this.inputId="ion-input-".concat(xle++),this.helperTextId="".concat(this.inputId,"-helper-text"),this.errorTextId="".concat(this.inputId,"-error-text"),this.inheritedAttributes={},this.isComposing=!1,this.didInputClearOnEdit=!1,this.onInput=e=>{const t=e.target;t&&(this.value=t.value||""),this.emitInputChange(e)},this.onChange=e=>{this.emitValueChange(e)},this.onBlur=e=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(e),this.didInputClearOnEdit=!1,this.ionBlur.emit(e)},this.onFocus=e=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(e)},this.onKeydown=e=>{this.checkClearOnEdit(e)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=e=>{this.clearInput&&!this.readonly&&!this.disabled&&e&&(e.preventDefault(),e.stopPropagation(),this.setFocus()),this.value="",this.emitInputChange(e)},this.hasFocus=!1,this.color=void 0,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.clearInputIcon=void 0,this.clearOnEdit=void 0,this.counter=!1,this.counterFormatter=void 0,this.debounce=void 0,this.disabled=!1,this.enterkeyhint=void 0,this.errorText=void 0,this.fill=void 0,this.inputmode=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.max=void 0,this.maxlength=void 0,this.min=void 0,this.minlength=void 0,this.multiple=void 0,this.name=this.inputId,this.pattern=void 0,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.shape=void 0,this.spellcheck=!1,this.step=void 0,this.type="text",this.value=""}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i!=null?i:e:gM(e,t)}onTypeChange(){const e=this.el.querySelector("ion-input-password-toggle");e&&(e.type=this.type)}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&!this.isComposing&&(e.value=t)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},Kd(this.el)),Fc(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){const{el:e}=this;this.slotMutationController=uN(e,["label","start","end"],()=>kc(this)),this.notchController=dN(e,()=>this.notchSpacerEl,()=>this.labelSlot),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){this.originalIonInput=this.ionInput,this.onTypeChange(),this.debounceChanged()}componentDidRender(){var e;(e=this.notchController)===null||e===void 0||e.calculateNotchWidth()}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async getInputElement(){return this.nativeInput||await new Promise(e=>Ra(this.el,e)),Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,i=t==null?t:t.toString();this.focusedValue=i,this.ionChange.emit({value:i,event:e})}emitInputChange(e){const{value:t}=this,i=t==null?t:t.toString();this.ionInput.emit({value:i,event:e})}shouldClearOnEdit(){const{type:e,clearOnEdit:t}=this;return t===void 0?e==="password":t}getValue(){return typeof this.value=="number"?this.value.toString():(this.value||"").toString()}checkClearOnEdit(e){if(!this.shouldClearOnEdit())return;const i=["Enter","Tab","Shift","Meta","Alt","Control"].includes(e.key);!this.didInputClearOnEdit&&this.hasValue()&&!i&&(this.value="",this.emitInputChange(e)),i||(this.didInputClearOnEdit=!0)}hasValue(){return this.getValue().length>0}renderHintText(){const{helperText:e,errorText:t,helperTextId:i,errorTextId:s}=this;return[q("div",{id:i,class:"helper-text"},e),q("div",{id:s,class:"error-text"},t)]}getHintTextID(){const{el:e,helperText:t,errorText:i,helperTextId:s,errorTextId:r}=this;if(e.classList.contains("ion-touched")&&e.classList.contains("ion-invalid")&&i)return r;if(t)return s}renderCounter(){const{counter:e,maxlength:t,counterFormatter:i,value:s}=this;if(!(e!==!0||t===void 0))return q("div",{class:"counter"},hN(s,t,i))}renderBottomContent(){const{counter:e,helperText:t,errorText:i,maxlength:s}=this;if(!(!(t||i)&&!(e===!0&&s!==void 0)))return q("div",{class:"input-bottom"},this.renderHintText(),this.renderCounter())}renderLabel(){const{label:e}=this;return q("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},e===void 0?q("slot",{name:"label"}):q("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return this.label!==void 0||this.labelSlot!==null}renderLabelContainer(){return Tt(this)==="md"&&this.fill==="outline"?[q("div",{class:"input-outline-container"},q("div",{class:"input-outline-start"}),q("div",{class:{"input-outline-notch":!0,"input-outline-notch-hidden":!this.hasLabel}},q("div",{class:"notch-spacer","aria-hidden":"true",ref:i=>this.notchSpacerEl=i},this.label)),q("div",{class:"input-outline-end"})),this.renderLabel()]:this.renderLabel()}render(){const{disabled:e,fill:t,readonly:i,shape:s,inputId:r,labelPlacement:o,el:a,hasFocus:l,clearInputIcon:c}=this,d=Tt(this),u=this.getValue(),h=ts("ion-item",this.el),f=d==="md"&&t!=="outline"&&!h,m=d==="ios"?Nne:Fne,g=c!=null?c:m,b=this.hasValue(),w=a.querySelector('[slot="start"], [slot="end"]')!==null,x=o==="stacked"||o==="floating"&&(b||l||w);return q(Yt,{key:"54b5662d9a7f011a85e4119650c92b9af275bf96",class:ds(this.color,{[d]:!0,"has-value":b,"has-focus":l,"label-floating":x,["input-fill-".concat(t)]:t!==void 0,["input-shape-".concat(s)]:s!==void 0,["input-label-placement-".concat(o)]:!0,"in-item":h,"in-item-color":ts("ion-item.ion-color",this.el),"input-disabled":e})},q("label",{key:"551cf8a932af3275689ecf32988b84355404e8f1",class:"input-wrapper",htmlFor:r},this.renderLabelContainer(),q("div",{key:"b3601dca7e0f23517748f6e7feb899c953355bc4",class:"native-wrapper"},q("slot",{key:"d687a9bb4c5778cfee35ce1b8d6d16ddc8eca768",name:"start"}),q("input",Object.assign({key:"ab927e84e43bedf8b7827bb743888a1778292deb",class:"native-input",ref:k=>this.nativeInput=k,id:r,disabled:e,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:i,required:this.required,spellcheck:this.spellcheck,step:this.step,type:this.type,value:u,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown,onCompositionstart:this.onCompositionStart,onCompositionend:this.onCompositionEnd,"aria-describedby":this.getHintTextID(),"aria-invalid":this.getHintTextID()===this.errorTextId},this.inheritedAttributes)),this.clearInput&&!i&&!e&&q("button",{key:"0d2ee3f7e69cee75f071f37b2e9bc174572c5a01","aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:k=>{k.preventDefault()},onFocusin:k=>{k.stopPropagation()},onClick:this.clearTextInput},q("ion-icon",{key:"c7715111897f43839c10d38662616edb662cd49b","aria-hidden":"true",icon:g})),q("slot",{key:"afc44cbe1ad50f17942d5297a12509abecbd6ecd",name:"end"})),f&&q("div",{key:"ee3af32cd9003d497f33e352e56313d43295f3a9",class:"input-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"]}}static get style(){return{ios:ble,md:yle}}},[38,"ion-input",{color:[513],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearInputIcon:[1,"clear-input-icon"],clearOnEdit:[4,"clear-on-edit"],counter:[4],counterFormatter:[16],debounce:[2],disabled:[516],enterkeyhint:[1],errorText:[1,"error-text"],fill:[1],inputmode:[1],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[516],required:[4],shape:[1],spellcheck:[4],step:[1],type:[1],value:[1032],hasFocus:[32],setFocus:[64],getInputElement:[64]},void 0,{debounce:["debounceChanged"],type:["onTypeChange"],value:["valueChanged"]}]);let xle=0;function _le(){if(typeof customElements>"u")return;["ion-input","ion-icon"].forEach(e=>{switch(e){case"ion-input":customElements.get(e)||customElements.define(e,wle);break;case"ion-icon":customElements.get(e)||$l();break}})}const kle=_le;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ele="",Tle=Ele,Cle="",Sle=Cle,Ale=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.togglePasswordVisibility=()=>{const{inputElRef:e}=this;e&&(e.type=e.type==="text"?"password":"text")},this.color=void 0,this.showIcon=void 0,this.hideIcon=void 0,this.type="password"}onTypeChange(e){if(e!=="text"&&e!=="password"){pi('ion-input-password-toggle only supports inputs of type "text" or "password". Input of type "'.concat(e,'" is not compatible.'),this.el);return}}connectedCallback(){const{el:e}=this,t=this.inputElRef=e.closest("ion-input");if(!t){pi("No ancestor ion-input found for ion-input-password-toggle. This component must be slotted inside of an ion-input.",e);return}this.type=t.type}disconnectedCallback(){this.inputElRef=null}render(){var e,t;const{color:i,type:s}=this,r=Tt(this),o=(e=this.showIcon)!==null&&e!==void 0?e:Bne,a=(t=this.hideIcon)!==null&&t!==void 0?t:Vne,l=s==="text";return q(Yt,{key:"d9811e25bfeb2aa197352bb9be852e9e420739d5",class:ds(i,{[r]:!0})},q("ion-button",{key:"1eaea1442b248fb2b8d61538b27274e647a07804",mode:r,color:i,fill:"clear",shape:"round","aria-checked":l?"true":"false","aria-label":"show password",role:"switch",type:"button",onPointerDown:c=>{c.preventDefault()},onClick:this.togglePasswordVisibility},q("ion-icon",{key:"9c88de8f4631d9bde222ce2edf6950d639e04773",slot:"icon-only","aria-hidden":"true",icon:l?a:o})))}get el(){return this}static get watchers(){return{type:["onTypeChange"]}}static get style(){return{ios:Tle,md:Sle}}},[33,"ion-input-password-toggle",{color:[513],showIcon:[1,"show-icon"],hideIcon:[1,"hide-icon"],type:[1025]},void 0,{type:["onTypeChange"]}]);function Ile(){if(typeof customElements>"u")return;["ion-input-password-toggle","ion-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-input-password-toggle":customElements.get(e)||customElements.define(e,Ale);break;case"ion-button":customElements.get(e)||QS();break;case"ion-icon":customElements.get(e)||$l();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Ple=Ile;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Rle=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:var(--ion-text-color, #000);--background-focused:var(--ion-text-color, #000);--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--color:var(--ion-item-color, var(--ion-text-color, #000));font-size:1rem}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px}::slotted([slot=start]){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:2px;margin-bottom:2px}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:1px;--padding-bottom:1px;--padding-start:.5em;--padding-end:.5em;min-height:24px;font-size:0.8125rem}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px;margin-bottom:8px}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){-webkit-margin-start:0px;margin-inline-start:0px}::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:10px;margin-bottom:10px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}',$le=Rle,Lle=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--detail-icon-color:initial;--detail-icon-font-size:1.25em;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color) .item-native,:host(.ion-color) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-control-needs-pointer-cursor){cursor:pointer}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-right:var(--padding-end);padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}[dir=rtl] .item-native{padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}@supports selector(:dir(rtl)){.item-native:dir(rtl){padding-right:calc(var(--padding-start) + var(--ion-safe-area-right, 0px));padding-left:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-left:var(--inner-padding-start);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host-context([dir=rtl]) .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}[dir=rtl] .item-inner{padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}@supports selector(:dir(rtl)){.item-inner:dir(rtl){padding-right:var(--inner-padding-start);padding-left:calc(var(--ion-safe-area-left, 0px) + var(--inner-padding-end))}}.item-detail-icon{-webkit-margin-start:calc(var(--inner-padding-end) / 2);margin-inline-start:calc(var(--inner-padding-end) / 2);-webkit-margin-end:-6px;margin-inline-end:-6px;color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:100%}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;font-size:1rem;font-weight:normal;text-transform:none}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0}:host(.item-lines-full){--border-width:0 0 1px 0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted([slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:1.5em}:host(.ion-color) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){-webkit-margin-end:32px;margin-inline-end:32px}::slotted(ion-icon[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:0.6875rem}::slotted(ion-note[slot]){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){--size:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){-webkit-margin-end:16px;margin-inline-end:16px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){-webkit-margin-start:16px;margin-inline-start:16px}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0}::slotted(.button-small){--padding-top:2px;--padding-bottom:2px;--padding-start:.6em;--padding-end:.6em;min-height:25px;font-size:0.75rem}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #0054e9)}',Ole=Lle,Dle=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.inheritedAriaAttributes={},this.multipleInputs=!1,this.focusable=!0,this.color=void 0,this.button=!1,this.detail=void 0,this.detailIcon=Cy,this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.lines=void 0,this.routerAnimation=void 0,this.routerDirection="forward",this.target=void 0,this.type="button"}buttonChanged(){this.focusable=this.isFocusable()}labelColorChanged(e){const{color:t}=this;t===void 0&&(this.labelColorStyles=e.detail)}itemStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,s={},r=this.itemStyles.get(t)||{};let o=!1;Object.keys(i).forEach(a=>{if(i[a]){const l="item-".concat(a);r[l]||(o=!0),s[l]=!0}}),!o&&Object.keys(s).length!==Object.keys(r).length&&(o=!0),o&&(this.itemStyles.set(t,s),kc(this))}connectedCallback(){this.hasStartEl()}componentWillLoad(){this.inheritedAriaAttributes=Fc(this.el,["aria-label"])}componentDidLoad(){Qn(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const e=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),t=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),i=this.el.querySelectorAll("ion-router-link, ion-button, a, button");this.multipleInputs=e.length+t.length>1||e.length+i.length>1||e.length>0&&this.isClickable()}hasCover(){return this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length===1&&!this.multipleInputs}isClickable(){return this.href!==void 0||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const e=this.el.querySelector(".ion-focusable");return this.canActivate()||e!==null}hasStartEl(){this.el.querySelector('[slot="start"]')!==null&&this.el.classList.add("item-has-start-slot")}getFirstInteractive(){return this.el.querySelectorAll("ion-toggle:not([disabled]), ion-checkbox:not([disabled]), ion-radio:not([disabled]), ion-select:not([disabled]), ion-input:not([disabled]), ion-textarea:not([disabled])")[0]}render(){const{detail:e,detailIcon:t,download:i,labelColorStyles:s,lines:r,disabled:o,href:a,rel:l,target:c,routerAnimation:d,routerDirection:u,inheritedAriaAttributes:h,multipleInputs:f}=this,m={},g=Tt(this),b=this.isClickable(),w=this.canActivate(),x=b?a===void 0?"button":"a":"div",k=x==="button"?{type:this.type}:{download:i,href:a,rel:l,target:c};let E={};const T=this.getFirstInteractive();(b||T!==void 0&&!f)&&(E={onClick:M=>{if(b&&rx(a,M,u,d),T!==void 0&&!f){const U=M.composedPath()[0];M.isTrusted&&this.el.shadowRoot.contains(U)&&(T.tagName==="ION-INPUT"||T.tagName==="ION-TEXTAREA"?T.setFocus():T.click())}}});const P=e!==void 0?e:g==="ios"&&b;this.itemStyles.forEach(M=>{Object.assign(m,M)});const C=o||m["item-interactive-disabled"]?"true":null,A=ts("ion-list",this.el)&&!ts("ion-radio-group",this.el),R=T!==void 0&&!["ION-INPUT","ION-TEXTAREA"].includes(T.tagName);return q(Yt,{key:"02f540d8666146b5f2665ba6b39dfe774c65d5e6","aria-disabled":C,class:Object.assign(Object.assign(Object.assign({},m),s),ds(this.color,{item:!0,[g]:!0,"item-lines-default":r===void 0,["item-lines-".concat(r)]:r!==void 0,"item-control-needs-pointer-cursor":R,"item-disabled":o,"in-list":A,"item-multiple-inputs":this.multipleInputs,"ion-activatable":w,"ion-focusable":this.focusable,"item-rtl":document.dir==="rtl"})),role:A?"listitem":null},q(x,Object.assign({key:"91cf3eedc2d7eca40a45fc3b0aaae5a87d387eb7"},k,h,{class:"item-native",part:"native",disabled:o},E),q("slot",{key:"ae4c679ca903a78a7c933c1d02f21f5d677b6388",name:"start"}),q("div",{key:"a61de72dce135b6dce18e6fa19680524958924dd",class:"item-inner"},q("div",{key:"d5b09966b6de8d6b4da8e139875edec4eeb1ae27",class:"input-wrapper"},q("slot",{key:"79077e5708a1783b135fab6f8caff9fb2f6f387a"})),q("slot",{key:"cdcc71689a87e985d32170ab98538ef25227f384",name:"end"}),P&&q("ion-icon",{key:"1e82f2d0e2d2fc18bd3429a7c72e4e57447cad7a",icon:t,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":t===Cy})),w&&g==="md"&&q("ion-ripple-effect",{key:"ab9842d0d9c64408573f07323e10f9ed29fbe6e2"})))}get el(){return this}static get watchers(){return{button:["buttonChanged"]}}static get style(){return{ios:$le,md:Ole}}},[33,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[516],download:[1],href:[1],rel:[1],lines:[1],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],multipleInputs:[32],focusable:[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{button:["buttonChanged"]}]);function Mle(){if(typeof customElements>"u")return;["ion-item","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-item":customElements.get(e)||customElements.define(e,Dle);break;case"ion-icon":customElements.get(e)||$l();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Nle=Mle;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Fle=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-nowrap.sc-ion-label-ios-h{overflow:hidden}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.item-skeleton-text.sc-ion-label-ios-h,.item-skeleton-text .sc-ion-label-ios-h{overflow:hidden}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h{font-size:0.875rem;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:0.875rem}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.label-floating.sc-ion-label-ios-h:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:1.375rem;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.0625rem;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:0.875rem;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999))}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",Ble=Fle,Vle=".item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-nowrap.sc-ion-label-md-h{overflow:hidden}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.item-skeleton-text.sc-ion-label-md-h,.item-skeleton-text .sc-ion-label-md-h{overflow:hidden}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #0054e9)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;line-height:1.25rem;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666))}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}",Ule=Vle,zle=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionColor=at(this,"ionColor",7),this.ionStyle=at(this,"ionStyle",7),this.inRange=!1,this.color=void 0,this.position=void 0,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:e}=this;this.ionColor.emit({"item-label-color":e!==void 0,["ion-color-".concat(e)]:e!==void 0})}emitStyle(){const{inRange:e,position:t}=this;e||this.ionStyle.emit({label:!0,["label-".concat(t)]:t!==void 0})}render(){const e=this.position,t=Tt(this);return q(Yt,{key:"6353a70565ef6fbbbf4042b000e536c61bcf99a9",class:ds(this.color,{[t]:!0,"in-item-color":ts("ion-item.ion-color",this.el),["label-".concat(e)]:e!==void 0,"label-no-animate":this.noAnimate,"label-rtl":document.dir==="rtl"})},q("slot",{key:"6ef9c2758c0168442aa84941af0a6cec1ef1ec21"}))}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:Ble,md:Ule}}},[38,"ion-label",{color:[513],position:[1],noAnimate:[32]},void 0,{color:["colorChanged"],position:["positionChanged"]}]);function Hle(){if(typeof customElements>"u")return;["ion-label"].forEach(e=>{switch(e){case"ion-label":customElements.get(e)||customElements.define(e,zle);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jle=Hle;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Gle="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}.list-ios.list-inset ion-item:only-child,.list-ios.list-inset ion-item:not(:only-of-type):last-of-type,.list-ios.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-ios-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 0.55px 0}.list-ios-lines-inset .item-lines-default{--inner-border-width:0 0 0.55px 0;--border-width:0px}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",Wle=Gle,qle="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-md>.input:last-child::after{inset-inline-start:0}.list-md.list-inset{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}.list-md.list-inset ion-item:not(:only-of-type):last-of-type,.list-md.list-inset ion-item-sliding:last-of-type ion-item{--border-width:0;--inner-border-width:0}.list-md.list-inset ion-item:only-child{--border-width:0;--inner-border-width:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item-lines-default{--inner-border-width:0px;--border-width:0px}.list-md-lines-full .item-lines-default{--inner-border-width:0px;--border-width:0 0 1px 0}.list-md-lines-inset .item-lines-default{--inner-border-width:0 0 1px 0;--border-width:0px}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",Kle=qle,Yle=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.lines=void 0,this.inset=!1}async closeSlidingItems(){const e=this.el.querySelector("ion-item-sliding");return e!=null&&e.closeOpened?e.closeOpened():!1}render(){const e=Tt(this),{lines:t,inset:i}=this;return q(Yt,{key:"5ff2b0b3989cc99ce17abb8bcd7ec1847940d1ec",role:"list",class:{[e]:!0,["list-".concat(e)]:!0,"list-inset":i,["list-lines-".concat(t)]:t!==void 0,["list-".concat(e,"-lines-").concat(t)]:t!==void 0}})}get el(){return this}static get style(){return{ios:Wle,md:Kle}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function Xle(){if(typeof customElements>"u")return;["ion-list"].forEach(e=>{switch(e){case"ion-list":customElements.get(e)||customElements.define(e,Yle);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Qle=Xle;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Md=(n,e,t,i,s)=>Jle(n[1],e[1],t[1],i[1],s).map(r=>Zle(n[0],e[0],t[0],i[0],r)),Zle=(n,e,t,i,s)=>{const r=3*e*Math.pow(s-1,2),o=-3*t*s+3*t+i*s,a=n*Math.pow(s-1,3);return s*(r+s*o)-a},Jle=(n,e,t,i,s)=>(n-=s,e-=s,t-=s,i-=s,tce(i-3*t+3*e-n,3*t-6*e+3*n,3*e-3*n,n).filter(o=>o>=0&&o<=1)),ece=(n,e,t)=>{const i=e*e-4*n*t;return i<0?[]:[(-e+Math.sqrt(i))/(2*n),(-e-Math.sqrt(i))/(2*n)]},tce=(n,e,t,i)=>{if(n===0)return ece(e,t,i);e/=n,t/=n,i/=n;const s=(3*t-e*e)/3,r=(2*e*e*e-9*e*t+27*i)/27;if(s===0)return[Math.pow(-r,1/3)];if(r===0)return[Math.sqrt(-s),-Math.sqrt(-s)];const o=Math.pow(r/2,2)+Math.pow(s/3,3);if(o===0)return[Math.pow(r/2,1/2)-e/3];if(o>0)return[Math.pow(-(r/2)+Math.sqrt(o),1/3)-Math.pow(r/2+Math.sqrt(o),1/3)-e/3];const a=Math.sqrt(Math.pow(-(s/3),3)),l=Math.acos(-(r/(2*Math.sqrt(Math.pow(-(s/3),3))))),c=2*Math.pow(a,1/3);return[c*Math.cos(l/3)-e/3,c*Math.cos((l+2*Math.PI)/3)-e/3,c*Math.cos((l+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fA=n=>bt().duration(n?400:300),nce=n=>{let e,t;const i=n.width+8,s=bt(),r=bt();n.isEndSide?(e=i+"px",t="0px"):(e=-i+"px",t="0px"),s.addElement(n.menuInnerEl).fromTo("transform","translateX(".concat(e,")"),"translateX(".concat(t,")"));const a=Tt(n)==="ios",l=a?.2:.25;return r.addElement(n.backdropEl).fromTo("opacity",.01,l),fA(a).addAnimation([s,r])},ice=n=>{let e,t;const i=Tt(n),s=n.width;n.isEndSide?(e=-s+"px",t=s+"px"):(e=s+"px",t=-s+"px");const r=bt().addElement(n.menuInnerEl).fromTo("transform","translateX(".concat(t,")"),"translateX(0px)"),o=bt().addElement(n.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(e,")")),a=bt().addElement(n.backdropEl).fromTo("opacity",.01,.32);return fA(i==="ios").addAnimation([r,o,a])},sce=n=>{const e=Tt(n),t=n.width*(n.isEndSide?-1:1)+"px",i=bt().addElement(n.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(t,")"));return fA(e==="ios").addAnimation(i)},rce=()=>{const n=new Map,e=[],t=async C=>{const A=await c(C,!0);return A?A.open():!1},i=async C=>{const A=await(C!==void 0?c(C,!0):d());return A!==void 0?A.close():!1},s=async C=>{const A=await c(C,!0);return A?A.toggle():!1},r=async(C,A)=>{const R=await c(A);return R&&(R.disabled=!C),R},o=async(C,A)=>{const R=await c(A);return R&&(R.swipeGesture=C),R},a=async C=>{if(C!=null){const A=await c(C);return A!==void 0&&A.isOpen()}else return await d()!==void 0},l=async C=>{const A=await c(C);return A?!A.disabled:!1},c=async(C,A=!1)=>{if(await P(),C==="start"||C==="end"){const M=e.filter(U=>U.side===C&&!U.disabled);if(M.length>=1)return M.length>1&&A&&pi('menuController queried for a menu on the "'.concat(C,'" side, but ').concat(M.length," menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side."),M.map(U=>U.el)),M[0].el;const N=e.filter(U=>U.side===C);if(N.length>=1)return N.length>1&&A&&pi('menuController queried for a menu on the "'.concat(C,'" side, but ').concat(N.length," menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side."),N.map(U=>U.el)),N[0].el}else if(C!=null)return T(M=>M.menuId===C);const R=T(M=>!M.disabled);return R||(e.length>0?e[0].el:void 0)},d=async()=>(await P(),x()),u=async()=>(await P(),k()),h=async()=>(await P(),E()),f=(C,A)=>{n.set(C,A)},m=C=>{e.indexOf(C)<0&&e.push(C)},g=C=>{const A=e.indexOf(C);A>-1&&e.splice(A,1)},b=async(C,A,R,M)=>{if(E())return!1;if(A){const N=await d();N&&C.el!==N&&await N.setOpen(!1,!1)}return C._setOpen(A,R,M)},w=(C,A)=>{const R=n.get(C);if(!R)throw new Error("animation not registered");return R(A)},x=()=>T(C=>C._isOpen),k=()=>e.map(C=>C.el),E=()=>e.some(C=>C.isAnimating),T=C=>{const A=e.find(C);if(A!==void 0)return A.el},P=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(C=>new Promise(A=>Ra(C,A))));return f("reveal",sce),f("push",ice),f("overlay",nce),Kr==null||Kr.addEventListener("ionBackButton",C=>{const A=x();A&&C.detail.register(UM,()=>A.close())}),{registerAnimation:f,get:c,getMenus:u,getOpen:d,isEnabled:l,swipeGesture:o,isAnimating:h,isOpen:a,enable:r,toggle:s,close:i,open:t,_getOpenSync:x,_createAnimation:w,_register:m,_unregister:g,_setOpen:b}},pc=rce(),oce=":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{--ion-safe-area-right:unset;--ion-safe-area-left:0px}@supports selector(:dir(rtl)){:host(.menu-side-start:dir(rtl)) .menu-inner{--ion-safe-area-right:unset;--ion-safe-area-left:0px}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{--ion-safe-area-left:unset;--ion-safe-area-right:0px}@supports selector(:dir(rtl)){:host(.menu-side-end:dir(rtl)) .menu-inner{--ion-safe-area-left:unset;--ion-safe-area-right:0px}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){-ms-flex:0 1 auto;flex:0 1 auto;width:var(--side-width, var(--width));min-width:var(--side-min-width, var(--min-width));max-width:var(--side-max-width, var(--max-width))}:host(.menu-pane-visible.split-pane-side){left:0;right:0;top:0;bottom:0;position:relative;-webkit-box-shadow:none;box-shadow:none;z-index:0}:host(.menu-pane-visible.split-pane-side.menu-enabled){display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0}:host(.menu-pane-visible.split-pane-side){-ms-flex-order:-1;order:-1}:host(.menu-pane-visible.split-pane-side[side=end]){-ms-flex-order:1;order:1}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none;transform:none;-webkit-box-shadow:none;box-shadow:none}:host(.menu-pane-visible) ion-backdrop{display:hidden !important}:host(.menu-pane-visible.split-pane-side){-webkit-border-start:0;border-inline-start:0;-webkit-border-end:var(--border);border-inline-end:var(--border);border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.menu-pane-visible.split-pane-side[side=end]){-webkit-border-start:var(--border);border-inline-start:var(--border);-webkit-border-end:0;border-inline-end:0;border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.menu-type-push){z-index:1000}:host(.menu-type-push) .show-backdrop{display:block}",ace=oce,lce=":host{--width:304px;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--background:var(--ion-background-color, #fff);left:0;right:0;top:0;bottom:0;display:none;position:absolute;contain:strict}:host(.show-menu){display:block}.menu-inner{-webkit-transform:translateX(-9999px);transform:translateX(-9999px);display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:justify;justify-content:space-between;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:strict}:host(.menu-side-start) .menu-inner{--ion-safe-area-right:0px;top:0;bottom:0}:host(.menu-side-start) .menu-inner{inset-inline-start:0;inset-inline-end:auto}:host-context([dir=rtl]):host(.menu-side-start) .menu-inner,:host-context([dir=rtl]).menu-side-start .menu-inner{--ion-safe-area-right:unset;--ion-safe-area-left:0px}@supports selector(:dir(rtl)){:host(.menu-side-start:dir(rtl)) .menu-inner{--ion-safe-area-right:unset;--ion-safe-area-left:0px}}:host(.menu-side-end) .menu-inner{--ion-safe-area-left:0px;top:0;bottom:0}:host(.menu-side-end) .menu-inner{inset-inline-start:auto;inset-inline-end:0}:host-context([dir=rtl]):host(.menu-side-end) .menu-inner,:host-context([dir=rtl]).menu-side-end .menu-inner{--ion-safe-area-left:unset;--ion-safe-area-right:0px}@supports selector(:dir(rtl)){:host(.menu-side-end:dir(rtl)) .menu-inner{--ion-safe-area-left:unset;--ion-safe-area-right:0px}}ion-backdrop{display:none;opacity:0.01;z-index:-1}@media (max-width: 340px){.menu-inner{--width:264px}}:host(.menu-type-reveal){z-index:0}:host(.menu-type-reveal.show-menu) .menu-inner{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}:host(.menu-type-overlay){z-index:1000}:host(.menu-type-overlay) .show-backdrop{display:block;cursor:pointer}:host(.menu-pane-visible){-ms-flex:0 1 auto;flex:0 1 auto;width:var(--side-width, var(--width));min-width:var(--side-min-width, var(--min-width));max-width:var(--side-max-width, var(--max-width))}:host(.menu-pane-visible.split-pane-side){left:0;right:0;top:0;bottom:0;position:relative;-webkit-box-shadow:none;box-shadow:none;z-index:0}:host(.menu-pane-visible.split-pane-side.menu-enabled){display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0}:host(.menu-pane-visible.split-pane-side){-ms-flex-order:-1;order:-1}:host(.menu-pane-visible.split-pane-side[side=end]){-ms-flex-order:1;order:1}:host(.menu-pane-visible) .menu-inner{left:0;right:0;width:auto;-webkit-transform:none;transform:none;-webkit-box-shadow:none;box-shadow:none}:host(.menu-pane-visible) ion-backdrop{display:hidden !important}:host(.menu-pane-visible.split-pane-side){-webkit-border-start:0;border-inline-start:0;-webkit-border-end:var(--border);border-inline-end:var(--border);border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.menu-pane-visible.split-pane-side[side=end]){-webkit-border-start:var(--border);border-inline-start:var(--border);-webkit-border-end:0;border-inline-end:0;border-top:0;border-bottom:0;min-width:var(--side-min-width);max-width:var(--side-max-width)}:host(.menu-type-overlay) .menu-inner{-webkit-box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18);box-shadow:4px 0px 16px rgba(0, 0, 0, 0.18)}",cce=lce,dce="cubic-bezier(0.32,0.72,0,1)",uce="cubic-bezier(0.0,0.0,0.2,1)",hce="cubic-bezier(1, 0, 0.68, 0.28)",fce="cubic-bezier(0.4, 0, 0.6, 1)",pce=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionWillOpen=at(this,"ionWillOpen",7),this.ionWillClose=at(this,"ionWillClose",7),this.ionDidOpen=at(this,"ionDidOpen",7),this.ionDidClose=at(this,"ionDidClose",7),this.ionMenuChange=at(this,"ionMenuChange",7),this.lastOnEnd=0,this.blocker=lA.createBlocker({disableScroll:!0}),this.didLoad=!1,this.operationCancelled=!1,this.isAnimating=!1,this._isOpen=!1,this.inheritedAttributes={},this.handleFocus=e=>{const t=bp(document);t&&!t.contains(this.el)||this.trapKeyboardFocus(e,document)},this.isPaneVisible=!1,this.isEndSide=!1,this.contentId=void 0,this.menuId=void 0,this.type=void 0,this.disabled=!1,this.side="start",this.swipeGesture=!0,this.maxEdgeStart=50}typeChanged(e,t){const i=this.contentEl;i&&(t!==void 0&&i.classList.remove("menu-content-".concat(t)),i.classList.add("menu-content-".concat(e)),i.removeAttribute("style")),this.menuInnerEl&&this.menuInnerEl.removeAttribute("style"),this.animation=void 0}disabledChanged(){this.updateState(),this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}sideChanged(){this.isEndSide=GP(this.side),this.animation=void 0}swipeGestureChanged(){this.updateState()}async connectedCallback(){typeof customElements<"u"&&customElements!=null&&await customElements.whenDefined("ion-menu"),this.type===void 0&&(this.type=Zt.get("menuType","overlay"));const e=this.contentId!==void 0?document.getElementById(this.contentId):null;if(e===null){console.error('Menu: must have a "content" element to listen for drag events on.');return}this.el.contains(e)&&console.error('Menu: "contentId" should refer to the main view\'s ion-content, not the ion-content inside of the ion-menu.'),this.contentEl=e,e.classList.add("menu-content"),this.typeChanged(this.type,void 0),this.sideChanged(),pc._register(this),this.menuChanged(),this.gesture=(await Kn(()=>Promise.resolve().then(()=>zf),void 0)).createGesture({el:document,gestureName:"menu-swipe",gesturePriority:30,threshold:10,blurOnStart:!0,canStart:t=>this.canStart(t),onWillStart:()=>this.onWillStart(),onStart:()=>this.onStart(),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.updateState()}componentWillLoad(){this.inheritedAttributes=Kd(this.el)}async componentDidLoad(){this.didLoad=!0;const e=this.el.closest("ion-split-pane");e!==null&&(this.isPaneVisible=await e.isVisible()),this.menuChanged(),this.updateState()}menuChanged(){this.didLoad&&this.ionMenuChange.emit({disabled:this.disabled,open:this._isOpen})}async disconnectedCallback(){await this.close(!1),this.blocker.destroy(),pc._unregister(this),this.animation&&this.animation.destroy(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation=void 0,this.contentEl=void 0}onSplitPaneChanged(e){const t=this.el.closest("ion-split-pane");t!==null&&t===e.target&&(this.isPaneVisible=e.detail.visible,this.updateState())}onBackdropClick(e){this._isOpen&&this.lastOnEnd<e.timeStamp-100&&(e.composedPath&&!e.composedPath().includes(this.menuInnerEl))&&(e.preventDefault(),e.stopPropagation(),this.close(void 0,Sl))}onKeydown(e){e.key==="Escape"&&this.close(void 0,Sl)}isOpen(){return Promise.resolve(this._isOpen)}isActive(){return Promise.resolve(this._isActive())}open(e=!0){return this.setOpen(!0,e)}close(e=!0,t){return this.setOpen(!1,e,t)}toggle(e=!0){return this.setOpen(!this._isOpen,e)}setOpen(e,t=!0,i){return pc._setOpen(this,e,t,i)}trapKeyboardFocus(e,t){const i=e.target;if(i)if(this.el.contains(i))this.lastFocus=i;else{const{el:s}=this;Ry(s),this.lastFocus===t.activeElement&&sT(s)}}async _setOpen(e,t=!0,i){return!this._isActive()||this.isAnimating||e===this._isOpen?!1:(this.beforeAnimation(e,i),await this.loadAnimation(),await this.startAnimation(e,t),this.operationCancelled?(this.operationCancelled=!1,!1):(this.afterAnimation(e,i),!0))}async loadAnimation(){const e=this.menuInnerEl.offsetWidth,t=GP(this.side);if(e===this.width&&this.animation!==void 0&&t===this.isEndSide)return;this.width=e,this.isEndSide=t,this.animation&&(this.animation.destroy(),this.animation=void 0);const i=this.animation=await pc._createAnimation(this.type,this);Zt.getBoolean("animated",!0)||i.duration(0),i.fill("both")}async startAnimation(e,t){const i=!e,s=Tt(this),r=s==="ios"?dce:uce,o=s==="ios"?hce:fce,a=this.animation.direction(i?"reverse":"normal").easing(i?o:r);t?await a.play():a.play({sync:!0}),a.getDirection()==="reverse"&&a.direction("normal")}_isActive(){return!this.disabled&&!this.isPaneVisible}canSwipe(){return this.swipeGesture&&!this.isAnimating&&this._isActive()}canStart(e){return!!document.querySelector("ion-modal.show-modal")||!this.canSwipe()?!1:this._isOpen?!0:pc._getOpenSync()?!1:mce(window,e.currentX,this.isEndSide,this.maxEdgeStart)}onWillStart(){return this.beforeAnimation(!this._isOpen,yc),this.loadAnimation()}onStart(){if(!this.isAnimating||!this.animation){Us(!1,"isAnimating has to be true");return}this.animation.progressStart(!0,this._isOpen?1:0)}onMove(e){if(!this.isAnimating||!this.animation){Us(!1,"isAnimating has to be true");return}const i=uR(e.deltaX,this._isOpen,this.isEndSide)/this.width;this.animation.progressStep(this._isOpen?1-i:i)}onEnd(e){if(!this.isAnimating||!this.animation){Us(!1,"isAnimating has to be true");return}const t=this._isOpen,i=this.isEndSide,s=uR(e.deltaX,t,i),r=this.width,o=s/r,a=e.velocityX,l=r/2,c=a>=0&&(a>.2||e.deltaX>l),d=a<=0&&(a<-.2||e.deltaX<-l),u=t?i?c:d:i?d:c;let h=!t&&u;t&&!u&&(h=!0),this.lastOnEnd=e.currentTime;let f=u?.001:-.001;const m=o<0?.01:o;f+=Md([0,0],[.4,0],[.6,1],[1,1],qo(0,m,.9999))[0]||0;const g=this._isOpen?!u:u;this.animation.easing("cubic-bezier(0.4, 0.0, 0.6, 1)").onFinish(()=>this.afterAnimation(h,yc),{oneTimeCallback:!0}).progressEnd(g?1:0,this._isOpen?1-f:f,300)}beforeAnimation(e,t){Us(!this.isAnimating,"_before() should not be called while animating"),mi("android")&&this.el.setAttribute("aria-hidden","true"),this.el.classList.add(hR),this.el.setAttribute("tabindex","0"),this.backdropEl&&this.backdropEl.classList.add(fR),this.contentEl&&(this.contentEl.classList.add(pR),this.contentEl.setAttribute("aria-hidden","true")),this.blocker.block(),this.isAnimating=!0,e?this.ionWillOpen.emit():this.ionWillClose.emit({role:t})}afterAnimation(e,t){var i;this._isOpen=e,this.isAnimating=!1,this._isOpen||this.blocker.unblock(),e?(mi("android")&&this.el.removeAttribute("aria-hidden"),this.ionDidOpen.emit(),((i=document.activeElement)===null||i===void 0?void 0:i.closest("ion-menu"))!==this.el&&this.el.focus(),document.addEventListener("focus",this.handleFocus,!0)):(this.el.removeAttribute("aria-hidden"),this.el.classList.remove(hR),this.el.removeAttribute("tabindex"),this.contentEl&&(this.contentEl.classList.remove(pR),this.contentEl.removeAttribute("aria-hidden")),this.backdropEl&&this.backdropEl.classList.remove(fR),this.animation&&this.animation.stop(),this.ionDidClose.emit({role:t}),document.removeEventListener("focus",this.handleFocus,!0))}updateState(){const e=this._isActive();this.gesture&&this.gesture.enable(e&&this.swipeGesture),e||(this.isAnimating&&(this.operationCancelled=!0),this.afterAnimation(!1,yc))}render(){const{type:e,disabled:t,el:i,isPaneVisible:s,inheritedAttributes:r,side:o}=this,a=Tt(this);return q(Yt,{key:"da96fdb4c5ddf60e615cc4cdda7ccdb3fd7e089b",onKeyDown:gp()?null:this.onKeydown,role:"navigation","aria-label":r["aria-label"]||"menu",class:{[a]:!0,["menu-type-".concat(e)]:!0,"menu-enabled":!t,["menu-side-".concat(o)]:!0,"menu-pane-visible":s,"split-pane-side":ts("ion-split-pane",i)}},q("div",{key:"894e680fe227534711128c7aca980964ddb5a08a",class:"menu-inner",part:"container",ref:l=>this.menuInnerEl=l},q("slot",{key:"e9f5934518dc0cceaeadf1f2820614595fec6bc9"})),q("ion-backdrop",{key:"7282077817657b1bb6c155f1404c0a519fece993",ref:l=>this.backdropEl=l,class:"menu-backdrop",tappable:!1,stopPropagation:!1,part:"backdrop"}))}get el(){return this}static get watchers(){return{type:["typeChanged"],disabled:["disabledChanged"],side:["sideChanged"],swipeGesture:["swipeGestureChanged"]}}static get style(){return{ios:ace,md:cce}}},[33,"ion-menu",{contentId:[513,"content-id"],menuId:[513,"menu-id"],type:[1025],disabled:[1028],side:[513],swipeGesture:[4,"swipe-gesture"],maxEdgeStart:[2,"max-edge-start"],isPaneVisible:[32],isEndSide:[32],isOpen:[64],isActive:[64],open:[64],close:[64],toggle:[64],setOpen:[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{type:["typeChanged"],disabled:["disabledChanged"],side:["sideChanged"],swipeGesture:["swipeGestureChanged"]}]),uR=(n,e,t)=>Math.max(0,e!==t?-n:n),mce=(n,e,t,i)=>t?e>=n.innerWidth-i:e<=i,hR="show-menu",fR="show-backdrop",pR="menu-content-open";function gce(){if(typeof customElements>"u")return;["ion-menu","ion-backdrop"].forEach(e=>{switch(e){case"ion-menu":customElements.get(e)||customElements.define(e,pce);break;case"ion-backdrop":customElements.get(e)||Eh();break}})}const bce=gce,fN=1,pN=2,Dy=3;class hT{constructor(e,t){this.component=e,this.params=t,this.state=fN}async init(e){if(this.state=pN,!this.element){const t=this.component;this.element=await ab(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){Us(this.state!==Dy,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=Dy}}const mR=(n,e,t)=>!n||n.component!==e?!1:bM(n.params,t),gR=(n,e)=>n?n instanceof hT?n:new hT(n,e):null,vce=n=>n.map(e=>e instanceof hT?e:"component"in e?gR(e.component,e.componentProps===null?void 0:e.componentProps):gR(e,void 0)).filter(e=>e!==null),yce=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",wce=yce,xce=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=at(this,"ionNavWillLoad",7),this.ionNavWillChange=at(this,"ionNavWillChange",3),this.ionNavDidChange=at(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=Tt(this);this.swipeGesture=Zt.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await Kn(()=>import("./swipe-back--96QRgYn.js"),[])).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)fc(e.element,z2),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,i,s){return this.insert(-1,e,t,i,s)}insert(e,t,i,s,r){return this.insertPages(e,[{component:t,componentProps:i}],s,r)}insertPages(e,t,i,s){return this.queueTrns({insertStart:e,insertViews:t,opts:i},s)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,i){const s={removeStart:-1,removeCount:-1,opts:t};return typeof e=="object"&&e.component?(s.removeView=e,s.removeStart=1):typeof e=="number"&&(s.removeStart=e+1),this.queueTrns(s,i)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,i,s){return this.queueTrns({removeStart:e,removeCount:t,opts:i},s)}setRoot(e,t,i,s){return this.setPages([{component:e,componentProps:t}],i,s)}setPages(e,t,i){return t!=null||(t={}),t.animated!==!0&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},i)}setRouteId(e,t,i,s){const r=this.getActiveSync();if(mR(r,e,t))return Promise.resolve({changed:!1,element:r.element});let o;const a=new Promise(d=>o=d);let l;const c={updateURL:!1,viewIsReady:d=>{let u;const h=new Promise(f=>u=f);return o({changed:!0,element:d,markVisible:async()=>{u(),await l}}),h}};if(i==="root")l=this.setRoot(e,t,c);else{const d=this.views.find(u=>mR(u,e,t));d?l=this.popTo(d,Object.assign(Object.assign({},c),{direction:"back",animationBuilder:s})):i==="forward"?l=this.push(e,t,Object.assign(Object.assign({},c),{animationBuilder:s})):i==="back"&&(l=this.setRoot(e,t,Object.assign(Object.assign({},c),{direction:"back",animated:!0,animationBuilder:s})))}return a}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}async getLength(){return Promise.resolve(this.views.length)}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,i=t.indexOf(e);return i>0?t[i-1]:void 0}async queueTrns(e,t){var i,s;if(this.isTransitioning&&(!((i=e.opts)===null||i===void 0)&&i.skipIfBusy))return!1;const r=new Promise((o,a)=>{e.resolve=o,e.reject=a});if(e.done=t,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const o=document.querySelector("ion-router");if(o){const a=await o.canTransition();if(a===!1)return!1;if(typeof a=="string")return o.push(a,e.opts.direction||"back"),!1}}return((s=e.insertViews)===null||s===void 0?void 0:s.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),r}success(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),t.opts.updateURL!==!1&&this.useRouter){const i=document.querySelector("ion-router");if(i){const s=e.direction==="back"?"back":"forward";i.navChanged(s)}}}failed(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}this.transInstr.length=0,this.fireError(e,t)}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),i=this.getEnteringView(e,t);if(!t&&!i)throw new Error("no views in the stack to be removed");i&&i.state===fN&&await i.init(this.el),this.postViewInit(i,t,e);const s=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&i!==t;s&&e.opts&&t&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(i==null?void 0:i.animationBuilder)),t.animationBuilder=e.opts.animationBuilder);let r;s?r=await this.transition(i,t,e):r={hasCompleted:!0,requiresTransition:!1},this.success(r,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,i,s;const r=this.views.length;if((t=e.opts)!==null&&t!==void 0||(e.opts={}),(i=(s=e.opts).delegate)!==null&&i!==void 0||(s.delegate=this.delegate),e.removeView!==void 0){Us(e.removeStart!==void 0,"removeView needs removeStart"),Us(e.removeCount!==void 0,"removeView needs removeCount");const l=this.views.indexOf(e.removeView);if(l<0)throw new Error("removeView was not found");e.removeStart+=l}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=r-1),e.removeCount<0&&(e.removeCount=r-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===r),e.insertViews&&((e.insertStart<0||e.insertStart>r)&&(e.insertStart=r),e.enteringRequiresTransition=e.insertStart===r);const o=e.insertViews;if(!o)return;Us(o.length>0,"length can not be zero");const a=vce(o);if(a.length===0)throw new Error("invalid views to insert");for(const l of a){l.delegate=e.opts.delegate;const c=l.nav;if(c&&c!==this)throw new Error("inserted view was already inserted");if(l.state===Dy)throw new Error("inserted view was already destroyed")}e.insertViews=a}getEnteringView(e,t){const i=e.insertViews;if(i!==void 0)return i[i.length-1];const s=e.removeStart;if(s!==void 0){const r=this.views,o=s+e.removeCount;for(let a=r.length-1;a>=0;a--){const l=r[a];if((a<s||a>=o)&&l!==t)return l}}}postViewInit(e,t,i){var s,r,o;Us(t||e,"Both leavingView and enteringView are null"),Us(i.resolve,"resolve must be valid"),Us(i.reject,"reject must be valid");const a=i.opts,{insertViews:l,removeStart:c,removeCount:d}=i;let u;if(c!==void 0&&d!==void 0){Us(c>=0,"removeStart can not be negative"),Us(d>=0,"removeCount can not be negative"),u=[];for(let f=c;f<c+d;f++){const m=this.views[f];m!==void 0&&m!==e&&m!==t&&u.push(m)}(s=a.direction)!==null&&s!==void 0||(a.direction="back")}const h=this.views.length+((r=l==null?void 0:l.length)!==null&&r!==void 0?r:0)-(d!=null?d:0);if(Us(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){let f=i.insertStart;for(const m of l)this.insertViewAt(m,f),f++;i.enteringRequiresTransition&&((o=a.direction)!==null&&o!==void 0||(a.direction="forward"))}if(u&&u.length>0){for(const f of u)fc(f.element,dx),fc(f.element,ux),fc(f.element,z2);for(const f of u)this.destroyView(f)}}async transition(e,t,i){const s=i.opts,r=s.progressAnimation?u=>{u!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,u.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),u.progressEnd(0,0,0)):this.sbAni=u}:void 0,o=Tt(this),a=e.element,l=t&&t.element,c=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:r,animated:this.animated&&Zt.getBoolean("animated",!0),enteringEl:a,leavingEl:l},s),{animationBuilder:s.animationBuilder||this.animation||Zt.get("navAnimation")}),{hasCompleted:d}=await YM(c);return this.transitionFinish(d,e,t,s)}transitionFinish(e,t,i,s){const r=e?t:i;return r&&this.unmountInactiveViews(r),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:i,direction:s.direction}}insertViewAt(e,t){const i=this.views,s=i.indexOf(e);s>-1?(Us(e.nav===this,"view is not part of the nav"),i.splice(s,1),i.splice(t,0,e)):(Us(!e.nav,"nav is used"),e.nav=this,i.splice(t,0,e))}removeView(e){Us(e.state===pN||e.state===Dy,"view state should be loaded or destroyed");const t=this.views,i=t.indexOf(e);Us(i>-1,"view must be part of the stack"),i>=0&&t.splice(i,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,i=t.indexOf(e);for(let s=t.length-1;s>=0;s--){const r=t[s],o=r.element;o&&(s>i?(fc(o,z2),this.destroyView(r)):s<i&&oT(o,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,i){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let s=e?-.001:.001;e?s+=Md([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),s+=Md([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,s,i)}else this.gestureOrAnimationInProgress=!1}render(){return q("slot",{key:"dfe98cb6604a2015a49f41beffebdd2da957dfff"})}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return wce}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64],getLength:[64]},void 0,{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}]);function _ce(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,xce);break}})}const kce=_ce;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const bR=(n,e,t)=>typeof t=="function"?t(n,e):typeof t=="string"?n[t]===e[t]:Array.isArray(e)?e.includes(n):n===e,Ece=(n,e,t)=>n===void 0?!1:Array.isArray(n)?n.some(i=>bR(i,e,t)):bR(n,e,t),Tce=':host{--inner-border-radius:50%;display:inline-block;position:relative;max-width:100%;min-height:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.radio-disabled){pointer-events:none}.radio-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{-webkit-box-sizing:border-box;box-sizing:border-box}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.radio-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;height:inherit;min-height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.radio-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.radio-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between) .radio-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.radio-justify-start) .radio-wrapper{-ms-flex-pack:start;justify-content:start}:host(.radio-justify-end) .radio-wrapper{-ms-flex-pack:end;justify-content:end}:host(.radio-alignment-start) .radio-wrapper{-ms-flex-align:start;align-items:start}:host(.radio-alignment-center) .radio-wrapper{-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between),:host(.radio-justify-start),:host(.radio-justify-end),:host(.radio-alignment-start),:host(.radio-alignment-center){display:block}:host(.radio-label-placement-start) .radio-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.radio-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-end) .radio-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.radio-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.radio-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px}:host(.radio-label-placement-stacked) .radio-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.radio-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host{--color-checked:var(--ion-color-primary, #0054e9)}:host(.ion-color.radio-checked) .radio-inner{border-color:var(--ion-color-base)}.item-radio.item-ios ion-label{-webkit-margin-start:0;margin-inline-start:0}.radio-inner{width:33%;height:50%}:host(.radio-checked) .radio-inner{-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:0.125rem;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--color-checked)}:host(.radio-disabled){opacity:0.3}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);top:-8px;display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #1a65eb);content:"";opacity:0.2}:host(.ion-focused) .radio-icon::after{inset-inline-start:-9px}.native-wrapper .radio-icon{width:0.9375rem;height:1.5rem}',Cce=Tce,Sce=':host{--inner-border-radius:50%;display:inline-block;position:relative;max-width:100%;min-height:inherit;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.radio-disabled){pointer-events:none}.radio-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{-webkit-box-sizing:border-box;box-sizing:border-box}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host(.in-item){-ms-flex:1 1 0px;flex:1 1 0;width:100%;height:100%}:host([slot=start]),:host([slot=end]){-ms-flex:initial;flex:initial;width:auto}.radio-wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;height:inherit;min-height:inherit;cursor:inherit}.label-text-wrapper{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}:host(.in-item) .label-text-wrapper{margin-top:10px;margin-bottom:10px}:host(.in-item.radio-label-placement-stacked) .label-text-wrapper{margin-top:10px;margin-bottom:16px}:host(.in-item.radio-label-placement-stacked) .native-wrapper{margin-bottom:10px}.label-text-wrapper-hidden{display:none}.native-wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between) .radio-wrapper{-ms-flex-pack:justify;justify-content:space-between}:host(.radio-justify-start) .radio-wrapper{-ms-flex-pack:start;justify-content:start}:host(.radio-justify-end) .radio-wrapper{-ms-flex-pack:end;justify-content:end}:host(.radio-alignment-start) .radio-wrapper{-ms-flex-align:start;align-items:start}:host(.radio-alignment-center) .radio-wrapper{-ms-flex-align:center;align-items:center}:host(.radio-justify-space-between),:host(.radio-justify-start),:host(.radio-justify-end),:host(.radio-alignment-start),:host(.radio-alignment-center){display:block}:host(.radio-label-placement-start) .radio-wrapper{-ms-flex-direction:row;flex-direction:row}:host(.radio-label-placement-start) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-end) .radio-wrapper{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.radio-label-placement-end) .label-text-wrapper{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}:host(.radio-label-placement-fixed) .label-text-wrapper{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px}:host(.radio-label-placement-fixed) .label-text-wrapper{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px}:host(.radio-label-placement-stacked) .radio-wrapper{-ms-flex-direction:column;flex-direction:column}:host(.radio-label-placement-stacked) .label-text-wrapper{-webkit-transform:scale(0.75);transform:scale(0.75);margin-left:0;margin-right:0;margin-bottom:16px;max-width:calc(100% / 0.75)}:host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper{-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-start) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-start .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-start:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:right top;transform-origin:right top}}:host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper{-webkit-transform-origin:center top;transform-origin:center top}:host-context([dir=rtl]):host(.radio-label-placement-stacked.radio-alignment-center) .label-text-wrapper,:host-context([dir=rtl]).radio-label-placement-stacked.radio-alignment-center .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}@supports selector(:dir(rtl)){:host(.radio-label-placement-stacked.radio-alignment-center:dir(rtl)) .label-text-wrapper{-webkit-transform-origin:calc(100% - center) top;transform-origin:calc(100% - center) top}}:host{--color:rgb(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #0054e9);--border-width:0.125rem;--border-style:solid;--border-radius:50%}:host(.ion-color) .radio-inner{background:var(--ion-color-base)}:host(.ion-color.radio-checked) .radio-icon{border-color:var(--ion-color-base)}.radio-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--color)}.radio-inner{border-radius:var(--inner-border-radius);width:calc(50% + var(--border-width));height:calc(50% + var(--border-width));-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background:var(--color-checked)}:host(.radio-checked) .radio-icon{border-color:var(--color-checked)}:host(.radio-checked) .radio-inner{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}:host(.radio-disabled) .label-text-wrapper{opacity:0.38}:host(.radio-disabled) .native-wrapper{opacity:0.63}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #1a65eb);content:"";opacity:0.2}.native-wrapper .radio-icon{width:1.25rem;height:1.25rem}',Ace=Sce,Ice=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=at(this,"ionFocus",7),this.ionBlur=at(this,"ionBlur",7),this.inputId="ion-rb-".concat(Pce++),this.radioGroup=null,this.updateState=()=>{if(this.radioGroup){const{compareWith:e,value:t}=this.radioGroup;this.checked=Ece(t,this.value,e)}},this.onClick=()=>{const{radioGroup:e,checked:t,disabled:i}=this;i||(t&&(e!=null&&e.allowEmptySelection)?this.checked=!1:this.checked=!0)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.checked=!1,this.buttonTabindex=-1,this.color=void 0,this.name=this.inputId,this.disabled=!1,this.value=void 0,this.labelPlacement="start",this.justify=void 0,this.alignment=void 0}valueChanged(){this.updateState()}componentDidLoad(){this.updateState()}async setFocus(e){e!==void 0&&(e.stopPropagation(),e.preventDefault()),this.el.focus()}async setButtonTabindex(e){this.buttonTabindex=e}connectedCallback(){this.value===void 0&&(this.value=this.inputId);const e=this.radioGroup=this.el.closest("ion-radio-group");e&&(this.updateState(),pp(e,"ionValueChange",this.updateState))}disconnectedCallback(){const e=this.radioGroup;e&&(Xg(e,"ionValueChange",this.updateState),this.radioGroup=null)}get hasLabel(){return this.el.textContent!==""}renderRadioControl(){return q("div",{class:"radio-icon",part:"container"},q("div",{class:"radio-inner",part:"mark"}),q("div",{class:"radio-ripple"}))}render(){const{checked:e,disabled:t,color:i,el:s,justify:r,labelPlacement:o,hasLabel:a,buttonTabindex:l,alignment:c}=this,d=Tt(this),u=ts("ion-item",s);return q(Yt,{key:"5a0adab55ad009305de4856fa1b9f93f2279a734",onFocus:this.onFocus,onBlur:this.onBlur,onClick:this.onClick,class:ds(i,{[d]:!0,"in-item":u,"radio-checked":e,"radio-disabled":t,["radio-justify-".concat(r)]:r!==void 0,["radio-alignment-".concat(c)]:c!==void 0,["radio-label-placement-".concat(o)]:!0,"ion-activatable":!u,"ion-focusable":!u}),role:"radio","aria-checked":e?"true":"false","aria-disabled":t?"true":null,tabindex:l},q("label",{key:"f5673a798e6d87868339f046445f707e1d93b7b6",class:"radio-wrapper"},q("div",{key:"e9190c06f75a171cab63e3f74ccf771c3ed87005",class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!a},part:"label"},q("slot",{key:"6cedf4e7b3bd03e4a635727dd7b6094bab64af64"})),q("div",{key:"26dd48d9d2848b7f100b732abdc4a3171adde483",class:"native-wrapper"},this.renderRadioControl())))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:Cce,md:Ace}}},[33,"ion-radio",{color:[513],name:[1],disabled:[4],value:[8],labelPlacement:[1,"label-placement"],justify:[1],alignment:[1],checked:[32],buttonTabindex:[32],setFocus:[64],setButtonTabindex:[64]},void 0,{value:["valueChanged"]}]);let Pce=0;function Rce(){if(typeof customElements>"u")return;["ion-radio"].forEach(e=>{switch(e){case"ion-radio":customElements.get(e)||customElements.define(e,Ice);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $ce=Rce;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Lce=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionChange=at(this,"ionChange",7),this.ionValueChange=at(this,"ionValueChange",7),this.inputId="ion-rg-".concat(Oce++),this.labelId="".concat(this.inputId,"-lbl"),this.setRadioTabindex=e=>{const t=this.getRadios(),i=t.find(o=>!o.disabled),s=t.find(o=>o.value===e&&!o.disabled);if(!i&&!s)return;const r=s||i;for(const o of t){const a=o===r?0:-1;o.setButtonTabindex(a)}},this.onClick=e=>{e.preventDefault();const t=e.target&&e.target.closest("ion-radio");if(t&&!t.disabled){const i=this.value,s=t.value;s!==i?(this.value=s,this.emitValueChange(e)):this.allowEmptySelection&&(this.value=void 0,this.emitValueChange(e))}},this.allowEmptySelection=!1,this.compareWith=void 0,this.name=this.inputId,this.value=void 0}valueChanged(e){this.setRadioTabindex(e),this.ionValueChange.emit({value:e})}componentDidLoad(){this.valueChanged(this.value)}async connectedCallback(){const e=this.el.querySelector("ion-list-header")||this.el.querySelector("ion-item-divider");if(e){const t=this.label=e.querySelector("ion-label");t&&(this.labelId=t.id=this.name+"-lbl")}}getRadios(){return Array.from(this.el.querySelectorAll("ion-radio"))}emitValueChange(e){const{value:t}=this;this.ionChange.emit({value:t,event:e})}onKeydown(e){const t=!!this.el.closest("ion-select-popover")||!!this.el.closest("ion-select-modal");if(e.target&&!this.el.contains(e.target))return;const i=this.getRadios().filter(s=>!s.disabled);if(e.target&&i.includes(e.target)){const s=i.findIndex(a=>a===e.target),r=i[s];let o;if(["ArrowDown","ArrowRight"].includes(e.key)&&(o=s===i.length-1?i[0]:i[s+1]),["ArrowUp","ArrowLeft"].includes(e.key)&&(o=s===0?i[i.length-1]:i[s-1]),o&&i.includes(o)&&(o.setFocus(e),t||(this.value=o.value,this.emitValueChange(e))),[" "].includes(e.key)){const a=this.value;this.value=this.allowEmptySelection&&this.value!==void 0?void 0:r.value,(a!==this.value||this.allowEmptySelection)&&this.emitValueChange(e),e.preventDefault()}}}async setFocus(){const e=this.getRadios().find(t=>t.tabIndex!==-1);e==null||e.setFocus()}render(){const{label:e,labelId:t,el:i,name:s,value:r}=this,o=Tt(this);return YS(!0,i,s,r,!1),q(Yt,{key:"a853e38901f0f4ba17bbf21ebb5da5b5c20b327e",role:"radiogroup","aria-labelledby":e?t:null,onClick:this.onClick,class:o})}get el(){return this}static get watchers(){return{value:["valueChanged"]}}},[0,"ion-radio-group",{allowEmptySelection:[4,"allow-empty-selection"],compareWith:[1,"compare-with"],name:[1],value:[1032],setFocus:[64]},[[4,"keydown","onKeydown"]],{value:["valueChanged"]}]);let Oce=0;function Dce(){if(typeof customElements>"u")return;["ion-radio-group"].forEach(e=>{switch(e){case"ion-radio-group":customElements.get(e)||customElements.define(e,Lce);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mce=Dce;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Nce=n=>{const e=n.previousElementSibling;return e!==null&&e.tagName==="ION-HEADER"?"translate":"scale"},Fce=(n,e,t)=>n==="scale"?Bce(e,t):Vce(e,t),mN=n=>{const e=n.querySelector("ion-spinner"),t=e.shadowRoot.querySelector("circle"),i=n.querySelector(".spinner-arrow-container"),s=n.querySelector(".arrow-container"),r=s?s.querySelector("ion-icon"):null,o=bt().duration(1e3).easing("ease-out"),a=bt().addElement(i).keyframes([{offset:0,opacity:"0.3"},{offset:.45,opacity:"0.3"},{offset:.55,opacity:"1"},{offset:1,opacity:"1"}]),l=bt().addElement(t).keyframes([{offset:0,strokeDasharray:"1px, 200px"},{offset:.2,strokeDasharray:"1px, 200px"},{offset:.55,strokeDasharray:"100px, 200px"},{offset:1,strokeDasharray:"100px, 200px"}]),c=bt().addElement(e).keyframes([{offset:0,transform:"rotate(-90deg)"},{offset:1,transform:"rotate(210deg)"}]);if(s&&r){const d=bt().addElement(s).keyframes([{offset:0,transform:"rotate(0deg)"},{offset:.3,transform:"rotate(0deg)"},{offset:.55,transform:"rotate(280deg)"},{offset:1,transform:"rotate(400deg)"}]),u=bt().addElement(r).keyframes([{offset:0,transform:"translateX(2px) scale(0)"},{offset:.3,transform:"translateX(2px) scale(0)"},{offset:.55,transform:"translateX(-1.5px) scale(1)"},{offset:1,transform:"translateX(-1.5px) scale(1)"}]);o.addAnimation([d,u])}return o.addAnimation([a,l,c])},Bce=(n,e)=>{const t=e.clientHeight,i=bt().addElement(n).keyframes([{offset:0,transform:"scale(0) translateY(-".concat(t,"px)")},{offset:1,transform:"scale(1) translateY(100px)"}]);return mN(n).addAnimation([i])},Vce=(n,e)=>{const t=e.clientHeight,i=bt().addElement(n).keyframes([{offset:0,transform:"translateY(-".concat(t,"px)")},{offset:1,transform:"translateY(100px)"}]);return mN(n).addAnimation([i])},Uce=n=>bt().duration(125).addElement(n).fromTo("transform","translateY(var(--ion-pulling-refresher-translate, 100px))","translateY(0px)"),zce=(n,e)=>{n.style.setProperty("opacity",e.toString())},Hce=(n,e,t)=>{fi(()=>{n.forEach((s,r)=>{const o=r*(1/e),a=1-o,l=t-o,c=qo(0,l/a,1);s.style.setProperty("opacity",c.toString())})})},jce=(n,e)=>{fi(()=>{n.style.setProperty("--refreshing-rotation-duration",e>=1?"0.5s":"2s"),n.style.setProperty("opacity","1")})},B1=(n,e,t=200)=>{if(!n)return Promise.resolve();const i=Ty(n,t);return fi(()=>{n.style.setProperty("transition","".concat(t,"ms all ease-out")),e===void 0?n.style.removeProperty("transform"):n.style.setProperty("transform","translate3d(0px, ".concat(e,", 0px)"))}),i},gN=()=>navigator.maxTouchPoints>0&&CSS.supports("background: -webkit-named-image(apple-pay-logo-black)"),vR=async(n,e)=>{const t=n.querySelector("ion-refresher-content");if(!t)return Promise.resolve(!1);await new Promise(r=>Ra(t,r));const i=n.querySelector("ion-refresher-content .refresher-pulling ion-spinner"),s=n.querySelector("ion-refresher-content .refresher-refreshing ion-spinner");return i!==null&&s!==null&&(e==="ios"&&gN()||e==="md")},Gce="ion-refresher{top:0;display:none;position:absolute;width:100%;height:60px;pointer-events:none;z-index:-1}ion-refresher{inset-inline-start:0}ion-refresher.refresher-active{display:block}ion-refresher-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;height:100%}.refresher-pulling,.refresher-refreshing{display:none;width:100%}.refresher-pulling-icon,.refresher-refreshing-icon{-webkit-transform-origin:center;transform-origin:center;-webkit-transition:200ms;transition:200ms;font-size:30px;text-align:center}:host-context([dir=rtl]) .refresher-pulling-icon,:host-context([dir=rtl]) .refresher-refreshing-icon{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}[dir=rtl] .refresher-pulling-icon,[dir=rtl] .refresher-refreshing-icon{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}@supports selector(:dir(rtl)){.refresher-pulling-icon:dir(rtl),.refresher-refreshing-icon:dir(rtl){-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}}.refresher-pulling-text,.refresher-refreshing-text{font-size:16px;text-align:center}ion-refresher-content .arrow-container{display:none}.refresher-pulling ion-refresher-content .refresher-pulling{display:block}.refresher-ready ion-refresher-content .refresher-pulling{display:block}.refresher-ready ion-refresher-content .refresher-pulling-icon{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.refresher-refreshing ion-refresher-content .refresher-refreshing{display:block}.refresher-cancelling ion-refresher-content .refresher-pulling{display:block}.refresher-cancelling ion-refresher-content .refresher-pulling-icon{-webkit-transform:scale(0);transform:scale(0)}.refresher-completing ion-refresher-content .refresher-refreshing{display:block}.refresher-completing ion-refresher-content .refresher-refreshing-icon{-webkit-transform:scale(0);transform:scale(0)}.refresher-native .refresher-pulling-text,.refresher-native .refresher-refreshing-text{display:none}.refresher-ios .refresher-pulling-icon,.refresher-ios .refresher-refreshing-icon{color:var(--ion-text-color, #000)}.refresher-ios .refresher-pulling-text,.refresher-ios .refresher-refreshing-text{color:var(--ion-text-color, #000)}.refresher-ios .refresher-refreshing .spinner-lines-ios line,.refresher-ios .refresher-refreshing .spinner-lines-small-ios line,.refresher-ios .refresher-refreshing .spinner-crescent circle{stroke:var(--ion-text-color, #000)}.refresher-ios .refresher-refreshing .spinner-bubbles circle,.refresher-ios .refresher-refreshing .spinner-circles circle,.refresher-ios .refresher-refreshing .spinner-dots circle{fill:var(--ion-text-color, #000)}ion-refresher.refresher-native{display:block;z-index:1}ion-refresher.refresher-native ion-spinner{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0}.refresher-native .refresher-refreshing ion-spinner{--refreshing-rotation-duration:2s;display:none;-webkit-animation:var(--refreshing-rotation-duration) ease-out refresher-rotate forwards;animation:var(--refreshing-rotation-duration) ease-out refresher-rotate forwards}.refresher-native .refresher-refreshing{display:none;-webkit-animation:250ms linear refresher-pop forwards;animation:250ms linear refresher-pop forwards}.refresher-native ion-spinner{width:32px;height:32px;color:var(--ion-color-step-450, var(--ion-background-color-step-450, #747577))}.refresher-native.refresher-refreshing .refresher-pulling ion-spinner,.refresher-native.refresher-completing .refresher-pulling ion-spinner{display:none}.refresher-native.refresher-refreshing .refresher-refreshing ion-spinner,.refresher-native.refresher-completing .refresher-refreshing ion-spinner{display:block}.refresher-native.refresher-pulling .refresher-pulling ion-spinner{display:block}.refresher-native.refresher-pulling .refresher-refreshing ion-spinner{display:none}.refresher-native.refresher-completing ion-refresher-content .refresher-refreshing-icon{-webkit-transform:scale(0) rotate(180deg);transform:scale(0) rotate(180deg);-webkit-transition:300ms;transition:300ms}@-webkit-keyframes refresher-pop{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes refresher-pop{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}100%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes refresher-rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes refresher-rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}",Wce=Gce,qce="ion-refresher{top:0;display:none;position:absolute;width:100%;height:60px;pointer-events:none;z-index:-1}ion-refresher{inset-inline-start:0}ion-refresher.refresher-active{display:block}ion-refresher-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;height:100%}.refresher-pulling,.refresher-refreshing{display:none;width:100%}.refresher-pulling-icon,.refresher-refreshing-icon{-webkit-transform-origin:center;transform-origin:center;-webkit-transition:200ms;transition:200ms;font-size:30px;text-align:center}:host-context([dir=rtl]) .refresher-pulling-icon,:host-context([dir=rtl]) .refresher-refreshing-icon{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}[dir=rtl] .refresher-pulling-icon,[dir=rtl] .refresher-refreshing-icon{-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}@supports selector(:dir(rtl)){.refresher-pulling-icon:dir(rtl),.refresher-refreshing-icon:dir(rtl){-webkit-transform-origin:calc(100% - center);transform-origin:calc(100% - center)}}.refresher-pulling-text,.refresher-refreshing-text{font-size:16px;text-align:center}ion-refresher-content .arrow-container{display:none}.refresher-pulling ion-refresher-content .refresher-pulling{display:block}.refresher-ready ion-refresher-content .refresher-pulling{display:block}.refresher-ready ion-refresher-content .refresher-pulling-icon{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.refresher-refreshing ion-refresher-content .refresher-refreshing{display:block}.refresher-cancelling ion-refresher-content .refresher-pulling{display:block}.refresher-cancelling ion-refresher-content .refresher-pulling-icon{-webkit-transform:scale(0);transform:scale(0)}.refresher-completing ion-refresher-content .refresher-refreshing{display:block}.refresher-completing ion-refresher-content .refresher-refreshing-icon{-webkit-transform:scale(0);transform:scale(0)}.refresher-native .refresher-pulling-text,.refresher-native .refresher-refreshing-text{display:none}.refresher-md .refresher-pulling-icon,.refresher-md .refresher-refreshing-icon{color:var(--ion-text-color, #000)}.refresher-md .refresher-pulling-text,.refresher-md .refresher-refreshing-text{color:var(--ion-text-color, #000)}.refresher-md .refresher-refreshing .spinner-lines-md line,.refresher-md .refresher-refreshing .spinner-lines-small-md line,.refresher-md .refresher-refreshing .spinner-crescent circle{stroke:var(--ion-text-color, #000)}.refresher-md .refresher-refreshing .spinner-bubbles circle,.refresher-md .refresher-refreshing .spinner-circles circle,.refresher-md .refresher-refreshing .spinner-dots circle{fill:var(--ion-text-color, #000)}ion-refresher.refresher-native{display:block;z-index:1}ion-refresher.refresher-native ion-spinner{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:24px;height:24px;color:var(--ion-color-primary, #0054e9)}ion-refresher.refresher-native .spinner-arrow-container{display:inherit}ion-refresher.refresher-native .arrow-container{display:block;position:absolute;width:24px;height:24px}ion-refresher.refresher-native .arrow-container ion-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;left:0;right:0;bottom:-4px;position:absolute;color:var(--ion-color-primary, #0054e9);font-size:12px}ion-refresher.refresher-native.refresher-pulling ion-refresher-content .refresher-pulling,ion-refresher.refresher-native.refresher-ready ion-refresher-content .refresher-pulling{display:-ms-flexbox;display:flex}ion-refresher.refresher-native.refresher-refreshing ion-refresher-content .refresher-refreshing,ion-refresher.refresher-native.refresher-completing ion-refresher-content .refresher-refreshing,ion-refresher.refresher-native.refresher-cancelling ion-refresher-content .refresher-refreshing{display:-ms-flexbox;display:flex}ion-refresher.refresher-native .refresher-pulling-icon{-webkit-transform:translateY(calc(-100% - 10px));transform:translateY(calc(-100% - 10px))}ion-refresher.refresher-native .refresher-pulling-icon,ion-refresher.refresher-native .refresher-refreshing-icon{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;border-radius:100%;-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;display:-ms-flexbox;display:flex;border:1px solid var(--ion-color-step-200, var(--ion-background-color-step-200, #ececec));background:var(--ion-color-step-250, var(--ion-background-color-step-250, #ffffff));-webkit-box-shadow:0px 1px 6px rgba(0, 0, 0, 0.1);box-shadow:0px 1px 6px rgba(0, 0, 0, 0.1)}",Kce=qce,Yce=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionRefresh=at(this,"ionRefresh",7),this.ionPull=at(this,"ionPull",7),this.ionStart=at(this,"ionStart",7),this.appliedStyles=!1,this.didStart=!1,this.progress=0,this.pointerDown=!1,this.needsCompletion=!1,this.didRefresh=!1,this.contentFullscreen=!1,this.lastVelocityY=0,this.animations=[],this.nativeRefresher=!1,this.state=1,this.pullMin=60,this.pullMax=this.pullMin+60,this.closeDuration="280ms",this.snapbackDuration="280ms",this.pullFactor=1,this.disabled=!1}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled)}async checkNativeRefresher(){const e=await vR(this.el,Tt(this));if(e&&!this.nativeRefresher){const t=this.el.closest("ion-content");this.setupNativeRefresher(t)}else e||this.destroyNativeRefresher()}destroyNativeRefresher(){this.scrollEl&&this.scrollListenerCallback&&(this.scrollEl.removeEventListener("scroll",this.scrollListenerCallback),this.scrollListenerCallback=void 0),this.nativeRefresher=!1}async resetNativeRefresher(e,t){this.state=t,Tt(this)==="ios"?await B1(e,void 0,300):await Ty(this.el.querySelector(".refresher-refreshing-icon"),200),this.didRefresh=!1,this.needsCompletion=!1,this.pointerDown=!1,this.animations.forEach(i=>i.destroy()),this.animations=[],this.progress=0,this.state=1}async setupiOSNativeRefresher(e,t){this.elementToTransform=this.scrollEl;const i=e.shadowRoot.querySelectorAll("svg");let s=this.scrollEl.clientHeight*.16;const r=i.length;fi(()=>i.forEach(o=>o.style.setProperty("animation","none"))),this.scrollListenerCallback=()=>{!this.pointerDown&&this.state===1||Cl(()=>{const o=this.scrollEl.scrollTop,a=this.el.clientHeight;if(o>0){if(this.state===8){const u=qo(0,o/(a*.5),1);fi(()=>zce(t,1-u));return}return}this.pointerDown&&(this.didStart||(this.didStart=!0,this.ionStart.emit()),this.pointerDown&&this.ionPull.emit());const l=this.didStart?30:0,c=this.progress=qo(0,(Math.abs(o)-l)/s,1);this.state===8||c===1?(this.pointerDown&&jce(t,this.lastVelocityY),this.didRefresh||(this.beginRefresh(),this.didRefresh=!0,qre({style:Iy.Light}),this.pointerDown||B1(this.elementToTransform,"".concat(a,"px")))):(this.state=2,Hce(i,r,c))})},this.scrollEl.addEventListener("scroll",this.scrollListenerCallback),this.gesture=(await Kn(()=>Promise.resolve().then(()=>zf),void 0)).createGesture({el:this.scrollEl,gestureName:"refresher",gesturePriority:31,direction:"y",threshold:5,onStart:()=>{this.pointerDown=!0,this.didRefresh||B1(this.elementToTransform,"0px"),s===0&&(s=this.scrollEl.clientHeight*.16)},onMove:o=>{this.lastVelocityY=o.velocityY},onEnd:()=>{this.pointerDown=!1,this.didStart=!1,this.needsCompletion?(this.resetNativeRefresher(this.elementToTransform,32),this.needsCompletion=!1):this.didRefresh&&Cl(()=>B1(this.elementToTransform,"".concat(this.el.clientHeight,"px")))}}),this.disabledChanged()}async setupMDNativeRefresher(e,t,i){const s=Mi(t).querySelector("circle"),r=this.el.querySelector("ion-refresher-content .refresher-pulling-icon"),o=Mi(i).querySelector("circle");s!==null&&o!==null&&fi(()=>{s.style.setProperty("animation","none"),i.style.setProperty("animation-delay","-655ms"),o.style.setProperty("animation-delay","-655ms")}),this.gesture=(await Kn(()=>Promise.resolve().then(()=>zf),void 0)).createGesture({el:this.scrollEl,gestureName:"refresher",gesturePriority:31,direction:"y",threshold:5,canStart:()=>this.state!==8&&this.state!==32&&this.scrollEl.scrollTop===0,onStart:a=>{this.progress=0,a.data={animation:void 0,didStart:!1,cancelled:!1}},onMove:a=>{if(a.velocityY<0&&this.progress===0&&!a.data.didStart||a.data.cancelled){a.data.cancelled=!0;return}if(!a.data.didStart){a.data.didStart=!0,this.state=2;const{scrollEl:l}=this,c=l.matches(mg)?"overflow":"--overflow";fi(()=>l.style.setProperty(c,"hidden"));const d=Nce(e),u=Fce(d,r,this.el);a.data.animation=u,u.progressStart(!1,0),this.ionStart.emit(),this.animations.push(u);return}this.progress=qo(0,a.deltaY/180*.5,1),a.data.animation.progressStep(this.progress),this.ionPull.emit()},onEnd:a=>{if(!a.data.didStart)return;this.gesture.enable(!1);const{scrollEl:l}=this,c=l.matches(mg)?"overflow":"--overflow";if(fi(()=>l.style.removeProperty(c)),this.progress<=.4){a.data.animation.progressEnd(0,this.progress,500).onFinish(()=>{this.animations.forEach(h=>h.destroy()),this.animations=[],this.gesture.enable(!0),this.state=1});return}const d=Md([0,0],[0,0],[1,1],[1,1],this.progress)[0],u=Uce(r);this.animations.push(u),fi(async()=>{r.style.setProperty("--ion-pulling-refresher-translate","".concat(d*100,"px")),a.data.animation.progressEnd(),await u.play(),this.beginRefresh(),a.data.animation.destroy(),this.gesture.enable(!0)})}}),this.disabledChanged()}async setupNativeRefresher(e){if(this.scrollListenerCallback||!e||this.nativeRefresher||!this.scrollEl)return;this.setCss(0,"",!1,""),this.nativeRefresher=!0;const t=this.el.querySelector("ion-refresher-content .refresher-pulling ion-spinner"),i=this.el.querySelector("ion-refresher-content .refresher-refreshing ion-spinner");Tt(this)==="ios"?this.setupiOSNativeRefresher(t,i):this.setupMDNativeRefresher(e,t,i)}componentDidUpdate(){this.checkNativeRefresher()}async connectedCallback(){if(this.el.getAttribute("slot")!=="fixed"){console.error('Make sure you use: <ion-refresher slot="fixed">');return}const e=this.el.closest(uA);if(!e){yp(this.el);return}Ra(e,async()=>{const t=e.querySelector(mg);this.scrollEl=await vp(t!=null?t:e),this.backgroundContentEl=await e.getBackgroundElement(),this.contentFullscreen=e.fullscreen,await vR(this.el,Tt(this))?this.setupNativeRefresher(e):(this.gesture=(await Kn(()=>Promise.resolve().then(()=>zf),void 0)).createGesture({el:e,gestureName:"refresher",gesturePriority:31,direction:"y",threshold:20,passive:!1,canStart:()=>this.canStart(),onStart:()=>this.onStart(),onMove:i=>this.onMove(i),onEnd:()=>this.onEnd()}),this.disabledChanged())})}disconnectedCallback(){this.destroyNativeRefresher(),this.scrollEl=void 0,this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async complete(){this.nativeRefresher?(this.needsCompletion=!0,this.pointerDown||Qn(()=>Qn(()=>this.resetNativeRefresher(this.elementToTransform,32)))):this.close(32,"120ms")}async cancel(){this.nativeRefresher?this.pointerDown||Qn(()=>Qn(()=>this.resetNativeRefresher(this.elementToTransform,16))):this.close(16,"")}getProgress(){return Promise.resolve(this.progress)}canStart(){return!(!this.scrollEl||this.state!==1||this.scrollEl.scrollTop>0)}onStart(){this.progress=0,this.state=1,this.memoizeOverflowStyle(),this.contentFullscreen&&this.backgroundContentEl&&this.backgroundContentEl.style.setProperty("--offset-top","0px")}onMove(e){if(!this.scrollEl)return;const t=e.event;if(t.touches!==void 0&&t.touches.length>1||this.state&56)return;const i=Number.isNaN(this.pullFactor)||this.pullFactor<0?1:this.pullFactor,s=e.deltaY*i;if(s<=0){if(this.progress=0,this.state=1,this.appliedStyles){this.setCss(0,"",!1,"");return}return}if(this.state===1){if(this.scrollEl.scrollTop>0){this.progress=0;return}this.state=2}if(t.cancelable&&t.preventDefault(),this.setCss(s,"0ms",!0,""),s===0){this.progress=0;return}const r=this.pullMin;if(this.progress=s/r,this.didStart||(this.didStart=!0,this.ionStart.emit()),this.ionPull.emit(),s<r){this.state=2;return}if(s>this.pullMax){this.beginRefresh();return}this.state=4}onEnd(){this.state===4?this.beginRefresh():this.state===2?this.cancel():this.state===1&&this.restoreOverflowStyle()}beginRefresh(){this.state=8,this.setCss(this.pullMin,this.snapbackDuration,!0,""),this.ionRefresh.emit({complete:this.complete.bind(this)})}close(e,t){setTimeout(()=>{var i;this.state=1,this.progress=0,this.didStart=!1,this.setCss(0,"0ms",!1,"",!0),this.contentFullscreen&&this.backgroundContentEl&&((i=this.backgroundContentEl)===null||i===void 0||i.style.removeProperty("--offset-top"))},600),this.state=e,this.setCss(0,this.closeDuration,!0,t)}setCss(e,t,i,s,r=!1){this.nativeRefresher||(this.appliedStyles=e>0,fi(()=>{if(this.scrollEl&&this.backgroundContentEl){const o=this.scrollEl.style,a=this.backgroundContentEl.style;o.transform=a.transform=e>0?"translateY(".concat(e,"px) translateZ(0px)"):"",o.transitionDuration=a.transitionDuration=t,o.transitionDelay=a.transitionDelay=s,o.overflow=i?"hidden":""}r&&this.restoreOverflowStyle()}))}memoizeOverflowStyle(){if(this.scrollEl){const{overflow:e,overflowX:t,overflowY:i}=this.scrollEl.style;this.overflowStyles={overflow:e!=null?e:"",overflowX:t!=null?t:"",overflowY:i!=null?i:""}}}restoreOverflowStyle(){if(this.overflowStyles!==void 0&&this.scrollEl!==void 0){const{overflow:e,overflowX:t,overflowY:i}=this.overflowStyles;this.scrollEl.style.overflow=e,this.scrollEl.style.overflowX=t,this.scrollEl.style.overflowY=i,this.overflowStyles=void 0}}render(){const e=Tt(this);return q(Yt,{key:"9d4ac22988aec2c6af0b0c90934c52f62f0e4ce3",slot:"fixed",class:{[e]:!0,["refresher-".concat(e)]:!0,"refresher-native":this.nativeRefresher,"refresher-active":this.state!==1,"refresher-pulling":this.state===2,"refresher-ready":this.state===4,"refresher-refreshing":this.state===8,"refresher-cancelling":this.state===16,"refresher-completing":this.state===32}})}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:Wce,md:Kce}}},[32,"ion-refresher",{pullMin:[2,"pull-min"],pullMax:[2,"pull-max"],closeDuration:[1,"close-duration"],snapbackDuration:[1,"snapback-duration"],pullFactor:[2,"pull-factor"],disabled:[4],nativeRefresher:[32],state:[32],complete:[64],cancel:[64],getProgress:[64]},void 0,{disabled:["disabledChanged"]}]);function Xce(){if(typeof customElements>"u")return;["ion-refresher"].forEach(e=>{switch(e){case"ion-refresher":customElements.get(e)||customElements.define(e,Yce);break}})}const Qce=Xce;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Zce=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.customHTMLEnabled=Zt.get("innerHTMLTemplatesEnabled",ub),this.pullingIcon=void 0,this.pullingText=void 0,this.refreshingSpinner=void 0,this.refreshingText=void 0}componentWillLoad(){if(this.pullingIcon===void 0){const e=gN(),t=Tt(this),i=e?"lines":Lne;this.pullingIcon=Zt.get("refreshingIcon",t==="ios"&&e?Zt.get("spinner",i):"circular")}if(this.refreshingSpinner===void 0){const e=Tt(this);this.refreshingSpinner=Zt.get("refreshingSpinner",Zt.get("spinner",e==="ios"?"lines":"circular"))}}renderPullingText(){const{customHTMLEnabled:e,pullingText:t}=this;return e?q("div",{class:"refresher-pulling-text",innerHTML:wp(t)}):q("div",{class:"refresher-pulling-text"},t)}renderRefreshingText(){const{customHTMLEnabled:e,refreshingText:t}=this;return e?q("div",{class:"refresher-refreshing-text",innerHTML:wp(t)}):q("div",{class:"refresher-refreshing-text"},t)}render(){const e=this.pullingIcon,t=e!=null&&uT[e]!==void 0,i=Tt(this);return q(Yt,{key:"19633bbcf02e3dba885d6bdcdaf2269bf4c8e2f5",class:i},q("div",{key:"28922e434a55a6cac0476fe2bee56941ce0d1c02",class:"refresher-pulling"},this.pullingIcon&&t&&q("div",{key:"fe575bf996021884677e9b23a3215d63caf894f5",class:"refresher-pulling-icon"},q("div",{key:"59fe12297fd95bc33b8df8cd35316e2a1c084d91",class:"spinner-arrow-container"},q("ion-spinner",{key:"af9cc013ae04945c140b2865610ca73edb52ab48",name:this.pullingIcon,paused:!0}),i==="md"&&this.pullingIcon==="circular"&&q("div",{key:"34df66ad1b0f706a0532957251aa2c20bf4587d8",class:"arrow-container"},q("ion-icon",{key:"ffdb5c123e606b823491c6c51cc2b497f62581bb",icon:One,"aria-hidden":"true"})))),this.pullingIcon&&!t&&q("div",{key:"ac3a2032bb969264d20fa057e9123441005d7a9d",class:"refresher-pulling-icon"},q("ion-icon",{key:"d969d10915548e72aae289b52154366f3dd39b31",icon:this.pullingIcon,lazy:!1,"aria-hidden":"true"})),this.pullingText!==void 0&&this.renderPullingText()),q("div",{key:"a8f854f81a94812d7bef8ce088331d94f49ff53d",class:"refresher-refreshing"},this.refreshingSpinner&&q("div",{key:"a1f646945370e40c844d62bc0c647443ae9dfbe7",class:"refresher-refreshing-icon"},q("ion-spinner",{key:"ab3ff4047769b6436e222b46d193c1e8b23e2fce",name:this.refreshingSpinner})),this.refreshingText!==void 0&&this.renderRefreshingText()))}get el(){return this}},[0,"ion-refresher-content",{pullingIcon:[1025,"pulling-icon"],pullingText:[1,"pulling-text"],refreshingSpinner:[1025,"refreshing-spinner"],refreshingText:[1,"refreshing-text"]}]);function Jce(){if(typeof customElements>"u")return;["ion-refresher-content","ion-icon","ion-spinner"].forEach(e=>{switch(e){case"ion-refresher-content":customElements.get(e)||customElements.define(e,Zce);break;case"ion-icon":customElements.get(e)||$l();break;case"ion-spinner":customElements.get(e)||fx();break}})}const ede=Jce;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const tde=":host([slot]){display:none;line-height:0;z-index:100}.reorder-icon{display:block}::slotted(ion-icon){font-size:dynamic-font(16px)}.reorder-icon{font-size:2.125rem;opacity:0.4}",nde=tde,ide=":host([slot]){display:none;line-height:0;z-index:100}.reorder-icon{display:block}::slotted(ion-icon){font-size:dynamic-font(16px)}.reorder-icon{font-size:1.9375rem;opacity:0.3}",sde=ide,rde=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow()}onClick(e){const t=this.el.closest("ion-reorder-group");e.preventDefault(),(!t||!t.disabled)&&e.stopImmediatePropagation()}render(){const e=Tt(this);return q(Yt,{key:"27266e30bcb7e10c57fb6d546399cfb1f1c93b23",class:e},q("slot",{key:"8745cb9a31458e884c27eed1fb90d104fe9a79eb"},q("ion-icon",{key:"6c4b9631a2f5610f1e21b2db025b6702d0d593bf",icon:e==="ios"?Une:zne,lazy:!1,class:"reorder-icon",part:"icon","aria-hidden":"true"})))}get el(){return this}static get style(){return{ios:nde,md:sde}}},[33,"ion-reorder",void 0,[[2,"click","onClick"]]]);function ode(){if(typeof customElements>"u")return;["ion-reorder","ion-icon"].forEach(e=>{switch(e){case"ion-reorder":customElements.get(e)||customElements.define(e,rde);break;case"ion-icon":customElements.get(e)||$l();break}})}const ade=ode,lde=".reorder-list-active>*{display:block;-webkit-transition:-webkit-transform 300ms;transition:-webkit-transform 300ms;transition:transform 300ms;transition:transform 300ms, -webkit-transform 300ms;will-change:transform}.reorder-enabled{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reorder-enabled ion-reorder{display:block;cursor:-webkit-grab;cursor:grab;pointer-events:all;-ms-touch-action:none;touch-action:none}.reorder-selected,.reorder-selected ion-reorder{cursor:-webkit-grabbing;cursor:grabbing}.reorder-selected{position:relative;-webkit-transition:none !important;transition:none !important;-webkit-box-shadow:0 0 10px rgba(0, 0, 0, 0.4);box-shadow:0 0 10px rgba(0, 0, 0, 0.4);opacity:0.8;z-index:100}.reorder-visible ion-reorder .reorder-icon{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}",cde=lde,dde=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionItemReorder=at(this,"ionItemReorder",7),this.lastToIndex=-1,this.cachedHeights=[],this.scrollElTop=0,this.scrollElBottom=0,this.scrollElInitial=0,this.containerTop=0,this.containerBottom=0,this.state=0,this.disabled=!0}disabledChanged(){this.gesture&&this.gesture.enable(!this.disabled)}async connectedCallback(){const e=hx(this.el);e&&(this.scrollEl=await vp(e)),this.gesture=(await Kn(()=>Promise.resolve().then(()=>zf),void 0)).createGesture({el:this.el,gestureName:"reorder",gesturePriority:110,threshold:0,direction:"y",passive:!1,canStart:t=>this.canStart(t),onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:()=>this.onEnd()}),this.disabledChanged()}disconnectedCallback(){this.onEnd(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}complete(e){return Promise.resolve(this.completeReorder(e))}canStart(e){if(this.selectedItemEl||this.state!==0)return!1;const i=e.event.target.closest("ion-reorder");if(!i)return!1;const s=ude(i,this.el);return s?(e.data=s,!0):!1}onStart(e){e.event.preventDefault();const t=this.selectedItemEl=e.data,i=this.cachedHeights;i.length=0;const s=this.el,r=s.children;if(!r||r.length===0)return;let o=0;for(let l=0;l<r.length;l++){const c=r[l];o+=c.offsetHeight,i.push(o),c.$ionIndex=l}const a=s.getBoundingClientRect();if(this.containerTop=a.top,this.containerBottom=a.bottom,this.scrollEl){const l=this.scrollEl.getBoundingClientRect();this.scrollElInitial=this.scrollEl.scrollTop,this.scrollElTop=l.top+yR,this.scrollElBottom=l.bottom-yR}else this.scrollElInitial=0,this.scrollElTop=0,this.scrollElBottom=0;this.lastToIndex=V1(t),this.selectedItemHeight=t.offsetHeight,this.state=1,t.classList.add(wR),iA()}onMove(e){const t=this.selectedItemEl;if(!t)return;const i=this.autoscroll(e.currentY),s=this.containerTop-i,r=this.containerBottom-i,o=Math.max(s,Math.min(e.currentY,r)),a=i+o-e.startY,l=o-s,c=this.itemIndexForTop(l);if(c!==this.lastToIndex){const d=V1(t);this.lastToIndex=c,sA(),this.reorderMove(d,c)}t.style.transform="translateY(".concat(a,"px)")}onEnd(){const e=this.selectedItemEl;if(this.state=2,!e){this.state=0;return}const t=this.lastToIndex,i=V1(e);t===i?this.completeReorder():this.ionItemReorder.emit({from:i,to:t,complete:this.completeReorder.bind(this)}),rA()}completeReorder(e){const t=this.selectedItemEl;if(t&&this.state===2){const i=this.el.children,s=i.length,r=this.lastToIndex,o=V1(t);Qn(()=>{if(r!==o&&(e===void 0||e===!0)){const a=o<r?i[r+1]:i[r];this.el.insertBefore(t,a)}for(let a=0;a<s;a++)i[a].style.transform=""}),Array.isArray(e)&&(e=fde(e,o,r)),t.style.transition="",t.classList.remove(wR),this.selectedItemEl=void 0,this.state=0}return e}itemIndexForTop(e){const t=this.cachedHeights;for(let i=0;i<t.length;i++)if(t[i]>e)return i;return t.length-1}reorderMove(e,t){const i=this.selectedItemHeight,s=this.el.children;for(let r=0;r<s.length;r++){const o=s[r].style;let a="";r>e&&r<=t?a="translateY(".concat(-i,"px)"):r<e&&r>=t&&(a="translateY(".concat(i,"px)")),o.transform=a}}autoscroll(e){if(!this.scrollEl)return 0;let t=0;return e<this.scrollElTop?t=-10:e>this.scrollElBottom&&(t=hde),t!==0&&this.scrollEl.scrollBy(0,t),this.scrollEl.scrollTop-this.scrollElInitial}render(){const e=Tt(this);return q(Yt,{key:"a38c7fbceb677201330a602273d5b55abb32da19",class:{[e]:!0,"reorder-enabled":!this.disabled,"reorder-list-active":this.state!==0}})}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return cde}},[0,"ion-reorder-group",{disabled:[4],state:[32],complete:[64]},void 0,{disabled:["disabledChanged"]}]),V1=n=>n.$ionIndex,ude=(n,e)=>{let t;for(;n;){if(t=n.parentElement,t===e)return n;n=t}},yR=60,hde=10,wR="reorder-selected",fde=(n,e,t)=>{const i=n[e];return n.splice(e,1),n.splice(t,0,i),n.slice()};function pde(){if(typeof customElements>"u")return;["ion-reorder-group"].forEach(e=>{switch(e){case"ion-reorder-group":customElements.get(e)||customElements.define(e,dde);break}})}const mde=pde,gde=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}",bde=gde,vde=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:center;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}:host(.segment-scrollable){-ms-flex-pack:start;justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(-webkit-min-content, 1fr);grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}",yde=vde,wde=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionChange=at(this,"ionChange",7),this.ionSelect=at(this,"ionSelect",7),this.ionStyle=at(this,"ionStyle",7),this.segmentViewEl=null,this.onClick=e=>{const t=e.target,i=this.checked;t.tagName!=="ION-SEGMENT"&&(this.value=t.value,t!==i&&this.emitValueChange(),this.segmentViewEl?(this.updateSegmentView(),this.scrollable&&i&&this.checkButton(i,t)):(this.scrollable||!this.swipeGesture)&&(i?this.checkButton(i,t):this.setCheckedClasses()))},this.onSlottedItemsChange=()=>{this.valueChanged(this.value)},this.getSegmentButton=e=>{var t,i;const s=this.getButtons().filter(o=>!o.disabled),r=s.findIndex(o=>o===document.activeElement);switch(e){case"first":return s[0];case"last":return s[s.length-1];case"next":return(t=s[r+1])!==null&&t!==void 0?t:s[0];case"previous":return(i=s[r-1])!==null&&i!==void 0?i:s[s.length-1];default:return null}},this.activated=!1,this.color=void 0,this.disabled=!1,this.scrollable=!1,this.swipeGesture=!0,this.value=void 0,this.selectOnFocus=!1}colorChanged(e,t){(t===void 0&&e!==void 0||t!==void 0&&e===void 0)&&this.emitStyle()}swipeGestureChanged(){this.gestureChanged()}valueChanged(e,t){if(this.segmentViewEl&&e===void 0){this.value=this.getButtons()[0].value;return}if(t!==void 0&&e!==void 0){const i=this.getButtons(),s=i.find(o=>o.value===t),r=i.find(o=>o.value===e);s&&r&&(this.segmentViewEl?this.triggerScrollOnValueChange!==!1&&this.updateSegmentView():this.checkButton(s,r))}else e!==void 0&&t===void 0&&this.segmentViewEl&&this.updateSegmentView();this.ionSelect.emit({value:e}),this.segmentViewEl||this.scrollActiveButtonIntoView(),this.triggerScrollOnValueChange=void 0}disabledChanged(){if(this.gestureChanged(),this.segmentViewEl)this.segmentViewEl.disabled=this.disabled;else{const e=this.getButtons();for(const t of e)t.disabled=this.disabled}}gestureChanged(){this.gesture&&this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}connectedCallback(){this.emitStyle(),this.segmentViewEl=this.getSegmentView()}disconnectedCallback(){this.segmentViewEl=null}componentWillLoad(){this.emitStyle()}async componentDidLoad(){this.setCheckedClasses(),Qn(()=>{this.scrollActiveButtonIntoView(!1)}),this.gesture=(await Kn(()=>Promise.resolve().then(()=>zf),void 0)).createGesture({el:this.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:!1,onStart:e=>this.onStart(e),onMove:e=>this.onMove(e),onEnd:e=>this.onEnd(e)}),this.gestureChanged(),this.disabled&&this.disabledChanged(),this.updateSegmentView(!1)}onStart(e){this.valueBeforeGesture=this.value,this.activate(e)}onMove(e){this.setNextIndex(e)}onEnd(e){this.setActivated(!1),this.setNextIndex(e,!0),e.event.stopImmediatePropagation();const t=this.value;t!==void 0&&this.valueBeforeGesture!==t&&(this.emitValueChange(),this.updateSegmentView()),this.valueBeforeGesture=void 0}emitValueChange(){const{value:e}=this;this.ionChange.emit({value:e})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find(e=>e.value===this.value)}setActivated(e){this.getButtons().forEach(i=>{i.classList.toggle("segment-button-activated",e)}),this.activated=e}activate(e){const t=e.event.target,s=this.getButtons().find(r=>r.value===this.value);t.tagName==="ION-SEGMENT-BUTTON"&&(s||(this.value=t.value,this.setCheckedClasses()),this.value===t.value&&this.setActivated(!0))}getIndicator(e){return(e.shadowRoot||e).querySelector(".segment-button-indicator")}checkButton(e,t){const i=this.getIndicator(e),s=this.getIndicator(t);if(i===null||s===null)return;const r=i.getBoundingClientRect(),o=s.getBoundingClientRect(),a=r.width/o.width,l=r.left-o.left,c="translate3d(".concat(l,"px, 0, 0) scaleX(").concat(a,")");fi(()=>{s.classList.remove("segment-button-indicator-animated"),s.style.setProperty("transform",c),s.getBoundingClientRect(),s.classList.add("segment-button-indicator-animated"),s.style.setProperty("transform",""),this.scrollActiveButtonIntoView(!0)}),this.value=t.value,this.setCheckedClasses()}setCheckedClasses(){const e=this.getButtons(),i=e.findIndex(s=>s.value===this.value)+1;for(const s of e)s.classList.remove("segment-button-after-checked");i<e.length&&e[i].classList.add("segment-button-after-checked")}getSegmentView(){const t=this.getButtons().find(s=>s.contentId),i=document.querySelector('ion-segment-content[id="'.concat(t==null?void 0:t.contentId,'"]'));return i==null?void 0:i.closest("ion-segment-view")}handleSegmentViewScroll(e){const{scrollRatio:t,isManualScroll:i}=e.detail;if(!i)return;const s=e.target,r=this.segmentViewEl,o=this.el;if(e.composedPath().includes(r)||s!=null&&s.contains(o)){const a=this.getButtons();if(!a.length)return;const l=a.findIndex(u=>u.value===this.value),c=a[l],d=Math.round(t*(a.length-1));(this.lastNextIndex===void 0||this.lastNextIndex!==d)&&(this.lastNextIndex=d,this.triggerScrollOnValueChange=!1,this.checkButton(c,a[d]),this.emitValueChange())}}updateSegmentView(e=!0){const i=this.getButtons().find(r=>r.value===this.value);if(!(i!=null&&i.contentId))return;const s=this.segmentViewEl;s&&s.setContent(i.contentId,e)}scrollActiveButtonIntoView(e=!0){const{scrollable:t,value:i,el:s}=this;if(t){const o=this.getButtons().find(a=>a.value===i);if(o!==void 0){const a=s.getBoundingClientRect(),l=o.getBoundingClientRect(),d=l.x-a.x-a.width/2+l.width/2,u=s.scrollLeft+d;s.scrollTo({top:0,left:u,behavior:e?"smooth":"instant"})}}}setNextIndex(e,t=!1){const i=md(this.el),s=this.activated,r=this.getButtons(),o=r.findIndex(k=>k.value===this.value),a=r[o];let l,c;if(o===-1)return;const d=a.getBoundingClientRect(),u=d.left,h=d.width,f=e.currentX,m=d.top+d.height/2,b=this.el.getRootNode().elementFromPoint(f,m),w=i?f>u+h:f<u,x=i?f<u:f>u+h;if(s&&!t){if(w){const k=o-1;k>=0&&(c=k)}else if(x&&s&&!t){const k=o+1;k<r.length&&(c=k)}c!==void 0&&!r[c].disabled&&(l=r[c])}if(!s&&t&&(l=b),l!=null){if(l.tagName==="ION-SEGMENT")return!1;a!==l&&this.checkButton(a,l)}return!0}emitStyle(){this.ionStyle.emit({segment:!0})}onKeyDown(e){const t=md(this.el);let i=this.selectOnFocus,s;switch(e.key){case"ArrowRight":e.preventDefault(),s=t?this.getSegmentButton("previous"):this.getSegmentButton("next");break;case"ArrowLeft":e.preventDefault(),s=t?this.getSegmentButton("next"):this.getSegmentButton("previous");break;case"Home":e.preventDefault(),s=this.getSegmentButton("first");break;case"End":e.preventDefault(),s=this.getSegmentButton("last");break;case" ":case"Enter":e.preventDefault(),s=document.activeElement,i=!0}if(s){if(i){const r=this.checked;this.checkButton(r||s,s),s!==r&&this.emitValueChange()}s.setFocus()}}render(){const e=Tt(this);return q(Yt,{key:"66bd7a565ba73540b3bbe56dd23b95e59bcef9bc",role:"tablist",onClick:this.onClick,class:ds(this.color,{[e]:!0,"in-toolbar":ts("ion-toolbar",this.el),"in-toolbar-color":ts("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},q("slot",{key:"782c521b1a33729b8eab1c4b879bc3f2ff48ae1b",onSlotchange:this.onSlottedItemsChange}))}get el(){return this}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}static get style(){return{ios:bde,md:yde}}},[33,"ion-segment",{color:[513],disabled:[4],scrollable:[4],swipeGesture:[4,"swipe-gesture"],value:[1032],selectOnFocus:[4,"select-on-focus"],activated:[32]},[[16,"ionSegmentViewScroll","handleSegmentViewScroll"],[0,"keydown","onKeyDown"]],{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}]);function xde(){if(typeof customElements>"u")return;["ion-segment"].forEach(e=>{switch(e){case"ion-segment":customElements.get(e)||customElements.define(e,wde);break}})}const _de=xde;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const kde=':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:none;--background-hover-opacity:0;--background-focused:none;--background-focused-opacity:0;--border-radius:7px;--border-width:1px;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--border-style:solid;--indicator-box-shadow:0 0 5px rgba(0, 0, 0, 0.16);--indicator-color:var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff)));--indicator-height:100%;--indicator-transition:transform 260ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--transition:100ms all linear;--padding-top:0;--padding-end:13px;--padding-bottom:0;--padding-start:13px;margin-top:2px;margin-bottom:2px;position:relative;-ms-flex-direction:row;flex-direction:row;min-width:70px;min-height:28px;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-size:13px;font-weight:450;line-height:37px}:host::before{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;-webkit-transition:160ms opacity ease-in-out;transition:160ms opacity ease-in-out;-webkit-transition-delay:100ms;transition-delay:100ms;border-left:var(--border-width) var(--border-style) var(--border-color);content:"";opacity:1;will-change:opacity}:host(:first-of-type)::before{border-left-color:transparent}:host(.segment-button-disabled){opacity:0.3}::slotted(ion-icon){font-size:24px}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:2px;margin-inline-end:2px}.segment-button-indicator{-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;left:0;right:0;top:0;bottom:0}.segment-button-indicator-background{border-radius:var(--border-radius);background:var(--indicator-color)}.segment-button-indicator-background{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked)::before,:host(.segment-button-after-checked)::before{opacity:0}:host(.segment-button-checked){z-index:-1}:host(.segment-button-activated){--indicator-transform:scale(0.95)}:host(.ion-focused) .button-native{opacity:0.7}@media (any-hover: hover){:host(:hover) .button-native{opacity:0.5}:host(.segment-button-checked:hover) .button-native{opacity:1}}:host(.in-segment-color){background:none;color:var(--ion-text-color, #000)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff)))}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native,:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-text-color, #000)}}:host(.in-toolbar:not(.in-segment-color)){--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, var(--ion-toolbar-color), initial);--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-toolbar-color), initial);--indicator-color:var(--ion-toolbar-segment-indicator-color, var(--ion-color-step-350, var(--ion-background-color-step-350, var(--ion-background-color, #fff))))}:host(.in-toolbar-color) .segment-button-indicator-background{background:var(--ion-color-contrast)}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color):hover) .button-native{color:var(--ion-color-contrast)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color):hover) .button-native{color:var(--ion-color-base)}}',Ede=kde,Tde=':host{--color:initial;--color-hover:var(--color);--color-checked:var(--color);--color-disabled:var(--color);--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column;height:auto;background:var(--background);color:var(--color);text-decoration:none;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;grid-row:1;-webkit-font-kerning:none;font-kerning:none}.button-native{border-radius:0;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;min-width:inherit;max-width:inherit;height:auto;min-height:inherit;max-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:none;outline:none;background:transparent;contain:content;pointer-events:none;overflow:hidden;z-index:2}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}:host(.segment-button-checked){background:var(--background-checked);color:var(--color-checked)}:host(.segment-button-disabled){cursor:default;pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(:focus){outline:none}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.segment-button-checked:hover) .button-native{color:var(--color-checked)}}::slotted(ion-icon){-ms-flex-negative:0;flex-shrink:0;-ms-flex-order:-1;order:-1;pointer-events:none}::slotted(ion-label){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;line-height:22px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.segment-button-layout-icon-top) .button-native{-ms-flex-direction:column;flex-direction:column}:host(.segment-button-layout-icon-start) .button-native{-ms-flex-direction:row;flex-direction:row}:host(.segment-button-layout-icon-end) .button-native{-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.segment-button-layout-icon-bottom) .button-native{-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.segment-button-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.segment-button-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color, var(--color-checked))}.segment-button-indicator{-webkit-transform-origin:left;transform-origin:left;position:absolute;opacity:0;-webkit-box-sizing:border-box;box-sizing:border-box;will-change:transform, opacity;pointer-events:none}.segment-button-indicator-background{width:100%;height:var(--indicator-height);-webkit-transform:var(--indicator-transform);transform:var(--indicator-transform);-webkit-box-shadow:var(--indicator-box-shadow);box-shadow:var(--indicator-box-shadow);pointer-events:none}.segment-button-indicator-animated{-webkit-transition:var(--indicator-transition);transition:var(--indicator-transition)}:host(.segment-button-checked) .segment-button-indicator{opacity:1}@media (prefers-reduced-motion: reduce){.segment-button-indicator-background{-webkit-transform:none;transform:none}.segment-button-indicator-animated{-webkit-transition:none;transition:none}}:host{--background:none;--background-checked:none;--background-hover:var(--color-checked);--background-focused:var(--color-checked);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6);--color-checked:var(--ion-color-primary, #0054e9);--indicator-box-shadow:none;--indicator-color:var(--color-checked);--indicator-height:2px;--indicator-transition:transform 250ms cubic-bezier(0.4, 0, 0.2, 1);--indicator-transform:none;--padding-top:0;--padding-end:16px;--padding-bottom:0;--padding-start:16px;--transition:color 0.15s linear 0s, opacity 0.15s linear 0s;min-width:90px;min-height:48px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);font-size:14px;font-weight:500;letter-spacing:0.06em;line-height:40px;text-transform:uppercase}:host(.segment-button-disabled){opacity:0.3}:host(.in-segment-color){background:none;color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color) ion-ripple-effect{color:var(--ion-color-base)}:host(.in-segment-color) .segment-button-indicator-background{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked) .button-native{color:var(--ion-color-base)}:host(.in-segment-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.in-segment-color:hover) .button-native{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6)}:host(.in-segment-color:hover) .button-native::after{background:var(--ion-color-base)}:host(.in-segment-color.segment-button-checked:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-segment-color)){--background:var(--ion-toolbar-segment-background, none);--background-checked:var(--ion-toolbar-segment-background-checked, none);--color:var(--ion-toolbar-segment-color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.6));--color-checked:var(--ion-toolbar-segment-color-checked, var(--ion-color-primary, #0054e9));--indicator-color:var(--ion-toolbar-segment-color-checked, var(--color-checked))}:host(.in-toolbar-color:not(.in-segment-color)) .button-native{color:rgba(var(--ion-color-contrast-rgb), 0.6)}:host(.in-toolbar-color.segment-button-checked:not(.in-segment-color)) .button-native{color:var(--ion-color-contrast)}@media (any-hover: hover){:host(.in-toolbar-color:not(.in-segment-color)) .button-native::after{background:var(--ion-color-contrast)}}::slotted(ion-icon){margin-top:12px;margin-bottom:12px;font-size:24px}::slotted(ion-label){margin-top:12px;margin-bottom:12px}:host(.segment-button-layout-icon-top) ::slotted(ion-label),:host(.segment-button-layout-icon-bottom) ::slotted(ion-icon){margin-top:0}:host(.segment-button-layout-icon-top) ::slotted(ion-icon),:host(.segment-button-layout-icon-bottom) ::slotted(ion-label){margin-bottom:0}:host(.segment-button-layout-icon-start) ::slotted(ion-label){-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:0;margin-inline-end:0}:host(.segment-button-layout-icon-end) ::slotted(ion-label){-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}:host(.segment-button-has-icon-only) ::slotted(ion-icon){margin-top:12px;margin-bottom:12px}:host(.segment-button-has-label-only) ::slotted(ion-label){margin-top:12px;margin-bottom:12px}.segment-button-indicator{left:0;right:0;bottom:0}.segment-button-indicator-background{background:var(--indicator-color)}:host(.in-toolbar:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-toolbar-segment-indicator-color, var(--indicator-color))}:host(.in-toolbar-color:not(.in-segment-color)) .segment-button-indicator-background{background:var(--ion-color-contrast)}',Cde=Tde;let Sde=0;const Ade=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.segmentEl=null,this.inheritedAttributes={},this.updateStyle=()=>{kc(this)},this.updateState=()=>{const{segmentEl:e}=this;e&&(this.checked=e.value===this.value,e.disabled&&(this.disabled=!0))},this.checked=!1,this.contentId=void 0,this.disabled=!1,this.layout="icon-top",this.type="button",this.value="ion-sb-"+Sde++}valueChanged(){this.updateState()}connectedCallback(){const e=this.segmentEl=this.el.closest("ion-segment");if(e&&(this.updateState(),pp(e,"ionSelect",this.updateState),pp(e,"ionStyle",this.updateStyle)),!this.contentId)return;const t=document.getElementById(this.contentId);if(!t){console.error('Segment Button: Unable to find Segment Content with id="'.concat(this.contentId,'".'));return}if(t.tagName!=="ION-SEGMENT-CONTENT"){console.error('Segment Button: Element with id="'.concat(this.contentId,'" is not an <ion-segment-content> element.'));return}this.disabled&&(console.warn("Segment Button: Segment buttons cannot be disabled when associated with an <ion-segment-content>."),this.disabled=!1)}disconnectedCallback(){const e=this.segmentEl;e&&(Xg(e,"ionSelect",this.updateState),Xg(e,"ionStyle",this.updateStyle),this.segmentEl=null)}componentWillLoad(){this.inheritedAttributes=Object.assign({},Fc(this.el,["aria-label"]))}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}async setFocus(){const{nativeEl:e}=this;e!==void 0&&e.focus()}render(){const{checked:e,type:t,disabled:i,hasIcon:s,hasLabel:r,layout:o,segmentEl:a}=this,l=Tt(this),c=()=>(a==null?void 0:a.color)!==void 0;return q(Yt,{key:"d50a5d5e2f6206e8523598f258d8217d2903f69b",class:{[l]:!0,"in-toolbar":ts("ion-toolbar",this.el),"in-toolbar-color":ts("ion-toolbar[color]",this.el),"in-segment":ts("ion-segment",this.el),"in-segment-color":c(),"segment-button-has-label":r,"segment-button-has-icon":s,"segment-button-has-label-only":r&&!s,"segment-button-has-icon-only":s&&!r,"segment-button-disabled":i,"segment-button-checked":e,["segment-button-layout-".concat(o)]:!0,"ion-activatable":!0,"ion-activatable-instant":!0,"ion-focusable":!0}},q("button",Object.assign({key:"b4f6f145286ba8ab79669e11035b906daa85ae7e","aria-selected":e?"true":"false",role:"tab",ref:d=>this.nativeEl=d,type:t,class:"button-native",part:"native",disabled:i},this.inheritedAttributes),q("span",{key:"67965996c9ffe70553875e00d3da0ae5b2b1d814",class:"button-inner"},q("slot",{key:"5087988fe45a8fdf388ec44c395d0b745b207806"})),l==="md"&&q("ion-ripple-effect",{key:"b24858de0750bbc769b3183fac0077dfe817ba27"})),q("div",{key:"97b4359432acd1c9da0816360cd1df9472e183f7",part:"indicator",class:"segment-button-indicator segment-button-indicator-animated"},q("div",{key:"0561738ea15b0986f4ed3d8276d5e6f2d13f7e51",part:"indicator-background",class:"segment-button-indicator-background"})))}get el(){return this}static get watchers(){return{value:["valueChanged"]}}static get style(){return{ios:Ede,md:Cde}}},[33,"ion-segment-button",{contentId:[513,"content-id"],disabled:[1028],layout:[1],type:[1],value:[8],checked:[32],setFocus:[64]},void 0,{value:["valueChanged"]}]);function Ide(){if(typeof customElements>"u")return;["ion-segment-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-segment-button":customElements.get(e)||customElements.define(e,Ade);break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Pde=Ide;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Rde=":host{scroll-snap-align:center;scroll-snap-stop:always;-ms-flex-negative:0;flex-shrink:0;width:100%}",$de=Rde,Lde=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return q(Yt,{key:"03684b2999ac64fe13e376fd7e7f279976e9d4f2"},q("slot",{key:"143031075bf33ca19e7cfd76fc8a67b83ccaf11c"}))}static get style(){return $de}},[1,"ion-segment-content"]);function Ode(){if(typeof customElements>"u")return;["ion-segment-content"].forEach(e=>{switch(e){case"ion-segment-content":customElements.get(e)||customElements.define(e,Lde);break}})}const Dde=Ode;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mde=":host{display:-ms-flexbox;display:flex;height:100%;overflow-x:scroll;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;scrollbar-width:none;-ms-overflow-style:none}:host::-webkit-scrollbar{display:none}:host(.segment-view-disabled){-ms-touch-action:none;touch-action:none;overflow-x:hidden}:host(.segment-view-scroll-disabled){pointer-events:none}:host(.segment-view-disabled){opacity:0.3}",Nde=Mde,Fde=":host{display:-ms-flexbox;display:flex;height:100%;overflow-x:scroll;-webkit-scroll-snap-type:x mandatory;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;scrollbar-width:none;-ms-overflow-style:none}:host::-webkit-scrollbar{display:none}:host(.segment-view-disabled){-ms-touch-action:none;touch-action:none;overflow-x:hidden}:host(.segment-view-scroll-disabled){pointer-events:none}:host(.segment-view-disabled){opacity:0.3}",Bde=Fde,Vde=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionSegmentViewScroll=at(this,"ionSegmentViewScroll",7),this.scrollEndTimeout=null,this.isTouching=!1,this.disabled=!1,this.isManualScroll=void 0}handleScroll(e){var t;const{scrollLeft:i,scrollWidth:s,clientWidth:r}=e.target,o=i/(s-r);this.ionSegmentViewScroll.emit({scrollRatio:o,isManualScroll:(t=this.isManualScroll)!==null&&t!==void 0?t:!0}),this.resetScrollEndTimeout()}handleScrollStart(){this.scrollEndTimeout&&(clearTimeout(this.scrollEndTimeout),this.scrollEndTimeout=null),this.isTouching=!0}handleTouchEnd(){this.isTouching=!1}resetScrollEndTimeout(){this.scrollEndTimeout&&(clearTimeout(this.scrollEndTimeout),this.scrollEndTimeout=null),this.scrollEndTimeout=setTimeout(()=>{this.checkForScrollEnd()},100)}checkForScrollEnd(){this.isTouching||(this.isManualScroll=void 0)}async setContent(e,t=!0){const s=this.getSegmentContents().findIndex(o=>o.id===e);if(s===-1)return;this.isManualScroll=!1,this.resetScrollEndTimeout();const r=this.el.offsetWidth;this.el.scrollTo({top:0,left:s*r,behavior:t?"smooth":"instant"})}getSegmentContents(){return Array.from(this.el.querySelectorAll("ion-segment-content"))}render(){const{disabled:e,isManualScroll:t}=this;return q(Yt,{key:"9f4f11d31c4db776f077e59ae895b35dd4454717",class:{"segment-view-disabled":e,"segment-view-scroll-disabled":t===!1}},q("slot",{key:"ea58b21f031cee2ab2b70580f336deaefa364538"}))}get el(){return this}static get style(){return{ios:Nde,md:Bde}}},[33,"ion-segment-view",{disabled:[4],isManualScroll:[32],setContent:[64]},[[1,"scroll","handleScroll"],[1,"touchstart","handleScrollStart"],[1,"touchend","handleTouchEnd"]]]);function Ude(){if(typeof customElements>"u")return;["ion-segment-view"].forEach(e=>{switch(e){case"ion-segment-view":customElements.get(e)||customElements.define(e,Vde);break}})}const zde=Ude;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ku=(n,e,t,i)=>{const s=Hde(n)?{capture:!1,passive:!!i.passive}:!1;let r,o;return n.__zone_symbol__addEventListener?(r="__zone_symbol__addEventListener",o="__zone_symbol__removeEventListener"):(r="addEventListener",o="removeEventListener"),n[r](e,t,s),()=>{n[o](e,t,s)}},Hde=n=>{if(U1===void 0)try{const e=Object.defineProperty({},"passive",{get:()=>{U1=!0}});n.addEventListener("optsTest",()=>{},e)}catch(e){U1=!1}return!!U1};let U1;const jde=2e3,Gde=(n,e,t,i,s)=>{let r,o,a,l,c,d,u,h=0;const f=P=>{h=Date.now()+jde,e(P)&&(!o&&t&&(o=ku(n,"touchmove",t,s)),a||(a=ku(P.target,"touchend",g,s)),l||(l=ku(P.target,"touchcancel",g,s)))},m=P=>{h>Date.now()||e(P)&&(!d&&t&&(d=ku(xR(n),"mousemove",t,s)),u||(u=ku(xR(n),"mouseup",b,s)))},g=P=>{w(),i&&i(P)},b=P=>{x(),i&&i(P)},w=()=>{o&&o(),a&&a(),l&&l(),o=a=l=void 0},x=()=>{d&&d(),u&&u(),d=u=void 0},k=()=>{w(),x()},E=(P=!0)=>{P?(r||(r=ku(n,"touchstart",f,s)),c||(c=ku(n,"mousedown",m,s))):(r&&r(),c&&c(),r=c=void 0,k())};return{enable:E,stop:k,destroy:()=>{E(!1),i=t=e=void 0}}},xR=n=>n instanceof Document?n:n.ownerDocument,Wde=(n,e,t)=>{const i=t*(Math.PI/180),s=n==="x",r=Math.cos(i),o=e*e;let a=0,l=0,c=!1,d=0;return{start(u,h){a=u,l=h,d=0,c=!0},detect(u,h){if(!c)return!1;const f=u-a,m=h-l,g=f*f+m*m;if(g<o)return!1;const b=Math.sqrt(g),w=(s?f:m)/b;return w>r?d=1:w<-r?d=-1:d=0,c=!1,!0},isGesture(){return d!==0},getDirection(){return d}}},hb=n=>{let e=!1,t=!1,i=!0,s=!1;const r=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},n),o=r.canStart,a=r.onWillStart,l=r.onStart,c=r.onEnd,d=r.notCaptured,u=r.onMove,h=r.threshold,f=r.passive,m=r.blurOnStart,g={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},b=Wde(r.direction,r.threshold,r.maxAngle),w=lA.createGesture({name:n.gestureName,priority:n.gesturePriority,disableScroll:n.disableScroll}),x=U=>{const G=vN(U);return t||!i||(bN(U,g),g.startX=g.currentX,g.startY=g.currentY,g.startTime=g.currentTime=G,g.velocityX=g.velocityY=g.deltaX=g.deltaY=0,g.event=U,o&&o(g)===!1)||(w.release(),!w.start())?!1:(t=!0,h===0?T():(b.start(g.startX,g.startY),!0))},k=U=>{if(e){!s&&i&&(s=!0,W2(g,U),requestAnimationFrame(E));return}W2(g,U),b.detect(g.currentX,g.currentY)&&(!b.isGesture()||!T())&&N()},E=()=>{e&&(s=!1,u&&u(g))},T=()=>w.capture()?(e=!0,i=!1,g.startX=g.currentX,g.startY=g.currentY,g.startTime=g.currentTime,a?a(g).then(C):C(),!0):!1,P=()=>{if(typeof document<"u"){const U=document.activeElement;U!=null&&U.blur&&U.blur()}},C=()=>{m&&P(),l&&l(g),i=!0},A=()=>{e=!1,t=!1,s=!1,i=!0,w.release()},R=U=>{const G=e,B=i;if(A(),!!B){if(W2(g,U),G){c&&c(g);return}d&&d(g)}},M=Gde(r.el,x,k,R,{capture:!1,passive:f}),N=()=>{A(),M.stop(),d&&d(g)};return{enable(U=!0){U||(e&&R(void 0),A()),M.enable(U)},destroy(){w.destroy(),M.destroy()}}},W2=(n,e)=>{if(!e)return;const t=n.currentX,i=n.currentY,s=n.currentTime;bN(e,n);const r=n.currentX,o=n.currentY,l=(n.currentTime=vN(e))-s;if(l>0&&l<100){const c=(r-t)/l,d=(o-i)/l;n.velocityX=c*.7+n.velocityX*.3,n.velocityY=d*.7+n.velocityY*.3}n.deltaX=r-n.startX,n.deltaY=o-n.startY,n.event=e},bN=(n,e)=>{let t=0,i=0;if(n){const s=n.changedTouches;if(s&&s.length>0){const r=s[0];t=r.clientX,i=r.clientY}else n.pageX!==void 0&&(t=n.pageX,i=n.pageY)}e.currentX=t,e.currentY=i},vN=n=>n.timeStamp||Date.now(),zf=Object.freeze(Object.defineProperty({__proto__:null,GESTURE_CONTROLLER:lA,createGesture:hb},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yN=(n,e)=>{let t,i;const s=(a,l,c)=>{if(typeof document>"u")return;const d=document.elementFromPoint(a,l);if(!d||!e(d)||d.disabled){o();return}d!==t&&(o(),r(d,c))},r=(a,l)=>{t=a,i||(i=t);const c=t;fi(()=>c.classList.add("ion-activated")),l()},o=(a=!1)=>{if(!t)return;const l=t;fi(()=>l.classList.remove("ion-activated")),a&&i!==t&&t.click(),t=void 0};return hb({el:n,gestureName:"buttonActiveDrag",threshold:0,onStart:a=>s(a.currentX,a.currentY,iA),onMove:a=>s(a.currentX,a.currentY,sA),onEnd:()=>{o(!0),rA(),i=void 0}})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const qde=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([t,i])},Kde=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([t,i])},Yde=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([t,i])},Xde=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),e.addElement(n).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([t,i])},Qde='.sc-ion-action-sheet-ios-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-ios-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-ios{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-ios{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-ios::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-ios{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-ios{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-ios:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--backdrop-opacity:var(--ion-backdrop-opacity, 0.4);--button-background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent;--button-background-activated:var(--ion-text-color, #000);--button-background-activated-opacity:.08;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-background-selected:var(--ion-color-step-150, var(--ion-background-color-step-150, var(--ion-background-color, #fff)));--button-background-selected-opacity:1;--button-color:var(--ion-color-primary, #0054e9);--button-color-disabled:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--color:var(--ion-color-step-400, var(--ion-text-color-step-600, #999999));text-align:center}.action-sheet-wrapper.sc-ion-action-sheet-ios{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);padding-bottom:var(--ion-safe-area-bottom, 0);-webkit-box-sizing:content-box;box-sizing:content-box}.action-sheet-container.sc-ion-action-sheet-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:0;padding-bottom:0}.action-sheet-group.sc-ion-action-sheet-ios{border-radius:13px;margin-bottom:8px}.action-sheet-group.sc-ion-action-sheet-ios:first-child{margin-top:10px}.action-sheet-group.sc-ion-action-sheet-ios:last-child{margin-bottom:10px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-group.sc-ion-action-sheet-ios{background-color:transparent;-webkit-backdrop-filter:saturate(280%) blur(20px);backdrop-filter:saturate(280%) blur(20px)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-title.sc-ion-action-sheet-ios,.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.sc-ion-action-sheet-ios{background-color:transparent;background-image:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)), to(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8))), -webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4)), color-stop(50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8)));background-image:linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 100%), linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4) 50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 50%);background-repeat:no-repeat;background-position:top, bottom;background-size:100% calc(100% - 1px), 100% 1px;-webkit-backdrop-filter:saturate(120%);backdrop-filter:saturate(120%)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.ion-activated.sc-ion-action-sheet-ios{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.7);background-image:none}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-cancel.sc-ion-action-sheet-ios{background:var(--button-background-selected)}}.action-sheet-title.sc-ion-action-sheet-ios{background:-webkit-gradient(linear, left bottom, left top, from(rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)), color-stop(50%, transparent)) bottom/100% 1px no-repeat transparent;background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent}.action-sheet-title.sc-ion-action-sheet-ios{-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:14px;padding-bottom:13px;color:var(--color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-size:max(13px, 0.8125rem);font-weight:400;text-align:center}.action-sheet-title.action-sheet-has-sub-title.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-sub-title.sc-ion-action-sheet-ios{padding-left:0;padding-right:0;padding-top:6px;padding-bottom:0;font-size:max(13px, 0.8125rem);font-weight:400}.action-sheet-button.sc-ion-action-sheet-ios{-webkit-padding-start:14px;padding-inline-start:14px;-webkit-padding-end:14px;padding-inline-end:14px;padding-top:14px;padding-bottom:14px;min-height:56px;font-size:max(20px, 1.25rem);contain:content}.action-sheet-button.sc-ion-action-sheet-ios .action-sheet-icon.sc-ion-action-sheet-ios{-webkit-margin-end:0.3em;margin-inline-end:0.3em;font-size:max(28px, 1.75rem);pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios:last-child{background-image:none}.action-sheet-selected.sc-ion-action-sheet-ios{font-weight:bold}.action-sheet-cancel.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-cancel.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-destructive.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-activated.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-focused.sc-ion-action-sheet-ios{color:var(--ion-color-danger, #c5000f)}@media (any-hover: hover){.action-sheet-destructive.sc-ion-action-sheet-ios:hover{color:var(--ion-color-danger, #c5000f)}}',Zde=Qde,Jde='.sc-ion-action-sheet-md-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:auto;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-md-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-md{left:0;right:0;bottom:0;-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-md{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md:disabled{color:var(--button-color-disabled);opacity:0.4}.action-sheet-button-inner.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-md{display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:end;justify-content:flex-end;height:100%;max-height:calc(100vh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)));max-height:calc(100dvh - (var(--ion-safe-area-top, 0) + var(--ion-safe-area-bottom, 0)))}.action-sheet-group.sc-ion-action-sheet-md{-ms-flex-negative:2;flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}@media (any-pointer: coarse){.action-sheet-group.sc-ion-action-sheet-md::-webkit-scrollbar{display:none}}.action-sheet-group-cancel.sc-ion-action-sheet-md{-ms-flex-negative:0;flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-md{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-md::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-md:not(:disabled):hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);--button-background:transparent;--button-background-selected:currentColor;--button-background-selected-opacity:0;--button-background-activated:transparent;--button-background-activated-opacity:0;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--button-color-disabled:var(--button-color);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}.action-sheet-wrapper.sc-ion-action-sheet-md{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:var(--ion-safe-area-top, 0);margin-bottom:0}.action-sheet-title.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:20px;padding-bottom:17px;min-height:60px;color:var(--color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54));font-size:1rem;text-align:start}.action-sheet-sub-title.sc-ion-action-sheet-md{padding-left:0;padding-right:0;padding-top:16px;padding-bottom:0;font-size:0.875rem}.action-sheet-group.sc-ion-action-sheet-md:first-child{padding-top:0}.action-sheet-group.sc-ion-action-sheet-md:last-child{padding-bottom:var(--ion-safe-area-bottom)}.action-sheet-button.sc-ion-action-sheet-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:12px;position:relative;min-height:52px;font-size:1rem;text-align:start;contain:content;overflow:hidden}.action-sheet-icon.sc-ion-action-sheet-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:32px;margin-inline-end:32px;margin-top:0;margin-bottom:0;color:var(--color);font-size:1.5rem}.action-sheet-button-inner.sc-ion-action-sheet-md{-ms-flex-pack:start;justify-content:flex-start}.action-sheet-selected.sc-ion-action-sheet-md{font-weight:bold}',eue=Jde,tue=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.didPresent=at(this,"ionActionSheetDidPresent",7),this.willPresent=at(this,"ionActionSheetWillPresent",7),this.willDismiss=at(this,"ionActionSheetWillDismiss",7),this.didDismiss=at(this,"ionActionSheetDidDismiss",7),this.didPresentShorthand=at(this,"didPresent",7),this.willPresentShorthand=at(this,"willPresent",7),this.willDismissShorthand=at(this,"willDismiss",7),this.didDismissShorthand=at(this,"didDismiss",7),this.delegateController=cx(this),this.lockController=Ch(),this.triggerController=db(),this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Sl)},this.dispatchCancelHandler=e=>{const t=e.detail.role;if(uh(t)){const i=this.getButtons().find(s=>s.role==="cancel");this.callButtonHandler(i)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.buttons=[],this.cssClass=void 0,this.backdropDismiss=!0,this.header=void 0,this.subHeader=void 0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom(),await qp(this,"actionSheetEnter",qde,Yde),e()}async dismiss(e,t){const i=await this.lockController.lock(),s=await Kp(this,e,t,"actionSheetLeave",Kde,Xde);return s&&this.delegateController.removeViewFromDom(),i(),s}onDidDismiss(){return Xo(this.el,"ionActionSheetDidDismiss")}onWillDismiss(){return Xo(this.el,"ionActionSheetWillDismiss")}async buttonClick(e){const t=e.role;return uh(t)?this.dismiss(e.data,t):await this.callButtonHandler(e)?this.dismiss(e.data,e.role):Promise.resolve()}async callButtonHandler(e){return!(e&&await pg(e.handler)===!1)}getButtons(){return this.buttons.map(e=>typeof e=="string"?{text:e}:e)}connectedCallback(){Gp(this.el),this.triggerChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.triggerController.removeClickListener()}componentWillLoad(){var e;!((e=this.htmlAttributes)===null||e===void 0)&&e.id||Wp(this.el)}componentDidLoad(){const{groupEl:e,wrapperEl:t}=this;!this.gesture&&Tt(this)==="ios"&&t&&e&&Cl(()=>{e.scrollHeight>e.clientHeight||(this.gesture=yN(t,s=>s.classList.contains("action-sheet-button")),this.gesture.enable(!0))}),this.isOpen===!0&&Qn(()=>this.present()),this.triggerChanged()}render(){const{header:e,htmlAttributes:t,overlayIndex:i}=this,s=Tt(this),r=this.getButtons(),o=r.find(c=>c.role==="cancel"),a=r.filter(c=>c.role!=="cancel"),l="action-sheet-".concat(i,"-header");return q(Yt,Object.assign({key:"7bbd202ca9e19727e7514abbe073687d982f80c3",role:"dialog","aria-modal":"true","aria-labelledby":e!==void 0?l:null,tabindex:"-1"},t,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign(Object.assign({[s]:!0},Ko(this.cssClass)),{"overlay-hidden":!0,"action-sheet-translucent":this.translucent}),onIonActionSheetWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),q("ion-backdrop",{key:"23344a9221a2e6720d7b9de5249dc37256cafa7b",tappable:this.backdropDismiss}),q("div",{key:"fbc2ba15549c2ab04e759e82df6e177fd80cc0a6",tabindex:"0","aria-hidden":"true"}),q("div",{key:"748ee5235d0b4cb26d6f1b7589f77af2e37ad28a",class:"action-sheet-wrapper ion-overlay-wrapper",ref:c=>this.wrapperEl=c},q("div",{key:"7ce5fa236cf75e9b1e49c4725c9a811078706554",class:"action-sheet-container"},q("div",{key:"dc2251f3bcee4a93e3449f09621cbd2b65d329e9",class:"action-sheet-group",ref:c=>this.groupEl=c},e!==void 0&&q("div",{key:"48d325c8a852f56ed57a9ada1a6709d05ba32ee2",id:l,class:{"action-sheet-title":!0,"action-sheet-has-sub-title":this.subHeader!==void 0}},e,this.subHeader&&q("div",{key:"66093728052eb67f37a35f3232761ce4a08896f3",class:"action-sheet-sub-title"},this.subHeader)),a.map(c=>q("button",Object.assign({},c.htmlAttributes,{type:"button",id:c.id,class:_R(c),onClick:()=>this.buttonClick(c),disabled:c.disabled}),q("span",{class:"action-sheet-button-inner"},c.icon&&q("ion-icon",{icon:c.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),c.text),s==="md"&&q("ion-ripple-effect",null)))),o&&q("div",{key:"f4eb8e3e2885b85af5080df18d0de0bdd1d719de",class:"action-sheet-group action-sheet-group-cancel"},q("button",Object.assign({key:"169f4eb09255aba85062baad49ceb151239fbfb7"},o.htmlAttributes,{type:"button",class:_R(o),onClick:()=>this.buttonClick(o)}),q("span",{key:"25fb8a466dd67ea94c79cfb4f9965527e1ce6d42",class:"action-sheet-button-inner"},o.icon&&q("ion-icon",{key:"eb5b071e120a2c86afdf967af6a763a43044d1ca",icon:o.icon,"aria-hidden":"true",lazy:!1,class:"action-sheet-icon"}),o.text),s==="md"&&q("ion-ripple-effect",{key:"452ad7e1052b2c681e2d98de8193949755ad4d54"}))))),q("div",{key:"e1cecf280c987c050d9445e2c458b903f153089b",tabindex:"0","aria-hidden":"true"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:Zde,md:eue}}},[34,"ion-action-sheet",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],buttons:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],header:[1],subHeader:[1,"sub-header"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),_R=n=>Object.assign({"action-sheet-button":!0,"ion-activatable":!n.disabled,"ion-focusable":!n.disabled,["action-sheet-".concat(n.role)]:n.role!==void 0},Ko(n.cssClass));function nue(){if(typeof customElements>"u")return;["ion-action-sheet","ion-backdrop","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-action-sheet":customElements.get(e)||customElements.define(e,tue);break;case"ion-backdrop":customElements.get(e)||Eh();break;case"ion-icon":customElements.get(e)||$l();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const iue=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},sue=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},rue=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),e.addElement(n).easing("ease-in-out").duration(150).addAnimation([t,i])},oue=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),e.addElement(n).easing("ease-in-out").duration(150).addAnimation([t,i])},aue=".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-label.sc-ion-alert-ios,.alert-radio-label.sc-ion-alert-ios{overflow-wrap:anywhere}@media (any-pointer: coarse){.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:0.875rem;line-height:1.25rem;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--max-width:clamp(270px, 16.875rem, 324px);--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:max(14px, 0.875rem)}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:12px;padding-bottom:7px;text-align:center}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:max(17px, 1.0625rem);font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));font-size:max(14px, 0.875rem)}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:max(13px, 0.8125rem);text-align:center}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:7px;margin-top:10px;-webkit-padding-start:7px;padding-inline-start:7px;-webkit-padding-end:7px;padding-inline-end:7px;padding-top:7px;padding-bottom:7px;border:0.55px solid var(--ion-color-step-250, var(--ion-background-color-step-250, #bfbfbf));background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:1rem}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-input.sc-ion-alert-ios::-webkit-date-and-time-value{height:18px}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{min-height:44px}.alert-radio-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000)}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #0054e9)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{inset-inline-start:7px}.alert-checkbox-label.sc-ion-alert-ios{-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000)}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px;margin-top:10px;margin-bottom:10px;position:relative;width:min(1.375rem, 55.836px);height:min(1.375rem, 55.836px);border-width:0.125rem;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #0054e9);background-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{top:calc(min(1.375rem, 55.836px) / 8);position:absolute;width:calc(min(1.375rem, 55.836px) / 6 + 1px);height:calc(min(1.375rem, 55.836px) * 0.5);-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:0.125rem;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{inset-inline-start:calc(min(1.375rem, 55.836px) / 3)}.alert-button-group.sc-ion-alert-ios{-webkit-margin-end:-0.55px;margin-inline-end:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}.alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios{border-right:none}[dir=rtl].sc-ion-alert-ios-h .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:none}[dir=rtl].sc-ion-alert-ios .alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:none}@supports selector(:dir(rtl)){.alert-button-group-vertical.sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:none}}.alert-button.sc-ion-alert-ios{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:max(44px, 2.75rem);border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #0054e9);font-size:max(17px, 1.0625rem);overflow:hidden}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child{border-right:0}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:first-child:dir(rtl){border-right:0}}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@supports selector(:dir(rtl)){.alert-button.sc-ion-alert-ios:last-child:dir(rtl){border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #c5000f)}",lue=aue,cue=".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-label.sc-ion-alert-md,.alert-radio-label.sc-ion-alert-md{overflow-wrap:anywhere}@media (any-pointer: coarse){.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:0.875rem;line-height:1.25rem;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;min-height:inherit}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:content}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:0.875rem}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px;padding-top:20px;padding-bottom:15px;text-align:start}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:1.25rem;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:1rem}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.alert-message.sc-ion-alert-md{font-size:1rem}@media screen and (max-width: 767px){.alert-message.sc-ion-alert-md{max-height:266px}}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, var(--ion-text-color-step-600, #999999)));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #0054e9)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;border-top:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));border-bottom:1px solid var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));overflow:auto}@media screen and (max-width: 767px){.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{max-height:266px}}.alert-tappable.sc-ion-alert-md{position:relative;min-height:48px}.alert-radio-label.sc-ion-alert-md{-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:1rem}.alert-radio-icon.sc-ion-alert-md{top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, var(--ion-background-color-step-550, #737373))}.alert-radio-icon.sc-ion-alert-md{inset-inline-start:26px}.alert-radio-inner.sc-ion-alert-md{top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #0054e9)}.alert-radio-inner.sc-ion-alert-md{inset-inline-start:3px}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626))}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;width:calc(100% - 53px);color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:1rem}.alert-checkbox-icon.sc-ion-alert-md{top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, var(--ion-background-color-step-550, #737373));contain:strict}.alert-checkbox-icon.sc-ion-alert-md{inset-inline-start:26px}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #0054e9);background-color:var(--ion-color-primary, #0054e9)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{inset-inline-start:3px}.alert-button-group.sc-ion-alert-md{-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}.alert-button.sc-ion-alert-md{border-radius:2px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px;margin-top:0;margin-bottom:0;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #0054e9);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}@media screen and (min-width: 768px){.sc-ion-alert-md-h{--max-width:min(100vw - 96px, 560px);--max-height:min(100vh - 96px, 560px)}}",due=cue,uue=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.didPresent=at(this,"ionAlertDidPresent",7),this.willPresent=at(this,"ionAlertWillPresent",7),this.willDismiss=at(this,"ionAlertWillDismiss",7),this.didDismiss=at(this,"ionAlertDidDismiss",7),this.didPresentShorthand=at(this,"didPresent",7),this.willPresentShorthand=at(this,"willPresent",7),this.willDismissShorthand=at(this,"willDismiss",7),this.didDismissShorthand=at(this,"didDismiss",7),this.delegateController=cx(this),this.lockController=Ch(),this.triggerController=db(),this.customHTMLEnabled=Zt.get("innerHTMLTemplatesEnabled",ub),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Sl)},this.dispatchCancelHandler=e=>{const t=e.detail.role;if(uh(t)){const i=this.processedButtons.find(s=>s.role==="cancel");this.callButtonHandler(i)}},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.header=void 0,this.subHeader=void 0,this.message=void 0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}onKeydown(e){const t=new Set(this.processedInputs.map(a=>a.type));if(t.has("checkbox")&&e.key==="Enter"){e.preventDefault();return}if(!t.has("radio")||e.target&&!this.el.contains(e.target)||e.target.classList.contains("alert-button"))return;const i=this.el.querySelectorAll(".alert-radio"),s=Array.from(i).filter(a=>!a.disabled),r=s.findIndex(a=>a.id===e.target.id);let o;if(["ArrowDown","ArrowRight"].includes(e.key)&&(o=r===s.length-1?s[0]:s[r+1]),["ArrowUp","ArrowLeft"].includes(e.key)&&(o=r===0?s[s.length-1]:s[r-1]),o&&s.includes(o)){const a=this.processedInputs.find(l=>l.id===(o==null?void 0:o.id));a&&(this.rbClick(a),o.focus())}}buttonsChanged(){const e=this.buttons;this.processedButtons=e.map(t=>typeof t=="string"?{text:t,role:t.toLowerCase()==="cancel"?"cancel":void 0}:t)}inputsChanged(){const e=this.inputs,t=e.find(o=>!o.disabled),s=e.find(o=>o.checked&&!o.disabled)||t,r=new Set(e.map(o=>o.type));r.has("checkbox")&&r.has("radio")&&console.warn("Alert cannot mix input types: ".concat(Array.from(r.values()).join("/"),". Please see alert docs for more info.")),this.inputType=r.values().next().value,this.processedInputs=e.map((o,a)=>{var l;return{type:o.type||"text",name:o.name||"".concat(a),placeholder:o.placeholder||"",value:o.value,label:o.label,checked:!!o.checked,disabled:!!o.disabled,id:o.id||"alert-input-".concat(this.overlayIndex,"-").concat(a),handler:o.handler,min:o.min,max:o.max,cssClass:(l=o.cssClass)!==null&&l!==void 0?l:"",attributes:o.attributes||{},tabindex:o.type==="radio"&&o!==s?-1:0}})}connectedCallback(){Gp(this.el),this.triggerChanged()}componentWillLoad(){var e;!((e=this.htmlAttributes)===null||e===void 0)&&e.id||Wp(this.el),this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&Tt(this)==="ios"&&this.wrapperEl&&(this.gesture=yN(this.wrapperEl,e=>e.classList.contains("alert-button")),this.gesture.enable(!0)),this.isOpen===!0&&Qn(()=>this.present()),this.triggerChanged()}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom(),await qp(this,"alertEnter",iue,rue),e()}async dismiss(e,t){const i=await this.lockController.lock(),s=await Kp(this,e,t,"alertLeave",sue,oue);return s&&this.delegateController.removeViewFromDom(),i(),s}onDidDismiss(){return Xo(this.el,"ionAlertDidDismiss")}onWillDismiss(){return Xo(this.el,"ionAlertWillDismiss")}rbClick(e){for(const t of this.processedInputs)t.checked=t===e,t.tabindex=t===e?0:-1;this.activeId=e.id,pg(e.handler,e),kc(this)}cbClick(e){e.checked=!e.checked,pg(e.handler,e),kc(this)}async buttonClick(e){const t=e.role,i=this.getValues();if(uh(t))return this.dismiss({values:i},t);const s=await this.callButtonHandler(e,i);return s!==!1?this.dismiss(Object.assign({values:i},s),e.role):!1}async callButtonHandler(e,t){if(e!=null&&e.handler){const i=await pg(e.handler,t);if(i===!1)return!1;if(typeof i=="object")return i}return{}}getValues(){if(this.processedInputs.length===0)return;if(this.inputType==="radio"){const t=this.processedInputs.find(i=>!!i.checked);return t?t.value:void 0}if(this.inputType==="checkbox")return this.processedInputs.filter(t=>t.checked).map(t=>t.value);const e={};return this.processedInputs.forEach(t=>{e[t.name]=t.value||""}),e}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const e=this.processedInputs,t=Tt(this);return e.length===0?null:q("div",{class:"alert-checkbox-group"},e.map(i=>q("button",{type:"button",onClick:()=>this.cbClick(i),"aria-checked":"".concat(i.checked),id:i.id,disabled:i.disabled,tabIndex:i.tabindex,role:"checkbox",class:Object.assign(Object.assign({},Ko(i.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":i.disabled||!1})},q("div",{class:"alert-button-inner"},q("div",{class:"alert-checkbox-icon"},q("div",{class:"alert-checkbox-inner"})),q("div",{class:"alert-checkbox-label"},i.label)),t==="md"&&q("ion-ripple-effect",null))))}renderRadio(){const e=this.processedInputs;return e.length===0?null:q("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},e.map(t=>q("button",{type:"button",onClick:()=>this.rbClick(t),"aria-checked":"".concat(t.checked),disabled:t.disabled,id:t.id,tabIndex:t.tabindex,class:Object.assign(Object.assign({},Ko(t.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":t.disabled||!1}),role:"radio"},q("div",{class:"alert-button-inner"},q("div",{class:"alert-radio-icon"},q("div",{class:"alert-radio-inner"})),q("div",{class:"alert-radio-label"},t.label)))))}renderInput(){const e=this.processedInputs;return e.length===0?null:q("div",{class:"alert-input-group"},e.map(t=>{var i,s,r,o;return t.type==="textarea"?q("div",{class:"alert-input-wrapper"},q("textarea",Object.assign({placeholder:t.placeholder,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:(s=(i=t.attributes)===null||i===void 0?void 0:i.disabled)!==null&&s!==void 0?s:t.disabled,class:kR(t),onInput:a=>{var l;t.value=a.target.value,!((l=t.attributes)===null||l===void 0)&&l.onInput&&t.attributes.onInput(a)}}))):q("div",{class:"alert-input-wrapper"},q("input",Object.assign({placeholder:t.placeholder,type:t.type,min:t.min,max:t.max,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:(o=(r=t.attributes)===null||r===void 0?void 0:r.disabled)!==null&&o!==void 0?o:t.disabled,class:kR(t),onInput:a=>{var l;t.value=a.target.value,!((l=t.attributes)===null||l===void 0)&&l.onInput&&t.attributes.onInput(a)}})))}))}renderAlertButtons(){const e=this.processedButtons,t=Tt(this),i={"alert-button-group":!0,"alert-button-group-vertical":e.length>2};return q("div",{class:i},e.map(s=>q("button",Object.assign({},s.htmlAttributes,{type:"button",id:s.id,class:hue(s),tabIndex:0,onClick:()=>this.buttonClick(s)}),q("span",{class:"alert-button-inner"},s.text),t==="md"&&q("ion-ripple-effect",null))))}renderAlertMessage(e){const{customHTMLEnabled:t,message:i}=this;return t?q("div",{id:e,class:"alert-message",innerHTML:wp(i)}):q("div",{id:e,class:"alert-message"},i)}render(){const{overlayIndex:e,header:t,subHeader:i,message:s,htmlAttributes:r}=this,o=Tt(this),a="alert-".concat(e,"-hdr"),l="alert-".concat(e,"-sub-hdr"),c="alert-".concat(e,"-msg"),d=this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert",u=t&&i?"".concat(a," ").concat(l):t?a:i?l:null;return q(Yt,Object.assign({key:"ad7e14b4f92a09387aa80abfb718a755e4e889d6",role:d,"aria-modal":"true","aria-labelledby":u,"aria-describedby":s!==void 0?c:null,tabindex:"-1"},r,{style:{zIndex:"".concat(2e4+e)},class:Object.assign(Object.assign({},Ko(this.cssClass)),{[o]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),q("ion-backdrop",{key:"4b4693dca3c910aa9a61c4d90295d785ec6cbe3d",tappable:this.backdropDismiss}),q("div",{key:"64fd19b8f1d8246dcc869053f858bc33506def4b",tabindex:"0","aria-hidden":"true"}),q("div",{key:"e61ba6f339c3a02cecd37d8b641ee5043018eb29",class:"alert-wrapper ion-overlay-wrapper",ref:h=>this.wrapperEl=h},q("div",{key:"044e00667ffcb74aa2c5e0d0b42669c4004dbb4f",class:"alert-head"},t&&q("h2",{key:"1aaae8d58722c4cf5debb1f00415ab7ed0a52bbd",id:a,class:"alert-title"},t),i&&!t&&q("h2",{key:"9c9854dc3b0ad40f1861a49b76d5636afcae9c74",id:l,class:"alert-sub-title"},i),i&&t&&q("h3",{key:"19aaca9912f77cde4ae8079be210eda697ed8de1",id:l,class:"alert-sub-title"},i)),this.renderAlertMessage(c),this.renderAlertInputs(),this.renderAlertButtons()),q("div",{key:"a85d27c516f7cdbc85b19f40d2f0bd865490b6a7",tabindex:"0","aria-hidden":"true"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:lue,md:due}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]],{isOpen:["onIsOpenChange"],trigger:["triggerChanged"],buttons:["buttonsChanged"],inputs:["inputsChanged"]}]),kR=n=>{var e,t,i;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":((t=(e=n.attributes)===null||e===void 0?void 0:e.disabled)!==null&&t!==void 0?t:n.disabled)||!1},Ko(n.cssClass)),Ko(n.attributes?(i=n.attributes.class)===null||i===void 0?void 0:i.toString():""))},hue=n=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,["alert-button-role-".concat(n.role)]:n.role!==void 0},Ko(n.cssClass));function fue(){if(typeof customElements>"u")return;["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-alert":customElements.get(e)||customElements.define(e,uue);break;case"ion-backdrop":customElements.get(e)||Eh();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const My="ionKeyboardDidShow",wN="ionKeyboardDidHide",pue=150;let Ny={},wc={},Yp=!1;const mue=()=>{Ny={},wc={},Yp=!1},gue=n=>{if(aN.getEngine())bue(n);else{if(!n.visualViewport)return;wc=bA(n.visualViewport),n.visualViewport.onresize=()=>{kN(n),xN()||_N(n)?pA(n):gA(n)&&mA(n)}}},bue=n=>{n.addEventListener("keyboardDidShow",e=>pA(n,e)),n.addEventListener("keyboardDidHide",()=>mA(n))},pA=(n,e)=>{vue(n,e),Yp=!0},mA=n=>{yue(n),Yp=!1},xN=()=>{const n=(Ny.height-wc.height)*wc.scale;return!Yp&&Ny.width===wc.width&&n>pue},_N=n=>Yp&&!gA(n),gA=n=>Yp&&wc.height===n.innerHeight,vue=(n,e)=>{const t=e?e.keyboardHeight:n.innerHeight-wc.height,i=new CustomEvent(My,{detail:{keyboardHeight:t}});n.dispatchEvent(i)},yue=n=>{const e=new CustomEvent(wN);n.dispatchEvent(e)},kN=n=>{Ny=Object.assign({},wc),wc=bA(n.visualViewport)},bA=n=>({width:Math.round(n.width),height:Math.round(n.height),offsetTop:n.offsetTop,offsetLeft:n.offsetLeft,pageTop:n.pageTop,pageLeft:n.pageLeft,scale:n.scale}),wue=Object.freeze(Object.defineProperty({__proto__:null,KEYBOARD_DID_CLOSE:wN,KEYBOARD_DID_OPEN:My,copyVisualViewport:bA,keyboardDidClose:gA,keyboardDidOpen:xN,keyboardDidResize:_N,resetKeyboardAssist:mue,setKeyboardClose:mA,setKeyboardOpen:pA,startKeyboardAssist:gue,trackViewportChanges:kN},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var xp;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(xp||(xp={}));const vA={getEngine(){const n=Ay();if(n!=null&&n.isPluginAvailable("StatusBar"))return n.Plugins.StatusBar},setStyle(n){const e=this.getEngine();e&&e.setStyle(n)},getStyle:async function(){const n=this.getEngine();if(!n)return xp.Default;const{style:e}=await n.getInfo();return e}},fT=(n,e)=>{if(e===1)return 0;const t=1/(1-e),i=-(e*t);return n*t+i},EN=()=>{!xi||xi.innerWidth>=768||vA.setStyle({style:xp.Dark})},pT=(n=xp.Default)=>{!xi||xi.innerWidth>=768||vA.setStyle({style:n})},TN=async(n,e)=>{typeof n.canDismiss!="function"||!await n.canDismiss(void 0,yc)||(e.isRunning()?e.onFinish(()=>{n.dismiss(void 0,"handler")},{oneTimeCallback:!0}):n.dismiss(void 0,"handler"))},mT=n=>.00255275*2.71828**(-14.9619*n)-1.00255*2.71828**(-.0380968*n)+1,Fy={MIN_PRESENTING_SCALE:.915},xue=(n,e,t,i)=>{const r=n.offsetHeight;let o=!1,a=!1,l=null,c=null;const d=.2;let u=!0,h=0;const f=()=>l&&Dd(l)?l.scrollY:!0,x=hb({el:n,gestureName:"modalSwipeToClose",gesturePriority:WM,direction:"y",threshold:10,canStart:k=>{const E=k.event.target;return E===null||!E.closest?!0:(l=hx(E),l?(Dd(l)?c=Mi(l).querySelector(".inner-scroll"):c=l,!!!l.querySelector("ion-refresher")&&c.scrollTop===0):E.closest("ion-footer")===null)},onStart:k=>{const{deltaY:E}=k;u=f(),a=n.canDismiss!==void 0&&n.canDismiss!==!0,E>0&&l&&rR(l),e.progressStart(!0,o?1:0)},onMove:k=>{const{deltaY:E}=k;E>0&&l&&rR(l);const T=k.deltaY/r,P=T>=0&&a,C=P?d:.9999,A=P?mT(T/C):T,R=qo(1e-4,A,C);e.progressStep(R),R>=.5&&h<.5?pT(t):R<.5&&h>=.5&&EN(),h=R},onEnd:k=>{const E=k.velocityY,T=k.deltaY/r,P=T>=0&&a,C=P?d:.9999,A=P?mT(T/C):T,R=qo(1e-4,A,C),M=(k.deltaY+E*1e3)/r,N=!P&&M>=.5;let U=N?-.001:.001;N?(e.easing("cubic-bezier(0.32, 0.72, 0, 1)"),U+=Md([0,0],[.32,.72],[0,1],[1,1],R)[0]):(e.easing("cubic-bezier(1, 0, 0.68, 0.28)"),U+=Md([0,0],[1,0],[.68,.28],[1,1],R)[0]);const G=ER(N?T*r:(1-R)*r,E);o=N,x.enable(!1),l&&Sae(l,u),e.onFinish(()=>{N||x.enable(!0)}).progressEnd(N?1:0,U,G),P&&R>C/4?TN(n,e):N&&i()}});return x},ER=(n,e)=>qo(400,n/Math.abs(e*1.1),500),CN=n=>{const{currentBreakpoint:e,backdropBreakpoint:t}=n,i=t===void 0||t<e,s=i?"calc(var(--backdrop-opacity) * ".concat(e,")"):"0",r=bt("backdropAnimation").fromTo("opacity",0,s);return i&&r.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:bt("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:"translateY(".concat(100-e*100,"%)")}]),backdropAnimation:r}},SN=n=>{const{currentBreakpoint:e,backdropBreakpoint:t}=n,i="calc(var(--backdrop-opacity) * ".concat(fT(e,t),")"),s=[{offset:0,opacity:i},{offset:1,opacity:0}],r=[{offset:0,opacity:i},{offset:t,opacity:0},{offset:1,opacity:0}],o=bt("backdropAnimation").keyframes(t!==0?r:s);return{wrapperAnimation:bt("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(".concat(100-e*100,"%)")},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:o}},_ue=()=>{const n=bt().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=bt().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:n,wrapperAnimation:e}},TR=(n,e)=>{const{presentingEl:t,currentBreakpoint:i}=e,s=Mi(n),{wrapperAnimation:r,backdropAnimation:o}=i!==void 0?CN(e):_ue();o.addElement(s.querySelector("ion-backdrop")),r.addElement(s.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const a=bt("entering-base").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(r);if(t){const l=window.innerWidth<768,c=t.tagName==="ION-MODAL"&&t.presentingElement!==void 0,d=Mi(t),u=bt().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),h=document.body;if(l){const f=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",m=c?"-10px":f,g=Fy.MIN_PRESENTING_SCALE,b="translateY(".concat(m,") scale(").concat(g,")");u.afterStyles({transform:b}).beforeAddWrite(()=>h.style.setProperty("background-color","black")).addElement(t).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:b,borderRadius:"10px 10px 0 0"}]),a.addAnimation(u)}else if(a.addAnimation(o),!c)r.fromTo("opacity","0","1");else{const f=c?Fy.MIN_PRESENTING_SCALE:1,m="translateY(-10px) scale(".concat(f,")");u.afterStyles({transform:m}).addElement(d.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:m}]);const g=bt().afterStyles({transform:m}).addElement(d.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:m}]);a.addAnimation([u,g])}}else a.addAnimation(o);return a},kue=()=>{const n=bt().fromTo("opacity","var(--backdrop-opacity)",0),e=bt().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:n,wrapperAnimation:e}},CR=(n,e,t=500)=>{const{presentingEl:i,currentBreakpoint:s}=e,r=Mi(n),{wrapperAnimation:o,backdropAnimation:a}=s!==void 0?SN(e):kue();a.addElement(r.querySelector("ion-backdrop")),o.addElement(r.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});const l=bt("leaving-base").addElement(n).easing("cubic-bezier(0.32,0.72,0,1)").duration(t).addAnimation(o);if(i){const c=window.innerWidth<768,d=i.tagName==="ION-MODAL"&&i.presentingElement!==void 0,u=Mi(i),h=bt().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(m=>{if(m!==1)return;i.style.setProperty("overflow",""),Array.from(f.querySelectorAll("ion-modal:not(.overlay-hidden)")).filter(b=>b.presentingElement!==void 0).length<=1&&f.style.setProperty("background-color","")}),f=document.body;if(c){const m=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",g=d?"-10px":m,b=Fy.MIN_PRESENTING_SCALE,w="translateY(".concat(g,") scale(").concat(b,")");h.addElement(i).keyframes([{offset:0,filter:"contrast(0.85)",transform:w,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),l.addAnimation(h)}else if(l.addAnimation(a),!d)o.fromTo("opacity","1","0");else{const m=d?Fy.MIN_PRESENTING_SCALE:1,g="translateY(-10px) scale(".concat(m,")");h.addElement(u.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:g},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);const b=bt().addElement(u.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:g},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([h,b])}}else l.addAnimation(a);return l},Eue=()=>{const n=bt().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=bt().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:n,wrapperAnimation:e}},Tue=(n,e)=>{const{currentBreakpoint:t}=e,i=Mi(n),{wrapperAnimation:s,backdropAnimation:r}=t!==void 0?CN(e):Eue();return r.addElement(i.querySelector("ion-backdrop")),s.addElement(i.querySelector(".modal-wrapper")),bt().addElement(n).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([r,s])},Cue=()=>{const n=bt().fromTo("opacity","var(--backdrop-opacity)",0),e=bt().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:n,wrapperAnimation:e}},Sue=(n,e)=>{const{currentBreakpoint:t}=e,i=Mi(n),{wrapperAnimation:s,backdropAnimation:r}=t!==void 0?SN(e):Cue();return r.addElement(i.querySelector("ion-backdrop")),s.addElement(i.querySelector(".modal-wrapper")),bt().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([r,s])},Aue=(n,e,t,i,s,r,o=[],a,l,c)=>{const d=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],u=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-s,opacity:0},{offset:1,opacity:0}],h={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:s!==0?u:d},f=n.querySelector("ion-content"),m=t.clientHeight;let g=i,b=0,w=!1;const x=.95,k=r.childAnimations.find(te=>te.id==="wrapperAnimation"),E=r.childAnimations.find(te=>te.id==="backdropAnimation"),T=o[o.length-1],P=o[0],C=()=>{n.style.setProperty("pointer-events","auto"),e.style.setProperty("pointer-events","auto"),n.classList.remove(Jg)},A=()=>{n.style.setProperty("pointer-events","none"),e.style.setProperty("pointer-events","none"),n.classList.add(Jg)};k&&E&&(k.keyframes([...h.WRAPPER_KEYFRAMES]),E.keyframes([...h.BACKDROP_KEYFRAMES]),r.progressStart(!0,1-g),g>s?C():A()),f&&g!==T&&(f.scrollY=!1);const R=te=>{const X=hx(te.event.target);if(g=a(),g===1&&X){const ue=Dd(X)?Mi(X).querySelector(".inner-scroll"):X;return!!!X.querySelector("ion-refresher")&&ue.scrollTop===0}return!0},M=te=>{w=n.canDismiss!==void 0&&n.canDismiss!==!0&&P===0,te.deltaY>0&&f&&(f.scrollY=!1),Qn(()=>{n.focus()}),r.progressStart(!0,1-g)},N=te=>{te.deltaY>0&&f&&(f.scrollY=!1);const X=1-g,ue=o.length>1?1-o[1]:void 0,he=X+te.deltaY/m,Ie=ue!==void 0&&he>=ue&&w,xe=Ie?x:.9999,Be=Ie&&ue!==void 0?ue+mT((he-ue)/(xe-ue)):he;b=qo(1e-4,Be,xe),r.progressStep(b)},U=te=>{const X=te.velocityY,ue=(te.deltaY+X*350)/m,he=g-ue,Ie=o.reduce((xe,Be)=>Math.abs(Be-he)<Math.abs(xe-he)?Be:xe);G({breakpoint:Ie,breakpointOffset:b,canDismiss:w,animated:!0})},G=te=>{const{breakpoint:X,canDismiss:ue,breakpointOffset:he,animated:Ie}=te,xe=ue&&X===0,Be=xe?g:X,Pe=Be!==0;return g=0,k&&E&&(k.keyframes([{offset:0,transform:"translateY(".concat(he*100,"%)")},{offset:1,transform:"translateY(".concat((1-Be)*100,"%)")}]),E.keyframes([{offset:0,opacity:"calc(var(--backdrop-opacity) * ".concat(fT(1-he,s),")")},{offset:1,opacity:"calc(var(--backdrop-opacity) * ".concat(fT(Be,s),")")}]),r.progressStep(0)),B.enable(!1),xe?TN(n,r):Pe||l(),f&&Be===o[o.length-1]&&(f.scrollY=!0),new Promise(Ae=>{r.onFinish(()=>{Pe?k&&E?Qn(()=>{k.keyframes([...h.WRAPPER_KEYFRAMES]),E.keyframes([...h.BACKDROP_KEYFRAMES]),r.progressStart(!0,1-Be),g=Be,c(g),g>s?C():A(),B.enable(!0),Ae()}):(B.enable(!0),Ae()):Ae()},{oneTimeCallback:!0}).progressEnd(1,0,Ie?500:0)})},B=hb({el:t,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:R,onStart:M,onMove:N,onEnd:U});return{gesture:B,moveSheetToBreakpoint:G}},Iue=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}',Pue=Iue,Rue=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',$ue=Rue,Lue=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=at(this,"ionModalDidPresent",7),this.willPresent=at(this,"ionModalWillPresent",7),this.willDismiss=at(this,"ionModalWillDismiss",7),this.didDismiss=at(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=at(this,"ionBreakpointDidChange",7),this.didPresentShorthand=at(this,"didPresent",7),this.willPresentShorthand=at(this,"willPresent",7),this.willDismissShorthand=at(this,"willDismiss",7),this.didDismissShorthand=at(this,"didDismiss",7),this.ionMount=at(this,"ionMount",7),this.lockController=Ch(),this.triggerController=db(),this.coreDelegate=aA(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.onHandleClick=()=>{const{sheetTransition:e,handleBehavior:t}=this;t!=="cycle"||e!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{const{sheetTransition:e}=this;e===void 0&&this.dismiss(void 0,Sl)},this.onLifecycle=e=>{const t=this.usersElement,i=Oue[e.type];if(t&&i){const s=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:e.detail});t.dispatchEvent(s)}},this.presented=!1,this.hasController=!1,this.overlayIndex=void 0,this.delegate=void 0,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.breakpoints=void 0,this.initialBreakpoint=void 0,this.backdropBreakpoint=0,this.handle=void 0,this.handleBehavior="none",this.component=void 0,this.componentProps=void 0,this.cssClass=void 0,this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.presentingElement=void 0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0,this.keepContentsMounted=!1,this.focusTrap=!0,this.canDismiss=!0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}breakpointsChanged(e){e!==void 0&&(this.sortedBreakpoints=e.sort((t,i)=>t-i))}connectedCallback(){const{el:e}=this;Gp(e),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){var e;const{breakpoints:t,initialBreakpoint:i,el:s,htmlAttributes:r}=this,o=this.isSheetModal=t!==void 0&&i!==void 0,a=["aria-label","role"];this.inheritedAttributes=Fc(s,a),r!==void 0&&a.forEach(l=>{r[l]&&(this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{[l]:r[l]}),delete r[l])}),o&&(this.currentBreakpoint=this.initialBreakpoint),t!==void 0&&i!==void 0&&!t.includes(i)&&pi("Your breakpoints array must include the initialBreakpoint value."),!((e=this.htmlAttributes)===null||e===void 0)&&e.id||Wp(this.el)}componentDidLoad(){this.isOpen===!0&&Qn(()=>this.present()),this.breakpointsChanged(this.breakpoints),this.triggerChanged()}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};const t=this.el.parentNode,i=this.inline=t!==null&&!this.hasController,s=this.workingDelegate=i?this.delegate||this.coreDelegate:this.delegate;return{inline:i,delegate:s}}async checkCanDismiss(e,t){const{canDismiss:i}=this;return typeof i=="function"?i(e,t):i}async present(){const e=await this.lockController.lock();if(this.presented){e();return}const{presentingElement:t,el:i}=this;this.currentBreakpoint=this.initialBreakpoint;const{inline:s,delegate:r}=this.getDelegate(!0);this.ionMount.emit(),this.usersElement=await ab(r,i,this.component,["ion-page"],this.componentProps,s),Yg(i)?await e0(this.usersElement):this.keepContentsMounted||await JM(),fi(()=>this.el.classList.add("show-modal"));const o=t!==void 0;o&&Tt(this)==="ios"&&(this.statusBarStyle=await vA.getStyle(),EN()),await qp(this,"modalEnter",TR,Tue,{presentingEl:t,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),Qn(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(My,this.keyboardOpenCallback)),this.isSheetModal?this.initSheetGesture():o&&this.initSwipeToClose(),e()}initSwipeToClose(){var e;if(Tt(this)!=="ios")return;const{el:t}=this,i=this.leaveAnimation||Zt.get("modalLeave",CR),s=this.animation=i(t,{presentingEl:this.presentingElement});if(!Oy(t)){yp(t);return}const o=(e=this.statusBarStyle)!==null&&e!==void 0?e:xp.Default;this.gesture=xue(t,s,o,()=>{this.gestureAnimationDismissing=!0,pT(this.statusBarStyle),this.animation.onFinish(async()=>{await this.dismiss(void 0,yc),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){const{wrapperEl:e,initialBreakpoint:t,backdropBreakpoint:i}=this;if(!e||t===void 0)return;const s=this.enterAnimation||Zt.get("modalEnter",TR),r=this.animation=s(this.el,{presentingEl:this.presentingElement,currentBreakpoint:t,backdropBreakpoint:i});r.progressStart(!0,1);const{gesture:o,moveSheetToBreakpoint:a}=Aue(this.el,this.backdropEl,e,t,i,r,this.sortedBreakpoints,()=>{var l;return(l=this.currentBreakpoint)!==null&&l!==void 0?l:0},()=>this.sheetOnDismiss(),l=>{this.currentBreakpoint!==l&&(this.currentBreakpoint=l,this.ionBreakpointDidChange.emit({breakpoint:l}))});this.gesture=o,this.moveSheetToBreakpoint=a,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,yc),this.gestureAnimationDismissing=!1})}async dismiss(e,t){var i;if(this.gestureAnimationDismissing&&t!==yc)return!1;const s=await this.lockController.lock();if(t!=="handler"&&!await this.checkCanDismiss(e,t))return s(),!1;const{presentingElement:r}=this;r!==void 0&&Tt(this)==="ios"&&pT(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(My,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0);const a=await Kp(this,e,t,"modalLeave",CR,Sue,{presentingEl:r,currentBreakpoint:(i=this.currentBreakpoint)!==null&&i!==void 0?i:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint});if(a){const{delegate:l}=this.getDelegate();await oA(l,this.usersElement),fi(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy()}return this.currentBreakpoint=void 0,this.animation=void 0,s(),a}onDidDismiss(){return Xo(this.el,"ionModalDidDismiss")}onWillDismiss(){return Xo(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(e){if(!this.isSheetModal){pi("setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(e)){pi("Attempted to set invalid breakpoint value ".concat(e,". Please double check that the breakpoint value is part of your defined breakpoints."));return}const{currentBreakpoint:t,moveSheetToBreakpoint:i,canDismiss:s,breakpoints:r,animated:o}=this;t!==e&&i&&(this.sheetTransition=i({breakpoint:e,breakpointOffset:1-t,canDismiss:s!==void 0&&s!==!0&&r[0]===0,animated:o}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){const{breakpoints:e,currentBreakpoint:t}=this;if(!e||t==null)return!1;const i=e.filter(a=>a!==0),r=(i.indexOf(t)+1)%i.length,o=i[r];return await this.setCurrentBreakpoint(o),!0}render(){const{handle:e,isSheetModal:t,presentingElement:i,htmlAttributes:s,handleBehavior:r,inheritedAttributes:o,focusTrap:a}=this,l=e!==!1&&t,c=Tt(this),d=i!==void 0&&c==="ios",u=r==="cycle";return q(Yt,Object.assign({key:"b4da5111fe4719fa450c39b2d4bd884a302a7924","no-router":!0,tabindex:"-1"},s,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign({[c]:!0,"modal-default":!d&&!t,"modal-card":d,"modal-sheet":t,"overlay-hidden":!0,[Jg]:a===!1},Ko(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),q("ion-backdrop",{key:"c12dbf747e0eb914eaf1331798548ffc7e147763",ref:h=>this.backdropEl=h,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),c==="ios"&&q("div",{key:"da546ee80c6576b5acc66e959fd5009e0b9a8160",class:"modal-shadow"}),q("div",Object.assign({key:"306ebe6427440ad5f7ed36d590e562d15a503b75",role:"dialog"},o,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:h=>this.wrapperEl=h}),l&&q("button",{key:"c5d17e346fe255a7c0cacbbf15c0083f2d09c488",class:"modal-handle",tabIndex:u?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:u?this.onHandleClick:void 0,part:"handle"}),q("slot",{key:"5cc714170a00b67f3eda0cd1d6f37c1489a99c83"})))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:Pue,md:$ue}}},[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],focusTrap:[4,"focus-trap"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),Oue={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function Due(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(e=>{switch(e){case"ion-modal":customElements.get(e)||customElements.define(e,Lue);break;case"ion-backdrop":customElements.get(e)||Eh();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Mue=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{top:0;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:min(1.0625rem, 20.4px);font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host{inset-inline-start:0}:host(.title-small){-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:min(0.8125rem, 23.4px);font-weight:normal}:host(.title-large){-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:2px;padding-bottom:4px;-webkit-transform-origin:left center;transform-origin:left center;position:static;-ms-flex-align:end;align-items:flex-end;min-width:100%;font-size:min(2.125rem, 61.2px);font-weight:700;text-align:start}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000);font-family:var(--ion-font-family)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit;width:auto}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}@supports selector(:dir(rtl)){:host(.title-large:dir(rtl)) .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}}",Nue=Mue,Fue=":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:0;padding-bottom:0;font-size:1.25rem;font-weight:500;letter-spacing:0.0125em}:host(.title-small){width:100%;height:100%;font-size:0.9375rem;font-weight:normal}",Bue=Fue,Vue=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=at(this,"ionStyle",7),this.color=void 0,this.size=void 0}sizeChanged(){this.emitStyle()}connectedCallback(){this.emitStyle()}emitStyle(){const e=this.getSize();this.ionStyle.emit({["title-".concat(e)]:!0})}getSize(){return this.size!==void 0?this.size:"default"}render(){const e=Tt(this),t=this.getSize();return q(Yt,{key:"7293d2ecd6262feb0d8d769effbb208230baed89",class:ds(this.color,{[e]:!0,["title-".concat(t)]:!0,"title-rtl":document.dir==="rtl"})},q("div",{key:"086ec3a361ebdf6506846a8704b457cda3a6f897",class:"toolbar-title"},q("slot",{key:"59add7eb92b82d6832a8f0894f897c51fdf4f214"})))}get el(){return this}static get watchers(){return{size:["sizeChanged"]}}static get style(){return{ios:Nue,md:Bue}}},[33,"ion-title",{color:[513],size:[1]},void 0,{size:["sizeChanged"]}]);function Uue(){if(typeof customElements>"u")return;["ion-title"].forEach(e=>{switch(e){case"ion-title":customElements.get(e)||customElements.define(e,Vue);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const zue=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",Hue=zue,jue=":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;width:100%;padding-right:var(--ion-safe-area-right);padding-left:var(--ion-safe-area-left);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, #c1c4cd))));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){-webkit-margin-start:4px;margin-inline-start:4px}::slotted(.buttons-last-slot){-webkit-margin-end:4px;margin-inline-end:4px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}",Gue=jue,Wue=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childrenStyles=new Map,this.color=void 0}componentWillLoad(){const e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find(r=>r.slot==="start");t&&t.classList.add("buttons-first-slot");const i=e.reverse(),s=i.find(r=>r.slot==="end")||i.find(r=>r.slot==="primary")||i.find(r=>r.slot==="secondary");s&&s.classList.add("buttons-last-slot")}childrenStyle(e){e.stopPropagation();const t=e.target.tagName,i=e.detail,s={},r=this.childrenStyles.get(t)||{};let o=!1;Object.keys(i).forEach(a=>{const l="toolbar-".concat(a),c=i[a];c!==r[l]&&(o=!0),c&&(s[l]=!0)}),o&&(this.childrenStyles.set(t,s),kc(this))}render(){const e=Tt(this),t={};return this.childrenStyles.forEach(i=>{Object.assign(t,i)}),q(Yt,{key:"462538a5ecd01baf3cde116c9f029aeda26c81be",class:Object.assign(Object.assign({},t),ds(this.color,{[e]:!0,"in-toolbar":ts("ion-toolbar",this.el)}))},q("div",{key:"c0b4415d3b2472de643a9be7cb3b13b3b628621b",class:"toolbar-background"}),q("div",{key:"0ccb8a2dbeaa28d8f9bed87629c0c097446690c2",class:"toolbar-container"},q("slot",{key:"3e726dac359e923df21d80301651f16063a3de20",name:"start"}),q("slot",{key:"cd799330b56a7f8833bc61bb2807aafb21846f71",name:"secondary"}),q("div",{key:"395282e6ac8c53576922dcdb5f08c25d34638c86",class:"toolbar-content"},q("slot",{key:"a437c60e4ba5aae65e55169ae82a6f379868ec1d"})),q("slot",{key:"711af9b9d321a7b31ede924c9bdcad767aa9a1ca",name:"primary"}),q("slot",{key:"ecc02edeaf80a837890bcb08d5096df1e22a0b9a",name:"end"})))}get el(){return this}static get style(){return{ios:Hue,md:Gue}}},[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);function que(){if(typeof customElements>"u")return;["ion-toolbar"].forEach(e=>{switch(e){case"ion-toolbar":customElements.get(e)||customElements.define(e,Wue);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Kue=":host{--background:rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065);border-radius:var(--border-radius, inherit);display:block;width:100%;height:inherit;margin-top:4px;margin-bottom:4px;background:var(--background);line-height:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}span{display:inline-block}:host(.in-media){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;height:100%}:host(.skeleton-text-animated){position:relative;background:-webkit-gradient(linear, left top, right top, color-stop(8%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065)), color-stop(18%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.135)), color-stop(33%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065)));background:linear-gradient(to right, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065) 8%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.135) 18%, rgba(var(--background-rgb, var(--ion-text-color-rgb, 0, 0, 0)), 0.065) 33%);background-size:800px 104px;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:shimmer;animation-name:shimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear}@-webkit-keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}",Yue=Kue,Xue=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionStyle=at(this,"ionStyle",7),this.animated=!1}componentWillLoad(){this.emitStyle()}emitStyle(){const e={"skeleton-text":!0};this.ionStyle.emit(e)}render(){const e=this.animated&&Zt.getBoolean("animated",!0),t=ts("ion-avatar",this.el)||ts("ion-thumbnail",this.el),i=Tt(this);return q(Yt,{key:"fdfabf9364caf507450239b62be24f08873bd650",class:{[i]:!0,"skeleton-text-animated":e,"in-media":t}},q("span",{key:"3482c88dcc177547185ce87972afa064a542367d"}," "))}get el(){return this}static get style(){return Yue}},[1,"ion-skeleton-text",{animated:[4]}]);function Que(){if(typeof customElements>"u")return;["ion-skeleton-text"].forEach(e=>{switch(e){case"ion-skeleton-text":customElements.get(e)||customElements.define(e,Xue);break}})}const Zue=Que;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Jue=fx;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ehe=":host(.tab-hidden){display:none !important}",the=ehe,nhe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loaded=!1,this.active=!1,this.delegate=void 0,this.tab=void 0,this.component=void 0}async componentWillLoad(){this.active&&await this.setActive()}async setActive(){await this.prepareLazyLoaded(),this.active=!0}changeActive(e){e&&this.prepareLazyLoaded()}prepareLazyLoaded(){if(!this.loaded&&this.component!=null){this.loaded=!0;try{return ab(this.delegate,this.el,this.component,["ion-page"])}catch(e){console.error(e)}}return Promise.resolve(void 0)}render(){const{tab:e,active:t,component:i}=this;return q(Yt,{key:"cb75d0877979b3b8df8f7e1952bfa9677da1eaa5",role:"tabpanel","aria-hidden":t?null:"true","aria-labelledby":"tab-button-".concat(e),class:{"ion-page":i===void 0,"tab-hidden":!t}},q("slot",{key:"37fbb7b7a6b03eb93b1dacd2dc1025b78eb2aa6b"}))}get el(){return this}static get watchers(){return{active:["changeActive"]}}static get style(){return the}},[1,"ion-tab",{active:[1028],delegate:[16],tab:[1],component:[1],setActive:[64]},void 0,{active:["changeActive"]}]);function ihe(){if(typeof customElements>"u")return;["ion-tab"].forEach(e=>{switch(e){case"ion-tab":customElements.get(e)||customElements.define(e,nhe);break}})}const she=ihe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const rhe=":host(.ion-color){color:var(--ion-color-base)}",ohe=rhe,ahe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.color=void 0}render(){const e=Tt(this);return q(Yt,{key:"e134d70c04344b708a2ecf6253722781ad2ca826",class:ds(this.color,{[e]:!0})},q("slot",{key:"da79c760f7ebbcd007ce110439f05a62cb22eac8"}))}static get style(){return ohe}},[1,"ion-text",{color:[513]}]);function lhe(){if(typeof customElements>"u")return;["ion-text"].forEach(e=>{switch(e){case"ion-text":customElements.get(e)||customElements.define(e,ahe);break}})}const che=lhe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const dhe='.sc-ion-textarea-ios-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-ios-h,.textarea-label-placement-stacked.sc-ion-textarea-ios-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-ios-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-ios-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-ios-h,ion-item .sc-ion-textarea-ios-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-ios-h,ion-item [slot=start].sc-ion-textarea-ios-h,ion-item[slot=end].sc-ion-textarea-ios-h,ion-item [slot=end].sc-ion-textarea-ios-h{width:auto}.native-textarea.sc-ion-textarea-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-ios::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-ios{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-ios{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-ios{inset-inline-start:0}.cloned-input.sc-ion-textarea-ios:disabled{opacity:1}[auto-grow].sc-ion-textarea-ios-h .cloned-input.sc-ion-textarea-ios{height:100%}[auto-grow].sc-ion-textarea-ios-h .native-textarea.sc-ion-textarea-ios{overflow:hidden}.textarea-wrapper.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-ios{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-ios{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-ios::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-ios::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-ios{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-ios-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-ios{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-textarea-ios-h,.ion-touched.ion-invalid.sc-ion-textarea-ios-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .error-text.sc-ion-textarea-ios{display:block}.ion-touched.ion-invalid.sc-ion-textarea-ios-h .textarea-bottom.sc-ion-textarea-ios .helper-text.sc-ion-textarea-ios{display:none}.textarea-bottom.sc-ion-textarea-ios .counter.sc-ion-textarea-ios{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-ios{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-ios,.sc-ion-textarea-ios-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-ios,.textarea-outline-notch-hidden.sc-ion-textarea-ios{display:none}.textarea-wrapper.sc-ion-textarea-ios textarea.sc-ion-textarea-ios{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-ios-h .label-text.sc-ion-textarea-ios{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .textarea-wrapper.sc-ion-textarea-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .sc-ion-textarea-ios-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-ios-h .native-wrapper.sc-ion-textarea-ios::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-stacked.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-stacked .sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-h.textarea-label-placement-floating.sc-ion-textarea-ios-s>[slot=end],.sc-ion-textarea-ios-h.textarea-label-placement-floating .sc-ion-textarea-ios-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios,.has-value.textarea-label-placement-floating.sc-ion-textarea-ios-h textarea.sc-ion-textarea-ios{opacity:1}.label-floating.sc-ion-textarea-ios-h .label-text-wrapper.sc-ion-textarea-ios{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-ios,.end-slot-wrapper.sc-ion-textarea-ios{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-ios-s>[slot=start],.sc-ion-textarea-ios-s>[slot=end]{margin-top:0}.sc-ion-textarea-ios-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-ios-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.sc-ion-textarea-ios-h{--border-width:0.55px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, var(--ion-background-color-step-250, #c8c7cc))));--padding-top:10px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:0px;font-size:inherit}.textarea-disabled.sc-ion-textarea-ios-h{opacity:0.3}.sc-ion-textarea-ios-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-ios-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0;aspect-ratio:1}',uhe=dhe,hhe='.sc-ion-textarea-md-h{--background:initial;--color:initial;--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:var(--ion-placeholder-opacity, 0.6);--padding-top:0;--padding-end:0;--padding-bottom:8px;--padding-start:0;--border-radius:0;--border-style:solid;--highlight-color-focused:var(--ion-color-primary, #0054e9);--highlight-color-valid:var(--ion-color-success, #2dd55b);--highlight-color-invalid:var(--ion-color-danger, #c5000f);--highlight-color:var(--highlight-color-focused);display:block;position:relative;width:100%;min-height:44px;color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box}.textarea-label-placement-floating.sc-ion-textarea-md-h,.textarea-label-placement-stacked.sc-ion-textarea-md-h{--padding-top:0px;min-height:56px}[cols].sc-ion-textarea-md-h:not([auto-grow]){width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.ion-color.sc-ion-textarea-md-h{--highlight-color-focused:var(--ion-color-base);background:initial}ion-item.sc-ion-textarea-md-h,ion-item .sc-ion-textarea-md-h{-ms-flex-item-align:baseline;align-self:baseline}ion-item[slot=start].sc-ion-textarea-md-h,ion-item [slot=start].sc-ion-textarea-md-h,ion-item[slot=end].sc-ion-textarea-md-h,ion-item [slot=end].sc-ion-textarea-md-h{width:auto}.native-textarea.sc-ion-textarea-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;position:relative;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;white-space:pre-wrap;z-index:1;-webkit-box-sizing:border-box;box-sizing:border-box;resize:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-textarea.sc-ion-textarea-md::-webkit-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-moz-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md:-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::-ms-input-placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md::placeholder{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-textarea.sc-ion-textarea-md{color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.cloned-input.sc-ion-textarea-md{top:0;bottom:0;position:absolute;pointer-events:none}.cloned-input.sc-ion-textarea-md{inset-inline-start:0}.cloned-input.sc-ion-textarea-md:disabled{opacity:1}[auto-grow].sc-ion-textarea-md-h .cloned-input.sc-ion-textarea-md{height:100%}[auto-grow].sc-ion-textarea-md-h .native-textarea.sc-ion-textarea-md{overflow:hidden}.textarea-wrapper.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:0px;padding-bottom:0px;border-radius:var(--border-radius);display:-ms-flexbox;display:flex;position:relative;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:start;align-items:flex-start;height:inherit;min-height:inherit;-webkit-transition:background-color 15ms linear;transition:background-color 15ms linear;background:var(--background);line-height:normal}.native-wrapper.sc-ion-textarea-md{position:relative;width:100%;height:100%}.has-focus.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{caret-color:var(--highlight-color)}.native-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom)}.native-wrapper.sc-ion-textarea-md{display:grid;min-width:inherit;max-width:inherit;min-height:inherit;max-height:inherit;grid-auto-rows:100%}.native-wrapper.sc-ion-textarea-md::after{white-space:pre-wrap;content:attr(data-replicated-value) " ";visibility:hidden}.native-wrapper.sc-ion-textarea-md::after{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);color:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-align:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;grid-area:1/1/2/2;word-break:break-word}.textarea-wrapper-inner.sc-ion-textarea-md{display:-ms-flexbox;display:flex;width:100%;min-height:inherit}.ion-touched.ion-invalid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-invalid)}.ion-valid.sc-ion-textarea-md-h{--highlight-color:var(--highlight-color-valid)}.textarea-bottom.sc-ion-textarea-md{-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:5px;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:var(--border-width) var(--border-style) var(--border-color);font-size:0.75rem}.has-focus.ion-valid.sc-ion-textarea-md-h,.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:none;color:var(--highlight-color-invalid)}.textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:block;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373))}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .error-text.sc-ion-textarea-md{display:block}.ion-touched.ion-invalid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md .helper-text.sc-ion-textarea-md{display:none}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{-webkit-margin-start:auto;margin-inline-start:auto;color:var(--ion-color-step-550, var(--ion-text-color-step-450, #737373));white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}.label-text-wrapper.sc-ion-textarea-md{-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);max-width:200px;-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none}.label-text.sc-ion-textarea-md,.sc-ion-textarea-md-s>[slot=label]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.label-text-wrapper-hidden.sc-ion-textarea-md,.textarea-outline-notch-hidden.sc-ion-textarea-md{display:none}.textarea-wrapper.sc-ion-textarea-md textarea.sc-ion-textarea-md{-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.textarea-label-placement-start.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row;flex-direction:row}.textarea-label-placement-start.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-end.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.textarea-label-placement-end.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:0;margin-bottom:0}.textarea-label-placement-fixed.sc-ion-textarea-md-h .label-text.sc-ion-textarea-md{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.textarea-label-placement-stacked.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start}.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;max-width:100%;z-index:2}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:8px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:8px}.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(100%) scale(1);transform:translateY(100%) scale(1)}.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:0}.has-focus.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.has-value.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md{opacity:1}.label-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);max-width:calc(100% / 0.75)}.start-slot-wrapper.sc-ion-textarea-md,.end-slot-wrapper.sc-ion-textarea-md{padding-left:0;padding-right:0;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:start}.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-s>[slot=end]{margin-top:0}.sc-ion-textarea-md-s>[slot=start]:last-of-type{-webkit-margin-end:16px;margin-inline-end:16px;-webkit-margin-start:0;margin-inline-start:0}.sc-ion-textarea-md-s>[slot=end]:first-of-type{-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:0;margin-inline-end:0}.textarea-fill-solid.sc-ion-textarea-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-color:var(--ion-color-step-500, var(--ion-background-color-step-500, gray));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:var(--border-width) var(--border-style) var(--border-color)}.has-focus.textarea-fill-solid.ion-valid.sc-ion-textarea-md-h,.textarea-fill-solid.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}@media (any-hover: hover){.textarea-fill-solid.sc-ion-textarea-md-h:hover{--background:var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-solid.has-focus.sc-ion-textarea-md-h{--background:var(--ion-color-step-150, var(--ion-background-color-step-150, #d9d9d9));--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}.textarea-fill-solid.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0px;border-end-start-radius:0px}.label-floating.textarea-fill-solid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{max-width:calc(100% / 0.75)}.textarea-fill-outline.sc-ion-textarea-md-h{--border-color:var(--ion-color-step-300, var(--ion-background-color-step-300, #b3b3b3));--border-radius:4px;--padding-start:16px;--padding-end:16px;min-height:56px}.textarea-fill-outline.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:28px;--padding-start:32px;--padding-end:32px}.has-focus.textarea-fill-outline.ion-valid.sc-ion-textarea-md-h,.textarea-fill-outline.ion-touched.ion-invalid.sc-ion-textarea-md-h{--border-color:var(--highlight-color)}@media (any-hover: hover){.textarea-fill-outline.sc-ion-textarea-md-h:hover{--border-color:var(--ion-color-step-750, var(--ion-background-color-step-750, #404040))}}.textarea-fill-outline.has-focus.sc-ion-textarea-md-h{--border-width:var(--highlight-height);--border-color:var(--highlight-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-bottom.sc-ion-textarea-md{border-top:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-wrapper.sc-ion-textarea-md{border-bottom:none}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:left top;transform-origin:left top;position:absolute;max-width:calc(100% - var(--padding-start) - var(--padding-end))}[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .sc-ion-textarea-md-h -no-combinator.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl].textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,[dir=rtl] .textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h:dir(rtl) .label-text-wrapper.sc-ion-textarea-md{-webkit-transform-origin:right top;transform-origin:right top}}.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{position:relative}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{-webkit-transform:translateY(-32%) scale(0.75);transform:translateY(-32%) scale(0.75);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;max-width:calc(\n    (100% - var(--padding-start) - var(--padding-end) - 8px) / 0.75\n  )}.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-h textarea.sc-ion-textarea-md,.textarea-fill-outline.textarea-label-placement-stacked[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after,.textarea-fill-outline.textarea-label-placement-floating[auto-grow].sc-ion-textarea-md-h .native-wrapper.sc-ion-textarea-md::after{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-top:12px;margin-bottom:0px}.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-stacked .sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=start],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating.sc-ion-textarea-md-s>[slot=end],.sc-ion-textarea-md-h.textarea-fill-outline.textarea-label-placement-floating .sc-ion-textarea-md-s>[slot=end]{margin-top:12px}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-container.sc-ion-textarea-md{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;width:100%;height:100%}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{pointer-events:none}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md,.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{border-top:var(--border-width) var(--border-style) var(--border-color);border-bottom:var(--border-width) var(--border-style) var(--border-color)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{max-width:calc(100% - var(--padding-start) - var(--padding-end))}.textarea-fill-outline.sc-ion-textarea-md-h .notch-spacer.sc-ion-textarea-md{-webkit-padding-end:8px;padding-inline-end:8px;font-size:calc(1em * 0.75);opacity:0;pointer-events:none;-webkit-box-sizing:content-box;box-sizing:content-box}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-start.sc-ion-textarea-md{border-start-start-radius:var(--border-radius);border-start-end-radius:0px;border-end-end-radius:0px;border-end-start-radius:var(--border-radius);-webkit-border-start:var(--border-width) var(--border-style) var(--border-color);border-inline-start:var(--border-width) var(--border-style) var(--border-color);width:calc(var(--padding-start) - 4px)}.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-end.sc-ion-textarea-md{-webkit-border-end:var(--border-width) var(--border-style) var(--border-color);border-inline-end:var(--border-width) var(--border-style) var(--border-color);border-start-start-radius:0px;border-start-end-radius:var(--border-radius);border-end-end-radius:var(--border-radius);border-end-start-radius:0px;-ms-flex-positive:1;flex-grow:1}.label-floating.textarea-fill-outline.sc-ion-textarea-md-h .textarea-outline-notch.sc-ion-textarea-md{border-top:none}.sc-ion-textarea-md-h{--border-width:1px;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.13)))));--padding-top:18px;--padding-end:0px;--padding-bottom:8px;--padding-start:0px;--highlight-height:2px;font-size:inherit}.textarea-bottom.sc-ion-textarea-md .counter.sc-ion-textarea-md{letter-spacing:0.0333333333em}.textarea-label-placement-floating.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.has-focus.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.has-focus.textarea-label-placement-floating.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-floating.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.has-focus.textarea-label-placement-stacked.ion-valid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md,.textarea-label-placement-stacked.ion-touched.ion-invalid.sc-ion-textarea-md-h .label-text-wrapper.sc-ion-textarea-md{color:var(--highlight-color)}.textarea-disabled.sc-ion-textarea-md-h{opacity:0.38}.textarea-highlight.sc-ion-textarea-md{bottom:-1px;position:absolute;width:100%;height:var(--highlight-height);-webkit-transform:scale(0);transform:scale(0);-webkit-transition:-webkit-transform 200ms;transition:-webkit-transform 200ms;transition:transform 200ms;transition:transform 200ms, -webkit-transform 200ms;background:var(--highlight-color)}.textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.has-focus.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{-webkit-transform:scale(1);transform:scale(1)}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{bottom:0}.in-item.sc-ion-textarea-md-h .textarea-highlight.sc-ion-textarea-md{inset-inline-start:0}.textarea-shape-round.sc-ion-textarea-md-h{--border-radius:16px}.sc-ion-textarea-md-s>ion-button[slot=start].button-has-icon-only,.sc-ion-textarea-md-s>ion-button[slot=end].button-has-icon-only{--border-radius:50%;--padding-start:8px;--padding-end:8px;--padding-top:8px;--padding-bottom:8px;aspect-ratio:1;min-height:40px}',fhe=hhe,phe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.ionChange=at(this,"ionChange",7),this.ionInput=at(this,"ionInput",7),this.ionBlur=at(this,"ionBlur",7),this.ionFocus=at(this,"ionFocus",7),this.inputId="ion-textarea-".concat(mhe++),this.helperTextId="".concat(this.inputId,"-helper-text"),this.errorTextId="".concat(this.inputId,"-error-text"),this.didTextareaClearOnEdit=!1,this.inheritedAttributes={},this.onInput=e=>{const t=e.target;t&&(this.value=t.value||""),this.emitInputChange(e)},this.onChange=e=>{this.emitValueChange(e)},this.onFocus=e=>{this.hasFocus=!0,this.focusedValue=this.value,this.ionFocus.emit(e)},this.onBlur=e=>{this.hasFocus=!1,this.focusedValue!==this.value&&this.emitValueChange(e),this.didTextareaClearOnEdit=!1,this.ionBlur.emit(e)},this.onKeyDown=e=>{this.checkClearOnEdit(e)},this.hasFocus=!1,this.color=void 0,this.autocapitalize="none",this.autofocus=!1,this.clearOnEdit=!1,this.debounce=void 0,this.disabled=!1,this.fill=void 0,this.inputmode=void 0,this.enterkeyhint=void 0,this.maxlength=void 0,this.minlength=void 0,this.name=this.inputId,this.placeholder=void 0,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.cols=void 0,this.rows=void 0,this.wrap=void 0,this.autoGrow=!1,this.value="",this.counter=!1,this.counterFormatter=void 0,this.errorText=void 0,this.helperText=void 0,this.label=void 0,this.labelPlacement="start",this.shape=void 0}debounceChanged(){const{ionInput:e,debounce:t,originalIonInput:i}=this;this.ionInput=t===void 0?i!=null?i:e:gM(e,t)}valueChanged(){const e=this.nativeInput,t=this.getValue();e&&e.value!==t&&(e.value=t),this.runAutoGrow()}connectedCallback(){const{el:e}=this;this.slotMutationController=uN(e,["label","start","end"],()=>kc(this)),this.notchController=dN(e,()=>this.notchSpacerEl,()=>this.labelSlot),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:e}))}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el})),this.slotMutationController&&(this.slotMutationController.destroy(),this.slotMutationController=void 0),this.notchController&&(this.notchController.destroy(),this.notchController=void 0)}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},Kd(this.el)),Fc(this.el,["data-form-type","title","tabindex"]))}componentDidLoad(){this.originalIonInput=this.ionInput,this.runAutoGrow()}componentDidRender(){var e;(e=this.notchController)===null||e===void 0||e.calculateNotchWidth()}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async getInputElement(){return this.nativeInput||await new Promise(e=>Ra(this.el,e)),Promise.resolve(this.nativeInput)}emitValueChange(e){const{value:t}=this,i=t==null?t:t.toString();this.focusedValue=i,this.ionChange.emit({value:i,event:e})}emitInputChange(e){const{value:t}=this;this.ionInput.emit({value:t,event:e})}runAutoGrow(){this.nativeInput&&this.autoGrow&&fi(()=>{var e;this.textareaWrapper&&(this.textareaWrapper.dataset.replicatedValue=(e=this.value)!==null&&e!==void 0?e:"")})}checkClearOnEdit(e){if(!this.clearOnEdit)return;const i=["Tab","Shift","Meta","Alt","Control"].includes(e.key);!this.didTextareaClearOnEdit&&this.hasValue()&&!i&&(this.value="",this.emitInputChange(e)),i||(this.didTextareaClearOnEdit=!0)}hasValue(){return this.getValue()!==""}getValue(){return this.value||""}renderLabel(){const{label:e}=this;return q("div",{class:{"label-text-wrapper":!0,"label-text-wrapper-hidden":!this.hasLabel}},e===void 0?q("slot",{name:"label"}):q("div",{class:"label-text"},e))}get labelSlot(){return this.el.querySelector('[slot="label"]')}get hasLabel(){return this.label!==void 0||this.labelSlot!==null}renderLabelContainer(){return Tt(this)==="md"&&this.fill==="outline"?[q("div",{class:"textarea-outline-container"},q("div",{class:"textarea-outline-start"}),q("div",{class:{"textarea-outline-notch":!0,"textarea-outline-notch-hidden":!this.hasLabel}},q("div",{class:"notch-spacer","aria-hidden":"true",ref:i=>this.notchSpacerEl=i},this.label)),q("div",{class:"textarea-outline-end"})),this.renderLabel()]:this.renderLabel()}renderHintText(){const{helperText:e,errorText:t,helperTextId:i,errorTextId:s}=this;return[q("div",{id:i,class:"helper-text"},e),q("div",{id:s,class:"error-text"},t)]}getHintTextID(){const{el:e,helperText:t,errorText:i,helperTextId:s,errorTextId:r}=this;if(e.classList.contains("ion-touched")&&e.classList.contains("ion-invalid")&&i)return r;if(t)return s}renderCounter(){const{counter:e,maxlength:t,counterFormatter:i,value:s}=this;if(!(e!==!0||t===void 0))return q("div",{class:"counter"},hN(s,t,i))}renderBottomContent(){const{counter:e,helperText:t,errorText:i,maxlength:s}=this;if(!(!(t||i)&&!(e===!0&&s!==void 0)))return q("div",{class:"textarea-bottom"},this.renderHintText(),this.renderCounter())}render(){const{inputId:e,disabled:t,fill:i,shape:s,labelPlacement:r,el:o,hasFocus:a}=this,l=Tt(this),c=this.getValue(),d=ts("ion-item",this.el),u=l==="md"&&i!=="outline"&&!d,h=this.hasValue(),f=o.querySelector('[slot="start"], [slot="end"]')!==null,m=r==="stacked"||r==="floating"&&(h||a||f);return q(Yt,{key:"d6e25c83d8eab8cb1a5b6ab411c9a13847f69f8d",class:ds(this.color,{[l]:!0,"has-value":h,"has-focus":a,"label-floating":m,["textarea-fill-".concat(i)]:i!==void 0,["textarea-shape-".concat(s)]:s!==void 0,["textarea-label-placement-".concat(r)]:!0,"textarea-disabled":t})},q("label",{key:"f840a5be2b776a4b9c18c6da24e0b7d3d4838fee",class:"textarea-wrapper",htmlFor:e},this.renderLabelContainer(),q("div",{key:"979461fc0d4684926d79d75759c63c6867b7622b",class:"textarea-wrapper-inner"},q("div",{key:"88f0d5d4bac29597cc2588e5b2ed72fb4fbe153d",class:"start-slot-wrapper"},q("slot",{key:"21dcca0e59c1260e3d0d1e126c1c590de15c4bad",name:"start"})),q("div",{key:"3c48a4bb3d763a389d3429123e7c110064b9b8d4",class:"native-wrapper",ref:g=>this.textareaWrapper=g},q("textarea",Object.assign({key:"1550599ad15b3f215c104c014e90711f073ace8b",class:"native-textarea",ref:g=>this.nativeInput=g,id:e,disabled:t,autoCapitalize:this.autocapitalize,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,minLength:this.minlength,maxLength:this.maxlength,name:this.name,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,cols:this.cols,rows:this.rows,wrap:this.wrap,onInput:this.onInput,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown,"aria-describedby":this.getHintTextID(),"aria-invalid":this.getHintTextID()===this.errorTextId},this.inheritedAttributes),c)),q("div",{key:"4f01ab4d2994a6de6f49eb9ed2e310d00daf21b2",class:"end-slot-wrapper"},q("slot",{key:"501e288b6807e039972bb4f0b63906114255518a",name:"end"}))),u&&q("div",{key:"d3008eed34494aa9f8e98a28eac3b465dc4c2bd0",class:"textarea-highlight"})),this.renderBottomContent())}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],value:["valueChanged"]}}static get style(){return{ios:uhe,md:fhe}}},[38,"ion-textarea",{color:[513],autocapitalize:[1],autofocus:[4],clearOnEdit:[4,"clear-on-edit"],debounce:[2],disabled:[4],fill:[1],inputmode:[1],enterkeyhint:[1],maxlength:[2],minlength:[2],name:[1],placeholder:[1],readonly:[4],required:[4],spellcheck:[4],cols:[514],rows:[2],wrap:[1],autoGrow:[516,"auto-grow"],value:[1025],counter:[4],counterFormatter:[16],errorText:[1,"error-text"],helperText:[1,"helper-text"],label:[1],labelPlacement:[1,"label-placement"],shape:[1],hasFocus:[32],setFocus:[64],getInputElement:[64]},void 0,{debounce:["debounceChanged"],value:["valueChanged"]}]);let mhe=0;function ghe(){if(typeof customElements>"u")return;["ion-textarea"].forEach(e=>{switch(e){case"ion-textarea":customElements.get(e)||customElements.define(e,phe);break}})}const bhe=ghe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const vhe=Uue;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yhe=que;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const whe=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--background-hover:transparent;--background-hover-opacity:1;--background-focused:currentColor;--background-focused-opacity:.1;--border-radius:4px;--color:var(--ion-color-primary, #0054e9);--icon-margin-end:1px;--icon-margin-start:-4px;--icon-font-size:1.6em;--min-height:32px;font-size:clamp(17px, 1.0625rem, 21.998px)}.button-native{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:visible;z-index:99}:host(.ion-activated) .button-native{opacity:0.4}@media (any-hover: hover){:host(:hover){opacity:0.6}}',xhe=whe,_he=':host{--background:transparent;--color-focused:currentColor;--color-hover:currentColor;--icon-margin-top:0;--icon-margin-bottom:0;--icon-padding-top:0;--icon-padding-end:0;--icon-padding-bottom:0;--icon-padding-start:0;--margin-top:0;--margin-end:0;--margin-bottom:0;--margin-start:0;--min-width:auto;--min-height:auto;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--opacity:1;--ripple-color:currentColor;--transition:background-color, opacity 100ms linear;display:none;min-width:var(--min-width);min-height:var(--min-height);color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;text-transform:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-kerning:none;font-kerning:none}ion-ripple-effect{color:var(--ripple-color)}:host(.ion-color) .button-native{color:var(--ion-color-base)}:host(.show-back-button){display:block}:host(.back-button-disabled){cursor:default;opacity:0.5;pointer-events:none}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-margin-start:var(--margin-start);margin-inline-start:var(--margin-start);-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end);margin-top:var(--margin-top);margin-bottom:var(--margin-bottom);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border:0;outline:none;background:var(--background);line-height:1;cursor:pointer;opacity:var(--opacity);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}ion-icon{-webkit-padding-start:var(--icon-padding-start);padding-inline-start:var(--icon-padding-start);-webkit-padding-end:var(--icon-padding-end);padding-inline-end:var(--icon-padding-end);padding-top:var(--icon-padding-top);padding-bottom:var(--icon-padding-bottom);-webkit-margin-start:var(--icon-margin-start);margin-inline-start:var(--icon-margin-start);-webkit-margin-end:var(--icon-margin-end);margin-inline-end:var(--icon-margin-end);margin-top:var(--icon-margin-top);margin-bottom:var(--icon-margin-bottom);display:inherit;font-size:var(--icon-font-size);font-weight:var(--icon-font-weight);pointer-events:none}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}@media (any-hover: hover){:host(:hover) .button-native{color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-color.ion-focused) .button-native{color:var(--ion-color-base)}@media (any-hover: hover){:host(.ion-color:hover) .button-native{color:var(--ion-color-base)}}:host(.in-toolbar:not(.in-toolbar-color)){color:var(--ion-toolbar-color, var(--color))}:host{--border-radius:4px;--background-focused:currentColor;--background-focused-opacity:.12;--background-hover:currentColor;--background-hover-opacity:0.04;--color:currentColor;--icon-margin-end:0;--icon-margin-start:0;--icon-font-size:1.5rem;--icon-font-weight:normal;--min-height:32px;--min-width:44px;--padding-start:12px;--padding-end:12px;font-size:0.875rem;font-weight:500;text-transform:uppercase}:host(.back-button-has-icon-only){--border-radius:50%;min-width:48px;min-height:48px;aspect-ratio:1/1}.button-native{-webkit-box-shadow:none;box-shadow:none}.button-text{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:0;padding-bottom:0}ion-icon{line-height:0.67;text-align:start}@media (any-hover: hover){:host(.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}:host(.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}',khe=_he,Ehe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAttributes={},this.onClick=async e=>{const t=this.el.closest("ion-nav");return e.preventDefault(),t&&await t.canGoBack()?t.pop({animationBuilder:this.routerAnimation,skipIfBusy:!0}):rx(this.defaultHref,e,"back",this.routerAnimation)},this.color=void 0,this.defaultHref=void 0,this.disabled=!1,this.icon=void 0,this.text=void 0,this.type="button",this.routerAnimation=void 0}componentWillLoad(){this.inheritedAttributes=Kd(this.el),this.defaultHref===void 0&&(this.defaultHref=Zt.get("backButtonDefaultHref"))}get backButtonIcon(){const e=this.icon;return e!=null?e:Tt(this)==="ios"?Zt.get("backButtonIcon",vM):Zt.get("backButtonIcon",$ne)}get backButtonText(){const e=Tt(this)==="ios"?"Back":null;return this.text!=null?this.text:Zt.get("backButtonText",e)}get hasIconOnly(){return this.backButtonIcon&&!this.backButtonText}get rippleType(){return this.hasIconOnly?"unbounded":"bounded"}render(){const{color:e,defaultHref:t,disabled:i,type:s,hasIconOnly:r,backButtonIcon:o,backButtonText:a,icon:l,inheritedAttributes:c}=this,d=t!==void 0,u=Tt(this),h=c["aria-label"]||a||"back";return q(Yt,{key:"5466624a10f1ab56f5469e6dc07080303880f2fe",onClick:this.onClick,class:ds(e,{[u]:!0,button:!0,"back-button-disabled":i,"back-button-has-icon-only":r,"in-toolbar":ts("ion-toolbar",this.el),"in-toolbar-color":ts("ion-toolbar[color]",this.el),"ion-activatable":!0,"ion-focusable":!0,"show-back-button":d})},q("button",{key:"63bc75ef0ad7cc9fb79e58217a3314b20acd73e3",type:s,disabled:i,class:"button-native",part:"native","aria-label":h},q("span",{key:"5d3eacbd11af2245c6e1151cab446a0d96559ad8",class:"button-inner"},o&&q("ion-icon",{key:"6439af0ae463764174e7d3207f02267811df666d",part:"icon",icon:o,"aria-hidden":"true",lazy:!1,"flip-rtl":l===void 0}),a&&q("span",{key:"8ee89fb18dfdb5b75948a8b197ff4cdbc008742f",part:"text","aria-hidden":"true",class:"button-text"},a)),u==="md"&&q("ion-ripple-effect",{key:"63803a884998bc73bea5afe0b2a0a14e3fa4d6bf",type:this.rippleType})))}get el(){return this}static get style(){return{ios:xhe,md:khe}}},[33,"ion-back-button",{color:[513],defaultHref:[1025,"default-href"],disabled:[516],icon:[1],text:[1],type:[1],routerAnimation:[16]}]);function The(){if(typeof customElements>"u")return;["ion-back-button","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-back-button":customElements.get(e)||customElements.define(e,Ehe);break;case"ion-icon":customElements.get(e)||$l();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Che=The,She=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",Ahe=She,Ihe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=at(this,"ionNavWillLoad",7),this.ionNavWillChange=at(this,"ionNavWillChange",3),this.ionNavDidChange=at(this,"ionNavDidChange",3),this.lockController=Ch(),this.gestureOrAnimationInProgress=!1,this.mode=Tt(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Kn(()=>import("./swipe-back--96QRgYn.js"),[])).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),t=>{var i;return(i=this.ani)===null||i===void 0?void 0:i.progressStep(t)},(t,i,s)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(t)},{oneTimeCallback:!0});let r=t?-.001:.001;t?r+=Md([0,0],[.32,.72],[0,1],[1,1],i)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=Md([0,0],[1,0],[.68,.28],[1,1],i)[0]),this.ani.progressEnd(t?1:0,r,s)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,i){const s=await this.lockController.lock();let r=!1;try{r=await this.transition(e,t,i)}catch(o){console.error(o)}return s(),r}async setRouteId(e,t,i,s){return{changed:await this.setRoot(e,t,{duration:i==="root"?0:void 0,direction:i==="back"?"back":"forward",animationBuilder:s}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,i){if(this.activeComponent===e&&bM(t,this.activeParams))return!1;const s=this.activeEl,r=await ab(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=r,this.activeParams=t,await this.commit(r,s,i),await oA(this.delegate,s),!0}async transition(e,t,i={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:s,mode:r}=this,o=this.animated&&Zt.getBoolean("animated",!0),a=i.animationBuilder||this.animation||Zt.get("navAnimation");return await YM(Object.assign(Object.assign({mode:r,animated:o,enteringEl:e,leavingEl:t,baseEl:s,deepWait:Yg(s),progressCallback:i.progressAnimation?l=>{l!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,l.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),l.progressEnd(0,0,0)):this.ani=l}:void 0},i),{animationBuilder:a})),this.ionNavDidChange.emit(),!0}render(){return q("slot",{key:"a70341f58d19df55de1dad00e3464388e446aa2a"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return Ahe}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]);function Phe(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,Ihe);break}})}const Rhe=Phe;/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const _f=typeof document<"u";function AN(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function $he(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&AN(n.default)}const bi=Object.assign;function q2(n,e){const t={};for(const i in e){const s=e[i];t[i]=$a(s)?s.map(n):n(s)}return t}const gg=()=>{},$a=Array.isArray,IN=/#/g,Lhe=/&/g,Ohe=/\//g,Dhe=/=/g,Mhe=/\?/g,PN=/\+/g,Nhe=/%5B/g,Fhe=/%5D/g,RN=/%5E/g,Bhe=/%60/g,$N=/%7B/g,Vhe=/%7C/g,LN=/%7D/g,Uhe=/%20/g;function yA(n){return encodeURI(""+n).replace(Vhe,"|").replace(Nhe,"[").replace(Fhe,"]")}function zhe(n){return yA(n).replace($N,"{").replace(LN,"}").replace(RN,"^")}function gT(n){return yA(n).replace(PN,"%2B").replace(Uhe,"+").replace(IN,"%23").replace(Lhe,"%26").replace(Bhe,"`").replace($N,"{").replace(LN,"}").replace(RN,"^")}function Hhe(n){return gT(n).replace(Dhe,"%3D")}function jhe(n){return yA(n).replace(IN,"%23").replace(Mhe,"%3F")}function Ghe(n){return n==null?"":jhe(n).replace(Ohe,"%2F")}function t0(n){try{return decodeURIComponent(""+n)}catch(e){}return""+n}const Whe=/\/$/,qhe=n=>n.replace(Whe,"");function K2(n,e,t="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=n(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=Qhe(i!=null?i:e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:t0(o)}}function Khe(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function SR(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function Yhe(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&_p(e.matched[i],t.matched[s])&&ON(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function _p(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function ON(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!Xhe(n[t],e[t]))return!1;return!0}function Xhe(n,e){return $a(n)?AR(n,e):$a(e)?AR(e,n):n===e}function AR(n,e){return $a(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function Qhe(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const ed={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var n0;(function(n){n.pop="pop",n.push="push"})(n0||(n0={}));var bg;(function(n){n.back="back",n.forward="forward",n.unknown=""})(bg||(bg={}));function Zhe(n){if(!n)if(_f){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),qhe(n)}const Jhe=/^[^#]+#/;function efe(n,e){return n.replace(Jhe,"#")+e}function tfe(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const px=()=>({left:window.scrollX,top:window.scrollY});function nfe(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=tfe(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function IR(n,e){return(history.state?history.state.position-e:-1)+n}const bT=new Map;function ife(n,e){bT.set(n,e)}function sfe(n){const e=bT.get(n);return bT.delete(n),e}let rfe=()=>location.protocol+"//"+location.host;function DN(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),SR(l,"")}return SR(t,n)+i+s}function ofe(n,e,t,i){let s=[],r=[],o=null;const a=({state:h})=>{const f=DN(n,location),m=t.value,g=e.value;let b=0;if(h){if(t.value=f,e.value=h,o&&o===m){o=null;return}b=g?h.position-g.position:0}else i(f);s.forEach(w=>{w(t.value,m,{delta:b,type:n0.pop,direction:b?b>0?bg.forward:bg.back:bg.unknown})})};function l(){o=t.value}function c(h){s.push(h);const f=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return r.push(f),f}function d(){const{history:h}=window;h.state&&h.replaceState(bi({},h.state,{scroll:px()}),"")}function u(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:u}}function PR(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?px():null}}function afe(n){const{history:e,location:t}=window,i={value:DN(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,d){const u=n.indexOf("#"),h=u>-1?(t.host&&document.querySelector("base")?n:n.slice(u))+l:rfe()+n+l;try{e[d?"replaceState":"pushState"](c,"",h),s.value=c}catch(f){console.error(f),t[d?"replace":"assign"](h)}}function o(l,c){const d=bi({},e.state,PR(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,d,!0),i.value=l}function a(l,c){const d=bi({},s.value,e.state,{forward:l,scroll:px()});r(d.current,d,!0);const u=bi({},PR(i.value,l,null),{position:d.position+1},c);r(l,u,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function lfe(n){n=Zhe(n);const e=afe(n),t=ofe(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=bi({location:"",base:n,go:i,createHref:efe.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function cfe(n){return typeof n=="string"||n&&typeof n=="object"}function MN(n){return typeof n=="string"||typeof n=="symbol"}const NN=Symbol("");var RR;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(RR||(RR={}));function kp(n,e){return bi(new Error,{type:n,[NN]:!0},e)}function Xl(n,e){return n instanceof Error&&NN in n&&(e==null||!!(n.type&e))}const $R="[^/]+?",dfe={sensitive:!1,strict:!1,start:!0,end:!0},ufe=/[.+*?^${}()[\]/\\]/g;function hfe(n,e){const t=bi({},dfe,e),i=[];let s=t.start?"^":"";const r=[];for(const c of n){const d=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let u=0;u<c.length;u++){const h=c[u];let f=40+(t.sensitive?.25:0);if(h.type===0)u||(s+="/"),s+=h.value.replace(ufe,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:g,optional:b,regexp:w}=h;r.push({name:m,repeatable:g,optional:b});const x=w||$R;if(x!==$R){f+=10;try{new RegExp("(".concat(x,")"))}catch(E){throw new Error('Invalid custom RegExp for param "'.concat(m,'" (').concat(x,"): ")+E.message)}}let k=g?"((?:".concat(x,")(?:/(?:").concat(x,"))*)"):"(".concat(x,")");u||(k=b&&c.length<2?"(?:/".concat(k,")"):"/"+k),b&&(k+="?"),s+=k,f+=20,b&&(f+=-8),g&&(f+=-20),x===".*"&&(f+=-50)}d.push(f)}i.push(d)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const d=c.match(o),u={};if(!d)return null;for(let h=1;h<d.length;h++){const f=d[h]||"",m=r[h-1];u[m.name]=f&&m.repeatable?f.split("/"):f}return u}function l(c){let d="",u=!1;for(const h of n){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const f of h)if(f.type===0)d+=f.value;else if(f.type===1){const{value:m,repeatable:g,optional:b}=f,w=m in c?c[m]:"";if($a(w)&&!g)throw new Error('Provided param "'.concat(m,'" is an array but it is not repeatable (* or + modifiers)'));const x=$a(w)?w.join("/"):w;if(!x)if(b)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error('Missing required param "'.concat(m,'"'));d+=x}}return d||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function ffe(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function FN(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=ffe(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(LR(i))return 1;if(LR(s))return-1}return s.length-i.length}function LR(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const pfe={type:0,value:""},mfe=/[a-zA-Z0-9_]/;function gfe(n){if(!n)return[[]];if(n==="/")return[[pfe]];if(!n.startsWith("/"))throw new Error('Invalid path "'.concat(n,'"'));function e(f){throw new Error("ERR (".concat(t,')/"').concat(c,'": ').concat(f))}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",d="";function u(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e("A repeatable param (".concat(c,") must be alone in its segment. eg: '/:ids+.")),r.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&u(),o()):l===":"?(u(),t=1):h();break;case 4:h(),t=i;break;case 1:l==="("?t=2:mfe.test(l)?h():(u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:t=3:d+=l;break;case 3:u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===2&&e('Unfinished custom RegExp for param "'.concat(c,'"')),u(),o(),s}function bfe(n,e,t){const i=hfe(gfe(n.path),t),s=bi(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function vfe(n,e){const t=[],i=new Map;e=NR({strict:!1,end:!0,sensitive:!1},e);function s(u){return i.get(u)}function r(u,h,f){const m=!f,g=DR(u);g.aliasOf=f&&f.record;const b=NR(e,u),w=[g];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const T of E)w.push(DR(bi({},g,{components:f?f.record.components:g.components,path:T,aliasOf:f?f.record:g})))}let x,k;for(const E of w){const{path:T}=E;if(h&&T[0]!=="/"){const P=h.record.path,C=P[P.length-1]==="/"?"":"/";E.path=h.record.path+(T&&C+T)}if(x=bfe(E,h,b),f?f.alias.push(x):(k=k||x,k!==x&&k.alias.push(x),m&&u.name&&!MR(x)&&o(u.name)),BN(x)&&l(x),g.children){const P=g.children;for(let C=0;C<P.length;C++)r(P[C],x,f&&f.children[C])}f=f||x}return k?()=>{o(k)}:gg}function o(u){if(MN(u)){const h=i.get(u);h&&(i.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){const h=xfe(u,t);t.splice(h,0,u),u.record.name&&!MR(u)&&i.set(u.record.name,u)}function c(u,h){let f,m={},g,b;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw kp(1,{location:u});b=f.record.name,m=bi(OR(h.params,f.keys.filter(k=>!k.optional).concat(f.parent?f.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),u.params&&OR(u.params,f.keys.map(k=>k.name))),g=f.stringify(m)}else if(u.path!=null)g=u.path,f=t.find(k=>k.re.test(g)),f&&(m=f.parse(g),b=f.record.name);else{if(f=h.name?i.get(h.name):t.find(k=>k.re.test(h.path)),!f)throw kp(1,{location:u,currentLocation:h});b=f.record.name,m=bi({},h.params,u.params),g=f.stringify(m)}const w=[];let x=f;for(;x;)w.unshift(x.record),x=x.parent;return{name:b,path:g,params:m,matched:w,meta:wfe(w)}}n.forEach(u=>r(u));function d(){t.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:s}}function OR(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function DR(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:yfe(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function yfe(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function MR(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function wfe(n){return n.reduce((e,t)=>bi(e,t.meta),{})}function NR(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function xfe(n,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;FN(n,e[r])<0?i=r:t=r+1}const s=_fe(n);return s&&(i=e.lastIndexOf(s,i-1)),i}function _fe(n){let e=n;for(;e=e.parent;)if(BN(e)&&FN(n,e)===0)return e}function BN({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function vT(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(PN," "),o=r.indexOf("="),a=t0(o<0?r:r.slice(0,o)),l=o<0?null:t0(r.slice(o+1));if(a in e){let c=e[a];$a(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function FR(n){let e="";for(let t in n){const i=n[t];if(t=Hhe(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}($a(i)?i.map(r=>r&&gT(r)):[i&&gT(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function kfe(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=$a(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const VN=Symbol(""),BR=Symbol(""),mx=Symbol(""),gx=Symbol(""),yT=Symbol("");function Mm(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function hd(n,e,t,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(kp(4,{from:t,to:e})):h instanceof Error?l(h):cfe(h)?l(kp(2,{from:e,to:h})):(o&&i.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},d=r(()=>n.call(i&&i.instances[s],e,t,c));let u=Promise.resolve(d);n.length<3&&(u=u.then(c)),u.catch(h=>l(h))})}function Y2(n,e,t,i,s=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(AN(l)){const d=(l.__vccOpts||l)[e];d&&r.push(hd(d,t,i,o,a,s))}else{let c=l();r.push(()=>c.then(d=>{if(!d)throw new Error("Couldn't resolve component \"".concat(a,'" at "').concat(o.path,'"'));const u=$he(d)?d.default:d;o.mods[a]=d,o.components[a]=u;const f=(u.__vccOpts||u)[e];return f&&hd(f,t,i,o,a,s)()}))}}return r}function VR(n){const e=qi(mx),t=qi(gx),i=lt(()=>{const l=y(n.to);return e.resolve(l)}),s=lt(()=>{const{matched:l}=i.value,{length:c}=l,d=l[c-1],u=t.matched;if(!d||!u.length)return-1;const h=u.findIndex(_p.bind(null,d));if(h>-1)return h;const f=UR(l[c-2]);return c>1&&UR(d)===f&&u[u.length-1].path!==f?u.findIndex(_p.bind(null,l[c-2])):h}),r=lt(()=>s.value>-1&&Afe(t.params,i.value.params)),o=lt(()=>s.value>-1&&s.value===t.matched.length-1&&ON(t.params,i.value.params));function a(l={}){if(Sfe(l)){const c=e[y(n.replace)?"replace":"push"](y(n.to)).catch(gg);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:lt(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}function Efe(n){return n.length===1?n[0]:n}const Tfe=Fe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:VR,setup(n,{slots:e}){const t=Yi(VR(n)),{options:i}=qi(mx),s=lt(()=>({[zR(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[zR(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&Efe(e.default(t));return n.custom?r:hi("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),Cfe=Tfe;function Sfe(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Afe(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!$a(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function UR(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const zR=(n,e,t)=>n!=null?n:e!=null?e:t,Ife=Fe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=qi(yT),s=lt(()=>n.route||i.value),r=qi(BR,0),o=lt(()=>{let c=y(r);const{matched:d}=s.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=lt(()=>s.value.matched[o.value]);Ad(BR,lt(()=>o.value+1)),Ad(VN,a),Ad(yT,s);const l=K();return ki(()=>[l.value,a.value,n.name],([c,d,u],[h,f,m])=>{d&&(d.instances[u]=c,f&&f!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),c&&d&&(!f||!_p(d,f)||!h)&&(d.enterCallbacks[u]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,d=n.name,u=a.value,h=u&&u.components[d];if(!h)return HR(t.default,{Component:h,route:c});const f=u.props[d],m=f?f===!0?c.params:typeof f=="function"?f(c):f:null,b=hi(h,bi({},m,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return HR(t.default,{Component:b,route:c})||b}}});function HR(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Pfe=Ife;function Rfe(n){const e=vfe(n.routes,n),t=n.parseQuery||vT,i=n.stringifyQuery||FR,s=n.history,r=Mm(),o=Mm(),a=Mm(),l=jp(ed);let c=ed;_f&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=q2.bind(null,le=>""+le),u=q2.bind(null,Ghe),h=q2.bind(null,t0);function f(le,Se){let ne,ie;return MN(le)?(ne=e.getRecordMatcher(le),ie=Se):ie=le,e.addRoute(ie,ne)}function m(le){const Se=e.getRecordMatcher(le);Se&&e.removeRoute(Se)}function g(){return e.getRoutes().map(le=>le.record)}function b(le){return!!e.getRecordMatcher(le)}function w(le,Se){if(Se=bi({},Se||l.value),typeof le=="string"){const z=K2(t,le,Se.path),se=e.resolve({path:z.path},Se),Te=s.createHref(z.fullPath);return bi(z,se,{params:h(se.params),hash:t0(z.hash),redirectedFrom:void 0,href:Te})}let ne;if(le.path!=null)ne=bi({},le,{path:K2(t,le.path,Se.path).path});else{const z=bi({},le.params);for(const se in z)z[se]==null&&delete z[se];ne=bi({},le,{params:u(z)}),Se.params=u(Se.params)}const ie=e.resolve(ne,Se),me=le.hash||"";ie.params=d(h(ie.params));const V=Khe(i,bi({},le,{hash:zhe(me),path:ie.path})),F=s.createHref(V);return bi({fullPath:V,hash:me,query:i===FR?kfe(le.query):le.query||{}},ie,{redirectedFrom:void 0,href:F})}function x(le){return typeof le=="string"?K2(t,le,l.value.path):bi({},le)}function k(le,Se){if(c!==le)return kp(8,{from:Se,to:le})}function E(le){return C(le)}function T(le){return E(bi(x(le),{replace:!0}))}function P(le){const Se=le.matched[le.matched.length-1];if(Se&&Se.redirect){const{redirect:ne}=Se;let ie=typeof ne=="function"?ne(le):ne;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=x(ie):{path:ie},ie.params={}),bi({query:le.query,hash:le.hash,params:ie.path!=null?{}:le.params},ie)}}function C(le,Se){const ne=c=w(le),ie=l.value,me=le.state,V=le.force,F=le.replace===!0,z=P(ne);if(z)return C(bi(x(z),{state:typeof z=="object"?bi({},me,z.state):me,force:V,replace:F}),Se||ne);const se=ne;se.redirectedFrom=Se;let Te;return!V&&Yhe(i,ie,ne)&&(Te=kp(16,{to:se,from:ie}),Be(ie,ie,!0,!1)),(Te?Promise.resolve(Te):M(se,ie)).catch(ke=>Xl(ke)?Xl(ke,2)?ke:xe(ke):he(ke,se,ie)).then(ke=>{if(ke){if(Xl(ke,2))return C(bi({replace:F},x(ke.to),{state:typeof ke.to=="object"?bi({},me,ke.to.state):me,force:V}),Se||se)}else ke=U(se,ie,!0,F,me);return N(se,ie,ke),ke})}function A(le,Se){const ne=k(le,Se);return ne?Promise.reject(ne):Promise.resolve()}function R(le){const Se=de.values().next().value;return Se&&typeof Se.runWithContext=="function"?Se.runWithContext(le):le()}function M(le,Se){let ne;const[ie,me,V]=$fe(le,Se);ne=Y2(ie.reverse(),"beforeRouteLeave",le,Se);for(const z of ie)z.leaveGuards.forEach(se=>{ne.push(hd(se,le,Se))});const F=A.bind(null,le,Se);return ne.push(F),ze(ne).then(()=>{ne=[];for(const z of r.list())ne.push(hd(z,le,Se));return ne.push(F),ze(ne)}).then(()=>{ne=Y2(me,"beforeRouteUpdate",le,Se);for(const z of me)z.updateGuards.forEach(se=>{ne.push(hd(se,le,Se))});return ne.push(F),ze(ne)}).then(()=>{ne=[];for(const z of V)if(z.beforeEnter)if($a(z.beforeEnter))for(const se of z.beforeEnter)ne.push(hd(se,le,Se));else ne.push(hd(z.beforeEnter,le,Se));return ne.push(F),ze(ne)}).then(()=>(le.matched.forEach(z=>z.enterCallbacks={}),ne=Y2(V,"beforeRouteEnter",le,Se,R),ne.push(F),ze(ne))).then(()=>{ne=[];for(const z of o.list())ne.push(hd(z,le,Se));return ne.push(F),ze(ne)}).catch(z=>Xl(z,8)?z:Promise.reject(z))}function N(le,Se,ne){a.list().forEach(ie=>R(()=>ie(le,Se,ne)))}function U(le,Se,ne,ie,me){const V=k(le,Se);if(V)return V;const F=Se===ed,z=_f?history.state:{};ne&&(ie||F?s.replace(le.fullPath,bi({scroll:F&&z&&z.scroll},me)):s.push(le.fullPath,me)),l.value=le,Be(le,Se,ne,F),xe()}let G;function B(){G||(G=s.listen((le,Se,ne)=>{if(!we.listening)return;const ie=w(le),me=P(ie);if(me){C(bi(me,{replace:!0,force:!0}),ie).catch(gg);return}c=ie;const V=l.value;_f&&ife(IR(V.fullPath,ne.delta),px()),M(ie,V).catch(F=>Xl(F,12)?F:Xl(F,2)?(C(bi(x(F.to),{force:!0}),ie).then(z=>{Xl(z,20)&&!ne.delta&&ne.type===n0.pop&&s.go(-1,!1)}).catch(gg),Promise.reject()):(ne.delta&&s.go(-ne.delta,!1),he(F,ie,V))).then(F=>{F=F||U(ie,V,!1),F&&(ne.delta&&!Xl(F,8)?s.go(-ne.delta,!1):ne.type===n0.pop&&Xl(F,20)&&s.go(-1,!1)),N(ie,V,F)}).catch(gg)}))}let te=Mm(),X=Mm(),ue;function he(le,Se,ne){xe(le);const ie=X.list();return ie.length?ie.forEach(me=>me(le,Se,ne)):console.error(le),Promise.reject(le)}function Ie(){return ue&&l.value!==ed?Promise.resolve():new Promise((le,Se)=>{te.add([le,Se])})}function xe(le){return ue||(ue=!le,B(),te.list().forEach(([Se,ne])=>le?ne(le):Se()),te.reset()),le}function Be(le,Se,ne,ie){const{scrollBehavior:me}=n;if(!_f||!me)return Promise.resolve();const V=!ne&&sfe(IR(le.fullPath,0))||(ie||!ne)&&history.state&&history.state.scroll||null;return vc().then(()=>me(le,Se,V)).then(F=>F&&nfe(F)).catch(F=>he(F,le,Se))}const Pe=le=>s.go(le);let Ae;const de=new Set,we={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:b,getRoutes:g,resolve:w,options:n,push:E,replace:T,go:Pe,back:()=>Pe(-1),forward:()=>Pe(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:X.add,isReady:Ie,install(le){const Se=this;le.component("RouterLink",Cfe),le.component("RouterView",Pfe),le.config.globalProperties.$router=Se,Object.defineProperty(le.config.globalProperties,"$route",{enumerable:!0,get:()=>y(l)}),_f&&!Ae&&l.value===ed&&(Ae=!0,E(s.location).catch(me=>{}));const ne={};for(const me in ed)Object.defineProperty(ne,me,{get:()=>l.value[me],enumerable:!0});le.provide(mx,Se),le.provide(gx,OS(ne)),le.provide(yT,l);const ie=le.unmount;de.add(le),le.unmount=function(){de.delete(le),de.size<1&&(c=ed,G&&G(),G=null,l.value=ed,Ae=!1,ue=!1),ie()}}};function ze(le){return le.reduce((Se,ne)=>Se.then(()=>R(ne)),Promise.resolve())}return we}function $fe(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(c=>_p(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>_p(c,l))||s.push(l))}return[t,i,s]}function Sh(){return qi(mx)}function Zr(n){return qi(gx)}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Lfe=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:24px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){font-size:30px}',Ofe=Lfe,Dfe=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',Mfe=Dfe,Nfe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=at(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,i=this.el.parentElement;(e.composedPath().includes(i)||t!=null&&t.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},Fc(this.el,["aria-label"])),this.layout===void 0&&(this.layout=Zt.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:i,href:s,rel:r,target:o,layout:a,selected:l,tab:c,inheritedAttributes:d}=this,u=Tt(this),h={download:this.download,href:s,rel:r,target:o};return q(Yt,{key:"5976c45943ea7ea8e7c1a85fc9996de421439f08",onClick:this.onClick,onKeyup:this.onKeyUp,id:c!==void 0?"tab-button-".concat(c):null,class:{[u]:!0,"tab-selected":l,"tab-disabled":e,"tab-has-label":i,"tab-has-icon":t,"tab-has-label-only":i&&!t,"tab-has-icon-only":t&&!i,["tab-layout-".concat(a)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},q("a",Object.assign({key:"1db09d861b67ff292018fb4b0dc7b85bd4677eb8"},h,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},d),q("span",{key:"4381eafcb27e8c7bb0d86d4f115ceb0caf03b9b4",class:"button-inner"},q("slot",{key:"1981135f6fbb88376c1bd923c55c70fe8b5c5159"})),u==="md"&&q("ion-ripple-effect",{key:"0509bc7155d055d1ed710600e9cf4df135881491",type:"unbounded"})))}get el(){return this}static get style(){return{ios:Ofe,md:Mfe}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function Ffe(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,Nfe);break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Bfe=Ffe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Vfe=":host{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;contain:layout size style;z-index:0}.tabs-inner{position:relative;-ms-flex:1;flex:1;contain:layout size style}",Ufe=Vfe,zfe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=at(this,"ionNavWillLoad",7),this.ionTabsWillChange=at(this,"ionTabsWillChange",3),this.ionTabsDidChange=at(this,"ionTabsDidChange",3),this.transitioning=!1,this.onTabClicked=e=>{const{href:t,tab:i}=e.detail;if(this.useRouter&&t!==void 0){const s=document.querySelector("ion-router");s&&s.push(t)}else this.select(i)},this.selectedTab=void 0,this.useRouter=!1}async componentWillLoad(){if(this.useRouter||(this.useRouter=(!!this.el.querySelector("ion-router-outlet")||!!document.querySelector("ion-router"))&&!this.el.closest("[no-router]")),!this.useRouter){const e=this.tabs;e.length>0&&await this.select(e[0])}this.ionNavWillLoad.emit()}componentWillRender(){const e=this.el.querySelector("ion-tab-bar");if(e){const t=this.selectedTab?this.selectedTab.tab:void 0;e.selectedTab=t}}async select(e){const t=X2(this.tabs,e);return this.shouldSwitch(t)?(await this.setActive(t),await this.notifyRouter(),this.tabSwitch(),!0):!1}async getTab(e){return X2(this.tabs,e)}getSelected(){return Promise.resolve(this.selectedTab?this.selectedTab.tab:void 0)}async setRouteId(e){const t=X2(this.tabs,e);return this.shouldSwitch(t)?(await this.setActive(t),{changed:!0,element:this.selectedTab,markVisible:()=>this.tabSwitch()}):{changed:!1,element:this.selectedTab}}async getRouteId(){var e;const t=(e=this.selectedTab)===null||e===void 0?void 0:e.tab;return t!==void 0?{id:t,element:this.selectedTab}:void 0}setActive(e){return this.transitioning?Promise.reject("transitioning already happening"):(this.transitioning=!0,this.leavingTab=this.selectedTab,this.selectedTab=e,this.ionTabsWillChange.emit({tab:e.tab}),e.active=!0,Promise.resolve())}tabSwitch(){const e=this.selectedTab,t=this.leavingTab;this.leavingTab=void 0,this.transitioning=!1,e&&t!==e&&(t&&(t.active=!1),this.ionTabsDidChange.emit({tab:e.tab}))}notifyRouter(){if(this.useRouter){const e=document.querySelector("ion-router");if(e)return e.navChanged("forward")}return Promise.resolve(!1)}shouldSwitch(e){const t=this.selectedTab;return e!==void 0&&e!==t&&!this.transitioning}get tabs(){return Array.from(this.el.querySelectorAll("ion-tab"))}render(){return q(Yt,{key:"e01ccf6bfaccad094515be50e407399c733fc226",onIonTabButtonClick:this.onTabClicked},q("slot",{key:"38d2d01dbfd8a08f01e6f0e27274b21d75424e37",name:"top"}),q("div",{key:"7e894f0f423e2d43e1c68daff5f9f6c442fad237",class:"tabs-inner"},q("slot",{key:"df16be529a0370a26d0adf850530b31607507c23"})),q("slot",{key:"44642e1cb24c3281c43db75fd69a32fe0defe40a",name:"bottom"}))}get el(){return this}static get style(){return Ufe}},[1,"ion-tabs",{useRouter:[1028,"use-router"],selectedTab:[32],select:[64],getTab:[64],getSelected:[64],setRouteId:[64],getRouteId:[64]}]),X2=(n,e)=>{const t=typeof e=="string"?n.find(i=>i.tab===e):e;return t||console.error('tab with id: "'.concat(t,'" does not exist')),t};function Hfe(){if(typeof customElements>"u")return;["ion-tabs"].forEach(e=>{switch(e){case"ion-tabs":customElements.get(e)||customElements.define(e,zfe);break}})}const jfe=Hfe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Gfe=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, var(--ion-background-color-step-50, #f7f7f7)));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.2)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, var(--ion-text-color-step-400, #666666)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",Wfe=Gfe,qfe=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, var(--ion-background-color-step-150, rgba(0, 0, 0, 0.07)))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, var(--ion-text-color-step-350, #595959)));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #0054e9));height:56px}",Kfe=qfe,Yfe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=at(this,"ionTabBarChanged",7),this.ionTabBarLoaded=at(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await cN(async(e,t)=>{e===!1&&t!==void 0&&await t,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}componentDidLoad(){this.ionTabBarLoaded.emit()}render(){const{color:e,translucent:t,keyboardVisible:i}=this,s=Tt(this),r=i&&this.el.getAttribute("slot")!=="top";return q(Yt,{key:"a87fd2ea5df053705a37ea7ffec043e75c4a9907",role:"tablist","aria-hidden":r?"true":null,class:ds(e,{[s]:!0,"tab-bar-translucent":t,"tab-bar-hidden":r})},q("slot",{key:"81a6223299b6cab29d7ddced590e9152e2b3ded0"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:Wfe,md:Kfe}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]);function Xfe(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,Yfe);break}})}const Qfe=Xfe,Zfe="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",Jfe=Zfe,epe=Gt(class extends jt{constructor(){super(),this.__registerHost()}componentDidLoad(){npe(async()=>{const e=mi(window,"hybrid");if(Zt.getBoolean("_testing")||Kn(()=>import("./index9-DR4z1JAv.js"),[]).then(s=>s.startTapClick(Zt)),Zt.getBoolean("statusTap",e)&&Kn(()=>import("./status-tap-BrxO5pXL.js"),[]).then(s=>s.startStatusTap()),Zt.getBoolean("inputShims",tpe())){const s=mi(window,"ios")?"ios":"android";Kn(()=>import("./input-shims-RFYSMb7E.js"),[]).then(r=>r.startInputShims(Zt,s))}const t=await Kn(()=>Promise.resolve().then(()=>ooe),void 0),i=e||gp();Zt.getBoolean("hardwareBackButton",i)?t.startHardwareBackButton():(gp()&&pi("experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),t.blockHardwareBackButton()),typeof window<"u"&&Kn(()=>Promise.resolve().then(()=>wue),void 0).then(s=>s.startKeyboardAssist(window)),Kn(()=>Promise.resolve().then(()=>qse),void 0).then(s=>this.focusVisible=s.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=Tt(this);return q(Yt,{key:"96715520fd05d6f0e6fa26a8ba78792cfccd4c0a",class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Zt.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return Jfe}},[0,"ion-app",{setFocus:[64]}]),tpe=()=>!!(mi(window,"ios")&&mi(window,"mobile")||mi(window,"android")&&mi(window,"mobileweb")),npe=n=>{"requestIdleCallback"in window?window.requestIdleCallback(n):setTimeout(n,32)};function ipe(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,epe);break}})}const spe=ipe;let Q2;const rpe=()=>{if(typeof window>"u")return new Map;if(!Q2){const n=window;n.Ionicons=n.Ionicons||{},Q2=n.Ionicons.map=n.Ionicons.map||new Map}return Q2},ope=n=>{let e=Z2(n.src);return e||(e=UN(n.name,n.icon,n.mode,n.ios,n.md),e?ape(e,n):n.icon&&(e=Z2(n.icon),e||(e=Z2(n.icon[n.mode]),e))?e:null)},ape=(n,e)=>{const t=rpe().get(n);if(t)return t;try{return nM("svg/".concat(n,".svg"))}catch(i){console.warn('[Ionicons Warning]: Could not load icon with name "'.concat(n,'". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.'),e)}},UN=(n,e,t,i,s)=>(t=(t&&z1(t))==="ios"?"ios":"md",i&&t==="ios"?n=z1(i):s&&t==="md"?n=z1(s):(!n&&e&&!zN(e)&&(n=e),By(n)&&(n=z1(n))),!By(n)||n.trim()===""||n.replace(/[a-z]|-|\d/gi,"")!==""?null:n),Z2=n=>By(n)&&(n=n.trim(),zN(n))?n:null,zN=n=>n.length>0&&/(\/|\.)/.test(n),By=n=>typeof n=="string",z1=n=>n.toLowerCase(),lpe=(n,e=[])=>{const t={};return e.forEach(i=>{n.hasAttribute(i)&&(n.getAttribute(i)!==null&&(t[i]=n.getAttribute(i)),n.removeAttribute(i))}),t},cpe=n=>n&&n.dir!==""?n.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",dpe=n=>{const e=document.createElement("div");e.innerHTML=n;for(let i=e.childNodes.length-1;i>=0;i--)e.childNodes[i].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[i]);const t=e.firstElementChild;if(t&&t.nodeName.toLowerCase()==="svg"){const i=t.getAttribute("class")||"";if(t.setAttribute("class",(i+" s-ion-icon").trim()),HN(t))return e.innerHTML}return""},HN=n=>{if(n.nodeType===1){if(n.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;if(By(t)&&t.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<n.childNodes.length;e++)if(!HN(n.childNodes[e]))return!1}return!0},upe=n=>n.startsWith("data:image/svg+xml"),hpe=n=>n.indexOf(";utf8,")!==-1,Fu=new Map,jR=new Map;let J2;const fpe=(n,e)=>{let t=jR.get(n);if(!t)if(typeof fetch<"u"&&typeof document<"u")if(upe(n)&&hpe(n)){J2||(J2=new DOMParser);const s=J2.parseFromString(n,"text/html").querySelector("svg");return s&&Fu.set(n,s.outerHTML),Promise.resolve()}else t=fetch(n).then(i=>{if(i.ok)return i.text().then(s=>{s&&e!==!1&&(s=dpe(s)),Fu.set(n,s||"")});Fu.set(n,"")}),jR.set(n,t);else return Fu.set(n,""),Promise.resolve();return t},ppe=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",mpe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=gpe(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=lpe(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,i){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const s=this.io=new window.IntersectionObserver(r=>{r[0].isIntersecting&&(s.disconnect(),this.io=void 0,i())},{rootMargin:t});s.observe(e)}else i()}loadIcon(){if(this.isVisible){const e=ope(this);e&&(Fu.has(e)?this.svgContent=Fu.get(e):fpe(e,this.sanitize).then(()=>this.svgContent=Fu.get(e)),this.didLoadIcon=!0)}this.iconName=UN(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:i,el:s}=this,r=this.mode||"md",o=t?(t.includes("arrow")||t.includes("chevron"))&&e!==!1:!1,a=e||o;return q(Yt,Object.assign({role:"img",class:Object.assign(Object.assign({[r]:!0},bpe(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":a,"icon-rtl":a&&cpe(s)})},i),this.svgContent?q("div",{class:"icon-inner",innerHTML:this.svgContent}):q("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return ppe}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),gpe=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",bpe=n=>n?{"ion-color":!0,["ion-color-".concat(n)]:!0}:null;function vpe(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,mpe);break}})}const ype=vpe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wpe=nue;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const xpe=fue;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const _pe=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.01,transform:"scale(1.1)"},{offset:1,opacity:1,transform:"scale(1)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},kpe=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},Epe=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),i.addElement(n.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.01,transform:"scale(1.1)"},{offset:1,opacity:1,transform:"scale(1)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},Tpe=n=>{const e=bt(),t=bt(),i=bt();return t.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(n.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),e.addElement(n).easing("ease-in-out").duration(200).addAnimation([t,i])},Cpe=".sc-ion-loading-ios-h{--min-width:auto;--width:auto;--min-height:auto;--height:auto;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-loading-ios-h{display:none}.loading-wrapper.sc-ion-loading-ios{display:-ms-flexbox;display:flex;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);opacity:0;z-index:10}ion-spinner.sc-ion-loading-ios{color:var(--spinner-color)}.sc-ion-loading-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, var(--ion-background-color-step-100, #f9f9f9)));--max-width:270px;--max-height:90%;--spinner-color:var(--ion-color-step-600, var(--ion-text-color-step-400, #666666));--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);color:var(--ion-text-color, #000);font-size:0.875rem}.loading-wrapper.sc-ion-loading-ios{border-radius:8px;-webkit-padding-start:34px;padding-inline-start:34px;-webkit-padding-end:34px;padding-inline-end:34px;padding-top:24px;padding-bottom:24px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.loading-translucent.sc-ion-loading-ios-h .loading-wrapper.sc-ion-loading-ios{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.loading-content.sc-ion-loading-ios{font-weight:bold}.loading-spinner.sc-ion-loading-ios+.loading-content.sc-ion-loading-ios{-webkit-margin-start:16px;margin-inline-start:16px}",Spe=Cpe,Ape=".sc-ion-loading-md-h{--min-width:auto;--width:auto;--min-height:auto;--height:auto;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-loading-md-h{display:none}.loading-wrapper.sc-ion-loading-md{display:-ms-flexbox;display:flex;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);opacity:0;z-index:10}ion-spinner.sc-ion-loading-md{color:var(--spinner-color)}.sc-ion-loading-md-h{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--max-width:280px;--max-height:90%;--spinner-color:var(--ion-color-primary, #0054e9);--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));font-size:0.875rem}.loading-wrapper.sc-ion-loading-md{border-radius:2px;-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px;padding-top:24px;padding-bottom:24px;-webkit-box-shadow:0 16px 20px rgba(0, 0, 0, 0.4);box-shadow:0 16px 20px rgba(0, 0, 0, 0.4)}.loading-spinner.sc-ion-loading-md+.loading-content.sc-ion-loading-md{-webkit-margin-start:16px;margin-inline-start:16px}",Ipe=Ape,Ppe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.didPresent=at(this,"ionLoadingDidPresent",7),this.willPresent=at(this,"ionLoadingWillPresent",7),this.willDismiss=at(this,"ionLoadingWillDismiss",7),this.didDismiss=at(this,"ionLoadingDidDismiss",7),this.didPresentShorthand=at(this,"didPresent",7),this.willPresentShorthand=at(this,"willPresent",7),this.willDismissShorthand=at(this,"willDismiss",7),this.didDismissShorthand=at(this,"didDismiss",7),this.delegateController=cx(this),this.lockController=Ch(),this.triggerController=db(),this.customHTMLEnabled=Zt.get("innerHTMLTemplatesEnabled",ub),this.presented=!1,this.onBackdropTap=()=>{this.dismiss(void 0,Sl)},this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.keyboardClose=!0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.message=void 0,this.cssClass=void 0,this.duration=0,this.backdropDismiss=!1,this.showBackdrop=!0,this.spinner=void 0,this.translucent=!1,this.animated=!0,this.htmlAttributes=void 0,this.isOpen=!1,this.trigger=void 0}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}connectedCallback(){Gp(this.el),this.triggerChanged()}componentWillLoad(){var e;if(this.spinner===void 0){const t=Tt(this);this.spinner=Zt.get("loadingSpinner",Zt.get("spinner",t==="ios"?"lines":"crescent"))}!((e=this.htmlAttributes)===null||e===void 0)&&e.id||Wp(this.el)}componentDidLoad(){this.isOpen===!0&&Qn(()=>this.present()),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom(),await qp(this,"loadingEnter",_pe,Epe),this.duration>0&&(this.durationTimeout=setTimeout(()=>this.dismiss(),this.duration+10)),e()}async dismiss(e,t){const i=await this.lockController.lock();this.durationTimeout&&clearTimeout(this.durationTimeout);const s=await Kp(this,e,t,"loadingLeave",kpe,Tpe);return s&&this.delegateController.removeViewFromDom(),i(),s}onDidDismiss(){return Xo(this.el,"ionLoadingDidDismiss")}onWillDismiss(){return Xo(this.el,"ionLoadingWillDismiss")}renderLoadingMessage(e){const{customHTMLEnabled:t,message:i}=this;return t?q("div",{class:"loading-content",id:e,innerHTML:wp(i)}):q("div",{class:"loading-content",id:e},i)}render(){const{message:e,spinner:t,htmlAttributes:i,overlayIndex:s}=this,r=Tt(this),o="loading-".concat(s,"-msg");return q(Yt,Object.assign({key:"d97f536b7f443ea19a2bbf2dcbc7f546b8e0a092",role:"dialog","aria-modal":"true","aria-labelledby":e!==void 0?o:null,tabindex:"-1"},i,{style:{zIndex:"".concat(4e4+this.overlayIndex)},onIonBackdropTap:this.onBackdropTap,class:Object.assign(Object.assign({},Ko(this.cssClass)),{[r]:!0,"overlay-hidden":!0,"loading-translucent":this.translucent})}),q("ion-backdrop",{key:"6cd39bd7912fd080ab59d041644054c96d238ea9",visible:this.showBackdrop,tappable:this.backdropDismiss}),q("div",{key:"c14ca5a9308844f11bcb010257e15208a75b39bc",tabindex:"0","aria-hidden":"true"}),q("div",{key:"118bceefa8e1cf8b225a858f224e6d919cf03c26",class:"loading-wrapper ion-overlay-wrapper"},t&&q("div",{key:"490d6e8ae4433835fe273162d7b90deab944fb39",class:"loading-spinner"},q("ion-spinner",{key:"c5cf6549c43df4cb23814b3e62ec4d9e7ea2b64f",name:t,"aria-hidden":"true"})),e!==void 0&&this.renderLoadingMessage(o)),q("div",{key:"2b888362122d3b66b0492d53b0c21bd6a2a97501",tabindex:"0","aria-hidden":"true"}))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:Spe,md:Ipe}}},[34,"ion-loading",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],message:[1],cssClass:[1,"css-class"],duration:[2],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],spinner:[1025],translucent:[4],animated:[4],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]);function Rpe(){if(typeof customElements>"u")return;["ion-loading","ion-backdrop","ion-spinner"].forEach(e=>{switch(e){case"ion-loading":customElements.get(e)||customElements.define(e,Ppe);break;case"ion-backdrop":customElements.get(e)||Eh();break;case"ion-spinner":customElements.get(e)||fx();break}})}const $pe=Rpe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */function Lpe(n,e,t,i){let s;if(t==="md"?s=n==="top"?8:-8:s=n==="top"?10:-10,e&&xi){Ope(e,i);const r=e.getBoundingClientRect();return n==="top"?s+=r.bottom:n==="bottom"&&(s-=xi.innerHeight-r.top),{top:"".concat(s,"px"),bottom:"".concat(s,"px")}}else return{top:"calc(".concat(s,"px + var(--ion-safe-area-top, 0px))"),bottom:"calc(".concat(s,"px - var(--ion-safe-area-bottom, 0px))")}}function Ope(n,e){n.offsetParent===null&&pi("The positionAnchor element for ion-toast was found in the DOM, but appears to be hidden. This may lead to unexpected positioning of the toast.",e)}const wA=(n,e)=>Math.floor(n/2-e/2),Dpe=(n,e)=>{const t=bt(),i=bt(),{position:s,top:r,bottom:o}=e,l=Mi(n).querySelector(".toast-wrapper");switch(i.addElement(l),s){case"top":i.fromTo("transform","translateY(-100%)","translateY(".concat(r,")"));break;case"middle":const c=wA(n.clientHeight,l.clientHeight);l.style.top="".concat(c,"px"),i.fromTo("opacity",.01,1);break;default:i.fromTo("transform","translateY(100%)","translateY(".concat(o,")"));break}return t.easing("cubic-bezier(.155,1.105,.295,1.12)").duration(400).addAnimation(i)},Mpe=(n,e)=>{const t=bt(),i=bt(),{position:s,top:r,bottom:o}=e,l=Mi(n).querySelector(".toast-wrapper");switch(i.addElement(l),s){case"top":i.fromTo("transform","translateY(".concat(r,")"),"translateY(-100%)");break;case"middle":i.fromTo("opacity",.99,0);break;default:i.fromTo("transform","translateY(".concat(o,")"),"translateY(100%)");break}return t.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(i)},Npe=(n,e)=>{const t=bt(),i=bt(),{position:s,top:r,bottom:o}=e,l=Mi(n).querySelector(".toast-wrapper");switch(i.addElement(l),s){case"top":l.style.setProperty("transform","translateY(".concat(r,")")),i.fromTo("opacity",.01,1);break;case"middle":const c=wA(n.clientHeight,l.clientHeight);l.style.top="".concat(c,"px"),i.fromTo("opacity",.01,1);break;default:l.style.setProperty("transform","translateY(".concat(o,")")),i.fromTo("opacity",.01,1);break}return t.easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation(i)},Fpe=n=>{const e=bt(),t=bt(),s=Mi(n).querySelector(".toast-wrapper");return t.addElement(s).fromTo("opacity",.99,0),e.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(t)},Bpe=(n,e,t)=>{const i=Mi(n).querySelector(".toast-wrapper"),s=n.clientHeight,r=i.getBoundingClientRect();let o=0;const a=.5,l=n.position==="middle"?.5:0,c=n.position==="top"?-1:1,d=wA(s,r.height),u=[{offset:0,transform:"translateY(-".concat(d+r.height,"px)")},{offset:.5,transform:"translateY(0px)"},{offset:1,transform:"translateY(".concat(d+r.height,"px)")}],h=bt("toast-swipe-to-dismiss-animation").addElement(i).duration(100);switch(n.position){case"middle":o=s+r.height,h.keyframes(u),h.progressStart(!0,.5);break;case"top":o=r.bottom,h.keyframes([{offset:0,transform:"translateY(".concat(e.top,")")},{offset:1,transform:"translateY(-100%)"}]),h.progressStart(!0,0);break;case"bottom":default:o=s-r.top,h.keyframes([{offset:0,transform:"translateY(".concat(e.bottom,")")},{offset:1,transform:"translateY(100%)"}]),h.progressStart(!0,0);break}const f=w=>w*c/o,b=hb({el:i,gestureName:"toast-swipe-to-dismiss",gesturePriority:WM,direction:"y",onMove:w=>{const x=l+f(w.deltaY);h.progressStep(x)},onEnd:w=>{const x=w.velocityY,k=(w.deltaY+x*1e3)/o*c;b.enable(!1);let E=!0,T=1,P=0,C=0;if(n.position==="middle"){E=k>=a/2||k<=-.5/2,T=1,P=0;const R=i.getBoundingClientRect(),M=R.top-d,N="".concat(M,"px"),U=w.deltaY<=0?-1:1,G=(d+R.height)*U,B=E?"".concat(G,"px"):"0px",te=[{offset:0,transform:"translateY(".concat(N,")")},{offset:1,transform:"translateY(".concat(B,")")}];h.keyframes(te),C=G-M}else E=k>=a,T=E?1:0,P=f(w.deltaY),C=(E?1-P:P)*o;const A=Math.min(Math.abs(C)/Math.abs(x),200);h.onFinish(()=>{E?(t(),h.destroy()):(n.position==="middle"?h.keyframes(u).progressStart(!0,.5):h.progressStart(!0,0),b.enable(!0))},{oneTimeCallback:!0}).progressEnd(T,P,A)}});return b},Vpe=":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}:host{inset-inline-start:0}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);pointer-events:auto}.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-50, var(--ion-background-color-step-50, #f2f2f2));--border-radius:14px;--button-color:var(--ion-color-primary, #0054e9);--color:var(--ion-color-step-850, var(--ion-text-color-step-150, #262626));--max-width:700px;--max-height:478px;--start:10px;--end:10px;font-size:clamp(14px, 0.875rem, 43.4px)}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;z-index:10}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.toast-translucent) .toast-wrapper{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}:host(.ion-color.toast-translucent) .toast-wrapper{background:rgba(var(--ion-color-base-rgb), 0.8)}}.toast-wrapper.toast-middle{opacity:0.01}.toast-content{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:15px;padding-bottom:15px}.toast-header{margin-bottom:2px;font-weight:500}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;min-height:44px;-webkit-transition:background-color, opacity 100ms linear;transition:background-color, opacity 100ms linear;border:0;background-color:transparent;font-family:var(--ion-font-family);font-size:clamp(17px, 1.0625rem, 21.998px);font-weight:500;overflow:hidden}.toast-button.ion-activated{opacity:0.4}@media (any-hover: hover){.toast-button:hover{opacity:0.6}}",Upe=Vpe,zpe=":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}:host{inset-inline-start:0}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);pointer-events:auto}.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-800, var(--ion-background-color-step-800, #333333));--border-radius:4px;--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--button-color:var(--ion-color-primary, #0054e9);--color:var(--ion-color-step-50, var(--ion-text-color-step-950, #f2f2f2));--max-width:700px;--start:8px;--end:8px;font-size:0.875rem}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;opacity:0.01;z-index:10}.toast-content{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:14px;padding-bottom:14px}.toast-header{margin-bottom:2px;font-weight:500;line-height:1.25rem}.toast-message{line-height:1.25rem}.toast-layout-baseline .toast-button-group-start{-webkit-margin-start:8px;margin-inline-start:8px}.toast-layout-stacked .toast-button-group-start{-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px}.toast-layout-baseline .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px}.toast-layout-stacked .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px;margin-bottom:8px}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;font-family:var(--ion-font-family);font-size:0.875rem;font-weight:500;letter-spacing:0.84px;text-transform:uppercase;overflow:hidden}.toast-button-cancel{color:var(--ion-color-step-100, var(--ion-text-color-step-900, #e6e6e6))}.toast-button-icon-only{border-radius:50%;-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:9px;padding-bottom:9px;width:36px;height:36px}@media (any-hover: hover){.toast-button:hover{background-color:rgba(var(--ion-color-primary-rgb, 0, 84, 233), 0.08)}.toast-button-cancel:hover{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.08)}}",Hpe=zpe,jpe=Gt(class extends jt{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=at(this,"ionToastDidPresent",7),this.willPresent=at(this,"ionToastWillPresent",7),this.willDismiss=at(this,"ionToastWillDismiss",7),this.didDismiss=at(this,"ionToastDidDismiss",7),this.didPresentShorthand=at(this,"didPresent",7),this.willPresentShorthand=at(this,"willPresent",7),this.willDismissShorthand=at(this,"willDismiss",7),this.didDismissShorthand=at(this,"didDismiss",7),this.delegateController=cx(this),this.lockController=Ch(),this.triggerController=db(),this.customHTMLEnabled=Zt.get("innerHTMLTemplatesEnabled",ub),this.presented=!1,this.dispatchCancelHandler=e=>{const t=e.detail.role;if(uh(t)){const i=this.getButtons().find(s=>s.role==="cancel");this.callButtonHandler(i)}},this.createSwipeGesture=e=>{(this.gesture=Bpe(this.el,e,()=>{this.dismiss(void 0,yc)})).enable(!0)},this.destroySwipeGesture=()=>{const{gesture:e}=this;e!==void 0&&(e.destroy(),this.gesture=void 0)},this.prefersSwipeGesture=()=>{const{swipeGesture:e}=this;return e==="vertical"},this.revealContentToScreenReader=!1,this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.color=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.duration=Zt.getNumber("toastDuration",0),this.header=void 0,this.layout="baseline",this.message=void 0,this.keyboardClose=!1,this.position="bottom",this.positionAnchor=void 0,this.buttons=void 0,this.translucent=!1,this.animated=!0,this.icon=void 0,this.htmlAttributes=void 0,this.swipeGesture=void 0,this.isOpen=!1,this.trigger=void 0}swipeGestureChanged(){this.destroySwipeGesture(),this.presented&&this.prefersSwipeGesture()&&this.createSwipeGesture(this.lastPresentedPosition)}onIsOpenChange(e,t){e===!0&&t===!1?this.present():e===!1&&t===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:i}=this;e&&i.addClickListener(t,e)}connectedCallback(){Gp(this.el),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){var e;!((e=this.htmlAttributes)===null||e===void 0)&&e.id||Wp(this.el)}componentDidLoad(){this.isOpen===!0&&Qn(()=>this.present()),this.triggerChanged()}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom();const{el:t,position:i}=this,s=this.getAnchorElement(),r=Lpe(i,s,Tt(this),t);this.lastPresentedPosition=r,await qp(this,"toastEnter",Dpe,Npe,{position:i,top:r.top,bottom:r.bottom}),this.revealContentToScreenReader=!0,this.duration>0&&(this.durationTimeout=setTimeout(()=>this.dismiss(void 0,"timeout"),this.duration)),this.prefersSwipeGesture()&&this.createSwipeGesture(r),e()}async dismiss(e,t){var i,s;const r=await this.lockController.lock(),{durationTimeout:o,position:a,lastPresentedPosition:l}=this;o&&clearTimeout(o);const c=await Kp(this,e,t,"toastLeave",Mpe,Fpe,{position:a,top:(i=l==null?void 0:l.top)!==null&&i!==void 0?i:"",bottom:(s=l==null?void 0:l.bottom)!==null&&s!==void 0?s:""});return c&&(this.delegateController.removeViewFromDom(),this.revealContentToScreenReader=!1),this.lastPresentedPosition=void 0,this.destroySwipeGesture(),r(),c}onDidDismiss(){return Xo(this.el,"ionToastDidDismiss")}onWillDismiss(){return Xo(this.el,"ionToastWillDismiss")}getButtons(){return this.buttons?this.buttons.map(t=>typeof t=="string"?{text:t}:t):[]}getAnchorElement(){const{position:e,positionAnchor:t,el:i}=this;if(t!==void 0){if(e==="middle"&&t!==void 0){pi('The positionAnchor property is ignored when using position="middle".',this.el);return}if(typeof t=="string"){const s=document.getElementById(t);if(s===null){pi('An anchor element with an ID of "'.concat(t,'" was not found in the DOM.'),i);return}return s}if(t instanceof jt)return t;pi("Invalid positionAnchor value:",t,i)}}async buttonClick(e){const t=e.role;return uh(t)?this.dismiss(void 0,t):await this.callButtonHandler(e)?this.dismiss(void 0,t):Promise.resolve()}async callButtonHandler(e){if(e!=null&&e.handler)try{if(await pg(e.handler)===!1)return!1}catch(t){console.error(t)}return!0}renderButtons(e,t){if(e.length===0)return;const i=Tt(this),s={"toast-button-group":!0,["toast-button-group-".concat(t)]:!0};return q("div",{class:s},e.map(r=>q("button",Object.assign({},r.htmlAttributes,{type:"button",class:Gpe(r),tabIndex:0,onClick:()=>this.buttonClick(r),part:Wpe(r)}),q("div",{class:"toast-button-inner"},r.icon&&q("ion-icon",{"aria-hidden":"true",icon:r.icon,slot:r.text===void 0?"icon-only":void 0,class:"toast-button-icon"}),r.text),i==="md"&&q("ion-ripple-effect",{type:r.icon!==void 0&&r.text===void 0?"unbounded":"bounded"}))))}renderToastMessage(e,t=null){const{customHTMLEnabled:i,message:s}=this;return i?q("div",{key:e,"aria-hidden":t,class:"toast-message",part:"message",innerHTML:wp(s)}):q("div",{key:e,"aria-hidden":t,class:"toast-message",part:"message"},s)}renderHeader(e,t=null){return q("div",{key:e,class:"toast-header","aria-hidden":t,part:"header"},this.header)}render(){const{layout:e,el:t,revealContentToScreenReader:i,header:s,message:r}=this,o=this.getButtons(),a=o.filter(u=>u.side==="start"),l=o.filter(u=>u.side!=="start"),c=Tt(this),d={"toast-wrapper":!0,["toast-".concat(this.position)]:!0,["toast-layout-".concat(e)]:!0};return e==="stacked"&&a.length>0&&l.length>0&&pi("This toast is using start and end buttons with the stacked toast layout. We recommend following the best practice of using either start or end buttons with the stacked toast layout.",t),q(Yt,Object.assign({key:"c05655ff06af8d0e48c2a85396b07ad942fa81b4",tabindex:"-1"},this.htmlAttributes,{style:{zIndex:"".concat(6e4+this.overlayIndex)},class:ds(this.color,Object.assign(Object.assign({[c]:!0},Ko(this.cssClass)),{"overlay-hidden":!0,"toast-translucent":this.translucent})),onIonToastWillDismiss:this.dispatchCancelHandler}),q("div",{key:"9393ead4de1bf28529661d6f64049d34e18d725c",class:d},q("div",{key:"3e9dd73c17c337849c3f26e8d0f395b3e5ee20a7",class:"toast-container",part:"container"},this.renderButtons(a,"start"),this.icon!==void 0&&q("ion-icon",{key:"5d15b18364301ad55e44e9f601014ac33181590b",class:"toast-icon",part:"icon",icon:this.icon,lazy:!1,"aria-hidden":"true"}),q("div",{key:"f6dd164502637a882c5caf18445d8509b85ad6f9",class:"toast-content",role:"status","aria-atomic":"true","aria-live":"polite"},!i&&s!==void 0&&this.renderHeader("oldHeader","true"),!i&&r!==void 0&&this.renderToastMessage("oldMessage","true"),i&&s!==void 0&&this.renderHeader("header"),i&&r!==void 0&&this.renderToastMessage("header")),this.renderButtons(l,"end"))))}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:Upe,md:Hpe}}},[33,"ion-toast",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],color:[513],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],duration:[2],header:[1],layout:[1],message:[1],keyboardClose:[4,"keyboard-close"],position:[1],positionAnchor:[1,"position-anchor"],buttons:[16],translucent:[4],animated:[4],icon:[1],htmlAttributes:[16],swipeGesture:[1,"swipe-gesture"],isOpen:[4,"is-open"],trigger:[1],revealContentToScreenReader:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),Gpe=n=>({"toast-button":!0,"toast-button-icon-only":n.icon!==void 0&&n.text===void 0,["toast-button-".concat(n.role)]:n.role!==void 0,"ion-focusable":!0,"ion-activatable":!0}),Wpe=n=>uh(n.role)?"button cancel":"button";function qpe(){if(typeof customElements>"u")return;["ion-toast","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-toast":customElements.get(e)||customElements.define(e,jpe);break;case"ion-icon":customElements.get(e)||$l();break;case"ion-ripple-effect":customElements.get(e)||Jo();break}})}const Kpe=qpe;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const jN=Due;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ype=sN,GR="update:modelValue",ek="modelValue",tk="routerLink",WR="navManager",Xpe="router",Qpe="aria",Lu=Symbol(),nk={default:Lu},qR=n=>(n==null?void 0:n.split(" "))||[],Zpe=(n,e,t=[])=>{var i;return[...Array.from(((i=n.value)===null||i===void 0?void 0:i.classList)||[]),...t].filter((s,r,o)=>!e.has(s)&&o.indexOf(s)===r)},zn=(n,e,t=[],i,s)=>{e!==void 0&&e();const r=Fe((o,{attrs:a,slots:l,emit:c})=>{var d;let u=o[i];const h=K(),f=new Set(qR(a.class)),m={created:k=>{(Array.isArray(s)?s:[s]).forEach(T=>{k.addEventListener(T.toLowerCase(),P=>{P.target.tagName===k.tagName&&(u=(P==null?void 0:P.target)[i],c(GR,u))})})}},g=kh(),w=((d=g==null?void 0:g.appContext)===null||d===void 0?void 0:d.provides[WR])?qi(WR):void 0,x=k=>{const{routerLink:E}=o;if(E!==Lu)if(w!==void 0){k.preventDefault();let T={event:k};for(const P in o){const C=o[P];o.hasOwnProperty(P)&&P.startsWith(Xpe)&&C!==Lu&&(T[P]=C)}w.navigate(T)}else console.warn("Tried to navigate, but no router was found. Make sure you have mounted Vue Router.")};return()=>{u=o[i],qR(a.class).forEach(C=>{f.add(C)});const k=o.onClick,E=C=>{k!==void 0&&k(C),C.defaultPrevented||x(C)};let T={ref:h,class:Zpe(h,f),onClick:E};for(const C in o){const A=o[C];(o.hasOwnProperty(C)&&A!==Lu||C.startsWith(Qpe))&&(T[C]=A)}i&&(o[ek]!==Lu?T=Object.assign(Object.assign({},T),{[i]:o[ek]}):u!==Lu&&(T=Object.assign(Object.assign({},T),{[i]:u}))),o[tk]!==Lu&&(T=Object.assign(Object.assign({},T),{href:o[tk]}));const P=hi(n,T,l.default&&l.default());return i===void 0?P:si(P,[[m]])}});return typeof r!="function"&&(r.name=n,r.props={[tk]:nk},t.forEach(o=>{r.props[o]=nk}),i&&(r.props[ek]=nk,r.emits=[GR])),r},GN=zn("ion-accordion",Aie,["value","disabled","readonly","toggleIcon","toggleIconSlot"]),WN=zn("ion-accordion-group",Mie,["animated","multiple","value","disabled","readonly","expand","ionChange","ionValueChange"],"value","ion-change"),KR=zn("ion-badge",Xie,["color"]),ko=zn("ion-button",lse,["color","buttonType","disabled","expand","fill","routerDirection","routerAnimation","download","href","rel","shape","size","strong","target","type","form","ionFocus","ionBlur"]),qN=zn("ion-card",xse,["color","button","type","disabled","download","href","rel","routerDirection","routerAnimation","target"]),Xp=zn("ion-checkbox",Ise,["color","name","checked","indeterminate","disabled","value","labelPlacement","justify","alignment","ionChange","ionFocus","ionBlur"],"checked","ion-change"),YR=zn("ion-chip",Mse,["color","outline","disabled"]),At=zn("ion-content",jse,["color","fullscreen","fixedSlotPlacement","forceOverscroll","scrollX","scrollY","scrollEvents","ionScrollStart","ionScroll","ionScrollEnd"]),Jpe=zn("ion-datetime",Tae,["color","name","disabled","formatOptions","readonly","isDateEnabled","min","max","presentation","cancelText","doneText","clearText","yearValues","monthValues","dayValues","hourValues","minuteValues","locale","firstDayOfWeek","titleSelectedDatesFormatter","multiple","highlightedDates","value","showDefaultTitle","showDefaultButtons","showClearButton","showDefaultTimeLabel","hourCycle","size","preferWheel","ionCancel","ionChange","ionValueChange","ionFocus","ionBlur","ionStyle","ionRender"],"value","ion-change"),xA=zn("ion-footer",Oae,["collapse","translucent"]),Bn=zn("ion-header",Wae,["collapse","translucent"]),Zn=zn("ion-infinite-scroll",Qae,["threshold","disabled","position","ionInfinite"]),Jn=zn("ion-infinite-scroll-content",ple,["loadingSpinner","loadingText"]),Tn=zn("ion-input",kle,["color","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","inputmode","helperText","label","labelPlacement","max","maxlength","min","minlength","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value","ionInput","ionChange","ionBlur","ionFocus"],"value","ion-input"),wT=zn("ion-input-password-toggle",Ple,["color","showIcon","hideIcon","type"]),KN=zn("ion-item",Nle,["color","button","detail","detailIcon","disabled","download","href","rel","lines","routerAnimation","routerDirection","target","type"]),Nd=zn("ion-label",jle,["color","position","ionColor","ionStyle"]),xT=zn("ion-list",Qle,["lines","inset"]),eme=zn("ion-menu",bce,["contentId","menuId","type","disabled","side","swipeGesture","maxEdgeStart","ionWillOpen","ionWillClose","ionDidOpen","ionDidClose","ionMenuChange"]),La=zn("ion-radio",$ce,["color","name","disabled","value","labelPlacement","justify","alignment","ionFocus","ionBlur"],"value","ion-change"),Tc=zn("ion-radio-group",Mce,["allowEmptySelection","compareWith","name","value","ionChange","ionValueChange"],"value","ion-change"),Jr=zn("ion-refresher",Qce,["pullMin","pullMax","closeDuration","snapbackDuration","pullFactor","disabled","ionRefresh","ionPull","ionStart"]),eo=zn("ion-refresher-content",ede,["pullingIcon","pullingText","refreshingSpinner","refreshingText"]),_T=zn("ion-reorder",ade),kT=zn("ion-reorder-group",mde,["disabled","ionItemReorder"]),YN=zn("ion-segment",_de,["color","disabled","scrollable","swipeGesture","value","selectOnFocus","ionChange","ionSelect","ionStyle"],"value","ion-change"),ET=zn("ion-segment-button",Pde,["contentId","disabled","layout","type","value"],"value","ion-change"),XR=zn("ion-segment-content",Dde),tme=zn("ion-segment-view",zde,["disabled","ionSegmentViewScroll"]),QR=zn("ion-skeleton-text",Zue,["animated","ionStyle"]),fb=zn("ion-spinner",Jue,["color","duration","name","paused"]),nme=zn("ion-tab",she,["active","delegate","tab","component"]),Ai=zn("ion-text",che,["color"]),Ep=zn("ion-textarea",bhe,["color","autocapitalize","autofocus","clearOnEdit","debounce","disabled","fill","inputmode","enterkeyhint","maxlength","minlength","name","placeholder","readonly","required","spellcheck","cols","rows","wrap","autoGrow","value","counter","counterFormatter","errorText","helperText","label","labelPlacement","shape","ionChange","ionInput","ionBlur","ionFocus"],"value","ion-input"),Qp=zn("ion-title",vhe,["color","size","ionStyle"]),An=zn("ion-toolbar",yhe,["color"]);var bl;(function(n){n.WillEnter="onIonViewWillEnter",n.DidEnter="onIonViewDidEnter",n.WillLeave="onIonViewWillLeave",n.DidLeave="onIonViewDidLeave"})(bl||(bl={}));const ime={[cA]:bl.WillEnter,[dA]:bl.DidEnter,[dx]:bl.WillLeave,[ux]:bl.DidLeave},ZR={main:0},sme=(n="main")=>{var e;const t=((e=ZR[n])!==null&&e!==void 0?e:0)+1;return ZR[n]=t,t.toString()},H1=(n,e,t)=>{n!=null&&n[t]&&n[t].bind(e==null?void 0:e.value)();const i=e==null?void 0:e.value;if(i!=null&&i[t]&&i[t](),i){const s=ime[t],r=i[s];r&&r.forEach(o=>o())}},XN=()=>{if(typeof window<"u"){const n=window.Ionic;if(n&&n.config)return n.config}return null},rme=(n,e,t)=>{if(t){const i=t,s=i.proxy[n]||(i.proxy[n]=[]);i.exposed&&(i.exposed[n]=s);const r=(...o)=>{if(!i.isUnmounted)return o?e(...o):e()};return s.push(r),r}else console.warn("[@ionic/vue]: Ionic Lifecycle Hooks can only be used during execution of setup().")},bx=n=>(e,t=kh())=>rme(n,e,t),_A=bx(bl.WillEnter),ome=bx(bl.DidEnter);bx(bl.WillLeave);bx(bl.DidLeave);const gn=()=>{const{canGoBack:n,goBack:e,goForward:t,handleNavigate:i}=qi("navManager"),s=(c,d,u,h)=>i(c,u,d,h);return{canGoBack:n,push:(c,d)=>s(c,"forward","push",d),replace:(c,d)=>s(c,"root","replace",d),back:c=>e(c),forward:c=>t(c),navigate:s}},ik=n=>n.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),ame=()=>({ael:(n,e,t,i)=>n.addEventListener(ik(e),t,i),rel:(n,e,t,i)=>n.removeEventListener(ik(e),t,i),ce:(n,e)=>new CustomEvent(ik(n),e)}),lme={async install(n,e={}){typeof document<"u"&&document.documentElement.classList.add("ion-ce");const{ael:t,rel:i,ce:s}=ame();oie(Object.assign(Object.assign({},e),{_ael:t,_rel:i,_ce:s}))}},cme=Fe((n,{attrs:e,slots:t})=>{Che();const i=qi("navManager"),s=()=>{if(i===void 0)return;const r=e["default-href"]||e.defaultHref,o=e["router-animation"]||e.routerAnimation;i.handleNavigateBack(r,o)};return()=>hi("ion-back-button",Object.assign({onClick:s},e),t.default&&t.default())});cme.name="IonBackButton";const Dn=Fe({name:"IonPage",props:{registerIonPage:{type:Function,default:()=>{}}},mounted(){this.$props.registerIonPage(this.$refs.ionPage)},setup(n,{attrs:e,slots:t}){return()=>hi("div",Object.assign(Object.assign({},e),{class:"ion-page",ref:"ionPage"}),t.default&&t.default())}}),JR=n=>!n.classList.contains("ion-page-hidden")&&!n.classList.contains("ion-page-invisible"),e6=Symbol(0),QN=Fe({name:"IonRouterOutlet",setup(){Rhe();const n=qi(gx),e=Zr(),t=qi(e6,0),i=lt(()=>e.matched[t]);let s,r;Ad(e6,t+1),Ad(VN,i);const o=K(),a=sme("ion-router-outlet"),l=qi("navManager"),c=qi("viewStacks"),d=jp([]);let u=!1,h;ki(()=>[e,i.value],([E,T])=>{if(T!==void 0){const P=T!==s,C=E.matched[E.matched.length-1]===T&&E.path!==r;(P||C)&&x(i)}s=T,r=E.path},{deep:!0});const f=()=>{const E=XN();if(!(E&&E.get("swipeBackEnabled",o.value.mode==="ios")))return!1;const P=c.getViewStack(a);if(!P||P.length<=1)return!1;const C=l.getLeavingRouteInfo();return!!c.findViewItemByRouteInfo({pathname:C.pushedByRoute||""},a)},m=async()=>{const E=l.getLeavingRouteInfo(),{routerAnimation:T}=E,P=c.findViewItemByRouteInfo({pathname:E.pushedByRoute||""},a),C=c.findViewItemByRouteInfo(E,a);if(C){let A=T;const R=P.ionPageElement,M=C.ionPageElement,N=P.routerAnimation;A===void 0&&N!==void 0&&(A=N),C.routerAnimation=A,await b(R,M,"back",l.canGoBack(2),!0,A)}return Promise.resolve()},g=E=>{if(E)u=!0,l.handleNavigateBack();else{const T=l.getCurrentRouteInfo(),P=c.findViewItemByRouteInfo({pathname:T.pushedByRoute||""},a);P.ionPageElement.setAttribute("aria-hidden","true"),P.ionPageElement.classList.add("ion-page-hidden")}};ki(o,()=>{o.value.swipeHandler={canStart:f,onStart:m,onEnd:g}});const b=async(E,T,P,C,A,R)=>{if(u)return u=!1,Promise.resolve(!1);if(E===T)return Promise.resolve(!1);E.classList.add("ion-page-invisible");const M=P===void 0||P==="root"||P==="none";return await o.value.commit(E,T,{duration:M&&R===void 0?0:void 0,direction:P,showGoBack:C,progressAnimation:A,animationBuilder:R})},w=async()=>{const E=l.getCurrentRouteInfo(),{routerDirection:T,routerAction:P,routerAnimation:C,prevRouteLastPathname:A,delta:R}=E,M=c.findViewItemByRouteInfo(E,a);let N=c.findLeavingViewItemByRouteInfo(E,a);const U=M.ionPageElement;if(U===void 0&&console.warn("[@ionic/vue Warning]: The view you are trying to render for path ".concat(E.pathname," does not have the required <ion-page> component. Transitions and lifecycle methods may not work as expected.\n\nSee https://ionicframework.com/docs/vue/navigation#ionpage for more information.")),M!==N&&(!N&&A&&(N=c.findViewItemByPathname(A,a)),!(JR(U)&&(N==null?void 0:N.ionPageElement)!==void 0&&!JR(N.ionPageElement)))){if(H1(M.vueComponent,M.vueComponentRef,cA),N!=null&&N.ionPageElement&&M!==N){let G=C;const B=N.ionPageElement;H1(N.vueComponent,N.vueComponentRef,dx);const te=M.routerAnimation;G===void 0&&T==="back"&&te!==void 0&&(G=te),N.routerAnimation=G,await b(U,B,T,!!E.pushedByRoute,!1,G),B.classList.add("ion-page-hidden"),B.setAttribute("aria-hidden","true");const X=c.size()===1;P==="replace"?(N.mount=!1,N.ionPageElement=void 0,N.ionRoute=!1):P==="push"&&T==="forward"?X&&c.mountIntermediaryViews(a,N,R):T!=="none"&&N&&M!==N&&(N.mount=!1,N.ionPageElement=void 0,N.ionRoute=!1,X&&c.unmountLeavingViews(a,M,R)),H1(N.vueComponent,N.vueComponentRef,ux)}else requestAnimationFrame(()=>U.classList.remove("ion-page-invisible"));H1(M.vueComponent,M.vueComponentRef,dA),d.value=c.getChildrenToRender(a)}},x=E=>{const T=e.matched[0];if(h||(h=T.path),!E.value||E.value!==T&&T.path!==h)return;const P=l.getCurrentRouteInfo();let C=c.findViewItemByRouteInfo(P,a);C||(C=c.createViewItem(a,E.value.components.default,E.value,P),c.add(C)),C.mount?w():(C.mount=!0,C.registerCallback=()=>{w(),C.registerCallback=void 0}),d.value=c.getChildrenToRender(a)};return i.value&&x(i),Jw(()=>c.clear(a)),{id:a,components:d,injectedRoute:n,ionRouterOutlet:o,registerIonPage:(E,T)=>{const P=E.ionPageElement;c.registerIonPage(E,T),E.registerCallback?(T.classList.add("ion-page-invisible"),E.registerCallback()):P&&!P.classList.contains("ion-page-invisible")&&T.classList.remove("ion-page-invisible")}}},render(){const{components:n,registerIonPage:e,injectedRoute:t}=this;return hi("ion-router-outlet",{ref:"ionRouterOutlet"},n&&n.map(i=>{var s,r;let o={ref:i.vueComponentRef,key:i.pathname,registerIonPage:d=>e(i,d)};const a=(r=(s=i.matchedRoute)===null||s===void 0?void 0:s.props)===null||r===void 0?void 0:r.default,c=a?a===!0?i.params:typeof a=="function"?(()=>{var d;const u=(d=i.vueComponentData)===null||d===void 0?void 0:d.propsFunctionResult;if(u)return u;{const h=a(t);return i.vueComponentData=Object.assign(Object.assign({},i.vueComponentData),{propsFunctionResult:h}),h}})():a:null;return o=Object.assign(Object.assign({},o),c),hi(i.vueComponent,o)}))}}),j1=Fe({name:"IonTabButton",props:{_getTabState:{type:Function,default:()=>({})},disabled:Boolean,download:String,href:String,rel:String,layout:String,selected:Boolean,tab:String,target:String,_onClick:{type:Function,required:!1}},setup(n,{slots:e}){Bfe();const t=qi("navManager",null),i=s=>{s.cancelable&&s.preventDefault();const{tab:r,href:o,_getTabState:a}=n,l=a(),c=l.hasRouterOutlet,d=l.tabs[r]||{},u=d.originalHref||o,h=c?d.currentHref||o:"",f=l.activeTab;!c&&n._onClick&&n._onClick(new CustomEvent("ionTabButtonClick",{detail:{href:h,selected:r===f,tab:r}})),t!==null&&(f===r?u!==h&&t.resetTab(r):t.changeTab(r,h))};return()=>hi("ion-tab-button",Object.assign({onClick:i},n),e.default&&e.default())}}),t6="ionTabsWillChange",n6="ionTabsDidChange",i6=n=>n.type&&(n.type.name==="IonRouterOutlet"||n.type==="ion-router-outlet"),ZN=n=>n.type===Ue?Array.isArray(n.children)?n.children.some(e=>up(e)&&ZN(e)):!1:n.type&&(n.type.name==="ion-tab"||n.type===nme),dme=Fe({name:"IonTabs",emits:[t6,n6],data(){return{hasRouterOutlet:!1}},setup(n,{slots:e,emit:t}){const i=e.default&&e.default();let s;return i&&i.length>0&&(s=i.find(r=>i6(r))),Ad("tabBarData",jp({hasRouterOutlet:!!s,_tabsWillChange:r=>t(t6,{tab:r}),_tabsDidChange:r=>t(n6,{tab:r})})),{props:n,slots:e,emit:t}},mounted(){jfe()},render(){const{slots:n,props:e}=this,t=n.default&&n.default();let i,s=!1;if(t&&t.length>0&&(i=t.find(r=>i6(r)),s=t.some(r=>ZN(r))),!i&&!s)throw new Error("IonTabs must contain an IonRouterOutlet or an IonTab.");if(i&&s)throw new Error("IonTabs cannot contain an IonRouterOutlet and IonTab at the same time.");return s?hi("ion-tabs",Object.assign({},e),t):hi("ion-tabs",{style:{display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0","flex-direction":"column",width:"100%",height:"100%",contain:"layout size style","z-index":"0"}},t)}}),JN=n=>{var e;return((e=n.type)===null||e===void 0?void 0:e.name)==="IonTabButton"},eF=n=>{let e=[];return n.forEach(t=>{if(JN(t))e.push(t);else if(Array.isArray(t.children)&&t.children.length>1){const i=eF(t.children);e=[...e,...i]}}),e},ume=Fe({name:"IonTabBar",data(){return{tabState:{activeTab:void 0,tabs:{},hasRouterOutlet:!1},tabVnodes:[],_tabsWillChange:{type:Function,default:()=>{}},_tabsDidChange:{type:Function,default:()=>{}}}},updated(){this.setupTabState(qi("navManager",null))},methods:{setupTabState(n){const e=this.$data.tabState.hasRouterOutlet,t=this.$data.tabState,i=kh();(this.$data.tabVnodes=eF(i.subTree.children||[])).forEach(r=>{t.tabs[r.props.tab]={originalHref:r.props.href,currentHref:r.props.href,ref:r},r.component.props._getTabState=()=>t,e||(r.component.props._onClick=o=>{this.handleIonTabButtonClick(o)})}),this.checkActiveTab(n)},checkActiveTab(n){const e=this.$data.tabState.hasRouterOutlet,t=n==null?void 0:n.getCurrentRouteInfo(),i=this.$data.tabVnodes,{tabs:s,activeTab:r}=this.$data.tabState,o=Object.keys(s);let a=o.find(l=>{const c=s[l].originalHref;return t==null?void 0:t.pathname.startsWith(c)});if(!a&&!e&&(a=o[0]),i.forEach(l=>{const c=s[l.props.tab];(!c||c.originalHref!==l.props.href)&&(s[l.props.tab]={originalHref:l.props.href,currentHref:l.props.href,ref:l})}),a&&r){const l=this.$data.tabState.tabs[r].currentHref;if(a!==r||l!==(t==null?void 0:t.pathname)){const c=t!=null&&t.search?"?".concat(t.search):"";s[a]=Object.assign(Object.assign({},s[a]),{currentHref:(t==null?void 0:t.pathname)+c})}(t==null?void 0:t.routerAction)==="pop"&&a!==r&&(s[r]=Object.assign(Object.assign({},s[r]),{currentHref:s[r].originalHref}))}this.tabSwitch(a,n)},handleIonTabButtonClick(n){const e=n.detail.tab;this.tabSwitch(e)},tabSwitch(n,e){const t=this.$data.tabState.hasRouterOutlet,i=this.$data.tabVnodes,{activeTab:s}=this.$data.tabState,r=this.$data.tabState,o=i.find(c=>{var d;return JN(c)&&((d=c.props)===null||d===void 0?void 0:d.tab)===n}),a=this.$refs.ionTabBar,l=n!==s;a&&(o?(l&&this.$data._tabsWillChange(n),t&&e!==null&&e.handleSetCurrentTab(n),a.selectedTab=r.activeTab=n,l&&this.$data._tabsDidChange(n)):a.selectedTab=r.activeTab="")}},mounted(){const n=qi("navManager",null),e=qi("tabBarData");this.$data.tabState.hasRouterOutlet=e.value.hasRouterOutlet,this.$data._tabsWillChange=e.value._tabsWillChange,this.$data._tabsDidChange=e.value._tabsDidChange,this.setupTabState(n),n==null||n.registerHistoryChangeListener(()=>this.checkActiveTab(n))},setup(n,{slots:e}){return Qfe(),()=>hi("ion-tab-bar",{ref:"ionTabBar"},e.default&&e.default())}}),i0=jp([]),tF=Fe((n,{attrs:e,slots:t})=>(spe(),()=>hi("ion-app",Object.assign({},e),[t.default&&t.default(),...i0.value])));tF.name="IonApp";const hme=n=>{i0.value=[...i0.value,n]},fme=n=>{i0.value=i0.value.filter(e=>e!==n)},nF=(n=hme,e=fme)=>{const t=new WeakMap;return{attachViewToDom:(r,o,a={},l)=>{const c=document.createElement("div");l&&c.classList.add(...l),r.appendChild(c);const d=hi(WJ,{to:c},hi(o,Object.assign({},a)));return t.set(c,d),n(d),Promise.resolve(c)},removeViewFromDom:(r,o)=>{const a=t.get(o);return a&&e(a),Promise.resolve()}}},iF=Fe(n=>{kce();const e=jp([]),s=nF(r=>e.value=[...e.value,r],r=>e.value=e.value.filter(o=>o!==r));return()=>hi("ion-nav",Object.assign(Object.assign({},n),{delegate:s}),e.value)});iF.name="IonNav";iF.props={animated:{type:Boolean,default:!0},animation:{type:Function,default:void 0},root:{type:[Function,Object,String],default:void 0},rootParams:{type:Object,default:void 0},swipeGesture:{type:Boolean,default:void 0}};const fe=Fe({name:"IonIcon",props:{color:String,flipRtl:Boolean,icon:String,ios:String,lazy:String,md:String,mode:String,name:String,size:String,src:String},setup(n,{slots:e}){return ype(),()=>{var t,i;const{icon:s,ios:r,md:o,mode:a}=n;let l;const c=XN(),d=a||(c==null?void 0:c.get("mode"));return r||o?d==="ios"?l=(t=r!=null?r:o)!==null&&t!==void 0?t:s:l=(i=o!=null?o:r)!==null&&i!==void 0?i:s:l=s,hi("ion-icon",Object.assign(Object.assign({},n),{icon:l}),e)}}}),sF=Symbol(),s6={default:sF},rF=(n,e,t=[],i,s)=>{const o=Fe((a,{slots:l})=>{e!==void 0&&e();const c=K(!1),d=K();return on(()=>{d.value.addEventListener("ion-mount",()=>c.value=!0),d.value.addEventListener("will-present",()=>c.value=!0),d.value.addEventListener("did-dismiss",()=>c.value=!1)}),()=>{let u={};for(const f in a){const m=a[f];a.hasOwnProperty(f)&&m!==sF&&(u[f]=m)}const h=()=>i?hi("div",{className:"ion-delegate-host ion-page"},l):l;return hi(n,Object.assign(Object.assign({},u),{ref:d}),c.value||u.keepContentsMounted||u.keepContentsMounted===""?h():void 0)}});return o.name=n,o.props={isOpen:s6},t.forEach(a=>{o.props[a]=s6}),o},pme=rF("ion-loading",$pe,["animated","backdropDismiss","cssClass","duration","enterAnimation","htmlAttributes","isOpen","keyboardClose","leaveAnimation","message","mode","showBackdrop","spinner","translucent","trigger"]),kA=rF("ion-modal",jN,["animated","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","enterAnimation","focusTrap","handle","handleBehavior","htmlAttributes","initialBreakpoint","isOpen","keepContentsMounted","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","trigger"],!0),pb=(n,e,t=!1)=>{const i=t?nF():void 0,s=e.create.bind(e);return e.create=r=>(n(),s(Object.assign(Object.assign({},r),{delegate:i}))),e},qe=pb(jN,foe,!0),EA=pb(Ype,poe,!0),Fd=pb(xpe,uoe),Bd=pb(wpe,hoe),vx=pb(Kpe,moe);var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var oF={exports:{}},sk={exports:{}},r6;function aF(){return r6||(r6=1,function(n,e){(function(t,i){n.exports=i()})(Ar,function(){var t=1e3,i=6e4,s=36e5,r="millisecond",o="second",a="minute",l="hour",c="day",d="week",u="month",h="quarter",f="year",m="date",g="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var te=["th","st","nd","rd"],X=B%100;return"["+B+(te[(X-20)%10]||te[X]||te[0])+"]"}},k=function(B,te,X){var ue=String(B);return!ue||ue.length>=te?B:""+Array(te+1-ue.length).join(X)+B},E={s:k,z:function(B){var te=-B.utcOffset(),X=Math.abs(te),ue=Math.floor(X/60),he=X%60;return(te<=0?"+":"-")+k(ue,2,"0")+":"+k(he,2,"0")},m:function B(te,X){if(te.date()<X.date())return-B(X,te);var ue=12*(X.year()-te.year())+(X.month()-te.month()),he=te.clone().add(ue,u),Ie=X-he<0,xe=te.clone().add(ue+(Ie?-1:1),u);return+(-(ue+(X-he)/(Ie?he-xe:xe-he))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:u,y:f,w:d,d:c,D:m,h:l,m:a,s:o,ms:r,Q:h}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},T="en",P={};P[T]=x;var C="$isDayjsObject",A=function(B){return B instanceof U||!(!B||!B[C])},R=function B(te,X,ue){var he;if(!te)return T;if(typeof te=="string"){var Ie=te.toLowerCase();P[Ie]&&(he=Ie),X&&(P[Ie]=X,he=Ie);var xe=te.split("-");if(!he&&xe.length>1)return B(xe[0])}else{var Be=te.name;P[Be]=te,he=Be}return!ue&&he&&(T=he),he||!ue&&T},M=function(B,te){if(A(B))return B.clone();var X=typeof te=="object"?te:{};return X.date=B,X.args=arguments,new U(X)},N=E;N.l=R,N.i=A,N.w=function(B,te){return M(B,{locale:te.$L,utc:te.$u,x:te.$x,$offset:te.$offset})};var U=function(){function B(X){this.$L=R(X.locale,null,!0),this.parse(X),this.$x=this.$x||X.x||{},this[C]=!0}var te=B.prototype;return te.parse=function(X){this.$d=function(ue){var he=ue.date,Ie=ue.utc;if(he===null)return new Date(NaN);if(N.u(he))return new Date;if(he instanceof Date)return new Date(he);if(typeof he=="string"&&!/Z$/i.test(he)){var xe=he.match(b);if(xe){var Be=xe[2]-1||0,Pe=(xe[7]||"0").substring(0,3);return Ie?new Date(Date.UTC(xe[1],Be,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,Pe)):new Date(xe[1],Be,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,Pe)}}return new Date(he)}(X),this.init()},te.init=function(){var X=this.$d;this.$y=X.getFullYear(),this.$M=X.getMonth(),this.$D=X.getDate(),this.$W=X.getDay(),this.$H=X.getHours(),this.$m=X.getMinutes(),this.$s=X.getSeconds(),this.$ms=X.getMilliseconds()},te.$utils=function(){return N},te.isValid=function(){return this.$d.toString()!==g},te.isSame=function(X,ue){var he=M(X);return this.startOf(ue)<=he&&he<=this.endOf(ue)},te.isAfter=function(X,ue){return M(X)<this.startOf(ue)},te.isBefore=function(X,ue){return this.endOf(ue)<M(X)},te.$g=function(X,ue,he){return N.u(X)?this[ue]:this.set(he,X)},te.unix=function(){return Math.floor(this.valueOf()/1e3)},te.valueOf=function(){return this.$d.getTime()},te.startOf=function(X,ue){var he=this,Ie=!!N.u(ue)||ue,xe=N.p(X),Be=function(ne,ie){var me=N.w(he.$u?Date.UTC(he.$y,ie,ne):new Date(he.$y,ie,ne),he);return Ie?me:me.endOf(c)},Pe=function(ne,ie){return N.w(he.toDate()[ne].apply(he.toDate("s"),(Ie?[0,0,0,0]:[23,59,59,999]).slice(ie)),he)},Ae=this.$W,de=this.$M,we=this.$D,ze="set"+(this.$u?"UTC":"");switch(xe){case f:return Ie?Be(1,0):Be(31,11);case u:return Ie?Be(1,de):Be(0,de+1);case d:var le=this.$locale().weekStart||0,Se=(Ae<le?Ae+7:Ae)-le;return Be(Ie?we-Se:we+(6-Se),de);case c:case m:return Pe(ze+"Hours",0);case l:return Pe(ze+"Minutes",1);case a:return Pe(ze+"Seconds",2);case o:return Pe(ze+"Milliseconds",3);default:return this.clone()}},te.endOf=function(X){return this.startOf(X,!1)},te.$set=function(X,ue){var he,Ie=N.p(X),xe="set"+(this.$u?"UTC":""),Be=(he={},he[c]=xe+"Date",he[m]=xe+"Date",he[u]=xe+"Month",he[f]=xe+"FullYear",he[l]=xe+"Hours",he[a]=xe+"Minutes",he[o]=xe+"Seconds",he[r]=xe+"Milliseconds",he)[Ie],Pe=Ie===c?this.$D+(ue-this.$W):ue;if(Ie===u||Ie===f){var Ae=this.clone().set(m,1);Ae.$d[Be](Pe),Ae.init(),this.$d=Ae.set(m,Math.min(this.$D,Ae.daysInMonth())).$d}else Be&&this.$d[Be](Pe);return this.init(),this},te.set=function(X,ue){return this.clone().$set(X,ue)},te.get=function(X){return this[N.p(X)]()},te.add=function(X,ue){var he,Ie=this;X=Number(X);var xe=N.p(ue),Be=function(de){var we=M(Ie);return N.w(we.date(we.date()+Math.round(de*X)),Ie)};if(xe===u)return this.set(u,this.$M+X);if(xe===f)return this.set(f,this.$y+X);if(xe===c)return Be(1);if(xe===d)return Be(7);var Pe=(he={},he[a]=i,he[l]=s,he[o]=t,he)[xe]||1,Ae=this.$d.getTime()+X*Pe;return N.w(Ae,this)},te.subtract=function(X,ue){return this.add(-1*X,ue)},te.format=function(X){var ue=this,he=this.$locale();if(!this.isValid())return he.invalidDate||g;var Ie=X||"YYYY-MM-DDTHH:mm:ssZ",xe=N.z(this),Be=this.$H,Pe=this.$m,Ae=this.$M,de=he.weekdays,we=he.months,ze=he.meridiem,le=function(ie,me,V,F){return ie&&(ie[me]||ie(ue,Ie))||V[me].slice(0,F)},Se=function(ie){return N.s(Be%12||12,ie,"0")},ne=ze||function(ie,me,V){var F=ie<12?"AM":"PM";return V?F.toLowerCase():F};return Ie.replace(w,function(ie,me){return me||function(V){switch(V){case"YY":return String(ue.$y).slice(-2);case"YYYY":return N.s(ue.$y,4,"0");case"M":return Ae+1;case"MM":return N.s(Ae+1,2,"0");case"MMM":return le(he.monthsShort,Ae,we,3);case"MMMM":return le(we,Ae);case"D":return ue.$D;case"DD":return N.s(ue.$D,2,"0");case"d":return String(ue.$W);case"dd":return le(he.weekdaysMin,ue.$W,de,2);case"ddd":return le(he.weekdaysShort,ue.$W,de,3);case"dddd":return de[ue.$W];case"H":return String(Be);case"HH":return N.s(Be,2,"0");case"h":return Se(1);case"hh":return Se(2);case"a":return ne(Be,Pe,!0);case"A":return ne(Be,Pe,!1);case"m":return String(Pe);case"mm":return N.s(Pe,2,"0");case"s":return String(ue.$s);case"ss":return N.s(ue.$s,2,"0");case"SSS":return N.s(ue.$ms,3,"0");case"Z":return xe}return null}(ie)||xe.replace(":","")})},te.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},te.diff=function(X,ue,he){var Ie,xe=this,Be=N.p(ue),Pe=M(X),Ae=(Pe.utcOffset()-this.utcOffset())*i,de=this-Pe,we=function(){return N.m(xe,Pe)};switch(Be){case f:Ie=we()/12;break;case u:Ie=we();break;case h:Ie=we()/3;break;case d:Ie=(de-Ae)/6048e5;break;case c:Ie=(de-Ae)/864e5;break;case l:Ie=de/s;break;case a:Ie=de/i;break;case o:Ie=de/t;break;default:Ie=de}return he?Ie:N.a(Ie)},te.daysInMonth=function(){return this.endOf(u).$D},te.$locale=function(){return P[this.$L]},te.locale=function(X,ue){if(!X)return this.$L;var he=this.clone(),Ie=R(X,ue,!0);return Ie&&(he.$L=Ie),he},te.clone=function(){return N.w(this.$d,this)},te.toDate=function(){return new Date(this.valueOf())},te.toJSON=function(){return this.isValid()?this.toISOString():null},te.toISOString=function(){return this.$d.toISOString()},te.toString=function(){return this.$d.toUTCString()},B}(),G=U.prototype;return M.prototype=G,[["$ms",r],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",f],["$D",m]].forEach(function(B){G[B[1]]=function(te){return this.$g(te,B[0],B[1])}}),M.extend=function(B,te){return B.$i||(B(te,U,M),B.$i=!0),M},M.locale=R,M.isDayjs=A,M.unix=function(B){return M(1e3*B)},M.en=P[T],M.Ls=P,M.p={},M})}(sk)),sk.exports}(function(n,e){(function(t,i){n.exports=i(aF())})(Ar,function(t){function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(t),r={name:"vi",weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(o){return o},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"}};return s.default.locale(r,null,!0),r})})(oF);var mme=oF.exports;const gme=mb(mme);var lF={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Ar,function(){return function(t,i,s){t=t||{};var r=i.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(c,d,u,h){return r.fromToBase(c,d,u,h)}s.en.relativeTime=o,r.fromToBase=function(c,d,u,h,f){for(var m,g,b,w=u.$locale().relativeTime||o,x=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],k=x.length,E=0;E<k;E+=1){var T=x[E];T.d&&(m=h?s(c).diff(u,T.d,!0):u.diff(c,T.d,!0));var P=(t.rounding||Math.round)(Math.abs(m));if(b=m>0,P<=T.r||!T.r){P<=1&&E>0&&(T=x[E-1]);var C=w[T.l];f&&(P=f(""+P)),g=typeof C=="string"?C.replace("%d",P):C(P,d,T.l,b);break}}if(d)return g;var A=b?w.future:w.past;return typeof A=="function"?A(g):A.replace("%s",g)},r.to=function(c,d){return a(c,d,this,!0)},r.from=function(c,d){return a(c,d,this)};var l=function(c){return c.$u?s.utc():s()};r.toNow=function(c){return this.to(l(this),c)},r.fromNow=function(c){return this.from(l(this),c)}}})})(lF);var bme=lF.exports;const vme=mb(bme);/*! Capacitor: https://capacitorjs.com/ - MIT License */const yme=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},i=(r,o)=>{t.platforms.set(r,o)},s=r=>{t.platforms.has(r)&&(t.currentPlatform=t.platforms.get(r))};return t.addPlatform=i,t.setPlatform=s,t},wme=n=>n.CapacitorPlatforms=yme(n),cF=wme(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});cF.addPlatform;cF.setPlatform;var Tp;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Tp||(Tp={}));class Hf extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const xme=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},_me=n=>{var e,t,i,s,r;const o=n.CapacitorCustomPlatform||null,a=n.Capacitor||{},l=a.Plugins=a.Plugins||{},c=n.CapacitorPlatforms,d=()=>o!==null?o.name:xme(n),u=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||d,h=()=>u()!=="web",f=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||h,m=C=>{const A=E.get(C);return!!(A!=null&&A.platforms.has(u())||w(C))},g=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.isPluginAvailable)||m,b=C=>{var A;return(A=a.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===C)},w=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||b,x=C=>n.console.error(C),k=(C,A,R)=>Promise.reject("".concat(R,' does not have an implementation of "').concat(A,'".')),E=new Map,T=(C,A={})=>{const R=E.get(C);if(R)return console.warn('Capacitor plugin "'.concat(C,'" already registered. Cannot register plugins twice.')),R.proxy;const M=u(),N=w(C);let U;const G=async()=>(!U&&M in A?U=typeof A[M]=="function"?U=await A[M]():U=A[M]:o!==null&&!U&&"web"in A&&(U=typeof A.web=="function"?U=await A.web():U=A.web),U),B=(xe,Be)=>{var Pe,Ae;if(N){const de=N==null?void 0:N.methods.find(we=>Be===we.name);if(de)return de.rtype==="promise"?we=>a.nativePromise(C,Be.toString(),we):(we,ze)=>a.nativeCallback(C,Be.toString(),we,ze);if(xe)return(Pe=xe[Be])===null||Pe===void 0?void 0:Pe.bind(xe)}else{if(xe)return(Ae=xe[Be])===null||Ae===void 0?void 0:Ae.bind(xe);throw new Hf('"'.concat(C,'" plugin is not implemented on ').concat(M),Tp.Unimplemented)}},te=xe=>{let Be;const Pe=(...Ae)=>{const de=G().then(we=>{const ze=B(we,xe);if(ze){const le=ze(...Ae);return Be=le==null?void 0:le.remove,le}else throw new Hf('"'.concat(C,".").concat(xe,'()" is not implemented on ').concat(M),Tp.Unimplemented)});return xe==="addListener"&&(de.remove=async()=>Be()),de};return Pe.toString=()=>"".concat(xe.toString(),"() { [capacitor code] }"),Object.defineProperty(Pe,"name",{value:xe,writable:!1,configurable:!1}),Pe},X=te("addListener"),ue=te("removeListener"),he=(xe,Be)=>{const Pe=X({eventName:xe},Be),Ae=async()=>{const we=await Pe;ue({eventName:xe,callbackId:we},Be)},de=new Promise(we=>Pe.then(()=>we({remove:Ae})));return de.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Ae()},de},Ie=new Proxy({},{get(xe,Be){switch(Be){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?he:X;case"removeListener":return ue;default:return te(Be)}}});return l[C]=Ie,E.set(C,{name:C,proxy:Ie,platforms:new Set([...Object.keys(A),...N?[M]:[]])}),Ie},P=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||T;return a.convertFileSrc||(a.convertFileSrc=C=>C),a.getPlatform=u,a.handleError=x,a.isNativePlatform=f,a.isPluginAvailable=g,a.pluginMethodNoop=k,a.registerPlugin=P,a.Exception=Hf,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},kme=n=>n.Capacitor=_me(n),Vy=kme(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Na=Vy.registerPlugin;Vy.Plugins;class yx{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn('Capacitor WebPlugin "'.concat(e.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=e)}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),i&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,t);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const s=this.listeners[e];if(!s){if(i){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new Vy.Exception(e,Tp.Unimplemented)}unavailable(e="not available"){return new Vy.Exception(e,Tp.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const s=i.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const o6=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),a6=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Eme extends yx{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,r]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=a6(s).trim(),r=a6(r).trim(),t[s]=r}),t}async setCookie(e){try{const t=o6(e.key),i=o6(e.value),s="; expires=".concat((e.expires||"").replace("expires=","")),r=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?"domain=".concat(e.url):"";document.cookie="".concat(t,"=").concat(i||"").concat(s,"; path=").concat(r,"; ").concat(o,";")}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie="".concat(e.key,"=; Max-Age=0")}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat(new Date().toUTCString(),";path=/"))}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Na("CapacitorCookies",{web:()=>new Eme});const Tme=async n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const s=i.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>t(s),i.readAsDataURL(n)}),Cme=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,r,o)=>(s[r]=n[e[o]],s),{})},Sme=(n,e=!0)=>n?Object.entries(n).reduce((i,s)=>{const[r,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+="".concat(r,"=").concat(a,"&")}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l="".concat(r,"=").concat(a)),"".concat(i,"&").concat(l)},"").substr(1):null,Ame=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=Cme(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[o,a]of Object.entries(n.data||{}))r.set(o,a);t.body=r.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const r=new FormData;if(n.data instanceof FormData)n.data.forEach((a,l)=>{r.append(l,a)});else for(const a of Object.keys(n.data))r.append(a,n.data[a]);t.body=r;const o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Ime extends yx{async request(e){const t=Ame(e,e.webFetchExtra),i=Sme(e.params,e.shouldEncodeUrlParams),s=i?"".concat(e.url,"?").concat(i):e.url,r=await fetch(s,t),o=r.headers.get("content-type")||"";let{responseType:a="text"}=r.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await r.blob(),l=await Tme(c);break;case"json":l=await r.json();break;case"document":case"text":default:l=await r.text()}const d={};return r.headers.forEach((u,h)=>{d[h]=u}),{data:l,headers:d,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Na("CapacitorHttp",{web:()=>new Ime});const s0=Na("ScreenOrientation",{web:()=>Kn(()=>import("./web-DVE8maAn.js"),[]).then(n=>new n.ScreenOrientationWeb)});function dF(n,e){return function(){return n.apply(e,arguments)}}const{toString:Pme}=Object.prototype,{getPrototypeOf:TA}=Object,wx=(n=>e=>{const t=Pme.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Fa=n=>(n=n.toLowerCase(),e=>wx(e)===n),xx=n=>e=>typeof e===n,{isArray:Zp}=Array,r0=xx("undefined");function Rme(n){return n!==null&&!r0(n)&&n.constructor!==null&&!r0(n.constructor)&&vo(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const uF=Fa("ArrayBuffer");function $me(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&uF(n.buffer),e}const Lme=xx("string"),vo=xx("function"),hF=xx("number"),_x=n=>n!==null&&typeof n=="object",Ome=n=>n===!0||n===!1,Ov=n=>{if(wx(n)!=="object")return!1;const e=TA(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Dme=Fa("Date"),Mme=Fa("File"),Nme=Fa("Blob"),Fme=Fa("FileList"),Bme=n=>_x(n)&&vo(n.pipe),Vme=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||vo(n.append)&&((e=wx(n))==="formdata"||e==="object"&&vo(n.toString)&&n.toString()==="[object FormData]"))},Ume=Fa("URLSearchParams"),[zme,Hme,jme,Gme]=["ReadableStream","Request","Response","Headers"].map(Fa),Wme=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gb(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),Zp(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let a;for(i=0;i<o;i++)a=r[i],e.call(null,n[a],a,n)}}function fF(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const Bu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pF=n=>!r0(n)&&n!==Bu;function TT(){const{caseless:n}=pF(this)&&this||{},e={},t=(i,s)=>{const r=n&&fF(e,s)||s;Ov(e[r])&&Ov(i)?e[r]=TT(e[r],i):Ov(i)?e[r]=TT({},i):Zp(i)?e[r]=i.slice():e[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&gb(arguments[i],t);return e}const qme=(n,e,t,{allOwnKeys:i}={})=>(gb(e,(s,r)=>{t&&vo(s)?n[r]=dF(s,t):n[r]=s},{allOwnKeys:i}),n),Kme=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Yme=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Xme=(n,e,t,i)=>{let s,r,o;const a={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)o=s[r],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&TA(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Qme=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},Zme=n=>{if(!n)return null;if(Zp(n))return n;let e=n.length;if(!hF(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Jme=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&TA(Uint8Array)),ege=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;e.call(n,r[0],r[1])}},tge=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},nge=Fa("HTMLFormElement"),ige=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),l6=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),sge=Fa("RegExp"),mF=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};gb(t,(s,r)=>{let o;(o=e(s,r,n))!==!1&&(i[r]=o||s)}),Object.defineProperties(n,i)},rge=n=>{mF(n,(e,t)=>{if(vo(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(vo(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},oge=(n,e)=>{const t={},i=s=>{s.forEach(r=>{t[r]=!0})};return Zp(n)?i(n):i(String(n).split(e)),t},age=()=>{},lge=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,rk="abcdefghijklmnopqrstuvwxyz",c6="0123456789",gF={DIGIT:c6,ALPHA:rk,ALPHA_DIGIT:rk+rk.toUpperCase()+c6},cge=(n=16,e=gF.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function dge(n){return!!(n&&vo(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const uge=n=>{const e=new Array(10),t=(i,s)=>{if(_x(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const r=Zp(i)?[]:{};return gb(i,(o,a)=>{const l=t(o,s+1);!r0(l)&&(r[a]=l)}),e[s]=void 0,r}}return i};return t(n,0)},hge=Fa("AsyncFunction"),fge=n=>n&&(_x(n)||vo(n))&&vo(n.then)&&vo(n.catch),bF=((n,e)=>n?setImmediate:e?((t,i)=>(Bu.addEventListener("message",({source:s,data:r})=>{s===Bu&&r===t&&i.length&&i.shift()()},!1),s=>{i.push(s),Bu.postMessage(t,"*")}))("axios@".concat(Math.random()),[]):t=>setTimeout(t))(typeof setImmediate=="function",vo(Bu.postMessage)),pge=typeof queueMicrotask<"u"?queueMicrotask.bind(Bu):typeof process<"u"&&process.nextTick||bF,Ze={isArray:Zp,isArrayBuffer:uF,isBuffer:Rme,isFormData:Vme,isArrayBufferView:$me,isString:Lme,isNumber:hF,isBoolean:Ome,isObject:_x,isPlainObject:Ov,isReadableStream:zme,isRequest:Hme,isResponse:jme,isHeaders:Gme,isUndefined:r0,isDate:Dme,isFile:Mme,isBlob:Nme,isRegExp:sge,isFunction:vo,isStream:Bme,isURLSearchParams:Ume,isTypedArray:Jme,isFileList:Fme,forEach:gb,merge:TT,extend:qme,trim:Wme,stripBOM:Kme,inherits:Yme,toFlatObject:Xme,kindOf:wx,kindOfTest:Fa,endsWith:Qme,toArray:Zme,forEachEntry:ege,matchAll:tge,isHTMLForm:nge,hasOwnProperty:l6,hasOwnProp:l6,reduceDescriptors:mF,freezeMethods:rge,toObjectSet:oge,toCamelCase:ige,noop:age,toFiniteNumber:lge,findKey:fF,global:Bu,isContextDefined:pF,ALPHABET:gF,generateString:cge,isSpecCompliantForm:dge,toJSONObject:uge,isAsyncFn:hge,isThenable:fge,setImmediate:bF,asap:pge};function Cn(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Ze.inherits(Cn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ze.toJSONObject(this.config),code:this.code,status:this.status}}});const vF=Cn.prototype,yF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{yF[n]={value:n}});Object.defineProperties(Cn,yF);Object.defineProperty(vF,"isAxiosError",{value:!0});Cn.from=(n,e,t,i,s,r)=>{const o=Object.create(vF);return Ze.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Cn.call(o,n.message,e,t,i,s),o.cause=n,o.name=n.name,r&&Object.assign(o,r),o};const mge=null;function CT(n){return Ze.isPlainObject(n)||Ze.isArray(n)}function wF(n){return Ze.endsWith(n,"[]")?n.slice(0,-2):n}function d6(n,e,t){return n?n.concat(e).map(function(s,r){return s=wF(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function gge(n){return Ze.isArray(n)&&!n.some(CT)}const bge=Ze.toFlatObject(Ze,{},null,function(e){return/^is[A-Z]/.test(e)});function kx(n,e,t){if(!Ze.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Ze.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!Ze.isUndefined(b[g])});const i=t.metaTokens,s=t.visitor||d,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Ze.isSpecCompliantForm(e);if(!Ze.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(Ze.isDate(m))return m.toISOString();if(!l&&Ze.isBlob(m))throw new Cn("Blob is not supported. Use a Buffer instead.");return Ze.isArrayBuffer(m)||Ze.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,g,b){let w=m;if(m&&!b&&typeof m=="object"){if(Ze.endsWith(g,"{}"))g=i?g:g.slice(0,-2),m=JSON.stringify(m);else if(Ze.isArray(m)&&gge(m)||(Ze.isFileList(m)||Ze.endsWith(g,"[]"))&&(w=Ze.toArray(m)))return g=wF(g),w.forEach(function(k,E){!(Ze.isUndefined(k)||k===null)&&e.append(o===!0?d6([g],E,r):o===null?g:g+"[]",c(k))}),!1}return CT(m)?!0:(e.append(d6(b,g,r),c(m)),!1)}const u=[],h=Object.assign(bge,{defaultVisitor:d,convertValue:c,isVisitable:CT});function f(m,g){if(!Ze.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(m),Ze.forEach(m,function(w,x){(!(Ze.isUndefined(w)||w===null)&&s.call(e,w,Ze.isString(x)?x.trim():x,g,h))===!0&&f(w,g?g.concat(x):[x])}),u.pop()}}if(!Ze.isObject(n))throw new TypeError("data must be an object");return f(n),e}function u6(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function CA(n,e){this._pairs=[],n&&kx(n,this,e)}const xF=CA.prototype;xF.append=function(e,t){this._pairs.push([e,t])};xF.toString=function(e){const t=e?function(i){return e.call(this,i,u6)}:u6;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function vge(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _F(n,e,t){if(!e)return n;const i=t&&t.encode||vge;Ze.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let r;if(s?r=s(e,t):r=Ze.isURLSearchParams(e)?e.toString():new CA(e,t).toString(i),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class h6{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ze.forEach(this.handlers,function(i){i!==null&&e(i)})}}const kF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yge=typeof URLSearchParams<"u"?URLSearchParams:CA,wge=typeof FormData<"u"?FormData:null,xge=typeof Blob<"u"?Blob:null,_ge={isBrowser:!0,classes:{URLSearchParams:yge,FormData:wge,Blob:xge},protocols:["http","https","file","blob","url","data"]},SA=typeof window<"u"&&typeof document<"u",ST=typeof navigator=="object"&&navigator||void 0,kge=SA&&(!ST||["ReactNative","NativeScript","NS"].indexOf(ST.product)<0),Ege=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tge=SA&&window.location.href||"http://localhost",Cge=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:SA,hasStandardBrowserEnv:kge,hasStandardBrowserWebWorkerEnv:Ege,navigator:ST,origin:Tge},Symbol.toStringTag,{value:"Module"})),fr={...Cge,..._ge};function Sge(n,e){return kx(n,new fr.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,r){return fr.isNode&&Ze.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function Age(n){return Ze.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ige(n){const e={},t=Object.keys(n);let i;const s=t.length;let r;for(i=0;i<s;i++)r=t[i],e[r]=n[r];return e}function EF(n){function e(t,i,s,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&Ze.isArray(s)?s.length:o,l?(Ze.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!Ze.isObject(s[o]))&&(s[o]=[]),e(t,i,s[o],r)&&Ze.isArray(s[o])&&(s[o]=Ige(s[o])),!a)}if(Ze.isFormData(n)&&Ze.isFunction(n.entries)){const t={};return Ze.forEachEntry(n,(i,s)=>{e(Age(i),s,t,0)}),t}return null}function Pge(n,e,t){if(Ze.isString(n))try{return(e||JSON.parse)(n),Ze.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(n)}const bb={transitional:kF,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=Ze.isObject(e);if(r&&Ze.isHTMLForm(e)&&(e=new FormData(e)),Ze.isFormData(e))return s?JSON.stringify(EF(e)):e;if(Ze.isArrayBuffer(e)||Ze.isBuffer(e)||Ze.isStream(e)||Ze.isFile(e)||Ze.isBlob(e)||Ze.isReadableStream(e))return e;if(Ze.isArrayBufferView(e))return e.buffer;if(Ze.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Sge(e,this.formSerializer).toString();if((a=Ze.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return kx(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),Pge(e)):e}],transformResponse:[function(e){const t=this.transitional||bb.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Ze.isResponse(e)||Ze.isReadableStream(e))return e;if(e&&Ze.isString(e)&&(i&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Cn.from(a,Cn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ze.forEach(["delete","get","head","post","put","patch"],n=>{bb.headers[n]={}});const Rge=Ze.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$ge=n=>{const e={};let t,i,s;return n&&n.split("\n").forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!t||e[t]&&Rge[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},f6=Symbol("internals");function Nm(n){return n&&String(n).trim().toLowerCase()}function Dv(n){return n===!1||n==null?n:Ze.isArray(n)?n.map(Dv):String(n)}function Lge(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Oge=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ok(n,e,t,i,s){if(Ze.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!Ze.isString(e)){if(Ze.isString(i))return e.indexOf(i)!==-1;if(Ze.isRegExp(i))return i.test(e)}}function Dge(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Mge(n,e){const t=Ze.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,r,o){return this[i].call(this,e,s,r,o)},configurable:!0})})}class Yr{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(a,l,c){const d=Nm(l);if(!d)throw new Error("header name must be a non-empty string");const u=Ze.findKey(s,d);(!u||s[u]===void 0||c===!0||c===void 0&&s[u]!==!1)&&(s[u||l]=Dv(a))}const o=(a,l)=>Ze.forEach(a,(c,d)=>r(c,d,l));if(Ze.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ze.isString(e)&&(e=e.trim())&&!Oge(e))o($ge(e),t);else if(Ze.isHeaders(e))for(const[a,l]of e.entries())r(l,a,i);else e!=null&&r(t,e,i);return this}get(e,t){if(e=Nm(e),e){const i=Ze.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return Lge(s);if(Ze.isFunction(t))return t.call(this,s,i);if(Ze.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Nm(e),e){const i=Ze.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||ok(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(o){if(o=Nm(o),o){const a=Ze.findKey(i,o);a&&(!t||ok(i,i[a],a,t))&&(delete i[a],s=!0)}}return Ze.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||ok(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return Ze.forEach(this,(s,r)=>{const o=Ze.findKey(i,r);if(o){t[o]=Dv(s),delete t[r];return}const a=e?Dge(r):String(r).trim();a!==r&&delete t[r],t[a]=Dv(s),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ze.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&Ze.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[f6]=this[f6]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Nm(o);i[a]||(Mge(s,o),i[a]=!0)}return Ze.isArray(e)?e.forEach(r):r(e),this}}Yr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ze.reduceDescriptors(Yr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Ze.freezeMethods(Yr);function ak(n,e){const t=this||bb,i=e||t,s=Yr.from(i.headers);let r=i.data;return Ze.forEach(n,function(a){r=a.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function TF(n){return!!(n&&n.__CANCEL__)}function Jp(n,e,t){Cn.call(this,n==null?"canceled":n,Cn.ERR_CANCELED,e,t),this.name="CanceledError"}Ze.inherits(Jp,Cn,{__CANCEL__:!0});function CF(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Cn("Request failed with status code "+t.status,[Cn.ERR_BAD_REQUEST,Cn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Nge(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Fge(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=i[r];o||(o=c),t[s]=l,i[s]=c;let u=r,h=0;for(;u!==s;)h+=t[u++],u=u%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),c-o<e)return;const f=d&&c-d;return f?Math.round(h*1e3/f):void 0}}function Bge(n,e){let t=0,i=1e3/e,s,r;const o=(c,d=Date.now())=>{t=d,s=null,r&&(clearTimeout(r),r=null),n.apply(null,c)};return[(...c)=>{const d=Date.now(),u=d-t;u>=i?o(c,d):(s=c,r||(r=setTimeout(()=>{r=null,o(s)},i-u)))},()=>s&&o(s)]}const Uy=(n,e,t=3)=>{let i=0;const s=Fge(50,250);return Bge(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-i,c=s(l),d=o<=a;i=o;const u={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(u)},t)},p6=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},m6=n=>(...e)=>Ze.asap(()=>n(...e)),Vge=fr.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,fr.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,Uge=fr.hasStandardBrowserEnv?{write(n,e,t,i,s,r){const o=[n+"="+encodeURIComponent(e)];Ze.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Ze.isString(i)&&o.push("path="+i),Ze.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zge(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Hge(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function SF(n,e){return n&&!zge(e)?Hge(n,e):e}const g6=n=>n instanceof Yr?{...n}:n;function hh(n,e){e=e||{};const t={};function i(c,d,u,h){return Ze.isPlainObject(c)&&Ze.isPlainObject(d)?Ze.merge.call({caseless:h},c,d):Ze.isPlainObject(d)?Ze.merge({},d):Ze.isArray(d)?d.slice():d}function s(c,d,u,h){if(Ze.isUndefined(d)){if(!Ze.isUndefined(c))return i(void 0,c,u,h)}else return i(c,d,u,h)}function r(c,d){if(!Ze.isUndefined(d))return i(void 0,d)}function o(c,d){if(Ze.isUndefined(d)){if(!Ze.isUndefined(c))return i(void 0,c)}else return i(void 0,d)}function a(c,d,u){if(u in e)return i(c,d);if(u in n)return i(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,u)=>s(g6(c),g6(d),u,!0)};return Ze.forEach(Object.keys(Object.assign({},n,e)),function(d){const u=l[d]||s,h=u(n[d],e[d],d);Ze.isUndefined(h)&&u!==a||(t[d]=h)}),t}const AF=n=>{const e=hh({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=Yr.from(o),e.url=_F(SF(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Ze.isFormData(t)){if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(u=>u.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(fr.hasStandardBrowserEnv&&(i&&Ze.isFunction(i)&&(i=i(e)),i||i!==!1&&Vge(e.url))){const c=s&&r&&Uge.read(r);c&&o.set(s,c)}return e},jge=typeof XMLHttpRequest<"u",Gge=jge&&function(n){return new Promise(function(t,i){const s=AF(n);let r=s.data;const o=Yr.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,d,u,h,f,m;function g(){f&&f(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function w(){if(!b)return;const k=Yr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:k,config:n,request:b};CF(function(C){t(C),g()},function(C){i(C),g()},T),b=null}"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(i(new Cn("Request aborted",Cn.ECONNABORTED,n,b)),b=null)},b.onerror=function(){i(new Cn("Network Error",Cn.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||kF;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),i(new Cn(E,T.clarifyTimeoutError?Cn.ETIMEDOUT:Cn.ECONNABORTED,n,b)),b=null},r===void 0&&o.setContentType(null),"setRequestHeader"in b&&Ze.forEach(o.toJSON(),function(E,T){b.setRequestHeader(T,E)}),Ze.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),a&&a!=="json"&&(b.responseType=s.responseType),c&&([h,m]=Uy(c,!0),b.addEventListener("progress",h)),l&&b.upload&&([u,f]=Uy(l),b.upload.addEventListener("progress",u),b.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(d=k=>{b&&(i(!k||k.type?new Jp(null,n,b):k),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=Nge(s.url);if(x&&fr.protocols.indexOf(x)===-1){i(new Cn("Unsupported protocol "+x+":",Cn.ERR_BAD_REQUEST,n));return}b.send(r||null)})},Wge=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const r=function(c){if(!s){s=!0,a();const d=c instanceof Error?c:this.reason;i.abort(d instanceof Cn?d:new Jp(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,r(new Cn("timeout ".concat(e," of ms exceeded"),Cn.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:l}=i;return l.unsubscribe=()=>Ze.asap(a),l}},qge=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},Kge=async function*(n,e){for await(const t of Yge(n))yield*qge(t,e)},Yge=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},b6=(n,e,t,i)=>{const s=Kge(n,e);let r=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await s.next();if(c){a(),l.close();return}let u=d.byteLength;if(t){let h=r+=u;t(h)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Ex=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",IF=Ex&&typeof ReadableStream=="function",Xge=Ex&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),PF=(n,...e)=>{try{return!!n(...e)}catch(t){return!1}},Qge=IF&&PF(()=>{let n=!1;const e=new Request(fr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),v6=64*1024,AT=IF&&PF(()=>Ze.isReadableStream(new Response("").body)),zy={stream:AT&&(n=>n.body)};Ex&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zy[e]&&(zy[e]=Ze.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Cn("Response type '".concat(e,"' is not supported"),Cn.ERR_NOT_SUPPORT,i)})})})(new Response);const Zge=async n=>{if(n==null)return 0;if(Ze.isBlob(n))return n.size;if(Ze.isSpecCompliantForm(n))return(await new Request(fr.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Ze.isArrayBufferView(n)||Ze.isArrayBuffer(n))return n.byteLength;if(Ze.isURLSearchParams(n)&&(n=n+""),Ze.isString(n))return(await Xge(n)).byteLength},Jge=async(n,e)=>{const t=Ze.toFiniteNumber(n.getContentLength());return t==null?Zge(e):t},e0e=Ex&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=AF(n);c=c?(c+"").toLowerCase():"text";let f=Wge([s,r&&r.toAbortSignal()],o),m;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let b;try{if(l&&Qge&&t!=="get"&&t!=="head"&&(b=await Jge(d,i))!==0){let T=new Request(e,{method:"POST",body:i,duplex:"half"}),P;if(Ze.isFormData(i)&&(P=T.headers.get("content-type"))&&d.setContentType(P),T.body){const[C,A]=p6(b,Uy(m6(l)));i=b6(T.body,v6,C,A)}}Ze.isString(u)||(u=u?"include":"omit");const w="credentials"in Request.prototype;m=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:w?u:void 0});let x=await fetch(m);const k=AT&&(c==="stream"||c==="response");if(AT&&(a||k&&g)){const T={};["status","statusText","headers"].forEach(R=>{T[R]=x[R]});const P=Ze.toFiniteNumber(x.headers.get("content-length")),[C,A]=a&&p6(P,Uy(m6(a),!0))||[];x=new Response(b6(x.body,v6,C,()=>{A&&A(),g&&g()}),T)}c=c||"text";let E=await zy[Ze.findKey(zy,c)||"text"](x,n);return!k&&g&&g(),await new Promise((T,P)=>{CF(T,P,{data:E,headers:Yr.from(x.headers),status:x.status,statusText:x.statusText,config:n,request:m})})}catch(w){throw g&&g(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new Cn("Network Error",Cn.ERR_NETWORK,n,m),{cause:w.cause||w}):Cn.from(w,w&&w.code,n,m)}}),IT={http:mge,xhr:Gge,fetch:e0e};Ze.forEach(IT,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch(t){}Object.defineProperty(n,"adapterName",{value:e})}});const y6=n=>"- ".concat(n),t0e=n=>Ze.isFunction(n)||n===null||n===!1,RF={getAdapter:n=>{n=Ze.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let r=0;r<e;r++){t=n[r];let o;if(i=t,!t0e(t)&&(i=IT[(o=String(t)).toLowerCase()],i===void 0))throw new Cn("Unknown adapter '".concat(o,"'"));if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>"adapter ".concat(a," ")+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?"since :\n"+r.map(y6).join("\n"):" "+y6(r[0]):"as no adapter specified";throw new Cn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:IT};function lk(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Jp(null,n)}function w6(n){return lk(n),n.headers=Yr.from(n.headers),n.data=ak.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),RF.getAdapter(n.adapter||bb.adapter)(n).then(function(i){return lk(n),i.data=ak.call(n,n.transformResponse,i),i.headers=Yr.from(i.headers),i},function(i){return TF(i)||(lk(n),i&&i.response&&(i.response.data=ak.call(n,n.transformResponse,i.response),i.response.headers=Yr.from(i.response.headers))),Promise.reject(i)})}const $F="1.7.9",Tx={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Tx[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const x6={};Tx.transitional=function(e,t,i){function s(r,o){return"[Axios v"+$F+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(e===!1)throw new Cn(s(o," has been removed"+(t?" in "+t:"")),Cn.ERR_DEPRECATED);return t&&!x6[o]&&(x6[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};Tx.spelling=function(e){return(t,i)=>(console.warn("".concat(i," is likely a misspelling of ").concat(e)),!0)};function n0e(n,e,t){if(typeof n!="object")throw new Cn("options must be an object",Cn.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],o=e[r];if(o){const a=n[r],l=a===void 0||o(a,r,n);if(l!==!0)throw new Cn("option "+r+" must be "+l,Cn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Cn("Unknown option "+r,Cn.ERR_BAD_OPTION)}}const Mv={assertOptions:n0e,validators:Tx},el=Mv.validators;class th{constructor(e){this.defaults=e,this.interceptors={request:new h6,response:new h6}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+r):i.stack=r}catch(o){}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=hh(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&Mv.assertOptions(i,{silentJSONParsing:el.transitional(el.boolean),forcedJSONParsing:el.transitional(el.boolean),clarifyTimeoutError:el.transitional(el.boolean)},!1),s!=null&&(Ze.isFunction(s)?t.paramsSerializer={serialize:s}:Mv.assertOptions(s,{encode:el.function,serialize:el.function},!0)),Mv.assertOptions(t,{baseUrl:el.spelling("baseURL"),withXsrfToken:el.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&Ze.merge(r.common,r[t.method]);r&&Ze.forEach(["delete","get","head","post","put","patch","common"],m=>{delete r[m]}),t.headers=Yr.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,u=0,h;if(!l){const m=[w6.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),h=m.length,d=Promise.resolve(t);u<h;)d=d.then(m[u++],m[u++]);return d}h=a.length;let f=t;for(u=0;u<h;){const m=a[u++],g=a[u++];try{f=m(f)}catch(b){g.call(this,b);break}}try{d=w6.call(this,f)}catch(m){return Promise.reject(m)}for(u=0,h=c.length;u<h;)d=d.then(c[u++],c[u++]);return d}getUri(e){e=hh(this.defaults,e);const t=SF(e.baseURL,e.url);return _F(t,e.params,e.paramsSerializer)}}Ze.forEach(["delete","get","head","options"],function(e){th.prototype[e]=function(t,i){return this.request(hh(i||{},{method:e,url:t,data:(i||{}).data}))}});Ze.forEach(["post","put","patch"],function(e){function t(i){return function(r,o,a){return this.request(hh(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}th.prototype[e]=t(),th.prototype[e+"Form"]=t(!0)});class AA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},e(function(r,o,a){i.reason||(i.reason=new Jp(r,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new AA(function(s){e=s}),cancel:e}}}function i0e(n){return function(t){return n.apply(null,t)}}function s0e(n){return Ze.isObject(n)&&n.isAxiosError===!0}const PT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(PT).forEach(([n,e])=>{PT[e]=n});function LF(n){const e=new th(n),t=dF(th.prototype.request,e);return Ze.extend(t,th.prototype,e,{allOwnKeys:!0}),Ze.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return LF(hh(n,s))},t}const li=LF(bb);li.Axios=th;li.CanceledError=Jp;li.CancelToken=AA;li.isCancel=TF;li.VERSION=$F;li.toFormData=kx;li.AxiosError=Cn;li.Cancel=li.CanceledError;li.all=function(e){return Promise.all(e)};li.spread=i0e;li.isAxiosError=s0e;li.mergeConfig=hh;li.AxiosHeaders=Yr;li.formToJSON=n=>EF(Ze.isHTMLForm(n)?new FormData(n):n);li.getAdapter=RF.getAdapter;li.HttpStatusCode=PT;li.default=li;const r0e=Fe({__name:"App",setup(n){const{DEV:e,VITE_API_URL_DEV:t,VITE_API_URL:i}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1};return li.defaults.baseURL=e?t:i,li.interceptors.response.use(async s=>s,async s=>(s.status===401&&console.log(s),s)),on(async()=>{await s0.lock({orientation:"portrait"})}),(s,r)=>(I(),ve(y(tF),null,{default:j(()=>[L(y(QN))]),_:1}))}}),o0e=()=>{const n=[],e={},t=g=>{switch(g.routerAction){case"pop":s(g);break;default:r(g);break}g.routerDirection==="root"&&(o(),r(g))},i=g=>{const b=n.findIndex(x=>x.id===g.id);b>-1&&n.splice(b,1,g);const w=e[g.tab||""];if(w){const x=w.findIndex(k=>k.id===g.id);x>-1?w.splice(x,1,g):w.push(g)}else g.tab&&(e[g.tab]=[g])},s=g=>{const b=a(g.tab);let w;if(b){for(w=b[b.length-1];w&&w.id!==g.id;)b.pop(),w=b[b.length-1];b.pop(),b.push(g)}for(w=n[n.length-1];w&&w.id!==g.id;)n.pop(),w=n[n.length-1];n.pop(),n.push(g)},r=g=>{const b=a(g.tab);b&&(b[b.length-1]&&b[b.length-1].id===g.id&&b.pop(),b.push(g)),n.push(g)},o=g=>{if(g){const{position:b,tab:w}=g,x=n.findIndex(T=>T.position===b);if(x===-1)return;n.splice(x);const k=T=>{const P=e[T].findIndex(C=>C.position===b);P!==-1&&e[T].splice(P)},E=e[w];if(w&&E)k(w);else for(const T in e)k(T)}else{for(const b in e)e[b]=[];n.length=0}},a=g=>{let b;return g&&(b=e[g],b||(b=e[g]=[])),b},l=()=>n.length,c=(g,b)=>{const w=b-g;return n[w]||d()},d=()=>n[n.length-1];return{current:c,size:l,last:d,add:t,canGoBack:(g=1,b,w)=>w-g>=b,update:i,getFirstRouteInfoForTab:g=>{const b=a(g);if(b)return b[0]},getCurrentRouteInfoForTab:g=>{const b=a(g);if(b)return b[b.length-1]},findLastLocation:(g,b=-1)=>{const w=a(g.tab);if(w){if(b<-1)return w[w.length-1+b];for(let x=w.length-2;x>=0;x--){const k=w[x];if(k&&k.pathname===g.pushedByRoute)return k}}for(let x=n.length-2;x>=0;x--){const k=n[x];if(k&&k.pathname===g.pushedByRoute)return n[x+1+b]}},clearHistory:o}},_6={main:0},OF=(n="main")=>{var e;const t=((e=_6[n])!==null&&e!==void 0?e:0)+1;return _6[n]=t,t.toString()},a0e=(n,e)=>{let t={direction:void 0,action:void 0,delta:void 0};e.afterEach((C,A,R)=>{if(R)return;const{direction:M,action:N,delta:U}=t;r=n.history.state.position;const G=n.history.state.replaced?"replace":void 0;u(C,N||G,M,U),t={direction:void 0,action:void 0,delta:void 0}});const i=o0e();let s=n.history.state.position,r=n.history.state.position,o,a;const l=[];typeof document<"u"&&document.addEventListener("ionBackButton",C=>{C.detail.register(0,A=>{n.history.go(-1),A()})}),n.history.listen((C,A,R)=>{t={delta:R.delta,action:R.type==="pop"&&R.delta>=1?"push":R.type,direction:R.direction===""?"forward":R.direction}});const c=(C,A)=>{const R=i.current(s,r);if(R&&R.pushedByRoute){const M=i.findLastLocation(R);M?(a=Object.assign(Object.assign({},M),{routerAction:"pop",routerDirection:"back",routerAnimation:A||R.routerAnimation}),R.lastPathname===R.pushedByRoute||M.pathname===R.pushedByRoute&&!R.tab&&!M.tab?e.back():e.go(M.position-R.position)):d(C,"pop","back",A)}else d(C,"pop","back",A)},d=(C,A,R,M,N)=>{k(A,R,M,N),A==="push"?e.push(C):e.replace(C)},u=(C,A,R,M)=>{let N;if(a)if(a.routerAction==="replace")N=i.current(s,r);else if(a.routerAction==="pop")N=i.current(s,r+1),A==="replace"&&i.clearHistory();else{const G=a.routerDirection==="root"?r:r-1;N=i.current(s,G)}else N=o;if(N||(N={pathname:"",search:""}),N.pathname+N.search!==C.fullPath){if(!a){if(A==="replace")a={routerAction:"replace",routerDirection:"none"};else if(A==="pop"){const ue=i.current(s,r-M);if(ue&&ue.pushedByRoute){const he=i.findLastLocation(ue,M);a=Object.assign(Object.assign({},he),{routerAction:"pop",routerDirection:"back"})}else a={routerAction:"pop",routerDirection:"none"}}a||(a={routerAction:"push",routerDirection:R||"forward"})}let G;if(a!=null&&a.id)G=Object.assign(Object.assign({},a),{lastPathname:N.pathname});else{const ue=a.routerAction==="push"&&a.routerDirection==="forward";if(G=Object.assign(Object.assign({id:OF("routeInfo")},a),{lastPathname:N.pathname,pathname:C.path,search:C.fullPath&&C.fullPath.split("?")[1]||"",params:C.params&&C.params,prevRouteLastPathname:N.lastPathname}),ue)G.pushedByRoute=N.pathname!==""?N.pathname:void 0;else if(G.routerAction==="pop"){const he=i.findLastLocation(G);G.pushedByRoute=he==null?void 0:he.pushedByRoute}else if(G.routerAction==="push"&&G.tab!==N.tab){const he=i.getCurrentRouteInfoForTab(G.tab);G.pushedByRoute=he==null?void 0:he.pushedByRoute}else if(G.routerAction==="replace"){const he=i.current(s,r),Ie=he==null?void 0:he.pushedByRoute,xe=Ie!==void 0&&Ie!==G.pathname?Ie:G.pushedByRoute;G.lastPathname=(he==null?void 0:he.pathname)||G.lastPathname,G.pushedByRoute=xe,G.routerDirection=(he==null?void 0:he.routerDirection)||G.routerDirection,G.routerAnimation=(he==null?void 0:he.routerAnimation)||G.routerAnimation,G.prevRouteLastPathname=he==null?void 0:he.lastPathname}}G.position=r,G.delta=M;const B=i.size(),te=r-s,X=B===te&&B>0&&A==="replace";B>te||X?(G.routerAction==="push"||G.routerAction==="replace")&&M===void 0&&(i.clearHistory(G),i.add(G)):i.add(G),i.size()===1&&(s=G.position),o=G}a=void 0,l.forEach(G=>G(o))},h=()=>o,f=(C=1)=>i.canGoBack(C,s,r),m=C=>{const{routerAnimation:A,routerDirection:R,routerLink:M}=C;k("push",R,A),e.push(M)},g=C=>{const A=i.getFirstRouteInfoForTab(C);A&&e.go(A.position-r)},b=(C,A)=>{if(!A)return;const R=i.getCurrentRouteInfoForTab(C),[M]=A.split("?");R?(a=Object.assign(Object.assign({},a),{routerAction:"push",routerDirection:"none",tab:C}),R.pathname===M?e.push({path:R.pathname,query:vT(R.search)}):e.push({path:M,query:vT(R.search)})):d(M,"push","none",void 0,C)},w=C=>{const A=Object.assign({},i.current(s,r));A.tab!==C&&(A.tab=C,i.update(A));const R=i.findLastLocation(A);A.pushedByRoute!==A.lastPathname&&(R==null?void 0:R.tab)!==C&&(A.pushedByRoute=void 0,i.update(A))},x=C=>{l.push(C)},k=(C="push",A="forward",R,M)=>{a={routerAction:C,routerDirection:A,routerAnimation:R,tab:M}};return{handleNavigate:d,getLeavingRouteInfo:()=>i.current(s,r),handleNavigateBack:c,handleSetCurrentTab:w,getCurrentRouteInfo:h,canGoBack:f,navigate:m,resetTab:g,changeTab:b,registerHistoryChangeListener:x,goBack:C=>{k("pop","back",C),e.back()},goForward:C=>{k("push","forward",C),e.forward()}}},l0e=n=>{const e={},t=()=>Object.keys(e).length,i=w=>{delete e[w]},s=w=>e[w],r=(w,x)=>{w.ionPageElement=x,w.ionRoute=!0,w.matchedRoute.instances={default:w.vueComponentRef.value}},o=(w,x)=>d(w.pathname,x,!1),a=(w,x,k=!0)=>d(w.lastPathname,x,k),l=(w,x)=>d(w,x,!1),c=(w,x)=>x.find(k=>{if(k.pathname===w)return k}),d=(w,x,k=!1)=>{const E=T=>{if(k&&!T.ionRoute||w==="")return!1;const C=n.resolve(w).matched.find(A=>A===T.matchedRoute);if(C)return C.path.includes(":")&&w!==T.pathname?!1:T};if(x){const T=e[x];if(!T)return;const P=n?T.find(E):c(w,T);if(P)return P}else for(const T in e){const P=e[T],C=c(w,P);if(C)return C}};return{unmountLeavingViews:(w,x,k=1)=>{const E=e[w];if(!E)return;const T=E.findIndex(P=>P===x);for(let P=T+1;P<T-k;P++){const C=E[P];C.mount=!1,C.ionPageElement=void 0,C.ionRoute=!1,C.matchedRoute.instances={}}},mountIntermediaryViews:(w,x,k=1)=>{const E=e[w];if(!E)return;const T=E.findIndex(P=>P===x);for(let P=T+1;P<T+k;P++)E[P].mount=!0},clear:i,findViewItemByRouteInfo:o,findLeavingViewItemByRouteInfo:a,findViewItemByPathname:l,createViewItem:(w,x,k,E,T)=>({id:OF("viewItem"),pathname:E.pathname,outletId:w,matchedRoute:k,ionPageElement:T,vueComponent:x,vueComponentRef:jp(),ionRoute:!1,mount:!1,exact:E.pathname===k.path,params:E.params,vueComponentData:{}}),getChildrenToRender:w=>e[w]?e[w].filter(E=>E.mount):[],add:w=>{const{outletId:x}=w;e[x]?e[x].push(w):e[x]=[w]},remove:(w,x)=>{if(!x)throw Error("outletId required");const k=e[x];k&&(e[x]=k.filter(E=>E.id!==w.id))},registerIonPage:r,getViewStack:s,size:t}},c0e=n=>{const e=Object.assign({},n);delete e.tabsPrefix;const t=Rfe(e),i=a0e(n,t),s=l0e(t),r=t.install.bind(t);t.install=a=>{a.provide("navManager",i),a.provide("viewStacks",s),r(a)};const o=t.isReady.bind(t);return t.isReady=()=>o(),t},d0e=n=>lfe(n),Ol="/logo.png";/*!
 * pinia v2.3.0
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let DF;const Cx=n=>DF=n,MF=Symbol();function RT(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var vg;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(vg||(vg={}));function u0e(){const n=N9(!0),e=n.run(()=>K({}));let t=[],i=[];const s=Qw({install(r){Cx(s),s._a=r,r.provide(MF,s),r.config.globalProperties.$pinia=s,i.forEach(o=>t.push(o)),i=[]},use(r){return this._a?t.push(r):i.push(r),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return s}const NF=()=>{};function k6(n,e,t,i=NF){n.push(e);const s=()=>{const r=n.indexOf(e);r>-1&&(n.splice(r,1),i())};return!t&&F9()&&B9(s),s}function nf(n,...e){n.slice().forEach(t=>{t(...e)})}const h0e=n=>n(),E6=Symbol(),ck=Symbol();function $T(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,i)=>n.set(i,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],s=n[t];RT(s)&&RT(i)&&n.hasOwnProperty(t)&&!Pi(i)&&!bc(i)?n[t]=$T(s,i):n[t]=i}return n}const f0e=Symbol();function p0e(n){return!RT(n)||!n.hasOwnProperty(f0e)}const{assign:rd}=Object;function m0e(n){return!!(Pi(n)&&n.effect)}function g0e(n,e,t,i){const{state:s,actions:r,getters:o}=e,a=t.state.value[n];let l;function c(){a||(t.state.value[n]=s?s():{});const d=i7(t.state.value[n]);return rd(d,r,Object.keys(o||{}).reduce((u,h)=>(u[h]=Qw(lt(()=>{Cx(t);const f=t._s.get(n);return o[h].call(f,f)})),u),{}))}return l=FF(n,c,e,t,i,!0),l}function FF(n,e,t={},i,s,r){let o;const a=rd({actions:{}},t),l={deep:!0};let c,d,u=[],h=[],f;const m=i.state.value[n];!r&&!m&&(i.state.value[n]={}),K({});let g;function b(A){let R;c=d=!1,typeof A=="function"?(A(i.state.value[n]),R={type:vg.patchFunction,storeId:n,events:f}):($T(i.state.value[n],A),R={type:vg.patchObject,payload:A,storeId:n,events:f});const M=g=Symbol();vc().then(()=>{g===M&&(c=!0)}),d=!0,nf(u,R,i.state.value[n])}const w=r?function(){const{state:R}=t,M=R?R():{};this.$patch(N=>{rd(N,M)})}:NF;function x(){o.stop(),u=[],h=[],i._s.delete(n)}const k=(A,R="")=>{if(E6 in A)return A[ck]=R,A;const M=function(){Cx(i);const N=Array.from(arguments),U=[],G=[];function B(ue){U.push(ue)}function te(ue){G.push(ue)}nf(h,{args:N,name:M[ck],store:T,after:B,onError:te});let X;try{X=A.apply(this&&this.$id===n?this:T,N)}catch(ue){throw nf(G,ue),ue}return X instanceof Promise?X.then(ue=>(nf(U,ue),ue)).catch(ue=>(nf(G,ue),Promise.reject(ue))):(nf(U,X),X)};return M[E6]=!0,M[ck]=R,M},E={_p:i,$id:n,$onAction:k6.bind(null,h),$patch:b,$reset:w,$subscribe(A,R={}){const M=k6(u,A,R.detached,()=>N()),N=o.run(()=>ki(()=>i.state.value[n],U=>{(R.flush==="sync"?d:c)&&A({storeId:n,type:vg.direct,events:f},U)},rd({},l,R)));return M},$dispose:x},T=Yi(E);i._s.set(n,T);const C=(i._a&&i._a.runWithContext||h0e)(()=>i._e.run(()=>(o=N9()).run(()=>e({action:k}))));for(const A in C){const R=C[A];if(Pi(R)&&!m0e(R)||bc(R))r||(m&&p0e(R)&&(Pi(R)?R.value=m[A]:$T(R,m[A])),i.state.value[n][A]=R);else if(typeof R=="function"){const M=k(R,A);C[A]=M,a.actions[A]=R}}return rd(T,C),rd(Xn(T),C),Object.defineProperty(T,"$state",{get:()=>i.state.value[n],set:A=>{b(R=>{rd(R,A)})}}),i._p.forEach(A=>{rd(T,o.run(()=>A({store:T,app:i._a,pinia:i,options:a})))}),m&&r&&t.hydrate&&t.hydrate(T.$state,m),c=!0,d=!0,T}/*! #__NO_SIDE_EFFECTS__ */function Yd(n,e,t){let i,s;const r=typeof e=="function";typeof n=="string"?(i=n,s=r?t:e):(s=n,i=n.id);function o(a,l){const c=A7();return a=a||(c?qi(MF,null):null),a&&Cx(a),a=DF,a._s.has(i)||(r?FF(i,e,s,a):g0e(i,s,a)),a._s.get(i)}return o.$id=i,o}function et(n){{const e=Xn(n),t={};for(const i in e){const s=e[i];s.effect?t[i]=lt({get:()=>n[i],set(r){n[i]=r}}):(Pi(s)||bc(s))&&(t[i]=NJ(n,i))}return t}}const b0e=Na("App",{web:()=>Kn(()=>import("./web-CMNoA3ui.js"),[]).then(n=>new n.AppWeb)});var Hy={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Hy.exports;(function(n,e){(function(){var t,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",u=1,h=2,f=4,m=1,g=2,b=1,w=2,x=4,k=8,E=16,T=32,P=64,C=128,A=256,R=512,M=30,N="...",U=800,G=16,B=1,te=2,X=3,ue=1/0,he=9007199254740991,Ie=17976931348623157e292,xe=NaN,Be=4294967295,Pe=Be-1,Ae=Be>>>1,de=[["ary",C],["bind",b],["bindKey",w],["curry",k],["curryRight",E],["flip",R],["partial",T],["partialRight",P],["rearg",A]],we="[object Arguments]",ze="[object Array]",le="[object AsyncFunction]",Se="[object Boolean]",ne="[object Date]",ie="[object DOMException]",me="[object Error]",V="[object Function]",F="[object GeneratorFunction]",z="[object Map]",se="[object Number]",Te="[object Null]",ke="[object Object]",Ce="[object Promise]",ge="[object Proxy]",He="[object RegExp]",Ge="[object Set]",mt="[object String]",ut="[object Symbol]",xt="[object Undefined]",kt="[object WeakMap]",It="[object WeakSet]",Je="[object ArrayBuffer]",rt="[object DataView]",Ct="[object Float32Array]",Pt="[object Float64Array]",Xt="[object Int8Array]",mn="[object Int16Array]",In="[object Int32Array]",ci="[object Uint8Array]",ri="[object Uint8ClampedArray]",wn="[object Uint16Array]",Mn="[object Uint32Array]",Oi=/\b__p \+= '';/g,$r=/\b(__p \+=) '' \+/g,us=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lr=/&(?:amp|lt|gt|quot|#39);/g,to=/[&<>"']/g,no=RegExp(Lr.source),ja=RegExp(to.source),Ga=/<%-([\s\S]+?)%>/g,Wa=/<%([\s\S]+?)%>/g,sa=/<%=([\s\S]+?)%>/g,nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qa=/^\w*$/,To=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ts=/[\\^$.*+?()[\]{}|]/g,Co=RegExp(Ts.source),Jt=/^\s+/,ir=/\s/,Or=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tu=/\{\n\/\* \[wrapped with (.+)\] \*/,Nl=/,? & /,nu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,iu=/[()=,{}\[\]\/\s]/,su=/\\(\\)?/g,ru=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ka=/\w*$/,ou=/^[-+]0x[0-9a-f]+$/i,Fl=/^0b[01]+$/i,Mh=/^\[object .+?Constructor\]$/,Nh=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,Ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vt=/($^)/,Ft=/['\n\r\u2028\u2029\\]/g,En="\\ud800-\\udfff",hs="\\u0300-\\u036f",Qi="\\ufe20-\\ufe2f",au="\\u20d0-\\u20ff",lu=hs+Qi+au,Fh="\\u2700-\\u27bf",Mb="a-z\\xdf-\\xf6\\xf8-\\xff",p_="\\xac\\xb1\\xd7\\xf7",mm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",m_="\\u2000-\\u206f",g_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Z="A-Z\\xc0-\\xd6\\xd8-\\xde",ye="\\ufe0e\\ufe0f",oe=p_+mm+m_+g_,Oe="['’]",Ne="["+En+"]",Re="["+oe+"]",it="["+lu+"]",pt="\\d+",yt="["+Fh+"]",wt="["+Mb+"]",Et="[^"+En+oe+pt+Fh+Mb+Z+"]",Vt="\\ud83c[\\udffb-\\udfff]",$n="(?:"+it+"|"+Vt+")",ti="[^"+En+"]",ni="(?:\\ud83c[\\udde6-\\uddff]){2}",Zi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ci="["+Z+"]",mr="\\u200d",Hc="(?:"+wt+"|"+Et+")",gm="(?:"+Ci+"|"+Et+")",Nb="(?:"+Oe+"(?:d|ll|m|re|s|t|ve))?",Bh="(?:"+Oe+"(?:D|LL|M|RE|S|T|VE))?",b_=$n+"?",Fb="["+ye+"]?",v_="(?:"+mr+"(?:"+[ti,ni,Zi].join("|")+")"+Fb+b_+")*",Bb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",iW="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",L5=Fb+b_+v_,sW="(?:"+[yt,ni,Zi].join("|")+")"+L5,rW="(?:"+[ti+it+"?",it,ni,Zi,Ne].join("|")+")",oW=RegExp(Oe,"g"),aW=RegExp(it,"g"),y_=RegExp(Vt+"(?="+Vt+")|"+rW+L5,"g"),lW=RegExp([Ci+"?"+wt+"+"+Nb+"(?="+[Re,Ci,"$"].join("|")+")",gm+"+"+Bh+"(?="+[Re,Ci+Hc,"$"].join("|")+")",Ci+"?"+Hc+"+"+Nb,Ci+"+"+Bh,iW,Bb,pt,sW].join("|"),"g"),cW=RegExp("["+mr+En+lu+ye+"]"),dW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uW=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hW=-1,ji={};ji[Ct]=ji[Pt]=ji[Xt]=ji[mn]=ji[In]=ji[ci]=ji[ri]=ji[wn]=ji[Mn]=!0,ji[we]=ji[ze]=ji[Je]=ji[Se]=ji[rt]=ji[ne]=ji[me]=ji[V]=ji[z]=ji[se]=ji[ke]=ji[He]=ji[Ge]=ji[mt]=ji[kt]=!1;var Fi={};Fi[we]=Fi[ze]=Fi[Je]=Fi[rt]=Fi[Se]=Fi[ne]=Fi[Ct]=Fi[Pt]=Fi[Xt]=Fi[mn]=Fi[In]=Fi[z]=Fi[se]=Fi[ke]=Fi[He]=Fi[Ge]=Fi[mt]=Fi[ut]=Fi[ci]=Fi[ri]=Fi[wn]=Fi[Mn]=!0,Fi[me]=Fi[V]=Fi[kt]=!1;var fW={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},pW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mW={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gW={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bW=parseFloat,vW=parseInt,O5=typeof Ar=="object"&&Ar&&Ar.Object===Object&&Ar,yW=typeof self=="object"&&self&&self.Object===Object&&self,Qs=O5||yW||Function("return this")(),w_=e&&!e.nodeType&&e,cu=w_&&!0&&n&&!n.nodeType&&n,D5=cu&&cu.exports===w_,x_=D5&&O5.process,So=function(){try{var De=cu&&cu.require&&cu.require("util").types;return De||x_&&x_.binding&&x_.binding("util")}catch(nt){}}(),M5=So&&So.isArrayBuffer,N5=So&&So.isDate,F5=So&&So.isMap,B5=So&&So.isRegExp,V5=So&&So.isSet,U5=So&&So.isTypedArray;function io(De,nt,Ke){switch(Ke.length){case 0:return De.call(nt);case 1:return De.call(nt,Ke[0]);case 2:return De.call(nt,Ke[0],Ke[1]);case 3:return De.call(nt,Ke[0],Ke[1],Ke[2])}return De.apply(nt,Ke)}function wW(De,nt,Ke,Dt){for(var xn=-1,di=De==null?0:De.length;++xn<di;){var Ps=De[xn];nt(Dt,Ps,Ke(Ps),De)}return Dt}function Ao(De,nt){for(var Ke=-1,Dt=De==null?0:De.length;++Ke<Dt&&nt(De[Ke],Ke,De)!==!1;);return De}function xW(De,nt){for(var Ke=De==null?0:De.length;Ke--&&nt(De[Ke],Ke,De)!==!1;);return De}function z5(De,nt){for(var Ke=-1,Dt=De==null?0:De.length;++Ke<Dt;)if(!nt(De[Ke],Ke,De))return!1;return!0}function jc(De,nt){for(var Ke=-1,Dt=De==null?0:De.length,xn=0,di=[];++Ke<Dt;){var Ps=De[Ke];nt(Ps,Ke,De)&&(di[xn++]=Ps)}return di}function Vb(De,nt){var Ke=De==null?0:De.length;return!!Ke&&Vh(De,nt,0)>-1}function __(De,nt,Ke){for(var Dt=-1,xn=De==null?0:De.length;++Dt<xn;)if(Ke(nt,De[Dt]))return!0;return!1}function Ji(De,nt){for(var Ke=-1,Dt=De==null?0:De.length,xn=Array(Dt);++Ke<Dt;)xn[Ke]=nt(De[Ke],Ke,De);return xn}function Gc(De,nt){for(var Ke=-1,Dt=nt.length,xn=De.length;++Ke<Dt;)De[xn+Ke]=nt[Ke];return De}function k_(De,nt,Ke,Dt){var xn=-1,di=De==null?0:De.length;for(Dt&&di&&(Ke=De[++xn]);++xn<di;)Ke=nt(Ke,De[xn],xn,De);return Ke}function _W(De,nt,Ke,Dt){var xn=De==null?0:De.length;for(Dt&&xn&&(Ke=De[--xn]);xn--;)Ke=nt(Ke,De[xn],xn,De);return Ke}function E_(De,nt){for(var Ke=-1,Dt=De==null?0:De.length;++Ke<Dt;)if(nt(De[Ke],Ke,De))return!0;return!1}var kW=T_("length");function EW(De){return De.split("")}function TW(De){return De.match(nu)||[]}function H5(De,nt,Ke){var Dt;return Ke(De,function(xn,di,Ps){if(nt(xn,di,Ps))return Dt=di,!1}),Dt}function Ub(De,nt,Ke,Dt){for(var xn=De.length,di=Ke+(Dt?1:-1);Dt?di--:++di<xn;)if(nt(De[di],di,De))return di;return-1}function Vh(De,nt,Ke){return nt===nt?NW(De,nt,Ke):Ub(De,j5,Ke)}function CW(De,nt,Ke,Dt){for(var xn=Ke-1,di=De.length;++xn<di;)if(Dt(De[xn],nt))return xn;return-1}function j5(De){return De!==De}function G5(De,nt){var Ke=De==null?0:De.length;return Ke?S_(De,nt)/Ke:xe}function T_(De){return function(nt){return nt==null?t:nt[De]}}function C_(De){return function(nt){return De==null?t:De[nt]}}function W5(De,nt,Ke,Dt,xn){return xn(De,function(di,Ps,Di){Ke=Dt?(Dt=!1,di):nt(Ke,di,Ps,Di)}),Ke}function SW(De,nt){var Ke=De.length;for(De.sort(nt);Ke--;)De[Ke]=De[Ke].value;return De}function S_(De,nt){for(var Ke,Dt=-1,xn=De.length;++Dt<xn;){var di=nt(De[Dt]);di!==t&&(Ke=Ke===t?di:Ke+di)}return Ke}function A_(De,nt){for(var Ke=-1,Dt=Array(De);++Ke<De;)Dt[Ke]=nt(Ke);return Dt}function AW(De,nt){return Ji(nt,function(Ke){return[Ke,De[Ke]]})}function q5(De){return De&&De.slice(0,Q5(De)+1).replace(Jt,"")}function so(De){return function(nt){return De(nt)}}function I_(De,nt){return Ji(nt,function(Ke){return De[Ke]})}function bm(De,nt){return De.has(nt)}function K5(De,nt){for(var Ke=-1,Dt=De.length;++Ke<Dt&&Vh(nt,De[Ke],0)>-1;);return Ke}function Y5(De,nt){for(var Ke=De.length;Ke--&&Vh(nt,De[Ke],0)>-1;);return Ke}function IW(De,nt){for(var Ke=De.length,Dt=0;Ke--;)De[Ke]===nt&&++Dt;return Dt}var PW=C_(fW),RW=C_(pW);function $W(De){return"\\"+gW[De]}function LW(De,nt){return De==null?t:De[nt]}function Uh(De){return cW.test(De)}function OW(De){return dW.test(De)}function DW(De){for(var nt,Ke=[];!(nt=De.next()).done;)Ke.push(nt.value);return Ke}function P_(De){var nt=-1,Ke=Array(De.size);return De.forEach(function(Dt,xn){Ke[++nt]=[xn,Dt]}),Ke}function X5(De,nt){return function(Ke){return De(nt(Ke))}}function Wc(De,nt){for(var Ke=-1,Dt=De.length,xn=0,di=[];++Ke<Dt;){var Ps=De[Ke];(Ps===nt||Ps===d)&&(De[Ke]=d,di[xn++]=Ke)}return di}function zb(De){var nt=-1,Ke=Array(De.size);return De.forEach(function(Dt){Ke[++nt]=Dt}),Ke}function MW(De){var nt=-1,Ke=Array(De.size);return De.forEach(function(Dt){Ke[++nt]=[Dt,Dt]}),Ke}function NW(De,nt,Ke){for(var Dt=Ke-1,xn=De.length;++Dt<xn;)if(De[Dt]===nt)return Dt;return-1}function FW(De,nt,Ke){for(var Dt=Ke+1;Dt--;)if(De[Dt]===nt)return Dt;return Dt}function zh(De){return Uh(De)?VW(De):kW(De)}function ra(De){return Uh(De)?UW(De):EW(De)}function Q5(De){for(var nt=De.length;nt--&&ir.test(De.charAt(nt)););return nt}var BW=C_(mW);function VW(De){for(var nt=y_.lastIndex=0;y_.test(De);)++nt;return nt}function UW(De){return De.match(y_)||[]}function zW(De){return De.match(lW)||[]}var HW=function De(nt){nt=nt==null?Qs:Hh.defaults(Qs.Object(),nt,Hh.pick(Qs,uW));var Ke=nt.Array,Dt=nt.Date,xn=nt.Error,di=nt.Function,Ps=nt.Math,Di=nt.Object,R_=nt.RegExp,jW=nt.String,Io=nt.TypeError,Hb=Ke.prototype,GW=di.prototype,jh=Di.prototype,jb=nt["__core-js_shared__"],Gb=GW.toString,wi=jh.hasOwnProperty,WW=0,Z5=function(){var p=/[^.]+$/.exec(jb&&jb.keys&&jb.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),Wb=jh.toString,qW=Gb.call(Di),KW=Qs._,YW=R_("^"+Gb.call(wi).replace(Ts,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qb=D5?nt.Buffer:t,qc=nt.Symbol,Kb=nt.Uint8Array,J5=qb?qb.allocUnsafe:t,Yb=X5(Di.getPrototypeOf,Di),e4=Di.create,t4=jh.propertyIsEnumerable,Xb=Hb.splice,n4=qc?qc.isConcatSpreadable:t,vm=qc?qc.iterator:t,du=qc?qc.toStringTag:t,Qb=function(){try{var p=mu(Di,"defineProperty");return p({},"",{}),p}catch(v){}}(),XW=nt.clearTimeout!==Qs.clearTimeout&&nt.clearTimeout,QW=Dt&&Dt.now!==Qs.Date.now&&Dt.now,ZW=nt.setTimeout!==Qs.setTimeout&&nt.setTimeout,Zb=Ps.ceil,Jb=Ps.floor,$_=Di.getOwnPropertySymbols,JW=qb?qb.isBuffer:t,i4=nt.isFinite,eq=Hb.join,tq=X5(Di.keys,Di),Rs=Ps.max,sr=Ps.min,nq=Dt.now,iq=nt.parseInt,s4=Ps.random,sq=Hb.reverse,L_=mu(nt,"DataView"),ym=mu(nt,"Map"),O_=mu(nt,"Promise"),Gh=mu(nt,"Set"),wm=mu(nt,"WeakMap"),xm=mu(Di,"create"),e1=wm&&new wm,Wh={},rq=gu(L_),oq=gu(ym),aq=gu(O_),lq=gu(Gh),cq=gu(wm),t1=qc?qc.prototype:t,_m=t1?t1.valueOf:t,r4=t1?t1.toString:t;function Y(p){if(fs(p)&&!_n(p)&&!(p instanceof Un)){if(p instanceof Po)return p;if(wi.call(p,"__wrapped__"))return oI(p)}return new Po(p)}var qh=function(){function p(){}return function(v){if(!os(v))return{};if(e4)return e4(v);p.prototype=v;var S=new p;return p.prototype=t,S}}();function n1(){}function Po(p,v){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=t}Y.templateSettings={escape:Ga,evaluate:Wa,interpolate:sa,variable:"",imports:{_:Y}},Y.prototype=n1.prototype,Y.prototype.constructor=Y,Po.prototype=qh(n1.prototype),Po.prototype.constructor=Po;function Un(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Be,this.__views__=[]}function dq(){var p=new Un(this.__wrapped__);return p.__actions__=Dr(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Dr(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Dr(this.__views__),p}function uq(){if(this.__filtered__){var p=new Un(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function hq(){var p=this.__wrapped__.value(),v=this.__dir__,S=_n(p),D=v<0,H=S?p.length:0,ee=EK(0,H,this.__views__),pe=ee.start,Ee=ee.end,Me=Ee-pe,st=D?Ee:pe-1,ot=this.__iteratees__,ft=ot.length,Lt=0,Ht=sr(Me,this.__takeCount__);if(!S||!D&&H==Me&&Ht==Me)return I4(p,this.__actions__);var cn=[];e:for(;Me--&&Lt<Ht;){st+=v;for(var Ln=-1,dn=p[st];++Ln<ft;){var Vn=ot[Ln],Hn=Vn.iteratee,ao=Vn.type,vr=Hn(dn);if(ao==te)dn=vr;else if(!vr){if(ao==B)continue e;break e}}cn[Lt++]=dn}return cn}Un.prototype=qh(n1.prototype),Un.prototype.constructor=Un;function uu(p){var v=-1,S=p==null?0:p.length;for(this.clear();++v<S;){var D=p[v];this.set(D[0],D[1])}}function fq(){this.__data__=xm?xm(null):{},this.size=0}function pq(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}function mq(p){var v=this.__data__;if(xm){var S=v[p];return S===l?t:S}return wi.call(v,p)?v[p]:t}function gq(p){var v=this.__data__;return xm?v[p]!==t:wi.call(v,p)}function bq(p,v){var S=this.__data__;return this.size+=this.has(p)?0:1,S[p]=xm&&v===t?l:v,this}uu.prototype.clear=fq,uu.prototype.delete=pq,uu.prototype.get=mq,uu.prototype.has=gq,uu.prototype.set=bq;function Bl(p){var v=-1,S=p==null?0:p.length;for(this.clear();++v<S;){var D=p[v];this.set(D[0],D[1])}}function vq(){this.__data__=[],this.size=0}function yq(p){var v=this.__data__,S=i1(v,p);if(S<0)return!1;var D=v.length-1;return S==D?v.pop():Xb.call(v,S,1),--this.size,!0}function wq(p){var v=this.__data__,S=i1(v,p);return S<0?t:v[S][1]}function xq(p){return i1(this.__data__,p)>-1}function _q(p,v){var S=this.__data__,D=i1(S,p);return D<0?(++this.size,S.push([p,v])):S[D][1]=v,this}Bl.prototype.clear=vq,Bl.prototype.delete=yq,Bl.prototype.get=wq,Bl.prototype.has=xq,Bl.prototype.set=_q;function Vl(p){var v=-1,S=p==null?0:p.length;for(this.clear();++v<S;){var D=p[v];this.set(D[0],D[1])}}function kq(){this.size=0,this.__data__={hash:new uu,map:new(ym||Bl),string:new uu}}function Eq(p){var v=m1(this,p).delete(p);return this.size-=v?1:0,v}function Tq(p){return m1(this,p).get(p)}function Cq(p){return m1(this,p).has(p)}function Sq(p,v){var S=m1(this,p),D=S.size;return S.set(p,v),this.size+=S.size==D?0:1,this}Vl.prototype.clear=kq,Vl.prototype.delete=Eq,Vl.prototype.get=Tq,Vl.prototype.has=Cq,Vl.prototype.set=Sq;function hu(p){var v=-1,S=p==null?0:p.length;for(this.__data__=new Vl;++v<S;)this.add(p[v])}function Aq(p){return this.__data__.set(p,l),this}function Iq(p){return this.__data__.has(p)}hu.prototype.add=hu.prototype.push=Aq,hu.prototype.has=Iq;function oa(p){var v=this.__data__=new Bl(p);this.size=v.size}function Pq(){this.__data__=new Bl,this.size=0}function Rq(p){var v=this.__data__,S=v.delete(p);return this.size=v.size,S}function $q(p){return this.__data__.get(p)}function Lq(p){return this.__data__.has(p)}function Oq(p,v){var S=this.__data__;if(S instanceof Bl){var D=S.__data__;if(!ym||D.length<s-1)return D.push([p,v]),this.size=++S.size,this;S=this.__data__=new Vl(D)}return S.set(p,v),this.size=S.size,this}oa.prototype.clear=Pq,oa.prototype.delete=Rq,oa.prototype.get=$q,oa.prototype.has=Lq,oa.prototype.set=Oq;function o4(p,v){var S=_n(p),D=!S&&bu(p),H=!S&&!D&&Zc(p),ee=!S&&!D&&!H&&Qh(p),pe=S||D||H||ee,Ee=pe?A_(p.length,jW):[],Me=Ee.length;for(var st in p)(v||wi.call(p,st))&&!(pe&&(st=="length"||H&&(st=="offset"||st=="parent")||ee&&(st=="buffer"||st=="byteLength"||st=="byteOffset")||jl(st,Me)))&&Ee.push(st);return Ee}function a4(p){var v=p.length;return v?p[G_(0,v-1)]:t}function Dq(p,v){return g1(Dr(p),fu(v,0,p.length))}function Mq(p){return g1(Dr(p))}function D_(p,v,S){(S!==t&&!aa(p[v],S)||S===t&&!(v in p))&&Ul(p,v,S)}function km(p,v,S){var D=p[v];(!(wi.call(p,v)&&aa(D,S))||S===t&&!(v in p))&&Ul(p,v,S)}function i1(p,v){for(var S=p.length;S--;)if(aa(p[S][0],v))return S;return-1}function Nq(p,v,S,D){return Kc(p,function(H,ee,pe){v(D,H,S(H),pe)}),D}function l4(p,v){return p&&Xa(v,Fs(v),p)}function Fq(p,v){return p&&Xa(v,Nr(v),p)}function Ul(p,v,S){v=="__proto__"&&Qb?Qb(p,v,{configurable:!0,enumerable:!0,value:S,writable:!0}):p[v]=S}function M_(p,v){for(var S=-1,D=v.length,H=Ke(D),ee=p==null;++S<D;)H[S]=ee?t:g2(p,v[S]);return H}function fu(p,v,S){return p===p&&(S!==t&&(p=p<=S?p:S),v!==t&&(p=p>=v?p:v)),p}function Ro(p,v,S,D,H,ee){var pe,Ee=v&u,Me=v&h,st=v&f;if(S&&(pe=H?S(p,D,H,ee):S(p)),pe!==t)return pe;if(!os(p))return p;var ot=_n(p);if(ot){if(pe=CK(p),!Ee)return Dr(p,pe)}else{var ft=rr(p),Lt=ft==V||ft==F;if(Zc(p))return $4(p,Ee);if(ft==ke||ft==we||Lt&&!H){if(pe=Me||Lt?{}:Q4(p),!Ee)return Me?mK(p,Fq(pe,p)):pK(p,l4(pe,p))}else{if(!Fi[ft])return H?p:{};pe=SK(p,ft,Ee)}}ee||(ee=new oa);var Ht=ee.get(p);if(Ht)return Ht;ee.set(p,pe),CI(p)?p.forEach(function(dn){pe.add(Ro(dn,v,S,dn,p,ee))}):EI(p)&&p.forEach(function(dn,Vn){pe.set(Vn,Ro(dn,v,S,Vn,p,ee))});var cn=st?Me?n2:t2:Me?Nr:Fs,Ln=ot?t:cn(p);return Ao(Ln||p,function(dn,Vn){Ln&&(Vn=dn,dn=p[Vn]),km(pe,Vn,Ro(dn,v,S,Vn,p,ee))}),pe}function Bq(p){var v=Fs(p);return function(S){return c4(S,p,v)}}function c4(p,v,S){var D=S.length;if(p==null)return!D;for(p=Di(p);D--;){var H=S[D],ee=v[H],pe=p[H];if(pe===t&&!(H in p)||!ee(pe))return!1}return!0}function d4(p,v,S){if(typeof p!="function")throw new Io(o);return Pm(function(){p.apply(t,S)},v)}function Em(p,v,S,D){var H=-1,ee=Vb,pe=!0,Ee=p.length,Me=[],st=v.length;if(!Ee)return Me;S&&(v=Ji(v,so(S))),D?(ee=__,pe=!1):v.length>=s&&(ee=bm,pe=!1,v=new hu(v));e:for(;++H<Ee;){var ot=p[H],ft=S==null?ot:S(ot);if(ot=D||ot!==0?ot:0,pe&&ft===ft){for(var Lt=st;Lt--;)if(v[Lt]===ft)continue e;Me.push(ot)}else ee(v,ft,D)||Me.push(ot)}return Me}var Kc=N4(Ya),u4=N4(F_,!0);function Vq(p,v){var S=!0;return Kc(p,function(D,H,ee){return S=!!v(D,H,ee),S}),S}function s1(p,v,S){for(var D=-1,H=p.length;++D<H;){var ee=p[D],pe=v(ee);if(pe!=null&&(Ee===t?pe===pe&&!oo(pe):S(pe,Ee)))var Ee=pe,Me=ee}return Me}function Uq(p,v,S,D){var H=p.length;for(S=Pn(S),S<0&&(S=-S>H?0:H+S),D=D===t||D>H?H:Pn(D),D<0&&(D+=H),D=S>D?0:AI(D);S<D;)p[S++]=v;return p}function h4(p,v){var S=[];return Kc(p,function(D,H,ee){v(D,H,ee)&&S.push(D)}),S}function Zs(p,v,S,D,H){var ee=-1,pe=p.length;for(S||(S=IK),H||(H=[]);++ee<pe;){var Ee=p[ee];v>0&&S(Ee)?v>1?Zs(Ee,v-1,S,D,H):Gc(H,Ee):D||(H[H.length]=Ee)}return H}var N_=F4(),f4=F4(!0);function Ya(p,v){return p&&N_(p,v,Fs)}function F_(p,v){return p&&f4(p,v,Fs)}function r1(p,v){return jc(v,function(S){return Gl(p[S])})}function pu(p,v){v=Xc(v,p);for(var S=0,D=v.length;p!=null&&S<D;)p=p[Qa(v[S++])];return S&&S==D?p:t}function p4(p,v,S){var D=v(p);return _n(p)?D:Gc(D,S(p))}function gr(p){return p==null?p===t?xt:Te:du&&du in Di(p)?kK(p):MK(p)}function B_(p,v){return p>v}function zq(p,v){return p!=null&&wi.call(p,v)}function Hq(p,v){return p!=null&&v in Di(p)}function jq(p,v,S){return p>=sr(v,S)&&p<Rs(v,S)}function V_(p,v,S){for(var D=S?__:Vb,H=p[0].length,ee=p.length,pe=ee,Ee=Ke(ee),Me=1/0,st=[];pe--;){var ot=p[pe];pe&&v&&(ot=Ji(ot,so(v))),Me=sr(ot.length,Me),Ee[pe]=!S&&(v||H>=120&&ot.length>=120)?new hu(pe&&ot):t}ot=p[0];var ft=-1,Lt=Ee[0];e:for(;++ft<H&&st.length<Me;){var Ht=ot[ft],cn=v?v(Ht):Ht;if(Ht=S||Ht!==0?Ht:0,!(Lt?bm(Lt,cn):D(st,cn,S))){for(pe=ee;--pe;){var Ln=Ee[pe];if(!(Ln?bm(Ln,cn):D(p[pe],cn,S)))continue e}Lt&&Lt.push(cn),st.push(Ht)}}return st}function Gq(p,v,S,D){return Ya(p,function(H,ee,pe){v(D,S(H),ee,pe)}),D}function Tm(p,v,S){v=Xc(v,p),p=tI(p,v);var D=p==null?p:p[Qa(Lo(v))];return D==null?t:io(D,p,S)}function m4(p){return fs(p)&&gr(p)==we}function Wq(p){return fs(p)&&gr(p)==Je}function qq(p){return fs(p)&&gr(p)==ne}function Cm(p,v,S,D,H){return p===v?!0:p==null||v==null||!fs(p)&&!fs(v)?p!==p&&v!==v:Kq(p,v,S,D,Cm,H)}function Kq(p,v,S,D,H,ee){var pe=_n(p),Ee=_n(v),Me=pe?ze:rr(p),st=Ee?ze:rr(v);Me=Me==we?ke:Me,st=st==we?ke:st;var ot=Me==ke,ft=st==ke,Lt=Me==st;if(Lt&&Zc(p)){if(!Zc(v))return!1;pe=!0,ot=!1}if(Lt&&!ot)return ee||(ee=new oa),pe||Qh(p)?K4(p,v,S,D,H,ee):xK(p,v,Me,S,D,H,ee);if(!(S&m)){var Ht=ot&&wi.call(p,"__wrapped__"),cn=ft&&wi.call(v,"__wrapped__");if(Ht||cn){var Ln=Ht?p.value():p,dn=cn?v.value():v;return ee||(ee=new oa),H(Ln,dn,S,D,ee)}}return Lt?(ee||(ee=new oa),_K(p,v,S,D,H,ee)):!1}function Yq(p){return fs(p)&&rr(p)==z}function U_(p,v,S,D){var H=S.length,ee=H,pe=!D;if(p==null)return!ee;for(p=Di(p);H--;){var Ee=S[H];if(pe&&Ee[2]?Ee[1]!==p[Ee[0]]:!(Ee[0]in p))return!1}for(;++H<ee;){Ee=S[H];var Me=Ee[0],st=p[Me],ot=Ee[1];if(pe&&Ee[2]){if(st===t&&!(Me in p))return!1}else{var ft=new oa;if(D)var Lt=D(st,ot,Me,p,v,ft);if(!(Lt===t?Cm(ot,st,m|g,D,ft):Lt))return!1}}return!0}function g4(p){if(!os(p)||RK(p))return!1;var v=Gl(p)?YW:Mh;return v.test(gu(p))}function Xq(p){return fs(p)&&gr(p)==He}function Qq(p){return fs(p)&&rr(p)==Ge}function Zq(p){return fs(p)&&_1(p.length)&&!!ji[gr(p)]}function b4(p){return typeof p=="function"?p:p==null?Fr:typeof p=="object"?_n(p)?w4(p[0],p[1]):y4(p):BI(p)}function z_(p){if(!Im(p))return tq(p);var v=[];for(var S in Di(p))wi.call(p,S)&&S!="constructor"&&v.push(S);return v}function Jq(p){if(!os(p))return DK(p);var v=Im(p),S=[];for(var D in p)D=="constructor"&&(v||!wi.call(p,D))||S.push(D);return S}function H_(p,v){return p<v}function v4(p,v){var S=-1,D=Mr(p)?Ke(p.length):[];return Kc(p,function(H,ee,pe){D[++S]=v(H,ee,pe)}),D}function y4(p){var v=s2(p);return v.length==1&&v[0][2]?J4(v[0][0],v[0][1]):function(S){return S===p||U_(S,p,v)}}function w4(p,v){return o2(p)&&Z4(v)?J4(Qa(p),v):function(S){var D=g2(S,p);return D===t&&D===v?b2(S,p):Cm(v,D,m|g)}}function o1(p,v,S,D,H){p!==v&&N_(v,function(ee,pe){if(H||(H=new oa),os(ee))eK(p,v,pe,S,o1,D,H);else{var Ee=D?D(l2(p,pe),ee,pe+"",p,v,H):t;Ee===t&&(Ee=ee),D_(p,pe,Ee)}},Nr)}function eK(p,v,S,D,H,ee,pe){var Ee=l2(p,S),Me=l2(v,S),st=pe.get(Me);if(st){D_(p,S,st);return}var ot=ee?ee(Ee,Me,S+"",p,v,pe):t,ft=ot===t;if(ft){var Lt=_n(Me),Ht=!Lt&&Zc(Me),cn=!Lt&&!Ht&&Qh(Me);ot=Me,Lt||Ht||cn?_n(Ee)?ot=Ee:vs(Ee)?ot=Dr(Ee):Ht?(ft=!1,ot=$4(Me,!0)):cn?(ft=!1,ot=L4(Me,!0)):ot=[]:Rm(Me)||bu(Me)?(ot=Ee,bu(Ee)?ot=II(Ee):(!os(Ee)||Gl(Ee))&&(ot=Q4(Me))):ft=!1}ft&&(pe.set(Me,ot),H(ot,Me,D,ee,pe),pe.delete(Me)),D_(p,S,ot)}function x4(p,v){var S=p.length;if(S)return v+=v<0?S:0,jl(v,S)?p[v]:t}function _4(p,v,S){v.length?v=Ji(v,function(ee){return _n(ee)?function(pe){return pu(pe,ee.length===1?ee[0]:ee)}:ee}):v=[Fr];var D=-1;v=Ji(v,so(an()));var H=v4(p,function(ee,pe,Ee){var Me=Ji(v,function(st){return st(ee)});return{criteria:Me,index:++D,value:ee}});return SW(H,function(ee,pe){return fK(ee,pe,S)})}function tK(p,v){return k4(p,v,function(S,D){return b2(p,D)})}function k4(p,v,S){for(var D=-1,H=v.length,ee={};++D<H;){var pe=v[D],Ee=pu(p,pe);S(Ee,pe)&&Sm(ee,Xc(pe,p),Ee)}return ee}function nK(p){return function(v){return pu(v,p)}}function j_(p,v,S,D){var H=D?CW:Vh,ee=-1,pe=v.length,Ee=p;for(p===v&&(v=Dr(v)),S&&(Ee=Ji(p,so(S)));++ee<pe;)for(var Me=0,st=v[ee],ot=S?S(st):st;(Me=H(Ee,ot,Me,D))>-1;)Ee!==p&&Xb.call(Ee,Me,1),Xb.call(p,Me,1);return p}function E4(p,v){for(var S=p?v.length:0,D=S-1;S--;){var H=v[S];if(S==D||H!==ee){var ee=H;jl(H)?Xb.call(p,H,1):K_(p,H)}}return p}function G_(p,v){return p+Jb(s4()*(v-p+1))}function iK(p,v,S,D){for(var H=-1,ee=Rs(Zb((v-p)/(S||1)),0),pe=Ke(ee);ee--;)pe[D?ee:++H]=p,p+=S;return pe}function W_(p,v){var S="";if(!p||v<1||v>he)return S;do v%2&&(S+=p),v=Jb(v/2),v&&(p+=p);while(v);return S}function Nn(p,v){return c2(eI(p,v,Fr),p+"")}function sK(p){return a4(Zh(p))}function rK(p,v){var S=Zh(p);return g1(S,fu(v,0,S.length))}function Sm(p,v,S,D){if(!os(p))return p;v=Xc(v,p);for(var H=-1,ee=v.length,pe=ee-1,Ee=p;Ee!=null&&++H<ee;){var Me=Qa(v[H]),st=S;if(Me==="__proto__"||Me==="constructor"||Me==="prototype")return p;if(H!=pe){var ot=Ee[Me];st=D?D(ot,Me,Ee):t,st===t&&(st=os(ot)?ot:jl(v[H+1])?[]:{})}km(Ee,Me,st),Ee=Ee[Me]}return p}var T4=e1?function(p,v){return e1.set(p,v),p}:Fr,oK=Qb?function(p,v){return Qb(p,"toString",{configurable:!0,enumerable:!1,value:y2(v),writable:!0})}:Fr;function aK(p){return g1(Zh(p))}function $o(p,v,S){var D=-1,H=p.length;v<0&&(v=-v>H?0:H+v),S=S>H?H:S,S<0&&(S+=H),H=v>S?0:S-v>>>0,v>>>=0;for(var ee=Ke(H);++D<H;)ee[D]=p[D+v];return ee}function lK(p,v){var S;return Kc(p,function(D,H,ee){return S=v(D,H,ee),!S}),!!S}function a1(p,v,S){var D=0,H=p==null?D:p.length;if(typeof v=="number"&&v===v&&H<=Ae){for(;D<H;){var ee=D+H>>>1,pe=p[ee];pe!==null&&!oo(pe)&&(S?pe<=v:pe<v)?D=ee+1:H=ee}return H}return q_(p,v,Fr,S)}function q_(p,v,S,D){var H=0,ee=p==null?0:p.length;if(ee===0)return 0;v=S(v);for(var pe=v!==v,Ee=v===null,Me=oo(v),st=v===t;H<ee;){var ot=Jb((H+ee)/2),ft=S(p[ot]),Lt=ft!==t,Ht=ft===null,cn=ft===ft,Ln=oo(ft);if(pe)var dn=D||cn;else st?dn=cn&&(D||Lt):Ee?dn=cn&&Lt&&(D||!Ht):Me?dn=cn&&Lt&&!Ht&&(D||!Ln):Ht||Ln?dn=!1:dn=D?ft<=v:ft<v;dn?H=ot+1:ee=ot}return sr(ee,Pe)}function C4(p,v){for(var S=-1,D=p.length,H=0,ee=[];++S<D;){var pe=p[S],Ee=v?v(pe):pe;if(!S||!aa(Ee,Me)){var Me=Ee;ee[H++]=pe===0?0:pe}}return ee}function S4(p){return typeof p=="number"?p:oo(p)?xe:+p}function ro(p){if(typeof p=="string")return p;if(_n(p))return Ji(p,ro)+"";if(oo(p))return r4?r4.call(p):"";var v=p+"";return v=="0"&&1/p==-1/0?"-0":v}function Yc(p,v,S){var D=-1,H=Vb,ee=p.length,pe=!0,Ee=[],Me=Ee;if(S)pe=!1,H=__;else if(ee>=s){var st=v?null:yK(p);if(st)return zb(st);pe=!1,H=bm,Me=new hu}else Me=v?[]:Ee;e:for(;++D<ee;){var ot=p[D],ft=v?v(ot):ot;if(ot=S||ot!==0?ot:0,pe&&ft===ft){for(var Lt=Me.length;Lt--;)if(Me[Lt]===ft)continue e;v&&Me.push(ft),Ee.push(ot)}else H(Me,ft,S)||(Me!==Ee&&Me.push(ft),Ee.push(ot))}return Ee}function K_(p,v){return v=Xc(v,p),p=tI(p,v),p==null||delete p[Qa(Lo(v))]}function A4(p,v,S,D){return Sm(p,v,S(pu(p,v)),D)}function l1(p,v,S,D){for(var H=p.length,ee=D?H:-1;(D?ee--:++ee<H)&&v(p[ee],ee,p););return S?$o(p,D?0:ee,D?ee+1:H):$o(p,D?ee+1:0,D?H:ee)}function I4(p,v){var S=p;return S instanceof Un&&(S=S.value()),k_(v,function(D,H){return H.func.apply(H.thisArg,Gc([D],H.args))},S)}function Y_(p,v,S){var D=p.length;if(D<2)return D?Yc(p[0]):[];for(var H=-1,ee=Ke(D);++H<D;)for(var pe=p[H],Ee=-1;++Ee<D;)Ee!=H&&(ee[H]=Em(ee[H]||pe,p[Ee],v,S));return Yc(Zs(ee,1),v,S)}function P4(p,v,S){for(var D=-1,H=p.length,ee=v.length,pe={};++D<H;){var Ee=D<ee?v[D]:t;S(pe,p[D],Ee)}return pe}function X_(p){return vs(p)?p:[]}function Q_(p){return typeof p=="function"?p:Fr}function Xc(p,v){return _n(p)?p:o2(p,v)?[p]:rI(gi(p))}var cK=Nn;function Qc(p,v,S){var D=p.length;return S=S===t?D:S,!v&&S>=D?p:$o(p,v,S)}var R4=XW||function(p){return Qs.clearTimeout(p)};function $4(p,v){if(v)return p.slice();var S=p.length,D=J5?J5(S):new p.constructor(S);return p.copy(D),D}function Z_(p){var v=new p.constructor(p.byteLength);return new Kb(v).set(new Kb(p)),v}function dK(p,v){var S=v?Z_(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.byteLength)}function uK(p){var v=new p.constructor(p.source,Ka.exec(p));return v.lastIndex=p.lastIndex,v}function hK(p){return _m?Di(_m.call(p)):{}}function L4(p,v){var S=v?Z_(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.length)}function O4(p,v){if(p!==v){var S=p!==t,D=p===null,H=p===p,ee=oo(p),pe=v!==t,Ee=v===null,Me=v===v,st=oo(v);if(!Ee&&!st&&!ee&&p>v||ee&&pe&&Me&&!Ee&&!st||D&&pe&&Me||!S&&Me||!H)return 1;if(!D&&!ee&&!st&&p<v||st&&S&&H&&!D&&!ee||Ee&&S&&H||!pe&&H||!Me)return-1}return 0}function fK(p,v,S){for(var D=-1,H=p.criteria,ee=v.criteria,pe=H.length,Ee=S.length;++D<pe;){var Me=O4(H[D],ee[D]);if(Me){if(D>=Ee)return Me;var st=S[D];return Me*(st=="desc"?-1:1)}}return p.index-v.index}function D4(p,v,S,D){for(var H=-1,ee=p.length,pe=S.length,Ee=-1,Me=v.length,st=Rs(ee-pe,0),ot=Ke(Me+st),ft=!D;++Ee<Me;)ot[Ee]=v[Ee];for(;++H<pe;)(ft||H<ee)&&(ot[S[H]]=p[H]);for(;st--;)ot[Ee++]=p[H++];return ot}function M4(p,v,S,D){for(var H=-1,ee=p.length,pe=-1,Ee=S.length,Me=-1,st=v.length,ot=Rs(ee-Ee,0),ft=Ke(ot+st),Lt=!D;++H<ot;)ft[H]=p[H];for(var Ht=H;++Me<st;)ft[Ht+Me]=v[Me];for(;++pe<Ee;)(Lt||H<ee)&&(ft[Ht+S[pe]]=p[H++]);return ft}function Dr(p,v){var S=-1,D=p.length;for(v||(v=Ke(D));++S<D;)v[S]=p[S];return v}function Xa(p,v,S,D){var H=!S;S||(S={});for(var ee=-1,pe=v.length;++ee<pe;){var Ee=v[ee],Me=D?D(S[Ee],p[Ee],Ee,S,p):t;Me===t&&(Me=p[Ee]),H?Ul(S,Ee,Me):km(S,Ee,Me)}return S}function pK(p,v){return Xa(p,r2(p),v)}function mK(p,v){return Xa(p,Y4(p),v)}function c1(p,v){return function(S,D){var H=_n(S)?wW:Nq,ee=v?v():{};return H(S,p,an(D,2),ee)}}function Kh(p){return Nn(function(v,S){var D=-1,H=S.length,ee=H>1?S[H-1]:t,pe=H>2?S[2]:t;for(ee=p.length>3&&typeof ee=="function"?(H--,ee):t,pe&&br(S[0],S[1],pe)&&(ee=H<3?t:ee,H=1),v=Di(v);++D<H;){var Ee=S[D];Ee&&p(v,Ee,D,ee)}return v})}function N4(p,v){return function(S,D){if(S==null)return S;if(!Mr(S))return p(S,D);for(var H=S.length,ee=v?H:-1,pe=Di(S);(v?ee--:++ee<H)&&D(pe[ee],ee,pe)!==!1;);return S}}function F4(p){return function(v,S,D){for(var H=-1,ee=Di(v),pe=D(v),Ee=pe.length;Ee--;){var Me=pe[p?Ee:++H];if(S(ee[Me],Me,ee)===!1)break}return v}}function gK(p,v,S){var D=v&b,H=Am(p);function ee(){var pe=this&&this!==Qs&&this instanceof ee?H:p;return pe.apply(D?S:this,arguments)}return ee}function B4(p){return function(v){v=gi(v);var S=Uh(v)?ra(v):t,D=S?S[0]:v.charAt(0),H=S?Qc(S,1).join(""):v.slice(1);return D[p]()+H}}function Yh(p){return function(v){return k_(NI(MI(v).replace(oW,"")),p,"")}}function Am(p){return function(){var v=arguments;switch(v.length){case 0:return new p;case 1:return new p(v[0]);case 2:return new p(v[0],v[1]);case 3:return new p(v[0],v[1],v[2]);case 4:return new p(v[0],v[1],v[2],v[3]);case 5:return new p(v[0],v[1],v[2],v[3],v[4]);case 6:return new p(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new p(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var S=qh(p.prototype),D=p.apply(S,v);return os(D)?D:S}}function bK(p,v,S){var D=Am(p);function H(){for(var ee=arguments.length,pe=Ke(ee),Ee=ee,Me=Xh(H);Ee--;)pe[Ee]=arguments[Ee];var st=ee<3&&pe[0]!==Me&&pe[ee-1]!==Me?[]:Wc(pe,Me);if(ee-=st.length,ee<S)return j4(p,v,d1,H.placeholder,t,pe,st,t,t,S-ee);var ot=this&&this!==Qs&&this instanceof H?D:p;return io(ot,this,pe)}return H}function V4(p){return function(v,S,D){var H=Di(v);if(!Mr(v)){var ee=an(S,3);v=Fs(v),S=function(Ee){return ee(H[Ee],Ee,H)}}var pe=p(v,S,D);return pe>-1?H[ee?v[pe]:pe]:t}}function U4(p){return Hl(function(v){var S=v.length,D=S,H=Po.prototype.thru;for(p&&v.reverse();D--;){var ee=v[D];if(typeof ee!="function")throw new Io(o);if(H&&!pe&&p1(ee)=="wrapper")var pe=new Po([],!0)}for(D=pe?D:S;++D<S;){ee=v[D];var Ee=p1(ee),Me=Ee=="wrapper"?i2(ee):t;Me&&a2(Me[0])&&Me[1]==(C|k|T|A)&&!Me[4].length&&Me[9]==1?pe=pe[p1(Me[0])].apply(pe,Me[3]):pe=ee.length==1&&a2(ee)?pe[Ee]():pe.thru(ee)}return function(){var st=arguments,ot=st[0];if(pe&&st.length==1&&_n(ot))return pe.plant(ot).value();for(var ft=0,Lt=S?v[ft].apply(this,st):ot;++ft<S;)Lt=v[ft].call(this,Lt);return Lt}})}function d1(p,v,S,D,H,ee,pe,Ee,Me,st){var ot=v&C,ft=v&b,Lt=v&w,Ht=v&(k|E),cn=v&R,Ln=Lt?t:Am(p);function dn(){for(var Vn=arguments.length,Hn=Ke(Vn),ao=Vn;ao--;)Hn[ao]=arguments[ao];if(Ht)var vr=Xh(dn),lo=IW(Hn,vr);if(D&&(Hn=D4(Hn,D,H,Ht)),ee&&(Hn=M4(Hn,ee,pe,Ht)),Vn-=lo,Ht&&Vn<st){var ys=Wc(Hn,vr);return j4(p,v,d1,dn.placeholder,S,Hn,ys,Ee,Me,st-Vn)}var la=ft?S:this,ql=Lt?la[p]:p;return Vn=Hn.length,Ee?Hn=NK(Hn,Ee):cn&&Vn>1&&Hn.reverse(),ot&&Me<Vn&&(Hn.length=Me),this&&this!==Qs&&this instanceof dn&&(ql=Ln||Am(ql)),ql.apply(la,Hn)}return dn}function z4(p,v){return function(S,D){return Gq(S,p,v(D),{})}}function u1(p,v){return function(S,D){var H;if(S===t&&D===t)return v;if(S!==t&&(H=S),D!==t){if(H===t)return D;typeof S=="string"||typeof D=="string"?(S=ro(S),D=ro(D)):(S=S4(S),D=S4(D)),H=p(S,D)}return H}}function J_(p){return Hl(function(v){return v=Ji(v,so(an())),Nn(function(S){var D=this;return p(v,function(H){return io(H,D,S)})})})}function h1(p,v){v=v===t?" ":ro(v);var S=v.length;if(S<2)return S?W_(v,p):v;var D=W_(v,Zb(p/zh(v)));return Uh(v)?Qc(ra(D),0,p).join(""):D.slice(0,p)}function vK(p,v,S,D){var H=v&b,ee=Am(p);function pe(){for(var Ee=-1,Me=arguments.length,st=-1,ot=D.length,ft=Ke(ot+Me),Lt=this&&this!==Qs&&this instanceof pe?ee:p;++st<ot;)ft[st]=D[st];for(;Me--;)ft[st++]=arguments[++Ee];return io(Lt,H?S:this,ft)}return pe}function H4(p){return function(v,S,D){return D&&typeof D!="number"&&br(v,S,D)&&(S=D=t),v=Wl(v),S===t?(S=v,v=0):S=Wl(S),D=D===t?v<S?1:-1:Wl(D),iK(v,S,D,p)}}function f1(p){return function(v,S){return typeof v=="string"&&typeof S=="string"||(v=Oo(v),S=Oo(S)),p(v,S)}}function j4(p,v,S,D,H,ee,pe,Ee,Me,st){var ot=v&k,ft=ot?pe:t,Lt=ot?t:pe,Ht=ot?ee:t,cn=ot?t:ee;v|=ot?T:P,v&=~(ot?P:T),v&x||(v&=-4);var Ln=[p,v,H,Ht,ft,cn,Lt,Ee,Me,st],dn=S.apply(t,Ln);return a2(p)&&nI(dn,Ln),dn.placeholder=D,iI(dn,p,v)}function e2(p){var v=Ps[p];return function(S,D){if(S=Oo(S),D=D==null?0:sr(Pn(D),292),D&&i4(S)){var H=(gi(S)+"e").split("e"),ee=v(H[0]+"e"+(+H[1]+D));return H=(gi(ee)+"e").split("e"),+(H[0]+"e"+(+H[1]-D))}return v(S)}}var yK=Gh&&1/zb(new Gh([,-0]))[1]==ue?function(p){return new Gh(p)}:_2;function G4(p){return function(v){var S=rr(v);return S==z?P_(v):S==Ge?MW(v):AW(v,p(v))}}function zl(p,v,S,D,H,ee,pe,Ee){var Me=v&w;if(!Me&&typeof p!="function")throw new Io(o);var st=D?D.length:0;if(st||(v&=-97,D=H=t),pe=pe===t?pe:Rs(Pn(pe),0),Ee=Ee===t?Ee:Pn(Ee),st-=H?H.length:0,v&P){var ot=D,ft=H;D=H=t}var Lt=Me?t:i2(p),Ht=[p,v,S,D,H,ot,ft,ee,pe,Ee];if(Lt&&OK(Ht,Lt),p=Ht[0],v=Ht[1],S=Ht[2],D=Ht[3],H=Ht[4],Ee=Ht[9]=Ht[9]===t?Me?0:p.length:Rs(Ht[9]-st,0),!Ee&&v&(k|E)&&(v&=-25),!v||v==b)var cn=gK(p,v,S);else v==k||v==E?cn=bK(p,v,Ee):(v==T||v==(b|T))&&!H.length?cn=vK(p,v,S,D):cn=d1.apply(t,Ht);var Ln=Lt?T4:nI;return iI(Ln(cn,Ht),p,v)}function W4(p,v,S,D){return p===t||aa(p,jh[S])&&!wi.call(D,S)?v:p}function q4(p,v,S,D,H,ee){return os(p)&&os(v)&&(ee.set(v,p),o1(p,v,t,q4,ee),ee.delete(v)),p}function wK(p){return Rm(p)?t:p}function K4(p,v,S,D,H,ee){var pe=S&m,Ee=p.length,Me=v.length;if(Ee!=Me&&!(pe&&Me>Ee))return!1;var st=ee.get(p),ot=ee.get(v);if(st&&ot)return st==v&&ot==p;var ft=-1,Lt=!0,Ht=S&g?new hu:t;for(ee.set(p,v),ee.set(v,p);++ft<Ee;){var cn=p[ft],Ln=v[ft];if(D)var dn=pe?D(Ln,cn,ft,v,p,ee):D(cn,Ln,ft,p,v,ee);if(dn!==t){if(dn)continue;Lt=!1;break}if(Ht){if(!E_(v,function(Vn,Hn){if(!bm(Ht,Hn)&&(cn===Vn||H(cn,Vn,S,D,ee)))return Ht.push(Hn)})){Lt=!1;break}}else if(!(cn===Ln||H(cn,Ln,S,D,ee))){Lt=!1;break}}return ee.delete(p),ee.delete(v),Lt}function xK(p,v,S,D,H,ee,pe){switch(S){case rt:if(p.byteLength!=v.byteLength||p.byteOffset!=v.byteOffset)return!1;p=p.buffer,v=v.buffer;case Je:return!(p.byteLength!=v.byteLength||!ee(new Kb(p),new Kb(v)));case Se:case ne:case se:return aa(+p,+v);case me:return p.name==v.name&&p.message==v.message;case He:case mt:return p==v+"";case z:var Ee=P_;case Ge:var Me=D&m;if(Ee||(Ee=zb),p.size!=v.size&&!Me)return!1;var st=pe.get(p);if(st)return st==v;D|=g,pe.set(p,v);var ot=K4(Ee(p),Ee(v),D,H,ee,pe);return pe.delete(p),ot;case ut:if(_m)return _m.call(p)==_m.call(v)}return!1}function _K(p,v,S,D,H,ee){var pe=S&m,Ee=t2(p),Me=Ee.length,st=t2(v),ot=st.length;if(Me!=ot&&!pe)return!1;for(var ft=Me;ft--;){var Lt=Ee[ft];if(!(pe?Lt in v:wi.call(v,Lt)))return!1}var Ht=ee.get(p),cn=ee.get(v);if(Ht&&cn)return Ht==v&&cn==p;var Ln=!0;ee.set(p,v),ee.set(v,p);for(var dn=pe;++ft<Me;){Lt=Ee[ft];var Vn=p[Lt],Hn=v[Lt];if(D)var ao=pe?D(Hn,Vn,Lt,v,p,ee):D(Vn,Hn,Lt,p,v,ee);if(!(ao===t?Vn===Hn||H(Vn,Hn,S,D,ee):ao)){Ln=!1;break}dn||(dn=Lt=="constructor")}if(Ln&&!dn){var vr=p.constructor,lo=v.constructor;vr!=lo&&"constructor"in p&&"constructor"in v&&!(typeof vr=="function"&&vr instanceof vr&&typeof lo=="function"&&lo instanceof lo)&&(Ln=!1)}return ee.delete(p),ee.delete(v),Ln}function Hl(p){return c2(eI(p,t,cI),p+"")}function t2(p){return p4(p,Fs,r2)}function n2(p){return p4(p,Nr,Y4)}var i2=e1?function(p){return e1.get(p)}:_2;function p1(p){for(var v=p.name+"",S=Wh[v],D=wi.call(Wh,v)?S.length:0;D--;){var H=S[D],ee=H.func;if(ee==null||ee==p)return H.name}return v}function Xh(p){var v=wi.call(Y,"placeholder")?Y:p;return v.placeholder}function an(){var p=Y.iteratee||w2;return p=p===w2?b4:p,arguments.length?p(arguments[0],arguments[1]):p}function m1(p,v){var S=p.__data__;return PK(v)?S[typeof v=="string"?"string":"hash"]:S.map}function s2(p){for(var v=Fs(p),S=v.length;S--;){var D=v[S],H=p[D];v[S]=[D,H,Z4(H)]}return v}function mu(p,v){var S=LW(p,v);return g4(S)?S:t}function kK(p){var v=wi.call(p,du),S=p[du];try{p[du]=t;var D=!0}catch(ee){}var H=Wb.call(p);return D&&(v?p[du]=S:delete p[du]),H}var r2=$_?function(p){return p==null?[]:(p=Di(p),jc($_(p),function(v){return t4.call(p,v)}))}:k2,Y4=$_?function(p){for(var v=[];p;)Gc(v,r2(p)),p=Yb(p);return v}:k2,rr=gr;(L_&&rr(new L_(new ArrayBuffer(1)))!=rt||ym&&rr(new ym)!=z||O_&&rr(O_.resolve())!=Ce||Gh&&rr(new Gh)!=Ge||wm&&rr(new wm)!=kt)&&(rr=function(p){var v=gr(p),S=v==ke?p.constructor:t,D=S?gu(S):"";if(D)switch(D){case rq:return rt;case oq:return z;case aq:return Ce;case lq:return Ge;case cq:return kt}return v});function EK(p,v,S){for(var D=-1,H=S.length;++D<H;){var ee=S[D],pe=ee.size;switch(ee.type){case"drop":p+=pe;break;case"dropRight":v-=pe;break;case"take":v=sr(v,p+pe);break;case"takeRight":p=Rs(p,v-pe);break}}return{start:p,end:v}}function TK(p){var v=p.match(tu);return v?v[1].split(Nl):[]}function X4(p,v,S){v=Xc(v,p);for(var D=-1,H=v.length,ee=!1;++D<H;){var pe=Qa(v[D]);if(!(ee=p!=null&&S(p,pe)))break;p=p[pe]}return ee||++D!=H?ee:(H=p==null?0:p.length,!!H&&_1(H)&&jl(pe,H)&&(_n(p)||bu(p)))}function CK(p){var v=p.length,S=new p.constructor(v);return v&&typeof p[0]=="string"&&wi.call(p,"index")&&(S.index=p.index,S.input=p.input),S}function Q4(p){return typeof p.constructor=="function"&&!Im(p)?qh(Yb(p)):{}}function SK(p,v,S){var D=p.constructor;switch(v){case Je:return Z_(p);case Se:case ne:return new D(+p);case rt:return dK(p,S);case Ct:case Pt:case Xt:case mn:case In:case ci:case ri:case wn:case Mn:return L4(p,S);case z:return new D;case se:case mt:return new D(p);case He:return uK(p);case Ge:return new D;case ut:return hK(p)}}function AK(p,v){var S=v.length;if(!S)return p;var D=S-1;return v[D]=(S>1?"& ":"")+v[D],v=v.join(S>2?", ":" "),p.replace(Or,"{\n/* [wrapped with "+v+"] */\n")}function IK(p){return _n(p)||bu(p)||!!(n4&&p&&p[n4])}function jl(p,v){var S=typeof p;return v=v==null?he:v,!!v&&(S=="number"||S!="symbol"&&ae.test(p))&&p>-1&&p%1==0&&p<v}function br(p,v,S){if(!os(S))return!1;var D=typeof v;return(D=="number"?Mr(S)&&jl(v,S.length):D=="string"&&v in S)?aa(S[v],p):!1}function o2(p,v){if(_n(p))return!1;var S=typeof p;return S=="number"||S=="symbol"||S=="boolean"||p==null||oo(p)?!0:qa.test(p)||!nr.test(p)||v!=null&&p in Di(v)}function PK(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}function a2(p){var v=p1(p),S=Y[v];if(typeof S!="function"||!(v in Un.prototype))return!1;if(p===S)return!0;var D=i2(S);return!!D&&p===D[0]}function RK(p){return!!Z5&&Z5 in p}var $K=jb?Gl:E2;function Im(p){var v=p&&p.constructor,S=typeof v=="function"&&v.prototype||jh;return p===S}function Z4(p){return p===p&&!os(p)}function J4(p,v){return function(S){return S==null?!1:S[p]===v&&(v!==t||p in Di(S))}}function LK(p){var v=w1(p,function(D){return S.size===c&&S.clear(),D}),S=v.cache;return v}function OK(p,v){var S=p[1],D=v[1],H=S|D,ee=H<(b|w|C),pe=D==C&&S==k||D==C&&S==A&&p[7].length<=v[8]||D==(C|A)&&v[7].length<=v[8]&&S==k;if(!(ee||pe))return p;D&b&&(p[2]=v[2],H|=S&b?0:x);var Ee=v[3];if(Ee){var Me=p[3];p[3]=Me?D4(Me,Ee,v[4]):Ee,p[4]=Me?Wc(p[3],d):v[4]}return Ee=v[5],Ee&&(Me=p[5],p[5]=Me?M4(Me,Ee,v[6]):Ee,p[6]=Me?Wc(p[5],d):v[6]),Ee=v[7],Ee&&(p[7]=Ee),D&C&&(p[8]=p[8]==null?v[8]:sr(p[8],v[8])),p[9]==null&&(p[9]=v[9]),p[0]=v[0],p[1]=H,p}function DK(p){var v=[];if(p!=null)for(var S in Di(p))v.push(S);return v}function MK(p){return Wb.call(p)}function eI(p,v,S){return v=Rs(v===t?p.length-1:v,0),function(){for(var D=arguments,H=-1,ee=Rs(D.length-v,0),pe=Ke(ee);++H<ee;)pe[H]=D[v+H];H=-1;for(var Ee=Ke(v+1);++H<v;)Ee[H]=D[H];return Ee[v]=S(pe),io(p,this,Ee)}}function tI(p,v){return v.length<2?p:pu(p,$o(v,0,-1))}function NK(p,v){for(var S=p.length,D=sr(v.length,S),H=Dr(p);D--;){var ee=v[D];p[D]=jl(ee,S)?H[ee]:t}return p}function l2(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}var nI=sI(T4),Pm=ZW||function(p,v){return Qs.setTimeout(p,v)},c2=sI(oK);function iI(p,v,S){var D=v+"";return c2(p,AK(D,FK(TK(D),S)))}function sI(p){var v=0,S=0;return function(){var D=nq(),H=G-(D-S);if(S=D,H>0){if(++v>=U)return arguments[0]}else v=0;return p.apply(t,arguments)}}function g1(p,v){var S=-1,D=p.length,H=D-1;for(v=v===t?D:v;++S<v;){var ee=G_(S,H),pe=p[ee];p[ee]=p[S],p[S]=pe}return p.length=v,p}var rI=LK(function(p){var v=[];return p.charCodeAt(0)===46&&v.push(""),p.replace(To,function(S,D,H,ee){v.push(H?ee.replace(su,"$1"):D||S)}),v});function Qa(p){if(typeof p=="string"||oo(p))return p;var v=p+"";return v=="0"&&1/p==-1/0?"-0":v}function gu(p){if(p!=null){try{return Gb.call(p)}catch(v){}try{return p+""}catch(v){}}return""}function FK(p,v){return Ao(de,function(S){var D="_."+S[0];v&S[1]&&!Vb(p,D)&&p.push(D)}),p.sort()}function oI(p){if(p instanceof Un)return p.clone();var v=new Po(p.__wrapped__,p.__chain__);return v.__actions__=Dr(p.__actions__),v.__index__=p.__index__,v.__values__=p.__values__,v}function BK(p,v,S){(S?br(p,v,S):v===t)?v=1:v=Rs(Pn(v),0);var D=p==null?0:p.length;if(!D||v<1)return[];for(var H=0,ee=0,pe=Ke(Zb(D/v));H<D;)pe[ee++]=$o(p,H,H+=v);return pe}function VK(p){for(var v=-1,S=p==null?0:p.length,D=0,H=[];++v<S;){var ee=p[v];ee&&(H[D++]=ee)}return H}function UK(){var p=arguments.length;if(!p)return[];for(var v=Ke(p-1),S=arguments[0],D=p;D--;)v[D-1]=arguments[D];return Gc(_n(S)?Dr(S):[S],Zs(v,1))}var zK=Nn(function(p,v){return vs(p)?Em(p,Zs(v,1,vs,!0)):[]}),HK=Nn(function(p,v){var S=Lo(v);return vs(S)&&(S=t),vs(p)?Em(p,Zs(v,1,vs,!0),an(S,2)):[]}),jK=Nn(function(p,v){var S=Lo(v);return vs(S)&&(S=t),vs(p)?Em(p,Zs(v,1,vs,!0),t,S):[]});function GK(p,v,S){var D=p==null?0:p.length;return D?(v=S||v===t?1:Pn(v),$o(p,v<0?0:v,D)):[]}function WK(p,v,S){var D=p==null?0:p.length;return D?(v=S||v===t?1:Pn(v),v=D-v,$o(p,0,v<0?0:v)):[]}function qK(p,v){return p&&p.length?l1(p,an(v,3),!0,!0):[]}function KK(p,v){return p&&p.length?l1(p,an(v,3),!0):[]}function YK(p,v,S,D){var H=p==null?0:p.length;return H?(S&&typeof S!="number"&&br(p,v,S)&&(S=0,D=H),Uq(p,v,S,D)):[]}function aI(p,v,S){var D=p==null?0:p.length;if(!D)return-1;var H=S==null?0:Pn(S);return H<0&&(H=Rs(D+H,0)),Ub(p,an(v,3),H)}function lI(p,v,S){var D=p==null?0:p.length;if(!D)return-1;var H=D-1;return S!==t&&(H=Pn(S),H=S<0?Rs(D+H,0):sr(H,D-1)),Ub(p,an(v,3),H,!0)}function cI(p){var v=p==null?0:p.length;return v?Zs(p,1):[]}function XK(p){var v=p==null?0:p.length;return v?Zs(p,ue):[]}function QK(p,v){var S=p==null?0:p.length;return S?(v=v===t?1:Pn(v),Zs(p,v)):[]}function ZK(p){for(var v=-1,S=p==null?0:p.length,D={};++v<S;){var H=p[v];D[H[0]]=H[1]}return D}function dI(p){return p&&p.length?p[0]:t}function JK(p,v,S){var D=p==null?0:p.length;if(!D)return-1;var H=S==null?0:Pn(S);return H<0&&(H=Rs(D+H,0)),Vh(p,v,H)}function eY(p){var v=p==null?0:p.length;return v?$o(p,0,-1):[]}var tY=Nn(function(p){var v=Ji(p,X_);return v.length&&v[0]===p[0]?V_(v):[]}),nY=Nn(function(p){var v=Lo(p),S=Ji(p,X_);return v===Lo(S)?v=t:S.pop(),S.length&&S[0]===p[0]?V_(S,an(v,2)):[]}),iY=Nn(function(p){var v=Lo(p),S=Ji(p,X_);return v=typeof v=="function"?v:t,v&&S.pop(),S.length&&S[0]===p[0]?V_(S,t,v):[]});function sY(p,v){return p==null?"":eq.call(p,v)}function Lo(p){var v=p==null?0:p.length;return v?p[v-1]:t}function rY(p,v,S){var D=p==null?0:p.length;if(!D)return-1;var H=D;return S!==t&&(H=Pn(S),H=H<0?Rs(D+H,0):sr(H,D-1)),v===v?FW(p,v,H):Ub(p,j5,H,!0)}function oY(p,v){return p&&p.length?x4(p,Pn(v)):t}var aY=Nn(uI);function uI(p,v){return p&&p.length&&v&&v.length?j_(p,v):p}function lY(p,v,S){return p&&p.length&&v&&v.length?j_(p,v,an(S,2)):p}function cY(p,v,S){return p&&p.length&&v&&v.length?j_(p,v,t,S):p}var dY=Hl(function(p,v){var S=p==null?0:p.length,D=M_(p,v);return E4(p,Ji(v,function(H){return jl(H,S)?+H:H}).sort(O4)),D});function uY(p,v){var S=[];if(!(p&&p.length))return S;var D=-1,H=[],ee=p.length;for(v=an(v,3);++D<ee;){var pe=p[D];v(pe,D,p)&&(S.push(pe),H.push(D))}return E4(p,H),S}function d2(p){return p==null?p:sq.call(p)}function hY(p,v,S){var D=p==null?0:p.length;return D?(S&&typeof S!="number"&&br(p,v,S)?(v=0,S=D):(v=v==null?0:Pn(v),S=S===t?D:Pn(S)),$o(p,v,S)):[]}function fY(p,v){return a1(p,v)}function pY(p,v,S){return q_(p,v,an(S,2))}function mY(p,v){var S=p==null?0:p.length;if(S){var D=a1(p,v);if(D<S&&aa(p[D],v))return D}return-1}function gY(p,v){return a1(p,v,!0)}function bY(p,v,S){return q_(p,v,an(S,2),!0)}function vY(p,v){var S=p==null?0:p.length;if(S){var D=a1(p,v,!0)-1;if(aa(p[D],v))return D}return-1}function yY(p){return p&&p.length?C4(p):[]}function wY(p,v){return p&&p.length?C4(p,an(v,2)):[]}function xY(p){var v=p==null?0:p.length;return v?$o(p,1,v):[]}function _Y(p,v,S){return p&&p.length?(v=S||v===t?1:Pn(v),$o(p,0,v<0?0:v)):[]}function kY(p,v,S){var D=p==null?0:p.length;return D?(v=S||v===t?1:Pn(v),v=D-v,$o(p,v<0?0:v,D)):[]}function EY(p,v){return p&&p.length?l1(p,an(v,3),!1,!0):[]}function TY(p,v){return p&&p.length?l1(p,an(v,3)):[]}var CY=Nn(function(p){return Yc(Zs(p,1,vs,!0))}),SY=Nn(function(p){var v=Lo(p);return vs(v)&&(v=t),Yc(Zs(p,1,vs,!0),an(v,2))}),AY=Nn(function(p){var v=Lo(p);return v=typeof v=="function"?v:t,Yc(Zs(p,1,vs,!0),t,v)});function IY(p){return p&&p.length?Yc(p):[]}function PY(p,v){return p&&p.length?Yc(p,an(v,2)):[]}function RY(p,v){return v=typeof v=="function"?v:t,p&&p.length?Yc(p,t,v):[]}function u2(p){if(!(p&&p.length))return[];var v=0;return p=jc(p,function(S){if(vs(S))return v=Rs(S.length,v),!0}),A_(v,function(S){return Ji(p,T_(S))})}function hI(p,v){if(!(p&&p.length))return[];var S=u2(p);return v==null?S:Ji(S,function(D){return io(v,t,D)})}var $Y=Nn(function(p,v){return vs(p)?Em(p,v):[]}),LY=Nn(function(p){return Y_(jc(p,vs))}),OY=Nn(function(p){var v=Lo(p);return vs(v)&&(v=t),Y_(jc(p,vs),an(v,2))}),DY=Nn(function(p){var v=Lo(p);return v=typeof v=="function"?v:t,Y_(jc(p,vs),t,v)}),MY=Nn(u2);function NY(p,v){return P4(p||[],v||[],km)}function FY(p,v){return P4(p||[],v||[],Sm)}var BY=Nn(function(p){var v=p.length,S=v>1?p[v-1]:t;return S=typeof S=="function"?(p.pop(),S):t,hI(p,S)});function fI(p){var v=Y(p);return v.__chain__=!0,v}function VY(p,v){return v(p),p}function b1(p,v){return v(p)}var UY=Hl(function(p){var v=p.length,S=v?p[0]:0,D=this.__wrapped__,H=function(ee){return M_(ee,p)};return v>1||this.__actions__.length||!(D instanceof Un)||!jl(S)?this.thru(H):(D=D.slice(S,+S+(v?1:0)),D.__actions__.push({func:b1,args:[H],thisArg:t}),new Po(D,this.__chain__).thru(function(ee){return v&&!ee.length&&ee.push(t),ee}))});function zY(){return fI(this)}function HY(){return new Po(this.value(),this.__chain__)}function jY(){this.__values__===t&&(this.__values__=SI(this.value()));var p=this.__index__>=this.__values__.length,v=p?t:this.__values__[this.__index__++];return{done:p,value:v}}function GY(){return this}function WY(p){for(var v,S=this;S instanceof n1;){var D=oI(S);D.__index__=0,D.__values__=t,v?H.__wrapped__=D:v=D;var H=D;S=S.__wrapped__}return H.__wrapped__=p,v}function qY(){var p=this.__wrapped__;if(p instanceof Un){var v=p;return this.__actions__.length&&(v=new Un(this)),v=v.reverse(),v.__actions__.push({func:b1,args:[d2],thisArg:t}),new Po(v,this.__chain__)}return this.thru(d2)}function KY(){return I4(this.__wrapped__,this.__actions__)}var YY=c1(function(p,v,S){wi.call(p,S)?++p[S]:Ul(p,S,1)});function XY(p,v,S){var D=_n(p)?z5:Vq;return S&&br(p,v,S)&&(v=t),D(p,an(v,3))}function QY(p,v){var S=_n(p)?jc:h4;return S(p,an(v,3))}var ZY=V4(aI),JY=V4(lI);function eX(p,v){return Zs(v1(p,v),1)}function tX(p,v){return Zs(v1(p,v),ue)}function nX(p,v,S){return S=S===t?1:Pn(S),Zs(v1(p,v),S)}function pI(p,v){var S=_n(p)?Ao:Kc;return S(p,an(v,3))}function mI(p,v){var S=_n(p)?xW:u4;return S(p,an(v,3))}var iX=c1(function(p,v,S){wi.call(p,S)?p[S].push(v):Ul(p,S,[v])});function sX(p,v,S,D){p=Mr(p)?p:Zh(p),S=S&&!D?Pn(S):0;var H=p.length;return S<0&&(S=Rs(H+S,0)),k1(p)?S<=H&&p.indexOf(v,S)>-1:!!H&&Vh(p,v,S)>-1}var rX=Nn(function(p,v,S){var D=-1,H=typeof v=="function",ee=Mr(p)?Ke(p.length):[];return Kc(p,function(pe){ee[++D]=H?io(v,pe,S):Tm(pe,v,S)}),ee}),oX=c1(function(p,v,S){Ul(p,S,v)});function v1(p,v){var S=_n(p)?Ji:v4;return S(p,an(v,3))}function aX(p,v,S,D){return p==null?[]:(_n(v)||(v=v==null?[]:[v]),S=D?t:S,_n(S)||(S=S==null?[]:[S]),_4(p,v,S))}var lX=c1(function(p,v,S){p[S?0:1].push(v)},function(){return[[],[]]});function cX(p,v,S){var D=_n(p)?k_:W5,H=arguments.length<3;return D(p,an(v,4),S,H,Kc)}function dX(p,v,S){var D=_n(p)?_W:W5,H=arguments.length<3;return D(p,an(v,4),S,H,u4)}function uX(p,v){var S=_n(p)?jc:h4;return S(p,x1(an(v,3)))}function hX(p){var v=_n(p)?a4:sK;return v(p)}function fX(p,v,S){(S?br(p,v,S):v===t)?v=1:v=Pn(v);var D=_n(p)?Dq:rK;return D(p,v)}function pX(p){var v=_n(p)?Mq:aK;return v(p)}function mX(p){if(p==null)return 0;if(Mr(p))return k1(p)?zh(p):p.length;var v=rr(p);return v==z||v==Ge?p.size:z_(p).length}function gX(p,v,S){var D=_n(p)?E_:lK;return S&&br(p,v,S)&&(v=t),D(p,an(v,3))}var bX=Nn(function(p,v){if(p==null)return[];var S=v.length;return S>1&&br(p,v[0],v[1])?v=[]:S>2&&br(v[0],v[1],v[2])&&(v=[v[0]]),_4(p,Zs(v,1),[])}),y1=QW||function(){return Qs.Date.now()};function vX(p,v){if(typeof v!="function")throw new Io(o);return p=Pn(p),function(){if(--p<1)return v.apply(this,arguments)}}function gI(p,v,S){return v=S?t:v,v=p&&v==null?p.length:v,zl(p,C,t,t,t,t,v)}function bI(p,v){var S;if(typeof v!="function")throw new Io(o);return p=Pn(p),function(){return--p>0&&(S=v.apply(this,arguments)),p<=1&&(v=t),S}}var h2=Nn(function(p,v,S){var D=b;if(S.length){var H=Wc(S,Xh(h2));D|=T}return zl(p,D,v,S,H)}),vI=Nn(function(p,v,S){var D=b|w;if(S.length){var H=Wc(S,Xh(vI));D|=T}return zl(v,D,p,S,H)});function yI(p,v,S){v=S?t:v;var D=zl(p,k,t,t,t,t,t,v);return D.placeholder=yI.placeholder,D}function wI(p,v,S){v=S?t:v;var D=zl(p,E,t,t,t,t,t,v);return D.placeholder=wI.placeholder,D}function xI(p,v,S){var D,H,ee,pe,Ee,Me,st=0,ot=!1,ft=!1,Lt=!0;if(typeof p!="function")throw new Io(o);v=Oo(v)||0,os(S)&&(ot=!!S.leading,ft="maxWait"in S,ee=ft?Rs(Oo(S.maxWait)||0,v):ee,Lt="trailing"in S?!!S.trailing:Lt);function Ht(ys){var la=D,ql=H;return D=H=t,st=ys,pe=p.apply(ql,la),pe}function cn(ys){return st=ys,Ee=Pm(Vn,v),ot?Ht(ys):pe}function Ln(ys){var la=ys-Me,ql=ys-st,VI=v-la;return ft?sr(VI,ee-ql):VI}function dn(ys){var la=ys-Me,ql=ys-st;return Me===t||la>=v||la<0||ft&&ql>=ee}function Vn(){var ys=y1();if(dn(ys))return Hn(ys);Ee=Pm(Vn,Ln(ys))}function Hn(ys){return Ee=t,Lt&&D?Ht(ys):(D=H=t,pe)}function ao(){Ee!==t&&R4(Ee),st=0,D=Me=H=Ee=t}function vr(){return Ee===t?pe:Hn(y1())}function lo(){var ys=y1(),la=dn(ys);if(D=arguments,H=this,Me=ys,la){if(Ee===t)return cn(Me);if(ft)return R4(Ee),Ee=Pm(Vn,v),Ht(Me)}return Ee===t&&(Ee=Pm(Vn,v)),pe}return lo.cancel=ao,lo.flush=vr,lo}var yX=Nn(function(p,v){return d4(p,1,v)}),wX=Nn(function(p,v,S){return d4(p,Oo(v)||0,S)});function xX(p){return zl(p,R)}function w1(p,v){if(typeof p!="function"||v!=null&&typeof v!="function")throw new Io(o);var S=function(){var D=arguments,H=v?v.apply(this,D):D[0],ee=S.cache;if(ee.has(H))return ee.get(H);var pe=p.apply(this,D);return S.cache=ee.set(H,pe)||ee,pe};return S.cache=new(w1.Cache||Vl),S}w1.Cache=Vl;function x1(p){if(typeof p!="function")throw new Io(o);return function(){var v=arguments;switch(v.length){case 0:return!p.call(this);case 1:return!p.call(this,v[0]);case 2:return!p.call(this,v[0],v[1]);case 3:return!p.call(this,v[0],v[1],v[2])}return!p.apply(this,v)}}function _X(p){return bI(2,p)}var kX=cK(function(p,v){v=v.length==1&&_n(v[0])?Ji(v[0],so(an())):Ji(Zs(v,1),so(an()));var S=v.length;return Nn(function(D){for(var H=-1,ee=sr(D.length,S);++H<ee;)D[H]=v[H].call(this,D[H]);return io(p,this,D)})}),f2=Nn(function(p,v){var S=Wc(v,Xh(f2));return zl(p,T,t,v,S)}),_I=Nn(function(p,v){var S=Wc(v,Xh(_I));return zl(p,P,t,v,S)}),EX=Hl(function(p,v){return zl(p,A,t,t,t,v)});function TX(p,v){if(typeof p!="function")throw new Io(o);return v=v===t?v:Pn(v),Nn(p,v)}function CX(p,v){if(typeof p!="function")throw new Io(o);return v=v==null?0:Rs(Pn(v),0),Nn(function(S){var D=S[v],H=Qc(S,0,v);return D&&Gc(H,D),io(p,this,H)})}function SX(p,v,S){var D=!0,H=!0;if(typeof p!="function")throw new Io(o);return os(S)&&(D="leading"in S?!!S.leading:D,H="trailing"in S?!!S.trailing:H),xI(p,v,{leading:D,maxWait:v,trailing:H})}function AX(p){return gI(p,1)}function IX(p,v){return f2(Q_(v),p)}function PX(){if(!arguments.length)return[];var p=arguments[0];return _n(p)?p:[p]}function RX(p){return Ro(p,f)}function $X(p,v){return v=typeof v=="function"?v:t,Ro(p,f,v)}function LX(p){return Ro(p,u|f)}function OX(p,v){return v=typeof v=="function"?v:t,Ro(p,u|f,v)}function DX(p,v){return v==null||c4(p,v,Fs(v))}function aa(p,v){return p===v||p!==p&&v!==v}var MX=f1(B_),NX=f1(function(p,v){return p>=v}),bu=m4(function(){return arguments}())?m4:function(p){return fs(p)&&wi.call(p,"callee")&&!t4.call(p,"callee")},_n=Ke.isArray,FX=M5?so(M5):Wq;function Mr(p){return p!=null&&_1(p.length)&&!Gl(p)}function vs(p){return fs(p)&&Mr(p)}function BX(p){return p===!0||p===!1||fs(p)&&gr(p)==Se}var Zc=JW||E2,VX=N5?so(N5):qq;function UX(p){return fs(p)&&p.nodeType===1&&!Rm(p)}function zX(p){if(p==null)return!0;if(Mr(p)&&(_n(p)||typeof p=="string"||typeof p.splice=="function"||Zc(p)||Qh(p)||bu(p)))return!p.length;var v=rr(p);if(v==z||v==Ge)return!p.size;if(Im(p))return!z_(p).length;for(var S in p)if(wi.call(p,S))return!1;return!0}function HX(p,v){return Cm(p,v)}function jX(p,v,S){S=typeof S=="function"?S:t;var D=S?S(p,v):t;return D===t?Cm(p,v,t,S):!!D}function p2(p){if(!fs(p))return!1;var v=gr(p);return v==me||v==ie||typeof p.message=="string"&&typeof p.name=="string"&&!Rm(p)}function GX(p){return typeof p=="number"&&i4(p)}function Gl(p){if(!os(p))return!1;var v=gr(p);return v==V||v==F||v==le||v==ge}function kI(p){return typeof p=="number"&&p==Pn(p)}function _1(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=he}function os(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}function fs(p){return p!=null&&typeof p=="object"}var EI=F5?so(F5):Yq;function WX(p,v){return p===v||U_(p,v,s2(v))}function qX(p,v,S){return S=typeof S=="function"?S:t,U_(p,v,s2(v),S)}function KX(p){return TI(p)&&p!=+p}function YX(p){if($K(p))throw new xn(r);return g4(p)}function XX(p){return p===null}function QX(p){return p==null}function TI(p){return typeof p=="number"||fs(p)&&gr(p)==se}function Rm(p){if(!fs(p)||gr(p)!=ke)return!1;var v=Yb(p);if(v===null)return!0;var S=wi.call(v,"constructor")&&v.constructor;return typeof S=="function"&&S instanceof S&&Gb.call(S)==qW}var m2=B5?so(B5):Xq;function ZX(p){return kI(p)&&p>=-9007199254740991&&p<=he}var CI=V5?so(V5):Qq;function k1(p){return typeof p=="string"||!_n(p)&&fs(p)&&gr(p)==mt}function oo(p){return typeof p=="symbol"||fs(p)&&gr(p)==ut}var Qh=U5?so(U5):Zq;function JX(p){return p===t}function eQ(p){return fs(p)&&rr(p)==kt}function tQ(p){return fs(p)&&gr(p)==It}var nQ=f1(H_),iQ=f1(function(p,v){return p<=v});function SI(p){if(!p)return[];if(Mr(p))return k1(p)?ra(p):Dr(p);if(vm&&p[vm])return DW(p[vm]());var v=rr(p),S=v==z?P_:v==Ge?zb:Zh;return S(p)}function Wl(p){if(!p)return p===0?p:0;if(p=Oo(p),p===ue||p===-1/0){var v=p<0?-1:1;return v*Ie}return p===p?p:0}function Pn(p){var v=Wl(p),S=v%1;return v===v?S?v-S:v:0}function AI(p){return p?fu(Pn(p),0,Be):0}function Oo(p){if(typeof p=="number")return p;if(oo(p))return xe;if(os(p)){var v=typeof p.valueOf=="function"?p.valueOf():p;p=os(v)?v+"":v}if(typeof p!="string")return p===0?p:+p;p=q5(p);var S=Fl.test(p);return S||Nh.test(p)?vW(p.slice(2),S?2:8):ou.test(p)?xe:+p}function II(p){return Xa(p,Nr(p))}function sQ(p){return p?fu(Pn(p),-9007199254740991,he):p===0?p:0}function gi(p){return p==null?"":ro(p)}var rQ=Kh(function(p,v){if(Im(v)||Mr(v)){Xa(v,Fs(v),p);return}for(var S in v)wi.call(v,S)&&km(p,S,v[S])}),PI=Kh(function(p,v){Xa(v,Nr(v),p)}),E1=Kh(function(p,v,S,D){Xa(v,Nr(v),p,D)}),oQ=Kh(function(p,v,S,D){Xa(v,Fs(v),p,D)}),aQ=Hl(M_);function lQ(p,v){var S=qh(p);return v==null?S:l4(S,v)}var cQ=Nn(function(p,v){p=Di(p);var S=-1,D=v.length,H=D>2?v[2]:t;for(H&&br(v[0],v[1],H)&&(D=1);++S<D;)for(var ee=v[S],pe=Nr(ee),Ee=-1,Me=pe.length;++Ee<Me;){var st=pe[Ee],ot=p[st];(ot===t||aa(ot,jh[st])&&!wi.call(p,st))&&(p[st]=ee[st])}return p}),dQ=Nn(function(p){return p.push(t,q4),io(RI,t,p)});function uQ(p,v){return H5(p,an(v,3),Ya)}function hQ(p,v){return H5(p,an(v,3),F_)}function fQ(p,v){return p==null?p:N_(p,an(v,3),Nr)}function pQ(p,v){return p==null?p:f4(p,an(v,3),Nr)}function mQ(p,v){return p&&Ya(p,an(v,3))}function gQ(p,v){return p&&F_(p,an(v,3))}function bQ(p){return p==null?[]:r1(p,Fs(p))}function vQ(p){return p==null?[]:r1(p,Nr(p))}function g2(p,v,S){var D=p==null?t:pu(p,v);return D===t?S:D}function yQ(p,v){return p!=null&&X4(p,v,zq)}function b2(p,v){return p!=null&&X4(p,v,Hq)}var wQ=z4(function(p,v,S){v!=null&&typeof v.toString!="function"&&(v=Wb.call(v)),p[v]=S},y2(Fr)),xQ=z4(function(p,v,S){v!=null&&typeof v.toString!="function"&&(v=Wb.call(v)),wi.call(p,v)?p[v].push(S):p[v]=[S]},an),_Q=Nn(Tm);function Fs(p){return Mr(p)?o4(p):z_(p)}function Nr(p){return Mr(p)?o4(p,!0):Jq(p)}function kQ(p,v){var S={};return v=an(v,3),Ya(p,function(D,H,ee){Ul(S,v(D,H,ee),D)}),S}function EQ(p,v){var S={};return v=an(v,3),Ya(p,function(D,H,ee){Ul(S,H,v(D,H,ee))}),S}var TQ=Kh(function(p,v,S){o1(p,v,S)}),RI=Kh(function(p,v,S,D){o1(p,v,S,D)}),CQ=Hl(function(p,v){var S={};if(p==null)return S;var D=!1;v=Ji(v,function(ee){return ee=Xc(ee,p),D||(D=ee.length>1),ee}),Xa(p,n2(p),S),D&&(S=Ro(S,u|h|f,wK));for(var H=v.length;H--;)K_(S,v[H]);return S});function SQ(p,v){return $I(p,x1(an(v)))}var AQ=Hl(function(p,v){return p==null?{}:tK(p,v)});function $I(p,v){if(p==null)return{};var S=Ji(n2(p),function(D){return[D]});return v=an(v),k4(p,S,function(D,H){return v(D,H[0])})}function IQ(p,v,S){v=Xc(v,p);var D=-1,H=v.length;for(H||(H=1,p=t);++D<H;){var ee=p==null?t:p[Qa(v[D])];ee===t&&(D=H,ee=S),p=Gl(ee)?ee.call(p):ee}return p}function PQ(p,v,S){return p==null?p:Sm(p,v,S)}function RQ(p,v,S,D){return D=typeof D=="function"?D:t,p==null?p:Sm(p,v,S,D)}var LI=G4(Fs),OI=G4(Nr);function $Q(p,v,S){var D=_n(p),H=D||Zc(p)||Qh(p);if(v=an(v,4),S==null){var ee=p&&p.constructor;H?S=D?new ee:[]:os(p)?S=Gl(ee)?qh(Yb(p)):{}:S={}}return(H?Ao:Ya)(p,function(pe,Ee,Me){return v(S,pe,Ee,Me)}),S}function LQ(p,v){return p==null?!0:K_(p,v)}function OQ(p,v,S){return p==null?p:A4(p,v,Q_(S))}function DQ(p,v,S,D){return D=typeof D=="function"?D:t,p==null?p:A4(p,v,Q_(S),D)}function Zh(p){return p==null?[]:I_(p,Fs(p))}function MQ(p){return p==null?[]:I_(p,Nr(p))}function NQ(p,v,S){return S===t&&(S=v,v=t),S!==t&&(S=Oo(S),S=S===S?S:0),v!==t&&(v=Oo(v),v=v===v?v:0),fu(Oo(p),v,S)}function FQ(p,v,S){return v=Wl(v),S===t?(S=v,v=0):S=Wl(S),p=Oo(p),jq(p,v,S)}function BQ(p,v,S){if(S&&typeof S!="boolean"&&br(p,v,S)&&(v=S=t),S===t&&(typeof v=="boolean"?(S=v,v=t):typeof p=="boolean"&&(S=p,p=t)),p===t&&v===t?(p=0,v=1):(p=Wl(p),v===t?(v=p,p=0):v=Wl(v)),p>v){var D=p;p=v,v=D}if(S||p%1||v%1){var H=s4();return sr(p+H*(v-p+bW("1e-"+((H+"").length-1))),v)}return G_(p,v)}var VQ=Yh(function(p,v,S){return v=v.toLowerCase(),p+(S?DI(v):v)});function DI(p){return v2(gi(p).toLowerCase())}function MI(p){return p=gi(p),p&&p.replace(Ye,PW).replace(aW,"")}function UQ(p,v,S){p=gi(p),v=ro(v);var D=p.length;S=S===t?D:fu(Pn(S),0,D);var H=S;return S-=v.length,S>=0&&p.slice(S,H)==v}function zQ(p){return p=gi(p),p&&ja.test(p)?p.replace(to,RW):p}function HQ(p){return p=gi(p),p&&Co.test(p)?p.replace(Ts,"\\$&"):p}var jQ=Yh(function(p,v,S){return p+(S?"-":"")+v.toLowerCase()}),GQ=Yh(function(p,v,S){return p+(S?" ":"")+v.toLowerCase()}),WQ=B4("toLowerCase");function qQ(p,v,S){p=gi(p),v=Pn(v);var D=v?zh(p):0;if(!v||D>=v)return p;var H=(v-D)/2;return h1(Jb(H),S)+p+h1(Zb(H),S)}function KQ(p,v,S){p=gi(p),v=Pn(v);var D=v?zh(p):0;return v&&D<v?p+h1(v-D,S):p}function YQ(p,v,S){p=gi(p),v=Pn(v);var D=v?zh(p):0;return v&&D<v?h1(v-D,S)+p:p}function XQ(p,v,S){return S||v==null?v=0:v&&(v=+v),iq(gi(p).replace(Jt,""),v||0)}function QQ(p,v,S){return(S?br(p,v,S):v===t)?v=1:v=Pn(v),W_(gi(p),v)}function ZQ(){var p=arguments,v=gi(p[0]);return p.length<3?v:v.replace(p[1],p[2])}var JQ=Yh(function(p,v,S){return p+(S?"_":"")+v.toLowerCase()});function eZ(p,v,S){return S&&typeof S!="number"&&br(p,v,S)&&(v=S=t),S=S===t?Be:S>>>0,S?(p=gi(p),p&&(typeof v=="string"||v!=null&&!m2(v))&&(v=ro(v),!v&&Uh(p))?Qc(ra(p),0,S):p.split(v,S)):[]}var tZ=Yh(function(p,v,S){return p+(S?" ":"")+v2(v)});function nZ(p,v,S){return p=gi(p),S=S==null?0:fu(Pn(S),0,p.length),v=ro(v),p.slice(S,S+v.length)==v}function iZ(p,v,S){var D=Y.templateSettings;S&&br(p,v,S)&&(v=t),p=gi(p),v=E1({},v,D,W4);var H=E1({},v.imports,D.imports,W4),ee=Fs(H),pe=I_(H,ee),Ee,Me,st=0,ot=v.interpolate||vt,ft="__p += '",Lt=R_((v.escape||vt).source+"|"+ot.source+"|"+(ot===sa?ru:vt).source+"|"+(v.evaluate||vt).source+"|$","g"),Ht="//# sourceURL="+(wi.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hW+"]")+"\n";p.replace(Lt,function(dn,Vn,Hn,ao,vr,lo){return Hn||(Hn=ao),ft+=p.slice(st,lo).replace(Ft,$W),Vn&&(Ee=!0,ft+="' +\n__e("+Vn+") +\n'"),vr&&(Me=!0,ft+="';\n"+vr+";\n__p += '"),Hn&&(ft+="' +\n((__t = ("+Hn+")) == null ? '' : __t) +\n'"),st=lo+dn.length,dn}),ft+="';\n";var cn=wi.call(v,"variable")&&v.variable;if(!cn)ft="with (obj) {\n"+ft+"\n}\n";else if(iu.test(cn))throw new xn(a);ft=(Me?ft.replace(Oi,""):ft).replace($r,"$1").replace(us,"$1;"),ft="function("+(cn||"obj")+") {\n"+(cn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Ee?", __e = _.escape":"")+(Me?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ft+"return __p\n}";var Ln=FI(function(){return di(ee,Ht+"return "+ft).apply(t,pe)});if(Ln.source=ft,p2(Ln))throw Ln;return Ln}function sZ(p){return gi(p).toLowerCase()}function rZ(p){return gi(p).toUpperCase()}function oZ(p,v,S){if(p=gi(p),p&&(S||v===t))return q5(p);if(!p||!(v=ro(v)))return p;var D=ra(p),H=ra(v),ee=K5(D,H),pe=Y5(D,H)+1;return Qc(D,ee,pe).join("")}function aZ(p,v,S){if(p=gi(p),p&&(S||v===t))return p.slice(0,Q5(p)+1);if(!p||!(v=ro(v)))return p;var D=ra(p),H=Y5(D,ra(v))+1;return Qc(D,0,H).join("")}function lZ(p,v,S){if(p=gi(p),p&&(S||v===t))return p.replace(Jt,"");if(!p||!(v=ro(v)))return p;var D=ra(p),H=K5(D,ra(v));return Qc(D,H).join("")}function cZ(p,v){var S=M,D=N;if(os(v)){var H="separator"in v?v.separator:H;S="length"in v?Pn(v.length):S,D="omission"in v?ro(v.omission):D}p=gi(p);var ee=p.length;if(Uh(p)){var pe=ra(p);ee=pe.length}if(S>=ee)return p;var Ee=S-zh(D);if(Ee<1)return D;var Me=pe?Qc(pe,0,Ee).join(""):p.slice(0,Ee);if(H===t)return Me+D;if(pe&&(Ee+=Me.length-Ee),m2(H)){if(p.slice(Ee).search(H)){var st,ot=Me;for(H.global||(H=R_(H.source,gi(Ka.exec(H))+"g")),H.lastIndex=0;st=H.exec(ot);)var ft=st.index;Me=Me.slice(0,ft===t?Ee:ft)}}else if(p.indexOf(ro(H),Ee)!=Ee){var Lt=Me.lastIndexOf(H);Lt>-1&&(Me=Me.slice(0,Lt))}return Me+D}function dZ(p){return p=gi(p),p&&no.test(p)?p.replace(Lr,BW):p}var uZ=Yh(function(p,v,S){return p+(S?" ":"")+v.toUpperCase()}),v2=B4("toUpperCase");function NI(p,v,S){return p=gi(p),v=S?t:v,v===t?OW(p)?zW(p):TW(p):p.match(v)||[]}var FI=Nn(function(p,v){try{return io(p,t,v)}catch(S){return p2(S)?S:new xn(S)}}),hZ=Hl(function(p,v){return Ao(v,function(S){S=Qa(S),Ul(p,S,h2(p[S],p))}),p});function fZ(p){var v=p==null?0:p.length,S=an();return p=v?Ji(p,function(D){if(typeof D[1]!="function")throw new Io(o);return[S(D[0]),D[1]]}):[],Nn(function(D){for(var H=-1;++H<v;){var ee=p[H];if(io(ee[0],this,D))return io(ee[1],this,D)}})}function pZ(p){return Bq(Ro(p,u))}function y2(p){return function(){return p}}function mZ(p,v){return p==null||p!==p?v:p}var gZ=U4(),bZ=U4(!0);function Fr(p){return p}function w2(p){return b4(typeof p=="function"?p:Ro(p,u))}function vZ(p){return y4(Ro(p,u))}function yZ(p,v){return w4(p,Ro(v,u))}var wZ=Nn(function(p,v){return function(S){return Tm(S,p,v)}}),xZ=Nn(function(p,v){return function(S){return Tm(p,S,v)}});function x2(p,v,S){var D=Fs(v),H=r1(v,D);S==null&&!(os(v)&&(H.length||!D.length))&&(S=v,v=p,p=this,H=r1(v,Fs(v)));var ee=!(os(S)&&"chain"in S)||!!S.chain,pe=Gl(p);return Ao(H,function(Ee){var Me=v[Ee];p[Ee]=Me,pe&&(p.prototype[Ee]=function(){var st=this.__chain__;if(ee||st){var ot=p(this.__wrapped__),ft=ot.__actions__=Dr(this.__actions__);return ft.push({func:Me,args:arguments,thisArg:p}),ot.__chain__=st,ot}return Me.apply(p,Gc([this.value()],arguments))})}),p}function _Z(){return Qs._===this&&(Qs._=KW),this}function _2(){}function kZ(p){return p=Pn(p),Nn(function(v){return x4(v,p)})}var EZ=J_(Ji),TZ=J_(z5),CZ=J_(E_);function BI(p){return o2(p)?T_(Qa(p)):nK(p)}function SZ(p){return function(v){return p==null?t:pu(p,v)}}var AZ=H4(),IZ=H4(!0);function k2(){return[]}function E2(){return!1}function PZ(){return{}}function RZ(){return""}function $Z(){return!0}function LZ(p,v){if(p=Pn(p),p<1||p>he)return[];var S=Be,D=sr(p,Be);v=an(v),p-=Be;for(var H=A_(D,v);++S<p;)v(S);return H}function OZ(p){return _n(p)?Ji(p,Qa):oo(p)?[p]:Dr(rI(gi(p)))}function DZ(p){var v=++WW;return gi(p)+v}var MZ=u1(function(p,v){return p+v},0),NZ=e2("ceil"),FZ=u1(function(p,v){return p/v},1),BZ=e2("floor");function VZ(p){return p&&p.length?s1(p,Fr,B_):t}function UZ(p,v){return p&&p.length?s1(p,an(v,2),B_):t}function zZ(p){return G5(p,Fr)}function HZ(p,v){return G5(p,an(v,2))}function jZ(p){return p&&p.length?s1(p,Fr,H_):t}function GZ(p,v){return p&&p.length?s1(p,an(v,2),H_):t}var WZ=u1(function(p,v){return p*v},1),qZ=e2("round"),KZ=u1(function(p,v){return p-v},0);function YZ(p){return p&&p.length?S_(p,Fr):0}function XZ(p,v){return p&&p.length?S_(p,an(v,2)):0}return Y.after=vX,Y.ary=gI,Y.assign=rQ,Y.assignIn=PI,Y.assignInWith=E1,Y.assignWith=oQ,Y.at=aQ,Y.before=bI,Y.bind=h2,Y.bindAll=hZ,Y.bindKey=vI,Y.castArray=PX,Y.chain=fI,Y.chunk=BK,Y.compact=VK,Y.concat=UK,Y.cond=fZ,Y.conforms=pZ,Y.constant=y2,Y.countBy=YY,Y.create=lQ,Y.curry=yI,Y.curryRight=wI,Y.debounce=xI,Y.defaults=cQ,Y.defaultsDeep=dQ,Y.defer=yX,Y.delay=wX,Y.difference=zK,Y.differenceBy=HK,Y.differenceWith=jK,Y.drop=GK,Y.dropRight=WK,Y.dropRightWhile=qK,Y.dropWhile=KK,Y.fill=YK,Y.filter=QY,Y.flatMap=eX,Y.flatMapDeep=tX,Y.flatMapDepth=nX,Y.flatten=cI,Y.flattenDeep=XK,Y.flattenDepth=QK,Y.flip=xX,Y.flow=gZ,Y.flowRight=bZ,Y.fromPairs=ZK,Y.functions=bQ,Y.functionsIn=vQ,Y.groupBy=iX,Y.initial=eY,Y.intersection=tY,Y.intersectionBy=nY,Y.intersectionWith=iY,Y.invert=wQ,Y.invertBy=xQ,Y.invokeMap=rX,Y.iteratee=w2,Y.keyBy=oX,Y.keys=Fs,Y.keysIn=Nr,Y.map=v1,Y.mapKeys=kQ,Y.mapValues=EQ,Y.matches=vZ,Y.matchesProperty=yZ,Y.memoize=w1,Y.merge=TQ,Y.mergeWith=RI,Y.method=wZ,Y.methodOf=xZ,Y.mixin=x2,Y.negate=x1,Y.nthArg=kZ,Y.omit=CQ,Y.omitBy=SQ,Y.once=_X,Y.orderBy=aX,Y.over=EZ,Y.overArgs=kX,Y.overEvery=TZ,Y.overSome=CZ,Y.partial=f2,Y.partialRight=_I,Y.partition=lX,Y.pick=AQ,Y.pickBy=$I,Y.property=BI,Y.propertyOf=SZ,Y.pull=aY,Y.pullAll=uI,Y.pullAllBy=lY,Y.pullAllWith=cY,Y.pullAt=dY,Y.range=AZ,Y.rangeRight=IZ,Y.rearg=EX,Y.reject=uX,Y.remove=uY,Y.rest=TX,Y.reverse=d2,Y.sampleSize=fX,Y.set=PQ,Y.setWith=RQ,Y.shuffle=pX,Y.slice=hY,Y.sortBy=bX,Y.sortedUniq=yY,Y.sortedUniqBy=wY,Y.split=eZ,Y.spread=CX,Y.tail=xY,Y.take=_Y,Y.takeRight=kY,Y.takeRightWhile=EY,Y.takeWhile=TY,Y.tap=VY,Y.throttle=SX,Y.thru=b1,Y.toArray=SI,Y.toPairs=LI,Y.toPairsIn=OI,Y.toPath=OZ,Y.toPlainObject=II,Y.transform=$Q,Y.unary=AX,Y.union=CY,Y.unionBy=SY,Y.unionWith=AY,Y.uniq=IY,Y.uniqBy=PY,Y.uniqWith=RY,Y.unset=LQ,Y.unzip=u2,Y.unzipWith=hI,Y.update=OQ,Y.updateWith=DQ,Y.values=Zh,Y.valuesIn=MQ,Y.without=$Y,Y.words=NI,Y.wrap=IX,Y.xor=LY,Y.xorBy=OY,Y.xorWith=DY,Y.zip=MY,Y.zipObject=NY,Y.zipObjectDeep=FY,Y.zipWith=BY,Y.entries=LI,Y.entriesIn=OI,Y.extend=PI,Y.extendWith=E1,x2(Y,Y),Y.add=MZ,Y.attempt=FI,Y.camelCase=VQ,Y.capitalize=DI,Y.ceil=NZ,Y.clamp=NQ,Y.clone=RX,Y.cloneDeep=LX,Y.cloneDeepWith=OX,Y.cloneWith=$X,Y.conformsTo=DX,Y.deburr=MI,Y.defaultTo=mZ,Y.divide=FZ,Y.endsWith=UQ,Y.eq=aa,Y.escape=zQ,Y.escapeRegExp=HQ,Y.every=XY,Y.find=ZY,Y.findIndex=aI,Y.findKey=uQ,Y.findLast=JY,Y.findLastIndex=lI,Y.findLastKey=hQ,Y.floor=BZ,Y.forEach=pI,Y.forEachRight=mI,Y.forIn=fQ,Y.forInRight=pQ,Y.forOwn=mQ,Y.forOwnRight=gQ,Y.get=g2,Y.gt=MX,Y.gte=NX,Y.has=yQ,Y.hasIn=b2,Y.head=dI,Y.identity=Fr,Y.includes=sX,Y.indexOf=JK,Y.inRange=FQ,Y.invoke=_Q,Y.isArguments=bu,Y.isArray=_n,Y.isArrayBuffer=FX,Y.isArrayLike=Mr,Y.isArrayLikeObject=vs,Y.isBoolean=BX,Y.isBuffer=Zc,Y.isDate=VX,Y.isElement=UX,Y.isEmpty=zX,Y.isEqual=HX,Y.isEqualWith=jX,Y.isError=p2,Y.isFinite=GX,Y.isFunction=Gl,Y.isInteger=kI,Y.isLength=_1,Y.isMap=EI,Y.isMatch=WX,Y.isMatchWith=qX,Y.isNaN=KX,Y.isNative=YX,Y.isNil=QX,Y.isNull=XX,Y.isNumber=TI,Y.isObject=os,Y.isObjectLike=fs,Y.isPlainObject=Rm,Y.isRegExp=m2,Y.isSafeInteger=ZX,Y.isSet=CI,Y.isString=k1,Y.isSymbol=oo,Y.isTypedArray=Qh,Y.isUndefined=JX,Y.isWeakMap=eQ,Y.isWeakSet=tQ,Y.join=sY,Y.kebabCase=jQ,Y.last=Lo,Y.lastIndexOf=rY,Y.lowerCase=GQ,Y.lowerFirst=WQ,Y.lt=nQ,Y.lte=iQ,Y.max=VZ,Y.maxBy=UZ,Y.mean=zZ,Y.meanBy=HZ,Y.min=jZ,Y.minBy=GZ,Y.stubArray=k2,Y.stubFalse=E2,Y.stubObject=PZ,Y.stubString=RZ,Y.stubTrue=$Z,Y.multiply=WZ,Y.nth=oY,Y.noConflict=_Z,Y.noop=_2,Y.now=y1,Y.pad=qQ,Y.padEnd=KQ,Y.padStart=YQ,Y.parseInt=XQ,Y.random=BQ,Y.reduce=cX,Y.reduceRight=dX,Y.repeat=QQ,Y.replace=ZQ,Y.result=IQ,Y.round=qZ,Y.runInContext=De,Y.sample=hX,Y.size=mX,Y.snakeCase=JQ,Y.some=gX,Y.sortedIndex=fY,Y.sortedIndexBy=pY,Y.sortedIndexOf=mY,Y.sortedLastIndex=gY,Y.sortedLastIndexBy=bY,Y.sortedLastIndexOf=vY,Y.startCase=tZ,Y.startsWith=nZ,Y.subtract=KZ,Y.sum=YZ,Y.sumBy=XZ,Y.template=iZ,Y.times=LZ,Y.toFinite=Wl,Y.toInteger=Pn,Y.toLength=AI,Y.toLower=sZ,Y.toNumber=Oo,Y.toSafeInteger=sQ,Y.toString=gi,Y.toUpper=rZ,Y.trim=oZ,Y.trimEnd=aZ,Y.trimStart=lZ,Y.truncate=cZ,Y.unescape=dZ,Y.uniqueId=DZ,Y.upperCase=uZ,Y.upperFirst=v2,Y.each=pI,Y.eachRight=mI,Y.first=dI,x2(Y,function(){var p={};return Ya(Y,function(v,S){wi.call(Y.prototype,S)||(p[S]=v)}),p}(),{chain:!1}),Y.VERSION=i,Ao(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){Y[p].placeholder=Y}),Ao(["drop","take"],function(p,v){Un.prototype[p]=function(S){S=S===t?1:Rs(Pn(S),0);var D=this.__filtered__&&!v?new Un(this):this.clone();return D.__filtered__?D.__takeCount__=sr(S,D.__takeCount__):D.__views__.push({size:sr(S,Be),type:p+(D.__dir__<0?"Right":"")}),D},Un.prototype[p+"Right"]=function(S){return this.reverse()[p](S).reverse()}}),Ao(["filter","map","takeWhile"],function(p,v){var S=v+1,D=S==B||S==X;Un.prototype[p]=function(H){var ee=this.clone();return ee.__iteratees__.push({iteratee:an(H,3),type:S}),ee.__filtered__=ee.__filtered__||D,ee}}),Ao(["head","last"],function(p,v){var S="take"+(v?"Right":"");Un.prototype[p]=function(){return this[S](1).value()[0]}}),Ao(["initial","tail"],function(p,v){var S="drop"+(v?"":"Right");Un.prototype[p]=function(){return this.__filtered__?new Un(this):this[S](1)}}),Un.prototype.compact=function(){return this.filter(Fr)},Un.prototype.find=function(p){return this.filter(p).head()},Un.prototype.findLast=function(p){return this.reverse().find(p)},Un.prototype.invokeMap=Nn(function(p,v){return typeof p=="function"?new Un(this):this.map(function(S){return Tm(S,p,v)})}),Un.prototype.reject=function(p){return this.filter(x1(an(p)))},Un.prototype.slice=function(p,v){p=Pn(p);var S=this;return S.__filtered__&&(p>0||v<0)?new Un(S):(p<0?S=S.takeRight(-p):p&&(S=S.drop(p)),v!==t&&(v=Pn(v),S=v<0?S.dropRight(-v):S.take(v-p)),S)},Un.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Un.prototype.toArray=function(){return this.take(Be)},Ya(Un.prototype,function(p,v){var S=/^(?:filter|find|map|reject)|While$/.test(v),D=/^(?:head|last)$/.test(v),H=Y[D?"take"+(v=="last"?"Right":""):v],ee=D||/^find/.test(v);H&&(Y.prototype[v]=function(){var pe=this.__wrapped__,Ee=D?[1]:arguments,Me=pe instanceof Un,st=Ee[0],ot=Me||_n(pe),ft=function(Vn){var Hn=H.apply(Y,Gc([Vn],Ee));return D&&Lt?Hn[0]:Hn};ot&&S&&typeof st=="function"&&st.length!=1&&(Me=ot=!1);var Lt=this.__chain__,Ht=!!this.__actions__.length,cn=ee&&!Lt,Ln=Me&&!Ht;if(!ee&&ot){pe=Ln?pe:new Un(this);var dn=p.apply(pe,Ee);return dn.__actions__.push({func:b1,args:[ft],thisArg:t}),new Po(dn,Lt)}return cn&&Ln?p.apply(this,Ee):(dn=this.thru(ft),cn?D?dn.value()[0]:dn.value():dn)})}),Ao(["pop","push","shift","sort","splice","unshift"],function(p){var v=Hb[p],S=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",D=/^(?:pop|shift)$/.test(p);Y.prototype[p]=function(){var H=arguments;if(D&&!this.__chain__){var ee=this.value();return v.apply(_n(ee)?ee:[],H)}return this[S](function(pe){return v.apply(_n(pe)?pe:[],H)})}}),Ya(Un.prototype,function(p,v){var S=Y[v];if(S){var D=S.name+"";wi.call(Wh,D)||(Wh[D]=[]),Wh[D].push({name:v,func:S})}}),Wh[d1(t,w).name]=[{name:"wrapper",func:t}],Un.prototype.clone=dq,Un.prototype.reverse=uq,Un.prototype.value=hq,Y.prototype.at=UY,Y.prototype.chain=zY,Y.prototype.commit=HY,Y.prototype.next=jY,Y.prototype.plant=WY,Y.prototype.reverse=qY,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=KY,Y.prototype.first=Y.prototype.head,vm&&(Y.prototype[vm]=GY),Y},Hh=HW();cu?((cu.exports=Hh)._=Hh,w_._=Hh):Qs._=Hh}).call(Ar)})(Hy,Hy.exports);var J=Hy.exports;const Ba=Yd("app-store",()=>{const n=K(!0),e=K([]),t=K(),i=K();return{isFirstAccess:n,routerCallback:t,listCountries:e,routeParams:i,setRouterCallback:c=>{t.value=c},setAccessedApp:()=>{n.value=!1},setRouteParams:c=>{i.value=c},getListCountries:async()=>{var c;if(e.value.length===0){const{data:d}=await li.get("https://id.unica.vn/api/countries");J.isEmpty(d==null?void 0:d.data)||(e.value=(c=d==null?void 0:d.data)!=null?c:[])}},clear:()=>{t.value=void 0,i.value={}}}},{persist:!0});var T6;(function(n){n[n.Min=1]="Min",n[n.Low=2]="Low",n[n.Default=3]="Default",n[n.High=4]="High",n[n.Max=5]="Max"})(T6||(T6={}));var C6;(function(n){n[n.Secret=-1]="Secret",n[n.Private=0]="Private",n[n.Public=1]="Public"})(C6||(C6={}));const yg=Na("FirebaseMessaging",{web:()=>Kn(()=>import("./web-BVrFM34z.js"),[]).then(n=>new n.FirebaseMessagingWeb)});var S6;(function(n){n[n.Sunday=1]="Sunday",n[n.Monday=2]="Monday",n[n.Tuesday=3]="Tuesday",n[n.Wednesday=4]="Wednesday",n[n.Thursday=5]="Thursday",n[n.Friday=6]="Friday",n[n.Saturday=7]="Saturday"})(S6||(S6={}));const v0e=Na("LocalNotifications",{web:()=>Kn(()=>import("./web-BvQ68XJt.js"),[]).then(n=>new n.LocalNotificationsWeb)}),en=Yd("auth-store",()=>{const n=K(),e=K(),t=K(!1),i=K(),s=K();return{accessToken:n,refreshToken:e,isLoggedIn:t,setLoggedIn:m=>{t.value=m},setAccessToken:m=>{n.value=m},setRefreshToken:m=>{e.value=m},onAccessTokenExpired:()=>"generage new accesstoken here",onRefreshTokenExpired:()=>"generage new token here",getUserInfo:async(m,g,b)=>{try{const{data:w}=await li.get("/users/me",{headers:{Authorization:"Bearer ".concat(m!=null?m:n.value)}});console.log("🌸 getUserInfo 👉",w),J.isEmpty(w)||(i.value=J.isEmpty(b)?w!=null?w:void 0:{...w,ggAvatar:b,ggId:g})}catch(w){console.log(w)}},setUserInfo:async m=>{i.value=m},userInfo:i,setFcmToken:m=>{s.value=m},fcmToken:s,logOut:async()=>{await li.delete("/auth/session"),await Qe.delete("/notification/user-fcm-token-delete",{data:{type:"app",token:n.value}}),n.value=void 0,e.value=void 0,t.value=!1,i.value=void 0}}},{persist:!0}),{DEV:y0e,VITE_API_URL_DEV:w0e,VITE_API_URL:x0e}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},Qe=li.create({baseURL:y0e?w0e:x0e,headers:{Accept:"Application/json"}});Qe.interceptors.request.use(async n=>{const e=en(),{accessToken:t}=et(e);return t.value&&(n.headers.Authorization="Bearer ".concat(t.value)),n},async n=>(console.log("request",n),n));Qe.interceptors.response.use(async n=>n,async n=>(console.log("🚀 ~ error:",n),n.status,n));function _0e(){if(typeof process>"u"){var n=typeof window<"u"?window:{},e=5e3,t=Date.now(),i=!1;n.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-t)+" ms"),i=!0}),setTimeout(function(){!i&&n.cordova&&console.warn("Ionic Native: deviceready did not fire within "+e+"ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},e)}}var LT=function(n,e){return LT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},LT(n,e)};function IA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");LT(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ur(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(d){try{c(i.next(d))}catch(u){o(u)}}function l(d){try{c(i.throw(d))}catch(u){o(u)}}function c(d){d.done?r(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function wr(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],s=0}finally{i=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function o0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a0(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return r}function Ta(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}function jf(n){return this instanceof jf?(this.v=n,this):new jf(n)}function k0e(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(m){return Promise.resolve(m).then(f,u)}}function a(f,m){i[f]&&(s[f]=function(g){return new Promise(function(b,w){r.push([f,g,b,w])>1||l(f,g)})},m&&(s[f]=m(s[f])))}function l(f,m){try{c(i[f](m))}catch(g){h(r[0][3],g)}}function c(f){f.value instanceof jf?Promise.resolve(f.value.v).then(d,u):h(r[0][2],f)}function d(f){l("next",f)}function u(f){l("throw",f)}function h(f,m){f(m),r.shift(),r.length&&l(r[0][0],r[0][1])}}function E0e(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof o0=="function"?o0(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}function ns(n){return typeof n=="function"}function T0e(n){var e=function(i){Error.call(i),i.stack=new Error().stack},t=n(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dk=T0e(function(n){return function(t){n(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(i,s){return s+1+") "+i.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function A6(n,e){if(n){var t=n.indexOf(e);0<=t&&n.splice(t,1)}}var PA=function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,t,i,s,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=o0(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(ns(d))try{d()}catch(g){r=g instanceof dk?g.errors:[g]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var h=o0(u),f=h.next();!f.done;f=h.next()){var m=f.value;try{I6(m)}catch(g){r=r!=null?r:[],g instanceof dk?r=Ta(Ta([],a0(r)),a0(g.errors)):r.push(g)}}}catch(g){i={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}if(r)throw new dk(r)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)I6(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&A6(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&A6(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=function(){var e=new n;return e.closed=!0,e}(),n}();PA.EMPTY;function BF(n){return n instanceof PA||n&&"closed"in n&&ns(n.remove)&&ns(n.add)&&ns(n.unsubscribe)}function I6(n){ns(n)?n():n.unsubscribe()}var C0e={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},VF={setTimeout:function(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return setTimeout.apply(void 0,Ta([n,e],a0(t)))},clearTimeout:function(n){var e=VF.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function UF(n){VF.setTimeout(function(){throw n})}function P6(){}function S0e(n){n()}var RA=function(n){IA(e,n);function e(t){var i=n.call(this)||this;return i.isStopped=!1,t?(i.destination=t,BF(t)&&t.add(i)):i.destination=P0e,i}return e.create=function(t,i,s){return new OT(t,i,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(PA),A0e=function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){G1(i)}},n.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){G1(i)}else G1(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){G1(t)}},n}(),OT=function(n){IA(e,n);function e(t,i,s){var r=n.call(this)||this,o;return ns(t)||!t?o={next:t!=null?t:void 0,error:i!=null?i:void 0,complete:s!=null?s:void 0}:o=t,r.destination=new A0e(o),r}return e}(RA);function G1(n){UF(n)}function I0e(n){throw n}var P0e={closed:!0,next:P6,error:I0e,complete:P6},$A=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function R0e(n){return n}function $0e(n){return n.length===0?R0e:n.length===1?n[0]:function(t){return n.reduce(function(i,s){return s(i)},t)}}var Xd=function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,i){var s=this,r=O0e(e)?e:new OT(e,t,i);return S0e(function(){var o=s,a=o.operator,l=o.source;r.add(a?a.call(r,l):l?s._subscribe(r):s._trySubscribe(r))}),r},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},n.prototype.forEach=function(e,t){var i=this;return t=R6(t),new t(function(s,r){var o=new OT({next:function(a){try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});i.subscribe(o)})},n.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},n.prototype[$A]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $0e(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=R6(e),new e(function(i,s){var r;t.subscribe(function(o){return r=o},function(o){return s(o)},function(){return i(r)})})},n.create=function(e){return new n(e)},n}();function R6(n){var e;return(e=n!=null?n:C0e.Promise)!==null&&e!==void 0?e:Promise}function L0e(n){return n&&ns(n.next)&&ns(n.error)&&ns(n.complete)}function O0e(n){return n&&n instanceof RA||L0e(n)&&BF(n)}function D0e(n){return ns(n==null?void 0:n.lift)}function zF(n){return function(e){if(D0e(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function DT(n,e,t,i,s){return new M0e(n,e,t,i,s)}var M0e=function(n){IA(e,n);function e(t,i,s,r,o,a){var l=n.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=i?function(c){try{i(c)}catch(d){t.error(d)}}:n.prototype._next,l._error=r?function(c){try{r(c)}catch(d){t.error(d)}finally{this.unsubscribe()}}:n.prototype._error,l._complete=s?function(){try{s()}catch(c){t.error(c)}finally{this.unsubscribe()}}:n.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;n.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(RA),HF=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function N0e(n){return ns(n==null?void 0:n.then)}function F0e(n){return ns(n[$A])}function B0e(n){return Symbol.asyncIterator&&ns(n==null?void 0:n[Symbol.asyncIterator])}function V0e(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function U0e(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var z0e=U0e();function H0e(n){return ns(n==null?void 0:n[z0e])}function j0e(n){return k0e(this,arguments,function(){var t,i,s,r;return wr(this,function(o){switch(o.label){case 0:t=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,jf(t.read())];case 3:return i=o.sent(),s=i.value,r=i.done,r?[4,jf(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,jf(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function G0e(n){return ns(n==null?void 0:n.getReader)}function LA(n){if(n instanceof Xd)return n;if(n!=null){if(F0e(n))return W0e(n);if(HF(n))return q0e(n);if(N0e(n))return K0e(n);if(B0e(n))return jF(n);if(H0e(n))return Y0e(n);if(G0e(n))return X0e(n)}throw V0e(n)}function W0e(n){return new Xd(function(e){var t=n[$A]();if(ns(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function q0e(n){return new Xd(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function K0e(n){return new Xd(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,UF)})}function Y0e(n){return new Xd(function(e){var t,i;try{for(var s=o0(n),r=s.next();!r.done;r=s.next()){var o=r.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}e.complete()})}function jF(n){return new Xd(function(e){Q0e(n,e).catch(function(t){return e.error(t)})})}function X0e(n){return jF(j0e(n))}function Q0e(n,e){var t,i,s,r;return Ur(this,void 0,void 0,function(){var o,a;return wr(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=E0e(n),l.label=1;case 1:return[4,t.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(o=i.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(r=t.return)?[4,r.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function GF(n,e){return zF(function(t,i){var s=0;t.subscribe(DT(i,function(r){i.next(n.call(e,r,s++))}))})}var Z0e=Array.isArray;function J0e(n,e){return Z0e(e)?n.apply(void 0,Ta([],a0(e))):n(e)}function ebe(n){return GF(function(e){return J0e(n,e)})}function tbe(n,e,t,i,s,r,o,a){var l=[],c=0,d=0,u=!1,h=function(){u&&!l.length&&!c&&e.complete()},f=function(g){return c<i?m(g):l.push(g)},m=function(g){c++;var b=!1;LA(t(g,d++)).subscribe(DT(e,function(w){e.next(w)},function(){b=!0},void 0,function(){if(b)try{c--;for(var w=function(){var x=l.shift();o||m(x)};l.length&&c<i;)w();h()}catch(x){e.error(x)}}))};return n.subscribe(DT(e,f,function(){u=!0,h()})),function(){}}function WF(n,e,t){return t===void 0&&(t=1/0),ns(e)?WF(function(i,s){return GF(function(r,o){return e(i,r,s,o)})(LA(n(i,s)))},t):(typeof e=="number"&&(t=e),zF(function(i,s){return tbe(i,s,n,t)}))}var nbe=["addListener","removeListener"],ibe=["addEventListener","removeEventListener"],sbe=["on","off"];function MT(n,e,t,i){if(ns(t)&&(i=t,t=void 0),i)return MT(n,e,t).pipe(ebe(i));var s=a0(abe(n)?ibe.map(function(a){return function(l){return n[a](e,l,t)}}):rbe(n)?nbe.map($6(n,e)):obe(n)?sbe.map($6(n,e)):[],2),r=s[0],o=s[1];if(!r&&HF(n))return WF(function(a){return MT(a,e,t)})(LA(n));if(!r)throw new TypeError("Invalid event target");return new Xd(function(a){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.next(1<c.length?c:c[0])};return r(l),function(){return o(l)}})}function $6(n,e){return function(t){return function(i){return n[t](e,i)}}}function rbe(n){return ns(n.addListener)&&ns(n.removeListener)}function obe(n){return ns(n.on)&&ns(n.off)}function abe(n){return ns(n.addEventListener)&&ns(n.removeEventListener)}var lbe={error:"cordova_not_available"},cbe={error:"plugin_not_installed"};function qF(n){var e=function(){if(Promise)return new Promise(function(r,o){n(r,o)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")};if(typeof window<"u"&&window.angular){var t=window.document,i=window.angular.element(t.querySelector("[ng-app]")||t.body).injector();if(i){var s=i.get("$q");return s(function(r,o){n(r,o)})}console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return e()}function dbe(n,e,t,i){i===void 0&&(i={});var s,r,o=qF(function(a,l){i.destruct?s=Td(n,e,t,i,function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(c)},function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return l(c)}):s=Td(n,e,t,i,a,l),r=l});return s&&s.error&&(o.catch(function(){}),typeof r=="function"&&r(s.error)),o}function ube(n,e,t,i){return i===void 0&&(i={}),qF(function(s,r){var o=Td(n,e,t,i);o?o.error?r(o.error):o.then&&o.then(s).catch(r):r({error:"unexpected_error"})})}function hbe(n,e,t,i){return i===void 0&&(i={}),new Xd(function(s){var r;return i.destruct?r=Td(n,e,t,i,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s.next(o)},function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s.error(o)}):r=Td(n,e,t,i,s.next.bind(s),s.error.bind(s)),r&&r.error&&(s.error(r.error),s.complete()),function(){try{if(i.clearFunction)return i.clearWithArgs?Td(n,i.clearFunction,t,i,s.next.bind(s),s.error.bind(s)):Td(n,i.clearFunction,[])}catch(o){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(o)}}})}function fbe(n,e){return e=typeof window<"u"&&e?XF(window,e):e||(typeof window<"u"?window:{}),MT(e,n)}function KF(n,e,t){var i,s;typeof n=="string"?i=n:(i=n.constructor.getPluginRef(),t=n.constructor.getPluginName(),s=n.constructor.getPluginInstallName());var r=YF(i);return!r||e&&typeof r[e]>"u"?typeof window>"u"||!window.cordova?(gbe(t,e),lbe):(mbe(t,s,e),cbe):!0}function pbe(n,e,t,i){if(e===void 0&&(e={}),e.sync)return n;if(e.callbackOrder==="reverse")n.unshift(i),n.unshift(t);else if(e.callbackStyle==="node")n.push(function(a,l){a?i(a):t(l)});else if(e.callbackStyle==="object"&&e.successName&&e.errorName){var s={};s[e.successName]=t,s[e.errorName]=i,n.push(s)}else if(typeof e.successIndex<"u"||typeof e.errorIndex<"u"){var r=function(){e.successIndex>n.length?n[e.successIndex]=t:n.splice(e.successIndex,0,t)},o=function(){e.errorIndex>n.length?n[e.errorIndex]=i:n.splice(e.errorIndex,0,i)};e.successIndex>e.errorIndex?(o(),r()):(r(),o())}else n.push(t),n.push(i);return n}function Td(n,e,t,i,s,r){i===void 0&&(i={}),t=pbe(t,i,s,r);var o=KF(n,e);if(o===!0){var a=YF(n.constructor.getPluginRef());return a[e].apply(a,t)}else return o}function YF(n){return typeof window<"u"?XF(window,n):null}function XF(n,e){for(var t=e.split("."),i=n,s=0;s<t.length;s++){if(!i)return null;i=i[t[s]]}return i}function mbe(n,e,t){console.warn(t?"Native: tried calling "+n+"."+t+", but the "+n+" plugin is not installed.":"Native: tried accessing the "+n+" plugin but it's not installed."),e&&console.warn("Install the "+n+" plugin: 'ionic cordova plugin add "+e+"'")}function gbe(n,e){typeof process>"u"&&console.warn(e?"Native: tried calling "+n+"."+e+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+n+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}var bbe=function(n,e,t){return t===void 0&&(t={}),function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return t.sync?Td(n,e,i,t):t.observable?hbe(n,e,i,t):t.eventObservable&&t.event?fbe(t.event,t.element):t.otherPromise?ube(n,e,i,t):dbe(n,e,i,t)}};function vbe(n,e){for(var t=e.split("."),i=n,s=0;s<t.length;s++){if(!i)return null;i=i[t[s]]}return i}var ybe=function(){function n(){}return n.installed=function(){var e=KF(this.pluginRef)===!0;return e},n.getPlugin=function(){return typeof window<"u"?vbe(window,this.pluginRef):null},n.getPluginName=function(){var e=this.pluginName;return e},n.getPluginRef=function(){var e=this.pluginRef;return e},n.getPluginInstallName=function(){var e=this.plugin;return e},n.getSupportedPlatforms=function(){var e=this.platforms;return e},n.pluginName="",n.pluginRef="",n.plugin="",n.repo="",n.platforms=[],n.install="",n}();function td(n,e,t,i){return bbe(n,e,t).apply(this,i)}_0e();var wbe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xbe=function(n){wbe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.clear=function(){return td(this,"clear",{},arguments)},e.prototype.set=function(t){return td(this,"set",{},arguments)},e.prototype.get=function(){return td(this,"get",{},arguments)},e.prototype.increase=function(t){return td(this,"increase",{},arguments)},e.prototype.decrease=function(t){return td(this,"decrease",{},arguments)},e.prototype.isSupported=function(){return td(this,"isSupported",{},arguments)},e.prototype.hasPermission=function(){return td(this,"hasPermission",{},arguments)},e.prototype.requestPermission=function(){return td(this,"requestPermission",{},arguments)},e.pluginName="Badge",e.plugin="cordova-plugin-badge",e.pluginRef="cordova.plugins.notification.badge",e.repo="https://github.com/katzer/cordova-plugin-badge",e.platforms=["Android","Browser","iOS","Windows"],e}(ybe),No=new xbe;const Sx=Yd("notification-store",()=>{const n=K(0),e=K(0);return{unseenNotificationCount:n,newNotificationCount:e,decreaseNewNotification:async()=>{const l=e.value-1;e.value--,No.hasPermission().then(async c=>{c?await No.set(l):No.requestPermission().then(async d=>{d&&await No.set(l)})})},newNotificationHandle:async()=>{const l=e.value+1;e.value++,No.hasPermission().then(async c=>{c?await No.set(l):No.requestPermission().then(async d=>{d&&await No.set(l)})})},getCountUnreadAndNewNotification:async()=>{var l,c;try{const{data:d}=await Qe.get("/notification/unseen-and-new-count");console.log("🌸  res 👉",d),n.value=(l=Number(d==null?void 0:d.unseenCount))!=null?l:0,e.value=(c=Number(d==null?void 0:d.newCount))!=null?c:0}catch(d){console.log(d)}},increaseNotification:l=>{n.value+=l,e.value+=l},clear:async()=>{n.value=0,e.value=0,await No.clear()},markAsReadAll:async()=>{const l=await Qe.patch("/notification/new-remove");console.log("🌸 data 👉",l),e.value=0,await No.clear()}}},{persist:!0}),Cs={CommunityCreateSuccess:"community_create_success",CommunityUserJoinSuccess:"community_user_join_success",CommunityUserJoinWaiting:"community_user_join_waiting",CommunityUserJoinReject:"community_user_join_reject",CommunityMemberPayment:"community_member_payment",CommunityMemberRemoved:"community_member_removed",CommunityMemberSuspended:"community_member_suspended",CommunityAdminPostNew:"community_admin_post_new",CommunityCommentNew:"community_comment_new",CommunityMention:"community_mention",CommunityPostLike:"community_post_like",CommunityCommentLike:"community_comment_like",CommunityPostPinned:"community_post_pinned",CommunityTopicAdd:"community_topic_add",CommunityCourseStudentAccess:"community_course_student_access",CommunityCourseNewPublic:"community_course_new_public",UpcomingEvent:"upcoming_event",LevelUp:"level_up",LeaderboardTop10:"leaderboard_top_10",CommunityOwnerCommunityPackageAboutExpire:"community_owner_community_package_about_expire"},Wt=()=>bt().duration(0),pd=class pd{constructor(e){this.info=e}price(e=1){const t=this.info;return typeof t.price=="number"?t.price:t.price[e]||0}};$(pd,"START",new pd({code:"START",name:"START",date_limit:21,price:0,private:!1,course_limit:10,event_limit:10,member:1e3,transaction_fee:0,commission_level:0,group_chat_limit:10,group_chat_member_limit:100})),$(pd,"PRO",new pd({code:"PRO",name:"PRO",price:{1:999e3,12:699e3},private:!0,transaction_fee:4.9,commission_level:10,group_chat_limit:200,group_chat_member_limit:1e3})),$(pd,"VIP",new pd({code:"VIP",name:"VIP",price:{1:1999e3,12:1299e3},private:!0,transaction_fee:2.9,commission_level:10,vip_course:!0,landing_page:!0,private_domain:!0,group_chat_limit:200,group_chat_member_limit:1e3}));let Vu=pd;const ln=Yd("community-store",()=>{const n=K(),e=K(),t=K(),i=K([]),s=J.mapValues(J.toPlainObject(Vu),u=>u.info),r=K(s.START);return{community:n,communityLevel:e,communityLevelPluck:t,allPackages:s,packageCommunity:r,setCommunity:u=>{n.value=u,r.value=s[(u==null?void 0:u.package_code)||"START"]},setCommunityLevel:u=>{e.value=u!=null?u:[],J.isEmpty(u)||(t.value=u.map(h=>h.point))},getCommunityInfo:async u=>{try{if(!u)return;const{data:h}=await Qe.get("/community/".concat(u));n.value=h!=null?h:void 0}catch(h){console.log(h)}},setTopics:u=>{i.value=u!=null?u:[]},clear:()=>{n.value=void 0,e.value=[],t.value=[]},topics:i}},{persist:!0});var Ei=(n=>(n[n.Member=1]="Member",n[n.Admin=2]="Admin",n[n.Sale=3]="Sale",n))(Ei||{});const jy={1:"Thành viên",2:"Admin",3:"Sale"};var _be=aF();const _t=mb(_be),Li=Yd("user-community-store",()=>{const{community:n,communityLevel:e}=et(ln()),t=K(),i=lt(()=>{var d,u,h;return t.value&&t.value.role===Ei.Member&&((d=n.value)!=null&&d.member_last_limit_package)?_t((u=n.value)==null?void 0:u.member_last_limit_package).isBefore((h=t.value)==null?void 0:h.created_at):!1}),s=d=>{t.value=d},r=lt(()=>{var d,u,h,f;return(d=t.value)!=null&&d.level?(f=e.value)==null?void 0:f.filter(m=>!!m.level_id).find(m=>{var g;return m.level_id===((g=t.value)==null?void 0:g.level_id)}):(u=e.value)!=null&&u.filter(m=>!m.level_id)[0]?(h=e.value)==null?void 0:h.filter(m=>!m.level_id)[0]:""}),o=lt(()=>{var d,u,h,f;if((d=t.value)!=null&&d.level){const m=(f=e.value)==null?void 0:f.filter(g=>!!g.level_id).find(g=>{var b;return g.level_id===((b=t.value)==null?void 0:b.level_id)});return m?m==null?void 0:m.user_commission:0}else return(u=e.value)!=null&&u.filter(m=>!m.level_id)[0]?(h=e.value)==null?void 0:h.filter(m=>!m.level_id)[0].user_commission:0});return{userCommunity:t,currentLevel:r,setUserCommunity:s,getUserCommunityInfo:async d=>{try{if(!d)return;const{data:u}=await Qe.get("/user-community/check/".concat(d));t.value=u!=null?u:void 0}catch(u){console.log(u)}},currentCommission:o,checkUserAdminCommunity:(d,u)=>J.isEmpty(d)||J.isEmpty(u)?!1:Number(u==null?void 0:u.role)===Ei.Admin||d.owner_id===u.user_id,usersLimitedByPackage:i,clear:()=>{t.value=void 0}}},{persist:!0}),kbe=n=>{const e=ln(),t=Li(),i=gn(),s=en(),r=Ba(),{isLoggedIn:o}=et(s),a=(d,u)=>{d&&(u?(n==null?void 0:n.name)==="CommunityScreen"?i.replace({name:"CommunityScreen",params:{id:d,tab:u}},Wt):i.push({name:"CommunityScreen",params:{id:d,tab:u}},Wt):(n==null?void 0:n.name)==="CommunityScreen"?i.replace({name:"CommunityScreen",params:{id:d,tab:u}},Wt):i.push({name:"CommunityScreen",params:{id:d,tab:u}},Wt))},l=async(d,u)=>{const h=u.community_short_name||u.community_id;switch(d){case Cs.UpcomingEvent:case Cs.CommunityUserJoinWaiting:return a(h,"member");case Cs.CommunityCreateSuccess:case Cs.CommunityUserJoinSuccess:case Cs.CommunityUserJoinReject:case Cs.CommunityMemberPayment:case Cs.CommunityMemberRemoved:case Cs.CommunityMemberSuspended:return a(h,"about");case Cs.CommunityTopicAdd:case Cs.CommunityAdminPostNew:case Cs.CommunityPostPinned:return a(h);case Cs.CommunityPostLike:case Cs.CommunityCommentNew:case Cs.CommunityMention:case Cs.CommunityCommentLike:if(u.community_post_id){await e.getCommunityInfo(h),await t.getUserCommunityInfo(u.community_id),await i.push({name:"PostDetailScreen",params:{postId:u.community_post_id}});return}return a(h);case Cs.CommunityCourseNewPublic:case Cs.CommunityCourseStudentAccess:return a(h,"course");case Cs.LevelUp:case Cs.LeaderboardTop10:return a(h,"rank");case Cs.CommunityOwnerCommunityPackageAboutExpire:return a(h);default:return}};return _A(async()=>{r.setRouterCallback({}),await r.getListCountries()}),{handleNavigateToCommunity:a,handleNotification:l,saveFcmToken:async d=>{if(s.setFcmToken(d),console.log("save"),console.log(d),!!o.value&&(console.log("loggin"),d))try{const{data:u,status:h}=await Qe.post("/notification/user-fcm-token",{token:d,type:"app"});console.log(u,h)}catch(u){console.log(u)}}}},Ebe={class:"flex flex-1 flex-col items-center justify-center bg-white1"},Tbe=Fe({__name:"SplashScreen",setup(n){const e=gn(),t=Zr(),i=Sx(),{handleNotification:s,saveFcmToken:r}=kbe(t),o=Ba(),{isFirstAccess:a}=et(o);return yg.getToken().then(async l=>{console.log("🌸 FCM_TOKEN 👉",l),await r(l==null?void 0:l.token)}),setTimeout(async()=>{a.value?e.replace({name:"FirstAccess"}):e.replace({name:"defaultBottomTab"})},2e3),yg.addListener("notificationReceived",async l=>{var d,u,h,f;i.newNotificationHandle(),console.log("notificationReceived",l),await b0e.getState()&&mi("android")&&await v0e.schedule({notifications:[{id:10001,title:(u=(d=l.notification)==null?void 0:d.title)!=null?u:"Thông báo",body:(f=(h=l.notification)==null?void 0:h.body)!=null?f:"",schedule:{at:new Date(Date.now()+100)}}]})}),yg.addListener("notificationActionPerformed",async l=>{var d;console.log("notificationActionPerformed",l),i.decreaseNewNotification();const c=JSON.parse((d=l.notification.data)==null?void 0:d.notification);if(!J.isEmpty(c)&&c)return s(c.type,c.metadata)}),(l,c)=>(I(),ve(y(Dn),null,{default:j(()=>[_("div",Ebe,[c[0]||(c[0]=_("img",{src:Ol,class:"w-auto object-contain mb-4"},null,-1)),L(y(fb),{name:"crescent",color:"blue1"})])]),_:1}))}}),Cbe="/assets/first_access@4x-O4YOaDfe.png",Sbe=Fe({__name:"FirstAccess",setup(n){const e=Ba(),t=Sh(),i=async()=>{await e.setAccessedApp(),t.replace({name:"defaultBottomTab"})};return on(async()=>{await Qe.post("/app-click/open-app")}),(s,r)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(At),{"scroll-y":!1,color:"white1"},{default:j(()=>[r[0]||(r[0]=_("img",{src:Cbe,class:"h-auto w-full object-contain mt-[20%]"},null,-1)),r[1]||(r[1]=_("div",{class:"text-center text-sm font-light pb-3 px-4 text-[#0e1111]"}," Nền tảng cộng đồng học tập, chia sẻ kiến thức, kết nối học viên với chuyên gia ",-1)),_("div",{onClick:i,class:"mt-5 bg-blue1 mx-4 m-auto text-center self-center py-3 text-white rounded-lg"}," Tiếp tục ")]),_:1})]),_:1}))}}),Abe="/assets/logoGoogle-HGPhlMu3.svg",wg=Na("SocialLogin",{web:()=>Kn(()=>import("./web-D7pFlueV.js"),[]).then(n=>new n.SocialLoginWeb)}),QF="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",OA="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm80 224h-64v64a16 16 0 01-32 0v-64h-64a16 16 0 010-32h64v-64a16 16 0 0132 0v64h64a16 16 0 010 32z'/></svg>",l0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ZF="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1120-20 20 20 0 01-20 20zm21.72-201.15l-5.74 122a16 16 0 01-32 0l-5.74-121.94v-.05a21.74 21.74 0 1143.44 0z'/></svg>",JF="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",eB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><rect x='48' y='80' width='416' height='384' rx='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M128 48v32M384 48v32M464 160H48M304 260l43.42-32H352v168M191.87 306.63c9.11 0 25.79-4.28 36.72-15.47a37.9 37.9 0 0011.13-27.26c0-26.12-22.59-39.9-47.89-39.9-21.4 0-33.52 11.61-37.85 18.93M149 374.16c4.88 8.27 19.71 25.84 43.88 25.84 28.59 0 52.12-15.94 52.12-43.82 0-12.62-3.66-24-11.58-32.07-12.36-12.64-31.25-17.48-41.55-17.48' class='ionicon-fill-none ionicon-stroke-width'/></svg>",DA="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><rect stroke-linejoin='round' x='48' y='80' width='416' height='384' rx='48' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='296' cy='232' r='24'/><circle cx='376' cy='232' r='24'/><circle cx='296' cy='312' r='24'/><circle cx='376' cy='312' r='24'/><circle cx='136' cy='312' r='24'/><circle cx='216' cy='312' r='24'/><circle cx='136' cy='392' r='24'/><circle cx='216' cy='392' r='24'/><circle cx='296' cy='392' r='24'/><path stroke-linejoin='round' stroke-linecap='round' d='M128 48v32M384 48v32' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linejoin='round' d='M464 160H48' class='ionicon-fill-none ionicon-stroke-width'/></svg>",tB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 00-32 32v192a32 32 0 0032 32h352a32 32 0 0032-32V192a32 32 0 00-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='272' r='80' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M124 158v-22h-24v22' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Ax="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M87.49 380c1.19-4.38-1.44-10.47-3.95-14.86a44.86 44.86 0 00-2.54-3.8 199.81 199.81 0 01-33-110C47.65 139.09 140.73 48 255.83 48 356.21 48 440 117.54 459.58 209.85a199 199 0 014.42 41.64c0 112.41-89.49 204.93-204.59 204.93-18.3 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.09 31.09 0 00-11.12-2.07 30.71 30.71 0 00-12.09 2.43l-67.83 24.48a16 16 0 01-4.67 1.22 9.6 9.6 0 01-9.57-9.74 15.85 15.85 0 01.6-3.29z' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",MA="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29l-134.4 160a16 16 0 01-12 5.71h-.27a16 16 0 01-11.89-5.3l-57.6-64a16 16 0 1123.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0124.5 20.58z'/></svg>",NT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M464 128L240 384l-96-96M144 384l-96-96M368 128L232 284' class='ionicon-fill-none ionicon-stroke-width'/></svg>",nB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M416 128L192 384l-96-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Eo="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",ea="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",c0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",Al="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",Gy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",Cp="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",Ah="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",iB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M320 320L192 192M192 320l128-128' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ks="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M368 368L144 144M368 144L144 368' class='ionicon-fill-none ionicon-stroke-width'/></svg>",vb="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='128' y='128' width='336' height='336' rx='57' ry='57' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",sB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z'/></svg>",Ibe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M428 224H288a48 48 0 01-48-48V36a4 4 0 00-4-4h-92a64 64 0 00-64 64v320a64 64 0 0064 64h224a64 64 0 0064-64V228a4 4 0 00-4-4z'/><path d='M419.22 188.59L275.41 44.78a2 2 0 00-3.41 1.41V176a16 16 0 0016 16h129.81a2 2 0 001.41-3.41z'/></svg>",Pbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 221.25V416a48 48 0 01-48 48H144a48 48 0 01-48-48V96a48 48 0 0148-48h98.75a32 32 0 0122.62 9.37l141.26 141.26a32 32 0 019.37 22.62z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 56v120a32 32 0 0032 32h120' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Rbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 221.25V416a48 48 0 01-48 48H144a48 48 0 01-48-48V96a48 48 0 0148-48h98.75a32 32 0 0122.62 9.37l141.26 141.26a32 32 0 019.37 22.62z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 56v120a32 32 0 0032 32h120M176 288h160M176 368h160' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",rB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 256c0-114.87-93.13-208-208-208S48 141.13 48 256s93.13 208 208 208 208-93.13 208-208z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M445.57 172.14c-16.06.1-14.48 29.73-34.49 15.75-7.43-5.18-12-12.71-21.33-15-8.15-2-16.5.08-24.55 1.47-9.15 1.58-20 2.29-26.94 9.22-6.71 6.67-10.26 15.62-17.4 22.33-13.81 13-19.64 27.19-10.7 45.57 8.6 17.67 26.59 27.26 46 26 19.07-1.27 38.88-12.33 38.33 15.38-.2 9.8 1.85 16.6 4.86 25.71 2.79 8.4 2.6 16.54 3.24 25.21 1.18 16.2 4.16 34.36 12.2 48.67l15-21.16c1.85-2.62 5.72-6.29 6.64-9.38 1.63-5.47-1.58-14.87-1.95-21s-.19-12.34-1.13-18.47c-1.32-8.59-6.4-16.64-7.1-25.13-1.29-15.81 1.6-28.43-10.58-41.65-11.76-12.75-29-15.81-45.47-13.22-8.3 1.3-41.71 6.64-28.3-12.33 2.65-3.73 7.28-6.79 10.26-10.34 2.59-3.09 4.84-8.77 7.88-11.18s17-5.18 21-3.95 8.17 7 11.64 9.56a49.89 49.89 0 0021.81 9.36c13.66 2 42.22-5.94 42-23.46-.04-8.4-7.84-20.1-10.92-27.96zM287.45 316.3c-5.33-22.44-35.82-29.94-52.26-42.11-9.45-7-17.86-17.81-30.27-18.69-5.72-.41-10.51.83-16.18-.64-5.2-1.34-9.28-4.14-14.82-3.41-10.35 1.36-16.88 12.42-28 10.92-10.55-1.42-21.42-13.76-23.82-23.81-3.08-12.92 7.14-17.11 18.09-18.26 4.57-.48 9.7-1 14.09.67 5.78 2.15 8.51 7.81 13.7 10.67 9.73 5.33 11.7-3.19 10.21-11.83-2.23-12.94-4.83-18.22 6.71-27.12 8-6.14 14.84-10.58 13.56-21.61-.76-6.48-4.31-9.41-1-15.86 2.51-4.91 9.4-9.34 13.89-12.27 11.59-7.56 49.65-7 34.1-28.16-4.57-6.21-13-17.31-21-18.83-10-1.89-14.44 9.27-21.41 14.19-7.2 5.09-21.22 10.87-28.43 3-9.7-10.59 6.43-14.07 10-21.46s-8.27-21.36-14.61-24.9l-29.81 33.43a41.52 41.52 0 008.34 31.86c5.93 7.63 15.37 10.08 15.8 20.5.42 10-1.14 15.12-7.68 22.15-2.83 3-4.83 7.26-7.71 10.07-3.53 3.43-2.22 2.38-7.73 3.32-10.36 1.75-19.18 4.45-29.19 7.21C95.34 199.94 93.8 172.69 86.2 162l-25 20.19c-.27 3.31 4.1 9.4 5.29 13 6.83 20.57 20.61 36.48 29.51 56.16 9.37 20.84 34.53 15.06 45.64 33.32 9.86 16.2-.67 36.71 6.71 53.67 5.36 12.31 18 15 26.72 24 8.91 9.09 8.72 21.53 10.08 33.36a305.22 305.22 0 007.45 41.28c1.21 4.69 2.32 10.89 5.53 14.76 2.2 2.66 9.75 4.95 6.7 5.83 4.26.7 11.85 4.68 15.4 1.76 4.68-3.84 3.43-15.66 4.24-21 2.43-15.9 10.39-31.45 21.13-43.35 10.61-11.74 25.15-19.69 34.11-33 8.73-12.98 11.36-30.49 7.74-45.68zm-33.39 26.32c-6 10.71-19.36 17.88-27.95 26.39-2.33 2.31-7.29 10.31-10.21 8.58-2.09-1.24-2.8-11.62-3.57-14a61.17 61.17 0 00-21.71-29.95c-3.13-2.37-10.89-5.45-12.68-8.7-2-3.53-.2-11.86-.13-15.7.11-5.6-2.44-14.91-1.06-20 1.6-5.87-1.48-2.33 3.77-3.49 2.77-.62 14.21 1.39 17.66 2.11 5.48 1.14 8.5 4.55 12.82 8 11.36 9.11 23.87 16.16 36.6 23.14 9.86 5.46 12.76 12.37 6.46 23.62zM184.46 67.09c4.74 4.63 9.2 10.11 16.27 10.57 6.69.45 13-3.17 18.84 1.38 6.48 5 11.15 11.33 19.75 12.89 8.32 1.51 17.13-3.35 19.19-11.86 2-8.11-2.31-16.93-2.57-25.07 0-1.13.61-6.15-.17-7-.58-.64-5.42.08-6.16.1q-8.13.24-16.22 1.12a207.1 207.1 0 00-57.18 14.65c2.43 1.68 5.48 2.35 8.25 3.22zM356.4 123.27c8.49 0 17.11-3.8 14.37-13.62-2.3-8.23-6.22-17.16-15.76-12.72-6.07 2.82-14.67 10-15.38 17.12-.81 8.08 11.11 9.22 16.77 9.22zM349.62 166.24c8.67 5.19 21.53 2.75 28.07-4.66 5.11-5.8 8.12-15.87 17.31-15.86a15.4 15.4 0 0110.82 4.41c3.8 3.93 3.05 7.62 3.86 12.54 1.81 11.05 13.66.63 16.75-3.65 2-2.79 4.71-6.93 3.8-10.56-.84-3.39-4.8-7-6.56-10.11-5.14-9-9.37-19.47-17.07-26.74-7.41-7-16.52-6.19-23.55 1.08-5.76 6-12.45 10.75-16.39 18.05-2.78 5.13-5.91 7.58-11.54 8.91-3.1.73-6.64 1-9.24 3.08-7.24 5.7-3.12 19.39 3.74 23.51z'/></svg>",Sp="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",oB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",$be="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 48c-58.07 0-112.67 93.13-112.67 208S197.93 464 256 464s112.67-93.13 112.67-208S314.07 48 256 48z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M117.33 117.33c38.24 27.15 86.38 43.34 138.67 43.34s100.43-16.19 138.67-43.34M394.67 394.67c-38.24-27.15-86.38-43.34-138.67-43.34s-100.43 16.19-138.67 43.34' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-miterlimit='10' d='M256 48v416M464 256H48' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Lbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='184' cy='232' r='24'/><path d='M256.05 384c-45.42 0-83.62-29.53-95.71-69.83a8 8 0 017.82-10.17h175.69a8 8 0 017.82 10.17c-11.99 40.3-50.2 69.83-95.62 69.83z'/><circle cx='328' cy='232' r='24'/><circle cx='256' cy='256' r='208' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Obe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 64C150 64 64 150 64 256s86 192 192 192 192-86 192-192S362 64 256 64zm-6 304a20 20 0 1120-20 20 20 0 01-20 20zm33.44-102C267.23 276.88 265 286.85 265 296a14 14 0 01-28 0c0-21.91 10.08-39.33 30.82-53.26C287.1 229.8 298 221.6 298 203.57c0-12.26-7-21.57-21.49-28.46-3.41-1.62-11-3.2-20.34-3.09-11.72.15-20.82 2.95-27.83 8.59C215.12 191.25 214 202.83 214 203a14 14 0 11-28-1.35c.11-2.43 1.8-24.32 24.77-42.8 11.91-9.58 27.06-14.56 45-14.78 12.7-.15 24.63 2 32.72 5.82C312.7 161.34 326 180.43 326 203.57c0 33.83-22.61 49.02-42.56 62.43z'/></svg>",aB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 80a176 176 0 10176 176A176 176 0 00256 80z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296' stroke-linecap='round' stroke-miterlimit='10' stroke-width='28' class='ionicon-fill-none'/><circle cx='250' cy='348' r='20'/></svg>",Dbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M80 212v236a16 16 0 0016 16h96V328a24 24 0 0124-24h80a24 24 0 0124 24v136h96a16 16 0 0016-16V212' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256M400 179V64h-48v69' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",L6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z'/></svg>",lB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='48' y='80' width='416' height='352' rx='48' ry='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='336' cy='176' r='32' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Mbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M248 64C146.39 64 64 146.39 64 248s82.39 184 184 184 184-82.39 184-184S349.61 64 248 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M220 220h32v116' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M208 340h88' class='ionicon-fill-none ionicon-stroke-width'/><path d='M248 130a26 26 0 1026 26 26 26 0 00-26-26z'/></svg>",Ix="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 352h-64a96 96 0 010-192h64M304 160h64a96 96 0 010 192h-64M163.29 256h187.42' stroke-linecap='round' stroke-linejoin='round' stroke-width='36' class='ionicon-fill-none'/></svg>",Nbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M200.66 352H144a96 96 0 010-192h55.41M312.59 160H368a96 96 0 010 192h-56.66M169.07 256h175.86' stroke-linecap='square' stroke-linejoin='round' stroke-width='48' class='ionicon-fill-none'/></svg>",Fbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48c-79.5 0-144 61.39-144 137 0 87 96 224.87 131.25 272.49a15.77 15.77 0 0025.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='192' r='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Px="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 208v-95a80 80 0 00-160 0v95' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='208' width='320' height='272' rx='48' ry='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",cB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M304 336v40a40 40 0 01-40 40H104a40 40 0 01-40-40V136a40 40 0 0140-40h152c22.09 0 48 17.91 48 40v40M368 336l80-80-80-80M176 256h256' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Bbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.13 136.86c-40.32 0-57.36 19.24-85.44 19.24-28.79 0-50.75-19.1-85.69-19.1-34.2 0-70.67 20.88-93.83 56.45-32.52 50.16-27 144.63 25.67 225.11 18.84 28.81 44 61.12 77 61.47h.6c28.68 0 37.2-18.78 76.67-19h.6c38.88 0 46.68 18.89 75.24 18.89h.6c33-.35 59.51-36.15 78.35-64.85 13.56-20.64 18.6-31 29-54.35-76.19-28.92-88.43-136.93-13.08-178.34-23-28.8-55.32-45.48-85.79-45.48z'/><path d='M340.25 32c-24 1.63-52 16.91-68.4 36.86-14.88 18.08-27.12 44.9-22.32 70.91h1.92c25.56 0 51.72-15.39 67-35.11 14.72-18.77 25.88-45.37 21.8-72.66z'/></svg>",Vbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' stroke-width='48' d='M88 152h336M88 256h336M88 360h336' class='ionicon-fill-none'/></svg>",Ube="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 464a15.92 15.92 0 01-11.31-4.69l-384-384a16 16 0 0122.62-22.62l384 384A16 16 0 01448 464zM440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 01-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 01-.81.65 157.88 157.88 0 00-21.88 11 8 8 0 00-1.49 12.49l261.78 261.74a8 8 0 0013.6-6.63 35.39 35.39 0 00-7.84-18.5zM112.14 217.35c0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 00-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H312.8a8 8 0 005.66-13.66l-192-192a8 8 0 00-13.62 5q-.7 8.69-.7 18.04zM256 480a80.06 80.06 0 0070.44-42.13 4 4 0 00-3.54-5.87H189.12a4 4 0 00-3.55 5.87A80.06 80.06 0 00256 480z'/></svg>",FT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M128.51 204.59q-.37 6.15-.37 12.76C128.14 304 110 320 84.33 351.43 73.69 364.45 83 384 101.62 384H320M414.5 335.3c-18.48-23.45-30.62-47.05-30.62-118 0-79.3-40.52-107.57-73.88-121.3-4.43-1.82-8.6-6-9.95-10.55C294.21 65.54 277.82 48 256 48s-38.2 17.55-44 37.47c-1.35 4.6-5.52 8.71-10 10.53a149.57 149.57 0 00-18 8.79M320 384v16a64 64 0 01-128 0v-16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M448 448L64 64' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Wy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M427.68 351.43C402 320 383.87 304 383.87 217.35 383.87 138 343.35 109.73 310 96c-4.43-1.82-8.6-6-9.95-10.55C294.2 65.54 277.8 48 256 48s-38.21 17.55-44 37.47c-1.35 4.6-5.52 8.71-9.95 10.53-33.39 13.75-73.87 41.92-73.87 121.35C128.13 304 110 320 84.32 351.43 73.68 364.45 83 384 101.61 384h308.88c18.51 0 27.77-19.61 17.19-32.57zM320 384v16a64 64 0 01-128 0v-16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",dB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M368 128h80M64 128h240M368 384h80M64 384h240M208 256h240M64 256h80' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='336' cy='128' r='32' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='176' cy='256' r='32' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='336' cy='384' r='32' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",zbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M402 168c-2.93 40.67-33.1 72-66 72s-63.12-31.32-66-72c-3-42.31 26.37-72 66-72s69 30.46 66 72z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M336 304c-65.17 0-127.84 32.37-143.54 95.41-2.08 8.34 3.15 16.59 11.72 16.59h263.65c8.57 0 13.77-8.25 11.72-16.59C463.85 335.36 401.18 304 336 304z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 185.94c-2.34 32.48-26.72 58.06-53 58.06s-50.7-25.57-53-58.06C91.61 152.15 115.34 128 147 128s55.39 24.77 53 57.94z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M206 306c-18.05-8.27-37.93-11.45-59-11.45-52 0-102.1 25.85-114.65 76.2-1.65 6.66 2.53 13.25 9.37 13.25H154' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",NA="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M258.9 48C141.92 46.42 46.42 141.92 48 258.9c1.56 112.19 92.91 203.54 205.1 205.1 117 1.6 212.48-93.9 210.88-210.88C462.44 140.91 371.09 49.56 258.9 48zm126.42 327.25a4 4 0 01-6.14-.32 124.27 124.27 0 00-32.35-29.59C321.37 329 289.11 320 256 320s-65.37 9-90.83 25.34a124.24 124.24 0 00-32.35 29.58 4 4 0 01-6.14.32A175.32 175.32 0 0180 259c-1.63-97.31 78.22-178.76 175.57-179S432 158.81 432 256a175.32 175.32 0 01-46.68 119.25z'/><path d='M256 144c-19.72 0-37.55 7.39-50.22 20.82s-19 32-17.57 51.93C191.11 256 221.52 288 256 288s64.83-32 67.79-71.24c1.48-19.74-4.8-38.14-17.68-51.82C293.39 151.44 275.59 144 256 144z'/></svg>",Hbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z'/></svg>",jbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm74.77 217.3l-114.45 69.14a10.78 10.78 0 01-16.32-9.31V186.87a10.78 10.78 0 0116.32-9.31l114.45 69.14a10.89 10.89 0 010 18.6z'/></svg>",FA="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M216.32 334.44l114.45-69.14a10.89 10.89 0 000-18.6l-114.45-69.14a10.78 10.78 0 00-16.32 9.31v138.26a10.78 10.78 0 0016.32 9.31z'/></svg>",Gbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M32 160v296a8 8 0 008 8h136V160a16 16 0 00-16-16H48a16 16 0 00-16 16zM320 48H192a16 16 0 00-16 16v400h160V64a16 16 0 00-16-16zM464 208H352a16 16 0 00-16 16v240h136a8 8 0 008-8V224a16 16 0 00-16-16z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",uB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M435.25 48h-122.9a14.46 14.46 0 00-10.2 4.2L56.45 297.9a28.85 28.85 0 000 40.7l117 117a28.85 28.85 0 0040.7 0L459.75 210a14.46 14.46 0 004.2-10.2v-123a28.66 28.66 0 00-28.7-28.8z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M384 160a32 32 0 1132-32 32 32 0 01-32 32z'/></svg>",Ap="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",qy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='256' r='144'/></svg>",BA="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm80 224H176a16 16 0 010-32h160a16 16 0 010 32z'/></svg>",Wbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",BT="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",hB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M380.93 57.37A32 32 0 00358.3 48H94.22A46.21 46.21 0 0048 94.22v323.56A46.21 46.21 0 0094.22 464h323.56A46.36 46.36 0 00464 417.78V153.7a32 32 0 00-9.37-22.63zM256 416a64 64 0 1164-64 63.92 63.92 0 01-64 64zm48-224H112a16 16 0 01-16-16v-64a16 16 0 0116-16h192a16 16 0 0116 16v64a16 16 0 01-16 16z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",yb="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>",Qd="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",fB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z'/></svg>",qbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Kbe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 192h40a40 40 0 0140 40v192a40 40 0 01-40 40H136a40 40 0 01-40-40V232a40 40 0 0140-40h40M336 128l-80-80-80 80M256 321V48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Ybe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 208H308L256 48l-52 160H32l140 96-54 160 138-100 138 100-54-160z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",pB="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 64C150 64 64 150 64 256s86 192 192 192 192-86 192-192S362 64 256 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M256 128v144h96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Rx="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Xbe=n=>{switch(n){case"success":return"toast-success";case"warning":return"toast-warning";case"error":return"toast-error";default:return"toast-warning"}},tt=async(n,e)=>{J.isEmpty(n)||await(await vx.create({message:n!=null?n:"",duration:1500,position:"top",swipeGesture:"vertical",mode:"ios",cssClass:Xbe(e),layout:"stacked"})).present()};function eg(n){const e=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/,t=/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/,i=/https?:\/\/\S+\.(?:jpg|jpeg|png|gif|webp)/i,s=/https?:\/\/\S+\.mp3/i,r=/https?:\/\/\S+\.mp4/i,o=n.match(e);if(o)return{type:"youtube",id:o[1]};const a=n.match(t);if(a)return{type:"vimeo",id:a[1]};const l=n.match(i);if(l)return{type:"image",url:l[0]};const c=n.match(s);if(c)return{type:"audio",url:c[0]};const d=n.match(r);return d?{type:"video",url:d[0]}:null}const em=Fe({__name:"LoadingModal",props:{isOpen:{type:Boolean,default:!1},backdropOpacity:{default:.15}},setup(n){return(e,t)=>(I(),ve(y(pme),{"is-open":e.isOpen,class:"loadingModal",style:bo({"--backdrop-opacity":e.backdropOpacity}),mode:"ios"},null,8,["is-open","style"]))}}),Qbe={class:"flex flex-1 flex-col items-center justify-center bg-white1 px-4"},Zbe={key:1},Jbe={class:"w-full"},e1e=Fe({__name:"LoginScreen",setup(n){const{VITE_CLIENT_ID:e,VITE_CLIENT_ID_IOS:t}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},i=en(),s=Ba(),r=K(!1),{fcmToken:o}=et(i),{routerCallback:a}=et(s),l=gn(),c=K(!1),d=Yi({email:"",password:""}),u=()=>{r.value||l.push({name:"RegisterScreen"})},h=async()=>{if(!r.value){r.value=!0;try{const{data:w,status:x}=await li.post("/auth/login",{username:d.email,password:d.password});if(x===400||x===401){tt("Tài khoản hoặc mật khẩu không đúng. Vui lòng thử lại.","warning");return}m(w)}catch(w){console.log(w)}finally{r.value=!1}}},f=async w=>{var x,k,E;try{const T=await wg.login({provider:w,options:{scopes:w==="apple"?["email","name"]:["profile","email"]}});c.value=!0;const{data:P,status:C}=await li.post("/auth/login-social",{token:(k=(x=T==null?void 0:T.result)==null?void 0:x.accessToken)==null?void 0:k.token,social:w});C===201&&m(P,(E=T==null?void 0:T.result)==null?void 0:E.profile,w)}catch(T){console.log(T)}finally{c.value=!1}},m=async(w,x,k)=>{var E,T,P,C,A;!J.isEmpty(w==null?void 0:w.access_token)&&!J.isEmpty(w==null?void 0:w.refresh_token)&&(i.setAccessToken(w.access_token),i.setRefreshToken(w.refresh_token),i.setLoggedIn(!0),await i.getUserInfo(w==null?void 0:w.access_token,k,x==null?void 0:x.imageUrl),await g(w.access_token),(E=a.value)!=null&&E.goBack?b():J.isEmpty((T=a.value)==null?void 0:T.name)?l.replace({name:"defaultBottomTab"}):l.replace({name:(P=a.value)==null?void 0:P.name,params:(A=(C=a.value)==null?void 0:C.params)!=null?A:null},Wt),s.setRouterCallback({}))},g=async w=>{if(console.log("fcmToken",o),o.value)try{const{data:x,status:k}=await li.post("/notification/user-fcm-token",{token:o.value,type:"app"},{headers:{Authorization:"Bearer ".concat(w)}});console.log(x,k)}catch(x){console.log(x)}},b=()=>{l.back()};return on(()=>{try{mi("ios")?wg.initialize({google:{iOSClientId:t},apple:{clientId:t}}):wg.initialize({google:{webClientId:e}})}catch(w){console.log(w)}}),(w,x)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white1"},{default:j(()=>[L(y(fe),{slot:"start",onClick:b,icon:y(ks),class:"size-8 p-2 text-gray2"},null,8,["icon"])]),_:1})]),_:1}),_("div",Qbe,[x[8]||(x[8]=_("div",{class:"text-center mb-7"},[_("img",{src:Ol,class:"w-auto object-contain size-9 mb-7"}),_("span",{class:"text-black1 text-xl font-medium"},"Đăng nhập")],-1)),_("form",{class:"w-full",onSubmit:qt(h,["prevent"])},[L(y(Tn),{modelValue:d.email,"onUpdate:modelValue":x[0]||(x[0]=k=>d.email=k),mode:"md",required:"",fill:"outline",placeholder:"Email",class:"outline-none text-sm font-light mb-4",label:"Email","label-placement":"floating",color:"blue1"},null,8,["modelValue"]),L(y(Tn),{modelValue:d.password,"onUpdate:modelValue":x[1]||(x[1]=k=>d.password=k),mode:"md",fill:"outline",placeholder:"Mật khẩu",class:"outline-none text-sm font-light mb-2.5",label:"Mật khẩu",type:"password",autocapitalize:"off",autocomplete:"off",autocorrect:"off","label-placement":"floating",color:"blue1"},{default:j(()=>[d.password?(I(),ve(y(wT),{key:0,color:"gray2",slot:"end"})):re("",!0)]),_:1},8,["modelValue"]),L(y(ko),{disabled:!(d.email&&d.password)||r.value,type:"submit",color:d.email&&d.password?"blue1":"gray3",class:"mt-4 h-12 w-full text-base uppercase text-center shadow-st rounded-xl"},{default:j(()=>[r.value?(I(),ve(y(fb),{key:0,color:"white",class:"size-6"})):(I(),O("span",Zbe,"Đăng nhập"))]),_:1},8,["disabled","color"])],32),_("div",Jbe,[x[7]||(x[7]=_("div",{class:"my-6 text-center text-base font-normal"},"Hoặc",-1)),_("div",{onClick:x[2]||(x[2]=k=>f("google")),class:"flex items-center font-normal bg-white text-black w-full h-12 justify-center mt-4 text-base uppercase text-center shadow-st rounded-xl"},x[4]||(x[4]=[_("img",{src:Abe,class:"size-12"},null,-1),_("span",{class:"font-medium"},"Đăng nhập với google",-1)])),y(mi)("ios")?(I(),O("div",{key:0,onClick:x[3]||(x[3]=k=>f("apple")),class:"flex items-center font-normal bg-[#191919] text-white w-full h-12 justify-center mt-4 text-base uppercase text-center shadow-st rounded-xl"},[L(y(fe),{icon:y(Bbe),class:"size-7 mr-2"},null,8,["icon"]),x[5]||(x[5]=_("span",{class:"font-medium"},"Đăng nhập với Apple",-1))])):re("",!0),_("div",{class:"text-center text-base mt-4"},[x[6]||(x[6]=be(" Bạn chưa có tài khoản? ")),_("span",{onClick:u,class:"text-blue1 font-medium"},"Đăng ký ngay")])])]),L(em,{"is-open":c.value,"backdrop-opacity":.2},null,8,["is-open"])]),_:1}))}}),Xi=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},t1e=Xi(e1e,[["__scopeId","data-v-06361eb9"]]),Xr=Na("Browser",{web:()=>Kn(()=>import("./web-DqXHXiHG.js"),[]).then(n=>new n.BrowserWeb)}),n1e={class:"flex flex-1 flex-col items-center justify-center bg-white1 px-4"},i1e={slot:"label"},s1e={slot:"label"},r1e={slot:"label"},o1e={slot:"label"},a1e={class:"flex gap-4 mt-4 mb-1"},l1e=Fe({__name:"RegisterScreen",setup(n){const e=gn(),t=Yi({fullname:"",phone:"",email:"",password:"",repassword:""}),i=K(!1),s=()=>{e.back(Wt)},r=lt(()=>i.value&&t.email&&t.fullname&&t.password&&t.repassword&&t.password.length>=6&&t.password===t.repassword),o=async()=>{var u,h,f,m,g,b,w,x;const d={full_name:t.fullname,phone:t.phone?"+84".concat(t.phone):void 0,email:t.email,password:t.password};if(t.password&&t.password===t.repassword)try{const k=await Qe.post("/auth/register",d);if(k.status===400){if(!J.isEmpty((h=(u=k==null?void 0:k.response)==null?void 0:u.data)==null?void 0:h.message))if(typeof((m=(f=k==null?void 0:k.response)==null?void 0:f.data)==null?void 0:m.message)=="string")tt((b=(g=k==null?void 0:k.response)==null?void 0:g.data)==null?void 0:b.message,"warning");else{const E=(x=(w=k==null?void 0:k.response)==null?void 0:w.data)==null?void 0:x.message[0].constraints,T=Object.values(E)[0];T&&tt(T,"warning")}}else k.status===201&&(tt("Tạo tài khoản thành công","success"),e.back(Wt))}catch(k){console.log("🌸  error 👉",k)}},a=async()=>{await Xr.open({url:"https://unica.expert/policy/terms.html"})},l=async()=>{await Xr.open({url:"https://unica.expert/policy/privacy.html"})},c=async()=>{await Xr.open({url:"https://unica.expert/page/dieu-khoan-su-dung.html"})};return(d,u)=>(I(),ve(y(Dn),null,{default:j(()=>[_("div",n1e,[u[19]||(u[19]=_("div",{class:"text-center mb-7"},[_("img",{src:Ol,class:"w-auto object-contain size-9 mb-7"}),_("span",{class:"text-black1 text-xl font-medium"},"Đăng ký")],-1)),_("form",{class:"w-full",onSubmit:qt(o,["prevent"])},[L(y(Tn),{modelValue:t.fullname,"onUpdate:modelValue":u[0]||(u[0]=h=>t.fullname=h),mode:"md",required:"",fill:"outline",placeholder:"Họ và tên",class:"outline-none text-sm font-light mb-4",type:"text","label-placement":"floating",color:"blue1"},{default:j(()=>[_("div",i1e,[u[7]||(u[7]=be("Họ và tên")),L(y(Ai),{color:"danger"},{default:j(()=>u[6]||(u[6]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Tn),{modelValue:t.phone,"onUpdate:modelValue":u[1]||(u[1]=h=>t.phone=h),mode:"md",fill:"outline",label:"Số điện thoại",placeholder:"Số điện thoại",class:"outline-none text-sm font-light mb-2.5","label-placement":"floating",type:"tel",color:"blue1"},null,8,["modelValue"]),L(y(Tn),{modelValue:t.email,"onUpdate:modelValue":u[2]||(u[2]=h=>t.email=h),mode:"md",required:"",fill:"outline",placeholder:"Email",class:"outline-none text-sm font-light mb-2.5",autocomplete:"off",type:"email","error-text":"Nhập địa chỉ email","label-placement":"floating",color:"blue1"},{default:j(()=>[_("div",s1e,[u[9]||(u[9]=be("Email")),L(y(Ai),{color:"danger"},{default:j(()=>u[8]||(u[8]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Tn),{modelValue:t.password,"onUpdate:modelValue":u[3]||(u[3]=h=>t.password=h),mode:"md",fill:"outline",placeholder:"Mật khẩu",autocomplete:"off",autocapitalize:"off",autocorrect:"off",class:"outline-none text-sm font-light mb-2.5",type:"password","label-placement":"floating",color:"blue1"},{default:j(()=>[_("div",r1e,[u[11]||(u[11]=be("Mật khẩu")),L(y(Ai),{color:"danger"},{default:j(()=>u[10]||(u[10]=[be("*")])),_:1})]),t.password?(I(),ve(y(wT),{key:0,color:"gray2",slot:"end"})):re("",!0)]),_:1},8,["modelValue"]),L(y(Tn),{modelValue:t.repassword,"onUpdate:modelValue":u[4]||(u[4]=h=>t.repassword=h),mode:"md",fill:"outline",placeholder:"Nhập lại mật khẩu",autocomplete:"off",autocapitalize:"off",autocorrect:"off",class:"outline-none text-sm font-light mb-2.5",type:"password","label-placement":"floating",color:"blue1"},{default:j(()=>[_("div",o1e,[u[13]||(u[13]=be(" Nhập lại mật khẩu")),L(y(Ai),{color:"danger"},{default:j(()=>u[12]||(u[12]=[be("*")])),_:1})]),t.repassword?(I(),ve(y(wT),{key:0,color:"gray2",slot:"end"})):re("",!0)]),_:1},8,["modelValue"]),_("div",a1e,[L(y(Xp),{modelValue:i.value,"onUpdate:modelValue":u[5]||(u[5]=h=>i.value=h),"label-placement":"end",mode:"md",color:"blue1",alignment:"center"},null,8,["modelValue"]),_("div",{class:"text-wrap text-xs text-black"},[u[14]||(u[14]=be(" Tôi đồng ý với ")),_("span",{onClick:a,class:"text-blue1 font-medium"},"Điều khoản"),u[15]||(u[15]=be(", ")),_("span",{onClick:l,class:"text-blue1 font-medium"},"Chính sách bảo mật"),u[16]||(u[16]=be(" và ")),_("span",{onClick:c,class:"text-blue1 font-medium"},"EULA")])]),L(y(ko),{type:"submit",disabled:!r.value,color:r.value?"blue1":"gray3",class:"mt-4 h-12 w-full text-base uppercase text-center shadow-sm rounded-2xl"},{default:j(()=>u[17]||(u[17]=[be(" Đăng ký ")])),_:1},8,["disabled","color"])],32),_("div",{class:"text-center text-base mt-4"},[u[18]||(u[18]=be(" Bạn đã có tài khoản? ")),_("span",{onClick:s,class:"text-blue1 font-medium"},"Đăng nhập ngay")])])]),_:1}))}}),c1e=Xi(l1e,[["__scopeId","data-v-835962f4"]]),d1e="/assets/defaultAvatar-iuxA_jjJ.svg",u1e={class:"flex flex-1 flex-col items-center justify-center bg-white1 px-4"},h1e={class:"flex flex-col gap-2 mb-7"},f1e={class:"relative flex justify-center items-center"},p1e={class:"w-full"},m1e=Fe({__name:"ImproveBioScreen",setup(n){const e=Sh(),t=K(""),i=()=>{e.push({name:"ForgotPassScreen"})};return(s,r)=>(I(),ve(y(Dn),null,{default:j(()=>[_("div",u1e,[r[4]||(r[4]=_("img",{src:Ol,class:"w-auto object-contain size-9 mb-7"},null,-1)),r[5]||(r[5]=_("span",{class:"text-black1 text-xl font-medium text-center mb-2"},"Chúng tôi gửi bạn mã code",-1)),r[6]||(r[6]=_("span",{class:"text-black1 text-sm font-light text-center mb-7"}," Cộng đồng sẽ thiếu gắn kết, trở lên xa lạ nếu không thấy tên và khuôn mặt. Hồ sơ sẽ giúp dễ dàng kết nối ",-1)),_("div",h1e,[_("div",f1e,[r[1]||(r[1]=_("img",{src:d1e,class:"size-28"},null,-1)),L(y(fe),{icon:y(tB),class:"bg-white p-1.5 rounded-full size-4 absolute"},null,8,["icon"])]),r[2]||(r[2]=_("span",{class:"self-center text-sm font-light"},"Tải ảnh lên",-1))]),si(_("textarea",{"onUpdate:modelValue":r[0]||(r[0]=o=>t.value=o),placeholder:"Nhập bio của bạn",class:"w-full p-2 border text-base outline-none border-[#929292] bg-white1 rounded-xl",rows:"3",maxlength:"160"},null,512),[[Ti,t.value]]),_("div",p1e,[L(y(ko),{onClick:i,disabled:!t.value,color:t.value?"blue1":"gray3",class:"mt-4 h-12 w-full text-sm uppercase text-center shadow-sm rounded-2xl"},{default:j(()=>r[3]||(r[3]=[be(" Hoàn tất ")])),_:1},8,["disabled","color"])])])]),_:1}))}}),g1e={class:"flex flex-1 flex-col items-center justify-center bg-white1 px-4"},b1e={class:"text-black1 text-base font-light text-center mb-7"},v1e={class:"text-black1 font-normal"},y1e={class:"w-full"},w1e=Fe({__name:"EnterAuthCodeScreen",setup(n){const e=Sh(),t=Zr(),i=K(""),s=()=>{},r=()=>{e.push({name:"ImproveBioScreen"})},o=()=>{e.back()};return(a,l)=>(I(),ve(y(Dn),null,{default:j(()=>[_("div",g1e,[l[5]||(l[5]=_("img",{src:Ol,class:"w-auto object-contain size-9 mb-7"},null,-1)),l[6]||(l[6]=_("span",{class:"text-black1 text-xl font-medium text-center mb-2"},"Chúng tôi gửi bạn mã code",-1)),_("span",b1e,[l[1]||(l[1]=be(" Nhập mã code để xác thực ")),_("span",v1e,Q(y(t).params.email),1)]),L(y(Tn),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=c=>i.value=c),mode:"md",fill:"outline",placeholder:"Nhập mã code từ email",class:"outline-none text-sm font-light mb-4",color:"blue1"},null,8,["modelValue"]),_("div",y1e,[L(y(ko),{disabled:!i.value,onClick:r,color:i.value?"blue1":"gray3",class:"mt-1.5 h-12 w-full text-base uppercase text-center shadow-st rounded-2xl"},{default:j(()=>l[2]||(l[2]=[be(" Xác nhận ")])),_:1},8,["disabled","color"]),_("div",{class:"text-center text-sm mt-4"},[l[3]||(l[3]=be(" Chưa nhận được? ")),_("span",{onClick:s,class:"text-blue1 font-medium"},"Gửi lại"),l[4]||(l[4]=be(" hoặc ")),_("span",{onClick:o,class:"text-blue1 font-medium"},"sử dụng email khác")])])])]),_:1}))}}),x1e=Xi(w1e,[["__scopeId","data-v-081651e9"]]),_1e={class:"flex flex-1 flex-col items-center justify-center bg-white1 px-4"},k1e={class:"w-full"},E1e=Fe({__name:"ForgotPassScreen",setup(n){const e=Sh(),t=K(),i=()=>{e.push({name:"SentResetSuccessScreen"})};return(s,r)=>(I(),ve(y(Dn),null,{default:j(()=>[_("div",_1e,[r[2]||(r[2]=_("img",{src:Ol,class:"w-auto object-contain size-9 mb-7"},null,-1)),r[3]||(r[3]=_("span",{class:"text-black1 text-xl font-medium text-center mb-2"},"Quên mật khẩu",-1)),r[4]||(r[4]=_("span",{class:"text-black1 text-base font-light text-center mb-7"}," Nhập địa chỉ email và chúng tôi sẽ gửi link reset mật khẩu của bạn ",-1)),L(y(Tn),{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=o=>t.value=o),mode:"md",fill:"outline",label:"Nhập email",placeholder:"Nhập email","label-placement":"floating",class:"outline-none text-sm font-light mb-4",color:"blue1"},null,8,["modelValue"]),_("div",k1e,[L(y(ko),{onClick:i,disabled:!t.value,color:t.value?"blue1":"gray3",class:"mt-4 h-12 w-full text-sm uppercase text-center shadow-sm rounded-xl"},{default:j(()=>r[1]||(r[1]=[be(" Gửi thông tin ")])),_:1},8,["disabled","color"])])])]),_:1}))}}),T1e=Xi(E1e,[["__scopeId","data-v-40a56fc9"]]),C1e={class:"flex flex-1 flex-col items-center justify-center bg-white1 px-4"},S1e={class:"w-full"},A1e=Fe({__name:"SentResetSuccessScreen",setup(n){const e=Sh(),t=()=>{e.replace({name:"LoginScreen"})};return(i,s)=>(I(),ve(y(Dn),null,{default:j(()=>[_("div",C1e,[s[1]||(s[1]=_("img",{src:Ol,class:"w-auto object-contain size-9 mb-7"},null,-1)),s[2]||(s[2]=_("span",{class:"text-black1 text-xl font-medium text-center mb-2"},"Vui lòng kiểm tra email",-1)),s[3]||(s[3]=_("span",{class:"text-black1 text-base font-light text-center mb-2"}," Chúng tôi đã gửi link reset mật khẩu tới email của bạn ",-1)),_("div",S1e,[L(y(ko),{onClick:t,color:"blue1",class:"mt-4 h-12 w-full text-sm uppercase text-center shadow-sm rounded-2xl"},{default:j(()=>s[0]||(s[0]=[be(" Đã hiểu ")])),_:1})])])]),_:1}))}}),I1e={},P1e={class:"flex flex-col items-center justify-center h-full text-gray-700"};function R1e(n,e){return I(),O("div",P1e,e[0]||(e[0]=[_("h1",{class:"text-lg font-medium"},"Không có tin nhắn nào",-1),_("h4",{class:"text-xs font-light"},"Tin nhắn mới sẽ hiển thị tại đây.",-1)]))}const $1e=Xi(I1e,[["render",R1e]]),L1e={},O1e={class:"py-2 pr-2 pl-5 w-full text-xs font-light"};function D1e(n,e){return I(),O("div",O1e,e[0]||(e[0]=[_("ul",null,[_("li",null,"Chỉ tạo được khi ở trong cộng đồng"),_("li",null,"Cần Avatar nhóm và tên nhóm"),_("li",null,[be("Thành viên tối thiểu "),_("span",{class:"font-medium"},"2"),be(" người")])],-1)]))}const M1e=Xi(L1e,[["render",D1e]]);var Rf;(function(n){n.Prompt="PROMPT",n.Camera="CAMERA",n.Photos="PHOTOS"})(Rf||(Rf={}));var xg;(function(n){n.Rear="REAR",n.Front="FRONT"})(xg||(xg={}));var Ky;(function(n){n.Uri="uri",n.Base64="base64",n.DataUrl="dataUrl"})(Ky||(Ky={}));class mB extends yx{async getPhoto(e){return new Promise(async(t,i)=>{if(e.webUseInput||e.source===Rf.Photos)this.fileInputExperience(e,t,i);else if(e.source===Rf.Prompt){let s=document.querySelector("pwa-action-sheet");s||(s=document.createElement("pwa-action-sheet"),document.body.appendChild(s)),s.header=e.promptLabelHeader||"Photo",s.cancelable=!1,s.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],s.addEventListener("onSelection",async r=>{r.detail===0?this.fileInputExperience(e,t,i):this.cameraExperience(e,t,i)})}else this.cameraExperience(e,t,i)})}async pickImages(e){return new Promise(async(t,i)=>{this.multipleFileInputExperience(t,i)})}async cameraExperience(e,t,i){if(customElements.get("pwa-camera-modal")){const s=document.createElement("pwa-camera-modal");s.facingMode=e.direction===xg.Front?"user":"environment",document.body.appendChild(s);try{await s.componentOnReady(),s.addEventListener("onPhoto",async r=>{const o=r.detail;o===null?i(new Hf("User cancelled photos app")):o instanceof Error?i(o):t(await this._getCameraPhoto(o,e)),s.dismiss(),document.body.removeChild(s)}),s.present()}catch(r){this.fileInputExperience(e,t,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,i)}fileInputExperience(e,t,i){let s=document.querySelector("#_capacitor-camera-input");const r=()=>{var o;(o=s.parentNode)===null||o===void 0||o.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input",s.type="file",s.hidden=!0,document.body.appendChild(s),s.addEventListener("change",o=>{const a=s.files[0];let l="jpeg";if(a.type==="image/png"?l="png":a.type==="image/gif"&&(l="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){const c=new FileReader;c.addEventListener("load",()=>{if(e.resultType==="dataUrl")t({dataUrl:c.result,format:l});else if(e.resultType==="base64"){const d=c.result.split(",")[1];t({base64String:d,format:l})}r()}),c.readAsDataURL(a)}else t({webPath:URL.createObjectURL(a),format:l}),r()}),s.addEventListener("cancel",o=>{i(new Hf("User cancelled photos app")),r()})),s.accept="image/*",s.capture=!0,e.source===Rf.Photos||e.source===Rf.Prompt?s.removeAttribute("capture"):e.direction===xg.Front?s.capture="user":e.direction===xg.Rear&&(s.capture="environment"),s.click()}multipleFileInputExperience(e,t){let i=document.querySelector("#_capacitor-camera-input-multiple");const s=()=>{var r;(r=i.parentNode)===null||r===void 0||r.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",r=>{const o=[];for(let a=0;a<i.files.length;a++){const l=i.files[a];let c="jpeg";l.type==="image/png"?c="png":l.type==="image/gif"&&(c="gif"),o.push({webPath:URL.createObjectURL(l),format:c})}e({photos:o}),s()}),i.addEventListener("cancel",r=>{t(new Hf("User cancelled photos app")),s()})),i.accept="image/*",i.click()}_getCameraPhoto(e,t){return new Promise((i,s)=>{const r=new FileReader,o=e.type.split("/")[1];t.resultType==="uri"?i({webPath:URL.createObjectURL(e),format:o,saved:!1}):(r.readAsDataURL(e),r.onloadend=()=>{const a=r.result;t.resultType==="dataUrl"?i({dataUrl:a,format:o,saved:!1}):i({base64String:a.split(",")[1],format:o,saved:!1})},r.onerror=a=>{s(a)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new mB;const $x=Na("Camera",{web:()=>new mB});var wb={},VA={};function N1e(n,e,t){for(var i=0,s=0,r=t.length;s<r;s++)i=t.charCodeAt(s),i<128?n.setUint8(e++,i):i<2048?(n.setUint8(e++,192|i>>6),n.setUint8(e++,128|i&63)):i<55296||i>=57344?(n.setUint8(e++,224|i>>12),n.setUint8(e++,128|i>>6&63),n.setUint8(e++,128|i&63)):(s++,i=65536+((i&1023)<<10|t.charCodeAt(s)&1023),n.setUint8(e++,240|i>>18),n.setUint8(e++,128|i>>12&63),n.setUint8(e++,128|i>>6&63),n.setUint8(e++,128|i&63))}function F1e(n){for(var e=0,t=0,i=0,s=n.length;i<s;i++)e=n.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function tg(n,e,t){var i=typeof t,s=0,r=0,o=0,a=0,l=0,c=0;if(i==="string"){if(l=F1e(t),l<32)n.push(l|160),c=1;else if(l<256)n.push(217,l),c=2;else if(l<65536)n.push(218,l>>8,l),c=3;else if(l<4294967296)n.push(219,l>>24,l>>16,l>>8,l),c=5;else throw new Error("String too long");return e.push({_str:t,_length:l,_offset:n.length}),c+l}if(i==="number")return Math.floor(t)!==t||!isFinite(t)?(n.push(203),e.push({_float:t,_length:8,_offset:n.length}),9):t>=0?t<128?(n.push(t),1):t<256?(n.push(204,t),2):t<65536?(n.push(205,t>>8,t),3):t<4294967296?(n.push(206,t>>24,t>>16,t>>8,t),5):(o=t/Math.pow(2,32)>>0,a=t>>>0,n.push(207,o>>24,o>>16,o>>8,o,a>>24,a>>16,a>>8,a),9):t>=-32?(n.push(t),1):t>=-128?(n.push(208,t),2):t>=-32768?(n.push(209,t>>8,t),3):t>=-2147483648?(n.push(210,t>>24,t>>16,t>>8,t),5):(o=Math.floor(t/Math.pow(2,32)),a=t>>>0,n.push(211,o>>24,o>>16,o>>8,o,a>>24,a>>16,a>>8,a),9);if(i==="object"){if(t===null)return n.push(192),1;if(Array.isArray(t)){if(l=t.length,l<16)n.push(l|144),c=1;else if(l<65536)n.push(220,l>>8,l),c=3;else if(l<4294967296)n.push(221,l>>24,l>>16,l>>8,l),c=5;else throw new Error("Array too large");for(s=0;s<l;s++)c+=tg(n,e,t[s]);return c}if(t instanceof Date){var d=t.getTime();return o=Math.floor(d/Math.pow(2,32)),a=d>>>0,n.push(215,0,o>>24,o>>16,o>>8,o,a>>24,a>>16,a>>8,a),10}if(t instanceof ArrayBuffer){if(l=t.byteLength,l<256)n.push(196,l),c=2;else if(l<65536)n.push(197,l>>8,l),c=3;else if(l<4294967296)n.push(198,l>>24,l>>16,l>>8,l),c=5;else throw new Error("Buffer too large");return e.push({_bin:t,_length:l,_offset:n.length}),c+l}if(typeof t.toJSON=="function")return tg(n,e,t.toJSON());var u=[],h="",f=Object.keys(t);for(s=0,r=f.length;s<r;s++)h=f[s],typeof t[h]!="function"&&u.push(h);if(l=u.length,l<16)n.push(l|128),c=1;else if(l<65536)n.push(222,l>>8,l),c=3;else if(l<4294967296)n.push(223,l>>24,l>>16,l>>8,l),c=5;else throw new Error("Object too large");for(s=0;s<l;s++)h=u[s],c+=tg(n,e,h),c+=tg(n,e,t[h]);return c}if(i==="boolean")return n.push(t?195:194),1;if(i==="undefined")return n.push(212,0,0),3;throw new Error("Could not encode")}function B1e(n){var e=[],t=[],i=tg(e,t,n),s=new ArrayBuffer(i),r=new DataView(s),o=0,a=0,l=-1;t.length>0&&(l=t[0]._offset);for(var c,d=0,u=0,h=0,f=e.length;h<f;h++)if(r.setUint8(a+h,e[h]),h+1===l){if(c=t[o],d=c._length,u=a+l,c._bin)for(var m=new Uint8Array(c._bin),g=0;g<d;g++)r.setUint8(u+g,m[g]);else c._str?N1e(r,u,c._str):c._float!==void 0&&r.setFloat64(u,c._float);o++,a+=d,t[o]&&(l=t[o]._offset)}return s}var V1e=B1e;function tm(n){if(this._offset=0,n instanceof ArrayBuffer)this._buffer=n,this._view=new DataView(this._buffer);else if(ArrayBuffer.isView(n))this._buffer=n.buffer,this._view=new DataView(this._buffer,n.byteOffset,n.byteLength);else throw new Error("Invalid argument")}function U1e(n,e,t){for(var i="",s=0,r=e,o=e+t;r<o;r++){var a=n.getUint8(r);if(!(a&128)){i+=String.fromCharCode(a);continue}if((a&224)===192){i+=String.fromCharCode((a&31)<<6|n.getUint8(++r)&63);continue}if((a&240)===224){i+=String.fromCharCode((a&15)<<12|(n.getUint8(++r)&63)<<6|(n.getUint8(++r)&63)<<0);continue}if((a&248)===240){s=(a&7)<<18|(n.getUint8(++r)&63)<<12|(n.getUint8(++r)&63)<<6|(n.getUint8(++r)&63)<<0,s>=65536?(s-=65536,i+=String.fromCharCode((s>>>10)+55296,(s&1023)+56320)):i+=String.fromCharCode(s);continue}throw new Error("Invalid byte "+a.toString(16))}return i}tm.prototype._array=function(n){for(var e=new Array(n),t=0;t<n;t++)e[t]=this._parse();return e};tm.prototype._map=function(n){for(var e="",t={},i=0;i<n;i++)e=this._parse(),t[e]=this._parse();return t};tm.prototype._str=function(n){var e=U1e(this._view,this._offset,n);return this._offset+=n,e};tm.prototype._bin=function(n){var e=this._buffer.slice(this._offset,this._offset+n);return this._offset+=n,e};tm.prototype._parse=function(){var n=this._view.getUint8(this._offset++),e,t=0,i=0,s=0,r=0;if(n<192)return n<128?n:n<144?this._map(n&15):n<160?this._array(n&15):this._str(n&31);if(n>223)return(255-n+1)*-1;switch(n){case 192:return null;case 194:return!1;case 195:return!0;case 196:return t=this._view.getUint8(this._offset),this._offset+=1,this._bin(t);case 197:return t=this._view.getUint16(this._offset),this._offset+=2,this._bin(t);case 198:return t=this._view.getUint32(this._offset),this._offset+=4,this._bin(t);case 199:return t=this._view.getUint8(this._offset),i=this._view.getInt8(this._offset+1),this._offset+=2,[i,this._bin(t)];case 200:return t=this._view.getUint16(this._offset),i=this._view.getInt8(this._offset+2),this._offset+=3,[i,this._bin(t)];case 201:return t=this._view.getUint32(this._offset),i=this._view.getInt8(this._offset+4),this._offset+=5,[i,this._bin(t)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return s=this._view.getUint32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,s+r;case 212:if(i=this._view.getInt8(this._offset),this._offset+=1,i===0){this._offset+=1;return}return[i,this._bin(1)];case 213:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(2)];case 214:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(4)];case 215:return i=this._view.getInt8(this._offset),this._offset+=1,i===0?(s=this._view.getInt32(this._offset)*Math.pow(2,32),r=this._view.getUint32(this._offset+4),this._offset+=8,new Date(s+r)):[i,this._bin(8)];case 216:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(16)];case 217:return t=this._view.getUint8(this._offset),this._offset+=1,this._str(t);case 218:return t=this._view.getUint16(this._offset),this._offset+=2,this._str(t);case 219:return t=this._view.getUint32(this._offset),this._offset+=4,this._str(t);case 220:return t=this._view.getUint16(this._offset),this._offset+=2,this._array(t);case 221:return t=this._view.getUint32(this._offset),this._offset+=4,this._array(t);case 222:return t=this._view.getUint16(this._offset),this._offset+=2,this._map(t);case 223:return t=this._view.getUint32(this._offset),this._offset+=4,this._map(t)}throw new Error("Could not parse")};function z1e(n){var e=new tm(n),t=e._parse();if(e._offset!==n.byteLength)throw new Error(n.byteLength-e._offset+" trailing bytes");return t}var H1e=z1e;VA.encode=V1e;VA.decode=H1e;var gB={exports:{}};(function(n){n.exports=e;function e(i){if(i)return t(i)}function t(i){for(var s in e.prototype)i[s]=e.prototype[s];return i}e.prototype.on=e.prototype.addEventListener=function(i,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(s),this},e.prototype.once=function(i,s){function r(){this.off(i,r),s.apply(this,arguments)}return r.fn=s,this.on(i,r),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(i,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+i];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var o,a=0;a<r.length;a++)if(o=r[a],o===s||o.fn===s){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+i],this},e.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+i],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(r){r=r.slice(0);for(var o=0,a=r.length;o<a;++o)r[o].apply(this,s)}return this},e.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},e.prototype.hasListeners=function(i){return!!this.listeners(i).length}})(gB);var j1e=gB.exports,bB=VA,G1e=j1e;wb.protocol=5;var _g=wb.PacketType={CONNECT:0,DISCONNECT:1,EVENT:2,ACK:3,CONNECT_ERROR:4},O6=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n},vB=function(n){return typeof n=="string"},D6=function(n){return Object.prototype.toString.call(n)==="[object Object]"};function yB(){}yB.prototype.encode=function(n){return[bB.encode(n)]};function xb(){}G1e(xb.prototype);xb.prototype.add=function(n){var e=bB.decode(n);this.checkPacket(e),this.emit("decoded",e)};function W1e(n){switch(n.type){case _g.CONNECT:return n.data===void 0||D6(n.data);case _g.DISCONNECT:return n.data===void 0;case _g.CONNECT_ERROR:return vB(n.data)||D6(n.data);default:return Array.isArray(n.data)}}xb.prototype.checkPacket=function(n){var e=O6(n.type)&&n.type>=_g.CONNECT&&n.type<=_g.CONNECT_ERROR;if(!e)throw new Error("invalid packet type");if(!vB(n.nsp))throw new Error("invalid namespace");if(!W1e(n))throw new Error("invalid payload");var t=n.id===void 0||O6(n.id);if(!t)throw new Error("invalid packet id")};xb.prototype.destroy=function(){};wb.Encoder=yB;wb.Decoder=xb;const q1e="https://chat.unica.expert",K1e={chat:{url:q1e+"/message",transports:["websocket"],options:{transports:["websocket"],autoConnect:!1,reconnection:!0,reconnectionAttempts:15,reconnectionDelay:1500,parser:wb}}},Il=Object.create(null);Il.open="0";Il.close="1";Il.ping="2";Il.pong="3";Il.message="4";Il.upgrade="5";Il.noop="6";const Nv=Object.create(null);Object.keys(Il).forEach(n=>{Nv[Il[n]]=n});const VT={type:"error",data:"parser error"},wB=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",xB=typeof ArrayBuffer=="function",_B=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,UA=({type:n,data:e},t,i)=>wB&&e instanceof Blob?t?i(e):M6(e,i):xB&&(e instanceof ArrayBuffer||_B(e))?t?i(e):M6(new Blob([e]),i):i(Il[n]+(e||"")),M6=(n,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(n)};function N6(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let uk;function Y1e(n,e){if(wB&&n.data instanceof Blob)return n.data.arrayBuffer().then(N6).then(e);if(xB&&(n.data instanceof ArrayBuffer||_B(n.data)))return e(N6(n.data));UA(n,!1,t=>{uk||(uk=new TextEncoder),e(uk.encode(t))})}const F6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ng=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<F6.length;n++)ng[F6.charCodeAt(n)]=n;const X1e=n=>{let e=n.length*.75,t=n.length,i,s=0,r,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const c=new ArrayBuffer(e),d=new Uint8Array(c);for(i=0;i<t;i+=4)r=ng[n.charCodeAt(i)],o=ng[n.charCodeAt(i+1)],a=ng[n.charCodeAt(i+2)],l=ng[n.charCodeAt(i+3)],d[s++]=r<<2|o>>4,d[s++]=(o&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return c},Q1e=typeof ArrayBuffer=="function",zA=(n,e)=>{if(typeof n!="string")return{type:"message",data:kB(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Z1e(n.substring(1),e)}:Nv[t]?n.length>1?{type:Nv[t],data:n.substring(1)}:{type:Nv[t]}:VT},Z1e=(n,e)=>{if(Q1e){const t=X1e(n);return kB(t,e)}else return{base64:!0,data:n}},kB=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},EB="",J1e=(n,e)=>{const t=n.length,i=new Array(t);let s=0;n.forEach((r,o)=>{UA(r,!1,a=>{i[o]=a,++s===t&&e(i.join(EB))})})},eve=(n,e)=>{const t=n.split(EB),i=[];for(let s=0;s<t.length;s++){const r=zA(t[s],e);if(i.push(r),r.type==="error")break}return i};function tve(){return new TransformStream({transform(n,e){Y1e(n,t=>{const i=t.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const r=new DataView(s.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{s=new Uint8Array(9);const r=new DataView(s.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}n.data&&typeof n.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let hk;function W1(n){return n.reduce((e,t)=>e+t.length,0)}function q1(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let i=0;for(let s=0;s<e;s++)t[s]=n[0][i++],i===n[0].length&&(n.shift(),i=0);return n.length&&i<n[0].length&&(n[0]=n[0].slice(i)),t}function nve(n,e){hk||(hk=new TextDecoder);const t=[];let i=0,s=-1,r=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(i===0){if(W1(t)<1)break;const l=q1(t,1);r=(l[0]&128)===128,s=l[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if(W1(t)<2)break;const l=q1(t,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(W1(t)<8)break;const l=q1(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(VT);break}s=d*Math.pow(2,32)+c.getUint32(4),i=3}else{if(W1(t)<s)break;const l=q1(t,s);a.enqueue(zA(r?l:hk.decode(l),e)),i=0}if(s===0||s>n){a.enqueue(VT);break}}}})}const TB=4;function As(n){if(n)return ive(n)}function ive(n){for(var e in As.prototype)n[e]=As.prototype[e];return n}As.prototype.on=As.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};As.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};As.prototype.off=As.prototype.removeListener=As.prototype.removeAllListeners=As.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,s=0;s<t.length;s++)if(i=t[s],i===e||i.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+n],this};As.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,s=t.length;i<s;++i)t[i].apply(this,e)}return this};As.prototype.emitReserved=As.prototype.emit;As.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};As.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Lx=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),zo=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),sve="arraybuffer";function CB(n,...e){return e.reduce((t,i)=>(n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}const rve=zo.setTimeout,ove=zo.clearTimeout;function Ox(n,e){e.useNativeTimers?(n.setTimeoutFn=rve.bind(zo),n.clearTimeoutFn=ove.bind(zo)):(n.setTimeoutFn=zo.setTimeout.bind(zo),n.clearTimeoutFn=zo.clearTimeout.bind(zo))}const ave=1.33;function lve(n){return typeof n=="string"?cve(n):Math.ceil((n.byteLength||n.size)*ave)}function cve(n){let e=0,t=0;for(let i=0,s=n.length;i<s;i++)e=n.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function SB(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function dve(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function uve(n){let e={},t=n.split("&");for(let i=0,s=t.length;i<s;i++){let r=t[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class hve extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class HA extends As{constructor(e){super(),this.writable=!1,Ox(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new hve(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=zA(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=dve(e);return t.length?"?"+t:""}}class fve extends HA{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};eve(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,J1e(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=SB()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let AB=!1;try{AB=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(n){}const pve=AB;function mve(){}class gve extends fve{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}let Gf=class Fv extends As{constructor(e,t,i){super(),this.createRequest=e,Ox(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=CB(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this._opts.extraHeaders[s])}}catch(s){}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{i.setRequestHeader("Accept","*/*")}catch(s){}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Fv.requestsCount++,Fv.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mve,e)try{this._xhr.abort()}catch(t){}typeof document<"u"&&delete Fv.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Gf.requestsCount=0;Gf.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",B6);else if(typeof addEventListener=="function"){const n="onpagehide"in zo?"pagehide":"unload";addEventListener(n,B6,!1)}}function B6(){for(let n in Gf.requests)Gf.requests.hasOwnProperty(n)&&Gf.requests[n].abort()}const bve=function(){const n=IB({xdomain:!1});return n&&n.responseType!==null}();class vve extends gve{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=bve&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Gf(IB,this.uri(),e)}}function IB(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||pve))return new XMLHttpRequest}catch(t){}if(!e)try{return new zo[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}const PB=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yve extends HA{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=PB?{}:CB(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],s=t===e.length-1;UA(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch(o){}s&&Lx(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=SB()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const fk=zo.WebSocket||zo.MozWebSocket;class wve extends yve{createSocket(e,t,i){return PB?new fk(e,t,i):t?new fk(e,t):new fk(e)}doWrite(e,t){this.ws.send(t)}}class xve extends HA{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=nve(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),s=tve();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const r=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],s=t===e.length-1;this._writer.write(i).then(()=>{s&&Lx(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const _ve={websocket:wve,webtransport:xve,polling:vve},kve=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Eve=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function UT(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),i=n.indexOf("]");t!=-1&&i!=-1&&(n=n.substring(0,t)+n.substring(t,i).replace(/:/g,";")+n.substring(i,n.length));let s=kve.exec(n||""),r={},o=14;for(;o--;)r[Eve[o]]=s[o]||"";return t!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Tve(r,r.path),r.queryKey=Cve(r,r.query),r}function Tve(n,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Cve(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(t[s]=r)}),t}const zT=typeof addEventListener=="function"&&typeof removeEventListener=="function",Bv=[];zT&&addEventListener("offline",()=>{Bv.forEach(n=>n())},!1);class Pd extends As{constructor(e,t){if(super(),this.binaryType=sve,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=UT(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=UT(t.host).host);Ox(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const s=i.prototype.name;this.transports.push(s),this._transportsByName[s]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uve(this.opts.query)),zT&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Bv.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=TB,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Pd.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Pd.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(t+=lve(s)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Lx(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,s){if(typeof t=="function"&&(s=t,t=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:t,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(Pd.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zT&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Bv.indexOf(this._offlineEventListener);i!==-1&&Bv.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Pd.protocol=TB;class Sve extends Pd{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;Pd.priorWebsocketSuccess=!1;const s=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",u=>{if(!i)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Pd.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function r(){i||(i=!0,d(),t.close(),t=null)}const o=u=>{const h=new Error("probe error: "+u);h.transport=t.name,r(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(u){t&&u.name!==t.name&&r()}const d=()=>{t.removeListener("open",s),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};t.once("open",s),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let Ave=class extends Sve{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(s=>_ve[s]).filter(s=>!!s)),super(e,i)}};function Ive(n,e="",t){let i=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),i=UT(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(t&&t.port===i.port?"":":"+i.port),i}const Pve=typeof ArrayBuffer=="function",Rve=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,RB=Object.prototype.toString,$ve=typeof Blob=="function"||typeof Blob<"u"&&RB.call(Blob)==="[object BlobConstructor]",Lve=typeof File=="function"||typeof File<"u"&&RB.call(File)==="[object FileConstructor]";function jA(n){return Pve&&(n instanceof ArrayBuffer||Rve(n))||$ve&&n instanceof Blob||Lve&&n instanceof File}function Vv(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,i=n.length;t<i;t++)if(Vv(n[t]))return!0;return!1}if(jA(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Vv(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Vv(n[t]))return!0;return!1}function Ove(n){const e=[],t=n.data,i=n;return i.data=HT(t,e),i.attachments=e.length,{packet:i,buffers:e}}function HT(n,e){if(!n)return n;if(jA(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let i=0;i<n.length;i++)t[i]=HT(n[i],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=HT(n[i],e));return t}return n}function Dve(n,e){return n.data=jT(n.data,e),delete n.attachments,n}function jT(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=jT(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=jT(n[t],e));return n}const Mve=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Nve=5;var qn;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(qn||(qn={}));class Fve{constructor(e){this.replacer=e}encode(e){return(e.type===qn.EVENT||e.type===qn.ACK)&&Vv(e)?this.encodeAsBinary({type:e.type===qn.EVENT?qn.BINARY_EVENT:qn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===qn.BINARY_EVENT||e.type===qn.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Ove(e),i=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(i),s}}function V6(n){return Object.prototype.toString.call(n)==="[object Object]"}class GA extends As{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===qn.BINARY_EVENT;i||t.type===qn.BINARY_ACK?(t.type=i?qn.EVENT:qn.ACK,this.reconstructor=new Bve(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(jA(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(qn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===qn.BINARY_EVENT||i.type===qn.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(r,t)}else i.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const r=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}i.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(GA.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case qn.CONNECT:return V6(t);case qn.DISCONNECT:return t===void 0;case qn.CONNECT_ERROR:return typeof t=="string"||V6(t);case qn.EVENT:case qn.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Mve.indexOf(t[0])===-1);case qn.ACK:case qn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Bve{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Dve(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Vve=Object.freeze(Object.defineProperty({__proto__:null,Decoder:GA,Encoder:Fve,get PacketType(){return qn},protocol:Nve},Symbol.toStringTag,{value:"Module"}));function ga(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const Uve=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $B extends As{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ga(e,"open",this.onopen.bind(this)),ga(e,"packet",this.onpacket.bind(this)),ga(e,"error",this.onerror.bind(this)),ga(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,s,r;if(Uve.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:qn.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,u=t.pop();this._registerAckCallback(d,u),o.id=d}const a=(s=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(r),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((i,s)=>{const r=(o,a)=>o?s(o):i(a);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qn.EVENT:case qn.BINARY_EVENT:this.onevent(e);break;case qn.ACK:case qn.BINARY_ACK:this.onack(e);break;case qn.DISCONNECT:this.ondisconnect();break;case qn.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...s){i||(i=!0,t.packet({type:qn.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function nm(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}nm.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};nm.prototype.reset=function(){this.attempts=0};nm.prototype.setMin=function(n){this.ms=n};nm.prototype.setMax=function(n){this.max=n};nm.prototype.setJitter=function(n){this.jitter=n};class GT extends As{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Ox(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new nm({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||Vve;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ave(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=ga(t,"open",function(){i.onopen(),e&&e()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=ga(t,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),r(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ga(e,"ping",this.onping.bind(this)),ga(e,"data",this.ondata.bind(this)),ga(e,"error",this.onerror.bind(this)),ga(e,"close",this.onclose.bind(this)),ga(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Lx(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new $B(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fm={};function Uv(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=Ive(n,e.path||"/socket.io"),i=t.source,s=t.id,r=t.path,o=Fm[s]&&r in Fm[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new GT(i,e):(Fm[s]||(Fm[s]=new GT(i,e)),l=Fm[s]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(Uv,{Manager:GT,Socket:$B,io:Uv,connect:Uv});const U6="chat",Rr=Yd("socket-chat",()=>{const n=en(),{accessToken:e}=et(n),t=K(),i=lt(()=>!J.isUndefined(t.value));return{isConnected:i,socketApp:t,socketInit:async()=>{if(!J.isUndefined(e.value)){const d=K1e[U6];if(!d)throw new Error("Không tìm thấy cấu hình nào cho tên: ".concat(U6));const u={...d==null?void 0:d.options,auth:{token:e.value}};t.value=Uv(d.url,u),t.value.on("connect",()=>{console.log("connected")})}},sendMessageSocket:(c,d,u=()=>{})=>{var h;i.value&&((h=t.value)==null||h.emit(c.trim(),d,u))},onEventSocket:(c,d)=>{var u;console.log("onEventSocket",t.value),(u=t.value)==null||u.on(c,d)},offEventSocket:(c,d)=>{var u;i.value&&((u=t.value)==null||u.off(c,d))},disconnect:()=>{var c;(c=t.value)==null||c.disconnect(),t.value=void 0}}}),{VITE_API_URL_CHAT:zve}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},Vd=li.create({baseURL:zve,headers:{Accept:"Application/json"}});Vd.interceptors.request.use(async n=>{const e=en(),{accessToken:t}=et(e);return t.value&&(n.headers.Authorization="Bearer ".concat(t.value)),n},async n=>(console.log("request",n),n));Vd.interceptors.response.use(async n=>n,async n=>(console.log("🚀 ~ error:",n),n.status,n));const Hve={class:"flex justify-center text-center gap-1"},jve={class:"pb-8 pt-2"},Gve={class:"flex justify-center flex-col items-center gap-3"},Wve={class:"size-28 border-2 flex border-white3 rounded-full overflow-hidden"},qve=["src"],Kve={class:"absolute bottom-0 right-0 bg-white3 flex items-center p-1 rounded-full border-2 border-white"},Yve={slot:"label"},Xve={key:0,class:"mt-4 min-h-24"},Qve={class:"flex overflow-x-auto gap-2.5 scrollbar-hidden"},Zve={class:"w-16 flex flex-col items-center text-center gap-1"},Jve={class:"relative flex size-14"},eye=["src"],tye=["onClick"],nye={class:"text-[10px] font-light"},iye=["onClick"],sye=["src"],rye={class:"flex-1 font-medium [overflow-wrap:anywhere]"},oye=Fe({__name:"ModalCreateNewChat",setup(n){const e=K(),t=Rr(),{userInfo:i}=et(en()),s=K(1),r=K(!1),o=K(""),a=K([]),l=K([]),c=Yi({name:"",user_ids:[]}),d=()=>{qe.dismiss()},u=async C=>{await(await EA.create({component:M1e,event:C,mode:"ios"})).present()},h=async()=>{const C=await $x.getPhoto({quality:30,resultType:Ky.DataUrl});if(C!=null&&C.dataUrl){const A=C.dataUrl.split(",")[0].split(":")[1].split(";")[0],R=f(C.dataUrl,A),M=Date.now(),N="avatar_".concat(M,".png"),U=new File([R],N,{type:A!=null?A:"image/jpeg"}),G=new FileReader;G.onload=()=>{c.avatar=G.result,e.value=C.dataUrl},G.readAsArrayBuffer(U)}},f=(C,A)=>{const R=atob(C.split(",")[1]),M=new Array(R.length);for(let U=0;U<R.length;U++)M[U]=R.charCodeAt(U);const N=new Uint8Array(M);return new Blob([N],{type:A})},m=async()=>{try{t.sendMessageSocket("createChatRoom",Object.assign({},c),async C=>{var A,R,M,N;if(console.log("112233",C),!J.isEmpty(C)){const U={...C,me:{conversation_id:C==null?void 0:C._id,created_at:C==null?void 0:C.created_at,is_admin:!0,notification:!0,user_id:C==null?void 0:C.created_by,user:{avatar:(A=i.value)==null?void 0:A.avatar,full_name:(R=i.value)==null?void 0:R.full_name,_id:(M=i.value)==null?void 0:M._id,id:(N=i.value)==null?void 0:N._id}}};await qe.dismiss(U,"newGroup")}})}catch(C){await qe.dismiss()}},g=async(C=1,A=!1,R="")=>{var N,U,G;const{data:M}=await Vd.get("/chat/members",{params:{page:C,limit:25,keyword:R}});J.isEmpty(M)?r.value=!1:((N=M==null?void 0:M.meta)!=null&&N.hasNextPage?(s.value++,r.value=!0):r.value=!1,A?a.value=[...a.value,...(U=M==null?void 0:M.data)!=null?U:[]]:a.value=(G=M==null?void 0:M.data)!=null?G:[])},b=()=>{g(1,!1,o.value),s.value=1,r.value=!1},w=C=>{const A=l.value.find(R=>R._id===(C==null?void 0:C._id));if(J.isEmpty(A))l.value.push(C),c.user_ids.push(C._id);else{const R=l.value.filter(N=>N._id!==(C==null?void 0:C._id));l.value=R;const M=R.map(N=>N._id);c.user_ids=M}},x=C=>{l.value.splice(C,1)},k=C=>{C.target.src="/upload-user.png"},E=C=>{g(s.value,!0),setTimeout(()=>C.target.complete(),500)};tr(()=>{g()});const T=()=>{o.value="",g(1,!1,""),s.value=1,r.value=!1},P=C=>{const A=l.value.find(R=>R._id===(C==null?void 0:C._id));return!J.isEmpty(A)};return(C,A)=>(I(),O(Ue,null,[L(y(Bn),{class:"ion-no-border px-2"},{default:j(()=>[L(y(An),{color:"white",mode:"ios"},{default:j(()=>[L(y(fe),{icon:y(Cp),class:"size-6 text-gray2 z-50",onClick:d},null,8,["icon"]),L(y(Qp),null,{default:j(()=>[_("div",Hve,[A[2]||(A[2]=_("div",null,"Tạo nhóm chat",-1)),L(y(fe),{onClick:u,icon:y(Obe),class:"size-6 text-gray3"},null,8,["icon"])])]),_:1}),c.avatar&&c.name&&!y(J.isEmpty)(c.user_ids)?(I(),O("div",{key:0,slot:"end",onClick:m,class:"font-medium text-blue1 z-50"}," Tạo ")):re("",!0)]),_:1})]),_:1}),L(y(At),{class:"ion-padding-horizontal",color:"white"},{default:j(()=>{var R;return[_("div",jve,[_("section",Gve,[_("div",{onClick:h,class:"relative rounded-full"},[_("div",Wve,[_("img",{src:(R=e.value)!=null?R:"/icGroup.png",class:"w-full object-cover"},null,8,qve)]),_("div",Kve,[L(y(fe),{icon:y(tB),class:"size-4 text-[#505050]"},null,8,["icon"])])])]),_("div",null,[L(y(Tn),{modelValue:c.name,"onUpdate:modelValue":A[0]||(A[0]=M=>c.name=M),mode:"md",fill:"outline",placeholder:"Tên nhóm",class:"outline-none my-4 text-sm font-light grname",required:"",type:"text","label-placement":"stacked",color:"blue1"},{default:j(()=>[_("div",Yve,[A[4]||(A[4]=be("Tên nhóm")),L(y(Ai),{color:"danger"},{default:j(()=>A[3]||(A[3]=[be("*")])),_:1})])]),_:1},8,["modelValue"])]),_("form",{onSubmit:qt(b,["prevent"]),class:"w-full bg-white3 flex items-center px-3 mb-2 rounded-xl"},[L(y(fe),{onClick:b,icon:y(Qd),class:"size-5 text-gray2"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":A[1]||(A[1]=M=>o.value=M),class:"w-full flex-1 py-1.5 pr-1 mx-2 bg-white3 outline-none",placeholder:"Tìm kiếm"},null,512),[[Ti,o.value]]),y(J.isEmpty)(o.value)?re("",!0):(I(),ve(y(fe),{key:0,onClick:T,icon:y(Ah),class:"size-5 text-gray2"},null,8,["icon"]))],32),y(J.isEmpty)(l.value)?re("",!0):(I(),O("section",Xve,[_("div",Qve,[(I(!0),O(Ue,null,ct(l.value,(M,N)=>{var U;return I(),O("div",{key:N,class:"flex-shrink-0"},[_("div",Zve,[_("div",Jve,[(I(),O("img",{src:(U=M==null?void 0:M.avatar)!=null?U:"/upload-user.png",key:M==null?void 0:M.avatar,class:"w-full rounded-full",placeholder:"/upload-user.png",onError:k},null,40,eye)),_("div",{onClick:G=>x(N),class:"bg-white4 absolute p-0.5 flex items-center rounded-full shadow-st right-0"},[L(y(fe),{icon:y(Cp),class:"size-4"},null,8,["icon"])],8,tye)]),_("div",nye,Q(M.full_name),1)])])}),128))])])),_("section",null,[(I(!0),O(Ue,null,ct(a.value,(M,N)=>{var U;return I(),O("div",{key:N},[_("div",{onClick:G=>w(M),class:"flex items-center gap-4"},[(I(),O("img",{src:(U=M==null?void 0:M.avatar)!=null?U:"/upload-user.png",key:M==null?void 0:M.avatar,class:"size-11 rounded-full",placeholder:"/upload-user.png",onError:k},null,40,sye)),_("div",{class:gt(["flex items-center flex-1 py-4",N<a.value.length-1&&" border-b-[0.15px]"])},[_("div",rye,Q(M.full_name),1),P(M)?(I(),ve(y(fe),{key:0,icon:y(MA),class:"size-7 text-blue1"},null,8,["icon"])):(I(),ve(y(fe),{key:1,icon:y(Ap),class:"size-7 text-gray2"},null,8,["icon"]))],2)],8,iye)])}),128))])]),r.value?(I(),ve(y(Zn),{key:0,onIonInfinite:E},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1})],64))}}),Bm={Youtube:"youtube",Vimeo:"vimeo",Link:"link",ImageBase64:"image-base64"},aye=n=>{let e=null,t;const i=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|embed|shorts|live)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=/vimeo\.com\/(\d+)/;return t=n.match(i),t&&t[1]?(e=t[1],"https://img.youtube.com/vi/".concat(e,"/0.jpg")):(t=n.match(s),t&&t[1]?(e=t[1],"https://vumbnail.com/".concat(e,".jpg")):"")},LB=n=>{const e=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|embed|shorts|live)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,t=n.match(e);if(t){const i=t[1];return"https://www.youtube.com/embed/".concat(i)}return""},Yy=n=>{const e=[{regex:/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|embed|shorts|live)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,type:Bm.Youtube},{regex:/^(?:http|https)?:?\/?\/?(?:www\.)?(?:player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]*\/videos\/|video\/|)(?:|\/\?)/,type:Bm.Vimeo},{regex:/^((?:https?:\/\/|www\.)(?:[-a-z0-9]+\.)*[-a-z0-9]+.*)$/,type:Bm.Link},{regex:/blob:(https?|ftp):\/\/[^\s/$.?#].\S*\/[0-9a-fA-F-]{36}/,type:Bm.ImageBase64}];for(const t in e){const i=e[t];if(i!=null&&i.regex.test(n))return i.type}return Bm.Link},OB=n=>J.isUndefined(n)?"":n.replace(/<\/(p|div|li|h[1-6]|ul)>/g," ").replace(/<br\s*\/?>/g," ").replace(/<\/?[^>]+(>|$)/g,"").trim().replace(/\s+/g," "),z6=n=>J.isUndefined(n)?"":n.replace(/&nbsp;/gi," ").replace(/<\/(p|div|li|h[1-6]|ul)>/g," ").replace(/<br\s*\/?>/g," ").replace(/<\/?[^>]+(>|$)/g,"").trim().replace(/\s+/g," ");function DB(n){if(!n)return!1;try{JSON.parse(n)}catch(e){return!1}return!0}const lye=n=>(n==null?void 0:n.endsWith(".m3u8"))||DB(n),cye=n=>{if(_t(n).isValid()){const e=_t(new Date).isSame(n,"year"),t=_t(new Date).diff(n,"week");return _t(new Date).diff(n,"hour")<=24?_t(n).format("HH:mm"):t<1?_t(n).format("dddd"):e?_t(n).format("DD/MM"):_t(n).format("DD/MM/YY")}},WT={Default:"message",Notification:"notification"},dye={class:"flex"},uye=["src","placeholder"],hye={class:"flex-1"},fye={class:"flex"},pye={class:"flex-1"},mye={key:0,class:"text-sm text-gray-500 line-clamp-1"},gye={class:"font-medium"},bye={class:"flex items-center gap-2"},vye={class:"text-base font-medium line-clamp-1 break-all"},yye={key:0,class:"flex items-center"},wye={key:0,class:"text-sm text-gray2 pl-4"},xye={key:0,class:"flex items-center"},_ye={class:"break-all flex"},kye={key:0,class:"pr-1 break-all text-nowrap"},Eye={key:1,class:"text-nowrap"},Tye={class:"line-clamp-1"},Cye={key:1,class:"flex-1 mt-1 line-clamp-1 text-xs leading-5 text-gray-500"},MB=Fe({__name:"RoomItem",props:{conversation:{},onRoomPress:{type:Function,default:()=>{}},onRoomLongPress:{type:Function,default:()=>{}}},setup(n){const{VITE_API_SOCKET:e}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},t=n;let i=null;const s=()=>{r(),i=setTimeout(()=>{t.onRoomLongPress(),i=null},500)},r=()=>{i!==null&&(clearTimeout(i),i=null)},o=()=>{r()},{userInfo:a}=et(en()),l=lt(()=>{var h,f,m,g,b,w,x,k,E,T;if((h=t.conversation)!=null&&h.is_group)return{avatar:e+"/"+((f=t==null?void 0:t.conversation)==null?void 0:f.avatar),name:(m=t.conversation)==null?void 0:m.name,online:!1};if(((b=(g=t.conversation)==null?void 0:g.enemy)==null?void 0:b.user_id)===((w=a.value)==null?void 0:w._id)){const P=(k=(x=t.conversation)==null?void 0:x.me)==null?void 0:k.user;return{avatar:P==null?void 0:P.avatar,name:P==null?void 0:P.full_name,online:!J.isEmpty(P==null?void 0:P.socket_client_ids)}}else{const P=(T=(E=t.conversation)==null?void 0:E.enemy)==null?void 0:T.user;return{avatar:P==null?void 0:P.avatar,name:P==null?void 0:P.full_name,online:!J.isEmpty(P==null?void 0:P.socket_client_ids)}}}),c=lt(()=>{var h,f,m,g,b,w,x,k,E,T;return(h=t.conversation)!=null&&h.is_group?(m=(f=t.conversation)==null?void 0:f.me)==null?void 0:m.notification:((b=(g=t.conversation)==null?void 0:g.enemy)==null?void 0:b.user_id)===((w=a.value)==null?void 0:w._id)?(k=(x=t.conversation)==null?void 0:x.enemy)==null?void 0:k.notification:(T=(E=t.conversation)==null?void 0:E.me)==null?void 0:T.notification}),d=lt(()=>{var h,f,m,g,b;return!((f=(h=t==null?void 0:t.conversation)==null?void 0:h.me)!=null&&f.is_read)&&((g=(m=t==null?void 0:t.conversation)==null?void 0:m.last_message)==null?void 0:g.sender_id)!==((b=a.value)==null?void 0:b._id)}),u=h=>{var f;h.target.src=(f=t.conversation)!=null&&f.is_group?"/icGroup.png":"/upload-user.png"};return(h,f)=>{var m,g,b,w,x,k,E,T,P,C,A,R,M,N,U,G,B,te,X,ue,he,Ie;return I(),O("div",{class:"flex items-center flex-1 py-1.5",onClick:f[0]||(f[0]=(...xe)=>h.onRoomPress&&h.onRoomPress(...xe)),onTouchstart:s,onTouchend:r,onTouchmove:o},[_("div",dye,[(I(),O("img",{src:(g=l.value.avatar)!=null?g:(m=h.conversation)!=null&&m.is_group?"/icGroup.png":"/upload-user.png",key:l.value.avatar,onError:u,placeholder:(b=h.conversation)!=null&&b.is_group?"/icGroup.png":"/upload-user.png",class:"size-14 rounded-full bg-gray1 mr-3 object-cover"},null,40,uye))]),_("div",hye,[_("div",fye,[_("div",pye,[(w=h.conversation)!=null&&w.community?(I(),O("div",mye,[f[1]||(f[1]=be(" Từ ")),_("span",gye,Q((x=h.conversation.community)==null?void 0:x.name),1)])):re("",!0),_("div",bye,[_("div",vye,Q((k=l.value)==null?void 0:k.name),1),c.value?re("",!0):(I(),O("div",yye,[L(y(fe),{icon:y(Ube),class:"size-3.5 text-[#aaa]"},null,8,["icon"])]))])]),(E=h.conversation)!=null&&E.last_message_creation_time?(I(),O("span",wye,Q(y(cye)((T=h.conversation)==null?void 0:T.last_message_creation_time)),1)):re("",!0)]),(P=h.conversation)!=null&&P.last_message?(I(),O("div",xye,[h.conversation.last_message.type==y(WT).Notification?(I(),O("div",{key:0,class:gt([d.value?"font-medium":"text-gray2","text-sm line-clamp-1 w-full pt-1.5 break-all items-center"])},Q(y(z6)((A=(C=h.conversation)==null?void 0:C.last_message)==null?void 0:A.content)),3)):(I(),O(Ue,{key:1},[(R=h.conversation.last_message)!=null&&R.content?(I(),O("div",{key:0,class:gt([d.value?"font-medium":"text-gray2","text-sm line-clamp-1 w-full pt-1.5 flex"])},[_("div",_ye,[h.conversation.is_group?(I(),O("span",kye,Q((N=(M=h.conversation.last_message)==null?void 0:M.user_send)==null?void 0:N.full_name)+": ",1)):re("",!0),((U=h.conversation.last_message)==null?void 0:U.sender_id)===((G=y(a))==null?void 0:G._id)&&!h.conversation.is_group?(I(),O("span",Eye,"Bạn: ")):re("",!0),_("div",null,[_("span",Tye,Q(y(z6)((te=(B=h.conversation)==null?void 0:B.last_message)==null?void 0:te.content)),1)])])],2)):(ue=(X=h.conversation)==null?void 0:X.last_message)!=null&&ue.attachments?(I(),O("div",{key:1,class:gt([d.value?"font-medium":"text-gray2","text-sm line-clamp-1 w-full pt-1.5 break-all items-center"])},Q(((he=h.conversation.last_message.user_send)==null?void 0:he._id)===((Ie=y(a))==null?void 0:Ie._id)?"Bạn đã gửi một ảnh.":"".concat(l.value.name," đã gửi một ảnh.")),3)):re("",!0)],64))])):(I(),O("p",Cye," Hãy gửi lời chào đến các thành viên trong nhóm. "))])],32)}}}),Va=Yd("chat-store",()=>{const n=K(),e=K(0),t=K();return{activeRoom:n,newMsg:t,setActiveRoom:a=>{n.value=a},setNewChat:a=>{t.value=a},increaseCountMsg:()=>{e.value++},countNewMsg:e,resetCountNewMsg:()=>{e.value=0}}});class Sye extends yx{async write(e){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(e.string!==void 0)await this.writeText(e.string);else if(e.url)await this.writeText(e.url);else if(e.image)if(typeof ClipboardItem<"u")try{const t=await(await fetch(e.image)).blob(),i=new ClipboardItem({[t.type]:t});await navigator.clipboard.write([i])}catch(t){throw new Error("Failed to write image")}else throw this.unavailable("Writing images to the clipboard is not supported in this browser");else throw new Error("Nothing to write")}async read(){if(typeof navigator>"u"||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(typeof ClipboardItem<"u")try{const e=await navigator.clipboard.read(),t=e[0].types[0],i=await e[0].getType(t);return{value:await this._getBlobData(i,t),type:t}}catch(e){return this.readText()}else return this.readText()}async readText(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw this.unavailable("Reading from clipboard not supported in this browser");return{value:await navigator.clipboard.readText(),type:"text/plain"}}async writeText(e){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw this.unavailable("Writting to clipboard not supported in this browser");await navigator.clipboard.writeText(e)}_getBlobData(e,t){return new Promise((i,s)=>{const r=new FileReader;t.includes("image")?r.readAsDataURL(e):r.readAsText(e),r.onloadend=()=>{const o=r.result;i(o)},r.onerror=o=>{s(o)}})}}const Cc=Na("Clipboard",{web:()=>new Sye}),Aye={class:""},Iye={class:"bg-white px-2 rounded-lg"},Pye={class:"bg-[#ffffff] px-4 mt-2 rounded-xl mr-auto w-[55%] line-clamp-1"},Rye=["onClick"],$ye={class:"text-sm flex-1 line-clamp-1"},Lye={key:0,class:"flex items-center"},Oye=Fe({__name:"ModalRoomAction",props:{conversation:{}},setup(n){var d,u,h,f;const e=n,{userInfo:t}=et(en()),i=Rr(),s=()=>qe.dismiss(),r=lt(()=>{var m,g,b,w,x;return((g=(m=e.conversation)==null?void 0:m.enemy)==null?void 0:g.user_id)===((b=t.value)==null?void 0:b._id)?(w=e.conversation)==null?void 0:w.enemy:(x=e.conversation)==null?void 0:x.me}),o=()=>{i.sendMessageSocket("toggleNotificationConversation",{conversation_id:e.conversation._id},m=>{var g,b,w,x,k;if(((b=(g=e.conversation)==null?void 0:g.enemy)==null?void 0:b.user_id)===((w=t.value)==null?void 0:w._id)){const E={...(x=e.conversation)==null?void 0:x.enemy,notification:m.notification};qe.dismiss(E,"notify_enemy")}else{const E={...(k=e.conversation)==null?void 0:k.me,notification:m.notification};qe.dismiss(E,"notify_me")}})},a=async()=>{const m="https://unica.expert/messages/group/introduce/".concat(e.conversation._id);s(),await Cc.write({string:m}),tt("Sao chép thành công!","success")},l=[{label:(d=r.value)!=null&&d.notification?"Tắt thông báo":"Bật thông báo",icon:(u=r.value)!=null&&u.notification?FT:Wy,action:o},{label:"Lấy link nhóm",icon:Ix,action:a}],c=[{label:(h=r.value)!=null&&h.notification?"Tắt thông báo":"Bật thông báo",icon:(f=r.value)!=null&&f.notification?FT:Wy,action:o}];return(m,g)=>{var b;return I(),O("div",Aye,[_("div",Iye,[L(MB,{conversation:m.conversation},null,8,["conversation"])]),_("div",Pye,[(I(!0),O(Ue,null,ct((b=r.value)!=null&&b.is_admin&&m.conversation.is_group?l:c,(w,x)=>(I(),O("div",{key:x},[_("div",{onClick:w==null?void 0:w.action,class:gt(["py-2.5 flex gap-3",{"text-red-500":w.icon===y(cB)}])},[_("div",$ye,Q(w.label),1),w.icon?(I(),O("div",Lye,[L(y(fe),{icon:w.icon,class:"size-4"},null,8,["icon"])])):re("",!0)],10,Rye)]))),128))])])}}}),Dye={class:"ion-no-border px-2 pt-2 mt-4"},Mye={class:"flex items-center gap-2"},Nye={class:"flex items-center flex-1 w-full bg-white3 mr-4 px-4 rounded-3xl overflow-hidden"},Fye={class:"ion-padding"},Bye=["onClick"],Vye={class:"flex size-10"},Uye=["src"],zye=Fe({__name:"ModalSearchFriend",setup(n){const{userInfo:e}=et(en()),t=K(""),i=K(1),s=K(!1),r=K([]),o=Rr(),a=Va(),l=gn(),c=async(w=1,x=!1,k="")=>{var T,P,C,A;const{data:E}=await Qe.get("/friend-ship/all-friend",{params:{senderId:(T=e.value)==null?void 0:T._id,search:k,page:w,limit:20}});J.isEmpty(E)?s.value=!1:((P=E==null?void 0:E.meta)!=null&&P.hasNextPage?(i.value++,s.value=!0):s.value=!1,x?r.value=[...r.value,...(C=E==null?void 0:E.data)!=null?C:[]]:r.value=(A=E==null?void 0:E.data)!=null?A:[])},d=w=>{w.target.src="/upload-user.png"};tr(()=>{c()});const u=()=>qe.dismiss(),h=w=>{c(i.value,!0),setTimeout(()=>w.target.complete(),500)},f=async w=>{m(),setTimeout(()=>{w.target.complete()},500)},m=()=>{c(1,!1,t.value),i.value=1,s.value=!1},g=()=>{t.value="",c(1,!1,""),i.value=1,s.value=!1},b=async w=>{o.sendMessageSocket("createSingleChatRoom",{user_id:w},async x=>{x!=null&&x._id&&(await a.setActiveRoom(x),l.push({name:"ChatRoom",params:{id:x==null?void 0:x._id}},Wt))}),await qe.dismiss()};return(w,x)=>(I(),ve(y(At),{color:"white"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:f},{default:j(()=>[L(y(eo))]),_:1}),_("div",Dye,[_("div",Mye,[L(y(fe),{onClick:u,icon:y(Eo),class:"size-7 text-gray2 z-50"},null,8,["icon"]),_("form",Nye,[L(y(fe),{onClick:m,icon:y(yb),class:"size-7 text-gray2"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":x[0]||(x[0]=k=>t.value=k),placeholder:"Tìm kiếm",class:"p-1.5 w-full text-base bg-white3 outline-none"},null,512),[[Ti,t.value]]),y(J.isEmpty)(t.value)?re("",!0):(I(),ve(y(fe),{key:0,onClick:g,icon:y(Ah),class:"size-7 text-gray2"},null,8,["icon"]))])])]),_("div",Fye,[_("div",null,[(I(!0),O(Ue,null,ct(r.value,(k,E)=>{var T,P,C,A;return I(),O("section",{key:E},[_("div",{onClick:R=>{var M;return b((M=k==null?void 0:k.user)==null?void 0:M._id)},class:"flex gap-3 items-center"},[_("div",Vye,[(I(),O("img",{src:(P=(T=k.user)==null?void 0:T.avatar)!=null?P:"/upload-user.png",key:(C=k.user)==null?void 0:C.avatar,placeholder:"/upload-user.png",onError:d,class:"w-full rounded-full"},null,40,Uye))]),_("div",{class:gt(["py-5 pl-0.5 w-full flex-1 font-medium text-base [overflow-wrap:anywhere]",E<r.value.length-1&&"border-b-[1px]"])},Q((A=k.user)==null?void 0:A.full_name),3)],8,Bye)])}),128))])]),s.value?(I(),ve(y(Zn),{key:0,onIonInfinite:h},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),Hye={class:"px-4 mb-2"},jye={class:"w-full flex items-center px-4 flex-1 bg-white3 rounded-3xl"},Gye={key:0,class:"pb-6"},Wye={key:0,class:"h-[1px] my-1 bg-gray1 ml-14"},qye=Fe({__name:"ChatScreen",setup(n){const e=gn(),t=K([]),i=K(1),s=K(!1),{userInfo:r}=et(en()),o=Va(),a=Rr(),{newMsg:l}=et(o),c=async b=>{await o.setActiveRoom(b),e.push({name:"ChatRoom",params:{id:b._id}},Wt)},d=async b=>{console.log(b);const w=await qe.create({component:Oye,componentProps:{conversation:b},mode:"ios",cssClass:"centerModal"});await w.present();const{data:x,role:k}=await w.onWillDismiss(),E=t.value.findIndex(T=>T._id===b._id);if(E!=-1)switch(k){case"notify_enemy":t.value[E].enemy=x,tt(x!=null&&x.notification?"Đã bật thông báo cuộc hội thoại.":"Đã tắt thông báo cuộc hội thoại.","success");break;case"notify_me":t.value[E].me=x,tt(x!=null&&x.notification?"Đã bật thông báo cuộc hội thoại.":"Đã tắt thông báo cuộc hội thoại.","success");break}},u=async()=>{const b=await qe.create({component:oye,mode:"ios"});await b.present();const{data:w,role:x}=await b.onWillDismiss();if(x==="newGroup"){const k=t.value.find(E=>E._id===(w==null?void 0:w._id));console.log("newGroup",w),J.isEmpty(k)&&(t.value=[w,...t.value])}},h=async(b=1,w=!1)=>{var k,E,T,P;const{data:x}=await Vd.get("/chat/rooms-user",{params:{page:b,limit:20,"filter[user_id]":(k=r.value)==null?void 0:k._id}});J.isEmpty(x)?s.value=!1:((E=x==null?void 0:x.meta)!=null&&E.hasNextPage?(i.value++,s.value=!0):s.value=!1,w?t.value=[...t.value,...(T=x==null?void 0:x.data)!=null?T:[]]:t.value=(P=x==null?void 0:x.data)!=null?P:[]),console.log("🌸 Rooms 👉",x==null?void 0:x.data)},f=b=>{h(i.value,!0),setTimeout(()=>b.target.complete(),500)};on(()=>{h(),i.value=1,s.value=!1});const m=async b=>{h(1,!1),i.value=1,s.value=!1,setTimeout(()=>{b.target.complete()},500)};ki(l,()=>{var b;if(console.log("newMsg.value",l.value),!J.isEmpty(l.value)&&!J.isEmpty(l.value._id)){const w=t.value.findIndex(x=>{var k;return x._id===((k=l.value)==null?void 0:k._id)});w==-1||(b=t.value)==null||b.splice(w,1),t.value.unshift(l.value)}});const g=async()=>{await(await qe.create({mode:"ios",component:zye,initialBreakpoint:1})).present()};return a.onEventSocket("userRemovedFromGroup",b=>{console.log("outed chat"),J.isEmpty(b)||(t.value=t.value.filter(w=>w._id!==(b==null?void 0:b._id)))}),(b,w)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{class:"ion-no-border",mode:"ios",translucent:""},{default:j(()=>[L(y(An),{class:"px-4",mode:"ios",color:"white"},{default:j(()=>[L(y(Nd),{slot:"start",class:"text-black text-xl font-semibold"},{default:j(()=>w[0]||(w[0]=[be("Đoạn chat")])),_:1}),L(y(fe),{onClick:u,slot:"end",class:"size-7 pl-2",src:"/icons/icNewChat.svg"})]),_:1})]),_:1}),L(y(At),{color:"white",class:"ion-padding-vertical",fullscreen:""},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:m},{default:j(()=>[L(y(eo))]),_:1}),_("div",Hye,[_("form",jye,[L(y(fe),{icon:y(yb),class:"size-6 text-gray2"},null,8,["icon"]),_("div",{onClick:g,class:"text-gray2 w-full flex-1 bg-white3 outline-none p-2 py-2.5 mx-1"}," Tìm kiếm ")])]),y(J.isEmpty)(t.value)?(I(),ve($1e,{key:1})):(I(),O("div",Gye,[(I(!0),O(Ue,null,ct(t.value,(x,k)=>(I(),O("div",{key:k,class:"flex-col w-full justify-between px-4"},[L(MB,{conversation:x,onRoomPress:()=>c(x),onRoomLongPress:()=>d(x)},null,8,["conversation","onRoomPress","onRoomLongPress"]),k<t.value.length-1?(I(),O("div",Wye)):re("",!0)]))),128))])),s.value?(I(),ve(y(Zn),{key:2,onIonInfinite:f},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]),_:1}))}}),H6=[{id:1,chatId:"chat-001",senderId:1,senderName:"Minh",message:"Chào mọi người, mình bắt đầu họp chưa nhỉ?",timestamp:"2025-04-23T08:55:00"},{id:2,chatId:"chat-001",senderId:2,senderName:"Lan",message:"Mới có Minh vào nè, đợi thêm chút nữa nhé.",timestamp:"2025-04-23T08:55:45"},{id:6,chatId:"chat-001",senderId:1,senderName:"Minh",message:"Tớ sẽ nói trước về phần dashboard.",timestamp:"2025-04-23T08:57:15"},{id:9,chatId:"chat-001",senderId:3,senderName:"Hùng",message:"Có bug nhỏ ở login flow nhưng xử lý xong rồi.",timestamp:"2025-04-23T08:58:20"},{id:10,chatId:"chat-001",senderId:2,senderName:"Lan",message:"Nice, vậy mình demo nội bộ ngày nào?",timestamp:"2025-04-23T08:58:40"},{id:11,chatId:"chat-001",senderId:1,senderName:"Minh",message:"Tớ đề xuất sáng thứ 7, khoảng 10h.",timestamp:"2025-04-23T08:59:00"},{id:12,chatId:"chat-001",senderId:2,senderName:"Lan",message:"Ok tớ note lại. Tài liệu hướng dẫn thì sao?",timestamp:"2025-04-23T08:59:20"},{id:13,chatId:"chat-001",senderId:2,senderName:"Lan",message:"Có cần chia việc không mọi người?",timestamp:"2025-04-23T08:59:30"},{id:14,chatId:"chat-001",senderId:3,senderName:"Hùng",message:"Tớ lo phần API doc nha.",timestamp:"2025-04-23T08:59:50"},{id:15,chatId:"chat-001",senderId:1,senderName:"Minh",message:"Tớ làm phần slide demo.",timestamp:"2025-04-23T09:00:10"},{id:16,chatId:"chat-001",senderId:2,senderName:"Lan",message:"Vậy mình còn lại là checklist và hướng dẫn cài đặt.",timestamp:"2025-04-23T09:00:30"},{id:17,chatId:"chat-001",senderId:3,senderName:"Hùng",message:"Checklist để tớ lo luôn. Sẵn có bản cũ để tham khảo.",timestamp:"2025-04-23T09:00:50"},{id:18,chatId:"chat-001",senderId:1,senderName:"Minh",message:"Tuyệt vời. Cảm ơn cả team nhé!",timestamp:"2025-04-23T09:01:10"},{id:19,chatId:"chat-001",senderId:2,senderName:"Lan",message:"Mai họp khách hàng nhớ chuẩn bị tâm lý nha 😂",timestamp:"2025-04-23T09:01:30"},{id:20,chatId:"chat-001",senderId:3,senderName:"Hùng",message:"Haha, chuẩn bị cà phê sớm là xong!",timestamp:"2025-04-23T09:01:45"}],Kye={class:"w-full relative"},Yye=["src"],NB=Fe({__name:"ModalImageViewer",props:{imgSrc:{}},setup(n){const e=async()=>{await qe.dismiss(null,"cancel")};return(t,i)=>(I(),O("div",Kye,[_("div",{onClick:e,class:"bg-gray1 absolute top-[5%] right-[4%] size-6 items-center flex justify-center rounded-full"},[L(y(fe),{icon:y(ks),class:"text-gray2 size-6"},null,8,["icon"])]),_("img",{src:t.imgSrc,class:"w-full object-cover"},null,8,Yye)]))}}),Xye={key:0,class:"grid grid-cols-3 gap-1.5"},Qye=["src","onClick"],Zye={key:1,class:"flex gap-1.5"},Jye=["src","onClick"],j6=Fe({__name:"MessageTypeAttachment",props:{message:{},isOwnMessage:{type:Boolean}},setup(n){const e=async t=>{await(await qe.create({component:NB,componentProps:{imgSrc:t},cssClass:"img-viewer",mode:"ios"})).present()};return(t,i)=>{var s,r,o,a;return I(),O("div",null,[(s=t.message)!=null&&s.attachments&&((r=t.message)==null?void 0:r.attachments.length)>=3?(I(),O("div",Xye,[(I(!0),O(Ue,null,ct((o=t.message)==null?void 0:o.attachments,l=>(I(),O("img",{key:l.url,src:l.url,onClick:c=>e(l.url),class:gt(["w-full aspect-square object-cover cursor-pointer shadow-st rounded-lg",t.isOwnMessage?"ml-auto":"mr-auto"])},null,10,Qye))),128))])):(I(),O("div",Zye,[(I(!0),O(Ue,null,ct((a=t.message)==null?void 0:a.attachments,l=>{var c,d,u,h;return I(),O("img",{key:l.url,src:l.url,onClick:f=>e(l.url),class:gt(["h-auto min-h-18 rounded cursor-pointer object-contain shadow-st",{"ml-auto":t.isOwnMessage,"mr-auto":!t.isOwnMessage,"w-[49%]":((d=(c=t.message)==null?void 0:c.attachments)==null?void 0:d.length)===2,"w-36":((h=(u=t.message)==null?void 0:u.attachments)==null?void 0:h.length)===1}])},null,10,Jye)}),128))]))])}}}),ewe={key:0},twe=["src"],nwe={key:0,class:"py-2 px-2.5"},iwe={key:0,class:"font-medium text-lg [overflow-wrap:anywhere] mb-0.5"},swe=["innerHTML"],rwe={key:1},owe=["src"],awe={key:0,class:"py-2 px-2.5"},lwe={key:0,class:"font-medium text-lg [overflow-wrap:anywhere] mb-0.5"},cwe=["innerHTML"],dwe=["src"],uwe=["src"],hwe=["src"],G6=Fe({__name:"MessagePreviewUrl",props:{pageFixed:{type:Boolean,default:!1},text:{},info:{}},setup(n){const e=eg(n.text);return(t,i)=>{var s,r,o,a,l,c,d,u;return y(e)?(I(),O("div",{key:0,class:gt([[t.pageFixed?"max-w-[200px]":"max-w-[400px]"],"mb-2 max-h-screen w-full"])},[y(e).type==="youtube"?(I(),O("div",ewe,[_("iframe",{src:"https://www.youtube.com/embed/".concat(y(e).id),allowfullscreen:"",class:"w-full aspect-video rounded shadow",frameborder:"0"},null,8,twe),!y(J.isEmpty)(t.info)&&!y(J.isEmpty)(t.info[0])?(I(),O("div",nwe,[y(J.isEmpty)((s=t.info[0])==null?void 0:s.title)?re("",!0):(I(),O("h3",iwe,Q((r=t.info[0])==null?void 0:r.title),1)),y(J.isEmpty)((o=t.info[0])==null?void 0:o.description)?re("",!0):(I(),O("div",{key:1,class:"[overflow-wrap:anywhere]",innerHTML:(a=t.info[0])==null?void 0:a.description},null,8,swe))])):re("",!0)])):y(e).type==="vimeo"?(I(),O("div",rwe,[_("iframe",{src:"https://player.vimeo.com/video/".concat(y(e).id),allowfullscreen:"",class:"w-full aspect-video rounded shadow",frameborder:"0"},null,8,owe),!y(J.isEmpty)(t.info)&&!y(J.isEmpty)(t.info[0])?(I(),O("div",awe,[y(J.isEmpty)((l=t.info[0])==null?void 0:l.title)?re("",!0):(I(),O("h3",lwe,Q((c=t.info[0])==null?void 0:c.title),1)),y(J.isEmpty)((d=t.info[0])==null?void 0:d.description)?re("",!0):(I(),O("div",{key:1,class:"[overflow-wrap:anywhere]",innerHTML:(u=t.info[0])==null?void 0:u.description},null,8,cwe))])):re("",!0)])):y(e).type==="image"?(I(),O("img",{key:2,src:y(e).url,alt:"Image preview",class:"w-full rounded-xl shadow"},null,8,dwe)):y(e).type==="audio"?(I(),O("audio",{key:3,src:y(e).url,class:"w-full",controls:""},null,8,uwe)):y(e).type==="video"?(I(),O("video",{key:4,src:y(e).url,class:"w-full rounded shadow",controls:""},null,8,hwe)):re("",!0)],2)):re("",!0)}}}),qT={Edited:"edited"},fwe={key:0,class:"flex justify-end font-medium text-sm text-blue1"},pwe={key:1,class:"min-h-11 items-center flex text-white bg-blue1 py-2 px-2.5 text-base font-normal rounded-lg italic"},mwe={key:2},gwe={class:"min-h-11 min-w-11 items-center flex bg-blue1 overflow-hidden rounded-lg flex-col"},bwe=["innerHTML"],vwe={class:"flex justify-end w-full bg-[#F0F0F0] overflow-hidden"},ywe={class:"flex"},wwe={key:0,class:"size-9"},xwe={key:1,class:"flex size-9"},_we=["src"],kwe={key:0,class:"flex justify-start ml-1.5 font-medium text-sm text-[#999]"},Ewe={key:0,class:"text-base font-medium text-blue1 select-text pt-2 px-2.5"},Twe={key:1,class:"italic pb-2 px-2.5"},Cwe={key:2},Swe=["innerHTML"],Awe={key:1,class:"flex justify-end mt-0.5 bg-[#F0F0F0] w-full"},FB=Fe({__name:"UserMessage",props:{message:{},isOwnMessage:{type:Boolean,default:!1},isContinuous:{type:Boolean,default:!1},onPress:{type:Function,default:()=>{}},onLongPress:{type:Function,default:()=>{}},isGroup:{type:Boolean,default:!1}},setup(n){const e=n;let t=null;const i=()=>{var l;J.isEmpty((l=e.message)==null?void 0:l.attachments)&&(s(),t=setTimeout(()=>{e.onLongPress(),t=null},500))},s=()=>{t!==null&&(clearTimeout(t),t=null)},r=()=>{var l,c;return(c=(l=e.message)==null?void 0:l.content)==null?void 0:c.replaceAll("&nbsp;","")},o=l=>{l.target.src="/upload-user.png"},a=lt(()=>{var l;return((l=e.message)==null?void 0:l.status)===qT.Edited});return(l,c)=>{var d,u,h,f,m,g,b,w,x,k,E,T,P,C,A,R,M,N,U,G,B,te;return I(),O("div",{class:gt(["flex items-center",l.isOwnMessage?"justify-end":"justify-start"])},[l.isOwnMessage?(I(),O("div",{key:0,onClick:c[0]||(c[0]=(...X)=>l.onPress&&l.onPress(...X)),onTouchstart:i,onTouchend:s,onTouchmove:s,class:gt(["flex max-w-[80%]",l.isContinuous?"mt-1":"mt-2"])},[_("div",null,[a.value&&!((d=l.message)!=null&&d.deleted_at)?(I(),O("div",fwe," Đã sửa ")):re("",!0),(u=l.message)!=null&&u.deleted_at?(I(),O("div",pwe," Đã thu hồi một tin nhắn ")):(h=l.message)!=null&&h.content?(I(),O("div",mwe,[_("div",gwe,[y(eg)(l.message.content)?re("",!0):(I(),O("div",{key:0,class:"text-base text-white font-normal [overflow-wrap:anywhere] select-text py-2 px-2.5",innerHTML:r()},null,8,bwe)),_("div",vwe,[y(eg)((f=l.message)==null?void 0:f.content)?(I(),ve(G6,{key:0,text:(m=l.message)==null?void 0:m.content,"page-fixed":!1,info:(g=l.message)==null?void 0:g.attachments},null,8,["text","info"])):re("",!0)])])])):(b=l.message)!=null&&b.attachments?(I(),ve(j6,{key:3,message:l.message,isOwnMessage:l.isOwnMessage},null,8,["message","isOwnMessage"])):re("",!0)])],34)):(I(),O("div",{key:1,onClick:c[1]||(c[1]=(...X)=>l.onPress&&l.onPress(...X)),onTouchstart:i,onTouchend:s,onTouchmove:s,class:gt(["flex max-w-[90%] items-start",l.isContinuous?"mt-1":"mt-2"])},[_("div",ywe,[l.isContinuous&&!((w=l.message)!=null&&w.deleted_at)?(I(),O("div",wwe)):(I(),O("div",xwe,[(I(),O("img",{src:(E=(k=(x=l.message)==null?void 0:x.user_send)==null?void 0:k.avatar)!=null?E:"/upload-user.png",key:(P=(T=l.message)==null?void 0:T.user_send)==null?void 0:P.avatar,onError:o,placeholder:"'/upload-user.png'",class:"size-9 rounded-full"},null,40,_we))]))]),_("div",null,[a.value&&!((C=l.message)!=null&&C.deleted_at)?(I(),O("div",kwe," Đã sửa ")):re("",!0),_("div",null,[_("div",{class:gt(["ml-1.5 min",{flex:l.isContinuous,"bg-[#F0F0F0] items-center ml-1.5 rounded-lg min-h-11 overflow-hidden min-w-11":(A=l.message)==null?void 0:A.content}])},[!l.isContinuous&&l.isGroup?(I(),O("div",Ewe,Q((M=(R=l.message)==null?void 0:R.user_send)==null?void 0:M.full_name),1)):re("",!0),(N=l.message)!=null&&N.deleted_at?(I(),O("div",Twe,"Đã thu hồi một tin nhắn")):(U=l.message)!=null&&U.content?(I(),O("div",Cwe,[y(eg)(l.message.content)?re("",!0):(I(),O("div",{key:0,class:"text-base text-black font-normal [overflow-wrap:anywhere] select-text px-2.5",innerHTML:r()},null,8,Swe)),y(eg)(l.message.content)?(I(),O("div",Awe,[L(G6,{text:(G=l.message)==null?void 0:G.content,"page-fixed":!1,info:(B=l.message)==null?void 0:B.attachments},null,8,["text","info"])])):re("",!0)])):(te=l.message)!=null&&te.attachments?(I(),ve(j6,{key:3,message:l.message,isOwnMessage:l.isOwnMessage},null,8,["message","isOwnMessage"])):re("",!0)],2)])])],34))],2)}}});var BB=typeof global=="object"&&global&&global.Object===Object&&global,Iwe=typeof self=="object"&&self&&self.Object===Object&&self,Ua=BB||Iwe||Function("return this")(),Pl=Ua.Symbol,VB=Object.prototype,Pwe=VB.hasOwnProperty,Rwe=VB.toString,Vm=Pl?Pl.toStringTag:void 0;function $we(n){var e=Pwe.call(n,Vm),t=n[Vm];try{n[Vm]=void 0;var i=!0}catch(r){}var s=Rwe.call(n);return i&&(e?n[Vm]=t:delete n[Vm]),s}var Lwe=Object.prototype,Owe=Lwe.toString;function Dwe(n){return Owe.call(n)}var Mwe="[object Null]",Nwe="[object Undefined]",W6=Pl?Pl.toStringTag:void 0;function Zd(n){return n==null?n===void 0?Nwe:Mwe:W6&&W6 in Object(n)?$we(n):Dwe(n)}function Qo(n){return n!=null&&typeof n=="object"}var Fwe="[object Symbol]";function Dx(n){return typeof n=="symbol"||Qo(n)&&Zd(n)==Fwe}function Bwe(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var wo=Array.isArray,q6=Pl?Pl.prototype:void 0,K6=q6?q6.toString:void 0;function UB(n){if(typeof n=="string")return n;if(wo(n))return Bwe(n,UB)+"";if(Dx(n))return K6?K6.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var Vwe=/\s/;function Uwe(n){for(var e=n.length;e--&&Vwe.test(n.charAt(e)););return e}var zwe=/^\s+/;function Hwe(n){return n&&n.slice(0,Uwe(n)+1).replace(zwe,"")}function rs(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Y6=NaN,jwe=/^[-+]0x[0-9a-f]+$/i,Gwe=/^0b[01]+$/i,Wwe=/^0o[0-7]+$/i,qwe=parseInt;function X6(n){if(typeof n=="number")return n;if(Dx(n))return Y6;if(rs(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=rs(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Hwe(n);var t=Gwe.test(n);return t||Wwe.test(n)?qwe(n.slice(2),t?2:8):jwe.test(n)?Y6:+n}function WA(n){return n}var Kwe="[object AsyncFunction]",Ywe="[object Function]",Xwe="[object GeneratorFunction]",Qwe="[object Proxy]";function fh(n){if(!rs(n))return!1;var e=Zd(n);return e==Ywe||e==Xwe||e==Kwe||e==Qwe}var pk=Ua["__core-js_shared__"],Q6=function(){var n=/[^.]+$/.exec(pk&&pk.keys&&pk.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Zwe(n){return!!Q6&&Q6 in n}var Jwe=Function.prototype,exe=Jwe.toString;function Ih(n){if(n!=null){try{return exe.call(n)}catch(e){}try{return n+""}catch(e){}}return""}var txe=/[\\^$.*+?()[\]{}|]/g,nxe=/^\[object .+?Constructor\]$/,ixe=Function.prototype,sxe=Object.prototype,rxe=ixe.toString,oxe=sxe.hasOwnProperty,axe=RegExp("^"+rxe.call(oxe).replace(txe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lxe(n){if(!rs(n)||Zwe(n))return!1;var e=fh(n)?axe:nxe;return e.test(Ih(n))}function cxe(n,e){return n==null?void 0:n[e]}function Ph(n,e){var t=cxe(n,e);return lxe(t)?t:void 0}var KT=Ph(Ua,"WeakMap"),Z6=Object.create,dxe=function(){function n(){}return function(e){if(!rs(e))return{};if(Z6)return Z6(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function uxe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function zB(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var hxe=800,fxe=16,pxe=Date.now;function mxe(n){var e=0,t=0;return function(){var i=pxe(),s=fxe-(i-t);if(t=i,s>0){if(++e>=hxe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function gxe(n){return function(){return n}}var Xy=function(){try{var n=Ph(Object,"defineProperty");return n({},"",{}),n}catch(e){}}(),bxe=Xy?function(n,e){return Xy(n,"toString",{configurable:!0,enumerable:!1,value:gxe(e),writable:!0})}:WA,vxe=mxe(bxe);function yxe(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var wxe=9007199254740991,xxe=/^(?:0|[1-9]\d*)$/;function Mx(n,e){var t=typeof n;return e=e==null?wxe:e,!!e&&(t=="number"||t!="symbol"&&xxe.test(n))&&n>-1&&n%1==0&&n<e}function Nx(n,e,t){e=="__proto__"&&Xy?Xy(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function _b(n,e){return n===e||n!==n&&e!==e}var _xe=Object.prototype,kxe=_xe.hasOwnProperty;function qA(n,e,t){var i=n[e];(!(kxe.call(n,e)&&_b(i,t))||t===void 0&&!(e in n))&&Nx(n,e,t)}function im(n,e,t,i){var s=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=void 0;l===void 0&&(l=n[a]),s?Nx(t,a,l):qA(t,a,l)}return t}var J6=Math.max;function Exe(n,e,t){return e=J6(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,r=J6(i.length-e,0),o=Array(r);++s<r;)o[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=t(o),uxe(n,this,a)}}function Txe(n,e){return vxe(Exe(n,e,WA),n+"")}var Cxe=9007199254740991;function KA(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Cxe}function Fx(n){return n!=null&&KA(n.length)&&!fh(n)}function Sxe(n,e,t){if(!rs(t))return!1;var i=typeof e;return(i=="number"?Fx(t)&&Mx(e,t.length):i=="string"&&e in t)?_b(t[e],n):!1}function YA(n){return Txe(function(e,t){var i=-1,s=t.length,r=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(r=n.length>3&&typeof r=="function"?(s--,r):void 0,o&&Sxe(t[0],t[1],o)&&(r=s<3?void 0:r,s=1),e=Object(e);++i<s;){var a=t[i];a&&n(e,a,i,r)}return e})}var Axe=Object.prototype;function XA(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Axe;return n===t}function Ixe(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var Pxe="[object Arguments]";function e8(n){return Qo(n)&&Zd(n)==Pxe}var HB=Object.prototype,Rxe=HB.hasOwnProperty,$xe=HB.propertyIsEnumerable,Qy=e8(function(){return arguments}())?e8:function(n){return Qo(n)&&Rxe.call(n,"callee")&&!$xe.call(n,"callee")};function Lxe(){return!1}var jB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,t8=jB&&typeof module=="object"&&module&&!module.nodeType&&module,Oxe=t8&&t8.exports===jB,n8=Oxe?Ua.Buffer:void 0,Dxe=n8?n8.isBuffer:void 0,d0=Dxe||Lxe,Mxe="[object Arguments]",Nxe="[object Array]",Fxe="[object Boolean]",Bxe="[object Date]",Vxe="[object Error]",Uxe="[object Function]",zxe="[object Map]",Hxe="[object Number]",jxe="[object Object]",Gxe="[object RegExp]",Wxe="[object Set]",qxe="[object String]",Kxe="[object WeakMap]",Yxe="[object ArrayBuffer]",Xxe="[object DataView]",Qxe="[object Float32Array]",Zxe="[object Float64Array]",Jxe="[object Int8Array]",e_e="[object Int16Array]",t_e="[object Int32Array]",n_e="[object Uint8Array]",i_e="[object Uint8ClampedArray]",s_e="[object Uint16Array]",r_e="[object Uint32Array]",Gi={};Gi[Qxe]=Gi[Zxe]=Gi[Jxe]=Gi[e_e]=Gi[t_e]=Gi[n_e]=Gi[i_e]=Gi[s_e]=Gi[r_e]=!0;Gi[Mxe]=Gi[Nxe]=Gi[Yxe]=Gi[Fxe]=Gi[Xxe]=Gi[Bxe]=Gi[Vxe]=Gi[Uxe]=Gi[zxe]=Gi[Hxe]=Gi[jxe]=Gi[Gxe]=Gi[Wxe]=Gi[qxe]=Gi[Kxe]=!1;function o_e(n){return Qo(n)&&KA(n.length)&&!!Gi[Zd(n)]}function QA(n){return function(e){return n(e)}}var GB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kg=GB&&typeof module=="object"&&module&&!module.nodeType&&module,a_e=kg&&kg.exports===GB,mk=a_e&&BB.process,Ip=function(){try{var n=kg&&kg.require&&kg.require("util").types;return n||mk&&mk.binding&&mk.binding("util")}catch(e){}}(),i8=Ip&&Ip.isTypedArray,ZA=i8?QA(i8):o_e,l_e=Object.prototype,c_e=l_e.hasOwnProperty;function WB(n,e){var t=wo(n),i=!t&&Qy(n),s=!t&&!i&&d0(n),r=!t&&!i&&!s&&ZA(n),o=t||i||s||r,a=o?Ixe(n.length,String):[],l=a.length;for(var c in n)(e||c_e.call(n,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Mx(c,l)))&&a.push(c);return a}function qB(n,e){return function(t){return n(e(t))}}var d_e=qB(Object.keys,Object),u_e=Object.prototype,h_e=u_e.hasOwnProperty;function f_e(n){if(!XA(n))return d_e(n);var e=[];for(var t in Object(n))h_e.call(n,t)&&t!="constructor"&&e.push(t);return e}function kb(n){return Fx(n)?WB(n):f_e(n)}function p_e(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var m_e=Object.prototype,g_e=m_e.hasOwnProperty;function b_e(n){if(!rs(n))return p_e(n);var e=XA(n),t=[];for(var i in n)i=="constructor"&&(e||!g_e.call(n,i))||t.push(i);return t}function sm(n){return Fx(n)?WB(n,!0):b_e(n)}var KB=YA(function(n,e){im(e,sm(e),n)}),v_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y_e=/^\w*$/;function JA(n,e){if(wo(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Dx(n)?!0:y_e.test(n)||!v_e.test(n)||e!=null&&n in Object(e)}var u0=Ph(Object,"create");function w_e(){this.__data__=u0?u0(null):{},this.size=0}function x_e(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var __e="__lodash_hash_undefined__",k_e=Object.prototype,E_e=k_e.hasOwnProperty;function T_e(n){var e=this.__data__;if(u0){var t=e[n];return t===__e?void 0:t}return E_e.call(e,n)?e[n]:void 0}var C_e=Object.prototype,S_e=C_e.hasOwnProperty;function A_e(n){var e=this.__data__;return u0?e[n]!==void 0:S_e.call(e,n)}var I_e="__lodash_hash_undefined__";function P_e(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=u0&&e===void 0?I_e:e,this}function ph(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}ph.prototype.clear=w_e;ph.prototype.delete=x_e;ph.prototype.get=T_e;ph.prototype.has=A_e;ph.prototype.set=P_e;function R_e(){this.__data__=[],this.size=0}function Bx(n,e){for(var t=n.length;t--;)if(_b(n[t][0],e))return t;return-1}var $_e=Array.prototype,L_e=$_e.splice;function O_e(n){var e=this.__data__,t=Bx(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():L_e.call(e,t,1),--this.size,!0}function D_e(n){var e=this.__data__,t=Bx(e,n);return t<0?void 0:e[t][1]}function M_e(n){return Bx(this.__data__,n)>-1}function N_e(n,e){var t=this.__data__,i=Bx(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Bc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Bc.prototype.clear=R_e;Bc.prototype.delete=O_e;Bc.prototype.get=D_e;Bc.prototype.has=M_e;Bc.prototype.set=N_e;var h0=Ph(Ua,"Map");function F_e(){this.size=0,this.__data__={hash:new ph,map:new(h0||Bc),string:new ph}}function B_e(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Vx(n,e){var t=n.__data__;return B_e(e)?t[typeof e=="string"?"string":"hash"]:t.map}function V_e(n){var e=Vx(this,n).delete(n);return this.size-=e?1:0,e}function U_e(n){return Vx(this,n).get(n)}function z_e(n){return Vx(this,n).has(n)}function H_e(n,e){var t=Vx(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Vc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Vc.prototype.clear=F_e;Vc.prototype.delete=V_e;Vc.prototype.get=U_e;Vc.prototype.has=z_e;Vc.prototype.set=H_e;var j_e="Expected a function";function e3(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(j_e);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],r=t.cache;if(r.has(s))return r.get(s);var o=n.apply(this,i);return t.cache=r.set(s,o)||r,o};return t.cache=new(e3.Cache||Vc),t}e3.Cache=Vc;var G_e=500;function W_e(n){var e=e3(n,function(i){return t.size===G_e&&t.clear(),i}),t=e.cache;return e}var q_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K_e=/\\(\\)?/g,Y_e=W_e(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(q_e,function(t,i,s,r){e.push(s?r.replace(K_e,"$1"):i||t)}),e});function Ux(n){return n==null?"":UB(n)}function zx(n,e){return wo(n)?n:JA(n,e)?[n]:Y_e(Ux(n))}function rm(n){if(typeof n=="string"||Dx(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function t3(n,e){e=zx(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[rm(e[t++])];return t&&t==i?n:void 0}function f0(n,e,t){var i=n==null?void 0:t3(n,e);return i===void 0?t:i}function YB(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var n3=qB(Object.getPrototypeOf,Object),X_e="[object Object]",Q_e=Function.prototype,Z_e=Object.prototype,XB=Q_e.toString,J_e=Z_e.hasOwnProperty,e2e=XB.call(Object);function Wr(n){if(!Qo(n)||Zd(n)!=X_e)return!1;var e=n3(n);if(e===null)return!0;var t=J_e.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&XB.call(t)==e2e}function QB(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++i<s;)r[i]=n[i+e];return r}function t2e(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:QB(n,e,t)}var n2e="\\ud800-\\udfff",i2e="\\u0300-\\u036f",s2e="\\ufe20-\\ufe2f",r2e="\\u20d0-\\u20ff",o2e=i2e+s2e+r2e,a2e="\\ufe0e\\ufe0f",l2e="\\u200d",c2e=RegExp("["+l2e+n2e+o2e+a2e+"]");function ZB(n){return c2e.test(n)}function d2e(n){return n.split("")}var JB="\\ud800-\\udfff",u2e="\\u0300-\\u036f",h2e="\\ufe20-\\ufe2f",f2e="\\u20d0-\\u20ff",p2e=u2e+h2e+f2e,m2e="\\ufe0e\\ufe0f",g2e="["+JB+"]",YT="["+p2e+"]",XT="\\ud83c[\\udffb-\\udfff]",b2e="(?:"+YT+"|"+XT+")",eV="[^"+JB+"]",tV="(?:\\ud83c[\\udde6-\\uddff]){2}",nV="[\\ud800-\\udbff][\\udc00-\\udfff]",v2e="\\u200d",iV=b2e+"?",sV="["+m2e+"]?",y2e="(?:"+v2e+"(?:"+[eV,tV,nV].join("|")+")"+sV+iV+")*",w2e=sV+iV+y2e,x2e="(?:"+[eV+YT+"?",YT,tV,nV,g2e].join("|")+")",_2e=RegExp(XT+"(?="+XT+")|"+x2e+w2e,"g");function k2e(n){return n.match(_2e)||[]}function E2e(n){return ZB(n)?k2e(n):d2e(n)}function T2e(n){return function(e){e=Ux(e);var t=ZB(e)?E2e(e):void 0,i=t?t[0]:e.charAt(0),s=t?t2e(t,1).join(""):e.slice(1);return i[n]()+s}}var C2e=T2e("toUpperCase");function S2e(n,e,t,i){for(var s=-1,r=n==null?0:n.length;++s<r;)t=e(t,n[s],s,n);return t}function A2e(n){return function(e){return n==null?void 0:n[e]}}var I2e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},P2e=A2e(I2e),R2e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$2e="\\u0300-\\u036f",L2e="\\ufe20-\\ufe2f",O2e="\\u20d0-\\u20ff",D2e=$2e+L2e+O2e,M2e="["+D2e+"]",N2e=RegExp(M2e,"g");function F2e(n){return n=Ux(n),n&&n.replace(R2e,P2e).replace(N2e,"")}var B2e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function V2e(n){return n.match(B2e)||[]}var U2e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function z2e(n){return U2e.test(n)}var rV="\\ud800-\\udfff",H2e="\\u0300-\\u036f",j2e="\\ufe20-\\ufe2f",G2e="\\u20d0-\\u20ff",W2e=H2e+j2e+G2e,oV="\\u2700-\\u27bf",aV="a-z\\xdf-\\xf6\\xf8-\\xff",q2e="\\xac\\xb1\\xd7\\xf7",K2e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Y2e="\\u2000-\\u206f",X2e=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lV="A-Z\\xc0-\\xd6\\xd8-\\xde",Q2e="\\ufe0e\\ufe0f",cV=q2e+K2e+Y2e+X2e,dV="['’]",s8="["+cV+"]",Z2e="["+W2e+"]",uV="\\d+",J2e="["+oV+"]",hV="["+aV+"]",fV="[^"+rV+cV+uV+oV+aV+lV+"]",eke="\\ud83c[\\udffb-\\udfff]",tke="(?:"+Z2e+"|"+eke+")",nke="[^"+rV+"]",pV="(?:\\ud83c[\\udde6-\\uddff]){2}",mV="[\\ud800-\\udbff][\\udc00-\\udfff]",kf="["+lV+"]",ike="\\u200d",r8="(?:"+hV+"|"+fV+")",ske="(?:"+kf+"|"+fV+")",o8="(?:"+dV+"(?:d|ll|m|re|s|t|ve))?",a8="(?:"+dV+"(?:D|LL|M|RE|S|T|VE))?",gV=tke+"?",bV="["+Q2e+"]?",rke="(?:"+ike+"(?:"+[nke,pV,mV].join("|")+")"+bV+gV+")*",oke="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ake="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lke=bV+gV+rke,cke="(?:"+[J2e,pV,mV].join("|")+")"+lke,dke=RegExp([kf+"?"+hV+"+"+o8+"(?="+[s8,kf,"$"].join("|")+")",ske+"+"+a8+"(?="+[s8,kf+r8,"$"].join("|")+")",kf+"?"+r8+"+"+o8,kf+"+"+a8,ake,oke,uV,cke].join("|"),"g");function uke(n){return n.match(dke)||[]}function hke(n,e,t){return n=Ux(n),e=e,e===void 0?z2e(n)?uke(n):V2e(n):n.match(e)||[]}var fke="['’]",pke=RegExp(fke,"g");function mke(n){return function(e){return S2e(hke(F2e(e).replace(pke,"")),n,"")}}function gke(){this.__data__=new Bc,this.size=0}function bke(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function vke(n){return this.__data__.get(n)}function yke(n){return this.__data__.has(n)}var wke=200;function xke(n,e){var t=this.__data__;if(t instanceof Bc){var i=t.__data__;if(!h0||i.length<wke-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Vc(i)}return t.set(n,e),this.size=t.size,this}function Ca(n){var e=this.__data__=new Bc(n);this.size=e.size}Ca.prototype.clear=gke;Ca.prototype.delete=bke;Ca.prototype.get=vke;Ca.prototype.has=yke;Ca.prototype.set=xke;function _ke(n,e){return n&&im(e,kb(e),n)}function kke(n,e){return n&&im(e,sm(e),n)}var vV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,l8=vV&&typeof module=="object"&&module&&!module.nodeType&&module,Eke=l8&&l8.exports===vV,c8=Eke?Ua.Buffer:void 0,d8=c8?c8.allocUnsafe:void 0;function yV(n,e){if(e)return n.slice();var t=n.length,i=d8?d8(t):new n.constructor(t);return n.copy(i),i}function Tke(n,e){for(var t=-1,i=n==null?0:n.length,s=0,r=[];++t<i;){var o=n[t];e(o,t,n)&&(r[s++]=o)}return r}function wV(){return[]}var Cke=Object.prototype,Ske=Cke.propertyIsEnumerable,u8=Object.getOwnPropertySymbols,i3=u8?function(n){return n==null?[]:(n=Object(n),Tke(u8(n),function(e){return Ske.call(n,e)}))}:wV;function Ake(n,e){return im(n,i3(n),e)}var Ike=Object.getOwnPropertySymbols,xV=Ike?function(n){for(var e=[];n;)YB(e,i3(n)),n=n3(n);return e}:wV;function Pke(n,e){return im(n,xV(n),e)}function _V(n,e,t){var i=e(n);return wo(n)?i:YB(i,t(n))}function QT(n){return _V(n,kb,i3)}function Rke(n){return _V(n,sm,xV)}var ZT=Ph(Ua,"DataView"),JT=Ph(Ua,"Promise"),eC=Ph(Ua,"Set"),h8="[object Map]",$ke="[object Object]",f8="[object Promise]",p8="[object Set]",m8="[object WeakMap]",g8="[object DataView]",Lke=Ih(ZT),Oke=Ih(h0),Dke=Ih(JT),Mke=Ih(eC),Nke=Ih(KT),ba=Zd;(ZT&&ba(new ZT(new ArrayBuffer(1)))!=g8||h0&&ba(new h0)!=h8||JT&&ba(JT.resolve())!=f8||eC&&ba(new eC)!=p8||KT&&ba(new KT)!=m8)&&(ba=function(n){var e=Zd(n),t=e==$ke?n.constructor:void 0,i=t?Ih(t):"";if(i)switch(i){case Lke:return g8;case Oke:return h8;case Dke:return f8;case Mke:return p8;case Nke:return m8}return e});var Fke=Object.prototype,Bke=Fke.hasOwnProperty;function Vke(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Bke.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Zy=Ua.Uint8Array;function s3(n){var e=new n.constructor(n.byteLength);return new Zy(e).set(new Zy(n)),e}function Uke(n,e){var t=e?s3(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var zke=/\w*$/;function Hke(n){var e=new n.constructor(n.source,zke.exec(n));return e.lastIndex=n.lastIndex,e}var b8=Pl?Pl.prototype:void 0,v8=b8?b8.valueOf:void 0;function jke(n){return v8?Object(v8.call(n)):{}}function kV(n,e){var t=e?s3(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Gke="[object Boolean]",Wke="[object Date]",qke="[object Map]",Kke="[object Number]",Yke="[object RegExp]",Xke="[object Set]",Qke="[object String]",Zke="[object Symbol]",Jke="[object ArrayBuffer]",eEe="[object DataView]",tEe="[object Float32Array]",nEe="[object Float64Array]",iEe="[object Int8Array]",sEe="[object Int16Array]",rEe="[object Int32Array]",oEe="[object Uint8Array]",aEe="[object Uint8ClampedArray]",lEe="[object Uint16Array]",cEe="[object Uint32Array]";function dEe(n,e,t){var i=n.constructor;switch(e){case Jke:return s3(n);case Gke:case Wke:return new i(+n);case eEe:return Uke(n,t);case tEe:case nEe:case iEe:case sEe:case rEe:case oEe:case aEe:case lEe:case cEe:return kV(n,t);case qke:return new i;case Kke:case Qke:return new i(n);case Yke:return Hke(n);case Xke:return new i;case Zke:return jke(n)}}function EV(n){return typeof n.constructor=="function"&&!XA(n)?dxe(n3(n)):{}}var uEe="[object Map]";function hEe(n){return Qo(n)&&ba(n)==uEe}var y8=Ip&&Ip.isMap,fEe=y8?QA(y8):hEe,pEe="[object Set]";function mEe(n){return Qo(n)&&ba(n)==pEe}var w8=Ip&&Ip.isSet,gEe=w8?QA(w8):mEe,bEe=1,vEe=2,yEe=4,TV="[object Arguments]",wEe="[object Array]",xEe="[object Boolean]",_Ee="[object Date]",kEe="[object Error]",CV="[object Function]",EEe="[object GeneratorFunction]",TEe="[object Map]",CEe="[object Number]",SV="[object Object]",SEe="[object RegExp]",AEe="[object Set]",IEe="[object String]",PEe="[object Symbol]",REe="[object WeakMap]",$Ee="[object ArrayBuffer]",LEe="[object DataView]",OEe="[object Float32Array]",DEe="[object Float64Array]",MEe="[object Int8Array]",NEe="[object Int16Array]",FEe="[object Int32Array]",BEe="[object Uint8Array]",VEe="[object Uint8ClampedArray]",UEe="[object Uint16Array]",zEe="[object Uint32Array]",Bi={};Bi[TV]=Bi[wEe]=Bi[$Ee]=Bi[LEe]=Bi[xEe]=Bi[_Ee]=Bi[OEe]=Bi[DEe]=Bi[MEe]=Bi[NEe]=Bi[FEe]=Bi[TEe]=Bi[CEe]=Bi[SV]=Bi[SEe]=Bi[AEe]=Bi[IEe]=Bi[PEe]=Bi[BEe]=Bi[VEe]=Bi[UEe]=Bi[zEe]=!0;Bi[kEe]=Bi[CV]=Bi[REe]=!1;function Wf(n,e,t,i,s,r){var o,a=e&bEe,l=e&vEe,c=e&yEe;if(t&&(o=s?t(n,i,s,r):t(n)),o!==void 0)return o;if(!rs(n))return n;var d=wo(n);if(d){if(o=Vke(n),!a)return zB(n,o)}else{var u=ba(n),h=u==CV||u==EEe;if(d0(n))return yV(n,a);if(u==SV||u==TV||h&&!s){if(o=l||h?{}:EV(n),!a)return l?Pke(n,kke(o,n)):Ake(n,_ke(o,n))}else{if(!Bi[u])return s?n:{};o=dEe(n,u,a)}}r||(r=new Ca);var f=r.get(n);if(f)return f;r.set(n,o),gEe(n)?n.forEach(function(b){o.add(Wf(b,e,t,b,n,r))}):fEe(n)&&n.forEach(function(b,w){o.set(w,Wf(b,e,t,w,n,r))});var m=c?l?Rke:QT:l?sm:kb,g=d?void 0:m(n);return yxe(g||n,function(b,w){g&&(w=b,b=n[w]),qA(o,w,Wf(b,e,t,w,n,r))}),o}var HEe=4;function AV(n){return Wf(n,HEe)}var jEe=1,GEe=4;function ta(n){return Wf(n,jEe|GEe)}var WEe=1,qEe=4;function r3(n,e){return e=typeof e=="function"?e:void 0,Wf(n,WEe|qEe,e)}var KEe="__lodash_hash_undefined__";function YEe(n){return this.__data__.set(n,KEe),this}function XEe(n){return this.__data__.has(n)}function Jy(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Vc;++e<t;)this.add(n[e])}Jy.prototype.add=Jy.prototype.push=YEe;Jy.prototype.has=XEe;function QEe(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function ZEe(n,e){return n.has(e)}var JEe=1,eTe=2;function IV(n,e,t,i,s,r){var o=t&JEe,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(n),d=r.get(e);if(c&&d)return c==e&&d==n;var u=-1,h=!0,f=t&eTe?new Jy:void 0;for(r.set(n,e),r.set(e,n);++u<a;){var m=n[u],g=e[u];if(i)var b=o?i(g,m,u,e,n,r):i(m,g,u,n,e,r);if(b!==void 0){if(b)continue;h=!1;break}if(f){if(!QEe(e,function(w,x){if(!ZEe(f,x)&&(m===w||s(m,w,t,i,r)))return f.push(x)})){h=!1;break}}else if(!(m===g||s(m,g,t,i,r))){h=!1;break}}return r.delete(n),r.delete(e),h}function tTe(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function nTe(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var iTe=1,sTe=2,rTe="[object Boolean]",oTe="[object Date]",aTe="[object Error]",lTe="[object Map]",cTe="[object Number]",dTe="[object RegExp]",uTe="[object Set]",hTe="[object String]",fTe="[object Symbol]",pTe="[object ArrayBuffer]",mTe="[object DataView]",x8=Pl?Pl.prototype:void 0,gk=x8?x8.valueOf:void 0;function gTe(n,e,t,i,s,r,o){switch(t){case mTe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case pTe:return!(n.byteLength!=e.byteLength||!r(new Zy(n),new Zy(e)));case rTe:case oTe:case cTe:return _b(+n,+e);case aTe:return n.name==e.name&&n.message==e.message;case dTe:case hTe:return n==e+"";case lTe:var a=tTe;case uTe:var l=i&iTe;if(a||(a=nTe),n.size!=e.size&&!l)return!1;var c=o.get(n);if(c)return c==e;i|=sTe,o.set(n,e);var d=IV(a(n),a(e),i,s,r,o);return o.delete(n),d;case fTe:if(gk)return gk.call(n)==gk.call(e)}return!1}var bTe=1,vTe=Object.prototype,yTe=vTe.hasOwnProperty;function wTe(n,e,t,i,s,r){var o=t&bTe,a=QT(n),l=a.length,c=QT(e),d=c.length;if(l!=d&&!o)return!1;for(var u=l;u--;){var h=a[u];if(!(o?h in e:yTe.call(e,h)))return!1}var f=r.get(n),m=r.get(e);if(f&&m)return f==e&&m==n;var g=!0;r.set(n,e),r.set(e,n);for(var b=o;++u<l;){h=a[u];var w=n[h],x=e[h];if(i)var k=o?i(x,w,h,e,n,r):i(w,x,h,n,e,r);if(!(k===void 0?w===x||s(w,x,t,i,r):k)){g=!1;break}b||(b=h=="constructor")}if(g&&!b){var E=n.constructor,T=e.constructor;E!=T&&"constructor"in n&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(g=!1)}return r.delete(n),r.delete(e),g}var xTe=1,_8="[object Arguments]",k8="[object Array]",K1="[object Object]",_Te=Object.prototype,E8=_Te.hasOwnProperty;function kTe(n,e,t,i,s,r){var o=wo(n),a=wo(e),l=o?k8:ba(n),c=a?k8:ba(e);l=l==_8?K1:l,c=c==_8?K1:c;var d=l==K1,u=c==K1,h=l==c;if(h&&d0(n)){if(!d0(e))return!1;o=!0,d=!1}if(h&&!d)return r||(r=new Ca),o||ZA(n)?IV(n,e,t,i,s,r):gTe(n,e,l,t,i,s,r);if(!(t&xTe)){var f=d&&E8.call(n,"__wrapped__"),m=u&&E8.call(e,"__wrapped__");if(f||m){var g=f?n.value():n,b=m?e.value():e;return r||(r=new Ca),s(g,b,t,i,r)}}return h?(r||(r=new Ca),wTe(n,e,t,i,s,r)):!1}function Eb(n,e,t,i,s){return n===e?!0:n==null||e==null||!Qo(n)&&!Qo(e)?n!==n&&e!==e:kTe(n,e,t,i,Eb,s)}var ETe=1,TTe=2;function CTe(n,e,t,i){var s=t.length,r=s;if(n==null)return!r;for(n=Object(n);s--;){var o=t[s];if(o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++s<r;){o=t[s];var a=o[0],l=n[a],c=o[1];if(o[2]){if(l===void 0&&!(a in n))return!1}else{var d=new Ca,u;if(!(u===void 0?Eb(c,l,ETe|TTe,i,d):u))return!1}}return!0}function PV(n){return n===n&&!rs(n)}function STe(n){for(var e=kb(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,PV(s)]}return e}function RV(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function ATe(n){var e=STe(n);return e.length==1&&e[0][2]?RV(e[0][0],e[0][1]):function(t){return t===n||CTe(t,n,e)}}function ITe(n,e){return n!=null&&e in Object(n)}function PTe(n,e,t){e=zx(e,n);for(var i=-1,s=e.length,r=!1;++i<s;){var o=rm(e[i]);if(!(r=n!=null&&t(n,o)))break;n=n[o]}return r||++i!=s?r:(s=n==null?0:n.length,!!s&&KA(s)&&Mx(o,s)&&(wo(n)||Qy(n)))}function RTe(n,e){return n!=null&&PTe(n,e,ITe)}var $Te=1,LTe=2;function OTe(n,e){return JA(n)&&PV(e)?RV(rm(n),e):function(t){var i=f0(t,n);return i===void 0&&i===e?RTe(t,n):Eb(e,i,$Te|LTe)}}function DTe(n){return function(e){return e==null?void 0:e[n]}}function MTe(n){return function(e){return t3(e,n)}}function NTe(n){return JA(n)?DTe(rm(n)):MTe(n)}function FTe(n){return typeof n=="function"?n:n==null?WA:typeof n=="object"?wo(n)?OTe(n[0],n[1]):ATe(n):NTe(n)}function BTe(n){return function(e,t,i){for(var s=-1,r=Object(e),o=i(e),a=o.length;a--;){var l=o[++s];if(t(r[l],l,r)===!1)break}return e}}var $V=BTe();function VTe(n,e){return n&&$V(n,e,kb)}var bk=function(){return Ua.Date.now()},UTe="Expected a function",zTe=Math.max,HTe=Math.min;function Sc(n,e,t){var i,s,r,o,a,l,c=0,d=!1,u=!1,h=!0;if(typeof n!="function")throw new TypeError(UTe);e=X6(e)||0,rs(t)&&(d=!!t.leading,u="maxWait"in t,r=u?zTe(X6(t.maxWait)||0,e):r,h="trailing"in t?!!t.trailing:h);function f(P){var C=i,A=s;return i=s=void 0,c=P,o=n.apply(A,C),o}function m(P){return c=P,a=setTimeout(w,e),d?f(P):o}function g(P){var C=P-l,A=P-c,R=e-C;return u?HTe(R,r-A):R}function b(P){var C=P-l,A=P-c;return l===void 0||C>=e||C<0||u&&A>=r}function w(){var P=bk();if(b(P))return x(P);a=setTimeout(w,g(P))}function x(P){return a=void 0,h&&i?f(P):(i=s=void 0,o)}function k(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function E(){return a===void 0?o:x(bk())}function T(){var P=bk(),C=b(P);if(i=arguments,s=this,l=P,C){if(a===void 0)return m(l);if(u)return clearTimeout(a),a=setTimeout(w,e),f(l)}return a===void 0&&(a=setTimeout(w,e)),o}return T.cancel=k,T.flush=E,T}function tC(n,e,t){(t!==void 0&&!_b(n[e],t)||t===void 0&&!(e in n))&&Nx(n,e,t)}function jTe(n){return Qo(n)&&Fx(n)}function nC(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function GTe(n){return im(n,sm(n))}function WTe(n,e,t,i,s,r,o){var a=nC(n,t),l=nC(e,t),c=o.get(l);if(c){tC(n,t,c);return}var d=r?r(a,l,t+"",n,e,o):void 0,u=d===void 0;if(u){var h=wo(l),f=!h&&d0(l),m=!h&&!f&&ZA(l);d=l,h||f||m?wo(a)?d=a:jTe(a)?d=zB(a):f?(u=!1,d=yV(l,!0)):m?(u=!1,d=kV(l,!0)):d=[]:Wr(l)||Qy(l)?(d=a,Qy(a)?d=GTe(a):(!rs(a)||fh(a))&&(d=EV(l))):u=!1}u&&(o.set(l,d),s(d,l,i,r,o),o.delete(l)),tC(n,t,d)}function o3(n,e,t,i,s){n!==e&&$V(e,function(r,o){if(s||(s=new Ca),rs(r))WTe(n,e,o,t,o3,i,s);else{var a=i?i(nC(n,o),r,o+"",n,e,s):void 0;a===void 0&&(a=r),tC(n,o,a)}},sm)}var qTe=YA(function(n,e,t,i){o3(n,e,t,i)});function KTe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var YTe="[object String]";function T8(n){return typeof n=="string"||!wo(n)&&Qo(n)&&Zd(n)==YTe}function XTe(n,e){return e.length<2?n:t3(n,QB(e,0,-1))}function Ac(n){return Qo(n)&&n.nodeType===1&&!Wr(n)}function ew(n,e){return Eb(n,e)}function QTe(n,e,t){t=typeof t=="function"?t:void 0;var i=t?t(n,e):void 0;return i===void 0?Eb(n,e,void 0,t):!!i}function ZTe(n,e){var t={};return e=FTe(e),VTe(n,function(i,s,r){Nx(t,s,e(i,s,r))}),t}var a3=YA(function(n,e,t){o3(n,e,t)});function JTe(n,e){return e=zx(e,n),n=XTe(n,e),n==null||delete n[rm(KTe(e))]}function eCe(n,e,t,i){if(!rs(n))return n;e=zx(e,n);for(var s=-1,r=e.length,o=r-1,a=n;a!=null&&++s<r;){var l=rm(e[s]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(s!=o){var d=a[l];c=void 0,c===void 0&&(c=rs(d)?d:Mx(e[s+1])?[]:{})}qA(a,l,c),a=a[l]}return n}function tCe(n,e,t){return n==null?n:eCe(n,e,t)}var nCe=mke(function(n,e,t){return n+(t?" ":"")+C2e(e)}),iCe="Expected a function";function p0(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(iCe);return rs(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Sc(n,e,{leading:i,maxWait:e,trailing:s})}function sCe(n,e){return n==null?!0:JTe(n,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let iC;try{iC={window,document}}catch(n){/* istanbul ignore next -- @preserve */iC={window:{},document:{}}}var Ut=iC;function rCe(){try{return navigator.userAgent.toLowerCase()}catch(n){return""}}const Eu=rCe(),bn={isMac:LV(Eu),isWindows:oCe(Eu),isGecko:aCe(Eu),isSafari:lCe(Eu),isiOS:cCe(Eu),isAndroid:dCe(Eu),isBlink:uCe(Eu),get isMediaForcedColors(){return fCe()},get isMotionReduced(){return pCe()},features:{isRegExpUnicodePropertySupported:hCe()}};function LV(n){return n.indexOf("macintosh")>-1}function oCe(n){return n.indexOf("windows")>-1}function aCe(n){return!!n.match(/gecko\/\d+/)}function lCe(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function cCe(n){return!!n.match(/iphone|ipad/i)||LV(n)&&navigator.maxTouchPoints>0}function dCe(n){return n.indexOf("android")>-1}function uCe(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function hCe(){let n=!1;try{n="ć".search(new RegExp("[\\p{L}]","u"))===0}catch(e){}return n}function fCe(){return Ut.window.matchMedia?Ut.window.matchMedia("(forced-colors: active)").matches:!1}function pCe(){return Ut.window.matchMedia?Ut.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function OV(n,e,t,i){t=t||function(l,c){return l===c};const s=Array.isArray(n)?n:Array.prototype.slice.call(n),r=Array.isArray(e)?e:Array.prototype.slice.call(e),o=mCe(s,r,t);return i?bCe(o,r.length):gCe(r,o)}function mCe(n,e,t){const i=C8(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=S8(n,i),r=S8(e,i),o=C8(s,r,t),a=n.length-o,l=e.length-o;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function C8(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function S8(n,e){return n.slice(e).reverse()}function gCe(n,e){const t=[],{firstIndex:i,lastIndexOld:s,lastIndexNew:r}=e;return r-i>0&&t.push({index:i,type:"insert",values:n.slice(i,r)}),s-i>0&&t.push({index:i+(r-i),type:"delete",howMany:s-i}),t}function bCe(n,e){const{firstIndex:t,lastIndexOld:i,lastIndexNew:s}=n;if(t===-1)return Array(e).fill("equal");let r=[];return t>0&&(r=r.concat(Array(t).fill("equal"))),s-t>0&&(r=r.concat(Array(s-t).fill("insert"))),i-t>0&&(r=r.concat(Array(i-t).fill("delete"))),s<e&&(r=r.concat(Array(e-s).fill("equal"))),r}function Eg(n,e,t){t=t||function(g,b){return g===b};const i=n.length,s=e.length;if(i>200||s>200||i+s>300)return Eg.fastDiff(n,e,t,!0);let r,o;if(s<i){const g=n;n=e,e=g,r="delete",o="insert"}else r="insert",o="delete";const a=n.length,l=e.length,c=l-a,d={},u={};function h(g){const b=(u[g-1]!==void 0?u[g-1]:-1)+1,w=u[g+1]!==void 0?u[g+1]:-1,x=b>w?-1:1;d[g+x]&&(d[g]=d[g+x].slice(0)),d[g]||(d[g]=[]),d[g].push(b>w?r:o);let k=Math.max(b,w),E=k-g;for(;E<a&&k<l&&t(n[E],e[k]);)E++,k++,d[g].push("equal");return k}let f=0,m;do{for(m=-f;m<c;m++)u[m]=h(m);for(m=c+f;m>c;m--)u[m]=h(m);u[c]=h(c),f++}while(u[c]!==l);return d[c].slice(1)}Eg.fastDiff=OV;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function A8(){return function n(){n.called=!0}}class Ic{constructor(e,t){$(this,"source");$(this,"name");$(this,"path");$(this,"stop");$(this,"off");$(this,"return");this.source=e,this.name=t,this.path=[],this.stop=A8(),this.off=A8()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const or=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Oa(){const[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+or[n>>0&255]+or[n>>8&255]+or[n>>16&255]+or[n>>24&255]+or[e>>0&255]+or[e>>8&255]+or[e>>16&255]+or[e>>24&255]+or[t>>0&255]+or[t>>8&255]+or[t>>16&255]+or[t>>24&255]+or[i>>0&255]+or[i>>8&255]+or[i>>16&255]+or[i>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jo={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function vCe(n,e){const t=jo.get(e.priority);for(let i=0;i<n.length;i++)if(jo.get(n[i].priority)<t){n.splice(i,0,e);return}n.push(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yCe="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class _e extends Error{constructor(t,i,s){super(wCe(t,s));$(this,"context");$(this,"data");this.name="CKEditorError",this.context=i,this.data=s}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,i){if(t.is&&t.is("CKEditorError"))throw t;const s=new _e(t.message,i);throw s.stack=t.stack,s}}function is(n,e){console.warn(...xCe(n,e))}function DV(n){return"\nRead more: ".concat(yCe,"#error-").concat(n)}function wCe(n,e){const t=new WeakSet,i=(o,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return"[object ".concat(a.constructor.name,"]");t.add(a)}return a},s=e?" ".concat(JSON.stringify(e,i)):"",r=DV(n);return n+s+r}function xCe(n,e){const t=DV(n);return e?[n,e,t]:[n,t]}const _Ce="43.3.1",kCe=new Date(2024,10,6);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new _e("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=_Ce;const Ef=Symbol("listeningTo"),sC=Symbol("emitterId"),Ql=Symbol("delegations"),MV=Ri(Object);function Ri(n){if(!n)return MV;class e extends n{on(i,s,r){this.listenTo(this,i,s,r)}once(i,s,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),s.call(this,l,...c))};this.listenTo(this,i,a,r)}off(i,s){this.stopListening(this,i,s)}listenTo(i,s,r,o={}){let a,l;this[Ef]||(this[Ef]={});const c=this[Ef];vk(i)||NV(i);const d=vk(i);(a=c[d])||(a=c[d]={emitter:i,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(r),SCe(this,i,s,r,o)}stopListening(i,s,r){const o=this[Ef];let a=i&&vk(i);const l=o&&a?o[a]:void 0,c=l&&s?l.callbacks[s]:void 0;if(!(!o||i&&!l||s&&!c))if(r)yk(this,i,s,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[s]:yk(this,i,s,r));else if(c){for(;r=c.pop();)yk(this,i,s,r);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(i,s);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[Ef]}}fire(i,...s){try{const r=i instanceof Ic?i:new Ic(this,i),o=r.name;let a=BV(this,o);if(r.path.push(this),a){const c=[r,...s];a=Array.from(a);for(let d=0;d<a.length&&(a[d].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[d].callback)),!r.stop.called);d++);}const l=this[Ql];if(l){const c=l.get(o),d=l.get("*");c&&I8(c,r,s),d&&I8(d,r,s)}return r.return}catch(r){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(r,this)}}delegate(...i){return{to:(s,r)=>{this[Ql]||(this[Ql]=new Map),i.forEach(o=>{const a=this[Ql].get(o);a?a.set(s,r):this[Ql].set(o,new Map([[s,r]]))})}}}stopDelegating(i,s){if(this[Ql])if(!i)this[Ql].clear();else if(!s)this[Ql].delete(i);else{const r=this[Ql].get(i);r&&r.delete(s)}}_addEventListener(i,s,r){CCe(this,i);const o=rC(this,i),a=jo.get(r.priority),l={callback:s,priority:a};for(const c of o)vCe(c,l)}_removeEventListener(i,s){const r=rC(this,i);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==s&&(o.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Ri[n]=MV.prototype[n]});function ECe(n,e){const t=n[Ef];return t&&t[e]?t[e].emitter:null}function NV(n,e){n[sC]||(n[sC]=e||Oa())}function vk(n){return n[sC]}function FV(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function TCe(){return{callbacks:[],childEvents:[]}}function CCe(n,e){const t=FV(n);if(t[e])return;let i=e,s=null;const r=[];for(;i!==""&&!t[i];)t[i]=TCe(),r.push(t[i]),s&&t[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const o of r)o.callbacks=t[i].callbacks.slice();t[i].childEvents.push(s)}}function rC(n,e){const t=FV(n)[e];if(!t)return[];let i=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const r=rC(n,t.childEvents[s]);i=i.concat(r)}return i}function BV(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?BV(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function I8(n,e,t){for(let[i,s]of n){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const r=new Ic(e.source,s);r.path=[...e.path],i.fire(r,...t)}}function SCe(n,e,t,i,s){e._addEventListener?e._addEventListener(t,i,s):n._addEventListener.call(e,t,i,s)}function yk(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}const Tg=Symbol("observableProperties"),m0=Symbol("boundObservables"),Cg=Symbol("boundProperties"),Tu=Symbol("decoratedMethods"),P8=Symbol("decoratedOriginal"),VV=gs(Ri());function gs(n){var t,i,s,r;if(!n)return VV;class e extends n{constructor(){super(...arguments);$(this,t);$(this,i);$(this,s);$(this,r)}set(l,c){if(rs(l)){Object.keys(l).forEach(u=>{this.set(u,l[u])},this);return}wk(this);const d=this[Tg];if(l in this&&!d.has(l))throw new _e("observable-set-cannot-override",this);Object.defineProperty(this,l,{enumerable:!0,configurable:!0,get(){return d.get(l)},set(u){const h=d.get(l);let f=this.fire("set:".concat(l),l,u,h);f===void 0&&(f=u),(h!==f||!d.has(l))&&(d.set(l,f),this.fire("change:".concat(l),l,f,h))}}),this[l]=c}bind(...l){if(!l.length||!R8(l))throw new _e("observable-bind-wrong-properties",this);if(new Set(l).size!==l.length)throw new _e("observable-bind-duplicate-properties",this);wk(this);const c=this[Cg];l.forEach(u=>{if(c.has(u))throw new _e("observable-bind-rebind",this)});const d=new Map;return l.forEach(u=>{const h={property:u,to:[]};c.set(u,h),d.set(u,h)}),{to:ACe,toMany:ICe,_observable:this,_bindProperties:l,_to:[],_bindings:d}}unbind(...l){if(!this[Tg])return;const c=this[Cg],d=this[m0];if(l.length){if(!R8(l))throw new _e("observable-unbind-wrong-properties",this);l.forEach(u=>{const h=c.get(u);h&&(h.to.forEach(([f,m])=>{const g=d.get(f),b=g[m];b.delete(h),b.size||delete g[m],Object.keys(g).length||(d.delete(f),this.stopListening(f,"change"))}),c.delete(u))})}else d.forEach((u,h)=>{this.stopListening(h,"change")}),d.clear(),c.clear()}decorate(l){wk(this);const c=this[l];if(!c)throw new _e("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:l});this.on(l,(d,u)=>{d.return=c.apply(this,u)}),this[l]=function(...d){return this.fire(l,d)},this[l][P8]=c,this[Tu]||(this[Tu]=[]),this[Tu].push(l)}stopListening(l,c,d){if(!l&&this[Tu]){for(const u of this[Tu])this[u]=this[u][P8];delete this[Tu]}super.stopListening(l,c,d)}}return t=Tg,i=Tu,s=Cg,r=m0,e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{gs[n]=VV.prototype[n]});function wk(n){n[Tg]||(Object.defineProperty(n,Tg,{value:new Map}),Object.defineProperty(n,m0,{value:new Map}),Object.defineProperty(n,Cg,{value:new Map}))}function ACe(...n){const e=RCe(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new _e("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new _e("observable-bind-to-extra-callback",this);e.to.forEach(s=>{if(s.properties.length&&s.properties.length!==i)throw new _e("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),OCe(this._observable,this._to),LCe(this),this._bindProperties.forEach(s=>{UV(this._observable,s)})}function ICe(n,e,t){if(this._bindings.size>1)throw new _e("observable-bind-to-many-not-one-binding",this);this.to(...PCe(n,e),t)}function PCe(n,e){const t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function R8(n){return n.every(e=>typeof e=="string")}function RCe(...n){if(!n.length)throw new _e("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new _e("observable-bind-to-parse-error",null)}),e}function $Ce(n,e,t,i){const s=n[m0],r=s.get(t),o=r||{};o[i]||(o[i]=new Set),o[i].add(e),r||s.set(t,o)}function LCe(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(s=>{e=s.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([s.observable,e]),$Ce(n._observable,t,s.observable,e)})})}function UV(n,e){const i=n[Cg].get(e);let s;i.callback?s=i.callback.apply(n,i.to.map(r=>r[0][r[1]])):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=s:n.set(e,s)}function OCe(n,e){e.forEach(t=>{const i=n[m0];let s;i.get(t.observable)||n.listenTo(t.observable,"change",(r,o)=>{s=i.get(t.observable)[o],s&&s.forEach(a=>{UV(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DCe{constructor(){$(this,"_replacedElements");this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oC(n){let e=0;for(const t of n)e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tr(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xo(n){return!!(n&&n[Symbol.iterator])}function fa(n,e,t={},i=[]){const s=t&&t.xmlns,r=s?n.createElementNS(s,e):n.createElement(e);for(const o in t)r.setAttribute(o,t[o]);(T8(i)||!xo(i))&&(i=[i]);for(let o of i)T8(o)&&(o=n.createTextNode(o)),r.appendChild(o);return r}let zV=class{constructor(e,t){$(this,"_config");this._config=Object.create(null),t&&this.define($8(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,s=!1){if(Wr(t)){this._setObjectToTarget(e,t,s);return}const r=t.split(".");t=r.pop();for(const o of r)Wr(e[o])||(e[o]=Object.create(null)),e=e[o];if(Wr(i)){Wr(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,i,s);return}s&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const s of i){if(!Wr(e[s])){e=null;break}e=e[s]}return e?$8(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],i)})}};function $8(n){return r3(n,MCe)}function MCe(n){return Ac(n)||typeof n=="function"?n:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ud(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tw(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}const HV=za(Ri());function za(n){if(!n)return HV;class e extends n{listenTo(i,s,r,o={}){if(Ud(i)||tw(i)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(i,a)||new NCe(i,a);this.listenTo(l,s,r,o)}else super.listenTo(i,s,r,o)}stopListening(i,s,r){if(Ud(i)||tw(i)){const o=this._getAllProxyEmitters(i);for(const a of o)this.stopListening(a,s,r)}else super.stopListening(i,s,r)}_getProxyEmitter(i,s){return ECe(this,jV(i,s))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(i,s)).filter(s=>!!s)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{za[n]=HV.prototype[n]});class NCe extends Ri(){constructor(t,i){super();$(this,"_domNode");$(this,"_options");$(this,"_domListeners");NV(this,jV(t,i)),this._domNode=t,this._options=i}attach(t){if(this._domListeners&&this._domListeners[t])return;const i=this._createDomListener(t);this._domNode.addEventListener(t,i,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=i}detach(t){let i;this._domListeners[t]&&(!(i=this._events[t])||!i.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,i,s){this.attach(t),Ri().prototype._addEventListener.call(this,t,i,s)}_removeEventListener(t,i){Ri().prototype._removeEventListener.call(this,t,i),this.detach(t)}_createDomListener(t){const i=s=>{this.fire(t,s)};return i.removeListener=()=>{this._domNode.removeEventListener(t,i,this._options),delete this._domListeners[t]},i}}function FCe(n){return n["data-ck-expando"]||(n["data-ck-expando"]=Oa())}function jV(n,e){let t=FCe(n);for(const i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function BCe(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function VCe(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function GV(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function WV(n){if(!n.target)return null;const e=n.target.ownerDocument,t=n.clientX,i=n.clientY;let s=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,i)?s=e.caretRangeFromPoint(t,i):n.rangeParent&&(s=e.createRange(),s.setStart(n.rangeParent,n.rangeOffset),s.collapse(!0)),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ls(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hx(n){return Object.prototype.toString.apply(n)=="[object Range]"}function qV(n){return!n||!n.parentNode||n.offsetParent===Ut.document.body?null:n.offsetParent}const KV=["top","right","bottom","left","width","height"];class Sn{constructor(e){$(this,"top");$(this,"right");$(this,"bottom");$(this,"left");$(this,"width");$(this,"height");$(this,"_source");const t=Hx(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),aC(e)||t)if(t){const i=Sn.getDomRangeRects(e);Y1(this,Sn.getBoundingRect(i))}else Y1(this,e.getBoundingClientRect());else if(tw(e)){const{innerWidth:i,innerHeight:s}=e;Y1(this,{top:0,right:i,bottom:s,left:0,width:i,height:s})}else Y1(this,e)}clone(){return new Sn(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const i=new Sn(t);return i._source=this._source,i}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(L8(e))return t;let i=e,s=e.parentNode||e.commonAncestorContainer,r;for(;s&&!L8(s);){const o=UCe(s)==="visible";i instanceof HTMLElement&&O8(i)==="absolute"&&(r=i);const a=O8(s);if(o||r&&(a==="relative"&&o||a!=="relative")){i=s,s=s.parentNode;continue}const l=new Sn(s),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;i=s,s=s.parentNode}return t}isEqual(e){for(const t of KV)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=Ut.window,i=this.clone().moveBy(e,t);if(aC(i._source)){const s=qV(i._source);s&&zCe(i,s)}return i}excludeScrollbarsAndBorders(){const e=this._source;let t,i,s;if(tw(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const r=GV(e);t=e.offsetWidth-e.clientWidth-r.left-r.right,i=e.offsetHeight-e.clientHeight-r.top-r.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const s of i)t.push(new Sn(s));else{let s=e.startContainer;ls(s)&&(s=s.parentNode);const r=new Sn(s.getBoundingClientRect());r.right=r.left,r.width=0,t.push(r)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const s of e)i++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Sn(t))}}function Y1(n,e){for(const t of KV)n[t]=e[t]}function L8(n){return aC(n)?n===n.ownerDocument.body:!1}function aC(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function O8(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function UCe(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function zCe(n,e){const t=new Sn(e),i=GV(e);let s=0,r=0;s-=t.left,r-=t.top,s+=e.scrollLeft,r+=e.scrollTop,s-=i.left,r-=i.top,n.moveBy(s,r)}var Vi;let l3=(Vi=class{constructor(e,t){$(this,"_element");$(this,"_callback");Vi._observerInstance||Vi._createObserver(),this._element=e,this._callback=t,Vi._addElementCallback(e,t),Vi._observerInstance.observe(e)}get element(){return this._element}destroy(){Vi._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Vi._elementCallbacks||(Vi._elementCallbacks=new Map);let i=Vi._elementCallbacks.get(e);i||(i=new Set,Vi._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=Vi._getElementCallbacks(e);i&&(i.delete(t),i.size||(Vi._elementCallbacks.delete(e),Vi._observerInstance.unobserve(e))),Vi._elementCallbacks&&!Vi._elementCallbacks.size&&(Vi._observerInstance=null,Vi._elementCallbacks=null)}static _getElementCallbacks(e){return Vi._elementCallbacks?Vi._elementCallbacks.get(e):null}static _createObserver(){Vi._observerInstance=new Ut.window.ResizeObserver(e=>{for(const t of e){const i=Vi._getElementCallbacks(t.target);if(i)for(const s of i)s(t)}})}},$(Vi,"_observerInstance",null),$(Vi,"_elementCallbacks",null),Vi);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D8(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tb(n){return e=>e+n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ig(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function YV(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sg(n){return n&&n.nodeType===Node.COMMENT_NODE}function XV(n){try{Ut.document.createAttribute(n)}catch(e){return!1}return!0}function Pc(n){return n?ls(n)?Pc(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function c3({element:n,target:e,positions:t,limiter:i,fitInViewport:s,viewportOffsetConfig:r}){fh(e)&&(e=e()),fh(i)&&(i=i());const o=qV(n),a=HCe(r),l=new Sn(n),c=M8(e,a);let d;if(!c||!a.getIntersection(c))return null;const u={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!i&&!s)d=new QV(t[0],u);else{if(i){const h=M8(i,a);h&&(u.limiterRect=h)}d=jCe(t,u)}return d}function M8(n,e){const t=new Sn(n).getVisible();return t?t.getIntersection(e):null}function HCe(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new Sn(Ut.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function jCe(n,e){const{elementRect:t}=e,i=t.getArea(),s=n.map(a=>new QV(a,e)).filter(a=>!!a.name);let r=0,o=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;const d=c**2+l**2;d>r&&(r=d,o=a)}return o}class QV{constructor(e,t){$(this,"name");$(this,"config");$(this,"_positioningFunctionCoordinates");$(this,"_options");$(this,"_cachedRect");$(this,"_cachedAbsoluteRect");const i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;const{left:s,top:r,name:o,config:a}=i;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:s,top:r},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function N8(n){const e=n.parentNode;e&&e.removeChild(n)}function GCe({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:s}){const r=d3(n);let o=r,a=null;for(e=KCe(e);o;){let l;o==r?l=F8(n):l=F8(a),qCe({parent:l,getRect:()=>B8(n,o),alignToTop:i,ancestorOffset:t,forceScroll:s});const c=B8(n,o);if(WCe({window:o,rect:c,viewportOffset:e,alignToTop:i,forceScroll:s}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function WCe({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:s}){const r=e.clone().moveBy(0,s.bottom),o=e.clone().moveBy(0,-s.top),a=new Sn(n).excludeScrollbarsAndBorders(),l=[o,r],c=t&&i,d=l.every(g=>a.contains(g));let{scrollX:u,scrollY:h}=n;const f=u,m=h;c?h-=a.top-e.top+s.top:d||(JV(o,a)?h-=a.top-e.top+s.top:ZV(r,a)&&(t?h+=e.top-a.top-s.top:h+=e.bottom-a.bottom+s.bottom)),d||(eU(e,a)?u-=a.left-e.left+s.left:tU(e,a)&&(u+=e.right-a.right+s.right)),(u!=f||h!==m)&&n.scrollTo(u,h)}function qCe({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:s=0,limiterElement:r}){const o=d3(n),a=t&&i;let l,c,d;const u=r||o.document.body;for(;n!=u;)c=e(),l=new Sn(n).excludeScrollbarsAndBorders(),d=l.contains(c),a?n.scrollTop-=l.top-c.top+s:d||(JV(c,l)?n.scrollTop-=l.top-c.top+s:ZV(c,l)&&(t?n.scrollTop+=c.top-l.top-s:n.scrollTop+=c.bottom-l.bottom+s)),d||(eU(c,l)?n.scrollLeft-=l.left-c.left+s:tU(c,l)&&(n.scrollLeft+=c.right-l.right+s)),n=n.parentNode}function ZV(n,e){return n.bottom>e.bottom}function JV(n,e){return n.top<e.top}function eU(n,e){return n.left<e.left}function tU(n,e){return n.right>e.right}function d3(n){return Hx(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function F8(n){if(Hx(n)){let e=n.commonAncestorContainer;return ls(e)&&(e=e.parentNode),e}else return n.parentNode}function B8(n,e){const t=d3(n),i=new Sn(n);if(t===e)return i;{let s=t;for(;s!=e;){const r=s.frameElement,o=new Sn(r).excludeScrollbarsAndBorders();i.moveBy(o.left,o.top),s=s.parent}}return i}function KCe(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}const YCe={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},XCe={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},V8={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},On=tSe(),QCe=Object.fromEntries(Object.entries(On).map(([n,e])=>{let t;return e in V8?t=V8[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function Pp(n){let e;if(typeof n=="string"){if(e=On[n.toLowerCase()],!e)throw new _e("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?On.alt:0)+(n.ctrlKey?On.ctrl:0)+(n.shiftKey?On.shift:0)+(n.metaKey?On.cmd:0);return e}function u3(n){return typeof n=="string"&&(n=nSe(n)),n.map(e=>typeof e=="string"?JCe(e):e).reduce((e,t)=>t+e,0)}function nw(n){let e=u3(n);return Object.entries(bn.isMac||bn.isiOS?YCe:XCe).reduce((s,[r,o])=>(e&On[r]&&(e&=~On[r],s+=o),s),"")+(e?QCe[e]:"")}function ZCe(n){return n==On.arrowright||n==On.arrowleft||n==On.arrowup||n==On.arrowdown}function nU(n,e){const t=e==="ltr";switch(n){case On.arrowleft:return t?"left":"right";case On.arrowright:return t?"right":"left";case On.arrowup:return"up";case On.arrowdown:return"down"}}function JCe(n){if(n.endsWith("!"))return Pp(n.slice(0,-1));const e=Pp(n);return(bn.isMac||bn.isiOS)&&e==On.ctrl?On.cmd:e}function eSe(n,e){const t=nU(n,e);return t==="down"||t==="right"}function tSe(){const n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function nSe(n){return n.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const iSe=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function U8(n){return iSe.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cs(n){return Array.isArray(n)?n:[n]}/* istanbul ignore else -- @preserve */Ut.window.CKEDITOR_TRANSLATIONS||(Ut.window.CKEDITOR_TRANSLATIONS={});function sSe(n,e,t=1,i){if(typeof t!="number")throw new _e("translation-service-quantity-not-a-number",null,{quantity:t});const s=i||Ut.window.CKEDITOR_TRANSLATIONS,r=aSe(s);r===1&&(n=Object.keys(s)[0]);const o=e.id||e.string;if(r===0||!oSe(n,o,s))return t!==1?e.plural:e.string;const a=s[n].dictionary,l=s[n].getPluralForm||(u=>u===1?0:1),c=a[o];if(typeof c=="string")return c;const d=Number(l(t));return c[d]}function rSe(n){return Array.isArray(n)?n.reduce((e,t)=>a3(e,t)):n}function oSe(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function aSe(n){return Object.keys(n).length}class lSe{constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){$(this,"uiLanguage");$(this,"uiLanguageDirection");$(this,"contentLanguage");$(this,"contentLanguageDirection");$(this,"t");$(this,"translations");this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=U8(this.uiLanguage),this.contentLanguageDirection=U8(this.contentLanguage),this.translations=rSe(i),this.t=(s,r)=>this._t(s,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=cs(t),typeof e=="string"&&(e={string:e});const s=!!e.plural?t[0]:1,r=sSe(this.uiLanguage,e,s,this.translations);return cSe(r,t)}}function cSe(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}class Jd extends Ri(){constructor(t={},i={}){super();$(this,"_items");$(this,"_itemMap");$(this,"_idProperty");$(this,"_bindToCollection");$(this,"_bindToExternalToInternalMap");$(this,"_bindToInternalToExternalMap");$(this,"_skippedIndexesFromExternal");const s=xo(t);if(s||(i=t),this._items=[],this._itemMap=new Map,this._idProperty=i.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const r of t)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,i){return this.addMany([t],i)}addMany(t,i){if(i===void 0)i=this._items.length;else if(i>this._items.length||i<0)throw new _e("collection-add-item-invalid-index",this);let s=0;for(const r of t){const o=this._getItemIdBeforeAdding(r),a=i+s;this._items.splice(a,0,r),this._itemMap.set(o,r),this.fire("add",r,a),s++}return this.fire("change",{added:t,removed:[],index:i}),this}get(t){let i;if(typeof t=="string")i=this._itemMap.get(t);else if(typeof t=="number")i=this._items[t];else throw new _e("collection-get-invalid-arg",this);return i||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const i=this._idProperty,s=t[i];return s&&this._itemMap.has(s)}}getIndex(t){let i;return typeof t=="string"?i=this._itemMap.get(t):i=t,i?this._items.indexOf(i):-1}remove(t){const[i,s]=this._remove(t);return this.fire("change",{added:[],removed:[i],index:s}),i}map(t,i){return this._items.map(t,i)}forEach(t,i){this._items.forEach(t,i)}find(t,i){return this._items.find(t,i)}filter(t,i){return this._items.filter(t,i)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new _e("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:i=>{this._setUpBindToBinding(s=>new i(s))},using:i=>{typeof i=="function"?this._setUpBindToBinding(i):this._setUpBindToBinding(s=>s[i])}}}_setUpBindToBinding(t){const i=this._bindToCollection,s=(r,o,a)=>{const l=i._bindToCollection==this,c=i._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const d=t(o);if(!d){this._skippedIndexesFromExternal.push(a);return}let u=a;for(const h of this._skippedIndexesFromExternal)a>h&&u--;for(const h of i._skippedIndexesFromExternal)u>=h&&u++;this._bindToExternalToInternalMap.set(o,d),this._bindToInternalToExternalMap.set(d,o),this.add(d,u);for(let h=0;h<i._skippedIndexesFromExternal.length;h++)u<=i._skippedIndexesFromExternal[h]&&i._skippedIndexesFromExternal[h]++}};for(const r of i)s(null,r,i.getIndex(r));this.listenTo(i,"add",s),this.listenTo(i,"remove",(r,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,d)=>(a<d&&c.push(d-1),a>d&&c.push(d),c),[])})}_getItemIdBeforeAdding(t){const i=this._idProperty;let s;if(i in t){if(s=t[i],typeof s!="string")throw new _e("collection-add-invalid-id",this);if(this.get(s))throw new _e("collection-add-item-already-exists",this)}else t[i]=s=Oa();return s}_remove(t){let i,s,r,o=!1;const a=this._idProperty;if(typeof t=="string"?(s=t,r=this._itemMap.get(s),o=!r,r&&(i=this._items.indexOf(r))):typeof t=="number"?(i=t,r=this._items[i],o=!r,r&&(s=r[a])):(r=t,s=r[a],i=this._items.indexOf(r),o=i==-1||!this._itemMap.get(s)),o)throw new _e("collection-remove-404",this);this._items.splice(i,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(l),this.fire("remove",r,i),[r,i]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zd(n){const e=n.next();return e.done?null:e.value}class na extends za(gs()){constructor(){super();$(this,"_elements",new Set);$(this,"_externalViews",new Set);$(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if(H8(t))this._addElement(t);else if(z8(t))this._addView(t);else{if(!t.element)throw new _e("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){H8(t)?this._removeElement(t):z8(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new _e("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const i=this.externalViews.find(s=>dSe(t,s));i?this._focus(i.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){this.elements.find(s=>s.contains(document.activeElement))||this.externalViews.find(s=>s.focusTracker.isFocused&&!s.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function z8(n){return"focusTracker"in n&&n.focusTracker instanceof na}function H8(n){return Ac(n)}function dSe(n,e){return j8(n,e)?!0:!!e.focusTracker.externalViews.find(t=>j8(n,t))}function j8(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}class Dl{constructor(){$(this,"_listener");this._listener=new(za())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+Pp(i),i)})}set(e,t,i={}){const s=u3(e),r=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(o,a)=>{i.filter&&!i.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:r})}press(e){return!!this._listener.fire("_keydown:"+Pp(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uSe(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}function Hd(n){return xo(n)?new Map(n):uSe(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hSe=1e4;function G8(n,e,t,i){if(Math.max(e.length,n.length)>hSe)return n.slice(0,t).concat(e).concat(n.slice(t+i,n.length));{const s=Array.from(n);return s.splice(t,i,...e),s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function h3(n,e){let t;function i(...s){i.cancel(),t=setTimeout(()=>n(...s),e)}return i.cancel=()=>{clearTimeout(t)},i}function fSe(n){function e(u){return u.length>=40&&u.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch(u){return"INVALID"}const i=t.split("-"),s=i[0],r=i[1];if(!r)return e(n);try{atob(r)}catch(u){try{if(atob(s),!atob(s).length)return e(n)}catch(h){return e(n)}}if(s.length<40||s.length>255)return"INVALID";let o="";try{atob(s),o=atob(r)}catch(u){return"INVALID"}if(o.length!==8)return"INVALID";const a=Number(o.substring(0,4)),l=Number(o.substring(4,6))-1,c=Number(o.substring(6,8)),d=new Date(a,l,c);return d<kCe||isNaN(Number(d))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pSe(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function mSe(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function gSe(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function f3(n,e){return mSe(n.charAt(e-1))&&gSe(n.charAt(e))}function p3(n,e){return pSe(n.charAt(e))}const bSe=vSe();function iU(n,e){const t=String(n).matchAll(bSe);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function vSe(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(s=>s.source).join("|")+")",i="".concat(e,"|").concat(t,"(?:‍").concat(t,")*");return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zv=new WeakMap;let W8=!1;function ySe({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:s=!1}){const r=n.document;zv.has(r)||(zv.set(r,new Map),r.registerPostFixer(a=>xk(r,a)),r.on("change:isComposing",()=>{n.change(a=>xk(r,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{o(c)}),e.placeholder?o(e.placeholder):t&&o(t),t&&ESe();function o(a){zv.get(r).set(e,{text:a,isDirectHost:i,keepOnFocus:s,hostElement:i?e:null}),n.change(l=>xk(r,l))}}function wSe(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function xSe(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function _Se(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(o=>!o.is("uiElement")))return!1;const i=n.document,r=i.selection.anchor;return i.isComposing&&r&&r.parent===n?!1:e||!i.isFocused?!0:!!r&&r.parent!==n}function xk(n,e){const t=zv.get(n),i=[];let s=!1;for(const[r,o]of t)o.isDirectHost&&(i.push(r),q8(e,r,o)&&(s=!0));for(const[r,o]of t){if(o.isDirectHost)continue;const a=kSe(r);a&&(i.includes(a)||(o.hostElement=a,q8(e,r,o)&&(s=!0)))}return s}function q8(n,e,t){const{text:i,isDirectHost:s,hostElement:r}=t;let o=!1;return r.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,r),o=!0),(s||e.childCount==1)&&_Se(r,t.keepOnFocus)?wSe(n,r)&&(o=!0):xSe(n,r)&&(o=!0),o}function kSe(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function ESe(){W8||is("enableplaceholder-deprecated-text-option"),W8=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Rh=class{is(){throw new Error("is() method is abstract")}},$h=class extends Ri(Rh){constructor(t){super();$(this,"document");$(this,"parent");this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))==-1)throw new _e("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let i=this;for(;i.parent;)t.unshift(i.index),i=i.parent;return t}getAncestors(t={}){const i=[];let s=t.includeSelf?this:this.parent;for(;s;)i[t.parentFirst?"push":"unshift"](s),s=s.parent;return i}getCommonAncestor(t,i={}){const s=this.getAncestors(i),r=t.getAncestors(i);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const i=this.getPath(),s=t.getPath(),r=Tr(i,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return i[r]<s[r]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,i){this.fire("change:".concat(t),i),this.parent&&this.parent._fireChange(t,i)}toJSON(){const t=AV(this);return delete t.parent,t}};$h.prototype.is=function(n){return n==="node"||n==="view:node"};let Ki=class lC extends $h{constructor(t,i){super(t);$(this,"_textData");this._textData=i}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof lC?this===t||this.data===t.data:!1}_clone(){return new lC(this.document,this.data)}};Ki.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};let al=class extends Rh{constructor(t,i,s){super();$(this,"textNode");$(this,"data");$(this,"offsetInText");if(this.textNode=t,i<0||i>t.data.length)throw new _e("view-textproxy-wrong-offsetintext",this);if(s<0||i+s>t.data.length)throw new _e("view-textproxy-wrong-length",this);this.data=t.data.substring(i,i+s),this.offsetInText=i}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const i=[];let s=t.includeSelf?this.textNode:this.parent;for(;s!==null;)i[t.parentFirst?"push":"unshift"](s),s=s.parent;return i}};al.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class mh{constructor(...e){$(this,"_patterns",[]);this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const s=K8(t,i);if(s)return{element:t,pattern:i,match:s}}return null}matchAll(...e){const t=[];for(const i of e)for(const s of this._patterns){const r=K8(i,s);r&&t.push({element:i,pattern:s,match:r})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function K8(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=TSe(e.name,n.name),!t.name)||e.attributes&&(t.attributes=ISe(e.attributes,n),!t.attributes)||e.classes&&(t.classes=PSe(e.classes,n),!t.classes)||e.styles&&(t.styles=RSe(e.styles,n),!t.styles)?null:t}function TSe(n,e){return n instanceof RegExp?!!e.match(n):n===e}function m3(n,e,t){const i=CSe(n),s=Array.from(e),r=[];if(i.forEach(([o,a])=>{s.forEach(l=>{SSe(o,l)&&ASe(a,l,t)&&r.push(l)})}),!(!i.length||r.length<i.length))return r}function CSe(n){return Array.isArray(n)?n.map(e=>Wr(e)?((e.key===void 0||e.value===void 0)&&is("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Wr(n)?Object.entries(n):[[n,!0]]}function SSe(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function ASe(n,e,t){if(n===!0)return!0;const i=t(e);return n===i||n instanceof RegExp&&!!String(i).match(n)}function ISe(n,e){const t=new Set(e.getAttributeKeys());return Wr(n)?(n.style!==void 0&&is("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&is("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),m3(n,t,i=>e.getAttribute(i))}function PSe(n,e){return m3(n,e.getClassNames(),()=>{})}function RSe(n,e){return m3(n,e.getStyleNames(!0),t=>e.getStyle(t))}class iw{constructor(e){$(this,"_styles");$(this,"_styleProcessor");this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=LSe(e);for(const[i,s]of t)this._styleProcessor.toNormalizedForm(i,s,this._styles)}has(e){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);return Array.isArray(i)}set(e,t){if(rs(e))for(const[i,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=cC(e);sCe(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!rs(this._styles[e]))return this._styles[e];const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const s=t.splice(0,t.length-1).join("."),r=f0(this._styles,s);if(!r)return;!Object.keys(r).length&&this.remove(s)}}class $Se{constructor(){$(this,"_normalizers");$(this,"_extractors");$(this,"_reducers");$(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(rs(t)){_k(i,cC(e),t);return}if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:r,value:o}=s(t);_k(i,r,o)}else _k(i,e,t)}getNormalized(e,t){if(!e)return a3({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return f0(t,i);const s=i(e,t);if(s)return s}return f0(t,cC(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=new Set;for(const i of this._consumables.keys()){const s=this.getNormalized(i,e);s&&(typeof s!="object"||Object.keys(s).length)&&t.add(i)}for(const i of Object.keys(e))t.add(i);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function LSe(n){let e=null,t=0,i=0,s=null;const r=new Map;if(n==="")return r;n.charAt(n.length-1)!=";"&&(n=n+";");for(let o=0;o<n.length;o++){const a=n.charAt(o);if(e===null)switch(a){case":":s||(s=n.substr(t,o-t),i=o+1);break;case'"':case"'":e=a;break;case";":{const l=n.substr(i,o-i);s&&r.set(s.trim(),l.trim()),s=null,t=o+1;break}}else a===e&&(e=null)}return r}function cC(n){return n.replace("-",".")}function _k(n,e,t){let i=t;rs(t)&&(i=a3({},f0(n,e),t)),tCe(n,e,i)}let Da=class sU extends $h{constructor(t,i,s,r){super(t);$(this,"name");$(this,"_unsafeAttributesToRender",[]);$(this,"_attrs");$(this,"_children");$(this,"_classes");$(this,"_styles");$(this,"_customProperties",new Map);if(this.name=i,this._attrs=OSe(s),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");Y8(this._classes,o),this._attrs.delete("class")}this._styles=new iw(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(t){if(t=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(t=="style"){const i=this._styles.toString();return i==""?void 0:i}return this._attrs.get(t)}hasAttribute(t){return t=="class"?this._classes.size>0:t=="style"?!this._styles.isEmpty:this._attrs.has(t)}isSimilar(t){if(!(t instanceof sU))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[i,s]of this._attrs)if(!t._attrs.has(i)||t._attrs.get(i)!==s)return!1;for(const i of this._classes)if(!t._classes.has(i))return!1;for(const i of this._styles.getStyleNames())if(!t._styles.has(i)||t._styles.getAsString(i)!==this._styles.getAsString(i))return!1;return!0}hasClass(...t){for(const i of t)if(!this._classes.has(i))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(t){return this._styles.getStyleNames(t)}hasStyle(...t){for(const i of t)if(!this._styles.has(i))return!1;return!0}findAncestor(...t){const i=new mh(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(i.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),i=this._styles.toString(),s=Array.from(this._attrs).map(r=>"".concat(r[0],'="').concat(r[1],'"')).sort().join(" ");return this.name+(t==""?"":' class="'.concat(t,'"'))+(i?' style="'.concat(i,'"'):"")+(s==""?"":" ".concat(s))}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const i=[];if(t)for(const r of this.getChildren())i.push(r._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,i);return s._classes=new Set(this._classes),s._styles.set(this._styles.getNormalized()),s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,i){this._fireChange("children",this);let s=0;const r=DSe(this.document,i);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(t,0,o),t++,s++;return s}_removeChildren(t,i=1){this._fireChange("children",this);for(let s=t;s<t+i;s++)this._children[s].parent=null;return this._children.splice(t,i)}_setAttribute(t,i){const s=String(i);this._fireChange("attributes",this),t=="class"?Y8(this._classes,s):t=="style"?this._styles.setTo(s):this._attrs.set(t,s)}_removeAttribute(t){return this._fireChange("attributes",this),t=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:t=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);for(const i of cs(t))this._classes.add(i)}_removeClass(t){this._fireChange("attributes",this);for(const i of cs(t))this._classes.delete(i)}_setStyle(t,i){this._fireChange("attributes",this),typeof t!="string"?this._styles.set(t):this._styles.set(t,i)}_removeStyle(t){this._fireChange("attributes",this);for(const i of cs(t))this._styles.remove(i)}_setCustomProperty(t,i){this._customProperties.set(t,i)}_removeCustomProperty(t){return this._customProperties.delete(t)}};Da.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function OSe(n){const e=Hd(n);for(const[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function Y8(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}function DSe(n,e){return typeof e=="string"?[new Ki(n,e)]:(xo(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Ki(n,t):t instanceof al?new Ki(n,t.data):t))}class g0 extends Da{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=MSe}}g0.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function MSe(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}class jx extends gs(g0){constructor(e,t,i,s){super(e,t,i,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",r=>r&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}jx.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const X8=Symbol("rootName");class rU extends jx{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(X8)}set rootName(e){this._setCustomProperty(X8,e)}set _name(e){this.name=e}}rU.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let Uu=class{constructor(e={}){$(this,"direction");$(this,"boundaries");$(this,"singleCharacters");$(this,"shallow");$(this,"ignoreElementEnd");$(this,"_position");$(this,"_boundaryStartParent");$(this,"_boundaryEndParent");if(!e.boundaries&&!e.startPosition)throw new _e("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new _e("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=$t._createAt(e.startPosition):this._position=$t._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(i instanceof Ki){if(e.isAtEnd)return this._position=$t._createAfter(i),this._next();s=i.data[e.offset]}else s=i.getChild(e.offset);if(s instanceof Da){if(!this.shallow)e=new $t(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",s,t,e,1)}if(s instanceof Ki){if(this.singleCharacters)return e=new $t(s,0),this._position=e,this._next();let r=s.data.length,o;return s==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new al(s,0,r),e=$t._createAfter(o)):(o=new al(s,0,s.data.length),e.offset++),this._position=e,this._formatReturnValue("text",o,t,e,r)}if(typeof s=="string"){let r;this.singleCharacters?r=1:r=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const o=new al(i,e.offset,r);return e.offset+=r,this._position=e,this._formatReturnValue("text",o,t,e,r)}return e=$t._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(i instanceof Ki){if(e.isAtStart)return this._position=$t._createBefore(i),this._previous();s=i.data[e.offset-1]}else s=i.getChild(e.offset-1);if(s instanceof Da)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new $t(s,s.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s instanceof Ki){if(this.singleCharacters)return e=new $t(s,s.data.length),this._position=e,this._previous();let r=s.data.length,o;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new al(s,a,s.data.length-a),r=o.data.length,e=$t._createBefore(o)}else o=new al(s,0,s.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",o,t,e,r)}if(typeof s=="string"){let r;if(this.singleCharacters)r=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;r=e.offset-a}e.offset-=r;const o=new al(i,e.offset,r);return this._position=e,this._formatReturnValue("text",o,t,e,r)}return e=$t._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,s,r){return t instanceof al&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=$t._createAfter(t.textNode),this._position=s):i=$t._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=$t._createBefore(t.textNode),this._position=s):i=$t._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:r}}}},$t=class ec extends Rh{constructor(t,i){super();$(this,"parent");$(this,"offset");this.parent=t,this.offset=i}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof jx);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(t){const i=ec._createAt(this),s=i.offset+t;return i.offset=s<0?0:s,i}getLastMatchingPosition(t,i={}){i.startPosition=this;const s=new Uu(i);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const i=this.getAncestors(),s=t.getAncestors();let r=0;for(;i[r]==s[r]&&i[r];)r++;return r===0?null:i[r-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const i=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];i.push(this.offset),s.push(t.offset);const r=Tr(i,s);switch(r){case"prefix":return"before";case"extension":return"after";default:return i[r]<s[r]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new Uu(t)}clone(){return new ec(this.parent,this.offset)}static _createAt(t,i){if(t instanceof ec)return new this(t.parent,t.offset);{const s=t;if(i=="end")i=s.is("$text")?s.data.length:s.childCount;else{if(i=="before")return this._createBefore(s);if(i=="after")return this._createAfter(s);if(i!==0&&!i)throw new _e("view-createpositionat-offset-required",s)}return new ec(s,i)}}static _createAfter(t){if(t.is("$textProxy"))return new ec(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new _e("view-position-after-root",t,{root:t});return new ec(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new ec(t.textNode,t.offsetInText);if(!t.parent)throw new _e("view-position-before-root",t,{root:t});return new ec(t.parent,t.index)}};$t.prototype.is=function(n){return n==="position"||n==="view:position"};let Rn=class od extends Rh{constructor(t,i=null){super();$(this,"start");$(this,"end");this.start=t.clone(),this.end=i?i.clone():t.clone()}*[Symbol.iterator](){yield*new Uu({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(X1,{direction:"backward"}),i=this.end.getLastMatchingPosition(X1);return t.parent.is("$text")&&t.isAtStart&&(t=$t._createBefore(t.parent)),i.parent.is("$text")&&i.isAtEnd&&(i=$t._createAfter(i.parent)),new od(t,i)}getTrimmed(){let t=this.start.getLastMatchingPosition(X1);if(t.isAfter(this.end)||t.isEqual(this.end))return new od(t,t);let i=this.end.getLastMatchingPosition(X1,{direction:"backward"});const s=t.nodeAfter,r=i.nodeBefore;return s&&s.is("$text")&&(t=new $t(s,0)),r&&r.is("$text")&&(i=new $t(r,r.data.length)),new od(t,i)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,i=!1){t.isCollapsed&&(i=!1);const s=this.containsPosition(t.start)||i&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||i&&this.end.isEqual(t.end);return s&&r}getDifference(t){const i=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&i.push(new od(this.start,t.start)),this.containsPosition(t.end)&&i.push(new od(t.end,this.end))):i.push(this.clone()),i}getIntersection(t){if(this.isIntersecting(t)){let i=this.start,s=this.end;return this.containsPosition(t.start)&&(i=t.start),this.containsPosition(t.end)&&(s=t.end),new od(i,s)}return null}getWalker(t={}){return t.boundaries=this,new Uu(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,i=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(i=this.end.parent.previousSibling),t&&t.is("element")&&t===i?t:null}clone(){return new od(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const i=new Uu(t);for(const s of i)yield s.item}*getPositions(t={}){t.boundaries=this;const i=new Uu(t);yield i.position;for(const s of i)yield s.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,i,s,r){return new this(new $t(t,i),new $t(s,r))}static _createFromPositionAndShift(t,i){const s=t,r=t.getShiftedBy(i);return i>0?new this(s,r):new this(r,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const i=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift($t._createBefore(t),i)}};Rn.prototype.is=function(n){return n==="range"||n==="view:range"};function X1(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}let xc=class oU extends Ri(Rh){constructor(...t){super();$(this,"_ranges");$(this,"_lastRangeBackward");$(this,"_isFake");$(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const i of this._ranges)(!t||i.start.isBefore(t.start))&&(t=i);return t?t.clone():null}getLastRange(){let t=null;for(const i of this._ranges)(!t||i.end.isAfter(t.end))&&(t=i);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const i of this._ranges){let s=!1;for(const r of t._ranges)if(i.isEqual(r)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const i=oC(this.getRanges()),s=oC(t.getRanges());if(i!=s)return!1;if(i==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let a of t.getRanges())if(a=a.getTrimmed(),r.start.isEqual(a.start)&&r.end.isEqual(a.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[i,s,r]=t;if(typeof s=="object"&&(r=s,s=void 0),i===null)this._setRanges([]),this._setFakeOptions(r);else if(i instanceof oU||i instanceof g3)this._setRanges(i.getRanges(),i.isBackward),this._setFakeOptions({fake:i.isFake,label:i.fakeSelectionLabel});else if(i instanceof Rn)this._setRanges([i],r&&r.backward),this._setFakeOptions(r);else if(i instanceof $t)this._setRanges([new Rn(i)]),this._setFakeOptions(r);else if(i instanceof $h){const o=!!r&&!!r.backward;let a;if(s===void 0)throw new _e("view-selection-setto-required-second-parameter",this);s=="in"?a=Rn._createIn(i):s=="on"?a=Rn._createOn(i):a=new Rn($t._createAt(i,s)),this._setRanges([a],o),this._setFakeOptions(r)}else if(xo(i))this._setRanges(i,r&&r.backward),this._setFakeOptions(r);else throw new _e("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(t,i){if(this.anchor===null)throw new _e("view-selection-setfocus-no-ranges",this);const s=$t._createAt(t,i);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),s.compareWith(r)=="before"?this._addRange(new Rn(s,r),!0):this._addRange(new Rn(r,s)),this.fire("change")}_setRanges(t,i=!1){t=Array.from(t),this._ranges=[];for(const s of t)this._addRange(s);this._lastRangeBackward=!!i}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,i=!1){if(!(t instanceof Rn))throw new _e("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!i}_pushRange(t){for(const i of this._ranges)if(t.isIntersecting(i))throw new _e("view-selection-range-intersects",this,{addedRange:t,intersectingRange:i});this._ranges.push(new Rn(t.start,t.end))}};xc.prototype.is=function(n){return n==="selection"||n==="view:selection"};let g3=class extends Ri(Rh){constructor(...t){super();$(this,"_selection");this._selection=new xc,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,i){this._selection.setFocus(t,i)}};g3.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class om extends Ic{constructor(t,i,s){super(t,i);$(this,"startRange");$(this,"_eventPhase");$(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const kk=Symbol("bubbling contexts");function dC(n){class e extends n{fire(i,...s){try{const r=i instanceof Ic?i:new Ic(this,i),o=Ek(this);if(!o.size)return;if(Um(r,"capturing",this),sf(o,"$capture",r,...s))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!aU(o,l):!1;let d=l||NSe(a);if(Um(r,"atTarget",d),!c){if(sf(o,"$text",r,...s))return r.return;Um(r,"bubbling",d)}for(;d;){if(d.is("rootElement")){if(sf(o,"$root",r,...s))return r.return}else if(d.is("element")&&sf(o,d.name,r,...s))return r.return;if(sf(o,d,r,...s))return r.return;d=d.parent,Um(r,"bubbling",d)}return Um(r,"bubbling",this),sf(o,"$document",r,...s),r.return}catch(r){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(r,this)}}_addEventListener(i,s,r){const o=cs(r.context||"$document"),a=Ek(this);for(const l of o){let c=a.get(l);c||(c=new(Ri()),a.set(l,c)),this.listenTo(c,i,s,r)}}_removeEventListener(i,s){const r=Ek(this);for(const o of r.values())this.stopListening(o,i,s)}}return e}{const n=dC(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{dC[e]=n.prototype[e]})}function Um(n,e,t){n instanceof om&&(n._eventPhase=e,n._currentTarget=t)}function sf(n,e,t,...i){const s=typeof e=="string"?n.get(e):aU(n,e);return s?(s.fire(t,...i),t.stop.called):!1}function aU(n,e){for(const[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function Ek(n){return n[kk]||(n[kk]=new Map),n[kk]}function NSe(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,i=e.getPath(),s=t.getPath();return i.length>s.length?e:t}let lU=class extends dC(gs()){constructor(t){super();$(this,"selection");$(this,"roots");$(this,"stylesProcessor");$(this,"_postFixers",new Set);this.selection=new g3,this.roots=new Jd({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let i=!1;do for(const s of this._postFixers)if(i=s(t),i)break;while(i)}};const Q8=10;class nh extends Da{constructor(t,i,s,r){super(t,i,s,r);$(this,"_priority",Q8);$(this,"_id",null);$(this,"_clonesGroup",null);this.getFillerOffset=FSe}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new _e("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const i=super._clone(t);return i._priority=this._priority,i._id=this._id,i}}$(nh,"DEFAULT_PRIORITY",Q8);nh.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function FSe(){if(Tk(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(Tk(n)>1)return null;n=n.parent}return!n||Tk(n)>1?null:this.childCount}function Tk(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}class b3 extends Da{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=BSe}_insertChild(e,t){if(t&&(t instanceof $h||Array.from(t).length>0))throw new _e("view-emptyelement-cannot-add",[this,t]);return 0}}b3.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function BSe(){return null}class Gx extends Da{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=USe}_insertChild(e,t){if(t&&(t instanceof $h||Array.from(t).length>0))throw new _e("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}Gx.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function VSe(n){n.document.on("arrowKey",(e,t)=>zSe(e,t,n.domConverter),{priority:"low"})}function USe(){return null}function zSe(n,e,t){if(e.keyCode==On.arrowright){const i=e.domTarget.ownerDocument.defaultView.getSelection(),s=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(s||e.shiftKey){const r=i.focusNode,o=i.focusOffset,a=t.domPositionToView(r,o);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(d=>(d.item.is("uiElement")&&(l=!0),!!(d.item.is("uiElement")||d.item.is("attributeElement"))));if(l){const d=t.viewPositionToDom(c);s?i.collapse(d.parent,d.offset):i.extend(d.parent,d.offset)}}}}class v3 extends Da{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=HSe}_insertChild(e,t){if(t&&(t instanceof $h||Array.from(t).length>0))throw new _e("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}v3.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function HSe(){return null}let ih=class extends Ri(Rh){constructor(t,i){super();$(this,"document");$(this,"_children",[]);$(this,"_customProperties",new Map);this.document=t,i&&this._insertChild(0,i)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,i){this._fireChange("children",this);let s=0;const r=jSe(this.document,i);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(t,0,o),t++,s++;return s}_removeChildren(t,i=1){this._fireChange("children",this);for(let s=t;s<t+i;s++)this._children[s].parent=null;return this._children.splice(t,i)}_fireChange(t,i){this.fire("change:"+t,i)}_setCustomProperty(t,i){this._customProperties.set(t,i)}_removeCustomProperty(t){return this._customProperties.delete(t)}};ih.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function jSe(n,e){return typeof e=="string"?[new Ki(n,e)]:(xo(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Ki(n,t):t instanceof al?new Ki(n,t.data):t))}class cU{constructor(e){$(this,"document");$(this,"_cloneGroups",new Map);$(this,"_slotFactory",null);this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new ih(this.document,e)}createText(e){return new Ki(this.document,e)}createAttributeElement(e,t,i={}){const s=new nh(this.document,e,t);return typeof i.priority=="number"&&(s._priority=i.priority),i.id&&(s._id=i.id),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createContainerElement(e,t,i={},s={}){let r=null;Wr(i)?s=i:r=i;const o=new g0(this.document,e,t,r);return s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}createEditableElement(e,t,i={}){const s=new jx(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEmptyElement(e,t,i={}){const s=new b3(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createUIElement(e,t,i){const s=new Gx(this.document,e,t);return i&&(s.render=i),s}createRawElement(e,t,i,s={}){const r=new v3(this.document,e,t);return i&&(r.render=i),s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Wr(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof $t?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new _e("view-writer-break-non-container-element",this.document);if(!t.parent)throw new _e("view-writer-break-root",this.document);if(e.isAtStart)return $t._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert($t._createAfter(t),i);const s=new Rn(e,$t._createAt(t,"end")),r=new $t(i,0);this.move(s,r)}return $t._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const o=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new $t(o,a))}const s=i.getChild(t-1),r=i.getChild(t);if(!s||!r)return e;if(s.is("$text")&&r.is("$text"))return J8(s,r);if(s.is("attributeElement")&&r.is("attributeElement")&&s.isSimilar(r)){const o=s.childCount;return s._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new $t(s,o))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new _e("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),r=s instanceof Ki?$t._createAt(s,"end"):$t._createAt(t,"end");return this.move(Rn._createIn(i),$t._createAt(t,"end")),this.remove(Rn._createOn(i)),r}insert(e,t){t=xo(t)?[...t]:[t],dU(t,this.document);const i=t.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?o.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),o},[]);let s=null,r=e;for(const{nodes:o,breakAttributes:a}of i){const l=this._insertNodes(r,o,a);s||(s=l.start),r=l.end}return s?new Rn(s,r):new Rn(e)}remove(e){const t=e instanceof Rn?e:Rn._createOn(e);if(zm(t,this.document),t.isCollapsed)return new ih(this.document);const{start:i,end:s}=this._breakAttributesRange(t,!0),r=i.parent,o=s.offset-i.offset,a=r._removeChildren(i.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new ih(this.document,a)}clear(e,t){zm(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const r=s.item;let o;if(r.is("element")&&t.isSimilar(r))o=Rn._createOn(r);else if(!s.nextPosition.isAfter(e.start)&&r.is("$textProxy")){const a=r.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(o=Rn._createIn(a))}o&&(o.end.isAfter(e.end)&&(o.end=e.end),o.start.isBefore(e.start)&&(o.start=e.start),this.remove(o))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const s=t.parent,r=s.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=s.childCount-r}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof nh))throw new _e("view-writer-wrap-invalid-attribute",this.document);if(zm(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!GSe(i.parent)&&(i=i.getLastMatchingPosition(r=>r.item.is("uiElement"))),i=this._wrapPosition(i,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new Rn(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof nh))throw new _e("view-writer-unwrap-invalid-attribute",this.document);if(zm(e,this.document),e.isCollapsed)return e;const{start:i,end:s}=this._breakAttributesRange(e,!0),r=i.parent,o=this._unwrapChildren(r,i.offset,s.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new Rn(a,l)}rename(e,t){const i=new g0(this.document,e,t.getAttributes());return this.insert($t._createAfter(t),i),this.move(Rn._createIn(t),$t._createAt(i,0)),this.remove(Rn._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return $t._createAt(e,t)}createPositionAfter(e){return $t._createAfter(e)}createPositionBefore(e){return $t._createBefore(e)}createRange(e,t){return new Rn(e,t)}createRangeOn(e){return Rn._createOn(e)}createRangeIn(e){return Rn._createIn(e)}createSelection(...e){return new xc(...e)}createSlot(e="children"){if(!this._slotFactory)throw new _e("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let s;if(i?s=uC(e):s=e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new _e("view-writer-invalid-position-container",this.document);let r;i?r=this._breakAttributes(e,!0):r=e.parent.is("$text")?Ck(e):e;const o=s._insertChild(r.offset,t);for(const d of t)this._addToClonedElementsGroup(d);const a=r.getShiftedBy(o),l=this.mergeAttributes(r);l.isEqual(r)||a.offset--;const c=this.mergeAttributes(a);return new Rn(l,c)}_wrapChildren(e,t,i,s){let r=t;const o=[];for(;r<i;){const l=e.getChild(r),c=l.is("$text"),d=l.is("attributeElement");if(d&&this._wrapAttributeElement(s,l))o.push(new $t(e,r));else if(c||!d||WSe(s,l)){const u=s._clone();l._remove(),u._appendChild(l),e._insertChild(r,u),this._addToClonedElementsGroup(u),o.push(new $t(e,r))}else this._wrapChildren(l,0,l.childCount,s);r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Rn._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,s){let r=t;const o=[];for(;r<i;){const l=e.getChild(r);if(!l.is("attributeElement")){r++;continue}if(l.isSimilar(s)){const c=l.getChildren(),d=l.childCount;l._remove(),e._insertChild(r,c),this._removeFromClonedElementsGroup(l),o.push(new $t(e,r),new $t(e,r+d)),r+=d,i+=d-1;continue}if(this._unwrapAttributeElement(s,l)){o.push(new $t(e,r),new $t(e,r+1)),r++;continue}this._unwrapChildren(l,0,l.childCount,s),r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Rn._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:s}=this._breakAttributesRange(e,!0),r=i.parent,o=this._wrapChildren(r,i.offset,s.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new Rn(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return Z8(e.clone());e.parent.is("$text")&&(e=Ck(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const s=new Rn(e,e.getShiftedBy(1));this.wrap(s,t);const r=new $t(i.parent,i.index);i._remove();const o=r.nodeBefore,a=r.nodeAfter;return o instanceof Ki&&a instanceof Ki?J8(o,a):Z8(r)}_wrapAttributeElement(e,t){if(!e$(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(const i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(const i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!e$(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,s=e.end;if(zm(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new Rn(l,l)}const r=this._breakAttributes(s,t),o=r.parent.childCount,a=this._breakAttributes(i,t);return r.offset+=r.parent.childCount-o,new Rn(a,r)}_breakAttributes(e,t=!1){const i=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new _e("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new _e("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new _e("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&hC(s.parent)||hC(s))return e.clone();if(s.is("$text"))return this._breakAttributes(Ck(e),t);const r=s.childCount;if(i==r){const o=new $t(s.parent,s.index+1);return this._breakAttributes(o,t)}else if(i===0){const o=new $t(s.parent,s.index);return this._breakAttributes(o,t)}else{const o=s.index+1,a=s._clone();s.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=s.childCount-i,c=s._removeChildren(i,l);a._appendChild(c);const d=new $t(s.parent,o);return this._breakAttributes(d,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function GSe(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function uC(n){let e=n.parent;for(;!hC(e);){if(!e)return;e=e.parent}return e}function WSe(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function Z8(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new $t(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new $t(t,0):n}function Ck(n){if(n.offset==n.parent.data.length)return new $t(n.parent.parent,n.parent.index+1);if(n.offset===0)return new $t(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new Ki(n.root.document,e)),new $t(n.parent.parent,n.parent.index+1)}function J8(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new $t(n,t)}const qSe=[Ki,nh,g0,b3,v3,Gx];function dU(n,e){for(const t of n){if(!qSe.some(i=>t instanceof i))throw new _e("view-writer-insert-invalid-node-type",e);t.is("$text")||dU(t.getChildren(),e)}}function hC(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function zm(n,e){const t=uC(n.start),i=uC(n.end);if(!t||!i||t!==i)throw new _e("view-writer-invalid-range-container",e)}function e$(n,e){return n.id===null&&e.id===null}const uU=n=>n.createTextNode(" "),hU=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},fU=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},xa=7,b0="⁠".repeat(xa);function fo(n){return typeof n=="string"?n.substr(0,xa)===b0:ls(n)&&n.data.substr(0,xa)===b0}function $f(n){return n.data.length==xa&&fo(n)}function t$(n){const e=typeof n=="string"?n:n.data;return fo(n)?e.slice(xa):e}function KSe(n){n.document.on("arrowKey",YSe,{priority:"low"})}function YSe(n,e){if(e.keyCode==On.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;fo(i)&&s<=xa&&t.collapse(i,0)}}}let XSe=class extends gs(){constructor(t,i){super();$(this,"domDocuments",new Set);$(this,"domConverter");$(this,"markedAttributes",new Set);$(this,"markedChildren",new Set);$(this,"markedTexts",new Set);$(this,"selection");$(this,"_inlineFiller",null);$(this,"_fakeSelectionContainer",null);this.domConverter=t,this.selection=i,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),bn.isBlink&&!bn.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(t,i){if(t==="text")this.domConverter.mapViewToDom(i.parent)&&this.markedTexts.add(i);else{if(!this.domConverter.mapViewToDom(i))return;if(t==="attributes")this.markedAttributes.add(i);else if(t==="children")this.markedChildren.add(i);else throw new _e("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!bn.isAndroid)return;let t=null;const i=bn.isBlink&&!bn.isAndroid?!this.isSelecting:!0;for(const s of this.markedChildren)this._updateChildrenMappings(s);i?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=$t._createBefore(t.parent)));for(const s of this.markedAttributes)this._updateAttrs(s);for(const s of this.markedChildren)this._updateChildren(s,{inlineFillerPosition:t});for(const s of this.markedTexts)!this.markedChildren.has(s.parent)&&this.domConverter.mapViewToDom(s.parent)&&this._updateText(s,{inlineFillerPosition:t});if(i)if(t){const s=this.domConverter.viewPositionToDom(t),r=s.parent.ownerDocument;fo(s.parent)?this._inlineFiller=s.parent:this._inlineFiller=n$(r,s.parent,s.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){const i=this.domConverter.mapViewToDom(t);if(!i)return;const s=Array.from(i.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),o=this._diffNodeLists(s,r),a=this._findUpdateActions(o,s,r,ZSe);if(a.indexOf("update")!==-1){const l={equal:0,insert:0,delete:0};for(const c of a)if(c==="update"){const d=l.equal+l.insert,u=l.equal+l.delete,h=t.getChild(d);h&&!h.is("uiElement")&&!h.is("rawElement")&&this._updateElementMappings(h,s[u]),N8(r[d]),l.equal++}else l[c]++}}_updateElementMappings(t,i){this.domConverter.unbindDomElement(i),this.domConverter.bindElements(i,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?$t._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),i=this.domConverter.viewPositionToDom(t);return!!(i&&ls(i.parent)&&fo(i.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!fo(t))throw new _e("view-renderer-filler-was-lost",this);$f(t)?t.remove():t.data=t.data.substr(xa),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),i=t.parent,s=t.offset;if(!this.domConverter.mapViewToDom(i.root)||!i.is("element")||!QSe(i))return!1;const r=t.nodeBefore,o=t.nodeAfter;return!(r instanceof Ki||o instanceof Ki||s===i.getFillerOffset()&&(!r||!r.is("element","br"))||bn.isAndroid&&(r||o))}_updateText(t,i){const s=this.domConverter.findCorrespondingDomText(t);let o=this.domConverter.viewToDom(t).data;const a=i.inlineFillerPosition;a&&a.parent==t.parent&&a.offset==t.index&&(o=b0+o),this._updateTextNode(s,o)}_updateAttrs(t){const i=this.domConverter.mapViewToDom(t);if(i){for(const s of i.attributes){const r=s.name;t.hasAttribute(r)||this.domConverter.removeDomElementAttribute(i,r)}for(const s of t.getAttributeKeys())this.domConverter.setDomElementAttribute(i,s,t.getAttribute(s),t)}}_updateChildren(t,i){const s=this.domConverter.mapViewToDom(t);if(!s)return;if(bn.isAndroid){let h=null;for(const f of Array.from(s.childNodes)){if(h&&ls(h)&&ls(f)){s.normalize();break}h=f}}const r=i.inlineFillerPosition,o=s.childNodes,a=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));r&&r.parent===t&&n$(s.ownerDocument,a,r.offset);const l=this._diffNodeLists(o,a),c=this._findUpdateActions(l,o,a,JSe);let d=0;const u=new Set;for(const h of c)h==="delete"?(u.add(o[d]),N8(o[d])):(h==="equal"||h==="update")&&d++;d=0;for(const h of c)h==="insert"?(YV(s,d,a[d]),d++):h==="update"?(this._updateTextNode(o[d],a[d].data),d++):h==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(a[d])),d++);for(const h of u)h.parentNode||this.domConverter.unbindDomElement(h)}_diffNodeLists(t,i){return t=nAe(t,this._fakeSelectionContainer),Eg(t,i,eAe.bind(null,this.domConverter))}_findUpdateActions(t,i,s,r){if(t.indexOf("insert")===-1||t.indexOf("delete")===-1)return t;let o=[],a=[],l=[];const c={equal:0,insert:0,delete:0};for(const d of t)d==="insert"?l.push(s[c.equal+c.insert]):d==="delete"?a.push(i[c.equal+c.delete]):(o=o.concat(Eg(a,l,r).map(u=>u==="equal"?"update":u)),o.push("equal"),a=[],l=[]),c[d]++;return o.concat(Eg(a,l,r).map(d=>d==="equal"?"update":d))}_updateTextNode(t,i){const s=t.data;s!=i&&(bn.isAndroid&&this.isComposing&&s.replace(/\u00A0/g," ")==i.replace(/\u00A0/g," ")||this._updateTextNodeInternal(t,i))}_updateTextNodeInternal(t,i){const s=OV(t.data,i);for(const r of s)r.type==="insert"?t.insertData(r.index,r.values.join("")):t.deleteData(r.index,r.howMany)}_markDescendantTextToSync(t){if(t){if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const i of t.getChildren())this._markDescendantTextToSync(i)}}_updateSelection(){if(bn.isBlink&&!bn.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const t=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!t||(this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&bn.isAndroid||this._updateDomSelection(t))}_updateFakeSelection(t){const i=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=iAe(i));const s=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(s,this.selection),!this._fakeSelectionNeedsUpdate(t))return;(!s.parentElement||s.parentElement!=t)&&t.appendChild(s),s.textContent=this.selection.fakeSelectionLabel||" ";const r=i.getSelection(),o=i.createRange();r.removeAllRanges(),o.selectNodeContents(s),r.addRange(o)}_updateDomSelection(t){const i=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(i))return;const s=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);i.setBaseAndExtent(s.parent,s.offset,r.parent,r.offset),bn.isGecko&&tAe(r,i)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const i=t&&this.domConverter.domSelectionToView(t);return!(i&&this.selection.isEqual(i)||!this.selection.isCollapsed&&this.selection.isSimilar(i))}_fakeSelectionNeedsUpdate(t){const i=this._fakeSelectionContainer,s=t.ownerDocument.getSelection();return!i||i.parentElement!==t||s.anchorNode!==i&&!i.contains(s.anchorNode)?!0:i.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const t of this.domDocuments){const i=t.getSelection();if(i.rangeCount){const s=t.activeElement,r=this.domConverter.mapDomToView(s);s&&r&&i.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}};function QSe(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function n$(n,e,t){const i=e instanceof Array?e:e.childNodes,s=i[t];if(ls(s))return s.data=b0+s.data,s;{const r=n.createTextNode(b0);return Array.isArray(e)?i.splice(t,0,r):YV(e,t,r),r}}function ZSe(n,e){return Ud(n)&&Ud(e)&&!ls(n)&&!ls(e)&&!Sg(n)&&!Sg(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function JSe(n,e){return Ud(n)&&Ud(e)&&ls(n)&&ls(e)}function eAe(n,e,t){return e===t?!0:ls(e)&&ls(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function tAe(n,e){let t=n.parent,i=n.offset;if(ls(t)&&$f(t)&&(i=ig(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||i!=t.childNodes.length-1)return;const s=t.childNodes[i];s&&s.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function nAe(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function iAe(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}const sAe=fU(Ut.document),rAe=uU(Ut.document),oAe=hU(Ut.document),Q1="data-ck-unsafe-attribute-",i$="data-ck-unsafe-element";class pU{constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){$(this,"document");$(this,"renderingMode");$(this,"blockFillerMode");$(this,"preElements");$(this,"blockElements");$(this,"inlineObjectElements");$(this,"unsafeElements");$(this,"_domDocument");$(this,"_domToViewMapping",new WeakMap);$(this,"_viewToDomMapping",new WeakMap);$(this,"_fakeSelectionMapping",new WeakMap);$(this,"_rawContentElementMatcher",new mh);$(this,"_inlineObjectElementMatcher",new mh);$(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?Ut.document:Ut.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new xc(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of e.children)this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const i=new DOMParser().parseFromString(t,"text/html"),s=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);const o=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const u of c.getAttributeNames())this.setDomElementAttribute(c,u,c.getAttribute(u));const d=c.tagName.toLowerCase();this._shouldRenameElement(d)&&(r$(d),c.replaceWith(this._createReplacementDomElement(d,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{const i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let s;if(i.is("documentFragment"))s=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(s,i);else{if(i.is("uiElement"))return i.name==="$comment"?s=this._domDocument.createComment(i.getCustomProperty("$rawContent")):s=i.render(this._domDocument,this),t.bind&&this.bindElements(s,i),s;this._shouldRenameElement(i.name)?(r$(i.name),s=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?s=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):s=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(s,this),t.bind&&this.bindElements(s,i);for(const r of i.getAttributeKeys())this.setDomElementAttribute(s,r,i.getAttribute(r),i)}if(t.withChildren!==!1)for(const r of this.viewChildrenToDom(i,t))s instanceof HTMLTemplateElement?s.content.appendChild(r):s.appendChild(r);return s}}setDomElementAttribute(e,t,i,s){const r=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);if(r||is("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!XV(t)){is("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!r?e.removeAttribute(t):e.hasAttribute(Q1+t)&&r&&e.removeAttribute(Q1+t),e.setAttribute(r?t:Q1+t,i)}removeDomElementAttribute(e,t){t!=i$&&(e.removeAttribute(t),e.removeAttribute(Q1+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const r of e.getChildren()){i===s&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!zd(r.getAttributes());if(o&&this.renderingMode=="data")if(r.is("rawElement")){const a=this._domDocument.createElement(r.name);r.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(r,t);else o&&is("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,t);s++}i===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let s=e.offset;return fo(i)&&(s+=xa),{parent:i,offset:s}}else{let i,s,r;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;r=i.childNodes[0]}else{const a=e.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;i=s.parentNode,r=s.nextSibling}if(ls(r)&&fo(r))return{parent:r,offset:xa};const o=s?ig(s)+1:0;return{parent:i,offset:o}}}domToView(e,t={}){const i=[],s=this._domToView(e,t,i),r=s.next().value;return!r||(s.next(),this._processDomInlineNodes(null,i,t),r.is("$text")&&r.data.length==0)?null:r}*domChildrenToView(e,t={},i=[]){let s=[];e instanceof HTMLTemplateElement?s=[...e.content.childNodes]:s=[...e.childNodes];for(let r=0;r<s.length;r++){const o=s[r],a=this._domToView(o,t,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,i,t),yield l,a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(cAe(e))return new xc([]);if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;ls(s)&&(s=s.parentNode);const r=this.fakeSelectionToView(s);if(r)return r}const t=this.isDomSelectionBackward(e),i=[];for(let s=0;s<e.rangeCount;s++){const r=e.getRangeAt(s),o=this.domRangeToView(r);o&&i.push(o)}return new xc(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new Rn(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,ig(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return $t._createBefore(i);if(ls(e)){if($f(e))return this.domPositionToView(e.parentNode,ig(e));const s=this.findCorrespondingViewText(e);let r=t;return s?(fo(e)&&(r-=xa,r=r<0?0:r),new $t(s,r)):null}else{if(t===0){const s=this.mapDomToView(e);if(s)return new $t(s,0)}else{const s=e.childNodes[t-1];if(ls(s)&&$f(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,ig(s));const r=ls(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(r&&r.parent)return new $t(r.parent,r.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if($f(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const s=this.mapDomToView(i);if(s){const r=s.nextSibling;return r instanceof Ki?r:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const r=s.getChild(0);return r instanceof Ki?r:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:i,scrollY:s}=Ut.window,r=[];s$(t,o=>{const{scrollLeft:a,scrollTop:l}=o;r.push([a,l])}),t.focus(),s$(t,o=>{const[a,l]=r.shift();o.scrollLeft=a,o.scrollTop=l}),Ut.window.scrollTo(i,s)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(sAe):e.tagName==="BR"&&mU(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(oAe)||lAe(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch(s){return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=BCe(e);for(t.pop();t.length;){const i=t.pop(),s=this._domToViewMapping.get(i);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return uU(this._domDocument);case"markedNbsp":return hU(this._domDocument);case"br":return fU(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(ls(e)&&fo(e)&&t<xa||this.isElement(e)&&fo(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.isBlockFiller(e))return null;const s=this.getHostViewElement(e);if(s)return s;if(Sg(e)&&t.skipComments)return null;if(ls(e)){if($f(e))return null;{const r=e.data;if(r==="")return null;const o=new Ki(this.document,r);return i.push(o),o}}else{let r=this.mapDomToView(e);if(r)return this._isInlineObjectElement(r)&&i.push(r),r;if(this.isDocumentFragment(e))r=new ih(this.document),t.bind&&this.bindDocumentFragments(e,r);else{r=this._createViewElement(e,t),t.bind&&this.bindElements(e,r);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)r._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(r,t))return r._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(r)||i.push(r),r;if(Sg(e))return r._setCustomProperty("$rawContent",e.data),r}yield r;const o=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,o))r._appendChild(a);if(this._isInlineObjectElement(r))i.push(r),this._processDomInlineNodes(null,o,t);else for(const a of o)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let s=!1;for(let r=0;r<t.length;r++){const o=t[r];if(!o.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(o))a=t$(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=r>0?t[r-1]:null,d=r+1<t.length?t[r+1]:null,u=!c||c.is("element")&&c.name=="br"||s,h=d?!1:!fo(o.data);i.withChildren!==!1&&(u&&(a=a.replace(/^ /,"")),h&&(a=a.replace(/ $/,""))),a=t$(a),a=a.replace(/ \u00A0/g,"  ");const f=d&&d.is("element")&&d.name!="br",m=d&&d.is("$text")&&d.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!d||f||m)&&(a=a.replace(/\u00A0$/," ")),(u||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),t.splice(r,1),r--):(o._data=a,s=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t=" "+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),s=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||s)&&(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(aAe(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const i=new Uu({startPosition:t?$t._createAfter(e):$t._createBefore(e),direction:t?"forward":"backward"});for(const{item:s}of i){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(Sg(e))return new Gx(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Da(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(i$,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const s of t.getAttributeNames())i.setAttribute(s,t.getAttribute(s))}return i}}function aAe(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function s$(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function lAe(n,e){return n.isEqualNode(rAe)&&mU(n,e)&&n.parentNode.childNodes.length===1}function mU(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function r$(n){n==="script"&&is("domconverter-unsafe-script-element-detected"),n==="style"&&is("domconverter-unsafe-style-element-detected")}function cAe(n){if(!bn.isGecko||!n.rangeCount)return!1;const e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch(t){return!0}return!1}class Uc extends za(){constructor(t){super();$(this,"view");$(this,"document");$(this,"_isEnabled",!1);this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&t.nodeType===3&&(t=t.parentNode),!t||t.nodeType!==1?!1:t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class Rp{constructor(e,t,i){$(this,"view");$(this,"document");$(this,"domEvent");$(this,"domTarget");this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,KB(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class am extends Uc{constructor(){super(...arguments);$(this,"useCapture",!1);$(this,"usePassive",!1)}observe(t){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(s=>{this.listenTo(t,s,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,i,s){this.isEnabled&&this.document.fire(t,new Rp(this.view,i,s))}}class dAe extends am{constructor(){super(...arguments);$(this,"domEventType",["keydown","keyup"])}onDomEvent(t){const i={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return Pp(this)}};this.fire(t.type,t,i)}}class uAe extends Uc{constructor(t){super(t);$(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=Sc(i=>{this.document.fire("selectionChangeDone",i)},200)}observe(){const t=this.document;t.on("arrowKey",(i,s)=>{t.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),t.on("arrowKey",(i,s)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const i=this.document.selection,s=new xc(i.getRanges(),{backward:i.isBackward,fake:!1});(t==On.arrowleft||t==On.arrowup)&&s.setTo(s.getFirstPosition()),(t==On.arrowright||t==On.arrowdown)&&s.setTo(s.getLastPosition());const r={oldSelection:i,newSelection:s,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}let gU=class extends Uc{constructor(t){super(t);$(this,"domConverter");$(this,"_config");$(this,"_domElements");$(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}stopObserving(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();for(const i of this._domElements)this._mutationObserver.observe(i,this._config)}}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(t.length===0)return;const i=this.domConverter,s=new Set,r=new Set;for(const a of t){const l=i.mapDomToView(a.target);l&&(l.is("uiElement")||l.is("rawElement")||a.type==="childList"&&!this._isBogusBrMutation(a)&&r.add(l))}for(const a of t){const l=i.mapDomToView(a.target);if(!(l&&(l.is("uiElement")||l.is("rawElement")))&&a.type==="characterData"){const c=i.findCorrespondingViewText(a.target);c&&!r.has(c.parent)?s.add(c):!c&&fo(a.target)&&r.add(i.mapDomToView(a.target.parentNode))}}const o=[];for(const a of s)o.push({type:"text",node:a});for(const a of r){const l=i.mapViewToDom(a),c=Array.from(a.getChildren()),d=Array.from(i.domChildrenToView(l,{withChildren:!1}));QTe(c,d,hAe)||o.push({type:"children",node:a})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(t){let i=null;return t.nextSibling===null&&t.removedNodes.length===0&&t.addedNodes.length==1&&(i=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),i&&i.is("element","br")}};function hAe(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}class sw extends am{constructor(t){super(t);$(this,"_renderTimeoutId",null);$(this,"_isFocusChanging",!1);$(this,"domEventType",["focus","blur"]);this.useCapture=!0;const i=this.document;i.on("focus",()=>this._handleFocus()),i.on("blur",(s,r)=>this._handleBlur(r)),i.on("beforeinput",()=>{i.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const i=this.document.selection.editableElement;(i===null||i===t.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class fAe extends Uc{constructor(t){super(t);$(this,"mutationObserver");$(this,"focusObserver");$(this,"selection");$(this,"domConverter");$(this,"_documents");$(this,"_fireSelectionChangeDoneDebounced");$(this,"_clearInfiniteLoopInterval");$(this,"_documentIsSelectingInactivityTimeoutDebounced");$(this,"_loopbackCounter");this.mutationObserver=t.getObserver(gU),this.focusObserver=t.getObserver(sw),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Sc(i=>{this.document.fire("selectionChangeDone",i)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Sc(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(t){const i=t.ownerDocument,s=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(i),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",s,{priority:"highest"}),this.listenTo(t,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(i)&&(this.listenTo(i,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(i,"selectionchange",()=>{this.document.isComposing&&!bn.isAndroid||(this._handleSelectionChange(i),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(i)},{priority:"lowest"}),this._documents.add(i))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(i);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(i))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(s))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:s,domSelection:i};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class pAe extends am{constructor(t){super(t);$(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const i=this.document;i.on("compositionstart",()=>{i.isComposing=!0},{priority:"low"}),i.on("compositionend",()=>{i.isComposing=!1},{priority:"low"})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bU{constructor(e,t={}){$(this,"_files");$(this,"_native");this._files=t.cacheFiles?o$(e):null,this._native=e}get files(){return this._files||(this._files=o$(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function o$(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class mAe extends am{constructor(){super(...arguments);$(this,"domEventType","beforeinput")}onDomEvent(t){const i=t.getTargetRanges(),s=this.view,r=s.document;let o=null,a=null,l=[];if(t.dataTransfer&&(o=new bU(t.dataTransfer)),t.data!==null?a=t.data:o&&(a=o.getData("text/plain")),r.selection.isFake)l=Array.from(r.selection.getRanges());else if(i.length)l=i.map(c=>{const d=s.domConverter.domPositionToView(c.startContainer,c.startOffset),u=s.domConverter.domPositionToView(c.endContainer,c.endOffset);if(d)return s.createRange(d,u);if(u)return s.createRange(u)}).filter(c=>!!c);else if(bn.isAndroid){const c=t.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(c).getRanges())}if(bn.isAndroid&&t.inputType=="insertCompositionText"&&a&&a.endsWith("\n")){this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});return}if(t.inputType=="insertText"&&a&&a.includes("\n")){const c=a.split(/\n{1,2}/g);let d=l;for(let u=0;u<c.length;u++){const h=c[u];h!=""&&(this.fire(t.type,t,{data:h,dataTransfer:o,targetRanges:d,inputType:t.inputType,isComposing:t.isComposing}),d=[r.selection.getFirstRange()]),u+1<c.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:d}),d=[r.selection.getFirstRange()])}return}this.fire(t.type,t,{data:a,dataTransfer:o,targetRanges:l,inputType:t.inputType,isComposing:t.isComposing})}}class gAe extends Uc{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&ZCe(i.keyCode)){const s=new om(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,i),s.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class bAe extends Uc{constructor(e){super(e);const t=this.document;t.on("keydown",(i,s)=>{if(!this.isEnabled||s.keyCode!=On.tab||s.ctrlKey)return;const r=new om(t,"tab",t.selection.getFirstRange());t.fire(r,s),r.stop.called&&i.stop()})}observe(){}stopObserving(){}}let vAe=class extends gs(){constructor(t){super();$(this,"document");$(this,"domConverter");$(this,"domRoots",new Map);$(this,"_renderer");$(this,"_initialDomRootAttributes",new WeakMap);$(this,"_observers",new Map);$(this,"_writer");$(this,"_ongoingChange",!1);$(this,"_postFixersInProgress",!1);$(this,"_renderingDisabled",!1);$(this,"_hasChangedSinceTheLastRendering",!1);this.document=new lU(t),this.domConverter=new pU(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new XSe(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new cU(this.document),this.addObserver(gU),this.addObserver(sw),this.addObserver(fAe),this.addObserver(dAe),this.addObserver(uAe),this.addObserver(pAe),this.addObserver(gAe),this.addObserver(mAe),this.addObserver(bAe),KSe(this),VSe(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),bn.isiOS&&this.listenTo(this.document,"blur",(i,s)=>{this.domConverter.mapDomToView(s.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(i,{mutations:s})=>{s.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(t,i="main"){const s=this.document.getRoot(i);s._name=t.tagName.toLowerCase();const r={};for(const{name:a,value:l}of Array.from(t.attributes))r[a]=l,a==="class"?this._writer.addClass(l.split(" "),s):s.hasAttribute(a)||this._writer.setAttribute(a,l,s);this._initialDomRootAttributes.set(t,r);const o=()=>{this._writer.setAttribute("contenteditable",(!s.isReadOnly).toString(),s),s.isReadOnly?this._writer.addClass("ck-read-only",s):this._writer.removeClass("ck-read-only",s)};o(),this.domRoots.set(i,t),this.domConverter.bindElements(t,s),this._renderer.markToSync("children",s),this._renderer.markToSync("attributes",s),this._renderer.domDocuments.add(t.ownerDocument),s.on("change:children",(a,l)=>this._renderer.markToSync("children",l)),s.on("change:attributes",(a,l)=>this._renderer.markToSync("attributes",l)),s.on("change:text",(a,l)=>this._renderer.markToSync("text",l)),s.on("change:isReadOnly",()=>this.change(o)),s.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(t,i)}detachDomRoot(t){const i=this.domRoots.get(t);Array.from(i.attributes).forEach(({name:r})=>i.removeAttribute(r));const s=this._initialDomRootAttributes.get(i);for(const r in s)i.setAttribute(r,s[r]);this.domRoots.delete(t),this.domConverter.unbindDomElement(i);for(const r of this._observers.values())r.stopObserving(i)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let i=this._observers.get(t);if(i)return i;i=new t(this),this._observers.set(t,i);for(const[s,r]of this.domRoots)i.observe(r,s);return i.enable(),i}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection({alignToTop:t,forceScroll:i,viewportOffset:s=20,ancestorOffset:r=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const a=ta({alignToTop:t,forceScroll:i,viewportOffset:s,ancestorOffset:r});typeof s=="number"&&(s={top:s,bottom:s,left:s,right:s});const l={target:this.domConverter.viewRangeToDom(o),viewportOffset:s,ancestorOffset:r,alignToTop:t,forceScroll:i};this.fire("scrollToTheSelection",l,a),GCe(l)}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new _e("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const i=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),i}catch(i){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(i,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(sw).flush(),this.change(()=>{})}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,i){return $t._createAt(t,i)}createPositionAfter(t){return $t._createAfter(t)}createPositionBefore(t){return $t._createBefore(t)}createRange(t,i){return new Rn(t,i)}createRangeOn(t){return Rn._createOn(t)}createRangeIn(t){return Rn._createIn(t)}createSelection(...t){return new xc(...t)}_disableRendering(t){this._renderingDisabled=t,t==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eu{is(){throw new Error("is() method is abstract")}}let Lh=class extends eu{constructor(t){super();$(this,"parent",null);$(this,"_attrs");$(this,"_index",null);$(this,"_startOffset",null);this._attrs=Hd(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const t=[];let i=this;for(;i.parent;)t.unshift(i.startOffset),i=i.parent;return t}getAncestors(t={}){const i=[];let s=t.includeSelf?this:this.parent;for(;s;)i[t.parentFirst?"push":"unshift"](s),s=s.parent;return i}getCommonAncestor(t,i={}){const s=this.getAncestors(i),r=t.getAncestors(i);let o=0;for(;s[o]==r[o]&&s[o];)o++;return o===0?null:s[o-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const i=this.getPath(),s=t.getPath(),r=Tr(i,s);switch(r){case"prefix":return!0;case"extension":return!1;default:return i[r]<s[r]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((i,s)=>(i[s[0]]=s[1],i),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,i){this._attrs.set(t,i)}_setAttributesTo(t){this._attrs=Hd(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}};Lh.prototype.is=function(n){return n==="node"||n==="model:node"};let Ag=class{constructor(e){$(this,"_nodes",[]);$(this,"_offsetToNode",[]);e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new _e("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[e];if(!t)throw new _e("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){for(const o of t)if(!(o instanceof Lh))throw new _e("model-nodelist-insertnodes-not-node",this);const i=Array.from(t),s=yAe(i);let r=this.indexToOffset(e);this._nodes=G8(this._nodes,i,e,0),this._offsetToNode=G8(this._offsetToNode,s,r,0);for(let o=e;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=r,r+=this._nodes[o].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let i=this.indexToOffset(e);const s=this._nodes.splice(e,t),r=s[s.length-1],o=r.startOffset+r.offsetSize-i;this._offsetToNode.splice(i,o);for(const a of s)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return s}toJSON(){return this._nodes.map(e=>e.toJSON())}};function yAe(n){const e=[];for(const t of n){const i=e.length;e.length+=t.offsetSize,e.fill(t,i)}return e}let Wi=class fC extends Lh{constructor(t,i){super(i);$(this,"_data");this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new fC(this.data,this.getAttributes())}static fromJSON(t){return new fC(t.data,t.attributes)}};Wi.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};class _a extends eu{constructor(t,i,s){super();$(this,"textNode");$(this,"data");$(this,"offsetInText");if(this.textNode=t,i<0||i>t.offsetSize)throw new _e("model-textproxy-wrong-offsetintext",this);if(s<0||i+s>t.offsetSize)throw new _e("model-textproxy-wrong-length",this);this.data=t.data.substring(i,i+s),this.offsetInText=i}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const i=[];let s=t.includeSelf?this:this.parent;for(;s;)i[t.parentFirst?"push":"unshift"](s),s=s.parent;return i}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}_a.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};let es=class Hv extends Lh{constructor(t,i,s){super(i);$(this,"name");$(this,"_children",new Ag);this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let i=this;for(const s of t)i=i.getChildAtOffset(s);return i}findAncestor(t,i={}){let s=i.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const i of this._children)t.children.push(i.toJSON())}return t}_clone(t=!1){const i=t?Array.from(this._children).map(s=>s._clone(!0)):void 0;return new Hv(this.name,this.getAttributes(),i)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,i){const s=wAe(i);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,i=1){const s=this._children._removeNodes(t,i);for(const r of s)r.parent=null;return s}static fromJSON(t){let i;if(t.children){i=[];for(const s of t.children)s.name?i.push(Hv.fromJSON(s)):i.push(Wi.fromJSON(s))}return new Hv(t.name,t.attributes,i)}};es.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function wAe(n){return typeof n=="string"?[new Wi(n)]:(xo(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Wi(e):e instanceof _a?new Wi(e.data,e.getAttributes()):e))}class mc{constructor(e){$(this,"direction");$(this,"boundaries");$(this,"singleCharacters");$(this,"shallow");$(this,"ignoreElementEnd");$(this,"_position");$(this,"_boundaryStartParent");$(this,"_boundaryEndParent");$(this,"_visitedParent");if(!e||!e.boundaries&&!e.startPosition)throw new _e("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new _e("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=dt._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,s,r;do s=this.position,r=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=s,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Ig(t,i),r=s||vU(t,i,s);if(r instanceof es){if(!this.shallow)t.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Cu("elementStart",r,e,t,1)}if(r instanceof Wi){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-t.offset}const a=t.offset-r.startOffset,l=new _a(r,a,o);return t.offset+=o,this._position=t,Cu("text",l,e,t,o)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Cu("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,r=Ig(t,s),o=r||yU(t,s,r);if(o instanceof es)return t.offset--,this.shallow?(this._position=t,Cu("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this._position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():Cu("elementEnd",o,e,t));if(o instanceof Wi){let a;if(this.singleCharacters)a=1;else{let d=o.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),a=t.offset-d}const l=t.offset-o.startOffset,c=new _a(o,l-a,a);return t.offset-=a,this._position=t,Cu("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,Cu("elementStart",i,e,t,1)}}function Cu(n,e,t,i,s){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:s}}}class dt extends eu{constructor(t,i,s="toNone"){super();$(this,"root");$(this,"path");$(this,"stickiness");if(!t.is("element")&&!t.is("documentFragment"))throw new _e("model-position-root-invalid",t);if(!(i instanceof Array)||i.length===0)throw new _e("model-position-path-incorrect-format",t,{path:i});t.is("rootElement")?i=i.slice():(i=[...t.getPath(),...i],t=t.root),this.root=t,this.path=i,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let i=0;i<this.path.length-1;i++)if(t=t.getChildAtOffset(this.path[i]),!t)throw new _e("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new _e("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ig(this,this.parent)}get nodeAfter(){const t=this.parent;return vU(this,t,Ig(this,t))}get nodeBefore(){const t=this.parent;return yU(this,t,Ig(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let i=0;i<this.path.length-1;i++)if(t=t.getChildAtOffset(this.path[i]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const i=Tr(this.path,t.path);switch(i){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[i]<t.path[i]?"before":"after"}}getLastMatchingPosition(t,i={}){i.startPosition=this;const s=new mc(i);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const i=this.parent;return i.is("element")?i.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const i=Tr(this.path,t.path),s=typeof i=="string"?Math.min(this.path.length,t.path.length):i;return this.path.slice(0,s)}getCommonAncestor(t){const i=this.getAncestors(),s=t.getAncestors();let r=0;for(;i[r]==s[r]&&i[r];)r++;return r===0?null:i[r-1]}getShiftedBy(t){const i=this.clone(),s=i.offset+t;return i.offset=s<0?0:s,i}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const i=Math.min(this.path.length,t.path.length);for(let s=0;s<i;s++){const r=this.path[s]-t.path[s];if(r<-1||r>1)return!1;if(r===1)return a$(t,this,s);if(r===-1)return a$(this,t,s)}return this.path.length===t.path.length?!0:this.path.length>t.path.length?pC(this.path,i):pC(t.path,i)}hasSameParentAs(t){if(this.root!==t.root)return!1;const i=this.getParentPath(),s=t.getParentPath();return Tr(i,s)=="same"}getTransformedByOperation(t){let i;switch(t.type){case"insert":i=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":i=this._getTransformedByMoveOperation(t);break;case"split":i=this._getTransformedBySplitOperation(t);break;case"merge":i=this._getTransformedByMergeOperation(t);break;default:i=dt._createAt(this);break}return i}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const i=t.movedRange;return i.containsPosition(this)||i.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const i=t.movedRange,s=i.containsPosition(this)||i.start.isEqual(this);let r;return s?(r=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(r=r._getTransformedByDeletion(t.deletionPosition,1))):this.isEqual(t.deletionPosition)?r=dt._createAt(t.deletionPosition):r=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),r}_getTransformedByDeletion(t,i){const s=dt._createAt(this);if(this.root!=t.root)return s;if(Tr(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+i>this.offset)return null;s.offset-=i}}else if(Tr(t.getParentPath(),this.getParentPath())=="prefix"){const r=t.path.length-1;if(t.offset<=this.path[r]){if(t.offset+i>this.path[r])return null;s.path[r]-=i}}return s}_getTransformedByInsertion(t,i){const s=dt._createAt(this);if(this.root!=t.root)return s;if(Tr(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=i);else if(Tr(t.getParentPath(),this.getParentPath())=="prefix"){const r=t.path.length-1;t.offset<=this.path[r]&&(s.path[r]+=i)}return s}_getTransformedByMove(t,i,s){if(i=i._getTransformedByDeletion(t,s),t.isEqual(i))return dt._createAt(this);const r=this._getTransformedByDeletion(t,s);return r===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,i):r._getTransformedByInsertion(i,s)}_getCombined(t,i){const s=t.path.length-1,r=dt._createAt(i);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[s]-t.offset,r.path=[...r.path,...this.path.slice(s+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,i,s="toNone"){if(t instanceof dt)return new dt(t.root,t.path,t.stickiness);{const r=t;if(i=="end")i=r.maxOffset;else{if(i=="before")return this._createBefore(r,s);if(i=="after")return this._createAfter(r,s);if(i!==0&&!i)throw new _e("model-createpositionat-offset-required",[this,t])}if(!r.is("element")&&!r.is("documentFragment"))throw new _e("model-position-parent-incorrect",[this,t]);const o=r.getPath();return o.push(i),new this(r.root,o,s)}}static _createAfter(t,i){if(!t.parent)throw new _e("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,i)}static _createBefore(t,i){if(!t.parent)throw new _e("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,i)}static fromJSON(t,i){if(t.root==="$graveyard"){const s=new dt(i.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!i.getRoot(t.root))throw new _e("model-position-fromjson-no-root",i,{rootName:t.root});return new dt(i.getRoot(t.root),t.path,t.stickiness)}}dt.prototype.is=function(n){return n==="position"||n==="model:position"};function Ig(n,e){const t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function vU(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function yU(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function a$(n,e,t){return!(t+1===n.path.length||!pC(e.path,t+1)||!xAe(n,t+1))}function pC(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function xAe(n,e){let t=n.parent,i=n.path.length-1,s=0;for(;i>=e;){if(n.path[i]+s!==t.maxOffset)return!1;s=1,i--,t=t.parent}return!0}class We extends eu{constructor(t,i){super();$(this,"start");$(this,"end");this.start=dt._createAt(t),this.end=i?dt._createAt(i):dt._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new mc({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),i=this.end.getParentPath();return Tr(t,i)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,i=!1){t.isCollapsed&&(i=!1);const s=this.containsPosition(t.start)||i&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||i&&this.end.isEqual(t.end);return s&&r}containsItem(t){const i=dt._createBefore(t);return this.containsPosition(i)||this.start.isEqual(i)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const i=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&i.push(new We(this.start,t.start)),this.containsPosition(t.end)&&i.push(new We(t.end,this.end))):i.push(new We(this.start,this.end)),i}getIntersection(t){if(this.isIntersecting(t)){let i=this.start,s=this.end;return this.containsPosition(t.start)&&(i=t.start),this.containsPosition(t.end)&&(s=t.end),new We(i,s)}return null}getJoined(t,i=!1){let s=this.isIntersecting(t);if(s||(this.start.isBefore(t.start)?s=i?this.end.isTouching(t.start):this.end.isEqual(t.start):s=i?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let r=this.start,o=this.end;return t.start.isBefore(r)&&(r=t.start),t.end.isAfter(o)&&(o=t.end),new We(r,o)}getMinimalFlatRanges(){const t=[],i=this.start.getCommonPath(this.end).length,s=dt._createAt(this.start);let r=s.parent;for(;s.path.length>i+1;){const o=r.maxOffset-s.offset;o!==0&&t.push(new We(s,s.getShiftedBy(o))),s.path=s.path.slice(0,-1),s.offset++,r=r.parent}for(;s.path.length<=this.end.path.length;){const o=this.end.path[s.path.length-1],a=o-s.offset;a!==0&&t.push(new We(s,s.getShiftedBy(a))),s.offset=o,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new mc(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const i=new mc(t);for(const s of i)yield s.item}*getPositions(t={}){t.boundaries=this;const i=new mc(t);yield i.position;for(const s of i)yield s.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new We(this.start,this.end)]}getTransformedByOperations(t){const i=[new We(this.start,this.end)];for(const s of t)for(let r=0;r<i.length;r++){const o=i[r].getTransformedByOperation(s);i.splice(r,1,...o),r+=o.length-1}for(let s=0;s<i.length;s++){const r=i[s];for(let o=s+1;o<i.length;o++){const a=i[o];(r.containsRange(a)||a.containsRange(r)||r.isEqual(a))&&i.splice(o,1)}}return i}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,i=this.end.nodeBefore;return t&&t.is("element")&&t===i?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,i=!1){return this._getTransformedByInsertion(t.position,t.howMany,i)}_getTransformedByMoveOperation(t,i=!1){const s=t.sourcePosition,r=t.howMany,o=t.targetPosition;return this._getTransformedByMove(s,o,r,i)}_getTransformedBySplitOperation(t){const i=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),i.root!=s.root&&(s=this.end.getShiftedBy(-1)),new We(i,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new We(this.start);let i=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return i.root!=s.root&&(s=this.end.getShiftedBy(-1)),i.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(i=dt._createAt(s),i.offset=0):(t.deletionPosition.isEqual(i)||(s=t.deletionPosition),i=t.targetPosition),new We(i,s)):new We(i,s)}_getTransformedByInsertion(t,i,s=!1){if(s&&this.containsPosition(t))return[new We(this.start,t),new We(t.getShiftedBy(i),this.end._getTransformedByInsertion(t,i))];{const r=new We(this.start,this.end);return r.start=r.start._getTransformedByInsertion(t,i),r.end=r.end._getTransformedByInsertion(t,i),[r]}}_getTransformedByMove(t,i,s,r=!1){if(this.isCollapsed){const h=this.start._getTransformedByMove(t,i,s);return[new We(h)]}const o=We._createFromPositionAndShift(t,s),a=i._getTransformedByDeletion(t,s);if(this.containsPosition(i)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const h=this.start._getTransformedByMove(t,i,s),f=this.end._getTransformedByMove(t,i,s);return[new We(h,f)]}let l;const c=this.getDifference(o);let d=null;const u=this.getIntersection(o);if(c.length==1?d=new We(c[0].start._getTransformedByDeletion(t,s),c[0].end._getTransformedByDeletion(t,s)):c.length==2&&(d=new We(this.start,this.end._getTransformedByDeletion(t,s))),d?l=d._getTransformedByInsertion(a,s,u!==null||r):l=[],u){const h=new We(u.start._getCombined(o.start,a),u.end._getCombined(o.start,a));l.length==2?l.splice(1,0,h):l.push(h)}return l}_getTransformedByDeletion(t,i){let s=this.start._getTransformedByDeletion(t,i),r=this.end._getTransformedByDeletion(t,i);return s==null&&r==null?null:(s==null&&(s=t),r==null&&(r=t),new We(s,r))}static _createFromPositionAndShift(t,i){const s=t,r=t.getShiftedBy(i);return i>0?new this(s,r):new this(r,s)}static _createIn(t){return new this(dt._createAt(t,0),dt._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(dt._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new _e("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const i=t[0];t.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const s=t.indexOf(i),r=new this(i.start,i.end);for(let o=s-1;o>=0&&t[o].end.isEqual(r.start);o--)r.start=dt._createAt(t[o].start);for(let o=s+1;o<t.length&&t[o].start.isEqual(r.end);o++)r.end=dt._createAt(t[o].end);return r}static fromJSON(t,i){return new this(dt.fromJSON(t.start,i),dt.fromJSON(t.end,i))}}We.prototype.is=function(n){return n==="range"||n==="model:range"};class wU extends Ri(){constructor(){super();$(this,"_modelToViewMapping",new WeakMap);$(this,"_viewToModelMapping",new WeakMap);$(this,"_viewToModelLengthCallbacks",new Map);$(this,"_markerNameToElements",new Map);$(this,"_elementToMarkerNames",new Map);$(this,"_deferredBindingRemovals",new Map);$(this,"_unboundMarkerNames",new Set);this.on("modelToViewPosition",(t,i)=>{if(i.viewPosition)return;const s=this._modelToViewMapping.get(i.modelPosition.parent);if(!s)throw new _e("mapping-model-position-view-parent-not-found",this,{modelPosition:i.modelPosition});i.viewPosition=this.findPositionIn(s,i.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,i)=>{if(i.modelPosition)return;const s=this.findMappedViewAncestor(i.viewPosition),r=this._viewToModelMapping.get(s),o=this._toModelOffset(i.viewPosition.parent,i.viewPosition.offset,s);i.modelPosition=dt._createAt(r,o)},{priority:"low"})}bindElements(t,i){this._modelToViewMapping.set(t,i),this._viewToModelMapping.set(i,t)}unbindViewElement(t,i={}){const s=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const r of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(r);i.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t),this._modelToViewMapping.get(s)==t&&this._modelToViewMapping.delete(s))}unbindModelElement(t){const i=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(i)==t&&this._viewToModelMapping.delete(i)}bindElementToMarker(t,i){const s=this._markerNameToElements.get(i)||new Set;s.add(t);const r=this._elementToMarkerNames.get(t)||new Set;r.add(i),this._markerNameToElements.set(i,s),this._elementToMarkerNames.set(t,r)}unbindElementFromMarkerName(t,i){const s=this._markerNameToElements.get(i);s&&(s.delete(t),s.size==0&&this._markerNameToElements.delete(i));const r=this._elementToMarkerNames.get(t);r&&(r.delete(i),r.size==0&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,i]of this._deferredBindingRemovals)t.root==i&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new We(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Rn(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const i={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",i),i.modelPosition}toViewPosition(t,i={}){const s={modelPosition:t,mapper:this,isPhantom:i.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(t){const i=this._markerNameToElements.get(t);if(!i)return null;const s=new Set;for(const r of i)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())s.add(o);else s.add(r);return s}registerViewToModelLength(t,i){this._viewToModelLengthCallbacks.set(t,i)}findMappedViewAncestor(t){let i=t.parent;for(;!this._viewToModelMapping.has(i);)i=i.parent;return i}_toModelOffset(t,i,s){if(s!=t){const o=this._toModelOffset(t.parent,t.index,s),a=this._toModelOffset(t,i,t);return o+a}if(t.is("$text"))return i;let r=0;for(let o=0;o<i;o++)r+=this.getModelLength(t.getChild(o));return r}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let i=0;for(const s of t.getChildren())i+=this.getModelLength(s);return i}}findPositionIn(t,i){let s,r=0,o=0,a=0;if(t.is("$text"))return new $t(t,i);for(;o<i;)s=t.getChild(a),r=this.getModelLength(s),o+=r,a++;return o==i?this._moveViewPositionToTextNode(new $t(t,a)):this.findPositionIn(s,i-(o-r))}_moveViewPositionToTextNode(t){const i=t.nodeBefore,s=t.nodeAfter;return i instanceof Ki?new $t(i,i.data.length):s instanceof Ki?new $t(s,0):t}}class _Ae{constructor(){$(this,"_consumable",new Map);$(this,"_textProxyRegistry",new Map)}add(e,t){t=Z1(t),e instanceof _a&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Z1(t),e instanceof _a&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Z1(t),e instanceof _a&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const s=i.get(t);return s===void 0?null:s}revert(e,t){t=Z1(t),e instanceof _a&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[i,s]of this._consumable)for(const[r,o]of s){const a=r.split(":")[0];o&&e==a&&t.push({event:r,item:i.name||i.description})}if(t.length)throw new _e("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const s=i.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,s=e.parent,r=Symbol("$textProxy:"+e.data);let o,a;return o=this._textProxyRegistry.get(t),o||(o=new Map,this._textProxyRegistry.set(t,o)),a=o.get(i),a||(a=new Map,o.set(i,a)),a.set(s,r),r}}function Z1(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class xU extends Ri(){constructor(t){super();$(this,"_conversionApi");$(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,i,s){const r=this._createConversionApi(s,t.getRefreshedItems());for(const a of t.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,r);const o=this._reduceChanges(t.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(We._createFromPositionAndShift(a.position,a.length),r):a.type==="reinsert"?this._convertReinsert(We._createFromPositionAndShift(a.position,a.length),r):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,r):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const a of r.mapper.flushUnboundMarkerNames()){const l=i.get(a).getRange();this._convertMarkerRemove(a,l,r),this._convertMarkerAdd(a,l,r)}for(const a of t.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,r);r.consumable.verifyAllConsumed("insert")}convert(t,i,s,r={}){const o=this._createConversionApi(s,void 0,r);this._convertInsert(t,o);for(const[a,l]of i)this._convertMarkerAdd(a,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(t,i,s){const r=this._createConversionApi(s);this.fire("cleanSelection",{selection:t},r);const o=t.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const a=Array.from(i.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,t,a),this.fire("selection",{selection:t},r),!!t.isCollapsed){for(const l of a)if(r.consumable.test(t,"addMarker:"+l.name)){const c=l.getRange();if(!kAe(t.getFirstPosition(),l,r.mapper))continue;const d={item:t,markerName:l.name,markerRange:c};this.fire("addMarker:".concat(l.name),d,r)}for(const l of t.getAttributeKeys())if(r.consumable.test(t,"attribute:"+l)){const c={item:t,range:t.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:t.getAttribute(l)};this.fire("attribute:".concat(l,":$text"),c,r)}}}_convertInsert(t,i,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(i.consumable,t);for(const r of Array.from(t.getWalker({shallow:!0})).map(l$))this._testAndFire("insert",r,i)}_convertRemove(t,i,s,r){this.fire("remove:".concat(s),{position:t,length:i},r)}_convertAttribute(t,i,s,r,o){this._addConsumablesForRange(o.consumable,t,"attribute:".concat(i));for(const a of t){const l={item:a.item,range:We._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:i,attributeOldValue:s,attributeNewValue:r};this._testAndFire("attribute:".concat(i),l,o)}}_convertReinsert(t,i){const s=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(i.consumable,s);for(const r of s.map(l$))this._testAndFire("insert",{...r,reconversion:!0},i)}_convertMarkerAdd(t,i,s){if(i.root.rootName=="$graveyard")return;const r="addMarker:".concat(t);if(s.consumable.add(i,r),this.fire(r,{markerName:t,markerRange:i},s),!!s.consumable.consume(i,r)){this._addConsumablesForRange(s.consumable,i,r);for(const o of i.getItems()){if(!s.consumable.test(o,r))continue;const a={item:o,range:We._createOn(o),markerName:t,markerRange:i};this.fire(r,a,s)}}}_convertMarkerRemove(t,i,s){i.root.rootName!="$graveyard"&&this.fire("removeMarker:".concat(t),{markerName:t,markerRange:i},s)}_reduceChanges(t){const i={changes:t};return this.fire("reduceChanges",i),i.changes}_addConsumablesForInsert(t,i){for(const s of i){const r=s.item;if(t.test(r,"insert")===null){t.add(r,"insert");for(const o of r.getAttributeKeys())t.add(r,"attribute:"+o)}}return t}_addConsumablesForRange(t,i,s){for(const r of i.getItems())t.add(r,s);return t}_addConsumablesForSelection(t,i,s){t.add(i,"selection");for(const r of s)t.add(i,"addMarker:"+r.name);for(const r of i.getAttributeKeys())t.add(i,"attribute:"+r);return t}_testAndFire(t,i,s){const r=EAe(t,i),o=i.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(i.item):i.item,a=this._firedEventsMap.get(s),l=a.get(o);if(!l)a.set(o,new Set([r]));else if(!l.has(r))l.add(r);else return;this.fire(r,i,s)}_testAndFireAddAttributes(t,i){const s={item:t,range:We._createOn(t)};for(const r of s.item.getAttributeKeys())s.attributeKey=r,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(r),this._testAndFire("attribute:".concat(r),s,i)}_createConversionApi(t,i=new Set,s={}){const r={...this._conversionApi,consumable:new _Ae,writer:t,options:s,convertItem:o=>this._convertInsert(We._createOn(o),r),convertChildren:o=>this._convertInsert(We._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!i.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function kAe(n,e,t){const i=e.getRange(),s=Array.from(n.getAncestors());return s.shift(),s.reverse(),!s.some(o=>{if(i.containsItem(o))return!!t.toViewElement(o).getCustomProperty("addHighlight")})}function EAe(n,e){const t=e.item.is("element")?e.item.name:"$text";return"".concat(n,":").concat(t)}function l$(n){const e=n.item,t=We._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}class po extends Ri(eu){constructor(...t){super();$(this,"_lastRangeBackward",!1);$(this,"_attrs",new Map);$(this,"_ranges",[]);t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const i of this._ranges){let s=!1;for(const r of t._ranges)if(i.isEqual(r)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new We(t.start,t.end)}getFirstRange(){let t=null;for(const i of this._ranges)(!t||i.start.isBefore(t.start))&&(t=i);return t?new We(t.start,t.end):null}getLastRange(){let t=null;for(const i of this._ranges)(!t||i.end.isAfter(t.end))&&(t=i);return t?new We(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[i,s,r]=t;if(typeof s=="object"&&(r=s,s=void 0),i===null)this._setRanges([]);else if(i instanceof po)this._setRanges(i.getRanges(),i.isBackward);else if(i&&typeof i.getRanges=="function")this._setRanges(i.getRanges(),i.isBackward);else if(i instanceof We)this._setRanges([i],!!r&&!!r.backward);else if(i instanceof dt)this._setRanges([new We(i)]);else if(i instanceof Lh){const o=!!r&&!!r.backward;let a;if(s=="in")a=We._createIn(i);else if(s=="on")a=We._createOn(i);else if(s!==void 0)a=new We(dt._createAt(i,s));else throw new _e("model-selection-setto-required-second-parameter",[this,i]);this._setRanges([a],o)}else if(xo(i))this._setRanges(i,r&&!!r.backward);else throw new _e("model-selection-setto-not-selectable",[this,i])}_setRanges(t,i=!1){const s=Array.from(t),r=s.some(o=>{if(!(o instanceof We))throw new _e("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(a=>!a.isEqual(o))});s.length===this._ranges.length&&!r||(this._replaceAllRanges(s),this._lastRangeBackward=!!i,this.fire("change:range",{directChange:!0}))}setFocus(t,i){if(this.anchor===null)throw new _e("model-selection-setfocus-no-ranges",[this,t]);const s=dt._createAt(t,i);if(s.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(r)=="before"?(this._pushRange(new We(s,r)),this._lastRangeBackward=!0):(this._pushRange(new We(r,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,i){this.getAttribute(t)!==i&&(this._attrs.set(t,i),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const i of this.getRanges()){const s=c$(i.start,t);CAe(s,i)&&(yield s);for(const o of i.getWalker()){const a=o.item;o.type=="elementEnd"&&TAe(a,t,i)&&(yield a)}const r=c$(i.end,t);SAe(r,i)&&(yield r)}}containsEntireContent(t=this.anchor.root){const i=dt._createAt(t,0),s=dt._createAt(t,"end");return i.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new We(t.start,t.end))}_checkRange(t){for(let i=0;i<this._ranges.length;i++)if(t.isIntersecting(this._ranges[i]))throw new _e("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[i]})}_replaceAllRanges(t){this._removeAllRanges();for(const i of t)this._pushRange(i)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}po.prototype.is=function(n){return n==="selection"||n==="model:selection"};function _U(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function TAe(n,e,t){return _U(n,e)&&y3(n,t)}function c$(n,e){const i=n.parent.root.document.model.schema,s=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=s.find(a=>r?!1:(r=i.isLimit(a),!r&&_U(a,e)));return s.forEach(a=>e.add(a)),o}function y3(n,e){const t=AAe(n);return t?!e.containsRange(We._createOn(t),!0):!0}function CAe(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(dt._createAt(n,n.maxOffset))?!1:y3(n,e):!1}function SAe(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(dt._createAt(n,0))?!1:y3(n,e):!1}function AAe(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}class go extends Ri(We){constructor(e,t){super(e,t),IAe.call(this)}detach(){this.stopListening()}toRange(){return new We(this.start,this.end)}static fromRange(e){return new go(e.start,e.end)}}go.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function IAe(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&PAe.call(this,t)},{priority:"low"})}function PAe(n){const e=this.getTransformedByOperation(n),t=We._createFromRanges(e),i=!t.isEqual(this),s=RAe(this,n);let r=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?r=n.sourcePosition:r=n.deletionPosition);const o=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",o,{deletionPosition:r})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function RAe(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}const v0="selection:";class Ma extends Ri(eu){constructor(t){super();$(this,"_selection");this._selection=new $Ae(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,i){this._selection.setFocus(t,i)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,i){this._selection.setAttribute(t,i)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return v0+t}static _isStoreAttributeKey(t){return t.startsWith(v0)}}Ma.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class $Ae extends po{constructor(t){super();$(this,"markers",new Jd({idProperty:"name"}));$(this,"_model");$(this,"_document");$(this,"_attributePriority",new Map);$(this,"_selectionRestorePosition",null);$(this,"_hasChangedRange",!1);$(this,"_overriddenGravityRegister",new Set);$(this,"_observedMarkers",new Set);this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(i,s)=>{const r=s[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(i,s,r,o)=>{this._updateMarker(s,o)}),this.listenTo(this._document,"change",(i,s)=>{LAe(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,i){super.setFocus(t,i),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,i){if(this._setAttribute(t,i)){const s=[t];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const i=[t];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}overrideGravity(){const t=Oa();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new _e("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const i=this._prepareRange(t);i&&this._ranges.push(i)}_validateSelectionRanges(t){for(const i of t)if(!this._document._validateSelectionRange(i))throw new _e("document-selection-wrong-position",this,{range:i})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const i=go.fromRange(t);return i.on("change:range",(s,r,o)=>{if(this._hasChangedRange=!0,i.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(i);this._ranges.splice(a,1),i.detach()}}),i}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let i=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=r.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&t.push(r)}const s=Array.from(this.markers);for(const r of t)this.markers.has(r)||(this.markers.add(r),i=!0);for(const r of Array.from(this.markers))t.includes(r)||(this.markers.remove(r),i=!0);i&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,i){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let r=!1;const o=Array.from(this.markers),a=this.markers.has(t);if(!i)a&&(this.markers.remove(t),r=!0);else{let l=!1;for(const c of this.getRanges())if(i.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(t),r=!0):!l&&a&&(this.markers.remove(t),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(t){const i=Hd(this._getSurroundingAttributes()),s=Hd(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(i);const r=[];for(const[o,a]of this.getAttributes())(!s.has(o)||s.get(o)!==a)&&r.push(o);for(const[o]of s)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(t,i,s=!0){const r=s?"normal":"low";return r=="low"&&this._attributePriority.get(t)=="normal"||super.getAttribute(t)===i?!1:(this._attrs.set(t,i),this._attributePriority.set(t,r),!0)}_removeAttribute(t,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(t)=="normal"||(this._attributePriority.set(t,s),!super.hasAttribute(t))?!1:(this._attrs.delete(t),!0)}_setAttributesTo(t){const i=new Set;for(const[s,r]of this.getAttributes())t.get(s)!==r&&this._removeAttribute(s,!1);for(const[s,r]of t)this._setAttribute(s,r,!1)&&i.add(s);return i}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const i of t.getAttributeKeys())i.startsWith(v0)&&(yield[i.substr(v0.length),t.getAttribute(i)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),i=this._model.schema;if(t.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const r=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=Hm(r,i)),s||(s=Hm(o,i)),!this.isGravityOverridden&&!s){let a=r;for(;a&&!s;)a=a.previousSibling,s=Hm(a,i)}if(!s){let a=o;for(;a&&!s;)a=a.nextSibling,s=Hm(a,i)}s||(s=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&i.isObject(o.item)){s=Hm(o.item,i);break}if(o.type=="text"){s=o.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const i=this._model.schema.getNearestSelectionRange(t);i&&this._pushRange(i)}}function Hm(n,e){if(!n)return null;if(n instanceof _a||n instanceof Wi)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[i,s]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,s]);return t}function LAe(n,e){const t=n.document.differ;for(const i of t.getChanges()){if(i.type!="insert")continue;const s=i.position.parent;i.length===s.maxOffset&&n.enqueueChange(e,o=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(v0));for(const l of a)o.removeAttribute(l,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kU{constructor(e){$(this,"_dispatchers");this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class OAe extends kU{elementToElement(e){return this.add(ZAe(e))}elementToStructure(e){return this.add(JAe(e))}attributeToElement(e){return this.add(e3e(e))}attributeToAttribute(e){return this.add(t3e(e))}markerToElement(e){return this.add(n3e(e))}markerToHighlight(e){return this.add(s3e(e))}markerToData(e){return this.add(i3e(e))}}function EU(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const i=t.writer,s=t.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(s,r)}}function TU(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function DAe(){return(n,e,t)=>{const i=t.mapper.toViewPosition(e.position),s=e.position.getShiftedBy(e.length),r=t.mapper.toViewPosition(s,{isPhantom:!0}),o=t.writer.createRange(i,r),a=t.writer.remove(o.getTrimmed());for(const l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function CU(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function MAe(){return(n,e,t)=>{const i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=[];for(const r of i.getRanges())s.push(t.mapper.toViewRange(r));t.writer.setSelection(s,{backward:i.isBackward})}}function NAe(){return(n,e,t)=>{const i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=t.writer,r=i.getFirstPosition(),o=t.mapper.toViewPosition(r),a=s.breakAttributes(o);s.setSelection(a)}}function FAe(){return(n,e,t)=>{const i=t.writer,s=i.document.selection;for(const r of s.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&t.writer.mergeAttributes(r.start);i.setSelection(null)}}function BAe(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),r=n(t.attributeNewValue,i,t);if(!s&&!r)return;i.consumable.consume(t.item,e.name);const o=i.writer,a=o.document.selection;if(t.item instanceof po||t.item instanceof Ma)o.wrap(a.getFirstRange(),r);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(l=o.unwrap(l,s)),t.attributeNewValue!==null&&r&&o.wrap(l,r)}}}function VAe(n,e=u3e){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const r=n(i.item,s,i);if(!r)return;e(i.item,s.consumable);const o=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,r),s.writer.insert(o,r),s.convertAttributes(i.item),RU(r,i.item.getChildren(),s,{reconversion:i.reconversion})}}function UAe(n,e){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const r=new Map;s.writer._registerSlotFactory(a3e(i.item,r,s));const o=n(i.item,s,i);if(s.writer._clearSlotFactory(),!o)return;l3e(i.item,r,s),e(i.item,s.consumable);const a=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,o),s.writer.insert(a,o),s.convertAttributes(i.item),c3e(o,r,s,{reconversion:i.reconversion})}}function zAe(n){return(e,t,i)=>{t.isOpening=!0;const s=n(t,i);t.isOpening=!1;const r=n(t,i);if(!s||!r)return;const o=t.markerRange;if(o.isCollapsed&&!i.consumable.consume(o,e.name))return;for(const c of o)if(!i.consumable.consume(c.item,e.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(o.start),s),i.mapper.bindElementToMarker(s,t.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),r),i.mapper.bindElementToMarker(r,t.markerName)),e.stop()}}function HAe(){return(n,e,t)=>{const i=t.mapper.markerNameToElements(e.markerName);if(i){for(const s of i)t.mapper.unbindElementFromMarkerName(s,e.markerName),t.writer.clear(t.writer.createRangeOn(s),s);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function jAe(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const r=t.markerRange;i.consumable.consume(r,e.name)&&(d$(r,!1,i,t,s),d$(r,!0,i,t,s),e.stop())}}function d$(n,e,t,i,s){const r=e?n.start:n.end,o=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(o||a){let c,d;e&&o||!e&&!a?(c=o,d=!0):(c=a,d=!1);const u=t.mapper.toViewElement(c);if(u){GAe(u,e,d,t,i,s);return}}const l=t.mapper.toViewPosition(r);WAe(l,e,t,i,s)}function GAe(n,e,t,i,s,r){const o="data-".concat(r.group,"-").concat(e?"start":"end","-").concat(t?"before":"after"),a=n.hasAttribute(o)?n.getAttribute(o).split(","):[];a.unshift(r.name),i.writer.setAttribute(o,a.join(","),n),i.mapper.bindElementToMarker(n,s.markerName)}function WAe(n,e,t,i,s){const r="".concat(s.group,"-").concat(e?"start":"end"),o=s.name?{name:s.name}:null,a=t.writer.createUIElement(r,o);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function qAe(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const r=i.mapper.markerNameToElements(t.markerName);if(!r)return;for(const a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(o("data-".concat(s.group,"-start-before"),a),o("data-".concat(s.group,"-start-after"),a),o("data-".concat(s.group,"-end-before"),a),o("data-".concat(s.group,"-end-after"),a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function o(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(s.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function KAe(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),r=n(t.attributeNewValue,i,t);if(!s&&!r)return;i.consumable.consume(t.item,e.name);const o=i.mapper.toViewElement(t.item),a=i.writer;if(!o)throw new _e("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&s)if(s.key=="class"){const l=typeof s.value=="string"?s.value.split(/\s+/):s.value;for(const c of l)a.removeClass(c,o)}else if(s.key=="style")if(typeof s.value=="string"){const l=new iw(a.document.stylesProcessor);l.setTo(s.value);for(const[c]of l.getStylesEntries())a.removeStyle(c,o)}else{const l=Object.keys(s.value);for(const c of l)a.removeStyle(c,o)}else a.removeAttribute(s.key,o);if(t.attributeNewValue!==null&&r)if(r.key=="class"){const l=typeof r.value=="string"?r.value.split(/\s+/):r.value;for(const c of l)a.addClass(c,o)}else if(r.key=="style")if(typeof r.value=="string"){const l=new iw(a.document.stylesProcessor);l.setTo(r.value);for(const[c,d]of l.getStylesEntries())a.setStyle(c,d,o)}else{const l=Object.keys(r.value);for(const c of l)a.setStyle(c,r.value[c],o)}else a.setAttribute(r.key,r.value,o)}}function YAe(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof po||t.item instanceof Ma)&&!t.item.is("$textProxy"))return;const s=w3(n,t,i);if(!s||!i.consumable.consume(t.item,e.name))return;const r=i.writer,o=CU(r,s),a=r.document.selection;if(t.item instanceof po||t.item instanceof Ma)r.wrap(a.getFirstRange(),o);else{const l=i.mapper.toViewRange(t.range),c=r.wrap(l,o);for(const d of c.getItems())if(d.is("attributeElement")&&d.isSimilar(o)){i.mapper.bindElementToMarker(d,t.markerName);break}}}}function XAe(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof es))return;const s=w3(n,t,i);if(!s||!i.consumable.test(t.item,e.name))return;const r=i.mapper.toViewElement(t.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const a of We._createIn(t.item))i.consumable.consume(a.item,e.name);r.getCustomProperty("addHighlight")(r,s,i.writer),i.mapper.bindElementToMarker(r,t.markerName)}}}function QAe(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;const s=w3(n,t,i);if(!s)return;const r=CU(i.writer,s),o=i.mapper.markerNameToElements(t.markerName);if(o){for(const a of o)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),r):a.getCustomProperty("removeHighlight")(a,s.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function ZAe(n){const e=SU(n.model),t=y0(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on("insert:".concat(e.name),VAe(t,PU(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",IU(e),{priority:"low"})}}function JAe(n){const e=SU(n.model),t=y0(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new _e("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on("insert:".concat(e.name),UAe(t,PU(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",IU(e),{priority:"low"})}}function e3e(n){n=ta(n);let e=n.model;typeof e=="string"&&(e={key:e});let t="attribute:".concat(e.key);if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=y0(n.view[s],"attribute");else n.view=y0(n.view,"attribute");const i=AU(n);return s=>{s.on(t,BAe(i),{priority:n.converterPriority||"normal"})}}function t3e(n){n=ta(n);let e=n.model;typeof e=="string"&&(e={key:e});let t="attribute:".concat(e.key);if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=u$(n.view[s]);else n.view=u$(n.view);const i=AU(n);return s=>{s.on(t,KAe(i),{priority:n.converterPriority||"normal"})}}function n3e(n){const e=y0(n.view,"ui");return t=>{t.on("addMarker:".concat(n.model),zAe(e),{priority:n.converterPriority||"normal"}),t.on("removeMarker:".concat(n.model),HAe(),{priority:n.converterPriority||"normal"})}}function i3e(n){n=ta(n);const e=n.model;let t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on("addMarker:".concat(e),jAe(t),{priority:n.converterPriority||"normal"}),i.on("removeMarker:".concat(e),qAe(t),{priority:n.converterPriority||"normal"})}}function s3e(n){return e=>{e.on("addMarker:".concat(n.model),YAe(n.view),{priority:n.converterPriority||"normal"}),e.on("addMarker:".concat(n.model),XAe(n.view),{priority:n.converterPriority||"normal"}),e.on("removeMarker:".concat(n.model),QAe(n.view),{priority:n.converterPriority||"normal"})}}function SU(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?cs(n.attributes):[],children:!!n.children}}function y0(n,e){return typeof n=="function"?n:(t,i)=>r3e(n,i,e)}function r3e(n,e,t){typeof n=="string"&&(n={name:n});let i;const s=e.writer,r=Object.assign({},n.attributes);if(t=="container")i=s.createContainerElement(n.name,r);else if(t=="attribute"){const o={priority:n.priority||nh.DEFAULT_PRIORITY};i=s.createAttributeElement(n.name,r,o)}else i=s.createUIElement(n.name,r);if(n.styles){const o=Object.keys(n.styles);for(const a of o)s.setStyle(a,n.styles[a],i)}if(n.classes){const o=n.classes;if(typeof o=="string")s.addClass(o,i);else for(const a of o)s.addClass(a,i)}return i}function AU(n){return n.model.values?(e,t,i)=>{const s=n.view[e];return s?s(e,t,i):null}:n.view}function u$(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function w3(n,e,t){const i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function o3e(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(n.children)return!0}return!1}}function IU(n){const e=o3e(n);return(t,i)=>{const s=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const r of i.changes){const o=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!o||!e(o,r)){s.push(r);continue}if(!i.reconvertedElements.has(o)){i.reconvertedElements.add(o);const a=dt._createBefore(o);let l=s.length;for(let c=s.length-1;c>=0;c--){const d=s[c],h=(d.type=="attribute"?d.range.start:d.position).compareWith(a);if(h=="before"||d.type=="remove"&&h=="same")break;l=c}s.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}i.changes=s}}function PU(n){return(e,t,i={})=>{const s=["insert"];for(const r of n.attributes)e.hasAttribute(r)&&s.push("attribute:".concat(r));return s.every(r=>t.test(e,r))?(i.preflight||s.forEach(r=>t.consume(e,r)),!0):!1}}function a3e(n,e,t){return(i,s)=>{const r=i.createContainerElement("$slot");let o=null;if(s==="children")o=Array.from(n.getChildren());else if(typeof s=="function")o=Array.from(n.getChildren()).filter(a=>s(a));else throw new _e("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:s});return e.set(r,o),r}}function l3e(n,e,t){const i=Array.from(e.values()).flat(),s=new Set(i);if(s.size!=i.length)throw new _e("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(s.size!=n.childCount)throw new _e("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function c3e(n,e,t,i){t.mapper.on("modelToViewPosition",o,{priority:"highest"});let s=null,r=null;for([s,r]of e)RU(n,r,t,i),t.writer.move(t.writer.createRangeIn(s),t.writer.createPositionBefore(s)),t.writer.remove(s);t.mapper.off("modelToViewPosition",o);function o(a,l){const c=l.modelPosition.nodeAfter,d=r.indexOf(c);d<0||(l.viewPosition=l.mapper.findPositionIn(s,d))}}function RU(n,e,t,i){for(const s of e)d3e(n.root,s,t,i)||t.convertItem(s)}function d3e(n,e,t,i){const{writer:s,mapper:r}=t;if(!i.reconversion)return!1;const o=r.toViewElement(e);return!o||o.root==n||!t.canReuseView(o)?!1:(s.move(s.createRangeOn(o),r.toViewPosition(dt._createBefore(e))),!0)}function u3e(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $U(n){const{schema:e,document:t}=n.model;for(const i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function LU(n,e,t){const i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function OU(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class h3e extends kU{elementToElement(e){return this.add(DU(e))}elementToAttribute(e){return this.add(m3e(e))}attributeToAttribute(e){return this.add(g3e(e))}elementToMarker(e){return this.add(b3e(e))}dataToMarker(e){return this.add(v3e(e))}}function h$(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:i,modelCursor:s}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=s}}}function f3e(){return(n,e,{schema:t,consumable:i,writer:s})=>{let r=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(r,"$text")){if(!LU(r,"$text",t)||e.viewItem.data.trim().length==0)return;r=OU(r,s)}i.consume(e.viewItem);const o=s.createText(e.viewItem.data);s.insert(o,r),e.modelRange=s.createRange(r,r.getShiftedBy(o.offsetSize)),e.modelCursor=e.modelRange.end}}function p3e(n,e){return(t,i)=>{const s=i.newSelection,r=[];for(const a of s.getRanges())r.push(e.toModelRange(a));const o=n.createSelection(r,{backward:s.isBackward});o.isEqual(n.document.selection)||n.change(a=>{a.setSelection(o)})}}function DU(n){n=ta(n);const e=mC(n),t=x3(n.view),i=t?"element:".concat(t):"element";return s=>{s.on(i,e,{priority:n.converterPriority||"normal"})}}function m3e(n){n=ta(n),MU(n);const e=NU(n,!1),t=x3(n.view),i=t?"element:".concat(t):"element";return s=>{s.on(i,e,{priority:n.converterPriority||"low"})}}function g3e(n){n=ta(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=x3e(n)),MU(n,e);const t=NU(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function b3e(n){const e=E3e(n.model);return DU({...n,model:e})}function v3e(n){n=ta(n),n.model||(n.model=s=>s?n.view+":"+s:n.view);const e={view:n.view,model:n.model},t=mC(f$(e,"start")),i=mC(f$(e,"end"));return s=>{s.on("element:".concat(n.view,"-start"),t,{priority:n.converterPriority||"normal"}),s.on("element:".concat(n.view,"-end"),i,{priority:n.converterPriority||"normal"});const r=jo.low,o=jo.highest,a=jo.get(n.converterPriority)/o;s.on("element",y3e(e),{priority:r+a})}}function y3e(n){return(e,t,i)=>{const s="data-".concat(n.view);if(!i.consumable.test(t.viewItem,{attributes:s+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:s+"-end-after"})&&r(t.modelRange.end,t.viewItem.getAttribute(s+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-after"})&&r(t.modelRange.end,t.viewItem.getAttribute(s+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-end-before"})&&r(t.modelRange.start,t.viewItem.getAttribute(s+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-before"})&&r(t.modelRange.start,t.viewItem.getAttribute(s+"-start-before").split(","));function r(o,a){for(const l of a){const c=n.model(l,i),d=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(d,o),t.modelCursor.isEqual(o)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(o,1),t.modelRange=t.modelRange._getTransformedByInsertion(o,1)[0]}}}}function x3(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function mC(n){const e=new mh(n.view);return(t,i,s)=>{const r=e.match(i.viewItem);if(!r)return;const o=r.match;if(o.name=!0,!s.consumable.test(i.viewItem,o))return;const a=w3e(n.model,i.viewItem,s);a&&s.safeInsert(a,i.modelCursor)&&(s.consumable.consume(i.viewItem,o),s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i))}}function w3e(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function x3e(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},n.view.name&&(i.name=n.view.name),n.view=i,e}function MU(n,e=null){const t=e===null?!0:r=>r.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,s=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:s}}function NU(n,e){const t=new mh(n.view);return(i,s,r)=>{if(!s.modelRange&&e)return;const o=t.match(s.viewItem);if(!o||(_3e(n.view,s.viewItem)?o.match.name=!0:delete o.match.name,!r.consumable.test(s.viewItem,o.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(s.viewItem,r):n.model.value;if(l===null)return;s.modelRange||Object.assign(s,r.convertChildren(s.viewItem,s.modelCursor)),k3e(s.modelRange,{key:a,value:l},e,r)&&(r.consumable.test(s.viewItem,{name:!0})&&(o.match.name=!0),r.consumable.consume(s.viewItem,o.match))}}function _3e(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!x3(t)?!1:!t.classes&&!t.attributes&&!t.styles}function k3e(n,e,t,i){let s=!1;for(const r of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(r,e.key)&&(s=!0,!r.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,r));return s}function E3e(n){return(e,t)=>{const i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function f$(n,e){const t=(i,s)=>{const r=i.getAttribute("name"),o=n.model(r,s);return s.writer.createElement("$marker",{"data-name":o})};return{view:"".concat(n.view,"-").concat(e),model:t}}function T3e(n){n.document.registerPostFixer(e=>C3e(e,n))}function C3e(n,e){const t=e.document.selection,i=e.schema,s=[];let r=!1;for(const o of t.getRanges()){const a=FU(o,i);a&&!a.isEqual(o)?(s.push(a),r=!0):s.push(o)}return r&&n.setSelection(P3e(s),{backward:t.isBackward}),!1}function FU(n,e){return n.isCollapsed?S3e(n,e):A3e(n,e)}function S3e(n,e){const t=n.start,i=e.getNearestSelectionRange(t);if(!i){const r=t.getAncestors().reverse().find(o=>e.isObject(o));return r?We._createOn(r):null}if(!i.isCollapsed)return i;const s=i.start;return t.isEqual(s)?null:new We(s)}function A3e(n,e){const{start:t,end:i}=n,s=e.checkChild(t,"$text"),r=e.checkChild(i,"$text"),o=e.getLimitElement(t),a=e.getLimitElement(i);if(o===a){if(s&&r)return null;if(I3e(t,i,e)){const u=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),f=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),m=u?u.start:t,g=f?f.end:i;return new We(m,g)}}const l=o&&!o.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const d=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,u=l&&(!d||!m$(t.nodeAfter,e)),h=c&&(!d||!m$(i.nodeBefore,e));let f=t,m=i;return u&&(f=dt._createBefore(p$(o,e))),h&&(m=dt._createAfter(p$(a,e))),new We(f,m)}return null}function p$(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function I3e(n,e,t){const i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),s=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||s}function P3e(n){const e=[...n],t=new Set;let i=1;for(;i<e.length;){const r=e[i],o=e.slice(0,i);for(const[a,l]of o.entries())if(!t.has(a)){if(r.isEqual(l))t.add(a);else if(r.isIntersecting(l)){t.add(a),t.add(i);const c=r.getJoined(l);e.push(c)}}i++}return e.filter((r,o)=>!t.has(o))}function m$(n,e){return n&&e.isSelectable(n)}class R3e extends gs(){constructor(t,i){super();$(this,"model");$(this,"view");$(this,"mapper");$(this,"downcastDispatcher");this.model=t,this.view=new vAe(i),this.mapper=new wU,this.downcastDispatcher=new xU({mapper:this.mapper,schema:t.schema});const s=this.model.document,r=s.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(a=>{this.downcastDispatcher.convertChanges(s.differ,o,a),this.downcastDispatcher.convertSelection(r,o,a)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",p3e(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",$3e(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",EU(),{priority:"lowest"}),this.downcastDispatcher.on("insert",TU(),{priority:"lowest"}),this.downcastDispatcher.on("remove",DAe(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",FAe()),this.downcastDispatcher.on("selection",MAe(),{priority:"low"}),this.downcastDispatcher.on("selection",NAe(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(a=>{if(a.rootName=="$graveyard")return null;const l=new rU(this.view.document,a.name);return l.rootName=a.rootName,this.mapper.bindElements(a,l),l})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const i=typeof t=="string"?t:t.name,s=this.model.markers.get(i);if(!s)throw new _e("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:i});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}function $3e(n,e,t){return(i,s)=>{if(!(t.document.isComposing&&!bn.isAndroid))for(let r=0;r<s.targetRanges.length;r++){const o=s.targetRanges[r],a=n.toModelRange(o),l=FU(a,e);!l||l.isEqual(a)||(s.targetRanges[r]=n.toViewRange(l))}}}class Pg{constructor(){$(this,"_consumables",new Map)}add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new L3e(e),this._consumables.set(e,i)),i.add(t)}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const o of i)o=="style"||o=="class"||t.attributes.push(o);const s=e.getClassNames();for(const o of s)t.classes.push(o);const r=e.getStyleNames();for(const o of r)t.styles.push(o);return t}static createFrom(e,t){if(t||(t=new Pg),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Pg.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=Pg.createFrom(i,t);return t}}const J1=["attributes","classes","styles"];class L3e{constructor(e){$(this,"element");$(this,"_canConsumeName");$(this,"_consumables");this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of J1)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of J1)if(t in e){const i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of J1)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of J1)t in e&&this._revert(t,e[t])}_add(e,t){const i=cs(t),s=this._consumables[e];for(const r of i){if(e==="attributes"&&(r==="class"||r==="style"))throw new _e("viewconsumable-invalid-attribute",this);if(s.set(r,!0),e==="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(r))s.set(o,!0)}}_test(e,t){const i=cs(t),s=this._consumables[e];for(const r of i)if(e==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles",a=this._test(o,[...this._consumables[o].keys()]);if(a!==!0)return a}else{const o=s.get(r);if(o===void 0)return null;if(!o)return!1}return!0}_consume(e,t){const i=cs(t),s=this._consumables[e];for(const r of i)if(e==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles";this._consume(o,[...this._consumables[o].keys()])}else if(s.set(r,!1),e=="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(r))s.set(o,!1)}_revert(e,t){const i=cs(t),s=this._consumables[e];for(const r of i)if(e==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles";this._revert(o,[...this._consumables[o].keys()])}else s.get(r)===!1&&s.set(r,!0)}}class O3e extends gs(){constructor(){super();$(this,"_sourceDefinitions",{});$(this,"_attributeProperties",Object.create(null));$(this,"_customChildChecks",new Map);$(this,"_customAttributeChecks",new Map);$(this,"_genericCheckSymbol",Symbol("$generic"));$(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,i)=>{i[0]=new Rd(i[0])},{priority:"highest"}),this.on("checkChild",(t,i)=>{i[0]=new Rd(i[0]),i[1]=this.getDefinition(i[1])},{priority:"highest"})}register(t,i){if(this._sourceDefinitions[t])throw new _e("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},i)],this._clearCache()}extend(t,i){if(!this._sourceDefinitions[t])throw new _e("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},i)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let i;return typeof t=="string"?i=t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?i="$text":i=t.name,this.getDefinitions()[i]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const i=this.getDefinition(t);return!!(i&&i.isBlock)}isLimit(t){const i=this.getDefinition(t);return i?!!(i.isLimit||i.isObject):!1}isObject(t){const i=this.getDefinition(t);return i?!!(i.isObject||i.isLimit&&i.isSelectable&&i.isContent):!1}isInline(t){const i=this.getDefinition(t);return!!(i&&i.isInline)}isSelectable(t){const i=this.getDefinition(t);return i?!!(i.isSelectable||i.isObject):!1}isContent(t){const i=this.getDefinition(t);return i?!!(i.isContent||i.isObject):!1}checkChild(t,i){return i?this._checkContextMatch(t,i):!1}checkAttribute(t,i){const s=this.getDefinition(t.last);if(!s)return!1;const r=this._evaluateAttributeChecks(t,i);return r!==void 0?r:s.allowAttributes.includes(i)}checkMerge(t,i){if(t instanceof dt){const s=t.nodeBefore,r=t.nodeAfter;if(!(s instanceof es))throw new _e("schema-check-merge-no-element-before",this);if(!(r instanceof es))throw new _e("schema-check-merge-no-element-after",this);return this.checkMerge(s,r)}if(this.isLimit(t)||this.isLimit(i))return!1;for(const s of i.getChildren())if(!this.checkChild(t,s))return!1;return!0}addChildCheck(t,i){const s=i!==void 0?i:this._genericCheckSymbol,r=this._customChildChecks.get(s)||[];r.push(t),this._customChildChecks.set(s,r)}addAttributeCheck(t,i){const s=i!==void 0?i:this._genericCheckSymbol,r=this._customAttributeChecks.get(s)||[];r.push(t),this._customAttributeChecks.set(s,r)}setAttributeProperties(t,i){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),i)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let i;for(t instanceof dt?i=t.parent:i=(t instanceof We?[t]:Array.from(t.getRanges())).reduce((r,o)=>{const a=o.getCommonAncestor();return r?r.getCommonAncestor(a,{includeSelf:!0}):a},null);!this.isLimit(i)&&i.parent;)i=i.parent;return i}checkAttributeInSelection(t,i){if(t.isCollapsed){const r=[...t.getFirstPosition().getAncestors(),new Wi("",t.getAttributes())];return this.checkAttribute(r,i)}else{const s=t.getRanges();for(const r of s)for(const o of r)if(this.checkAttribute(o.item,i))return!0}return!1}*getValidRanges(t,i){t=X3e(t);for(const s of t)yield*this._getValidRangesForRange(s,i)}getNearestSelectionRange(t,i="both"){if(t.root.rootName=="$graveyard")return null;if(this.checkChild(t,"$text"))return new We(t);let s,r;const o=t.getAncestors().reverse().find(a=>this.isLimit(a))||t.root;(i=="both"||i=="backward")&&(s=new mc({boundaries:We._createIn(o),startPosition:t,direction:"backward"})),(i=="both"||i=="forward")&&(r=new mc({boundaries:We._createIn(o),startPosition:t}));for(const a of Y3e(s,r)){const l=a.walker==s?"elementEnd":"elementStart",c=a.value;if(c.type==l&&this.isObject(c.item))return We._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new We(c.nextPosition)}return null}findAllowedParent(t,i){let s=t.parent;for(;s;){if(this.checkChild(s,i))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(t,i,s){const r=s.model;for(const[o,a]of Object.entries(i))r.schema.checkAttribute(t,o)&&s.setAttribute(o,a,t)}removeDisallowedAttributes(t,i){for(const s of t)if(s.is("$text"))g$(this,s,i);else{const o=We._createIn(s).getPositions();for(const a of o){const l=a.nodeBefore||a.parent;g$(this,l,i)}}}getAttributesWithProperty(t,i,s){const r={};for(const[o,a]of t.getAttributes()){const l=this.getAttributeProperties(o);l[i]!==void 0&&(s===void 0||s===l[i])&&(r[o]=a)}return r}createContext(t){return new Rd(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},i=this._sourceDefinitions,s=Object.keys(i);for(const o of s)t[o]=D3e(i[o],o);const r=Object.values(t);for(const o of r)M3e(t,o),N3e(t,o),F3e(t,o),B3e(t,o);for(const o of r)V3e(t,o);for(const o of r)U3e(t,o);for(const o of r)z3e(t,o);for(const o of r)j3e(t,o);for(const o of r)G3e(t,o);this._compiledDefinitions=H3e(t)}_checkContextMatch(t,i){const s=t.last;let r=this._evaluateChildChecks(t,i);if(r=r!==void 0?r:i.allowIn.includes(s.name),!r)return!1;const o=this.getDefinition(s),a=t.trimLast();return o?a.length==0?!0:this._checkContextMatch(a,o):!1}_evaluateChildChecks(t,i){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(i.name)||[];for(const o of[...s,...r]){const a=o(t,i);if(a!==void 0)return a}}_evaluateAttributeChecks(t,i){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(i)||[];for(const o of[...s,...r]){const a=o(t,i);if(a!==void 0)return a}}*_getValidRangesForRange(t,i){let s=t.start,r=t.start;for(const o of t.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(We._createIn(o),i)),this.checkAttribute(o,i)||(s.isEqual(r)||(yield new We(s,r)),s=dt._createAfter(o)),r=dt._createAfter(o);s.isEqual(r)||(yield new We(s,r))}findOptimalInsertionRange(t,i){const s=t.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return i=="before"||i=="after"?new We(dt._createAt(s,i)):We._createOn(s);const r=zd(t.getSelectedBlocks());if(!r)return new We(t.focus);if(r.isEmpty)return new We(dt._createAt(r,0));const o=dt._createAfter(r);return t.focus.isTouching(o)?new We(o):new We(dt._createBefore(r))}}class Rd{constructor(e){$(this,"_items");if(e instanceof Rd)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(K3e)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new Rd([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new Rd([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function D3e(n,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return W3e(n,t),tl(n,t,"allowIn"),tl(n,t,"allowChildren"),tl(n,t,"disallowIn"),tl(n,t,"disallowChildren"),tl(n,t,"allowContentOf"),tl(n,t,"allowWhere"),tl(n,t,"allowAttributes"),tl(n,t,"disallowAttributes"),tl(n,t,"allowAttributesOf"),tl(n,t,"inheritTypesFrom"),q3e(n,t),t}function M3e(n,e){for(const t of e.allowIn){const i=n[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function N3e(n,e){for(const t of e.allowChildren){const i=n[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function F3e(n,e){for(const t of e.disallowIn){const i=n[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function B3e(n,e){for(const t of e.disallowChildren){const i=n[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function V3e(n,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function U3e(n,e){for(const t of e.allowContentOf){const i=n[t];i&&(i.disallowChildren.forEach(s=>{e.allowChildren.has(s)||(e.disallowChildren.add(s),n[s].disallowIn.add(e.name))}),i.allowChildren.forEach(s=>{e.disallowChildren.has(s)||(e.allowChildren.add(s),n[s].allowIn.add(e.name))}))}}function z3e(n,e){for(const t of e.allowWhere){const i=n[t];i&&(i.disallowIn.forEach(s=>{e.allowIn.has(s)||(e.disallowIn.add(s),n[s].disallowChildren.add(e.name))}),i.allowIn.forEach(s=>{e.disallowIn.has(s)||(e.allowIn.add(s),n[s].allowChildren.add(e.name))}))}}function H3e(n){const e={};for(const t of Object.values(n))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(i=>!!n[i]),allowChildren:Array.from(t.allowChildren).filter(i=>!!n[i]),allowAttributes:Array.from(t.allowAttributes)};return e}function j3e(n,e){for(const t of e.allowAttributesOf){const i=n[t];if(!i)return;i.allowAttributes.forEach(s=>{e.disallowAttributes.has(s)||e.allowAttributes.add(s)})}}function G3e(n,e){for(const t of e.inheritTypesFrom){const i=n[t];if(i){const s=Object.keys(i).filter(r=>r.startsWith("is"));for(const r of s)r in e||(e[r]=i[r])}}}function W3e(n,e){for(const t of n){const i=Object.keys(t).filter(s=>s.startsWith("is"));for(const s of i)e[s]=!!t[s]}}function tl(n,e,t){for(const i of n){let s=i[t];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(r=>e[t].add(r))}}function q3e(n,e){for(const t of n){const i=t.inheritAllFrom;i&&(e.allowContentOf.add(i),e.allowWhere.add(i),e.allowAttributesOf.add(i),e.inheritTypesFrom.add(i))}}function K3e(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*Y3e(n,e){let t=!1;for(;!t;){if(t=!0,n){const i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){const i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*X3e(n){for(const e of n)yield*e.getMinimalFlatRanges()}function g$(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}class Q3e extends Ri(){constructor(t){super();$(this,"conversionApi");$(this,"_splitParts",new Map);$(this,"_cursorParents",new Map);$(this,"_modelCursor",null);$(this,"_emptyElementsToKeep",new Set);this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(i,s)=>this._convertItem(i,s),convertChildren:(i,s)=>this._convertChildren(i,s),safeInsert:(i,s)=>this._safeInsert(i,s),updateConversionResult:(i,s)=>this._updateConversionResult(i,s),splitToAllowedParent:(i,s)=>this._splitToAllowedParent(i,s),getSplitParts:i=>this._getSplitParts(i),keepEmptyElement:i=>this._keepEmptyElement(i)}}convert(t,i,s=["$root"]){this.fire("viewCleanup",t),this._modelCursor=J3e(s,i),this.conversionApi.writer=i,this.conversionApi.consumable=Pg.createFrom(t),this.conversionApi.store={};const{modelRange:r}=this._convertItem(t,this._modelCursor),o=i.createDocumentFragment();if(r){this._removeEmptyElements();for(const a of Array.from(this._modelCursor.parent.getChildren()))i.append(a,o);o.markers=Z3e(o,i)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(t,i){const s={viewItem:t,modelCursor:i,modelRange:null};if(t.is("element")?this.fire("element:".concat(t.name),s,this.conversionApi):t.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof We))throw new _e("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(t,i){let s=i.is("position")?i:dt._createAt(i,0);const r=new We(s);for(const o of Array.from(t.getChildren())){const a=this._convertItem(o,s);a.modelRange instanceof We&&(r.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:r,modelCursor:s}}_safeInsert(t,i){const s=this._splitToAllowedParent(t,i);return s?(this.conversionApi.writer.insert(t,s.position),!0):!1}_updateConversionResult(t,i){const s=this._getSplitParts(t),r=this.conversionApi.writer;i.modelRange||(i.modelRange=r.createRange(r.createPositionBefore(t),r.createPositionAfter(s[s.length-1])));const o=this._cursorParents.get(t);o?i.modelCursor=r.createPositionAt(o,0):i.modelCursor=i.modelRange.end}_splitToAllowedParent(t,i){const{schema:s,writer:r}=this.conversionApi;let o=s.findAllowedParent(i,t);if(o){if(o===i.parent)return{position:i};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return LU(i,t,s)?{position:OU(i,r)}:null;const a=this.conversionApi.writer.split(i,o),l=[];for(const d of a.range.getWalker())if(d.type=="elementEnd")l.push(d.item);else{const u=l.pop(),h=d.item;this._registerSplitPair(u,h)}const c=a.range.end.parent;return this._cursorParents.set(t,c),{position:a.position,cursorParent:c}}_registerSplitPair(t,i){this._splitParts.has(t)||this._splitParts.set(t,[t]);const s=this._splitParts.get(t);this._splitParts.set(i,s),s.push(i)}_getSplitParts(t){let i;return this._splitParts.has(t)?i=this._splitParts.get(t):i=[t],i}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){let t=!1;for(const i of this._splitParts.keys())i.isEmpty&&!this._emptyElementsToKeep.has(i)&&(this.conversionApi.writer.remove(i),this._splitParts.delete(i),t=!0);t&&this._removeEmptyElements()}}function Z3e(n,e){const t=new Set,i=new Map,s=We._createIn(n).getItems();for(const r of s)r.is("element","$marker")&&t.add(r);for(const r of t){const o=r.getAttribute("data-name"),a=e.createPositionBefore(r);i.has(o)?i.get(o).end=a.clone():i.set(o,new We(a.clone())),e.remove(r)}return i}function J3e(n,e){let t;for(const i of new Rd(n)){const s={};for(const o of i.getAttributeKeys())s[o]=i.getAttribute(o);const r=e.createElement(i.name,s);t&&e.insert(r,t),t=dt._createAt(r,0)}return t}class e5e{getHtml(e){const i=Ut.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}}class t5e{constructor(e){$(this,"domParser");$(this,"domConverter");$(this,"htmlWriter");$(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new pU(e,{renderingMode:"data"}),this.htmlWriter=new e5e}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e="<body>".concat(e,"</body>"));const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);return i}}class n5e extends Ri(){constructor(t,i){super();$(this,"model");$(this,"mapper");$(this,"downcastDispatcher");$(this,"upcastDispatcher");$(this,"viewDocument");$(this,"stylesProcessor");$(this,"htmlProcessor");$(this,"processor");$(this,"_viewWriter");this.model=t,this.mapper=new wU,this.downcastDispatcher=new xU({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",EU(),{priority:"lowest"}),this.downcastDispatcher.on("insert",TU(),{priority:"lowest"}),this.upcastDispatcher=new Q3e({schema:t.schema}),this.viewDocument=new lU(i),this.stylesProcessor=i,this.htmlProcessor=new t5e(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new cU(this.viewDocument),this.upcastDispatcher.on("text",f3e(),{priority:"lowest"}),this.upcastDispatcher.on("element",h$(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",h$(),{priority:"lowest"}),gs().prototype.decorate.call(this,"init"),gs().prototype.decorate.call(this,"set"),gs().prototype.decorate.call(this,"get"),gs().prototype.decorate.call(this,"toView"),gs().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},$U)},{priority:"lowest"})}get(t={}){const{rootName:i="main",trim:s="empty"}=t;if(!this._checkIfRootsExists([i]))throw new _e("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(i);return r.isAttached()||is("datacontroller-get-detached-root",this),s==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,t)}stringify(t,i={}){const s=this.toView(t,i);return this.processor.toData(s)}toView(t,i={}){const s=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=We._createIn(t),a=new ih(s);this.mapper.bindElements(t,a);const l=t.is("documentFragment")?t.markers:i5e(t);return this.downcastDispatcher.convert(o,l,r,i),a}init(t){if(this.model.document.version)throw new _e("datacontroller-init-document-not-empty",this);let i={};if(typeof t=="string"?i.main=t:i=t,!this._checkIfRootsExists(Object.keys(i)))throw new _e("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const r of Object.keys(i)){const o=this.model.document.getRoot(r);s.insert(this.parse(i[r],o),o,0)}}),Promise.resolve()}set(t,i={}){let s={};if(typeof t=="string"?s.main=t:s=t,!this._checkIfRootsExists(Object.keys(s)))throw new _e("datacontroller-set-non-existent-root",this);this.model.enqueueChange(i.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(s)){const a=this.model.document.getRoot(o);r.remove(r.createRangeIn(a)),r.insert(this.parse(s[o],a),a,0)}})}parse(t,i="$root"){const s=this.processor.toView(t);return this.toModel(s,i)}toModel(t,i="$root"){return this.model.change(s=>this.upcastDispatcher.convert(t,s,i))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const i of t)if(!this.model.document.getRoot(i))return!1;return!0}}function i5e(n){const e=[],t=n.root.document;if(!t)return new Map;const i=We._createIn(n);for(const s of t.model.markers){const r=s.getRange(),o=r.isCollapsed,a=r.start.isEqual(i.start)||r.end.isEqual(i.end);if(o&&a)e.push([s.name,r]);else{const l=i.getIntersection(r);l&&e.push([s.name,l])}}return e.sort(([s,r],[o,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(s)}}}),new Map(e)}class s5e{constructor(e,t){$(this,"_helpers",new Map);$(this,"_downcast");$(this,"_upcast");this._downcast=cs(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=cs(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new _e("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new _e("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of Sk(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of Sk(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of Sk(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new _e("conversion-group-exists",this);const s=i?new OAe(t):new h3e(t);this._helpers.set(e,s)}}function*Sk(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],s=n.upcastAlso?n.upcastAlso[e]:void 0;yield*b$(t,i,s)}else yield*b$(n.model,n.view,n.upcastAlso)}function*b$(n,e,t){if(yield{model:n,view:e},t)for(const i of cs(t))yield{model:n,view:i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _o{constructor(e){$(this,"baseVersion");$(this,"isDocumentOperation");$(this,"batch");this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function _3(n,e){const t=VU(e),i=t.reduce((o,a)=>o+a.offsetSize,0),s=n.parent;_0(n);const r=n.index;return s._insertChild(r,t),x0(s,r+t.length),x0(s,r),new We(n,n.getShiftedBy(i))}function BU(n){if(!n.isFlat)throw new _e("operation-utils-remove-range-not-flat",this);const e=n.start.parent;_0(n.start),_0(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return x0(e,n.start.index),t}function w0(n,e){if(!n.isFlat)throw new _e("operation-utils-move-range-not-flat",this);const t=BU(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),_3(e,t)}function r5e(n,e,t){_0(n.start),_0(n.end);for(const i of n.getItems({shallow:!0})){const s=i.is("$textProxy")?i.textNode:i;t!==null?s._setAttribute(e,t):s._removeAttribute(e),x0(s.parent,s.index)}x0(n.end.parent,n.end.index)}function VU(n){const e=[];function t(i){if(typeof i=="string")e.push(new Wi(i));else if(i instanceof _a)e.push(new Wi(i.data,i.getAttributes()));else if(i instanceof Lh)e.push(i);else if(xo(i))for(const s of i)t(s)}t(n);for(let i=1;i<e.length;i++){const s=e[i],r=e[i-1];s instanceof Wi&&r instanceof Wi&&UU(s,r)&&(e.splice(i-1,2,new Wi(r.data+s.data,r.getAttributes())),i--)}return e}function x0(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&UU(t,i)){const s=new Wi(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,s)}}function _0(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const r=new Wi(e.data.substr(0,i),e.getAttributes()),o=new Wi(e.data.substr(i),e.getAttributes());t._insertChild(s,[r,o])}}function UU(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;i.next()}return i.next().done}class ai extends _o{constructor(t,i,s,r){super(r);$(this,"sourcePosition");$(this,"howMany");$(this,"targetPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=i,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[We._createFromPositionAndShift(this.sourcePosition,this.howMany),We._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new ai(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ai(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,i=this.targetPosition.parent,s=this.sourcePosition.offset,r=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new _e("move-operation-nodes-do-not-exist",this);if(t===i&&s<r&&r<s+this.howMany)throw new _e("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Tr(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=s&&this.targetPosition.path[o]<s+this.howMany)throw new _e("move-operation-node-into-itself",this)}}_execute(){w0(We._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,i){const s=dt.fromJSON(t.sourcePosition,i),r=dt.fromJSON(t.targetPosition,i);return new this(s,t.howMany,r,t.baseVersion)}}class Ks extends _o{constructor(t,i,s){super(s);$(this,"position");$(this,"nodes");$(this,"shouldReceiveAttributes");this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new Ag(VU(i)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new Ag([...this.nodes].map(s=>s._clone(!0))),i=new Ks(this.position,t,this.baseVersion);return i.shouldReceiveAttributes=this.shouldReceiveAttributes,i}getReversed(){const t=this.position.root.document.graveyard,i=new dt(t,[0]);return new ai(this.position,this.nodes.maxOffset,i,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new _e("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new Ag([...t].map(i=>i._clone(!0))),_3(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,i){const s=[];for(const o of t.nodes)o.name?s.push(es.fromJSON(o)):s.push(Wi.fromJSON(o));const r=new Ks(dt.fromJSON(t.position,i),s,t.baseVersion);return r.shouldReceiveAttributes=t.shouldReceiveAttributes,r}}class Ii extends _o{constructor(t,i,s,r,o){super(o);$(this,"splitPosition");$(this,"howMany");$(this,"insertionPosition");$(this,"graveyardPosition");this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=i,this.insertionPosition=s,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new dt(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new We(this.splitPosition,t)}get affectedSelectable(){const t=[We._createFromPositionAndShift(this.splitPosition,0),We._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(We._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new Ii(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,i=new dt(t,[0]);return new bs(this.moveTargetPosition,this.howMany,this.splitPosition,i,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,i=this.splitPosition.offset;if(!t||t.maxOffset<i)throw new _e("split-operation-position-invalid",this);if(t.parent){if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new _e("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new _e("split-operation-graveyard-position-invalid",this)}else throw new _e("split-operation-split-in-root",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)w0(We._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=t._clone();_3(this.insertionPosition,s)}const i=new We(dt._createAt(t,this.splitPosition.offset),dt._createAt(t,t.maxOffset));w0(i,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const i=t.path.slice(0,-1);return i[i.length-1]++,new dt(t.root,i,"toPrevious")}static fromJSON(t,i){const s=dt.fromJSON(t.splitPosition,i),r=dt.fromJSON(t.insertionPosition,i),o=t.graveyardPosition?dt.fromJSON(t.graveyardPosition,i):null;return new this(s,t.howMany,r,o,t.baseVersion)}}class bs extends _o{constructor(t,i,s,r,o){super(o);$(this,"sourcePosition");$(this,"howMany");$(this,"targetPosition");$(this,"graveyardPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=i,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new dt(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new We(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[We._createOn(t),We._createFromPositionAndShift(this.targetPosition,0),We._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new bs(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),i=this.sourcePosition.path.slice(0,-1),s=new dt(this.sourcePosition.root,i)._getTransformedByMergeOperation(this);return new Ii(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,i=this.targetPosition.parent;if(t.parent)if(i.parent){if(this.howMany!=t.maxOffset)throw new _e("merge-operation-how-many-invalid",this)}else throw new _e("merge-operation-target-position-invalid",this);else throw new _e("merge-operation-source-position-invalid",this)}_execute(){const t=this.sourcePosition.parent,i=We._createIn(t);w0(i,this.targetPosition),w0(We._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,i){const s=dt.fromJSON(t.sourcePosition,i),r=dt.fromJSON(t.targetPosition,i),o=dt.fromJSON(t.graveyardPosition,i);return new this(s,t.howMany,r,o,t.baseVersion)}}class Ir extends _o{constructor(t,i,s,r,o,a){super(a);$(this,"name");$(this,"oldRange");$(this,"newRange");$(this,"affectsData");$(this,"_markers");this.name=t,this.oldRange=i?i.clone():null,this.newRange=s?s.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new Ir(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Ir(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,i){return new Ir(t.name,t.oldRange?We.fromJSON(t.oldRange,i):null,t.newRange?We.fromJSON(t.newRange,i):null,i.model.markers,t.affectsData,t.baseVersion)}}class _s extends _o{constructor(t,i,s,r,o){super(o);$(this,"range");$(this,"key");$(this,"oldValue");$(this,"newValue");this.range=t.clone(),this.key=i,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new _s(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new _s(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new _e("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!ew(t.getAttribute(this.key),this.oldValue))throw new _e("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new _e("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){ew(this.oldValue,this.newValue)||r5e(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,i){return new _s(We.fromJSON(t.range,i),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Ms extends _o{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Ms(this.baseVersion)}getReversed(){return new Ms(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Qr extends _o{constructor(t,i,s,r){super(r);$(this,"position");$(this,"oldName");$(this,"newName");this.position=t,this.position.stickiness="toNext",this.oldName=i,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Qr(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Qr(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(t instanceof es){if(t.name!==this.oldName)throw new _e("rename-operation-wrong-name",this)}else throw new _e("rename-operation-wrong-position",this)}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,i){return new Qr(dt.fromJSON(t.position,i),t.oldName,t.newName,t.baseVersion)}}class _c extends _o{constructor(t,i,s,r,o){super(o);$(this,"root");$(this,"key");$(this,"oldValue");$(this,"newValue");this.root=t,this.key=i,this.oldValue=s===void 0?null:s,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new _c(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new _c(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new _e("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new _e("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new _e("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,i){if(!i.getRoot(t.root))throw new _e("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new _c(i.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class kl extends _o{constructor(t,i,s,r,o){super(o);$(this,"rootName");$(this,"elementName");$(this,"isAdd");$(this,"_document");if(this.rootName=t,this.elementName=i,this.isAdd=s,this._document=r,!this._document.getRoot(this.rootName)){const a=this._document.createRoot(this.elementName,this.rootName);a._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new kl(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new kl(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,i){return new kl(t.rootName,t.elementName,t.isAdd,i,t.baseVersion)}}const ia={};ia[_s.className]=_s;ia[Ks.className]=Ks;ia[Ir.className]=Ir;ia[ai.className]=ai;ia[Ms.className]=Ms;ia[_o.className]=_o;ia[Qr.className]=Qr;ia[_c.className]=_c;ia[kl.className]=kl;ia[Ii.className]=Ii;ia[bs.className]=bs;class o5e{static fromJSON(e,t){return ia[e.__className].fromJSON(e,t)}}const gC=new Map;function ei(n,e,t){let i=gC.get(n);i||(i=new Map,gC.set(n,i)),i.set(e,t)}function a5e(n,e){const t=gC.get(n);return t&&t.has(e)?t.get(e):l5e}function l5e(n){return[n]}function v$(n,e,t={}){const i=a5e(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(s){throw s}}function c5e(n,e,t){n=n.slice(),e=e.slice();const i=new d5e(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const s=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:s};const r=new WeakMap;for(const l of n)r.set(l,0);const o={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const l=n[a],c=r.get(l);if(c==e.length){a++;continue}const d=e[c],u=v$(l,d,i.getContext(l,d,!0)),h=v$(d,l,i.getContext(d,l,!1));i.updateRelation(l,d),i.setOriginalOperations(u,l),i.setOriginalOperations(h,d);for(const f of u)r.set(f,c+h.length);n.splice(a,1,...u),e.splice(c,1,...h)}return w$(n),w$(e),y$(n,o.nextBaseVersionB),y$(e,o.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:s}}class d5e{constructor(e,t,i=!1){$(this,"originalOperations");$(this,"_history");$(this,"_useRelations");$(this,"_forceWeakRemove");$(this,"_relations");this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,i||s)}updateRelation(e,t){if(e instanceof ai)t instanceof bs?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof ai&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof Ii){if(t instanceof bs)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof ai)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=We._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const s=i.end.offset-e.splitPosition.offset,r=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:s,offset:r})}}}else if(e instanceof bs)t instanceof bs?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof Ii?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof ai&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Ir){const i=e.newRange;if(!i)return;if(t instanceof bs){const s=i.start.isEqual(t.targetPosition),r=i.start.isEqual(t.deletionPosition),o=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(s||r||o||a)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),s=this._history.getUndoneOperation(i);if(!s)return null;const r=this.originalOperations.get(e),o=this._relations.get(r);return o&&o.get(s)||null}_setRelation(e,t,i){const s=this.originalOperations.get(e),r=this.originalOperations.get(t);let o=this._relations.get(s);o||(o=new Map,this._relations.set(s,o)),o.set(r,i)}}function y$(n,e){for(const t of n)t.baseVersion=e++}function w$(n){const e=new Map;for(let t=0;t<n.length;t++){const i=n[t];i instanceof Ir&&(i.baseVersion!==-1?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),n.splice(t,1),t--))}for(const{op:t,ranges:i}of e.values())i.length?t.newRange=We._createFromRanges(i):t.newRange=null}ei(_s,_s,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(r=>new _s(r,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(e.range);return s&&t.aIsStrong&&i.push(new _s(s,e.key,e.newValue,n.newValue,0)),i.length==0?[new Ms(0)]:i}else return[n]});ei(_s,Ks,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(s=>new _s(s,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const s=zU(e,n.key,n.oldValue);s&&i.unshift(s)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function zU(n,e,t){const s=n.nodes.getNode(0).getAttribute(e);if(s==t)return null;const r=new We(n.position,n.position.getShiftedBy(n.howMany));return new _s(r,e,s,t,0)}ei(_s,bs,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(We._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(s=>new _s(s,n.key,n.oldValue,n.newValue,n.baseVersion))});ei(_s,ai,(n,e)=>u5e(n.range,e).map(i=>new _s(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function u5e(n,e){const t=We._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,s=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(s=n.getDifference(t),i=n.getIntersection(t)):s=[n];const r=[];for(let o of s){o=o._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,e.howMany,l);r.push(...c)}return i&&r.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}ei(_s,Ii,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new We(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});ei(Ks,_s,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=zU(n,e.key,e.newValue);i&&t.push(i)}return t});ei(Ks,Ks,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));ei(Ks,ai,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));ei(Ks,Ii,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));ei(Ks,bs,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));ei(Ir,Ks,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));ei(Ir,Ir,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new Ms(0)];return[n]});ei(Ir,bs,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));ei(Ir,ai,(n,e)=>{const t=[n];if(n.oldRange&&(n.oldRange=We._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){const i=n.newRange._getTransformedByMoveOperation(e);n.newRange=i[0];for(let s=1;s<i.length;s++){const r=n.clone();r.oldRange=null,r.newRange=i[s],r.baseVersion=-1,t.push(r)}}return t});ei(Ir,Ii,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=dt._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?n.newRange.start=dt._createAt(e.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=dt._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=dt._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});ei(bs,Ks,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));ei(bs,bs,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new dt(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new Ms(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new ai(l,n.howMany,c,0)]}else return[new Ms(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});ei(bs,ai,(n,e,t)=>{const i=We._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new Ms(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});ei(bs,Ii,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});ei(ai,Ks,(n,e)=>{const i=We._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});ei(ai,ai,(n,e,t)=>{const i=We._createFromPositionAndShift(n.sourcePosition,n.howMany),s=We._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=t.aIsStrong,o=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?o=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(o=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&o?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),x$(n,e)&&x$(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(s,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Lf([i],a);if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Lf([i],a);const d=Tr(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(d=="prefix"||d=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Lf([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?r=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(r=!1);const u=[],h=i.getDifference(s);for(const m of h){m.start=m.start._getTransformedByDeletion(e.sourcePosition,e.howMany),m.end=m.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const g=Tr(m.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",b=m._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,g);u.push(...b)}const f=i.getIntersection(s);return f!==null&&r&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),u.length===0?u.push(f):u.length==1?s.start.isBefore(i.start)||s.start.isEqual(i.start)?u.unshift(f):u.push(f):u.splice(1,0,f)),u.length===0?[new Ms(n.baseVersion)]:Lf(u,a)});ei(ai,Ii,(n,e,t)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e));const s=We._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let a=new We(e.splitPosition,s.end);a=a._getTransformedBySplitOperation(e);const l=[new We(s.start,e.splitPosition),a];return Lf(l,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const o=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&o.push(We._createFromPositionAndShift(e.insertionPosition,1))}return Lf(o,i)});ei(ai,bs,(n,e,t)=>{const i=We._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const o=[];let a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);const c=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(o.push(new ai(n.sourcePosition,n.howMany-1,c,0)),a=a._getTransformedByMove(n.sourcePosition,c,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,c,n.howMany-1));const d=e.deletionPosition._getCombined(n.sourcePosition,c),u=new ai(a,1,d,0),h=u.getMovedRangeStart().path.slice();h.push(0);const f=new dt(u.targetPosition.root,h);l=l._getTransformedByMove(a,d,1);const m=new ai(l,e.howMany,f,0);return o.push(u),o.push(m),o}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new Ms(0)]}const r=We._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});ei(Qr,Ks,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));ei(Qr,bs,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));ei(Qr,ai,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));ei(Qr,Qr,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new Ms(0)];return[n]});ei(Qr,Ii,(n,e)=>{const t=n.position.path,i=e.splitPosition.getParentPath();if(Tr(t,i)=="same"&&!e.graveyardPosition){const s=new Qr(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,s]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});ei(_c,_c,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new Ms(0)];n.oldValue=e.newValue}return[n]});ei(kl,kl,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new Ms(0)]:[n]);ei(Ii,Ks,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));ei(Ii,bs,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const s=new dt(e.graveyardPosition.root,i),r=Ii.getInsertionPosition(new dt(e.graveyardPosition.root,i)),o=new Ii(s,0,r,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Ii.getInsertionPosition(n.splitPosition),n.graveyardPosition=o.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[o,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Ii.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});ei(Ii,ai,(n,e,t)=>{const i=We._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const r=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&r){const o=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new dt(a.root,l);return[new ai(o,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const s=n.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=Ii.getInsertionPosition(n.splitPosition),[n];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:r,offset:o}=t.abRelation;return n.howMany+=r,n.splitPosition=n.splitPosition.getShiftedBy(o),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const r=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=r,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=Ii.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=Ii.getInsertionPosition(n.splitPosition),[n]});ei(Ii,Ii,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new Ms(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new Ms(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=[];return e.howMany&&l.push(new ai(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new ai(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new Ms(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const s=new dt(e.insertionPosition.root,i),r=new ai(n.insertionPosition,1,s,0);return[n,r]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=Ii.getInsertionPosition(n.splitPosition),[n]});function x$(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function Lf(n,e){const t=[];for(let i=0;i<n.length;i++){const s=n[i],r=new ai(s.start,s.end.offset-s.start.offset,e,0);t.push(r);for(let o=i+1;o<n.length;o++)n[o]=n[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return t}class zr extends Ri(dt){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new _e("model-liveposition-root-not-rootelement",e);h5e.call(this)}detach(){this.stopListening()}toPosition(){return new dt(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}zr.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function h5e(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&f5e.call(this,t)},{priority:"low"})}function f5e(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}class rf{constructor(e={}){$(this,"operations");$(this,"isUndoable");$(this,"isLocal");$(this,"isUndo");$(this,"isTyping");typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},is("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:s=!1,isTyping:r=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=s,this.isTyping=r}get type(){return is("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}const Fg=class Fg{constructor(e){$(this,"_markerCollection");$(this,"_changesInElement",new Map);$(this,"_elementsSnapshots",new Map);$(this,"_elementChildrenSnapshots",new Map);$(this,"_elementState",new Map);$(this,"_changedMarkers",new Map);$(this,"_changedRoots",new Map);$(this,"_changeCount",0);$(this,"_cachedChanges",null);$(this,"_cachedChangesWithGraveyard",null);$(this,"_refreshedItems",new Set);this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const r=We._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=We._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(i)){const r=s.getData();this.bufferMarkerChange(s.name,r,r)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);const s=We._createFromPositionAndShift(t.splitPosition,t.howMany);for(const r of s.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1),this._setElementState(i,"move");const r=t.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,t.targetPosition.offset,i.maxOffset);const o=We._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let s=this._changedMarkers.get(e);s?s.newMarkerData=i:(s={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,s)),s.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,s=!e.range&&t.range,r=e.range&&t.range&&!e.range.isEqual(t.range);if(i||s||r)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const s=this._changesInElement.get(i).sort((d,u)=>d.offset===u.offset?d.type!=u.type?d.type=="remove"?-1:1:0:d.offset<u.offset?-1:1),r=this._elementChildrenSnapshots.get(i),o=k$(i.getChildren()),a=p5e(r.length,s);let l=0,c=0;for(const d of a)if(d==="i"){const u=this._getDiffActionForNode(o[l].node,"insert"),h=this._elementsSnapshots.get(o[l].node),f=this._getInsertDiff(i,l,u,o[l],h);t.push(f),l++}else if(d==="r"){const u=this._getDiffActionForNode(r[c].node,"remove"),h=this._getRemoveDiff(i,l,u,r[c]);t.push(h),c++}else if(d==="a"){const u=r[c].attributes,h=o[l].attributes;let f;if(o[l].name=="$text")f=new We(dt._createAt(i,l),dt._createAt(i,l+1));else{const g=i.offsetToIndex(l);f=new We(dt._createAt(i,l),dt._createAt(i.getChild(g),0))}const m=this._getAttributesDiff(f,u,h);t.push(...m),l++,c++}else l++,c++}t.sort((i,s)=>i.position.root!=s.position.root?i.position.root.rootName<s.position.root.rootName?-1:1:i.position.isEqual(s.position)?i.changeCount-s.changeCount:i.position.isBefore(s.position)?-1:1);for(let i=1,s=0;i<t.length;i++){const r=t[s],o=t[i],a=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),l=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,c=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;a||l||c?(r.length++,c&&(r.range.end=r.range.end.getShiftedBy(1)),t[i]=null):s=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(m5e),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=We._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const i=t.getData();this.bufferMarkerChange(t.name,{...i,range:null},i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,s){const r=this._changedRoots.get(e)||{name:e},o=r.attributes||{};if(o[t]){const a=o[t];s===a.oldValue?delete o[t]:a.newValue=s}else o[t]={oldValue:i,newValue:s};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(e)):(r.attributes=o,this._changedRoots.set(e,r))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_setElementState(e,t){if(!e.is("element"))return;const i=Fg._statesPriority.indexOf(this._elementState.get(e));Fg._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const i=this._elementState.get(e);return!i||i=="move"?t:i}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=k$(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const s=e.offset+e.howMany,r=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<r&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<r){const o=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:o-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(s<=i.offset)i.offset-=e.howMany;else if(s<=r)if(e.offset<i.offset){const o=s-i.offset;i.offset=e.offset,i.howMany-=o,e.nodesToHandle-=o}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<r){const o=r-e.offset;i.howMany-=o,e.nodesToHandle-=o}}if(i.type=="remove"&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const o=s-i.offset;i.offset=e.offset,i.howMany-=o}else if(e.offset<r)if(s<=r){const o=i.howMany;i.howMany=e.offset-i.offset;const a=o-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=r-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&s>i.offset){if(s>r){const o={type:"attribute",offset:r,howMany:s-r,count:this._changeCount++};this._handleChange(o,t),t.push(o)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<r&&(s>r?(e.nodesToHandle=s-r,e.offset=r):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&s>i.offset){const o={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(o,t),t.push(o),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&s<=r?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=r&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,s,r){const o={type:"insert",position:dt._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&r&&(o.before={name:r.name,attributes:new Map(r.attributes)}),o}_getRemoveDiff(e,t,i,s){return{type:"remove",action:i,position:dt._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const s=[];i=new Map(i);for(const[r,o]of t){const a=i.has(r)?i.get(r):null;a!==o&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(r)}for(const[r,o]of i)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),s=e.startOffset;if(i){for(const r of i)if(r.type=="insert"&&s>=r.offset&&s<r.offset+r.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const s=new We(dt._createAt(e,t),dt._createAt(e,t+i));for(const r of s.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}};$(Fg,"_statesPriority",[void 0,"refresh","rename","move"]);let bC=Fg;function _$(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function k$(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(_$(t));else e.push(_$(t));return e}function p5e(n,e){const t=[];let i=0,s=0;for(const r of e){if(r.offset>i){for(let o=0;o<r.offset-i;o++)t.push("e");s+=r.offset-i}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)t.push("i");i=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)t.push("r");i=r.offset,s+=r.howMany}else{if(r.howMany>1500)for(let o=0;o<r.howMany;o++)t.push("a");else t.push(..."a".repeat(r.howMany).split(""));i=r.offset+r.howMany,s+=r.howMany}}if(s<n)for(let r=0;r<n-s-i;r++)t.push("e");return t}function m5e(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class g5e{constructor(){$(this,"_operations",[]);$(this,"_undoPairs",new Map);$(this,"_undoneOperations",new Set);$(this,"_baseVersionToOperationIndex",new Map);$(this,"_version",0);$(this,"_gaps",new Map)}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new _e("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let s=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),s>a&&s<l&&(s=a-1);if(s<i.baseVersion||e>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(e);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(s);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class rw extends es{constructor(t,i,s="main"){super(i);$(this,"rootName");$(this,"_document");$(this,"_isAttached",!0);$(this,"_isLoaded",!0);this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}rw.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const E$="$graveyard";let b5e=class extends Ri(){constructor(t){super();$(this,"model");$(this,"history");$(this,"selection");$(this,"roots");$(this,"differ");$(this,"isReadOnly");$(this,"_postFixers");$(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=t,this.history=new g5e,this.selection=new Ma(this),this.roots=new Jd({idProperty:"rootName"}),this.differ=new bC(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",E$),this.listenTo(t,"applyOperation",(i,s)=>{const r=s[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(t,"applyOperation",(i,s)=>{const r=s[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(i,s,r,o,a)=>{const l={...s.getData(),range:o};this.differ.bufferMarkerChange(s.name,a,l),r===null&&s.on("change",(c,d)=>{const u=s.getData();this.differ.bufferMarkerChange(s.name,{...u,range:d},u)})}),this.registerPostFixer(i=>{let s=!1;for(const r of this.roots)!r.isAttached()&&!r.isEmpty&&(i.remove(i.createRangeIn(r)),s=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(i.removeMarker(r),s=!0);return s})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(E$)}createRoot(t="$root",i="main"){if(this.roots.get(i))throw new _e("model-document-createroot-name-exists",this,{name:i});const s=new rw(this,t,i);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(i=>i.rootName)}getRoots(t=!1){return this.roots.filter(i=>i!=this.graveyard&&(t||i.isAttached())&&i._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=AV(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),i=this.model,s=i.schema,r=i.createPositionFromPath(t,[0]);return s.getNearestSelectionRange(r)||i.createRange(r)}_validateSelectionRange(t){return t.start.isValid()&&t.end.isValid()&&T$(t.start)&&T$(t.end)}_callPostFixers(t){let i=!1;do for(const s of this._postFixers)if(this.selection.refresh(),i=s(t),i)break;while(i)}};function T$(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!f3(t,i)&&!p3(t,i)}return!0}class v5e extends Ri(){constructor(){super(...arguments);$(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(t){const i=t instanceof Tf?t.name:t;return this._markers.has(i)}get(t){return this._markers.get(t)||null}_set(t,i,s=!1,r=!1){const o=t instanceof Tf?t.name:t;if(o.includes(","))throw new _e("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const d=a.getData(),u=a.getRange();let h=!1;return u.isEqual(i)||(a._attachLiveRange(go.fromRange(i)),h=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,h=!0),typeof r=="boolean"&&r!=a.affectsData&&(a._affectsData=r,h=!0),h&&this.fire("update:".concat(o),a,u,i,d),a}const l=go.fromRange(i),c=new Tf(o,l,s,r);return this._markers.set(o,c),this.fire("update:".concat(o),c,null,i,{...c.getData(),range:null}),c}_remove(t){const i=t instanceof Tf?t.name:t,s=this._markers.get(i);return s?(this._markers.delete(i),this.fire("update:".concat(i),s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0):!1}_refresh(t){const i=t instanceof Tf?t.name:t,s=this._markers.get(i);if(!s)throw new _e("markercollection-refresh-marker-not-exists",this);const r=s.getRange();this.fire("update:".concat(i),s,r,r,s.getData())}*getMarkersAtPosition(t){for(const i of this)i.getRange().containsPosition(t)&&(yield i)}*getMarkersIntersectingRange(t){for(const i of this)i.getRange().getIntersection(t)!==null&&(yield i)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const i of this._markers.values())i.name.startsWith(t+":")&&(yield i)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class Tf extends Ri(eu){constructor(t,i,s,r){super();$(this,"name");$(this,"_managedUsingOperations");$(this,"_affectsData");$(this,"_liveRange");this.name=t,this._liveRange=this._attachLiveRange(i),this._managedUsingOperations=s,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new _e("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Tf.prototype.is=function(n){return n==="marker"||n==="model:marker"};class y5e extends _o{constructor(t,i){super(null);$(this,"sourcePosition");$(this,"howMany");this.sourcePosition=t.clone(),this.howMany=i}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new _e("detach-operation-on-document-node",this)}_execute(){BU(We._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class ac extends eu{constructor(t){super();$(this,"markers",new Map);$(this,"_children",new Ag);t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let i=this;for(const s of t)i=i.getChildAtOffset(s);return i}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const i of this._children)t.push(i.toJSON());return t}static fromJSON(t){const i=[];for(const s of t)s.name?i.push(es.fromJSON(s)):i.push(Wi.fromJSON(s));return new ac(i)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,i){const s=w5e(i);for(const r of s)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,i=1){const s=this._children._removeNodes(t,i);for(const r of s)r.parent=null;return s}}ac.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function w5e(n){return typeof n=="string"?[new Wi(n)]:(xo(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Wi(e):e instanceof _a?new Wi(e.data,e.getAttributes()):e))}class x5e{constructor(e,t){$(this,"model");$(this,"batch");this.model=e,this.batch=t}createText(e,t){return new Wi(e,t)}createElement(e,t){return new es(e,t)}createDocumentFragment(){return new ac}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof Wi&&e.data=="")return;const s=dt._createAt(t,i);if(e.parent)if(A$(e.root,s.root)){this.move(We._createOn(e),s);return}else{if(e.root.document)throw new _e("model-writer-insert-forbidden-move",this);this.remove(e)}const r=s.root.document?s.root.document.version:null,o=new Ks(s,e,r);if(e instanceof Wi&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),e instanceof ac)for(const[a,l]of e.markers){const c=dt._createAt(l.root,0),u={range:new We(l.start._getCombined(c,s),l.end._getCombined(c,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,u):this.addMarker(a,u)}}insertText(e,t,i,s){t instanceof ac||t instanceof es||t instanceof dt?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,s)}insertElement(e,t,i,s){t instanceof ac||t instanceof es||t instanceof dt?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof ac||t instanceof es?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof ac||t instanceof es?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof We){const s=i.getMinimalFlatRanges();for(const r of s)C$(this,e,t,r)}else S$(this,e,t,i)}setAttributes(e,t){for(const[i,s]of Hd(e))this.setAttribute(i,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof We){const i=t.getMinimalFlatRanges();for(const s of i)C$(this,e,null,s)}else S$(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const s of i.getAttributeKeys())this.removeAttribute(s,i)};if(!(e instanceof We))t(e);else for(const i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof We))throw new _e("writer-move-invalid-range",this);if(!e.isFlat)throw new _e("writer-move-range-not-flat",this);const s=dt._createAt(t,i);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!A$(e.root,s.root))throw new _e("writer-move-different-document",this);const r=e.root.document?e.root.document.version:null,o=new ai(e.start,e.end.offset-e.start.offset,s,r);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const i=(e instanceof We?e:We._createOn(e)).getMinimalFlatRanges().reverse();for(const s of i)this._addOperationForAffectedMarkers("move",s),_5e(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof es))throw new _e("writer-merge-no-element-before",this);if(!(i instanceof es))throw new _e("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(We._createIn(i),dt._createAt(t,"end")),this.remove(i)}_merge(e){const t=dt._createAt(e.nodeBefore,"end"),i=dt._createAt(e.nodeAfter,0),s=e.root.document.graveyard,r=new dt(s,[0]),o=e.root.document.version,a=new bs(i,e.nodeAfter.maxOffset,t,r,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof es))throw new _e("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,s=new Qr(dt._createBefore(e),e.name,t,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new _e("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new _e("writer-split-invalid-limit-element",this);let s,r;do{const o=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=Ii.getInsertionPosition(e),c=new Ii(e,a,l,null,o);this.batch.addOperation(c),this.model.applyOperation(c),!s&&!r&&(s=i,r=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new We(dt._createAt(s,"end"),dt._createAt(r,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new _e("writer-wrap-range-not-flat",this);const i=t instanceof es?t:new es(t);if(i.childCount>0)throw new _e("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new _e("writer-wrap-element-attached",this);this.insert(i,e.start);const s=new We(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,dt._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new _e("writer-unwrap-element-no-parent",this);this.move(We._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new _e("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,s=t.range,r=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new _e("writer-addmarker-marker-exists",this);if(!s)throw new _e("writer-addmarker-no-range",this);return i?(jm(this,e,null,s,r),this.model.markers.get(e)):this.model.markers._set(e,s,i,r)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,s=this.model.markers.get(i);if(!s)throw new _e("writer-updatemarker-marker-not-exists",this);if(!t){is("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(s);return}const r=typeof t.usingOperation=="boolean",o=typeof t.affectsData=="boolean",a=o?t.affectsData:s.affectsData;if(!r&&!t.range&&!o)throw new _e("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=t.range?t.range:l;if(r&&t.usingOperation!==s.managedUsingOperations){t.usingOperation?jm(this,i,null,c,a):(jm(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}s.managedUsingOperations?jm(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new _e("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}const s=i.getRange();jm(this,t,s,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new _e("writer-addroot-root-exists",this);const s=this.model.document,r=new kl(e,t,!0,s,s.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new _e("writer-detachroot-no-root",this);for(const r of this.model.markers)r.getRange().root===t&&this.removeMarker(r);for(const r of t.getAttributeKeys())this.removeAttribute(r,t);this.remove(this.createRangeIn(t));const i=this.model.document,s=new kl(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,s]of Hd(e))this._setSelectionAttribute(i,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=Ma._getStoreAttributeKey(e);this.setAttribute(s,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=Ma._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new _e("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let r=!1;if(e==="move"){const o=t;r=o.containsPosition(s.start)||o.start.isEqual(s.start)||o.containsPosition(s.end)||o.end.isEqual(s.end)}else{const o=t,a=o.nodeBefore,l=o.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,d=s.end.parent==l&&s.end.offset==0,u=s.end.nodeAfter==l,h=s.start.nodeAfter==l;r=c||d||u||h}r&&this.updateMarker(i.name,{range:s})}}}function C$(n,e,t,i){const s=n.model,r=s.document;let o=i.start,a,l,c;for(const u of i.getWalker({shallow:!0}))c=u.item.getAttribute(e),a&&l!=c&&(l!=t&&d(),o=a),a=u.nextPosition,l=c;a instanceof dt&&a!=o&&l!=t&&d();function d(){const u=new We(o,a),h=u.root.document?r.version:null,f=new _s(u,e,l,t,h);n.batch.addOperation(f),s.applyOperation(f)}}function S$(n,e,t,i){const s=n.model,r=s.document,o=i.getAttribute(e);let a,l;if(o!=t){if(i.root===i){const d=i.document?r.version:null;l=new _c(i,e,o,t,d)}else{a=new We(dt._createBefore(i),n.createPositionAfter(i));const d=a.root.document?r.version:null;l=new _s(a,e,o,t,d)}n.batch.addOperation(l),s.applyOperation(l)}}function jm(n,e,t,i,s){const r=n.model,o=r.document,a=new Ir(e,t,i,r.markers,!!s,o.version);n.batch.addOperation(a),r.applyOperation(a)}function _5e(n,e,t,i){let s;if(n.root.document){const r=i.document,o=new dt(r.graveyard,[0]);s=new ai(n,e,o,r.version)}else s=new y5e(n,e);t.addOperation(s),i.applyOperation(s)}function A$(n,e){return n===e||n instanceof rw&&e instanceof rw}function k5e(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const s=n.schema;n.change(r=>{if(!t.doNotResetEntireContent&&$5e(s,e)){R5e(r,e);return}const o={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(o,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=E5e(i);a.isTouching(l)||r.remove(r.createRange(a,l)),t.leaveUnmerged||(C5e(r,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),r)),WU(r,e,a),!t.doNotAutoparagraph&&I5e(s,a)&&GU(r,a,e,o),a.detach(),l.detach()})}function E5e(n){const e=n.root.document.model,t=n.start;let i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const s=T5e(i);if(s&&i.isTouching(e.createPositionAt(s,0))){const r=e.createSelection(n);e.modifySelection(r,{direction:"backward"});const o=r.getLastPosition(),a=e.createRange(o,i);e.hasContent(a,{ignoreMarkers:!0})||(i=o)}}return[zr.fromPosition(t,"toPrevious"),zr.fromPosition(i,"toNext")]}function T5e(n){const e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of i){if(t.isLimit(s))return null;if(t.isBlock(s))return s}}function C5e(n,e,t){const i=n.model;if(!k3(n.model.schema,e,t))return;const[s,r]=A5e(e,t);!s||!r||(!i.hasContent(s,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?jU(n,e,t,s.parent):HU(n,e,t,s.parent))}function HU(n,e,t,i){const s=e.parent,r=t.parent;if(!(s==i||r==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(r),t.isEqual(e)||n.insert(r,e),n.merge(e);t.parent.isEmpty;){const o=t.parent;t=n.createPositionBefore(o),n.remove(o)}k3(n.model.schema,e,t)&&HU(n,e,t,i)}}function jU(n,e,t,i){const s=e.parent,r=t.parent;if(!(s==i||r==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(r),t.isEqual(e)||n.insert(s,t);e.parent.isEmpty;){const o=e.parent;e=n.createPositionBefore(o),n.remove(o)}t=n.createPositionBefore(r),S5e(n,t),k3(n.model.schema,e,t)&&jU(n,e,t,i)}}function S5e(n,e){const t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function k3(n,e,t){const i=e.parent,s=t.parent;return i==s||n.isLimit(i)||n.isLimit(s)?!1:P5e(e,t,n)}function A5e(n,e){const t=n.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]&&t[s]==i[s];)s++;return[t[s],i[s]]}function I5e(n,e){const t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function P5e(n,e,t){const i=new We(n,e);for(const s of i.getWalker())if(t.isLimit(s.item))return!1;return!0}function GU(n,e,t,i={}){const s=n.createElement("paragraph");n.model.schema.setAllowedAttributes(s,i,n),n.insert(s,e),WU(n,t,n.createPositionAt(s,0))}function R5e(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),GU(n,n.createPositionAt(t,0),e)}function $5e(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function WU(n,e,t){e instanceof Ma?n.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function L5e(n,e){return n.change(t=>{const i=t.createDocumentFragment(),s=e.getFirstRange();if(!s||s.isCollapsed)return i;const r=s.start.root,o=s.start.getCommonPath(s.end),a=r.getNodeByPath(o);let l;s.start.parent==s.end.parent?l=s:l=t.createRange(t.createPositionAt(a,s.start.path[o.length]),t.createPositionAt(a,s.end.path[o.length]+1));const c=l.end.offset-l.start.offset;for(const d of l.getItems({shallow:!0}))d.is("$textProxy")?t.appendText(d.data,d.getAttributes(),i):t.append(t.cloneElement(d,!0),i);if(l!=s){const d=s._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],u=t.createRange(t.createPositionAt(i,0),d.start),h=t.createRange(d.end,t.createPositionAt(i,"end"));I$(h,t),I$(u,t)}return i})}function I$(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let s=i;for(;s.parent&&s.isEmpty;){const r=e.createRangeOn(s);s=s.parent,e.remove(r)}})}function O5e(n,e,t){return n.change(i=>{const s=t||n.document.selection;s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0});const r=new D5e(n,i,s.anchor),o=[];let a;if(e.is("documentFragment")){if(e.markers.size){const d=[];for(const[u,h]of e.markers){const{start:f,end:m}=h,g=f.isEqual(m);d.push({position:f,name:u,isCollapsed:g},{position:m,name:u,isCollapsed:g})}d.sort(({position:u},{position:h})=>u.isBefore(h)?1:-1);for(const{position:u,name:h,isCollapsed:f}of d){let m=null,g=null;const b=u.parent===e&&u.isAtStart,w=u.parent===e&&u.isAtEnd;!b&&!w?(m=i.createElement("$marker"),i.insert(m,u)):f&&(g=b?"start":"end"),o.push({name:h,element:m,collapsed:g})}}a=e.getChildren()}else a=[e];r.handleNodes(a);let l=r.getSelectionRange();if(e.is("documentFragment")&&o.length){const d=l?go.fromRange(l):null,u={};for(let h=o.length-1;h>=0;h--){const{name:f,element:m,collapsed:g}=o[h],b=!u[f];if(b&&(u[f]=[]),m){const w=i.createPositionAt(m,"before");u[f].push(w),i.remove(m)}else{const w=r.getAffectedRange();if(!w){g&&u[f].push(r.position);continue}g?u[f].push(w[g]):u[f].push(b?w.start:w.end)}}for(const[h,[f,m]]of Object.entries(u))f&&m&&f.root===m.root&&f.root.document&&!i.model.markers.has(h)&&i.addMarker(h,{usingOperation:!0,affectsData:!0,range:new We(f,m)});d&&(l=d.toRange(),d.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof Ma?i.setSelection(l):s.setTo(l));const c=r.getAffectedRange()||n.createRange(s.anchor);return r.destroy(),c})}class D5e{constructor(e,t,i){$(this,"model");$(this,"writer");$(this,"position");$(this,"canMergeWith");$(this,"schema");$(this,"_documentFragment");$(this,"_documentFragmentPosition");$(this,"_firstNode",null);$(this,"_lastNode",null);$(this,"_lastAutoParagraph",null);$(this,"_filterAttributesOf",[]);$(this,"_affectedStart",null);$(this,"_affectedEnd",null);$(this,"_nodeToSelect",null);this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new _e("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?We._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new We(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=zr.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new _e("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=zr.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=zr.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof es)||!this._canMergeLeft(e))return;const t=zr._createBefore(e);t.stickiness="toNext";const i=zr.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=zr._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=zr._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof es)||!this._canMergeRight(e))return;const t=zr._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new _e("insertcontent-invalid-insertion-position",this);this.position=dt._createAt(t.nodeBefore,"end");const i=zr.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=zr._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=zr._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof es&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof es&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function M5e(n,e,t,i={}){if(!n.schema.isObject(e))throw new _e("insertobject-element-not-an-object",n,{object:e});const s=t||n.document.selection;let r=s;i.findOptimalPosition&&n.schema.isBlock(e)&&(r=n.createSelection(n.schema.findOptimalInsertionRange(s,i.findOptimalPosition)));const o=zd(s.getSelectedBlocks()),a={};return o&&Object.assign(a,n.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),n.change(l=>{r.isCollapsed||n.deleteContent(r,{doNotAutoparagraph:!0});let c=e;const d=r.anchor.parent;!n.schema.checkChild(d,e)&&n.schema.checkChild(d,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);const u=n.insertContent(c,r);return u.isCollapsed||i.setSelection&&N5e(l,e,i.setSelection,a),u})}function N5e(n,e,t,i){const s=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new _e("insertobject-invalid-place-parameter-value",s);let r=e.nextSibling;if(s.schema.isInline(e)){n.setSelection(e,"after");return}!(r&&s.schema.checkChild(r,"$text"))&&s.schema.checkChild(e.parent,"paragraph")&&(r=n.createElement("paragraph"),s.schema.setAllowedAttributes(r,i,n),s.insertContent(r,n.createPositionAfter(e))),r&&n.setSelection(r,0)}const F5e=' ,.?!:;"-()';function B5e(n,e,t={}){const i=n.schema,s=t.direction!="backward",r=t.unit?t.unit:"character",o=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new mc({boundaries:H5e(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),c={walker:l,schema:i,isForward:s,unit:r,treatEmojiAsSingleUnit:o};let d;for(;d=l.next();){if(d.done)return;const u=V5e(c,d.value);if(u){e instanceof Ma?n.change(h=>{h.setSelectionFocus(u)}):e.setFocus(u);return}}}function V5e(n,e){const{isForward:t,walker:i,unit:s,schema:r,treatEmojiAsSingleUnit:o}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?z5e(i,t):U5e(i,s,o);if(a==(t?"elementStart":"elementEnd")){if(r.isSelectable(l))return dt._createAt(l,t?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(l)){i.skip(()=>!0);return}if(r.checkChild(c,"$text"))return c}}function U5e(n,e,t){const i=n.position.textNode;if(i){const s=i.data;let r=n.position.offset-i.startOffset;for(;f3(s,r)||e=="character"&&p3(s,r)||t&&iU(s,r);)n.next(),r=n.position.offset-i.startOffset}return n.position}function z5e(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const i=n.position.offset-t.startOffset;if(G5e(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(j5e(t.data,i,e))break;n.next()}}return n.position}function H5e(n,e){const t=n.root,i=dt._createAt(t,e?"end":0);return e?new We(n,i):new We(i,n)}function j5e(n,e,t){const i=e+(t?0:-1);return F5e.includes(n.charAt(i))}function G5e(n,e,t){return e===(t?n.offsetSize:0)}let W5e=class extends gs(){constructor(){super();$(this,"markers");$(this,"document");$(this,"schema");$(this,"_pendingChanges");$(this,"_currentWriter");this.markers=new v5e,this.document=new b5e(this),this.schema=new O3e,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,i)=>{i[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),T3e(this),this.document.registerPostFixer($U),this.on("insertContent",(t,[i,s])=>{t.return=O5e(this,i,s)}),this.on("insertObject",(t,[i,s,r])=>{t.return=M5e(this,i,s,r)}),this.on("canEditAt",t=>{const i=!this.document.isReadOnly;t.return=i,i||t.stop()})}change(t){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new rf,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(i){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(i,this)}}enqueueChange(t,i){try{t?typeof t=="function"?(i=t,t=new rf):t instanceof rf||(t=new rf(t)):t=new rf,this._pendingChanges.push({batch:t,callback:i}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(s){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(s,this)}}applyOperation(t){t._execute()}insertContent(t,i,s,...r){const o=Ak(i,s);return this.fire("insertContent",[t,o,s,...r])}insertObject(t,i,s,r,...o){const a=Ak(i,s);return this.fire("insertObject",[t,a,r,r,...o])}deleteContent(t,i){k5e(this,t,i)}modifySelection(t,i){B5e(this,t,i)}getSelectedContent(t){return L5e(this,t)}hasContent(t,i={}){const s=t instanceof We?t:We._createIn(t);if(s.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=i;if(!o){for(const a of this.markers.getMarkersIntersectingRange(s))if(a.affectsData)return!0}for(const a of s.getItems())if(this.schema.isContent(a))if(a.is("$textProxy"))if(r){if(a.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(t){const i=Ak(t);return this.fire("canEditAt",[i])}createPositionFromPath(t,i,s){return new dt(t,i,s)}createPositionAt(t,i){return dt._createAt(t,i)}createPositionAfter(t){return dt._createAfter(t)}createPositionBefore(t){return dt._createBefore(t)}createRange(t,i){return new We(t,i)}createRangeIn(t){return We._createIn(t)}createRangeOn(t){return We._createOn(t)}createSelection(...t){return new po(...t)}createBatch(t){return new rf(t)}createOperationFromJSON(t){return o5e.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const i=this._pendingChanges[0].batch;this._currentWriter=new x5e(this,i);const s=this._pendingChanges[0].callback(this._currentWriter);t.push(s),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}};function Ak(n,e){if(n)return n instanceof po||n instanceof Ma?n:n instanceof Lh?e||e===0?new po(n,e):n.is("rootElement")?new po(n,"in"):new po(n,"on"):new po(n)}class qU extends am{constructor(){super(...arguments);$(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(t){this.fire(t.type,t)}}class q5e{constructor(e){$(this,"document");this.document=e}createDocumentFragment(e){return new ih(this.document,e)}createElement(e,t,i){return new Da(this.document,e,t,i)}createText(e){return new Ki(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const s=i.getChildIndex(e);return this.removeChildren(s,1,i),this.insertChild(s,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new Da(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Wr(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return $t._createAt(e,t)}createPositionAfter(e){return $t._createAfter(e)}createPositionBefore(e){return $t._createBefore(e)}createRange(e,t){return new Rn(e,t)}createRangeOn(e){return Rn._createOn(e)}createRangeIn(e){return Rn._createIn(e)}createSelection(...e){return new xc(...e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KU{constructor(e){$(this,"crashes",[]);$(this,"state","initializing");$(this,"_crashNumberLimit");$(this,"_now",Date.now);$(this,"_minimumNonErrorTimePeriod");$(this,"_boundErrorHandler");$(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){const i=this._listeners[e]||[];for(const s of i)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vC(n,e=new Set){const t=[n],i=new Set;let s=0;for(;t.length>s;){const r=t[s++];if(!(i.has(r)||!K5e(r)||e.has(r)))if(i.add(r),Symbol.iterator in r)try{for(const o of r)t.push(o)}catch(o){}else for(const o in r)o!=="defaultValue"&&t.push(r[o])}return i}function K5e(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function YU(n,e,t=new Set){if(n===e&&Y5e(n))return!0;const i=vC(n,t),s=vC(e,t);for(const r of i)if(s.has(r))return!0;return!1}function Y5e(n){return typeof n=="object"&&n!==null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XU extends KU{constructor(t,i={}){super(i);$(this,"_editor",null);$(this,"_lifecyclePromise",null);$(this,"_throttledSave");$(this,"_data");$(this,"_lastDocumentVersion");$(this,"_elementOrData");$(this,"_initUsingData",!0);$(this,"_editables",{});$(this,"_config");$(this,"_excludedProps");this._throttledSave=p0(this._save.bind(this),typeof i.saveInterval=="number"?i.saveInterval:5e3),t&&(this._creator=(s,r)=>t.create(s,r)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},i=[],s=this._config.rootsAttributes||{},r={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(t[a]="",r[a]=s[a]||{}):i.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:i,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(X5e),this._initUsingData?this.create(t,o,o.context):Ac(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,i=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData=typeof t=="string"||Object.keys(t).length>0&&typeof Object.values(t)[0]=="string",this._config=this._cloneEditorConfiguration(i)||{},this._config.context=s,this._creator(t,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(i){console.error(i,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,i=t.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=t,r=s.has("CommentsRepository")&&s.get("CommentsRepository"),o=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};i.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of t.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return r&&(a.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const t={};for(const i of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(i);s&&(t[i]=s)}return t}_isErrorComingFromThisItem(t){return YU(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return r3(t,(i,s)=>{if(Ac(i)||s==="context")return i})}}class X5e{constructor(e){$(this,"editor");$(this,"_data");this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const i=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)i._appendChild(this._createNode(e,s));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:s,attributes:r}])=>{const o=JSON.parse(s),a=JSON.parse(r),l=t.model.document.getRoot(i);for(const[c,d]of a)e.setAttribute(c,d,l);for(const c of o){const d=this._createNode(e,c);e.insert(d,l,"end")}}),Object.entries(this._data.markers).forEach(([i,s])=>{const{document:r}=t.model,{rangeJSON:{start:o,end:a},...l}=s,c=r.getRoot(o.root),d=e.createPositionFromPath(c,o.path,o.stickiness),u=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(d,u);e.addMarker(i,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{const s=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(i.threadId)&&r.getCommentThread(i.threadId).remove(),r.addCommentThread({channelId:s,...i})}),t.forEach(i=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(i.id)){const r=s.getSuggestion(i.id);r.attributes=i.attributes}else s.addSuggestionData(i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rg=Symbol("MainQueueId");class Q5e extends KU{constructor(t,i={}){super(i);$(this,"_watchdogs",new Map);$(this,"_watchdogConfig");$(this,"_context",null);$(this,"_contextProps",new Set);$(this,"_actionQueues",new Z5e);$(this,"_contextConfig");$(this,"_item");this._watchdogConfig=i,this._creator=s=>t.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(Rg,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const i=P$(t);return Promise.all(i.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(s.id))throw new Error("Item with the given id is already added: '".concat(s.id,"'."));if(s.type==="editor")return r=new XU(null,this._watchdogConfig),r.setCreator(s.creator),r._setExcludedProperties(this._contextProps),s.destructor&&r.setDestructor(s.destructor),this._watchdogs.set(s.id,r),r.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(c=>{const d=()=>{r.off("restart",d),this._fire("itemRestart",{itemId:s.id}),c()};r.on("restart",d)}))}),r.create(s.sourceElementOrData,s.config,this._context);throw new Error("Not supported item type: '".concat(s.type,"'."))})))}remove(t){const i=P$(t);return Promise.all(i.map(s=>this._actionQueues.enqueue(s,()=>{const r=this._getWatchdog(s);return this._watchdogs.delete(s),r.destroy()})))}destroy(){return this._actionQueues.enqueue(Rg,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Rg,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=vC(this._context),Promise.all(Array.from(this._watchdogs.values()).map(i=>(i._setExcludedProperties(this._contextProps),i.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(i=>i.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const i=this._watchdogs.get(t);if(!i)throw new Error("Item with the given id was not registered: ".concat(t,"."));return i}_isErrorComingFromThisItem(t){for(const i of this._watchdogs.values())if(i._isErrorComingFromThisItem(t))return!1;return YU(this._context,t.context)}}class Z5e{constructor(){$(this,"_onEmptyCallbacks",[]);$(this,"_queues",new Map);$(this,"_activeActions",0)}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const i=e===Rg;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Rg),this._queues.get(e)])).then(t),o=r.catch(()=>{});return this._queues.set(e,o),r.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function P$(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tn extends gs(){constructor(t){super();$(this,"editor");$(this,"_disableStack",new Set);this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",R$,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",R$),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function R$(n){n.return=!1,n.stop()}class Ml extends gs(){constructor(t){super();$(this,"editor");$(this,"_isEnabledBasedOnSelection");$(this,"_affectsData");$(this,"_disableStack");this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",i=>{if(!this.affectsData)return;const s=t.model.document.selection,o=!(s.getFirstPosition().root.rootName=="$graveyard")&&t.model.canEditAt(s);(t.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(i.return=!1,i.stop())},{priority:"highest"}),this.on("execute",i=>{this.isEnabled||i.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",$$,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",$$),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function $$(n){n.return=!1,n.stop()}class QU extends Ri(){constructor(t,i=[],s=[]){super();$(this,"_context");$(this,"_plugins",new Map);$(this,"_availablePlugins");$(this,"_contextPlugins");this._context=t,this._availablePlugins=new Map;for(const r of i)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of s)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const t of this._plugins)typeof t[0]=="function"&&(yield t)}get(t){const i=this._plugins.get(t);if(!i){let s=t;throw typeof t=="function"&&(s=t.pluginName||t.name),new _e("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return i}has(t){return this._plugins.has(t)}init(t,i=[],s=[]){const r=this,o=this._context;m(t),b(t);const a=t.filter(C=>!h(C,i)),l=[...g(a)];P(l,s);const c=E(l);return T(c,"init").then(()=>T(c,"afterInit")).then(()=>c);function d(C){return typeof C=="function"}function u(C){return d(C)&&!!C.isContextPlugin}function h(C,A){return A.some(R=>R===C||f(C)===R||f(R)===C)}function f(C){return d(C)?C.pluginName||C.name:C}function m(C,A=new Set){C.forEach(R=>{d(R)&&(A.has(R)||(A.add(R),R.pluginName&&!r._availablePlugins.has(R.pluginName)&&r._availablePlugins.set(R.pluginName,R),R.requires&&m(R.requires,A)))})}function g(C,A=new Set){return C.map(R=>d(R)?R:r._availablePlugins.get(R)).reduce((R,M)=>A.has(M)?R:(A.add(M),M.requires&&(b(M.requires,M),g(M.requires,A).forEach(N=>R.add(N))),R.add(M)),new Set)}function b(C,A=null){C.map(R=>d(R)?R:r._availablePlugins.get(R)||R).forEach(R=>{w(R,A),x(R,A),k(R,A)})}function w(C,A){if(!d(C))throw A?new _e("plugincollection-soft-required",o,{missingPlugin:C,requiredBy:f(A)}):new _e("plugincollection-plugin-not-found",o,{plugin:C})}function x(C,A){if(u(A)&&!u(C))throw new _e("plugincollection-context-required",o,{plugin:f(C),requiredBy:f(A)})}function k(C,A){if(A&&h(C,i))throw new _e("plugincollection-required",o,{plugin:f(C),requiredBy:f(A)})}function E(C){return C.map(A=>{let R=r._contextPlugins.get(A);return R=R||new A(o),r._add(A,R),R})}function T(C,A){return C.reduce((R,M)=>!M[A]||r._contextPlugins.has(M)?R:R.then(M[A].bind(M)),Promise.resolve())}function P(C,A){for(const R of A){if(typeof R!="function")throw new _e("plugincollection-replace-plugin-invalid-type",null,{pluginItem:R});const M=R.pluginName;if(!M)throw new _e("plugincollection-replace-plugin-missing-name",null,{pluginItem:R});if(R.requires&&R.requires.length)throw new _e("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:M});const N=r._availablePlugins.get(M);if(!N)throw new _e("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:M});const U=C.indexOf(N);if(U===-1){if(r._contextPlugins.has(N))return;throw new _e("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:M})}if(N.requires&&N.requires.length)throw new _e("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:M});C.splice(U,1,R),r._availablePlugins.set(M,R)}}}destroy(){const t=[];for(const[,i]of this)typeof i.destroy=="function"&&!this._contextPlugins.has(i)&&t.push(i.destroy());return Promise.all(t)}_add(t,i){this._plugins.set(t,i);const s=t.pluginName;if(s){if(this._plugins.has(s))throw new _e("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:t});this._plugins.set(s,i)}}}class ow{constructor(e){$(this,"config");$(this,"plugins");$(this,"locale");$(this,"t");$(this,"editors");$(this,"_contextOwner",null);const{translations:t,...i}=e||{};this.config=new zV(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new QU(this,s);const r=this.config.get("language")||{};this.locale=new lSe({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Jd}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new _e("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new _e("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new _e("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}}$(ow,"defaultConfig"),$(ow,"builtinPlugins");class J5e{constructor(){$(this,"_commands");this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new _e("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class e4e extends Dl{constructor(t){super();$(this,"editor");this.editor=t}set(t,i,s={}){if(typeof i=="string"){const r=i;i=(o,a)=>{this.editor.execute(r),a()}}super.set(t,i,s)}}const Ik="contentEditing",L$="common";class t4e{constructor(e){$(this,"keystrokeInfos",new Map);$(this,"_editor");this._editor=e;const t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:Ik,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:s}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:L$}),s&&s.forEach(r=>{this.addKeystrokeInfoGroup({categoryId:e,...r})})}addKeystrokeInfoGroup({categoryId:e=Ik,id:t,label:i,keystrokes:s}){const r=this.keystrokeInfos.get(e);if(!r)throw new _e("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});r.groups.set(t,{id:t,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=Ik,groupId:t=L$,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new _e("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const s=this.keystrokeInfos.get(e);if(!s.groups.has(t))throw new _e("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});s.groups.get(t).keystrokes.push(...i)}}class Cf extends gs(){constructor(t={}){super();$(this,"accessibility");$(this,"commands");$(this,"config");$(this,"conversion");$(this,"data");$(this,"editing");$(this,"locale");$(this,"model");$(this,"plugins");$(this,"keystrokes");$(this,"t");$(this,"_context");$(this,"_readOnlyLocks");if("sanitizeHtml"in t)throw new _e("editor-config-sanitizehtml-not-supported");const i=this.constructor,{translations:s,...r}=i.defaultConfig||{},{translations:o=s,...a}=t,l=t.language||r.language;this._context=t.context||new ow({language:l,translations:o}),this._context._addEditor(this,!t.context);const c=Array.from(i.builtinPlugins||[]);this.config=new zV(a,r),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new QU(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new J5e,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new W5e,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const d=new $Se;this.data=new n5e(this.model,d),this.editing=new R3e(this.model,d),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new s5e([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new e4e(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new t4e(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new _e("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new _e("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new _e("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,i=t.get("plugins"),s=t.get("removePlugins")||[],r=t.get("extraPlugins")||[],o=t.get("substitutePlugins")||[];return this.plugins.init(i.concat(r),s,o)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(i=>this.once("ready",i))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...i){try{return this.commands.execute(t,...i)}catch(s){/* istanbul ignore next -- @preserve */_e.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}}$(Cf,"defaultConfig"),$(Cf,"builtinPlugins"),$(Cf,"Context",ow),$(Cf,"EditorWatchdog",XU),$(Cf,"ContextWatchdog",Q5e);function n4e(n){if(!fh(n.updateSourceElement))throw new _e("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(i4e(e)&&e.form){let t;const i=e.form,s=()=>n.updateSourceElement();fh(i.submit)&&(t=i.submit,i.submit=()=>{s(),t.apply(i)}),i.addEventListener("submit",s),n.on("destroy",()=>{i.removeEventListener("submit",s),t&&(i.submit=t)})}}function i4e(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function yC(n){class e extends n{constructor(){super(...arguments);$(this,"sourceElement")}updateSourceElement(s){if(!this.sourceElement)throw new _e("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){D8(this.sourceElement,"");return}const a=typeof s=="string"?s:this.data.get();D8(this.sourceElement,a)}}return e}yC.updateSourceElement=yC(Object).prototype.updateSourceElement;var s4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',r4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',o4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',a4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',l4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',c4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',d4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',u4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',h4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',f4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',p4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',m4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',g4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',b4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',v4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',y4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',w4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',x4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',_4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',k4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',E4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',T4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',C4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',S4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',A4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',I4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',P4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',R4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',$4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',L4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',O4e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',D4e='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',M4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',N4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',F4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',B4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',V4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',U4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',z4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',H4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',j4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',G4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',W4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',q4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',K4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Y4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',X4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Q4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',Z4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',J4e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',eIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',tIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',nIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',iIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',sIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',rIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',oIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',aIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',lIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',cIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',dIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',uIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',hIe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>';const Ss={bold:j4e,cancel:s4e,caption:r4e,check:o4e,cog:a4e,colorPalette:l4e,eraser:c4e,history:d4e,image:g4e,imageUpload:b4e,imageAssetManager:v4e,imageUrl:y4e,lowVision:u4e,textAlternative:h4e,loupe:f4e,previousArrow:p4e,nextArrow:m4e,importExport:K4e,paragraph:G4e,plus:W4e,text:q4e,alignBottom:w4e,alignMiddle:x4e,alignTop:_4e,alignLeft:k4e,alignCenter:E4e,alignRight:T4e,alignJustify:C4e,objectLeft:$4e,objectCenter:A4e,objectRight:L4e,objectFullWidth:P4e,objectInline:R4e,objectBlockLeft:S4e,objectBlockRight:I4e,objectSizeCustom:D4e,objectSizeFull:O4e,objectSizeLarge:M4e,objectSizeSmall:N4e,objectSizeMedium:F4e,pencil:B4e,pilcrow:V4e,quote:U4e,threeVerticalDots:z4e,dragIndicator:H4e,redo:Y4e,undo:X4e,bulletedList:Q4e,numberedList:Z4e,todoList:J4e,codeBlock:eIe,browseFiles:tIe,heading1:nIe,heading2:iIe,heading3:sIe,heading4:rIe,heading5:oIe,heading6:aIe,horizontalLine:lIe,html:cIe,indent:dIe,outdent:uIe,table:hIe};var fIe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const k0=fIe,ZU={};for(const n of Object.keys(k0))ZU[k0[n]]=n;const zt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var JU=zt;for(const n of Object.keys(zt)){if(!("channels"in zt[n]))throw new Error("missing channels property: "+n);if(!("labels"in zt[n]))throw new Error("missing channel labels property: "+n);if(zt[n].labels.length!==zt[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=zt[n];delete zt[n].channels,delete zt[n].labels,Object.defineProperty(zt[n],"channels",{value:e}),Object.defineProperty(zt[n],"labels",{value:t})}zt.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=r-s;let a,l;r===s?a=0:e===r?a=(t-i)/o:t===r?a=2+(i-e)/o:i===r&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(s+r)/2;return r===s?l=0:c<=.5?l=o/(r+s):l=o/(2-r-s),[a,l*100,c*100]};zt.rgb.hsv=function(n){let e,t,i,s,r;const o=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(o,a,l),d=c-Math.min(o,a,l),u=function(h){return(c-h)/6/d+1/2};return d===0?(s=0,r=0):(r=d/c,e=u(o),t=u(a),i=u(l),o===c?s=i-t:a===c?s=1/3+e-i:l===c&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[s*360,r*100,c*100]};zt.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const s=zt.rgb.hsl(n)[0],r=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[s,r*100,i*100]};zt.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(1-e,1-t,1-i),r=(1-e-s)/(1-s)||0,o=(1-t-s)/(1-s)||0,a=(1-i-s)/(1-s)||0;return[r*100,o*100,a*100,s*100]};function pIe(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}zt.rgb.keyword=function(n){const e=ZU[n];if(e)return e;let t=1/0,i;for(const s of Object.keys(k0)){const r=k0[s],o=pIe(n,r);o<t&&(t=o,i=s)}return i};zt.keyword.rgb=function(n){return k0[n]};zt.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const s=e*.4124+t*.3576+i*.1805,r=e*.2126+t*.7152+i*.0722,o=e*.0193+t*.1192+i*.9505;return[s*100,r*100,o*100]};zt.rgb.lab=function(n){const e=zt.rgb.xyz(n);let t=e[0],i=e[1],s=e[2];t/=95.047,i/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const r=116*i-16,o=500*(t-i),a=200*(i-s);return[r,o,a]};zt.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let s,r,o;if(t===0)return o=i*255,[o,o,o];i<.5?s=i*(1+t):s=i+t-i*t;const a=2*i-s,l=[0,0,0];for(let c=0;c<3;c++)r=e+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};zt.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,s=t;const r=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,s*=r<=1?r:2-r;const o=(i+t)/2,a=i===0?2*s/(r+s):2*t/(i+t);return[e,a*100,o*100]};zt.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const s=Math.floor(e)%6,r=e-Math.floor(e),o=255*i*(1-t),a=255*i*(1-t*r),l=255*i*(1-t*(1-r));switch(i*=255,s){case 0:return[i,l,o];case 1:return[a,i,o];case 2:return[o,i,l];case 3:return[o,a,i];case 4:return[l,o,i];case 5:return[i,o,a]}};zt.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,s=Math.max(i,.01);let r,o;o=(2-t)*i;const a=(2-t)*s;return r=t*s,r/=a<=1?a:2-a,r=r||0,o/=2,[e,r*100,o*100]};zt.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const s=t+i;let r;s>1&&(t/=s,i/=s);const o=Math.floor(6*e),a=1-i;r=6*e-o,o&1&&(r=1-r);const l=t+r*(a-t);let c,d,u;switch(o){default:case 6:case 0:c=a,d=l,u=t;break;case 1:c=l,d=a,u=t;break;case 2:c=t,d=a,u=l;break;case 3:c=t,d=l,u=a;break;case 4:c=l,d=t,u=a;break;case 5:c=a,d=t,u=l;break}return[c*255,d*255,u*255]};zt.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,s=n[3]/100,r=1-Math.min(1,e*(1-s)+s),o=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,i*(1-s)+s);return[r*255,o*255,a*255]};zt.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let s,r,o;return s=e*3.2406+t*-1.5372+i*-.4986,r=e*-.9689+t*1.8758+i*.0415,o=e*.0557+t*-.204+i*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=Math.min(Math.max(0,s),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[s*255,r*255,o*255]};zt.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*t-16,r=500*(e-t),o=200*(t-i);return[s,r,o]};zt.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let s,r,o;r=(e+16)/116,s=t/500+r,o=r-i/200;const a=r**3,l=s**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,s=l>.008856?l:(s-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,s*=95.047,r*=100,o*=108.883,[s,r,o]};zt.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let s;s=Math.atan2(i,t)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(t*t+i*i);return[e,o,s]};zt.lch.lab=function(n){const e=n[0],t=n[1],s=n[2]/360*2*Math.PI,r=t*Math.cos(s),o=t*Math.sin(s);return[e,r,o]};zt.rgb.ansi16=function(n,e=null){const[t,i,s]=n;let r=e===null?zt.rgb.hsv(n)[2]:e;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return r===2&&(o+=60),o};zt.hsv.ansi16=function(n){return zt.rgb.ansi16(zt.hsv.rgb(n),n[2])};zt.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};zt.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(n>50)+1)*.5,i=(e&1)*t*255,s=(e>>1&1)*t*255,r=(e>>2&1)*t*255;return[i,s,r]};zt.ansi256.rgb=function(n){if(n>=232){const r=(n-232)*10+8;return[r,r,r]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,s=e%6/5*255;return[t,i,s]};zt.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};zt.hex.rgb=function(n){const e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));const i=parseInt(t,16),s=i>>16&255,r=i>>8&255,o=i&255;return[s,r,o]};zt.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.max(Math.max(e,t),i),r=Math.min(Math.min(e,t),i),o=s-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:s===e?l=(t-i)/o%6:s===t?l=2+(i-e)/o:l=4+(e-t)/o,l/=6,l%=1,[l*360,o*100,a*100]};zt.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let s=0;return i<1&&(s=(t-.5*i)/(1-i)),[n[0],i*100,s*100]};zt.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let s=0;return i<1&&(s=(t-i)/(1-i)),[n[0],i*100,s*100]};zt.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const s=[0,0,0],r=e%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:s[0]=1,s[1]=o,s[2]=0;break;case 1:s[0]=a,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=o;break;case 3:s[0]=0,s[1]=a,s[2]=1;break;case 4:s[0]=o,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=a}return l=(1-t)*i,[(t*s[0]+l)*255,(t*s[1]+l)*255,(t*s[2]+l)*255]};zt.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let s=0;return i>0&&(s=e/i),[n[0],s*100,i*100]};zt.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let s=0;return i>0&&i<.5?s=e/(2*i):i>=.5&&i<1&&(s=e/(2*(1-i))),[n[0],s*100,i*100]};zt.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};zt.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,s=i-e;let r=0;return s<1&&(r=(i-s)/(1-s)),[n[0],s*100,r*100]};zt.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};zt.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};zt.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};zt.gray.hsl=function(n){return[0,0,n[0]]};zt.gray.hsv=zt.gray.hsl;zt.gray.hwb=function(n){return[0,100,n[0]]};zt.gray.cmyk=function(n){return[0,0,0,n[0]]};zt.gray.lab=function(n){return[n[0],0,0]};zt.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};zt.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const aw=JU;function mIe(){const n={},e=Object.keys(aw);for(let t=e.length,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function gIe(n){const e=mIe(),t=[n];for(e[n].distance=0;t.length;){const i=t.pop(),s=Object.keys(aw[i]);for(let r=s.length,o=0;o<r;o++){const a=s[o],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,t.unshift(a))}}return e}function bIe(n,e){return function(t){return e(n(t))}}function vIe(n,e){const t=[e[n].parent,n];let i=aw[e[n].parent][n],s=e[n].parent;for(;e[s].parent;)t.unshift(e[s].parent),i=bIe(aw[e[s].parent][s],i),s=e[s].parent;return i.conversion=t,i}var yIe=function(n){const e=gIe(n),t={},i=Object.keys(e);for(let s=i.length,r=0;r<s;r++){const o=i[r];e[o].parent!==null&&(t[o]=vIe(o,e))}return t};const wC=JU,wIe=yIe,Gm={},xIe=Object.keys(wC);function _Ie(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function kIe(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const s=n(t);if(typeof s=="object")for(let r=s.length,o=0;o<r;o++)s[o]=Math.round(s[o]);return s};return"conversion"in n&&(e.conversion=n.conversion),e}xIe.forEach(n=>{Gm[n]={},Object.defineProperty(Gm[n],"channels",{value:wC[n].channels}),Object.defineProperty(Gm[n],"labels",{value:wC[n].labels});const e=wIe(n);Object.keys(e).forEach(i=>{const s=e[i];Gm[n][i]=kIe(s),Gm[n][i].raw=_Ie(s)})});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oh extends Jd{constructor(t=[]){super(t,{idProperty:"viewUid"});$(this,"_parentElement");this.on("add",(i,s,r)=>{this._renderViewIntoCollectionParent(s,r)}),this.on("remove",(i,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const i of this)this._renderViewIntoCollectionParent(i)}delegate(...t){if(!t.length||!EIe(t))throw new _e("ui-viewcollection-delegate-wrong-events",this);return{to:i=>{for(const s of this)for(const r of t)s.delegate(r).to(i);this.on("add",(s,r)=>{for(const o of t)r.delegate(o).to(i)}),this.on("remove",(s,r)=>{for(const o of t)r.stopDelegating(o,i)})}}}_renderViewIntoCollectionParent(t,i){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[i])}remove(t){return super.remove(t)}}function EIe(n){return n.every(e=>typeof e=="string")}const TIe="http://www.w3.org/1999/xhtml";class Sa extends Ri(){constructor(t){super();$(this,"ns");$(this,"tag");$(this,"text");$(this,"attributes");$(this,"children");$(this,"eventListeners");$(this,"_isRendered");$(this,"_revertData");Object.assign(this,D$(O$(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=F$(),this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new _e("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(i){if(i.children)for(const s of i.children)lw(s)?yield s:E3(s)&&(yield*t(s))}yield*t(this)}static bind(t,i){return{to(s,r){return new CIe({eventNameOrFunction:s,attribute:s,observable:t,emitter:i,callback:r})},if(s,r,o){return new ez({observable:t,emitter:i,attribute:s,valueIfTrue:r,callback:o})}}}static extend(t,i){if(t._isRendered)throw new _e("template-extend-render",[this,t]);sz(t,D$(O$(i)))}_renderNode(t){let i;if(t.node?i=this.tag&&this.text:i=this.tag?this.text:!this.text,i)throw new _e("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let i=t.node;return i||(i=t.node=document.createElementNS(this.ns||TIe,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),i}_renderText(t){let i=t.node;return i?t.revertData.text=i.textContent:i=t.node=document.createTextNode(""),jv(this.text)?this._bindToObservable({schema:this.text,updater:AIe(i),data:t}):i.textContent=this.text.join(""),i}_renderAttributes(t){if(!this.attributes)return;const i=t.node,s=t.revertData;for(const r in this.attributes){const o=i.getAttribute(r),a=this.attributes[r];s&&(s.attributes[r]=o);const l=N$(a)?a[0].ns:null;if(jv(a)){const c=N$(a)?a[0].value:a;s&&B$(r)&&c.unshift(o),this._bindToObservable({schema:c,updater:IIe(i,r,l),data:t})}else if(r=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],t);else{s&&o&&B$(r)&&a.unshift(o);const c=a.map(d=>d&&(d.value||d)).reduce((d,u)=>d.concat(u),[]).reduce(iz,"");$p(c)||i.setAttributeNS(l,r,c)}}}_renderStyleAttribute(t,i){const s=i.node;for(const r in t){const o=t[r];jv(o)?this._bindToObservable({schema:[o],updater:PIe(s,r),data:i}):s.style[r]=o}}_renderElementChildren(t){const i=t.node,s=t.intoFragment?document.createDocumentFragment():i,r=t.isApplying;let o=0;for(const a of this.children)if(T3(a)){if(!r){a.setParent(i);for(const l of a)s.appendChild(l.element)}}else if(lw(a))r||(a.isRendered||a.render(),s.appendChild(a.element));else if(Ud(a))s.appendChild(a);else if(r){const l=t.revertData,c=F$();l.children.push(c),a._renderNode({intoFragment:!1,node:s.childNodes[o++],isApplying:!0,revertData:c})}else s.appendChild(a.render());t.intoFragment&&i.appendChild(s)}_setUpListeners(t){if(this.eventListeners)for(const i in this.eventListeners){const s=this.eventListeners[i].map(r=>{const[o,a]=i.split("@");return r.activateDomEventListener(o,a,t)});t.revertData&&t.revertData.bindings.push(s)}}_bindToObservable({schema:t,updater:i,data:s}){const r=s.revertData;tz(t,i,s);const o=t.filter(a=>!$p(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(t,i,s));r&&r.bindings.push(o)}_revertTemplateFromNode(t,i){for(const r of i.bindings)for(const o of r)o();if(i.text){t.textContent=i.text;return}const s=t;for(const r in i.attributes){const o=i.attributes[r];o===null?s.removeAttribute(r):s.setAttribute(r,o)}for(let r=0;r<i.children.length;++r)this._revertTemplateFromNode(s.childNodes[r],i.children[r])}}class Cb{constructor(e){$(this,"attribute");$(this,"observable");$(this,"emitter");$(this,"callback");this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const s=()=>tz(e,t,i);return this.emitter.listenTo(this.observable,"change:".concat(this.attribute),s),()=>{this.emitter.stopListening(this.observable,"change:".concat(this.attribute),s)}}}class CIe extends Cb{constructor(t){super(t);$(this,"eventNameOrFunction");this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,i,s){const r=(o,a)=>{(!i||a.target.matches(i))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,t,r),()=>{this.emitter.stopListening(s.node,t,r)}}}class ez extends Cb{constructor(t){super(t);$(this,"valueIfTrue");this.valueIfTrue=t.valueIfTrue}getValue(t){const i=super.getValue(t);return $p(i)?!1:this.valueIfTrue||!0}}function jv(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(jv):n instanceof Cb):!1}function SIe(n,e){return n.map(t=>t instanceof Cb?t.getValue(e):t)}function tz(n,e,{node:t}){const i=SIe(n,t);let s;n.length==1&&n[0]instanceof ez?s=i[0]:s=i.reduce(iz,""),$p(s)?e.remove():e.set(s)}function AIe(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function IIe(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function PIe(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function O$(n){return r3(n,t=>{if(t&&(t instanceof Cb||E3(t)||lw(t)||T3(t)))return t})}function D$(n){if(typeof n=="string"?n=LIe(n):n.text&&OIe(n),n.on&&(n.eventListeners=$Ie(n.on),delete n.on),!n.text){n.attributes&&RIe(n.attributes);const e=[];if(n.children)if(T3(n.children))e.push(n.children);else for(const t of n.children)E3(t)||lw(t)||Ud(t)?e.push(t):e.push(new Sa(t));n.children=e}return n}function RIe(n){for(const e in n)n[e].value&&(n[e].value=cs(n[e].value)),nz(n,e)}function $Ie(n){for(const e in n)nz(n,e);return n}function LIe(n){return{text:[n]}}function OIe(n){n.text=cs(n.text)}function nz(n,e){n[e]=cs(n[e])}function iz(n,e){return $p(e)?n:$p(n)?e:"".concat(n," ").concat(e)}function M$(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function sz(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),M$(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),M$(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new _e("ui-template-extend-children-mismatch",n);let t=0;for(const i of e.children)sz(n.children[t++],i)}}function $p(n){return!n&&n!==0}function lw(n){return n instanceof un}function E3(n){return n instanceof Sa}function T3(n){return n instanceof Oh}function N$(n){return rs(n[0])&&n[0].ns}function F$(){return{children:[],bindings:[],attributes:{}}}function B$(n){return n=="class"||n=="style"}class un extends za(gs()){constructor(t){super();$(this,"element");$(this,"isRendered");$(this,"locale");$(this,"t");$(this,"template");$(this,"_viewCollections");$(this,"_unboundChildren");$(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new Jd,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(i,s)=>{s.locale=t,s.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Sa.bind(this,this)}createCollection(t){const i=new Oh(t);return this._viewCollections.add(i),i}registerChild(t){xo(t)||(t=[t]);for(const i of t)this._unboundChildren.add(i)}deregisterChild(t){xo(t)||(t=[t]);for(const i of t)this._unboundChildren.remove(i)}setTemplate(t){this.template=new Sa(t)}extendTemplate(t){Sa.extend(this.template,t)}render(){if(this.isRendered)throw new _e("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function C3({emitter:n,activator:e,callback:t,contextElements:i,listenerOptions:s}){n.listenTo(document,"mousedown",(r,o)=>{if(!e())return;const a=typeof o.composedPath=="function"?o.composedPath():[],l=typeof i=="function"?i():i;for(const c of l)if(c.contains(o.target)||a.includes(c))return;t()},s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function DIe({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:s}){const r=typeof i=="number"?()=>i:i;n.set("arrowright",o((c,d)=>s==="rtl"?l(c,d.length):a(c,d.length))),n.set("arrowleft",o((c,d)=>s==="rtl"?a(c,d.length):l(c,d.length))),n.set("arrowup",o((c,d)=>{let u=c-r();return u<0&&(u=c+r()*Math.floor(d.length/r()),u>d.length-1&&(u-=r())),u})),n.set("arrowdown",o((c,d)=>{let u=c+r();return u>d.length-1&&(u=c%r()),u}));function o(c){return d=>{const u=t.find(m=>m.element===e.focusedElement),h=t.getIndex(u),f=c(h,t);t.get(f).focus(),d.stopPropagation(),d.preventDefault()}}function a(c,d){return c===d-1?0:c+1}function l(c,d){return c===0?d-1:c-1}}const Vw=class Vw extends un{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),i=t.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:s,value:r}of Array.from(t.attributes))Vw.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}};$(Vw,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let Rc=Vw;class rz extends un{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}class pr extends un{constructor(t,i=new rz){super(t);$(this,"children");$(this,"labelView");$(this,"iconView");$(this,"keystrokeView");$(this,"_focusDelayed",null);const s=this.bindTemplate,r=Oa();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy","ck-editor__aria-label_".concat(r)),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(i),this.iconView=new Rc,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||V$(c)?!1:String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!l||!V$(c)?!1:String(!!a)),bn.isSafari&&(this._focusDelayed||(this._focusDelayed=h3(()=>this.focus(),0)),o.on.mousedown=s.to(()=>{this._focusDelayed()}),o.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new un;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",i=>nw(i))}]}),t}_getTooltipString(t,i,s){return t?typeof t=="string"?t:(s&&(s=nw(s)),t instanceof Function?t(i,s):"".concat(i).concat(s?" (".concat(s,")"):"")):""}}function V$(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class MIe extends un{constructor(t,i={}){super(t);$(this,"children");$(this,"iconView");const s=this.bindTemplate;this.set("label",i.label||""),this.set("class",i.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),i.icon&&(this.iconView=new Rc,this.iconView.content=i.icon,this.children.add(this.iconView));const r=new un(t);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(r)}}class lm extends Ri(){constructor(t){super();$(this,"focusables");$(this,"focusTracker");$(this,"keystrokeHandler");$(this,"actions");if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const i in t.actions){let s=t.actions[i];typeof s=="string"&&(s=[s]);for(const r of s)t.keystrokeHandler.set(r,(o,a)=>{this[i](),a()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Pk)||null}get last(){return this.focusables.filter(Pk).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((i,s)=>{const r=i.element===this.focusTracker.focusedElement;return r&&(t=s),r}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;if(t&&this.focusables.getIndex(t)===this.current){this.fire("forwardCycle");return}t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;if(t&&this.focusables.getIndex(t)===this.current){this.fire("backwardCycle");return}t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const i=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",s=>{const r=i();this.focusNext(),r!==i()&&s.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",s=>{const r=i();this.focusPrevious(),r!==i()&&s.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,i){t&&this.focusTracker.focusedElement!==t.element&&t.focus(i)}_getDomFocusableItem(t){const i=this.focusables.length;if(!i)return null;const s=this.current;if(s===null)return this[t===1?"first":"last"];let r=this.focusables.get(s),o=(s+i+t)%i;do{const a=this.focusables.get(o);if(Pk(a)){r=a;break}o=(o+i+t)%i}while(o!==s);return r}}function Pk(n){return Sb(n)&&Pc(n.element)}function Sb(n){return"focus"in n&&typeof n.focus=="function"}function NIe(n){return Sb(n)&&"focusCycler"in n&&n.focusCycler instanceof lm}function FIe(n){class e extends n{constructor(...s){super(...s);$(this,"_onDragBound",this._onDrag.bind(this));$(this,"_onDragEndBound",this._onDragEnd.bind(this));$(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(Ut.document,"mouseup",this._onDragEndBound),this.listenTo(Ut.document,"touchend",this._onDragEndBound),this.listenTo(Ut.document,"mousemove",this._onDragBound),this.listenTo(Ut.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(Ut.document,"mouseup",this._onDragEndBound),this.stopListening(Ut.document,"touchend",this._onDragEndBound),this.stopListening(Ut.document,"mousemove",this._onDragBound),this.stopListening(Ut.document,"touchmove",this._onDragBound)}_onDragStart(s,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:a},this.isDragging=!0}_onDrag(s,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,a=0;r instanceof MouseEvent?(o=r.clientX,a=r.clientY):(o=r.touches[0].clientX,a=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(a-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:a}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(s){return this.dragHandleElement?this.dragHandleElement===s.target||s.target instanceof HTMLElement&&this.dragHandleElement.contains(s.target):!1}}return e}class BIe extends un{constructor(t){super(t);$(this,"children");$(this,"keystrokes");$(this,"focusCycler");$(this,"_focusTracker");$(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new Dl,this._focusTracker=new na,this._focusables=new Oh,this.focusCycler=new lm({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const i of t){const s=new pr(this.locale);let r;s.on("execute",()=>i.onExecute()),i.onCreate&&i.onCreate(s);for(r in i)r!="onExecute"&&r!="onCreate"&&s.set(r,i[r]);this.children.add(s)}this._updateFocusCyclableItems()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class VIe extends un{constructor(t){super(t);$(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const Fo={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},U$=Tb("px"),Uw=class Uw extends FIe(un){constructor(t,{getCurrentDomRoot:i,getViewportOffset:s}){super(t);$(this,"parts");$(this,"headerView");$(this,"closeButtonView");$(this,"actionsView");$(this,"contentView");$(this,"keystrokes");$(this,"focusTracker");$(this,"wasMoved",!1);$(this,"_getCurrentDomRoot");$(this,"_getViewportOffset");$(this,"_focusables");$(this,"_focusCycler");const r=this.bindTemplate,o=t.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",Fo.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Dl,this.focusTracker=new na,this._focusables=new Oh,this._focusCycler=new lm({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",a=>!a),r.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.if("isModal","ck-dialog_modal"),r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",a=>U$(a)),left:r.to("_left",a=>U$(a)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,i)=>{this.fire("close",{source:"escKeyPress"}),i()}),this.on("drag",(t,{deltaX:i,deltaY:s})=>{this.wasMoved=!0,this.moveBy(i,s)}),this.listenTo(Ut.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(Ut.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,i,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:i,hasCloseButton:s=!0,content:r,actionButtons:o}){i&&(this.headerView=new MIe(this.locale,{icon:t}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),r&&(r instanceof un&&(r=[r]),this.contentView=new VIe(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new BIe(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,i){const s=this._getViewportRect(),r=this._getDialogRect();t+r.width>s.right&&(t=s.right-r.width),t<s.left&&(t=s.left),i<s.top&&(i=s.top),this._moveTo(t,i)}_moveTo(t,i){this._left=t,this._top=i}moveBy(t,i){this.moveTo(this._left+t,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let i=this.position,s;this._getCurrentDomRoot()?s=this._getVisibleDomRootRect(t):i=Fo.SCREEN_CENTER;const r=Uw.defaultOffset,o=this._getDialogRect();switch(i){case Fo.EDITOR_TOP_SIDE:{if(s){const a=this.locale.contentLanguageDirection==="ltr"?s.right-o.width-r:s.left+r;this.moveTo(a,s.top+r)}else this._moveOffScreen();break}case Fo.EDITOR_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),Math.round(s.top+s.height/2-o.height/2)):this._moveOffScreen();break}case Fo.SCREEN_CENTER:{this.moveTo(Math.round((t.width-o.width)/2),Math.round((t.height-o.height)/2));break}case Fo.EDITOR_TOP_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top+r):this._moveOffScreen();break}case Fo.EDITOR_BOTTOM_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom-o.height-r):this._moveOffScreen();break}case Fo.EDITOR_ABOVE_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.top-o.height-r):this._moveOffScreen();break}case Fo.EDITOR_BELOW_CENTER:{s?this.moveTo(Math.round(s.left+s.width/2-o.width/2),s.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let i=new Sn(this._getCurrentDomRoot()).getVisible();if(i){if(i=t.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new Sn(this.element.firstElementChild)}_getViewportRect(){const t=new Sn(Ut.window);if(this.isModal)return t;const i={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t.left+=i.left,t.right-=i.right,t.width-=i.left+i.right,t}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const i of this.contentView.children)Sb(i)&&t.push(i);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),NIe(i)&&this._focusCycler.chain(i.focusCycler)})}_createCloseButton(){const t=new pr(this.locale),i=this.locale.t;return t.set({label:i("Close"),tooltip:!0,icon:Ss.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}};$(Uw,"defaultOffset",15);let E0=Uw;const ol=class ol extends tn{constructor(t){super(t);$(this,"view");$(this,"_onHide");const i=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,i)=>{this._show(i)}),this.on("show",(t,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{ol._visibleDialogPlugin&&ol._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const t=this.editor;t.keystrokes.set("Ctrl+F6",(i,s)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),s())})}_initMultiRootIntegration(){const t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;const i=t.document.differ.getChangedRoots();for(const s of i)s.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire("show:".concat(t.id),t)}_show({id:t,icon:i,title:s,hasCloseButton:r=!0,content:o,actionButtons:a,className:l,isModal:c,position:d,onHide:u}){const h=this.editor;this.view=new E0(h.locale,{getCurrentDomRoot:()=>h.editing.view.getDomRoot(h.model.document.selection.anchor.root.rootName),getViewportOffset:()=>h.ui.viewportOffset});const f=this.view;f.on("close",()=>{this.hide()}),h.ui.view.body.add(f),h.keystrokes.listenTo(f.element),d||(d=c?Fo.SCREEN_CENTER:Fo.EDITOR_CENTER),c&&this._lockBodyScroll(),f.set({position:d,_isVisible:!0,className:l,isModal:c}),f.setupParts({icon:i,title:s,hasCloseButton:r,content:o,actionButtons:a}),this.id=t,u&&(this._onHide=u),this.isOpen=!0,ol._visibleDialogPlugin=this}hide(){ol._visibleDialogPlugin&&ol._visibleDialogPlugin.fire("hide:".concat(ol._visibleDialogPlugin.id))}_hide(){if(!this.view)return;const t=this.editor,i=this.view;i.isModal&&this._unlockBodyScroll(),i.contentView&&i.contentView.reset(),t.ui.view.body.remove(i),t.ui.focusTracker.remove(i.element),t.keystrokes.stopListening(i.element),i.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,ol._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};$(ol,"_visibleDialogPlugin");let cw=ol;class Lp extends pr{constructor(t,i=new rz){super(t,i);$(this,"_checkIconHolderView",new UIe);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,i,s)=>{const{children:r,_checkIconHolderView:o}=this;s?r.add(o,0):r.remove(o)})}}class UIe extends un{constructor(){super();$(this,"children");$(this,"_checkIconView",this._createCheckIconView());const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",i=>i?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,i,s)=>{const{children:r,_checkIconView:o}=this;s&&!r.has(o)?r.add(o):!s&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const t=new Rc;return t.content=Ss.check,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class cm extends Lp{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class Wx extends un{constructor(t){super(t);$(this,"id");this.set("text",void 0),this.set("for",void 0),this.id="ck-editor__label_".concat(Oa());const i=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:i.to("for")},children:[{text:i.to("text")}]})}}class zIe extends un{constructor(e,t){super(e);const i=e.t,s=new Wx;s.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[fa(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),s]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const i=[fa(document,"h3",{},t.label),...Array.from(t.groups.values()).map(s=>this._createGroup(s)).flat()];return t.description&&i.splice(1,0,fa(document,"p",{},t.description)),fa(document,"section",{},i)})}_createGroup(e){const t=e.keystrokes.sort((s,r)=>s.label.localeCompare(r.label)).map(s=>this._createGroupRow(s)).flat(),i=[fa(document,"dl",{},t)];return e.label&&i.unshift(fa(document,"h4",{},e.label)),i}_createGroupRow(e){const t=this.locale.t,i=fa(document,"dt"),s=fa(document,"dd"),r=jIe(e.keystroke),o=[];for(const a of r)o.push(a.map(HIe).join(""));return i.innerHTML=e.label,s.innerHTML=o.join(", ")+(e.mayRequireFn&&bn.isMac?" ".concat(t("(may require <kbd>Fn</kbd>)")):""),[i,s]}}function HIe(n){return nw(n).split("+").map(e=>"<kbd>".concat(e,"</kbd>")).join("+")}function jIe(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}var z$='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class GIe extends tn{constructor(){super(...arguments);$(this,"contentView",null)}static get requires(){return[cw]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,i=t.locale.t;t.ui.componentFactory.add("accessibilityHelp",()=>{const s=this._createButton(pr);return s.set({tooltip:!0,withText:!1,label:i("Accessibility help")}),s}),t.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const s=this._createButton(cm);return s.label=i("Accessibility"),s}),t.keystrokes.set("Alt+0",(s,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(t){const i=this.editor,s=i.plugins.get("Dialog"),r=i.locale,o=new t(r);return o.set({keystroke:"Alt+0",icon:z$,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(s,"id",a=>a==="accessibilityHelp"),o}_setupRootLabels(){const t=this.editor,i=t.editing.view,s=t.t;t.ui.on("ready",()=>{i.change(o=>{for(const a of i.document.roots)r(o,a)}),t.on("addRoot",(o,a)=>{const l=t.editing.view.document.getRoot(a.rootName);i.change(c=>r(c,l))},{priority:"low"})});function r(o,a){const c=[a.getAttribute("aria-label"),s("Press %0 for help.",[nw("Alt+0")])].filter(d=>d).join(". ");o.setAttribute("aria-label",c,a)}}_toggleDialog(){const t=this.editor,i=t.plugins.get("Dialog"),s=t.locale.t;this.contentView||(this.contentView=new zIe(t.locale,t.accessibility.keystrokeInfos)),i.id==="accessibilityHelp"?i.hide():i.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:s("Accessibility help"),icon:z$,hasCloseButton:!0,content:this.contentView})}}class WIe extends Oh{constructor(t,i=[]){super(i);$(this,"locale");$(this,"_bodyCollectionContainer");this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Sa({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let t=document.querySelector(".ck-body-wrapper");t||(t=fa(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const t=document.querySelector(".ck-body-wrapper");t&&t.childElementCount==0&&t.remove()}}class oz extends pr{constructor(t){super(t);$(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new un;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class qIe extends KIe(Lp){}function KIe(n){class e extends n{constructor(...s){super(...s);$(this,"buttonView");$(this,"_fileInputView");this.buttonView=this,this._fileInputView=new YIe(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}class YIe extends un{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var S3='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class XIe extends un{constructor(t,i){super(t);$(this,"fieldView");$(this,"labelView");$(this,"statusView");$(this,"fieldWrapperChildren");const s="ck-labeled-field-view-".concat(Oa()),r="ck-labeled-field-view-status-".concat(Oa());this.fieldView=i(this,s,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(s),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(a,l)=>a||l);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",a=>!a),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const i=new Wx(this.locale);return i.for=t,i.bind("text").to(this,"label"),i}_createStatusView(t){const i=new un(this.locale),s=this.bindTemplate;return i.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",s.if("errorText","ck-labeled-field-view__status_error"),s.if("_statusText","ck-hidden",r=>!r)],id:t,role:s.if("errorText","alert")},children:[{text:s.to("_statusText")}]}),i}focus(t){this.fieldView.focus(t)}}class QIe extends un{constructor(t){super(t);$(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.to("position",s=>"ck-dropdown__panel_".concat(s)),i.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:i.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;typeof t.focus=="function"?t.focus():is("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;typeof t.focusLast=="function"?t.focusLast():t.focus()}}}const Mf=class Mf extends un{constructor(t,i,s){super(t);$(this,"buttonView");$(this,"panelView");$(this,"focusTracker");$(this,"keystrokes");$(this,"listView");$(this,"toolbarView");$(this,"menuView");const r=this.bindTemplate;this.buttonView=i,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Dl,this.focusTracker=new na,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[i,s]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,s,r)=>{if(r)if(this.panelPosition==="auto"){const o=Mf._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(i,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(i,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(i,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:i,southEast:s,southWest:r,northEast:o,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:d,northMiddleWest:u}=Mf.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,r,l,c,t,o,a,d,u,i]:[r,s,c,l,t,a,o,u,d,i]}};$(Mf,"defaultPanelPositions",{south:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,i)=>({top:t.bottom,left:t.left-i.width+t.width,name:"sw"}),southMiddleEast:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/4,name:"sme"}),southMiddleWest:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)*3/4,name:"smw"}),north:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/2,name:"n"}),northEast:(t,i)=>({top:t.top-i.height,left:t.left,name:"ne"}),northWest:(t,i)=>({top:t.top-i.height,left:t.left-i.width+t.width,name:"nw"}),northMiddleEast:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/4,name:"nme"}),northMiddleWest:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)*3/4,name:"nmw"})}),$(Mf,"_getOptimalPosition",c3);let xC=Mf;class ZIe extends pr{constructor(t){super(t);$(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Rc;return t.content=S3,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class $c extends un{constructor(t){super(t);$(this,"children");const i=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",i.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class A3 extends un{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Gv extends un{constructor(t,i=new Wx){super(t);$(this,"labelView");$(this,"items");$(this,"children");const s=this.bindTemplate,r=new qx(t);this.set({label:"",isVisible:!0}),this.labelView=i,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:i.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const t=this.items.find(i=>!(i instanceof A3));t&&t.focus()}}}class qx extends un{constructor(t){super(t);$(this,"focusables");$(this,"items");$(this,"focusTracker");$(this,"keystrokes");$(this,"_focusCycler");$(this,"_listItemGroupToChangeListeners",new WeakMap);const i=this.bindTemplate;this.focusables=new Oh,this.items=this.createCollection(),this.focusTracker=new na,this.keystrokes=new Dl,this._focusCycler=new lm({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:i.to("role"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof Gv?this._registerFocusableItemsGroup(t):t instanceof $c&&this._registerFocusableListItem(t);this.items.on("change",(t,i)=>{for(const s of i.removed)s instanceof Gv?this._deregisterFocusableItemsGroup(s):s instanceof $c&&this._deregisterFocusableListItem(s);for(const s of Array.from(i.added).reverse())s instanceof Gv?this._registerFocusableItemsGroup(s,i.index):this._registerFocusableListItem(s,i.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,i){this.focusTracker.add(t.element),this.focusables.add(t,i)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(i,s)=>{for(const r of s.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(s.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(t)+s.index)}}_registerFocusableItemsGroup(t,i){Array.from(t.items).forEach((r,o)=>{const a=typeof i<"u"?i+o:void 0;this._registerFocusableListItem(r,a)});const s=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,s),t.items.on("change",s)}_deregisterFocusableItemsGroup(t){for(const i of t.items)this._deregisterFocusableListItem(i);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}const H$=Tb("px"),JIe={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},co=class co extends un{constructor(t){super(t);$(this,"content");$(this,"_pinWhenIsVisibleCallback");$(this,"_resizeObserver");const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",s=>"ck-balloon-panel_".concat(s)),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",H$),left:i.to("left",H$)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const i=Wv(t.target);if(i&&!Pc(i))return!1;this.show();const s=co.defaultPositions,r=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:Ut.document.body,fitInViewport:!0},t),o=co._getOptimalPosition(r)||JIe,a=parseInt(o.left),l=parseInt(o.top),c=o.name,d=o.config||{},{withArrow:u=!0}=d;return this.top=l,this.left=a,this.position=c,this.withArrow=u,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let i=Wv(t.target);const s=t.limiter?Wv(t.limiter):Ut.document.body;if(this.listenTo(Ut.document,"scroll",(r,o)=>{const a=o.target,l=i&&a.contains(i),c=s&&a.contains(s);(l||c||!i||!s)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(Ut.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(i&&ls(i)&&(i=i.parentElement),i)){const r=()=>{Pc(i)||this.unpin()};this._resizeObserver=new l3(i,r)}return!0}_stopPinning(){this.stopListening(Ut.document,"scroll"),this.stopListening(Ut.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:i=co.arrowSideOffset,heightOffset:s=co.arrowHeightOffset,stickyVerticalOffset:r=co.stickyVerticalOffset,config:o}=t;return{northWestArrowSouthWest:(c,d)=>({top:a(c,d),left:c.left-i,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,d)=>({top:a(c,d),left:c.left-d.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,d)=>({top:a(c,d),left:c.left-d.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,d)=>({top:a(c,d),left:c.left-d.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,d)=>({top:a(c,d),left:c.left-d.width+i,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,d)=>({top:a(c,d),left:c.left+c.width/2-i,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,d)=>({top:a(c,d),left:c.left+c.width/2-d.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,d)=>({top:a(c,d),left:c.left+c.width/2-d.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,d)=>({top:a(c,d),left:c.left+c.width/2-d.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,d)=>({top:a(c,d),left:c.left+c.width/2-d.width+i,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,d)=>({top:a(c,d),left:c.right-i,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,d)=>({top:a(c,d),left:c.right-d.width*.25-i,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,d)=>({top:a(c,d),left:c.right-d.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,d)=>({top:a(c,d),left:c.right-d.width*.75+i,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,d)=>({top:a(c,d),left:c.right-d.width+i,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:l(c),left:c.left-i,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,d)=>({top:l(c),left:c.left-d.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,d)=>({top:l(c),left:c.left-d.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,d)=>({top:l(c),left:c.left-d.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,d)=>({top:l(c),left:c.left-d.width+i,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:l(c),left:c.left+c.width/2-i,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,d)=>({top:l(c),left:c.left+c.width/2-d.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,d)=>({top:l(c),left:c.left+c.width/2-d.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,d)=>({top:l(c),left:c.left+c.width/2-d.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,d)=>({top:l(c),left:c.left+c.width/2-d.width+i,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:l(c),left:c.right-i,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,d)=>({top:l(c),left:c.right-d.width*.25-i,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,d)=>({top:l(c),left:c.right-d.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,d)=>({top:l(c),left:c.right-d.width*.75+i,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,d)=>({top:l(c),left:c.right-d.width+i,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,d)=>({top:c.top+c.height/2-d.height/2,left:c.left-d.width-s,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,d)=>({top:c.top+c.height/2-d.height/2,left:c.right+s,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,d,u,h)=>{const f=h||u;return!c.getIntersection(f)||f.height-c.height>r?null:{top:f.top+r,left:c.left+c.width/2-d.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function a(c,d){return c.top-d.height-s}function l(c){return c.bottom+s}}};$(co,"arrowSideOffset",25),$(co,"arrowHeightOffset",10),$(co,"stickyVerticalOffset",20),$(co,"_getOptimalPosition",c3),$(co,"defaultPositions",co.generatePositions());let Op=co;function Wv(n){return Ac(n)?n:Hx(n)?n.commonAncestorContainer:typeof n=="function"?Wv(n()):null}class az extends un{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class ePe extends un{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tPe(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lz(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}const nPe={alignLeft:Ss.alignLeft,bold:Ss.bold,importExport:Ss.importExport,paragraph:Ss.paragraph,plus:Ss.plus,text:Ss.text,threeVerticalDots:Ss.threeVerticalDots,pilcrow:Ss.pilcrow,dragIndicator:Ss.dragIndicator};class cz extends un{constructor(t,i){super(t);$(this,"options");$(this,"items");$(this,"focusTracker");$(this,"keystrokes");$(this,"itemsView");$(this,"children");$(this,"focusables");$(this,"_focusCycler");$(this,"_behavior");const s=this.bindTemplate,r=this.t;this.options=i||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new na,this.keystrokes=new Dl,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new iPe(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=t.uiLanguageDirection==="rtl";this._focusCycler=new lm({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:"toolbar","aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:tPe(this)}}),this._behavior=this.options.shouldGroupWhenFull?new rPe(this):new sPe(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t);this.items.on("add",(t,i)=>{this.focusTracker.add(i)}),this.items.on("remove",(t,i)=>{this.focusTracker.remove(i)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,i,s){this.items.addMany(this._buildItemsFromConfig(t,i,s))}_buildItemsFromConfig(t,i,s){const r=lz(t),o=s||r.removeItems;return this._cleanItemsConfiguration(r.items,i,o).map(l=>rs(l)?this._createNestedToolbarDropdown(l,i,o):l==="|"?new az:l==="-"?new ePe:i.create(l)).filter(l=>!!l)}_cleanItemsConfiguration(t,i,s){const r=t.filter((o,a,l)=>o==="|"?!0:s.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(is("toolbarview-line-break-ignored-when-grouping-items",l),!1):!0:!rs(o)&&!i.has(o)?(is("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(t){const i=a=>a!=="-"&&a!=="|",s=t.length,r=t.findIndex(i);if(r===-1)return[];const o=s-t.slice().reverse().findIndex(i);return t.slice(r,o).filter((a,l,c)=>i(a)?!0:!(l>0&&c[l-1]===a))}_createNestedToolbarDropdown(t,i,s){let{label:r,icon:o,items:a,tooltip:l=!0,withText:c=!1}=t;if(a=this._cleanItemsConfiguration(a,i,s),!a.length)return null;const d=this.locale,u=I3(d);return r||is("toolbarview-nested-toolbar-dropdown-missing-label",t),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:r,tooltip:l,withText:!!c}),o!==!1?u.buttonView.icon=nPe[o]||o||Ss.threeVerticalDots:u.buttonView.withText=!0,dz(u,()=>u.toolbarView._buildItemsFromConfig(a,i,s)),u}}class iPe extends un{constructor(t){super(t);$(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class sPe{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>Sb(i)?i:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class rPe{constructor(e){$(this,"view");$(this,"viewChildren");$(this,"viewFocusables");$(this,"viewItemsView");$(this,"viewFocusTracker");$(this,"viewLocale");$(this,"ungroupedItems");$(this,"groupedItems");$(this,"groupedItemsDropdown");$(this,"resizeObserver",null);$(this,"cachedPadding",null);$(this,"shouldUpdateGroupingOnNextResize",!1);$(this,"viewElement");this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{const s=i.index,r=Array.from(i.added);for(const o of i.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=s;o<s+r.length;o++){const a=r[o-s];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Pc(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Sn(e.lastChild),s=new Sn(e);if(!this.cachedPadding){const r=Ut.window.getComputedStyle(e),o=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[o])}return t==="ltr"?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new l3(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new az),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=I3(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",dz(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:Ss.threeVerticalDots}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{Sb(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class oPe extends un{constructor(t,i){super(t);$(this,"children");$(this,"actionView");$(this,"arrowView");$(this,"keystrokes");$(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(i),this.arrowView=this._createArrowView(),this.keystrokes=new Dl,this.focusTracker=new na,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,i)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),i())}),this.keystrokes.set("arrowleft",(t,i)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),i())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const i=t||new pr;return t||i.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),i.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),i.delegate("execute").to(this),i}_createArrowView(){const t=new pr,i=t.bindTemplate;return t.icon=S3,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":i.to("isOn"),"aria-haspopup":!0,"aria-expanded":i.to("isOn",s=>String(s))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function I3(n,e=ZIe){const t=typeof e=="function"?new e(n):e,i=new QIe(n),s=new xC(n,t,i);return t.bind("isEnabled").to(s),t instanceof oPe?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),lPe(s),s}function dz(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?j$(n,e,t):n.once("change:isOpen",()=>j$(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&uz(n,()=>n.toolbarView.items.find(i=>i.isOn))}function j$(n,e,t){const i=n.locale,s=i.t,r=n.toolbarView=new cz(i),o=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(r.maxWidth=t.maxWidth),t.class&&(r.class=t.class),t.isCompact&&(r.isCompact=t.isCompact),t.isVertical&&(r.isVertical=!0),o instanceof Oh?r.items.bindTo(o).using(a=>a):r.items.addMany(o),n.panelView.children.add(r),n.focusTracker.add(r),r.items.delegate("execute").to(n)}function aPe(n,e,t={}){n.isOpen?G$(n,e,t):n.once("change:isOpen",()=>G$(n,e,t),{priority:"highest"}),uz(n,()=>n.listView.items.find(i=>i instanceof $c?i.children.first.isOn:!1))}function G$(n,e,t){const i=n.locale,s=n.listView=new qx(i),r=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel,s.role=t.role,fz(n,s.items,r,i),n.panelView.children.add(s),s.items.delegate("execute").to(n)}function uz(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():is("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:jo.low-10})}function lPe(n){cPe(n),dPe(n),uPe(n),hPe(n),fPe(n),pPe(n)}function cPe(n){C3({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...hz(n.focusTracker).filter(e=>!n.element.contains(e))]})}function hz(n){return[...n.elements,...n.externalViews.flatMap(e=>hz(e.focusTracker))]}function dPe(n){n.on("execute",e=>{e.source instanceof oz||(n.isOpen=!1)})}function uPe(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{i||!n.isOpen||(n.isOpen=!1)})}function hPe(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function fPe(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;n.focusTracker.elements.some(r=>r.contains(Ut.document.activeElement))&&n.buttonView.focus()})}function pPe(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}function fz(n,e,t,i){e.on("change",()=>{const s=[...e].reduce((o,a)=>(a instanceof $c&&a.children.first instanceof Lp&&o.push(a.children.first),o),[]),r=s.some(o=>o.isToggleable);s.forEach(o=>{o.hasCheckSpace=r})}),e.bindTo(t).using(s=>{if(s.type==="separator")return new A3(i);if(s.type==="group"){const r=new Gv(i);return r.set({label:s.label}),fz(n,r.items,s.items,i),r.items.delegate("execute").to(n),r}else if(s.type==="button"||s.type==="switchbutton"){const r=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",o=new $c(i);let a;return s.type==="button"?(a=new Lp(i),a.set({isToggleable:r})):a=new oz(i),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}const mPe=(n,e,t)=>{const i=I3(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isEnabled").to(n),i};class gPe{constructor(e){$(this,"editor");$(this,"_components",new Map);this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(Rk(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new _e("componentfactory-item-missing",this,{name:e});return this._components.get(Rk(e)).callback(this.editor.locale)}has(e){return this._components.has(Rk(e))}}function Rk(n){return String(n).toLowerCase()}const W$="ck-tooltip",Vs=class Vs extends za(){constructor(t){super();$(this,"tooltipTextView");$(this,"balloonPanelView");$(this,"_currentElementWithTooltip",null);$(this,"_currentTooltipPosition",null);$(this,"_mutationObserver",null);$(this,"_pinTooltipDebounced");$(this,"_unpinTooltipDebounced");$(this,"_watchdogExcluded");if(Vs._editors.add(t),Vs._instance)return Vs._instance;Vs._instance=this,this.tooltipTextView=new un(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Op(t.locale),this.balloonPanelView.class=W$,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=bPe(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Sc(this._pinTooltip,600),this._unpinTooltipDebounced=Sc(this._unpinTooltip,400),this.listenTo(Ut.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(Ut.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Ut.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Ut.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Ut.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Ut.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const i=t.ui.view&&t.ui.view.body;Vs._editors.delete(t),this.stopListening(t.ui),i&&i.has(this.balloonPanelView)&&i.remove(this.balloonPanelView),Vs._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Vs._instance=null)}static getPositioningFunctions(t){const i=Vs.defaultBalloonPositions;return{s:[i.southArrowNorth,i.southArrowNorthEast,i.southArrowNorthWest],n:[i.northArrowSouth],e:[i.eastArrowWest],w:[i.westArrowEast],sw:[i.southArrowNorthEast],se:[i.southArrowNorthWest]}[t]}_onKeyDown(t,i){i.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),i.stopPropagation())}_onEnterOrFocus(t,{target:i}){const s=$k(i);if(!s){t.name==="focus"&&this._unpinTooltip();return}s!==this._currentElementWithTooltip&&(this._unpinTooltip(),t.name==="focus"&&!s.matches(":hover")?this._pinTooltip(s,Lk(s)):this._pinTooltipDebounced(s,Lk(s)))}_onLeaveOrBlur(t,{target:i,relatedTarget:s}){if(t.name==="mouseleave"){if(!Ac(i))return;const r=this.balloonPanelView.element,o=r&&(r===s||r.contains(s)),a=!o&&i===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!a&&this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;const l=$k(i),c=$k(s);(a||l&&l!==c)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&i!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(t,{target:i}){this._currentElementWithTooltip&&(i.contains(this.balloonPanelView.element)&&i.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:i,position:s,cssClass:r}){this._unpinTooltip();const o=zd(Vs._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=i,this.balloonPanelView.class=[W$,r].filter(a=>a).join(" "),this.balloonPanelView.pin({target:t,positions:Vs.getPositioningFunctions(s)}),this._mutationObserver.attach(t);for(const a of Vs._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of Vs._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=Lk(this._currentElementWithTooltip);if(!Pc(this._currentElementWithTooltip)||!t.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Vs.getPositioningFunctions(t.position)})}};$(Vs,"defaultBalloonPositions",Op.generatePositions({heightOffset:5,sideOffset:13})),$(Vs,"_editors",new Set),$(Vs,"_instance",null);let _C=Vs;function $k(n){return Ac(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function Lk(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function bPe(n){const e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}var vPe='<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>\n';const yPe=53,wPe=10,xPe=50,_Pe=350,kPe="Powered by";class EPe extends za(){constructor(t){super();$(this,"editor");$(this,"_balloonView");$(this,"_showBalloonThrottled");$(this,"_lastFocusedEditableElement");this.editor=t,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=p0(this._showBalloon.bind(this),50,{leading:!0}),t.on("ready",this._handleEditorReady.bind(this))}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor,i=!!t.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!i&&fSe(t.config.get("licenseKey"))==="VALID"||t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(s,r,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(s,r,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const t=this.editor,i=this._balloonView=new Op,s=mz(t),r=new TPe(t.locale,s.label);i.content.add(r),i.set({class:"ck-powered-by-balloon"}),t.ui.view.body.add(i),this._balloonView=i}_showBalloon(){if(!this._lastFocusedEditableElement)return;const t=CPe(this.editor,this._lastFocusedEditableElement);this._balloonView||this._createBalloonView(),this._balloonView.pin(t)}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const t=this.editor,i=t.ui.focusTracker.isFocused,s=t.ui.focusTracker.focusedElement;if(!i||!s){this._lastFocusedEditableElement=null;return}const r=Array.from(t.ui.getEditableElementsNames()).map(o=>t.ui.getEditableElement(o));r.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=r[0]}}class TPe extends un{constructor(e,t){super(e);const i=new Rc,s=this.bindTemplate;i.set({content:vPe,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:yPe+"px",height:wPe+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:s.to(r=>r.preventDefault())}}]})}}function CPe(n,e){const t=mz(n),i=t.side==="right"?SPe(e,t):APe(e,t);return{target:e,positions:[i]}}function SPe(n,e){return pz(n,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function APe(n,e){return pz(n,e,t=>t.left+e.horizontalOffset)}function pz(n,e,t){return(i,s)=>{const r=new Sn(n);if(r.width<_Pe||r.height<xPe)return null;let o;e.position==="inside"?o=r.bottom-s.height:o=r.bottom-s.height/2,o-=e.verticalOffset;const a=t(r,s),c=i.clone().moveTo(a,o).getIntersection(s.clone().moveTo(a,o)).getVisible();return!c||c.getArea()<s.getArea()?null:{top:o,left:a,name:"position_".concat(e.position,"-side_").concat(e.side),config:{withArrow:!1}}}}function mz(n){const e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:kPe,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}const q$={POLITE:"polite",ASSERTIVE:"assertive"};class IPe{constructor(e){$(this,"editor");$(this,"view");this.editor=e,e.once("ready",()=>{for(const t of Object.values(q$))this.announce("",t)})}announce(e,t=q$.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new PPe(i.locale),i.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:r}=typeof t=="string"?{politeness:t}:t;let o=this.view.regionViews.find(a=>a.politeness===s);o||(o=new RPe(i,s),this.view.regionViews.add(o)),o.announce({announcement:e,isUnsafeHTML:r})}}class PPe extends un{constructor(t){super(t);$(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class RPe extends un{constructor(t,i){super(t.locale);$(this,"politeness");$(this,"_domConverter");$(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":i,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=i,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:i}){if(!t.trim().length)return;const s=document.createElement("li");i?this._domConverter.setContentOf(s,t):s.innerText=t,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class gz extends $c{constructor(e,t){super(e);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const ev=5,of={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(const t of n.menus){const i=e.path[0],s=i instanceof gz&&i.children.first===t;t.isOpen=(e.path.includes(t)||s)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,s){const r=n.children.getIndex(i),o=i.isOpen,a=n.children.length,l=n.children.get((r+a+s)%a);i.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(s=>e.source.parentMenuView===s.parentMenuView&&e.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(n){C3({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,i,s)=>{s||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},nd={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},$Pe={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-ev,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-ev,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+ev,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+ev,name:"wn"})},LPe=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function OPe(n){let e;return!("items"in n)||!n.items?e={items:ta(LPe),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:e={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},e}function DPe({normalizedConfig:n,locale:e,componentFactory:t,extraItems:i}){const s=ta(n);return K$(n,s,i),MPe(n,s),K$(n,s,s.addItems),NPe(n,s,t),bz(n,s),FPe(s,e),s}function MPe(n,e){const t=e.removeItems,i=[];e.items=e.items.filter(({menuId:s})=>t.includes(s)?(i.push(s),!1):!0),dm(e.items,s=>{s.groups=s.groups.filter(({groupId:r})=>t.includes(r)?(i.push(r),!1):!0);for(const r of s.groups)r.items=r.items.filter(o=>{const a=vz(o);return t.includes(a)?(i.push(a),!1):!0})});for(const s of t)i.includes(s)||is("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:s})}function K$(n,e,t){const i=[];if(t.length!=0){for(const s of t){const r=UPe(s.position),o=zPe(s.position);if(BPe(s))if(!o)r==="start"?(e.items.unshift(s.menu),i.push(s)):r==="end"&&(e.items.push(s.menu),i.push(s));else{const a=e.items.findIndex(l=>l.menuId===o);a!=-1?r==="before"?(e.items.splice(a,0,s.menu),i.push(s)):r==="after"&&(e.items.splice(a+1,0,s.menu),i.push(s)):Y$(e,s.menu,o,r)&&i.push(s)}else VPe(s)?dm(e.items,a=>{if(a.menuId===o)r==="start"?(a.groups.unshift(s.group),i.push(s)):r==="end"&&(a.groups.push(s.group),i.push(s));else{const l=a.groups.findIndex(c=>c.groupId===o);l!==-1&&(r==="before"?(a.groups.splice(l,0,s.group),i.push(s)):r==="after"&&(a.groups.splice(l+1,0,s.group),i.push(s)))}}):Y$(e,s.item,o,r)&&i.push(s)}for(const s of t)i.includes(s)||is("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:s})}}function Y$(n,e,t,i){let s=!1;return dm(n.items,r=>{for(const{groupId:o,items:a}of r.groups){if(s)return;if(o===t)i==="start"?(a.unshift(e),s=!0):i==="end"&&(a.push(e),s=!0);else{const l=a.findIndex(c=>vz(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),s=!0):i==="after"&&(a.splice(l+1,0,e),s=!0))}}}),s}function NPe(n,e,t){dm(e.items,i=>{for(const s of i.groups)s.items=s.items.filter(r=>{const o=typeof r=="string"&&!t.has(r);return o&&!e.isUsingDefaultConfig&&is("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:ta(i),componentName:r}),!o})})}function bz(n,e){const t=e.isUsingDefaultConfig;let i=!1;if(e.items=e.items.filter(s=>s.groups.length?!0:(Ok(n,s,t),!1)),!e.items.length){Ok(n,n,t);return}dm(e.items,s=>{s.groups=s.groups.filter(r=>r.items.length?!0:(i=!0,!1));for(const r of s.groups)r.items=r.items.filter(o=>yz(o)&&!o.groups.length?(Ok(n,o,t),i=!0,!1):!0)}),i&&bz(n,e)}function Ok(n,e,t){t||is("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function FPe(n,e){const t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};dm(n.items,s=>{s.label in i&&(s.label=i[s.label])})}function dm(n,e){if(Array.isArray(n))for(const i of n)t(i);function t(i){e(i);for(const s of i.groups)for(const r of s.items)yz(r)&&t(r)}}function BPe(n){return typeof n=="object"&&"menu"in n}function VPe(n){return typeof n=="object"&&"group"in n}function UPe(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function zPe(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function vz(n){return typeof n=="string"?n:n.menuId}function yz(n){return typeof n=="object"&&"menuId"in n}class HPe extends gs(){constructor(t){super();$(this,"editor");$(this,"componentFactory");$(this,"focusTracker");$(this,"tooltipManager");$(this,"poweredBy");$(this,"ariaLiveAnnouncer");$(this,"isReady",!1);$(this,"_editableElementsMap",new Map);$(this,"_focusableToolbarDefinitions",[]);$(this,"_extraMenuBarElements",[]);$(this,"_lastFocusedForeignElement",null);const i=t.editing.view;this.editor=t,this.componentFactory=new gPe(t),this.focusTracker=new na,this.tooltipManager=new _C(t),this.poweredBy=new EPe(t),this.ariaLiveAnnouncer=new IPe(t),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(i.document,"layoutChanged",this.update.bind(this)),this.listenTo(i,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(t,i){this._editableElementsMap.set(t,i),i.ckeditorInstance||(i.ckeditorInstance=this.editor),this.focusTracker.add(i);const s=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(i)};this.isReady?s():this.once("ready",s)}removeEditableElement(t){const i=this._editableElementsMap.get(t);i&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(i),this.focusTracker.remove(i),i.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,i={}){t.isRendered?(this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:i})}extendMenuBar(t){this._extraMenuBarElements.push(t)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(t){const i=t.element;this.focusTracker.add(i),this.editor.keystrokes.listenTo(i);const s=OPe(this.editor.config.get("menuBar")||{});t.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{i.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),o())})}_readViewportOffsetFromConfig(){const t=this.editor,i=t.config.get("ui.viewportOffset");if(i)return i;const s=t.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const t=this.editor;let i;t.keystrokes.set("Alt+F10",(s,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!i)&&(i=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<i.length;a++){const l=i.shift();if(i.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),t.keystrokes.set("Esc",(s,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const i of this._focusableToolbarDefinitions){const{toolbarView:s,options:r}=i;(Pc(s.element)||r.beforeFocus)&&t.push(i)}return t.sort((i,s)=>X$(i)-X$(s)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:i,options:{beforeFocus:s}}=t;return s&&s(),Pc(i.element)?(i.focus(),!0):!1}_handleScrollToTheSelection(t,i){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};i.viewportOffset.top+=s.top,i.viewportOffset.bottom+=s.bottom,i.viewportOffset.left+=s.left,i.viewportOffset.right+=s.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const i of t)this.focusTracker.add(i.element);t.on("add",(i,s)=>{this.focusTracker.add(s.element)}),t.on("remove",(i,s)=>{this.focusTracker.remove(s.element)})}}function X$(n){const{toolbarView:e,options:t}=n;let i=10;return Pc(e.element)&&i--,t.isContextual&&i--,i}class jPe extends un{constructor(t){super(t);$(this,"body");$(this,"menuBarView");this.body=new WIe(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class GPe extends jPe{constructor(t){super(t);$(this,"top");$(this,"main");$(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,i=new Wx;return i.text=t("Rich Text Editor"),i.extendTemplate({attributes:{class:"ck-voice-label"}}),i}}class WPe extends un{constructor(t,i,s){super(t);$(this,"name",null);$(this,"_editingView");$(this,"_editableElement");$(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=i}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;t.isRenderingInProgress?s(this):i(this);function i(r){t.change(o=>{const a=t.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",a),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",a)})}function s(r){t.once("change:isRenderingInProgress",(o,a,l)=>{l?s(r):i(r)})}}}class qPe extends WPe{constructor(t,i,s,r={}){super(t,i,s);$(this,"_options");this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(i=>{const s=t.document.getRoot(this.name);i.setAttribute("aria-label",this.getEditableAriaLabel(),s)})}getEditableAriaLabel(){const t=this.locale.t,i=this._options.label,s=this._editableElement,r=this.name;if(typeof i=="string")return i;if(typeof i=="object")return i[r];if(typeof i=="function")return i(this);if(s){const o=s.getAttribute("aria-label");if(o)return o}return t("Rich Text Editor. Editing area: %0",r)}}class KPe extends gs(){constructor(e,t){super(),t&&KB(this,t),e&&this.set(e)}}const tv=Tb("px");class Q$ extends tn{constructor(t){super(t);$(this,"positionLimiter");$(this,"visibleStack");$(this,"_viewToStack",new Map);$(this,"_idToStack",new Map);$(this,"_view",null);$(this,"_rotatorView",null);$(this,"_fakePanelsView",null);this.positionLimiter=()=>{const i=this.editor.editing.view,r=i.document.selection.editableElement;return r?i.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new _e("contextualballoon-add-view-exist",[this,t]);const i=t.stackId||"main";if(!this._idToStack.has(i)){this._idToStack.set(i,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(i)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||t.singleViewMode)&&this.showStack(i);return}const s=this._idToStack.get(i);t.singleViewMode&&this.showStack(i),s.set(t.view,t),this._viewToStack.set(t.view,s),s===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new _e("contextualballoon-remove-view-not-exist",[this,t]);const i=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(i.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(i.values())[i.size-2])),i.size===1?(this._idToStack.delete(this._getStackId(i)),this._numberOfStacks=this._idToStack.size):i.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:this.editor.ui.viewportOffset})),t}showStack(t){this.visibleStack=t;const i=this._idToStack.get(t);if(!i)throw new _e("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==i&&this._showView(Array.from(i.values()).pop())}_createPanelView(){this._view=new Op(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(s=>s[1]===t)[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let i=t.indexOf(this._visibleStack)+1;t[i]||(i=0),this.showStack(this._getStackId(t[i]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let i=t.indexOf(this._visibleStack)-1;t[i]||(i=t.length-1),this.showStack(this._getStackId(t[i]))}_createRotatorView(){const t=new YPe(this.editor.locale),i=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(s,r)=>!r&&s>1),t.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(s,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return i("%0 of %1",[o,r])}),t.buttonNextView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),t.buttonPrevView.on("execute",()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),t}_createFakePanelsView(){const t=new XPe(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>=2?Math.min(i-1,2):0),t.listenTo(this.view,"change:top",()=>t.updatePosition()),t.listenTo(this.view,"change:left",()=>t.updatePosition()),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:i="",withArrow:s=!0,singleViewMode:r=!1}){this.view.class=i,this.view.withArrow=s,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}}class YPe extends un{constructor(t){super(t);$(this,"focusTracker");$(this,"buttonPrevView");$(this,"buttonNextView");$(this,"content");const i=t.t,s=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new na,this.buttonPrevView=this._createButtonView(i("Previous"),Ss.previousArrow),this.buttonNextView=this._createButtonView(i("Next"),Ss.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",s.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:s.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,i){const s=new pr(this.locale);return s.set({label:t,icon:i,tooltip:!0}),s}}class XPe extends un{constructor(t,i){super(t);$(this,"content");$(this,"_balloonPanelView");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=i,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",s.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:s.to("top",tv),left:s.to("left",tv),width:s.to("width",tv),height:s.to("height",tv)}},children:this.content}),this.on("change:numberOfPanels",(r,o,a,l)=>{a>l?this._addPanels(a-l):this._removePanels(l-a),this.updatePosition()})}_addPanels(t){for(;t--;){const i=new un;i.setTemplate({tag:"div"}),this.content.add(i),this.registerChild(i)}}_removePanels(t){for(;t--;){const i=this.content.last;this.content.remove(i),this.deregisterChild(i),i.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:i}=this._balloonPanelView,{width:s,height:r}=new Sn(this._balloonPanelView.element);Object.assign(this,{top:t,left:i,width:s,height:r})}}}const af=Tb("px");class QPe extends un{constructor(t){super(t);$(this,"content");$(this,"contentPanelElement");$(this,"_contentPanelPlaceholder");const i=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Sa({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:i.to("isSticky",s=>s?"block":"none"),height:i.to("isSticky",s=>s?af(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Sa({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",i.if("isSticky","ck-sticky-panel__content_sticky"),i.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:i.to("isSticky",s=>s?af(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:i.to("_stickyTopOffset",s=>s&&af(s)),bottom:i.to("_stickyBottomOffset",s=>s&&af(s)),marginLeft:i.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(Ut.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const t=new Sn(this.limiterElement);let i=t.getVisible();if(i){const s=new Sn(Ut.window);s.top+=this.viewportTopOffset,s.height-=this.viewportTopOffset,i=i.getIntersection(s)}if(i&&t.top<i.top){const s=i.top;if(s+this._contentPanelRect.height+this.limiterBottomOffset>i.bottom){const r=Math.max(t.bottom-i.bottom,0)+this.limiterBottomOffset;t.bottom-r>t.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(s):this._unstick()}else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=af(-Ut.window.scrollX)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=af(-Ut.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Sn(this.contentPanelElement)}}class ZPe extends Lp{constructor(t){super(t);$(this,"arrowView");const i=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":i.to("isOn")},on:{mouseenter:i.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Rc;return t.content=S3,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class JPe extends un{constructor(t){super(t);$(this,"children");const i=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",i.to("position",s=>"ck-menu-bar__menu__panel_position_".concat(s)),i.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:i.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(t=1){this.children.length&&(t===1?this.children.first.focus():this.children.last.focus())}}const zw=class zw extends un{constructor(t){super(t);$(this,"buttonView");$(this,"panelView");$(this,"focusTracker");$(this,"keystrokes");const i=this.bindTemplate;this.buttonView=new ZPe(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new JPe(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Dl,this.focusTracker=new na,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",s=>!s),i.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),nd.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(nd.openOnButtonClick(this),nd.openOnArrowRightKey(this),nd.closeOnArrowLeftKey(this),nd.openAndFocusOnEnterKeyPress(this),nd.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),nd.openAndFocusPanelOnArrowDownKey(this),nd.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(t,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,i,s)=>{if(!s)return;const r=zw._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:i,northEast:s,northWest:r,westSouth:o,eastSouth:a,westNorth:l,eastNorth:c}=$Pe;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,o,l]:[t,i,s,r]:this.parentMenuView?[o,l,a,c]:[i,t,r,s]}};$(zw,"_getOptimalPosition",c3);let $g=zw;class Z$ extends qx{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const i=J$(t);return i&&i.isToggleable});this.items.forEach(t=>{const i=J$(t);i&&(i.hasCheckSpace=e)})}}function J$(n){return n instanceof $c?n.children.map(e=>eRe(e)?e.buttonView:e).find(e=>e instanceof Lp):null}function eRe(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof pr}class tRe extends qIe{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const eL=["mouseenter","arrowleft","arrowright","change:isOpen"];class nRe extends un{constructor(t){super(t);$(this,"children");$(this,"menus",[]);const i=t.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":i("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,i,s=[]){const r=this.locale,a=DPe({normalizedConfig:t,locale:r,componentFactory:i,extraItems:s}).items.map(l=>this._createMenu({componentFactory:i,menuDefinition:l}));this.children.addMany(a)}render(){super.render(),of.toggleMenusAndFocusItemsOnHover(this),of.closeMenusWhenTheBarCloses(this),of.closeMenuWhenAnotherOnTheSameLevelOpens(this),of.focusCycleMenusOnArrows(this),of.closeOnClickOutside(this),of.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}registerMenu(t,i=null){i?(t.delegate(...eL).to(i),t.parentMenuView=i):t.delegate(...eL).to(this,s=>"menu:"+s),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:i,parentMenuView:s}){const r=this.locale,o=new $g(r);return this.registerMenu(o,s),o.buttonView.set({label:i.label}),o.once("change:isOpen",()=>{const a=new Z$(r);a.ariaLabel=i.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:i,parentMenuView:o,componentFactory:t}))}),o}_createMenuItems({menuDefinition:t,parentMenuView:i,componentFactory:s}){const r=this.locale,o=[];for(const a of t.groups){for(const l of a.items){const c=new gz(r,i);if(rs(l))c.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:i}));else{const d=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:i});if(!d)continue;c.children.add(d)}o.push(c)}a!==t.groups[t.groups.length-1]&&o.push(new A3(r))}return o}_createMenuItemContentFromFactory({componentName:t,parentMenuView:i,componentFactory:s}){const r=s.create(t);return r instanceof $g||r instanceof cm||r instanceof tRe?(this._registerMenuTree(r,i),r.on("execute",()=>{this.close()}),r):(is("menu-bar-component-unsupported",{componentName:t,componentView:r}),null)}_registerMenuTree(t,i){if(!(t instanceof $g)){t.delegate("mouseenter").to(i);return}this.registerMenu(t,i);const s=t.panelView.children.filter(o=>o instanceof Z$)[0];if(!s){t.delegate("mouseenter").to(i);return}const r=s.items.filter(o=>o instanceof $c);for(const o of r)this._registerMenuTree(o.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(i,s,r)=>{clearTimeout(t),r?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wz{constructor(e,t=20){$(this,"model");$(this,"limit");$(this,"_isLocked");$(this,"_size");$(this,"_batch",null);$(this,"_changeCallback");$(this,"_selectionChangeCallback");this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}class iRe extends Ml{constructor(t,i){super(t);$(this,"_buffer");this._buffer=new wz(t.model,i),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const i=this.editor.model,s=i.document,r=t.text||"",o=r.length;let a=s.selection;if(t.selection?a=t.selection:t.range&&(a=i.createSelection(t.range)),!i.canEditAt(a))return;const l=t.resultRange;i.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const d=Array.from(s.selection.getAttributes());i.deleteContent(a),r&&i.insertContent(c.createText(r,d),a),l?c.setSelection(l):a.is("documentSelection")||c.setSelection(a),this._buffer.unlock(),this._buffer.input(o)})}}const xz=["insertText","insertReplacementText"],sRe=[...xz,"insertCompositionText"];class rRe extends Uc{constructor(t){super(t);$(this,"focusObserver");this.focusObserver=t.getObserver(sw);const i=bn.isAndroid?sRe:xz,s=t.document;s.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:a,targetRanges:l,inputType:c,domEvent:d}=o;if(!i.includes(c))return;this.focusObserver.flush();const u=new Ic(s,"insertText");s.fire(u,new Rp(t,d,{text:a,selection:t.createSelection(l)})),u.stop.called&&r.stop()}),bn.isAndroid||s.on("compositionend",(r,{data:o,domEvent:a})=>{this.isEnabled&&o&&s.fire("insertText",new Rp(t,a,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}class oRe extends tn{constructor(){super(...arguments);$(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,i=t.model,s=t.editing.view,r=t.editing.mapper,o=i.document.selection;this._compositionQueue=new aRe(t),s.addObserver(rRe);const a=new iRe(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",a),t.commands.add("input",a),this.listenTo(s.document,"insertText",(l,c)=>{s.document.isComposing||c.preventDefault(),bn.isAndroid&&s.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:d,selection:u}=c;let h;u?h=Array.from(u.getRanges()).map(g=>r.toModelRange(g)):h=Array.from(o.getRanges());let f=d;if(bn.isAndroid){const g=Array.from(h[0].getItems()).reduce((b,w)=>b+(w.is("$textProxy")?w.data:""),"");if(g&&(g.length<=f.length?f.startsWith(g)&&(f=f.substring(g.length),h[0].start=h[0].start.getShiftedBy(g.length)):g.startsWith(f)&&(h[0].start=h[0].start.getShiftedBy(f.length),f="")),f.length==0&&h[0].isCollapsed)return}const m={text:f,selection:i.createSelection(h)};bn.isAndroid&&s.document.isComposing?this._compositionQueue.push(m):(t.execute("insertText",m),s.scrollToTheSelection())}),bn.isAndroid?this.listenTo(s.document,"keydown",(l,c)=>{o.isCollapsed||c.keyCode!=229||!s.document.isComposing||tL(i,a)}):this.listenTo(s.document,"compositionstart",()=>{o.isCollapsed||tL(i,a)}),bn.isAndroid?(this.listenTo(s.document,"mutations",(l,{mutations:c})=>{if(s.document.isComposing)for(const{node:d}of c){const u=cRe(d,r),h=r.toModelElement(u);if(this._compositionQueue.isComposedElement(h)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(s.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(s.document,"compositionend",()=>{const l=[];for(const c of this._compositionQueue.flushComposedElements()){const d=r.toViewElement(c);d&&l.push({type:"children",node:d})}l.length&&s.document.fire("mutations",{mutations:l})},{priority:"lowest"})):this.listenTo(s.document,"compositionend",()=>{s.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class aRe{constructor(e){$(this,"editor");$(this,"flushDebounced",Sc(()=>this.flush("timeout"),50));$(this,"_queue",[]);$(this,"_compositionElements",new Set);this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){const t={text:e.text};if(e.selection){t.selectionRanges=[];for(const i of e.selection.getRanges())t.selectionRanges.push(go.fromRange(i)),this._compositionElements.add(i.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){const e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){const i=e.selectionRanges.map(s=>lRe(s)).filter(s=>!!s);i.length&&(t.selection=this.editor.model.createSelection(i))}return t}flush(e){const t=this.editor,i=t.model,s=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=t.commands.get("insertText").buffer;i.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();t.execute("insertText",a)}o.unlock()}),s.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){const e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}}function tL(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function lRe(n){const e=n.toRange();return n.detach(),e.root.rootName=="$graveyard"?null:e}function cRe(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}class nL extends Ml{constructor(t,i){super(t);$(this,"direction");$(this,"_buffer");this.direction=i,this._buffer=new wz(t.model,t.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(t={}){const i=this.editor.model,s=i.document;i.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(t.selection||s.selection);if(!i.canEditAt(o))return;const a=t.sequence||1,l=o.isCollapsed;if(o.isCollapsed&&i.modifySelection(o,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(a)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,a)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let c=0;o.getFirstRange().getMinimalFlatRanges().forEach(d=>{c+=oC(d.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),i.deleteContent(o,{doNotResetEntireContent:l,direction:this.direction}),this._buffer.input(c),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const i=this.editor.model,r=i.document.selection,o=i.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!i.schema.checkChild(o,"paragraph"))return!1;const l=o.getChild(0);return!(l&&l.is("element","paragraph"))}_replaceEntireContentWithParagraph(t){const i=this.editor.model,r=i.document.selection,o=i.schema.getLimitElement(r),a=t.createElement("paragraph");t.remove(t.createRangeIn(o)),t.insert(a,o),t.setSelection(a,0)}_shouldReplaceFirstBlockWithParagraph(t,i){const s=this.editor.model;if(i>1||this.direction!="backward"||!t.isCollapsed)return!1;const r=t.getFirstPosition(),o=s.schema.getLimitElement(r),a=o.getChild(0);return!(r.parent!=a||!t.containsEntireContent(a)||!s.schema.checkChild(o,"paragraph")||a.name=="paragraph")}}const dRe="character",iL="word",uRe="codePoint",gd="selection",Sf="backward",sg="forward",_z={deleteContent:{unit:gd,direction:Sf},deleteContentBackward:{unit:uRe,direction:Sf},deleteWordBackward:{unit:iL,direction:Sf},deleteHardLineBackward:{unit:gd,direction:Sf},deleteSoftLineBackward:{unit:gd,direction:Sf},deleteContentForward:{unit:dRe,direction:sg},deleteWordForward:{unit:iL,direction:sg},deleteHardLineForward:{unit:gd,direction:sg},deleteSoftLineForward:{unit:gd,direction:sg}};class hRe extends Uc{constructor(e){super(e);const t=e.document;let i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:l}=r,c=_z[l];if(!c)return;const d={direction:c.direction,unit:c.unit,sequence:i};d.unit==gd&&(d.selectionToRemove=e.createSelection(o[0])),l==="deleteContentBackward"&&(bn.isAndroid&&(d.sequence=1),pRe(o)&&(d.unit=gd,d.selectionToRemove=e.createSelection(o)));const u=new om(t,"delete",o[0]);t.fire(u,new Rp(e,a,d)),u.stop.called&&s.stop()}),bn.isBlink&&fRe(this)}observe(){}stopObserving(){}}function fRe(n){const e=n.view,t=e.document;let i=null,s=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,s=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{const d=t.selection,u=n.isEnabled&&l==i&&r(l)&&!d.isCollapsed&&!s;if(i=null,u){const h=d.getFirstRange(),f=new om(t,"delete",h),m={unit:gd,direction:o(l),selectionToRemove:d};t.fire(f,new Rp(e,c,m))}}),t.on("beforeinput",(a,{inputType:l})=>{const c=_z[l];r(i)&&c&&c.direction==o(i)&&(s=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==On.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function r(a){return a==On.backspace||a==On.delete}function o(a){return a==On.backspace?Sf:sg}}function pRe(n){if(n.length!=1||n[0].isCollapsed)return!1;const e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:i,item:s}of e){if(i.parent.is("$text")){const r=i.parent.data,o=i.offset;if(f3(r,o)||p3(r,o)||iU(r,o))continue;t++}else(s.is("containerElement")||s.is("emptyElement"))&&t++;if(t>1)return!0}return!1}class Ab extends tn{constructor(){super(...arguments);$(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,i=t.editing.view,s=i.document,r=t.model.document;i.addObserver(hRe),this._undoOnBackspace=!1;const o=new nL(t,"forward");t.commands.add("deleteForward",o),t.commands.add("forwardDelete",o),t.commands.add("delete",new nL(t,"backward")),this.listenTo(s,"delete",(a,l)=>{s.isComposing||l.preventDefault();const{direction:c,sequence:d,selectionToRemove:u,unit:h}=l,f=c==="forward"?"deleteForward":"delete",m={sequence:d};if(h=="selection"){const g=Array.from(u.getRanges()).map(b=>t.editing.mapper.toModelRange(b));m.selection=t.model.createSelection(g)}else m.unit=h;t.execute(f,m),i.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(s,"delete",(a,l)=>{this._undoOnBackspace&&l.direction=="backward"&&l.sequence==1&&l.unit=="codePoint"&&(this._undoOnBackspace=!1,t.execute("undo"),l.preventDefault(),a.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class kz extends tn{static get requires(){return[oRe,Ab]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mRe(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((s,{item:r})=>r.is("$text")||r.is("$textProxy")?s+r.data:(t=e.createPositionAfter(r),""),""),range:e.createRange(t,n.end)}}class gRe extends gs(){constructor(t,i){super();$(this,"model");$(this,"testCallback");$(this,"_hasMatch");this.model=t,this.testCallback=i,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const i=this.model.document;this.listenTo(i.selection,"change:range",(s,{directChange:r})=>{if(r){if(!i.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(i,"change:data",(s,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(t,i={}){const s=this.model,o=s.document.selection,a=s.createRange(s.createPositionAt(o.focus.parent,0),o.focus),{text:l,range:c}=mRe(a,s),d=this.testCallback(l);if(!d&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!d,d){const u=Object.assign(i,{text:l,range:c});typeof d=="object"&&Object.assign(u,d),this.fire("matched:".concat(t),u)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function id(n,e,t,i){let s,r=null;typeof i=="function"?s=i:(r=n.commands.get(i),s=()=>{n.execute(i)}),n.model.document.on("change:data",(o,a)=>{if(r&&!r.isEnabled||!e.isEnabled)return;const l=zd(n.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(n.model.document.differ.getChanges()),d=c[0];if(c.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const u=d.position.parent;if(u.is("element","codeBlock")||u.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||r&&r.value===!0)return;const h=u.getChild(0),f=n.model.createRangeOn(h);if(!f.containsRange(l)&&!l.end.isEqual(f.end))return;const m=t.exec(h.data.substr(0,l.end.offset));m&&n.model.enqueueChange(g=>{const b=g.createPositionAt(u,0),w=g.createPositionAt(u,m[0].length),x=new go(b,w);if(s({match:m})!==!1){g.remove(x);const E=n.model.document.selection.getFirstRange(),T=g.createRangeIn(u);u.isEmpty&&!T.isEqual(E)&&!T.containsRange(E,!0)&&g.remove(u)}x.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lf(n,e,t,i){let s,r;t instanceof RegExp?s=t:r=t,r=r||(o=>{let a;const l=[],c=[];for(;(a=s.exec(o))!==null&&!(a&&a.length<4);){let{index:d,"1":u,"2":h,"3":f}=a;const m=u+h+f;d+=a[0].length-m.length;const g=[d,d+u.length],b=[d+u.length+h.length,d+u.length+h.length+f.length];l.push(g),l.push(b),c.push([d+u.length,d+u.length+h.length])}return{remove:l,format:c}}),n.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const l=n.model,c=l.document.selection;if(!c.isCollapsed)return;const d=Array.from(l.document.differ.getChanges()),u=d[0];if(d.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const h=c.focus,f=h.parent,{text:m,range:g}=bRe(l.createRange(l.createPositionAt(f,0),h),l),b=r(m),w=sL(g.start,b.format,l),x=sL(g.start,b.remove,l);w.length&&x.length&&l.enqueueChange(k=>{if(i(k,w)!==!1){for(const T of x.reverse())k.remove(T);l.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function sL(n,e,t){return e.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>t.createRange(n.getShiftedBy(i[0]),n.getShiftedBy(i[1])))}function bRe(n,e){let t=n.start;return{text:Array.from(n.getItems()).reduce((s,r)=>!(r.is("$text")||r.is("$textProxy"))||r.getAttribute("code")?(t=e.createPositionAfter(r),""):s+r.data,""),range:e.createRange(t,n.end)}}class vRe extends tn{static get requires(){return[Ab]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&id(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&id(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&id(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&id(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=nv(this.editor,"bold");lf(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),lf(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=nv(this.editor,"italic");lf(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),lf(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=nv(this.editor,"code");lf(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=nv(this.editor,"strikethrough");lf(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const i=t[7],s=new RegExp("^(#{".concat(i,"})\\s$"));id(this.editor,this,s,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&id(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&id(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&id(this.editor,this,/^---$/,"horizontalLine")}}function nv(n,e){return(t,i)=>{if(!n.commands.get(e).isEnabled)return!1;const r=n.model.schema.getValidRanges(i,e);for(const o of r)t.setAttribute(e,!0,o);t.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*Ez(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class yRe extends Ml{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,i=t.document.selection,s=t.schema,r=i.isCollapsed,o=i.getFirstRange(),a=o.start.parent,l=o.end.parent;if(s.isLimit(a)||s.isLimit(l))return!r&&a==l&&t.deleteContent(i),!1;if(r){const c=Ez(e.model.schema,i.getAttributes());return rL(e,o.start),e.setSelectionAttribute(c),!0}else{const c=!(o.start.isAtStart&&o.end.isAtEnd),d=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(d)return rL(e,i.focus),!0;e.setSelection(l,0)}}return!1}}function rL(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}const wRe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Tz extends Uc{constructor(e){super(e);const t=this.document;let i=!1;t.on("keydown",(s,r)=>{i=r.shiftKey}),t.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;let o=r.inputType;bn.isSafari&&i&&o=="insertParagraph"&&(o="insertLineBreak");const a=r.domEvent,l=wRe[o];if(!l)return;const c=new om(t,"enter",r.targetRanges[0]);t.fire(c,new Rp(e,a,{isSoft:l.isSoft})),c.stop.called&&s.stop()})}observe(){}stopObserving(){}}class Kx extends tn{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,s=this.editor.t;t.addObserver(Tz),e.commands.add("enter",new yRe(e)),this.listenTo(i,"enter",(r,o)=>{i.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class xRe extends Ml{execute(){const e=this.editor.model,t=e.document;e.change(i=>{kRe(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=_Re(e.schema,t.selection)}}function _Re(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const i=e.getFirstRange(),s=i.start.parent,r=i.end.parent;return!((kC(s,n)||kC(r,n))&&s!==r)}function kRe(n,e,t){const i=t.isCollapsed,s=t.getFirstRange(),r=s.start.parent,o=s.end.parent,a=r==o;if(i){const l=Ez(n.schema,t.getAttributes());oL(n,e,s.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?oL(n,e,t.focus):l&&e.setSelection(o,0)}}function oL(n,e,t){const i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function kC(n,e){return n.is("rootElement")?!1:e.isLimit(n)||kC(n.parent,e)}class ERe extends tn{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.conversion,s=e.editing.view,r=s.document,o=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(Tz),e.commands.add("shiftEnter",new xRe(e)),this.listenTo(r,"enter",(a,l)=>{r.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TRe extends Ml{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,s=t.document.selection,r=Array.from(s.getSelectedBlocks()),o=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!o)this._removeQuote(a,r.filter(iv));else{const l=r.filter(c=>iv(c)||lL(i,c));this._applyQuote(a,l)}})}_getValue(){const e=this.editor.model.document.selection,t=zd(e.getSelectedBlocks());return!!(t&&iv(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=zd(e.getSelectedBlocks());return i?lL(t,i):!1}_removeQuote(e,t){aL(e,t).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd){e.unwrap(i.start.parent);return}if(i.start.isAtStart){const r=e.createPositionBefore(i.start.parent);e.move(i,r);return}i.end.isAtEnd||e.split(i.end);const s=e.createPositionAfter(i.end.parent);e.move(i,s)})}_applyQuote(e,t){const i=[];aL(e,t).reverse().forEach(s=>{let r=iv(s.start);r||(r=e.createElement("blockQuote"),e.wrap(s,r)),i.push(r)}),i.reverse().reduce((s,r)=>s.nextSibling==r?(e.merge(e.createPositionAfter(s)),s):r)}}function iv(n){return n.parent.name=="blockQuote"?n.parent:null}function aL(n,e){let t,i=0;const s=[];for(;i<e.length;){const r=e[i],o=e[i+1];t||(t=n.createPositionBefore(r)),(!o||r.nextSibling!=o)&&(s.push(n.createRange(t,n.createPositionAfter(r))),t=null),i++}return s}function lL(n,e){const t=n.checkChild(e.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],e);return t&&i}class CRe extends tn{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Kx,Ab]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new TRe(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(o=>{const a=e.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return o.remove(c),!0;if(c.is("element","blockQuote")&&!t.checkChild(l.position,c))return o.unwrap(c),!0;if(c.is("element")){const d=o.createRangeIn(c);for(const u of d.getItems())if(u.is("element","blockQuote")&&!t.checkChild(o.createPositionBefore(u),u))return o.unwrap(u),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return o.remove(c),!0}return!1});const i=this.editor.editing.view.document,s=e.model.document.selection,r=e.commands.get("blockQuote");this.listenTo(i,"enter",(o,a)=>{if(!s.isCollapsed||!r.value)return;s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(o,a)=>{if(a.direction!="backward"||!s.isCollapsed||!r.value)return;const l=s.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"})}}class SRe extends tn{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(pr);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(cm);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("blockQuote"),r=new e(t.locale),o=i.t;return r.set({label:o("Block quote"),icon:Ss.quote,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value"),this.listenTo(r,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),r}}class ARe extends tn{static get requires(){return[CRe,SRe]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IRe extends Ri(){constructor(){super(...arguments);$(this,"_stack",[])}add(t,i){const s=this._stack,r=s[0];this._insertDescriptor(t);const o=s[0];r!==o&&!Dk(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:i})}remove(t,i){const s=this._stack,r=s[0];this._removeDescriptor(t);const o=s[0];r!==o&&!Dk(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:i})}_insertDescriptor(t){const i=this._stack,s=i.findIndex(o=>o.id===t.id);if(Dk(t,i[s]))return;s>-1&&i.splice(s,1);let r=0;for(;i[r]&&PRe(i[r],t);)r++;i.splice(r,0,t)}_removeDescriptor(t){const i=this._stack,s=i.findIndex(r=>r.id===t);s>-1&&i.splice(s,1)}}function Dk(n,e){return n&&e&&n.priority==e.priority&&dw(n.classes)==dw(e.classes)}function PRe(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:dw(n.classes)>dw(e.classes)}function dw(n){return Array.isArray(n)?n.sort().join(","):n}var RRe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const $Re="ck-widget",cL="ck-widget_selected";function js(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function Cz(n,e,t={}){if(!n.is("containerElement"))throw new _e("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass($Re,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=FRe,e.setCustomProperty("widgetLabel",[],n),t.label&&MRe(n,t.label),t.hasSelectionHandle&&BRe(n,e),DRe(n,e),n}function LRe(n,e,t){if(e.classes&&t.addClass(cs(e.classes),n),e.attributes)for(const i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function ORe(n,e,t){if(e.classes&&t.removeClass(cs(e.classes),n),e.attributes)for(const i in e.attributes)t.removeAttribute(i,n)}function DRe(n,e,t=LRe,i=ORe){const s=new IRe;s.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});const r=(a,l,c)=>s.add(l,c),o=(a,l,c)=>s.remove(l,c);e.setCustomProperty("addHighlight",r,n),e.setCustomProperty("removeHighlight",o,n)}function MRe(n,e){n.getCustomProperty("widgetLabel").push(e)}function NRe(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function FRe(){return null}function BRe(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const s=this.toDomElement(i),r=new Rc;return r.set("content",RRe),r.render(),s.appendChild(r.element),s});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}const tc="widget-type-around";function Su(n,e,t){return!!n&&js(n)&&!t.isInline(e)}function VRe(n){return n.closest(".ck-widget__type-around__button")}function URe(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function zRe(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function Au(n){return n.getAttribute(tc)}var HRe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const Sz=["before","after"],jRe=new DOMParser().parseFromString(HRe,"image/svg+xml").firstChild,dL="ck-widget__type-around_disabled";class GRe extends tn{constructor(){super(...arguments);$(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Kx,Ab]}init(){const t=this.editor,i=t.editing.view;this.on("change:isEnabled",(s,r,o)=>{i.change(a=>{for(const l of i.document.roots)o?a.removeClass(dL,l):a.addClass(dL,l)}),o||t.model.change(a=>{a.removeSelectionAttribute(tc)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,i){const s=this.editor,r=s.editing.view,o=s.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);s.execute("insertParagraph",{position:s.model.createPositionAt(t,i),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(t,i,s,r){this.listenTo(t,i,(...o)=>{this.isEnabled&&s(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const s=this.editor.model.document.selection,r=Au(s);if(!r)return!1;const o=s.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){const t=this.editor,i=t.model.schema,s=t.locale.t,r={before:s("Insert paragraph before block"),after:s("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",(o,a,l)=>{const c=l.mapper.toViewElement(a.item);c&&Su(c,a.item,i)&&(WRe(l.writer,r,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?s("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,i=t.model,s=i.document.selection,r=i.schema,o=t.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(l,c)=>{this._handleArrowKeyPress(l,c)},{context:[js,"$text"],priority:"high"}),this._listenToIfEnabled(s,"change:range",(l,c)=>{c.directChange&&t.model.change(d=>{d.removeSelectionAttribute(tc)})}),this._listenToIfEnabled(i.document,"change:data",()=>{const l=s.getSelectedElement();if(l){const c=t.editing.mapper.toViewElement(l);if(Su(c,l,r))return}t.model.change(c=>{c.removeSelectionAttribute(tc)})}),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",(l,c,d)=>{const u=d.writer;if(this._currentFakeCaretModelElement){const g=d.mapper.toViewElement(this._currentFakeCaretModelElement);g&&(u.removeClass(Sz.map(a),g),this._currentFakeCaretModelElement=null)}const h=c.selection.getSelectedElement();if(!h)return;const f=d.mapper.toViewElement(h);if(!Su(f,h,r))return;const m=Au(c.selection);m&&(u.addClass(a(m),f),this._currentFakeCaretModelElement=h)}),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",(l,c,d)=>{d||t.model.change(u=>{u.removeSelectionAttribute(tc)})});function a(l){return"ck-widget_type-around_show-fake-caret_".concat(l)}}_handleArrowKeyPress(t,i){const s=this.editor,r=s.model,o=r.document.selection,a=r.schema,l=s.editing.view,c=i.keyCode,d=eSe(c,s.locale.contentLanguageDirection),u=l.document.selection.getSelectedElement(),h=s.editing.mapper.toModelElement(u);let f;Su(u,h,a)?f=this._handleArrowKeyPressOnSelectedWidget(d):o.isCollapsed?f=this._handleArrowKeyPressWhenSelectionNextToAWidget(d):i.shiftKey||(f=this._handleArrowKeyPressWhenNonCollapsedSelection(d)),f&&(i.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const s=this.editor.model,r=s.document.selection,o=Au(r);return s.change(a=>{if(o){if(!(o===(t?"after":"before")))return a.removeSelectionAttribute(tc),!0}else return a.setSelectionAttribute(tc,t?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const i=this.editor,s=i.model,r=s.schema,o=i.plugins.get("Widget"),a=o._getObjectElementNextToSelection(t),l=i.editing.mapper.toViewElement(a);return Su(l,a,r)?(s.change(c=>{o._setSelectionOverElement(a),c.setSelectionAttribute(tc,t?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(t){const i=this.editor,s=i.model,r=s.schema,o=i.editing.mapper,a=s.document.selection,l=t?a.getLastPosition().nodeBefore:a.getFirstPosition().nodeAfter,c=o.toViewElement(l);return Su(c,l,r)?(s.change(d=>{d.setSelection(l,"on"),d.setSelectionAttribute(tc,t?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,i=t.editing.view;this._listenToIfEnabled(i.document,"mousedown",(s,r)=>{const o=VRe(r.domTarget);if(!o)return;const a=URe(o),l=zRe(o,i.domConverter),c=t.editing.mapper.toModelElement(l);this._insertParagraph(c,a),r.preventDefault(),s.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,i=t.model.document.selection,s=t.editing.view;this._listenToIfEnabled(s.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const a=i.getSelectedElement(),l=t.editing.mapper.toViewElement(a),c=t.model.schema;let d;this._insertParagraphAccordingToFakeCaretPosition()?d=!0:Su(l,a,c)&&(this._insertParagraph(a,o.isSoft?"before":"after"),d=!0),d&&(o.preventDefault(),r.stop())},{context:js})}_enableInsertingParagraphsOnTypingKeystroke(){const i=this.editor.editing.view.document;this._listenToIfEnabled(i,"insertText",(s,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=i.selection)},{priority:"high"}),bn.isAndroid?this._listenToIfEnabled(i,"keydown",(s,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(i,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const t=this.editor,i=t.editing.view,s=t.model,r=s.schema;this._listenToIfEnabled(i.document,"delete",(o,a)=>{if(o.eventPhase!="atTarget")return;const l=Au(s.document.selection);if(!l)return;const c=a.direction,d=s.document.selection.getSelectedElement(),u=l==="before",h=c=="forward";if(u===h)t.execute("delete",{selection:s.createSelection(d,"on")});else{const m=r.getNearestSelectionRange(s.createPositionAt(d,l),c);if(m)if(!m.isCollapsed)s.change(g=>{g.setSelection(m),t.execute(h?"deleteForward":"delete")});else{const g=s.createSelection(m.start);if(s.modifySelection(g,{direction:c}),!g.focus.isEqual(m.start))s.change(b=>{b.setSelection(m),t.execute(h?"deleteForward":"delete")});else{const b=YRe(r,m.start.parent);s.deleteContent(s.createSelection(b,"on"),{doNotAutoparagraph:!0})}}}a.preventDefault(),o.stop()},{context:js})}_enableInsertContentIntegration(){const t=this.editor,i=this.editor.model,s=i.document.selection;this._listenToIfEnabled(t.model,"insertContent",(r,[o,a])=>{if(a&&!a.is("documentSelection"))return;const l=Au(s);if(l)return r.stop(),i.change(c=>{const d=s.getSelectedElement(),u=i.createPositionAt(d,l),h=c.createSelection(u),f=i.insertContent(o,h);return c.setSelection(h),f})},{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",(r,o)=>{const[,a,l={}]=o;if(a&&!a.is("documentSelection"))return;const c=Au(s);c&&(l.findOptimalPosition=c,o[3]=l)},{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;Au(s)&&r.stop()},{priority:"high"})}}function WRe(n,e,t){const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const r=this.toDomElement(s);return qRe(r,e),KRe(r),r});n.insert(n.createPositionAt(t,"end"),i)}function qRe(n,e){for(const t of Sz){const i=new Sa({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_".concat(t)],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(jRe,!0)]});n.appendChild(i.render())}}function KRe(n){const e=new Sa({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function YRe(n,e){let t=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}function XRe(n){const e=n.model;return(t,i)=>{const s=i.keyCode==On.arrowup,r=i.keyCode==On.arrowdown,o=i.shiftKey,a=e.document.selection;if(!s&&!r)return;const l=r;if(o&&JRe(a,l))return;const c=QRe(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(o)return}(c.isCollapsed||ZRe(n,c,l))&&(e.change(d=>{const u=l?c.end:c.start;if(o){const h=e.createSelection(a.anchor);h.setFocus(u),d.setSelection(h)}else d.setSelection(u)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function QRe(n,e,t){const i=n.model;if(t){const s=e.isCollapsed?e.focus:e.getLastPosition(),r=uL(i,s,"forward");if(!r)return null;const o=i.createRange(s,r),a=hL(i.schema,o,"backward");return a?i.createRange(s,a):null}else{const s=e.isCollapsed?e.focus:e.getFirstPosition(),r=uL(i,s,"backward");if(!r)return null;const o=i.createRange(r,s),a=hL(i.schema,o,"forward");return a?i.createRange(a,s):null}}function uL(n,e,t){const i=n.schema,s=n.createRangeIn(e.root),r=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:l}of s.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return o;if(l==r&&i.isBlock(a))return null}return null}function hL(n,e,t){const i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:s}of e.getWalker({direction:t}))if(n.checkChild(s,"$text"))return s;return null}function ZRe(n,e,t){const i=n.model,s=n.view.domConverter;if(t){const c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}const r=n.mapper.toViewRange(e),o=s.viewRangeToDom(r),a=Sn.getDomRangeRects(o);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function JRe(n,e){return!n.isCollapsed&&n.isBackward==e}class Az extends tn{constructor(){super(...arguments);$(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[GRe,Ab]}init(){const t=this.editor,i=t.editing.view,s=i.document,r=t.t;this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{const c=l.writer,d=a.selection;if(d.isCollapsed)return;const u=d.getSelectedElement();if(!u)return;const h=t.editing.mapper.toViewElement(u);js(h)&&l.consumable.consume(d,"selection")&&c.setSelection(c.createRangeOn(h),{fake:!0,label:NRe(h)})}),this.editor.editing.downcastDispatcher.on("selection",(o,a,l)=>{this._clearPreviouslySelectedWidgets(l.writer);const c=l.writer,d=c.document.selection;let u=null;for(const h of d.getRanges())for(const f of h){const m=f.item;js(m)&&!n6e(m,u)&&(c.addClass(cL,m),this._previouslySelected.add(m),u=m)}},{priority:"low"}),i.addObserver(qU),this.listenTo(s,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(s,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[js,"$text"]}),this.listenTo(s,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(s,"arrowKey",XRe(this.editor.editing),{context:"$text"}),this.listenTo(s,"delete",(o,a)=>{this._handleDelete(a.direction=="forward")&&(a.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(s,"tab",(o,a)=>{o.eventPhase=="atTarget"&&(a.shiftKey||this._selectFirstNestedEditable()&&(a.preventDefault(),o.stop()))},{context:js,priority:"low"}),this.listenTo(s,"tab",(o,a)=>{a.shiftKey&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(s,"keydown",(o,a)=>{a.keystroke==On.esc&&this._selectAncestorWidget()&&(a.preventDefault(),o.stop())},{priority:"low"}),t.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(t,i){const s=this.editor,r=s.editing.view,o=r.document;let a=i.target;if(!a)return;if(i.domEvent.detail>=3){this._selectBlockContent(a)&&i.preventDefault();return}if(!js(a)){const c=e6e(a);if(!c)return;if(js(c))a=c;else{const d=t6e(r,i);if(d&&js(d))a=d;else return}}bn.isAndroid&&i.preventDefault(),o.isFocused||r.focus();const l=s.editing.mapper.toModelElement(a);this._setSelectionOverElement(l)}_selectBlockContent(t){const i=this.editor,s=i.model,r=i.editing.mapper,o=s.schema,a=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),l=i6e(r.toModelElement(a),s.schema);return l?(s.change(c=>{const d=o.isLimit(l)?null:s6e(c.createPositionAfter(l),o),u=c.createPositionAt(l,0),h=d?c.createPositionAt(d,0):c.createPositionAt(l,"end");c.setSelection(c.createRange(u,h))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(t,i){const s=i.keyCode,r=this.editor.model,o=r.schema,a=r.document.selection,l=a.getSelectedElement(),c=nU(s,this.editor.locale.contentLanguageDirection),d=c=="down"||c=="right",u=c=="up"||c=="down";if(l&&o.isObject(l)){const f=d?a.getLastPosition():a.getFirstPosition(),m=o.getNearestSelectionRange(f,d?"forward":"backward");m&&(r.change(g=>{g.setSelection(m)}),i.preventDefault(),t.stop());return}if(!a.isCollapsed&&!i.shiftKey){const f=a.getFirstPosition(),m=a.getLastPosition(),g=f.nodeAfter,b=m.nodeBefore;(g&&o.isObject(g)||b&&o.isObject(b))&&(r.change(w=>{w.setSelection(d?m:f)}),i.preventDefault(),t.stop());return}if(!a.isCollapsed)return;const h=this._getObjectElementNextToSelection(d);if(h&&o.isObject(h)){if(o.isInline(h)&&u)return;this._setSelectionOverElement(h),i.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,i){const s=this.editor.model,r=s.schema,o=s.document.selection.getSelectedElement();o&&r.isObject(o)&&(i.preventDefault(),t.stop())}_handleDelete(t){const s=this.editor.model.document.selection;if(!this.editor.model.canEditAt(s)||!s.isCollapsed)return;const r=this._getObjectElementNextToSelection(t);if(r)return this.editor.model.change(o=>{let a=s.anchor.parent;for(;a.isEmpty;){const l=a;a=l.parent,o.remove(l)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(t){this.editor.model.change(i=>{i.setSelection(i.createRangeOn(t))})}_getObjectElementNextToSelection(t){const i=this.editor.model,s=i.schema,r=i.document.selection,o=i.createSelection(r);if(i.modifySelection(o,{direction:t?"forward":"backward"}),o.isEqual(r))return null;const a=t?o.focus.nodeBefore:o.focus.nodeAfter;return a&&s.isObject(a)?a:null}_clearPreviouslySelectedWidgets(t){for(const i of this._previouslySelected)t.removeClass(cL,i);this._previouslySelected.clear()}_selectFirstNestedEditable(){const t=this.editor,s=this.editor.editing.view.document;for(const r of s.selection.getFirstRange().getItems())if(r.is("editableElement")){const o=t.editing.mapper.toModelElement(r);/* istanbul ignore next -- @preserve */if(!o)continue;const a=t.model.createPositionAt(o,0),l=t.model.schema.getNearestSelectionRange(a,"forward");return t.model.change(c=>{c.setSelection(l)}),!0}return!1}_selectAncestorWidget(){const t=this.editor,i=t.editing.mapper,r=t.editing.view.document.selection.getFirstPosition().parent,a=(r.is("$text")?r.parent:r).findAncestor(js);if(!a)return!1;const l=i.toModelElement(a);/* istanbul ignore next -- @preserve */return l?(t.model.change(c=>{c.setSelection(l,"on")}),!0):!1}}function e6e(n){let e=n;for(;e;){if(e.is("editableElement")||js(e))return e;e=e.parent}return null}function t6e(n,e){const t=WV(e.domEvent);let i=null;if(t?i=n.domConverter.domRangeToView(t):i=n.createRange(n.createPositionAt(e.target,0)),!i)return null;const s=i.start;if(!s.parent)return null;let r=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?r=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(r=s.nodeAfter)),r.is("$text")?r.parent:r}function n6e(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function i6e(n,e){for(const t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function s6e(n,e){const t=new mc({startPosition:n});for(const{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T0 extends am{constructor(t){super(t);$(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const i=this.document;this.listenTo(i,"paste",s("clipboardInput"),{priority:"low"}),this.listenTo(i,"drop",s("clipboardInput"),{priority:"low"}),this.listenTo(i,"dragover",s("dragging"),{priority:"low"});function s(r){return(o,a)=>{a.preventDefault();const l=a.dropRange?[a.dropRange]:null,c=new Ic(i,r);i.fire(c,{dataTransfer:a.dataTransfer,method:o.name,targetRanges:l,target:a.target,domEvent:a.domEvent}),c.stop.called&&a.stopPropagation()}}}onDomEvent(t){const i="clipboardData"in t?t.clipboardData:t.dataTransfer,s=t.type=="drop"||t.type=="paste",r={dataTransfer:new bU(i,{cacheFiles:s})};if(t.type=="drop"||t.type=="dragover"){const o=WV(t);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(t.type,t,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function r6e(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n="<p>".concat(n,"</p>")),n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function o6e(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fL=["figcaption","li"],pL=["ol","ul"];function Iz(n){if(n.is("$text")||n.is("$textProxy"))return n.data;if(n.is("element","img")&&n.hasAttribute("alt"))return n.getAttribute("alt");if(n.is("element","br"))return"\n";let e="",t=null;for(const i of n.getChildren())e+=a6e(i,t)+Iz(i),t=i;return e}function a6e(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||pL.includes(n.name)&&pL.includes(e.name)?"\n\n":!n.is("containerElement")&&!e.is("containerElement")?"":fL.includes(n.name)||fL.includes(e.name)?"\n":n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":"\n\n":""}class Pz extends tn{constructor(){super(...arguments);$(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(t,i){this._markersToCopy.set(t,i)}_copySelectedFragmentWithMarkers(t,i,s=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(i);const a=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,t),l=s(r),c=this._removeFakeMarkersInsideElement(r,l);for(const[d,u]of Object.entries(a)){c[d]||(c[d]=r.createRangeIn(l));for(const h of u)r.remove(h)}l.markers.clear();for(const[d,u]of Object.entries(c))l.markers.set(d,u);return r.setSelection(o),l})}_pasteMarkersIntoTransformedElement(t,i){const s=this._getPasteMarkersFromRangeMap(t);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,s),a=i(r),l=this._removeFakeMarkersInsideElement(r,a);for(const c of Object.values(o).flat())r.remove(c);for(const[c,d]of Object.entries(l))r.model.markers.has(c)||r.addMarker(c,{usingOperation:!0,affectsData:!0,range:d});return a})}_pasteFragmentWithMarkers(t){const i=this._getPasteMarkersFromRangeMap(t.markers);t.markers.clear();for(const s of i)t.markers.set(s.name,s.range);return this.editor.model.insertContent(t)}_forceMarkersCopy(t,i,s={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(t);this._markersToCopy.set(t,s),i(),r?this._markersToCopy.set(t,r):this._markersToCopy.delete(t)}_isMarkerCopyable(t,i){const s=this._getMarkerClipboardConfig(t);if(!s)return!1;if(!i)return!0;const{allowedActions:r}=s;return r==="all"||r.includes(i)}_hasMarkerConfiguration(t){return!!this._getMarkerClipboardConfig(t)}_getMarkerClipboardConfig(t){const[i]=t.split(":");return this._markersToCopy.get(i)||null}_insertFakeMarkersIntoSelection(t,i,s){const r=this._getCopyableMarkersFromSelection(t,i,s);return this._insertFakeMarkersElements(t,r)}_getCopyableMarkersFromSelection(t,i,s){const r=Array.from(i.getRanges()),o=new Set(r.flatMap(l=>Array.from(t.model.markers.getMarkersIntersectingRange(l)))),a=l=>{if(!this._isMarkerCopyable(l.name,s))return!1;const{copyPartiallySelected:d}=this._getMarkerClipboardConfig(l.name);if(!d){const u=l.getRange();return r.some(h=>h.containsRange(u,!0))}return!0};return Array.from(o).filter(a).map(l=>({name:s==="dragstart"?this._getUniqueMarkerName(l.name):l.name,range:l.getRange()}))}_getPasteMarkersFromRangeMap(t,i=null){const{model:s}=this.editor;return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).flatMap(([o,a])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:a}];if(this._isMarkerCopyable(o,i)){const l=this._getMarkerClipboardConfig(o),c=s.markers.has(o)&&s.markers.get(o).getRange().root.rootName==="$graveyard";return(l.duplicateOnPaste||c)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:a}]}return[]})}_insertFakeMarkersElements(t,i){const s={},r=i.flatMap(o=>{const{start:a,end:l}=o.range;return[{position:a,marker:o,type:"start"},{position:l,marker:o,type:"end"}]}).sort(({position:o},{position:a})=>o.isBefore(a)?1:-1);for(const{position:o,marker:a,type:l}of r){const c=t.createElement("$marker",{"data-name":a.name,"data-type":l});s[a.name]||(s[a.name]=[]),s[a.name].push(c),t.insert(c,o)}return s}_removeFakeMarkersInsideElement(t,i){const r=this._getAllFakeMarkersFromElement(t,i).reduce((o,a)=>{const l=a.markerElement&&t.createPositionBefore(a.markerElement);let c=o[a.name],d=!1;return c&&c.start&&c.end&&(this._getMarkerClipboardConfig(a.name).duplicateOnPaste?o[this._getUniqueMarkerName(a.name)]=o[a.name]:d=!0,c=null),d||(o[a.name]={...c,[a.type]:l}),a.markerElement&&t.remove(a.markerElement),o},{});return ZTe(r,o=>new We(o.start||t.createPositionFromPath(i,[0]),o.end||t.createPositionAt(i,"end")))}_getAllFakeMarkersFromElement(t,i){const s=Array.from(t.createRangeIn(i)).flatMap(({item:a})=>{if(!a.is("element","$marker"))return[];const l=a.getAttribute("data-name"),c=a.getAttribute("data-type");return[{markerElement:a,name:l,type:c}]}),r=[],o=[];for(const a of s)a.type==="end"&&(s.some(c=>c.name===a.name&&c.type==="start")||r.push({markerElement:null,name:a.name,type:"start"})),a.type==="start"&&(s.some(c=>c.name===a.name&&c.type==="end")||o.unshift({markerElement:null,name:a.name,type:"end"}));return[...r,...s,...o]}_getUniqueMarkerName(t){const i=t.split(":"),s=Oa().substring(1,6);return i.length===3?"".concat(i.slice(0,2).join(":"),":").concat(s):"".concat(i.join(":"),":").concat(s)}}class C0 extends tn{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[Pz]}init(){this.editor.editing.view.addObserver(T0),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const r=s._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:r,method:i})})}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(o,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let u="";l.getData("text/html")?u=o6e(l.getData("text/html")):l.getData("text/plain")&&(u=r6e(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(u)}const d=new Ic(this,"inputTransformation");this.fire(d,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),d.stop.called&&o.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=r._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,s=e.editing.view.document,r=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,o.name)};this.listenTo(s,"copy",r,{priority:"low"}),this.listenTo(s,"cut",(o,a)=>{e.model.canEditAt(e.model.document.selection)?r(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=e.data.toView(a.content);s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",Iz(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}const Mk=Tb("px");class l6e extends un{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>Mk(t)),top:e.to("top",t=>Mk(t)),width:e.to("width",t=>Mk(t))}}})}}class sv extends tn{constructor(){super(...arguments);$(this,"removeDropMarkerDelayed",h3(()=>this.removeDropMarker(),40));$(this,"_updateDropMarkerThrottled",p0(t=>this._updateDropMarker(t),40));$(this,"_reconvertMarkerThrottled",p0(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));$(this,"_dropTargetLineView",new l6e);$(this,"_domEmitter",new(za()));$(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:t}of this._scrollables.values())t.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(t,i,s,r,o,a){this.removeDropMarkerDelayed.cancel();const l=mL(this.editor,t,i,s,r,o,a);/* istanbul ignore next -- @preserve */if(l){if(a&&a.containsRange(l))return this.removeDropMarker();this._updateDropMarkerThrottled(l)}}getFinalDropRange(t,i,s,r,o,a){const l=mL(this.editor,t,i,s,r,o,a);return this.removeDropMarker(),l}removeDropMarker(){const t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change(i=>{i.removeMarker("drop-target")})}_setupDropMarker(){const t=this.editor;t.ui.view.body.add(this._dropTargetLineView),t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(i,{writer:s})=>{if(t.model.schema.checkChild(i.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(s);i.markerRange.isCollapsed?this._updateDropTargetLine(i.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(t){const i=this.editor,s=i.model.markers;i.model.change(r=>{s.has("drop-target")?s.get("drop-target").getRange().isEqual(t)||r.updateMarker("drop-target",{range:t}):r.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(i){const s=this.toDomElement(i);return s.append("⁠",i.createElement("span"),"⁠"),s})}_updateDropTargetLine(t){const i=this.editor.editing,s=t.start.nodeBefore,r=t.start.nodeAfter,o=t.start.parent,a=s?i.mapper.toViewElement(s):null,l=a?i.view.domConverter.mapViewToDom(a):null,c=r?i.mapper.toViewElement(r):null,d=c?i.view.domConverter.mapViewToDom(c):null,u=i.mapper.toViewElement(o);if(!u)return;const h=i.view.domConverter.mapViewToDom(u),f=this._getScrollableRect(u),{scrollX:m,scrollY:g}=Ut.window,b=l?new Sn(l):null,w=d?new Sn(d):null,x=new Sn(h).excludeScrollbarsAndBorders(),k=b?b.bottom:x.top,E=w?w.top:x.bottom,T=Ut.window.getComputedStyle(h),P=k<=E?(k+E)/2:E;if(f.top<P&&P<f.bottom){const C=x.left+parseFloat(T.paddingLeft),A=x.right-parseFloat(T.paddingRight),R=Math.max(C+m,f.left),M=Math.min(A+m,f.right);this._dropTargetLineView.set({isVisible:!0,left:R,top:P+g,width:M-R})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(t){const i=t.root.rootName;let s;if(this._scrollables.has(i))s=this._scrollables.get(i).domElement;else{const r=this.editor.editing.view.domConverter.mapViewToDom(t);s=d6e(r),this._domEmitter.listenTo(s,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new l3(s,this._reconvertMarkerThrottled);this._scrollables.set(i,{domElement:s,resizeObserver:o})}return new Sn(s).excludeScrollbarsAndBorders()}}function mL(n,e,t,i,s,r,o){const a=n.model,l=n.editing.mapper;let d=gL(n,e);for(;d;){if(!r){if(a.schema.checkChild(d,"$text")){if(t){const u=t[0].start,h=l.toModelPosition(u);if(!o||Array.from(o.getItems()).every(m=>a.schema.checkChild(h,m))){if(a.schema.checkChild(h,"$text"))return a.createRange(h);if(u)return rv(n,gL(n,u.parent),i,s)}}}else if(a.schema.isInline(d))return rv(n,d,i,s)}if(a.schema.isBlock(d))return rv(n,d,i,s);if(a.schema.checkChild(d,"$block")){const u=Array.from(d.getChildren()).filter(m=>m.is("element")&&!c6e(n,m));let h=0,f=u.length;if(f==0)return a.createRange(a.createPositionAt(d,"end"));for(;h<f-1;){const m=Math.floor((h+f)/2);Rz(n,u[m],i,s)=="before"?f=m:h=m}return rv(n,u[h],i,s)}d=d.parent}return null}function c6e(n,e){const t=n.editing.mapper,i=n.editing.view.domConverter,s=t.toViewElement(e);if(!s)return!0;const r=i.mapViewToDom(s);return Ut.window.getComputedStyle(r).float!="none"}function rv(n,e,t,i){const s=n.model;return s.createRange(s.createPositionAt(e,Rz(n,e,t,i)))}function Rz(n,e,t,i){const s=n.editing.mapper,r=n.editing.view.domConverter,o=s.toViewElement(e),a=r.mapViewToDom(o),l=new Sn(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function gL(n,e){const t=n.editing.mapper,i=n.editing.view,s=t.toModelElement(e);if(s)return s;const r=i.createPositionBefore(e),o=t.findMappedViewAncestor(r);return t.toModelElement(o)}function d6e(n){let e=n;do{e=e.parentElement;const t=Ut.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}class u6e extends tn{constructor(){super(...arguments);$(this,"_isBlockDragging",!1);$(this,"_domEmitter",new(za()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;if(this.listenTo(t,"change:isReadOnly",(i,s,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),bn.isAndroid&&this.forceDisabled("noAndroidSupport"),t.plugins.has("BlockToolbar")){const s=t.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(s,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(Ut.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(Ut.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(Ut.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&s.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,a)=>{s.setAttribute("draggable",a?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(t){if(!this.isEnabled)return;const i=this.editor.model,s=i.document.selection,r=this.editor.editing.view,o=Array.from(s.getSelectedBlocks()),a=i.createRange(i.createPositionBefore(o[0]),i.createPositionAfter(o[o.length-1]));i.change(l=>l.setSelection(a)),this._isBlockDragging=!0,r.focus(),r.getObserver(T0).onDomEvent(t)}_handleBlockDragging(t){if(!this.isEnabled||!this._isBlockDragging)return;const i=t.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),s=t.clientY,r=document.elementFromPoint(i,s),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(T0).onDomEvent({...t,type:t.type,dataTransfer:t.dataTransfer,target:r,clientX:i,clientY:s,preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class h6e extends tn{constructor(){super(...arguments);$(this,"_draggedRange");$(this,"_draggingUid");$(this,"_draggableElement");$(this,"_clearDraggableAttributesDelayed",h3(()=>this._clearDraggableAttributes(),40));$(this,"_blockMode",!1);$(this,"_domEmitter",new(za()));$(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[C0,Az,sv,u6e]}init(){const t=this.editor,i=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,i.addObserver(T0),i.addObserver(qU),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",(s,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(s,r,o)=>{o||this._finalizeDragging(!1)}),bn.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,i=t.model,s=t.editing.view,r=s.document,o=t.plugins.get(sv);this.listenTo(r,"dragstart",(a,l)=>{if(l.target&&l.target.is("editableElement")){l.preventDefault();return}if(this._prepareDraggedRange(l.target),!this._draggedRange){l.preventDefault();return}this._draggingUid=Oa(),l.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",l.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=i.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer,c,"dragstart");const{dataTransfer:u,domTarget:h,domEvent:f}=l,{clientX:m}=f;this._updatePreview({dataTransfer:u,domTarget:h,clientX:m}),l.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(a,l)=>{this._finalizeDragging(!l.dataTransfer.isCanceled&&l.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(Ut.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(a,l)=>{if(!this.isEnabled){l.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:d}=l.domEvent;o.updateDropMarker(l.target,l.targetRanges,c,d,this._blockMode,this._draggedRange),this._draggedRange||(l.dataTransfer.dropEffect="copy"),bn.isGecko||(l.dataTransfer.effectAllowed=="copy"?l.dataTransfer.dropEffect="copy":["all","copyMove"].includes(l.dataTransfer.effectAllowed)&&(l.dataTransfer.dropEffect="move")),a.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,s=t.editing.view.document,r=t.plugins.get(sv);this.listenTo(s,"clipboardInput",(o,a)=>{if(a.method!="drop")return;const{clientX:l,clientY:c}=a.domEvent,d=r.getFinalDropRange(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange);if(!d){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=a.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),bL(a.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(d,!0)){this._finalizeDragging(!1),o.stop();return}a.targetRanges=[t.editing.mapper.toViewRange(d)]},{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(C0);t.on("contentInsertion",(i,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=s.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),t.on("contentInsertion",(i,s)=>{if(!this.isEnabled||s.method!=="drop")return;const r=bL(s.dataTransfer)=="move",o=!s.resultRange||!s.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,i=t.editing.view,s=i.document;this.listenTo(s,"mousedown",(r,o)=>{if(bn.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let a=vL(o.target);if(bn.isBlink&&!t.isReadOnly&&!a&&!s.selection.isCollapsed){const l=s.selection.getSelectedElement();(!l||!js(l))&&(a=s.selection.editableElement)}a&&(i.change(l=>{l.setAttribute("draggable","true",a)}),this._draggableElement=t.editing.mapper.toModelElement(a))}),this.listenTo(s,"mouseup",()=>{bn.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(i=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&i.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(t){const i=this.editor,s=i.model;i.plugins.get(sv).removeDropMarker(),this._clearDraggableAttributes(),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&s.change(o=>{const a=s.createSelection(this._draggedRange);s.deleteContent(a,{doNotAutoparagraph:!0});const l=a.getFirstPosition().parent;l.isEmpty&&!s.schema.checkChild(l,"$text")&&s.schema.checkChild(l,"paragraph")&&o.insertElement("paragraph",l,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(t){const i=this.editor,s=i.model,r=s.document.selection,o=t?vL(t):null;if(o){const d=i.editing.mapper.toModelElement(o);this._draggedRange=go.fromRange(s.createRangeOn(d)),this._blockMode=s.schema.isBlock(d),i.plugins.has("WidgetToolbarRepository")&&i.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const a=Array.from(r.getSelectedBlocks()),l=r.getFirstRange();if(a.length==0){this._draggedRange=go.fromRange(l);return}const c=$z(s,a);if(a.length>1)this._draggedRange=go.fromRange(c),this._blockMode=!0;else if(a.length==1){const d=l.start.isTouching(c.start)&&l.end.isTouching(c.end);this._draggedRange=go.fromRange(d?c:l),this._blockMode=d}s.change(d=>d.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:t,domTarget:i,clientX:s}){const r=this.editor.editing.view,o=r.document.selection.editableElement,a=r.domConverter.mapViewToDom(o),l=Ut.window.getComputedStyle(a);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=fa(Ut.document,"div",{style:"position: fixed; left: -999999px;"}),Ut.document.body.appendChild(this._previewContainer));const c=new Sn(a);if(a.contains(i))return;const d=parseFloat(l.paddingLeft),u=fa(Ut.document,"div");u.className="ck ck-content",u.style.width=l.width,u.style.paddingLeft="".concat(c.left-s+d,"px"),bn.isiOS&&(u.style.backgroundColor="white"),r.domConverter.setContentOf(u,t.getData("text/html")),t.setDragImage(u,0,0),this._previewContainer.appendChild(u)}}function bL(n){return bn.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function vL(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(js);if(js(n))return n;const e=n.findAncestor(t=>js(t)||t.is("editableElement"));return js(e)?e:null}function $z(n,e){const t=e[0],i=e[e.length-1],s=t.getCommonAncestor(i),r=n.createPositionBefore(t),o=n.createPositionAfter(i);if(s&&s.is("element")&&!n.schema.isLimit(s)){const a=n.createRangeOn(s),l=r.isTouching(a.start),c=o.isTouching(a.end);if(l&&c)return $z(n,[s])}return n.createRange(r,o)}class f6e extends tn{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[C0]}init(){const e=this.editor,t=e.model,i=e.editing.view,s=t.document.selection;i.addObserver(T0),e.plugins.get(C0).on("contentInsertion",(r,o)=>{p6e(o.content,t)&&t.change(a=>{const l=Array.from(s.getAttributes()).filter(([d])=>t.schema.getAttributeProperties(d).isFormatting);s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const c=a.createRangeIn(o.content);for(const d of c.getItems())for(const u of l)t.schema.checkAttribute(d,u[0])&&a.setAttribute(u[0],u[1],d)})})}}function p6e(n,e){let t=e.createRangeIn(n);if(n.childCount==1){const i=n.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(t=e.createRangeIn(i))}for(const i of t.getItems())if(!e.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(r=>e.schema.getAttributeProperties(r).isFormatting))return!1;return!0}class m6e extends tn{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Pz,C0,h6e,f6e]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g6e extends HPe{constructor(t,i){super(t);$(this,"view");$(this,"_toolbarConfig");$(this,"_elementReplacer");this.view=i,this._toolbarConfig=lz(t.config.get("toolbar")),this._elementReplacer=new DCe,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const i=this.editor,s=this.view,r=i.editing.view,o=s.editable,a=r.document.getRoot();o.name=a.rootName,s.render();const l=o.element;this.setEditableElement(o.name,l),s.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(l),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),s.menuBarView&&this._initMenuBar(s.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,i=this.editor.editing.view;this._elementReplacer.restore(),i.getDomRoot(t.editable.name)&&i.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:i})=>i||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,i=t.editing.view,s=i.document.getRoot(),r=t.sourceElement;let o;const a=t.config.get("placeholder");a&&(o=typeof a=="string"?a:a[this.view.editable.name]),!o&&r&&r.tagName.toLowerCase()==="textarea"&&(o=r.getAttribute("placeholder")),o&&(s.placeholder=o),ySe({view:i,element:s,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,i=this.editor.plugins.get("ContextualBalloon");i.on("getPositionOptions",r=>{const o=r.return;if(!o||!t.isSticky||!t.element)return;const a=new Sn(t.element).height,l=typeof o.target=="function"?o.target():o.target,c=typeof o.limiter=="function"?o.limiter():o.limiter;if(l&&c&&new Sn(l).height>=new Sn(c).height-a)return;const d={...o.viewportOffsetConfig},u=(d.top||0)+a;r.return={...o,viewportOffsetConfig:{...d,top:u}}},{priority:"low"});const s=()=>{i.visibleView&&i.updatePosition()};this.listenTo(t,"change:isSticky",s),this.listenTo(this.editor.ui,"change:viewportOffset",s)}_handleScrollToTheSelectionWithStickyPanel(t,i,s){const r=this.view.stickyPanel;if(r.isSticky){const o=new Sn(r.element).height;i.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(s)};this.listenTo(r,"change:isSticky",o),setTimeout(()=>{this.stopListening(r,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,i=this.editor.plugins.get("Dialog");i.on("show",()=>{const s=i.view;s.on("moveTo",(r,o)=>{if(!t.isSticky||s.wasMoved)return;const a=new Sn(t.contentPanelElement);o[1]<a.bottom+E0.defaultOffset&&(o[1]=a.bottom+E0.defaultOffset)},{priority:"high"})},{priority:"low"})}}class b6e extends GPe{constructor(t,i,s={}){super(t);$(this,"stickyPanel");$(this,"toolbar");$(this,"editable");this.stickyPanel=new QPe(t),this.toolbar=new cz(t,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),s.useMenuBar&&(this.menuBarView=new nRe(t)),this.editable=new qPe(t,i,void 0,{label:s.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class P3 extends yC(Cf){constructor(t,i={}){if(!qv(t)&&i.initialData!==void 0)throw new _e("editor-create-initial-data",null);super(i);$(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",v6e(t)),qv(t)&&(this.sourceElement=t),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),o=new b6e(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:s,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new g6e(this,o),n4e(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,i={}){return new Promise(s=>{const r=new this(t,i);s(r.initPlugins().then(()=>r.ui.init(qv(t)?t:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}}function v6e(n){return qv(n)?VCe(n):n}function qv(n){return Ac(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class y6e extends Ml{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!yL(e.schema,i))do if(i=i.parent,!i)return;while(!yL(e.schema,i));e.change(s=>{s.setSelection(i,"in")})}}function yL(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}const w6e=u3("Ctrl+A");class x6e extends tn{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,s=e.editing.view.document;e.commands.add("selectAll",new y6e(e)),this.listenTo(s,"keydown",(r,o)=>{Pp(o)===w6e&&(e.execute("selectAll"),o.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}var _6e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class k6e extends tn{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(pr);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(cm))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("selectAll"),r=new e(t.locale),o=i.t;return r.set({label:o("Select all"),icon:_6e,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),r}}class E6e extends tn{static get requires(){return[x6e,k6e]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lz extends Ml{constructor(t){super(t);$(this,"_stack",[]);$(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(t.data,"set",(i,s)=>{s[1]={...s[1]};const r=s[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(t.data,"set",(i,s)=>{s[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(t){const i=this.editor.model.document.selection,s={ranges:i.hasOwnRange?Array.from(i.getRanges()):[],isBackward:i.isBackward};this._stack.push({batch:t,selection:s}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,i,s){const r=this.editor.model,o=r.document,a=[],l=t.map(d=>d.getTransformedByOperations(s)),c=l.flat();for(const d of l){const u=d.filter(h=>h.root!=o.graveyard).filter(h=>!C6e(h,c));u.length&&(T6e(u),a.push(u[0]))}a.length&&r.change(d=>{d.setSelection(a,{backward:i})})}_undo(t,i){const s=this.editor.model,r=s.document;this._createdBatches.add(i);const o=t.operations.slice().filter(a=>a.isDocumentOperation);o.reverse();for(const a of o){const l=a.baseVersion+1,c=Array.from(r.history.getOperations(l)),u=c5e([a.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let h of u){const f=h.affectedSelectable;f&&!s.canEditAt(f)&&(h=new Ms(h.baseVersion)),i.addOperation(h),s.applyOperation(h),r.history.setOperationAsUndone(a,h)}}}}function T6e(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function C6e(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}class S6e extends Lz{execute(e=null){const t=e?this._stack.findIndex(r=>r.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(i.batch,s);const r=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,r)}),this.fire("revert",i.batch,s),this.refresh()}}class A6e extends Lz{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const s=e.batch.operations[e.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(s);this._restoreSelection(e.selection.ranges,e.selection.isBackward,r),this._undo(e.batch,t)}),this.refresh()}}class I6e extends tn{constructor(){super(...arguments);$(this,"_undoCommand");$(this,"_redoCommand");$(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,i=t.t;this._undoCommand=new S6e(t),this._redoCommand=new A6e(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(s,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const a=o.batch,l=this._redoCommand.createdBatches.has(a),c=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(l?this._undoCommand.addBatch(a):c||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(s,r,o)=>{this._redoCommand.addBatch(o)}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo"),t.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Undo"),keystroke:"CTRL+Z"},{label:i("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class P6e extends tn{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?Ss.undo:Ss.redo,r=t.uiLanguageDirection=="ltr"?Ss.redo:Ss.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",r)}_addButtonsToFactory(e,t,i,s){const r=this.editor;r.ui.componentFactory.add(e,()=>{const o=this._createButton(pr,e,t,i,s);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(cm,e,t,i,s))}_createButton(e,t,i,s,r){const o=this.editor,a=o.locale,l=o.commands.get(t),c=new e(a);return c.set({label:i,icon:r,keystroke:s}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(t),o.editing.view.focus()}),c}}class R6e extends tn{static get requires(){return[I6e,P6e]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R3 extends tn{static get requires(){return[GIe,m6e,Kx,E6e,ERe,kz,R6e]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $6e extends Ml{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,i=zd(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&wL(i,e.schema)}execute(e={}){const t=this.editor.model,i=t.document,s=e.selection||i.selection;t.canEditAt(s)&&t.change(r=>{const o=s.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&wL(a,t.schema)&&r.rename(a,"paragraph")})}}function wL(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}class L6e extends Ml{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,i=e.attributes;let s=e.position;t.canEditAt(s)&&t.change(r=>{if(s=this._findPositionToInsertParagraph(s,r),!s)return;const o=r.createElement("paragraph");i&&t.schema.setAllowedAttributes(o,i,r),t.insertContent(o,s),r.setSelection(o,"in")})}_findPositionToInsertParagraph(e,t){const i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;const s=i.schema.findAllowedParent(e,"paragraph");if(!s)return null;const r=e.parent,o=i.schema.checkChild(r,"$text");return r.isEmpty||o&&e.isAtEnd?i.createPositionAfter(r):!r.isEmpty&&o&&e.isAtStart?i.createPositionBefore(r):t.split(e,s).position}}const Hw=class Hw extends tn{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new $6e(e)),e.commands.add("insertParagraph",new L6e(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:s})=>!Hw.paragraphLikeElements.has(i.name)||i.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};$(Hw,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let S0=Hw;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gh(n,e,t,i){e&&O6e(n,e,i),t&&El(n,t,i)}function El(n,e,t){if(e.attributes)for(const[i,s]of Object.entries(e.attributes))n.setAttribute(i,s,t);e.styles&&n.setStyle(e.styles,t),e.classes&&n.addClass(e.classes,t)}function O6e(n,e,t){if(e.attributes)for(const[i]of Object.entries(e.attributes))n.removeAttribute(i,t);if(e.styles)for(const i of Object.keys(e.styles))n.removeStyle(i,t);e.classes&&n.removeClass(e.classes,t)}function D6e(n,e){const t=ta(n);let i="attributes";for(i in e)i=="classes"?t[i]=Array.from(new Set([...n[i]||[],...e[i]])):t[i]={...n[i],...e[i]};return t}function cf(n,e,t,i,s){const r=e.getAttribute(t),o={};for(const a of["attributes","styles","classes"]){if(a!=i){r&&r[a]&&(o[a]=r[a]);continue}if(i=="classes"){const c=new Set(r&&r.classes||[]);s(c),c.size&&(o[a]=Array.from(c));continue}const l=new Map(Object.entries(r&&r[a]||{}));s(l),l.size&&(o[a]=Object.fromEntries(l))}Object.keys(o).length?e.is("documentSelection")?n.setSelectionAttribute(t,o):n.setAttribute(t,o,e):r&&(e.is("documentSelection")?n.removeSelectionAttribute(t):n.removeAttribute(t,e))}function M6e(n){return nCe(n).replace(/ /g,"")}function Yo(n){return"html".concat(M6e(n),"Attributes")}function $3({model:n}){return(e,t)=>t.writer.createElement(n,{htmlContent:e.getCustomProperty("$rawContent")})}function N6e(n,{view:e,isInline:t}){const i=n.t;return(s,{writer:r})=>{const o=i("HTML object"),a=Yx(e,s,r),l=s.getAttribute(Yo(e));r.addClass("html-object-embed__content",a),l&&El(r,l,a);const c=r.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":o},a);return Cz(c,r,{label:o})}}function Yx(n,e,t){return t.createRawElement(n,null,(i,s)=>{s.setContentOf(i,e.getAttribute("htmlContent"))})}function F6e({view:n,model:e,allowEmpty:t},i){return r=>{r.on("element:".concat(n),(o,a,l)=>{let c=i.processViewAttributes(a.viewItem,l);if(!(!c&&!l.consumable.test(a.viewItem,{name:!0}))){if(c=c||{},l.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(c).length){const d=l.writer.createElement("htmlEmptyElement");if(!l.safeInsert(d,a.modelCursor))return;const u=l.getSplitParts(d);a.modelRange=l.writer.createRange(a.modelRange.start,l.writer.createPositionAfter(u[u.length-1])),l.updateConversionResult(d,a),s(d,c,l);return}for(const d of a.modelRange.getItems())s(d,c,l)}},{priority:"low"})};function s(r,o,a){if(a.schema.checkAttribute(r,e)){const l=r.getAttribute(e),c=D6e(o,l||{});a.writer.setAttribute(e,c,r)}}}function xL({model:n,view:e},t){return(i,{writer:s,consumable:r})=>{if(!i.hasAttribute(n))return null;const o=s.createContainerElement(e),a=i.getAttribute(n);return r.consume(i,"attribute:".concat(n)),El(s,a,o),o.getFillerOffset=()=>null,t?Cz(o,s):o}}function B6e({priority:n,view:e}){return(t,i)=>{if(!t)return;const{writer:s}=i,r=s.createAttributeElement(e,null,{priority:n});return El(s,t,r),r}}function A0({view:n},e){return t=>{t.on("element:".concat(n),(i,s,r)=>{if(!s.modelRange||s.modelRange.isCollapsed)return;const o=e.processViewAttributes(s.viewItem,r);o&&r.writer.setAttribute(Yo(s.viewItem.name),o,s.modelRange)},{priority:"low"})}}function I0({view:n,model:e}){return t=>{t.on("attribute:".concat(Yo(n),":").concat(e),(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const{attributeOldValue:o,attributeNewValue:a}=s,l=r.writer,c=r.mapper.toViewElement(s.item);gh(l,o,a,c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var _L={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};class Dp extends tn{constructor(){super(...arguments);$(this,"_definitions",[])}static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const t of _L.block)this.registerBlockElement(t);for(const t of _L.inline)this.registerInlineElement(t)}registerBlockElement(t){this._definitions.push({...t,isBlock:!0})}registerInlineElement(t){this._definitions.push({...t,isInline:!0})}extendBlockElement(t){this._extendDefinition({...t,isBlock:!0})}extendInlineElement(t){this._extendDefinition({...t,isInline:!0})}getDefinitionsForView(t,i=!1){const s=new Set;for(const r of this._getMatchingViewDefinitions(t)){if(i)for(const o of this._getReferences(r.model))s.add(o);s.add(r)}return s}getDefinitionsForModel(t){return this._definitions.filter(i=>i.model==t)}_getMatchingViewDefinitions(t){return this._definitions.filter(i=>i.view&&V6e(t,i.view))}*_getReferences(t){const i=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],s=this._definitions.filter(r=>r.model==t);for(const{modelSchema:r}of s)if(r)for(const o of i)for(const a of cs(r[o]||[])){const l=this._definitions.filter(c=>c.model==a);for(const c of l)a!==t&&(yield*this._getReferences(c.model),yield c)}}_extendDefinition(t){const i=Array.from(this._definitions.entries()).filter(([,s])=>s.model==t.model);if(i.length==0){this._definitions.push(t);return}for(const[s,r]of i)this._definitions[s]=qTe({},r,t,(o,a)=>Array.isArray(o)?o.concat(a):void 0)}}function V6e(n,e){return typeof n=="string"?n===e:n instanceof RegExp?n.test(e):!1}class Es extends tn{constructor(t){super(t);$(this,"_dataSchema");$(this,"_allowedAttributes");$(this,"_disallowedAttributes");$(this,"_allowedElements");$(this,"_disallowedElements");$(this,"_dataInitialized");$(this,"_coupledAttributes");this._dataSchema=t.plugins.get("DataSchema"),this._allowedAttributes=new mh,this._disallowedAttributes=new mh,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[Dp,Az]}loadAllowedConfig(t){for(const i of t){const s=i.name||/[\s\S]+/,r=EL(i);this.allowElement(s),r.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(t){for(const i of t){const s=i.name||/[\s\S]+/,r=EL(i);r.length==0?this.disallowElement(s):r.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(t){for(const i of t)this.allowEmptyElement(i)}allowElement(t){for(const i of this._dataSchema.getDefinitionsForView(t,!0))this._addAllowedElement(i),this._coupledAttributes=null}disallowElement(t){for(const i of this._dataSchema.getDefinitionsForView(t,!1))this._disallowedElements.add(i.view)}allowEmptyElement(t){for(const i of this._dataSchema.getDefinitionsForView(t,!0))i.isInline&&this._dataSchema.extendInlineElement({...i,allowEmpty:!0})}allowAttributes(t){this._allowedAttributes.add(t)}disallowAttributes(t){this._disallowedAttributes.add(t)}processViewAttributes(t,i){const{consumable:s}=i;return kL(t,this._disallowedAttributes,s),U6e(t,kL(t,this._allowedAttributes,s))}_addAllowedElement(t){if(!this._allowedElements.has(t)){if(this._allowedElements.add(t),"appliesToBlock"in t&&typeof t.appliesToBlock=="string")for(const i of this._dataSchema.getDefinitionsForModel(t.appliesToBlock))i.isBlock&&this._addAllowedElement(i);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(t)},{priority:jo.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const t of this._allowedElements)this._fireRegisterEvent(t)},{priority:jo.highest+1})}_registerElementHandlers(){this.on("register",(t,i)=>{const s=this.editor.model.schema;if(i.isObject&&!s.isRegistered(i.model))this._registerObjectElement(i);else if(i.isBlock)this._registerBlockElement(i);else if(i.isInline)this._registerInlineElement(i);else throw new _e("data-filter-invalid-definition",null,i);t.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const t=this.editor.model,i=t.document.selection;t.document.registerPostFixer(s=>{const r=t.document.differ.getChanges();let o=!1;const a=this._getCoupledAttributesMap();for(const l of r){if(l.type!="attribute"||l.attributeNewValue!==null)continue;const c=a.get(l.attributeKey);if(c)for(const{item:d}of l.range.getWalker())for(const u of c)d.hasAttribute(u)&&(s.removeAttribute(u,d),o=!0)}return o}),this.listenTo(i,"change:attribute",(s,{attributeKeys:r})=>{const o=new Set,a=this._getCoupledAttributesMap();for(const l of r){if(i.hasAttribute(l))continue;const c=a.get(l);if(c)for(const d of c)i.hasAttribute(d)&&o.add(d)}o.size!=0&&t.change(l=>{for(const c of o)l.removeSelectionAttribute(c)})})}_registerAssociatedHtmlAttributesPostFixer(){const t=this.editor.model;t.document.registerPostFixer(i=>{const s=t.document.differ.getChanges();let r=!1;for(const o of s)if(!(o.type!=="insert"||o.name==="$text"))for(const a of o.attributes.keys())!a.startsWith("html")||!a.endsWith("Attributes")||t.schema.checkAttribute(o.name,a)||(i.removeAttribute(a,o.position.nodeAfter),r=!0);return r})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const t of this._allowedElements)if(t.coupledAttribute&&t.model){const i=this._coupledAttributes.get(t.coupledAttribute);i?i.push(t.model):this._coupledAttributes.set(t.coupledAttribute,[t.model])}return this._coupledAttributes}_fireRegisterEvent(t){t.view&&this._disallowedElements.has(t.view)||this.fire(t.view?"register:".concat(t.view):"register",t)}_registerObjectElement(t){const i=this.editor,s=i.model.schema,r=i.conversion,{view:o,model:a}=t;s.register(a,t.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */o&&(s.extend(t.model,{allowAttributes:[Yo(o),"htmlContent"]}),i.data.registerRawContentMatcher({name:o}),r.for("upcast").elementToElement({view:o,model:$3(t),converterPriority:jo.low+2}),r.for("upcast").add(A0(t,this)),r.for("editingDowncast").elementToStructure({model:{name:a,attributes:[Yo(o)]},view:N6e(i,t)}),r.for("dataDowncast").elementToElement({model:a,view:(l,{writer:c})=>Yx(o,l,c)}),r.for("dataDowncast").add(I0(t)))}_registerBlockElement(t){const i=this.editor,s=i.model.schema,r=i.conversion,{view:o,model:a}=t;if(!s.isRegistered(t.model)){if(s.register(t.model,t.modelSchema),!o)return;r.for("upcast").elementToElement({model:a,view:o,converterPriority:jo.low+2}),r.for("downcast").elementToElement({model:a,view:o})}o&&(s.extend(t.model,{allowAttributes:Yo(o)}),r.for("upcast").add(A0(t,this)),r.for("downcast").add(I0(t)))}_registerInlineElement(t){const i=this.editor,s=i.model.schema,r=i.conversion,o=t.model;t.appliesToBlock||(s.extend("$text",{allowAttributes:o}),t.attributeProperties&&s.setAttributeProperties(o,t.attributeProperties),r.for("upcast").add(F6e(t,this)),r.for("downcast").attributeToElement({model:o,view:B6e(t)}),t.allowEmpty&&(s.setAttributeProperties(o,{copyFromObject:!1}),s.isRegistered("htmlEmptyElement")||s.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),i.data.htmlProcessor.domConverter.registerInlineObjectMatcher(a=>a.name==t.view&&a.isEmpty&&Array.from(a.getAttributeKeys()).length?{name:!0}:null),r.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:xL(t,!0)}),r.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:xL(t)})))}}function kL(n,e,t){const i=e.matchAll(n)||[],s=n.document.stylesProcessor;return i.reduce((r,{match:o})=>{for(const a of o.styles||[]){const l=s.getRelatedStyles(a).filter(c=>c.split("-").length>a.split("-").length).sort((c,d)=>d.split("-").length-c.split("-").length);for(const c of l)t.consume(n,{styles:[c]})&&r.styles.push(c);t.consume(n,{styles:[a]})&&r.styles.push(a)}for(const a of o.classes||[])t.consume(n,{classes:[a]})&&r.classes.push(a);for(const a of o.attributes||[])t.consume(n,{attributes:[a]})&&r.attributes.push(a);return r},{attributes:[],classes:[],styles:[]})}function U6e(n,{attributes:e,classes:t,styles:i}){return!e.length&&!t.length&&!i.length?null:{...e.length&&{attributes:z6e(n,e)},...i.length&&{styles:H6e(n,i)},...t.length&&{classes:t}}}function z6e(n,e){const t={};for(const i of e){const s=n.getAttribute(i);s!==void 0&&XV(i)&&(t[i]=s)}return t}function H6e(n,e){const t=new iw(n.document.stylesProcessor);for(const i of e){const s=n.getStyle(i);s!==void 0&&t.set(i,s)}return Object.fromEntries(t.getStylesEntries())}function Nk(n,e){const{name:t}=n,i=n[e];return Wr(i)?Object.entries(i).map(([s,r])=>({name:t,[e]:{[s]:r}})):Array.isArray(i)?i.map(s=>({name:t,[e]:[s]})):[n]}function EL(n){const{name:e,attributes:t,classes:i,styles:s}=n,r=[];return t&&r.push(...Nk({name:e,attributes:t},"attributes")),i&&r.push(...Nk({name:e,classes:i},"classes")),s&&r.push(...Nk({name:e,styles:s},"styles")),r}class j6e extends tn{static get requires(){return[Es]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(Es);e.on("register:pre",(t,i)=>{if(i.model!=="codeBlock")return;const s=this.editor,r=s.model.schema,o=s.conversion;r.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),o.for("upcast").add(G6e(e)),o.for("downcast").add(W6e()),t.stop()})}}function G6e(n){return e=>{e.on("element:code",(t,i,s)=>{const r=i.viewItem,o=r.parent;if(!o||!o.is("element","pre"))return;a(o,"htmlPreAttributes"),a(r,"htmlContentAttributes");function a(l,c){const d=n.processViewAttributes(l,s);d&&s.writer.setAttribute(c,d,i.modelRange)}},{priority:"low"})}}function W6e(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:r}=t,a=i.mapper.toViewElement(t.item).parent;gh(i.writer,s,r,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:r}=t,o=i.mapper.toViewElement(t.item);gh(i.writer,s,r,o)})}}class q6e extends tn{static get requires(){return[Es]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Es).on("register",(t,i)=>{const s=i,r=this.editor,o=r.model.schema,a=r.conversion;if(!s.paragraphLikeModel||o.isRegistered(s.model)||o.isRegistered(s.paragraphLikeModel))return;const l={model:s.paragraphLikeModel,view:s.view};o.register(s.model,s.modelSchema),o.register(l.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:s.view,model:(c,{writer:d})=>this._hasBlockContent(c)?d.createElement(s.model):d.createElement(l.model),converterPriority:jo.low+.5}),a.for("downcast").elementToElement({view:s.view,model:s.model}),this._addAttributeConversion(s),a.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),t.stop()})}_hasBlockContent(e){const t=this.editor.editing.view,i=t.domConverter.blockElements;for(const s of t.createRangeIn(e).getItems())if(s.is("element")&&i.includes(s.name))return!0;return!1}_addAttributeConversion(e){const t=this.editor,i=t.conversion,s=t.plugins.get(Es);t.model.schema.extend(e.model,{allowAttributes:Yo(e.view)}),i.for("upcast").add(A0(e,s)),i.for("downcast").add(I0(e))}}class K6e extends tn{static get requires(){return[Dp,Kx]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){const i=e.plugins.get(Dp),s=[];for(const r of t)"model"in r&&"view"in r&&(i.registerBlockElement({view:r.view,model:r.model}),s.push(r.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:s}}),i.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:s}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uw(n,e,t){const i=n.createRangeOn(e);for(const{item:s}of i.getWalker())if(s.is("element",t))return s}class Y6e extends tn{static get requires(){return[Es]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(Es);s.on("register:figure",()=>{i.for("upcast").add(Z6e(s))}),s.on("register:img",(r,o)=>{o.model!=="imageBlock"&&o.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(X6e(s)),i.for("downcast").add(J6e()),e.plugins.has("LinkImage")&&i.for("upcast").add(Q6e(s,e)),r.stop())})}}function X6e(n){return e=>{e.on("element:img",(t,i,s)=>{if(!i.modelRange)return;const r=i.viewItem,o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlImgAttributes",o,i.modelRange)},{priority:"low"})}}function Q6e(n,e){const t=e.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,r,o)=>{const a=r.viewItem;if(!t.findViewImgElement(a))return;const c=r.modelCursor.parent;if(!c.is("element","imageBlock"))return;const d=n.processViewAttributes(a,o);d&&o.writer.setAttribute("htmlLinkAttributes",d,c)},{priority:"low"})}}function Z6e(n){return e=>{e.on("element:figure",(t,i,s)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("image"))return;const o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function J6e(){return n=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(i){n.on("attribute:".concat(i,":imageInline"),(s,r,o)=>{if(!o.consumable.consume(r.item,s.name))return;const{attributeOldValue:a,attributeNewValue:l}=r,c=o.mapper.toViewElement(r.item);gh(o.writer,a,l,c)},{priority:"low"})}function t(i,s){n.on("attribute:".concat(s,":imageBlock"),(r,o,a)=>{if(!a.consumable.test(o.item,r.name))return;const{attributeOldValue:l,attributeNewValue:c}=o,d=a.mapper.toViewElement(o.item),u=uw(a.writer,d,i);u&&(gh(a.writer,l,c,u),a.consumable.consume(o.item,r.name))},{priority:"low"}),i==="a"&&n.on("attribute:linkHref:imageBlock",(r,o,a)=>{if(!a.consumable.consume(o.item,"attribute:htmlLinkAttributes:imageBlock"))return;const l=a.mapper.toViewElement(o.item),c=uw(a.writer,l,"a");El(a.writer,o.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}class e8e extends tn{static get requires(){return[Es]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const t=e.model.schema,i=e.conversion,s=this.editor.plugins.get(Es),r=this.editor.plugins.get(Dp),o=e.config.get("mediaEmbed.elementName");r.registerBlockElement({model:"media",view:o}),s.on("register:figure",()=>{i.for("upcast").add(n8e(s))}),s.on("register:".concat(o),(a,l)=>{l.model==="media"&&(t.extend("media",{allowAttributes:[Yo(o),"htmlFigureAttributes"]}),i.for("upcast").add(t8e(s,o)),i.for("dataDowncast").add(i8e(o)),a.stop())})}}function t8e(n,e){const t=(i,s,r)=>{const o=s.viewItem;a(o,Yo(e));function a(l,c){const d=n.processViewAttributes(l,r);d&&r.writer.setAttribute(c,d,s.modelRange)}};return i=>{i.on("element:".concat(e),t,{priority:"low"})}}function n8e(n){return e=>{e.on("element:figure",(t,i,s)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("media"))return;const o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function i8e(n){return e=>{t(n,Yo(n)),t("figure","htmlFigureAttributes");function t(i,s){e.on("attribute:".concat(s,":media"),(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const{attributeOldValue:l,attributeNewValue:c}=o,d=a.mapper.toViewElement(o.item),u=uw(a.writer,d,i);gh(a.writer,l,c,u)})}}}class s8e extends tn{static get requires(){return[Es]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(Es);e.on("register:script",(t,i)=>{const s=this.editor,r=s.model.schema,o=s.conversion;r.register("htmlScript",i.modelSchema),r.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"script"}),o.for("upcast").elementToElement({view:"script",model:$3(i)}),o.for("upcast").add(A0(i,e)),o.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:l})=>Yx("script",a,l)}),o.for("downcast").add(I0(i)),t.stop()})}}class r8e extends tn{static get requires(){return[Es]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(Es),r=e.plugins.get("TableUtils");s.on("register:figure",()=>{i.for("upcast").add(l8e(s))}),s.on("register:table",(o,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(a8e(s)),i.for("downcast").add(c8e()),e.model.document.registerPostFixer(o8e(e.model,r)),o.stop())})}}function o8e(n,e){return t=>{const i=n.document.differ.getChanges();let s=!1;for(const r of i){if(r.type!="attribute"||r.attributeKey!="headingRows")continue;const o=r.range.start.nodeAfter,a=o.getAttribute("htmlTheadAttributes"),l=o.getAttribute("htmlTbodyAttributes");a&&!r.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",o),s=!0):l&&r.attributeNewValue==e.getRows(o)&&(t.removeAttribute("htmlTbodyAttributes",o),s=!0)}return s}}function a8e(n){return e=>{e.on("element:table",(t,i,s)=>{if(!i.modelRange)return;const r=i.viewItem;o(r,"htmlTableAttributes");for(const a of r.getChildren())a.is("element","thead")&&o(a,"htmlTheadAttributes"),a.is("element","tbody")&&o(a,"htmlTbodyAttributes");function o(a,l){const c=n.processViewAttributes(a,s);c&&s.writer.setAttribute(l,c,i.modelRange)}},{priority:"low"})}}function l8e(n){return e=>{e.on("element:figure",(t,i,s)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("table"))return;const o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function c8e(){return n=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,i){n.on("attribute:".concat(i,":table"),(s,r,o)=>{if(!o.consumable.test(r.item,s.name))return;const a=o.mapper.toViewElement(r.item),l=uw(o.writer,a,t);l&&(o.consumable.consume(r.item,s.name),gh(o.writer,r.attributeOldValue,r.attributeNewValue,l))})}}}class d8e extends tn{static get requires(){return[Es]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(Es);e.on("register:style",(t,i)=>{const s=this.editor,r=s.model.schema,o=s.conversion;r.register("htmlStyle",i.modelSchema),r.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"style"}),o.for("upcast").elementToElement({view:"style",model:$3(i)}),o.for("upcast").add(A0(i,e)),o.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:l})=>Yx("style",a,l)}),o.for("downcast").add(I0(i)),t.stop()})}}class u8e extends tn{static get requires(){return[Es]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("ListEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(Es),r=e.plugins.get("ListEditing"),o=e.plugins.get("ListUtils"),a=["ul","ol","li"];r.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:El}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:El}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:El}),s.on("register",(l,c)=>{if(!a.includes(c.view)||(l.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;const d=a.map(u=>Yo(u));t.extend("$listItem",{allowAttributes:d}),i.for("upcast").add(u=>{u.on("element:ul",Fk("htmlUlAttributes",s),{priority:"low"}),u.on("element:ol",Fk("htmlOlAttributes",s),{priority:"low"}),u.on("element:li",Fk("htmlLiAttributes",s),{priority:"low"})})}),r.on("postFixer",(l,{listNodes:c,writer:d})=>{for(const{node:u,previousNodeInList:h}of c)if(h){if(h.getAttribute("listType")==u.getAttribute("listType")){const f=TL(h.getAttribute("listType")),m=h.getAttribute(f);!ew(u.getAttribute(f),m)&&d.model.schema.checkAttribute(u,f)&&(d.setAttribute(f,m,u),l.return=!0)}if(h.getAttribute("listItemId")==u.getAttribute("listItemId")){const f=h.getAttribute("htmlLiAttributes");!ew(u.getAttribute("htmlLiAttributes"),f)&&d.model.schema.checkAttribute(u,"htmlLiAttributes")&&(d.setAttribute("htmlLiAttributes",f,u),l.return=!0)}}}),r.on("postFixer",(l,{listNodes:c,writer:d})=>{for(const{node:u}of c){const h=u.getAttribute("listType");!o.isNumberedListType(h)&&u.getAttribute("htmlOlAttributes")&&(d.removeAttribute("htmlOlAttributes",u),l.return=!0),o.isNumberedListType(h)&&u.getAttribute("htmlUlAttributes")&&(d.removeAttribute("htmlUlAttributes",u),l.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(i,s)=>{e.model.change(r=>{for(const o of s){const a=TL(o.getAttribute("listType"));e.model.schema.checkAttribute(o,a)&&r.setAttribute(a,{},o)}})})}}function Fk(n,e){return(t,i,s)=>{const r=i.viewItem;i.modelRange||Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor));const o=e.processViewAttributes(r,s);for(const a of i.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute("htmlUlAttributes")||a.hasAttribute("htmlOlAttributes")||s.writer.model.schema.checkAttribute(a,n)&&s.writer.setAttribute(n,o||{},a))}}function TL(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}class h8e extends tn{static get requires(){return[Es,Dp]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(Es),t=this.editor.plugins.get(Dp);e.on("register:$customElement",(i,s)=>{i.stop();const r=this.editor,o=r.model.schema,a=r.conversion,l=r.editing.view.domConverter.unsafeElements,c=r.data.htmlProcessor.domConverter.preElements;o.register(s.model,s.modelSchema),o.extend(s.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),r.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(d,u)=>{if(d.name=="$comment"||!f8e(d.name)||t.getDefinitionsForView(d.name).size)return null;l.includes(d.name)||l.push(d.name),c.includes(d.name)||c.push(d.name);const h=u.writer.createElement(s.model,{htmlElementName:d.name}),f=e.processViewAttributes(d,u);f&&u.writer.setAttribute("htmlCustomElementAttributes",f,h);let m;if(d.is("element","template")&&d.getCustomProperty("$rawContent"))m=d.getCustomProperty("$rawContent");else{const b=new q5e(d.document).createDocumentFragment(d),w=r.data.htmlProcessor.domConverter.viewToDom(b),x=w.firstChild;for(;x.firstChild;)w.appendChild(x.firstChild);x.remove(),m=r.data.htmlProcessor.htmlWriter.getHtml(w)}u.writer.setAttribute("htmlContent",m,h);for(const{item:g}of r.editing.view.createRangeIn(d))u.consumable.consume(g,{name:!0});return h},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(d,{writer:u})=>{const h=d.getAttribute("htmlElementName"),f=u.createRawElement(h);return d.hasAttribute("htmlCustomElementAttributes")&&El(u,d.getAttribute("htmlCustomElementAttributes"),f),f}}),a.for("dataDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(d,{writer:u})=>{const h=d.getAttribute("htmlElementName"),f=d.getAttribute("htmlContent"),m=u.createRawElement(h,null,(g,b)=>{b.setContentOf(g,f)});return d.hasAttribute("htmlCustomElementAttributes")&&El(u,d.getAttribute("htmlCustomElementAttributes"),m),m}})})}}function f8e(n){try{document.createElement(n)}catch(e){return!1}return!0}class L3 extends tn{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[Es,j6e,q6e,K6e,Y6e,e8e,s8e,r8e,d8e,u8e,h8e]}init(){const e=this.editor,t=e.plugins.get(Es);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),i=Array.from(t.getDefinitionsForView(e,!1)),s=i.find(r=>r.isInline&&!i[0].isObject);return s?s.model:Yo(e)}addModelHtmlClass(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of df(s,i,r))cf(o,a,r,"classes",l=>{for(const c of cs(t))l.add(c)})})}removeModelHtmlClass(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of df(s,i,r))cf(o,a,r,"classes",l=>{for(const c of cs(t))l.delete(c)})})}setModelHtmlAttributes(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of df(s,i,r))cf(o,a,r,"attributes",l=>{for(const[c,d]of Object.entries(t))l.set(c,d)})})}removeModelHtmlAttributes(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of df(s,i,r))cf(o,a,r,"attributes",l=>{for(const c of cs(t))l.delete(c)})})}setModelHtmlStyles(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of df(s,i,r))cf(o,a,r,"styles",l=>{for(const[c,d]of Object.entries(t))l.set(c,d)})})}removeModelHtmlStyles(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of df(s,i,r))cf(o,a,r,"styles",l=>{for(const c of cs(t))l.delete(c)})})}}function*df(n,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)n.schema.checkAttributeInSelection(e,t)&&(yield e);else for(const i of p8e(n,e,t))yield*i.getItems({shallow:!0})}function p8e(n,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?n.schema.checkAttribute(e,t)?[n.createRangeOn(e)]:[]:n.schema.getValidRanges(n.createSelection(e).getRanges(),t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const m8e=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of m8e);function Oz(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let um=Oz();function g8e(n){um=n}const b8e=/[&<>"']/,v8e=/[&<>"']/g,y8e=/[<>"']|&(?!#?\w+;)/,w8e=/[<>"']|&(?!#?\w+;)/g,x8e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},CL=n=>x8e[n];function Hs(n,e){if(e){if(b8e.test(n))return n.replace(v8e,CL)}else if(y8e.test(n))return n.replace(w8e,CL);return n}const _8e=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Dz(n){return n.replace(_8e,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const k8e=/(^|[^\[])\^/g;function Ni(n,e){n=n.source||n,e=e||"";const t={replace:(i,s)=>(s=s.source||s,s=s.replace(k8e,"$1"),n=n.replace(i,s),t),getRegex:()=>new RegExp(n,e)};return t}const E8e=/[^\w:]/g,T8e=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function SL(n,e,t){if(n){let i;try{i=decodeURIComponent(Dz(t)).replace(E8e,"").toLowerCase()}catch(s){return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!T8e.test(t)&&(t=I8e(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(i){return null}return t}const ov={},C8e=/^[^:]+:\/*[^/]*$/,S8e=/^([^:]+:)[\s\S]*$/,A8e=/^([^:]+:\/*[^/]*)[\s\S]*$/;function I8e(n,e){ov[" "+n]||(C8e.test(n)?ov[" "+n]=n+"/":ov[" "+n]=Kv(n,"/",!0)),n=ov[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(S8e,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(A8e,"$1")+e:n+e}const hw={exec:function(){}};function Ha(n){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function AL(n,e){const t=n.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function Kv(n,e,t){const i=n.length;if(i===0)return"";let s=0;for(;s<i;){const r=n.charAt(i-s-1);if(r===e&&!t)s++;else if(r!==e&&t)s++;else break}return n.substr(0,i-s)}function P8e(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let i=0,s=0;for(;s<t;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])i++;else if(n[s]===e[1]&&(i--,i<0))return s;return-1}function Mz(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function IL(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function PL(n,e,t,i){const s=e.href,r=e.title?Hs(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:t,href:s,title:r,text:o,tokens:i.inlineTokens(o,[])};return i.state.inLink=!1,a}else return{type:"image",raw:t,href:s,title:r,text:Hs(o)}}function R8e(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split("\n").map(s=>{const r=s.match(/^\s+/);if(r===null)return s;const[o]=r;return o.length>=i.length?s.slice(i.length):s}).join("\n")}class O3{constructor(e){this.options=e||um}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Kv(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],s=R8e(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=Kv(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}const s={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,s,r,o,a,l,c,d,u,h,f,m,g=t[1].trim();const b=g.length>1,w={type:"list",raw:"",ordered:b,start:b?+g.slice(0,-1):"",loose:!1,items:[]};g=b?"\\d{1,9}\\".concat(g.slice(-1)):"\\".concat(g),this.options.pedantic&&(g=b?g:"[*+-]");const x=new RegExp("^( {0,3}".concat(g,")((?: [^\\n]*)?(?:\\n|$))"));for(;e&&(m=!1,!(!(t=x.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),d=t[2].split("\n",1)[0],u=e.split("\n",1)[0],this.options.pedantic?(o=2,f=d.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,f=d.slice(o),o+=t[1].length),l=!1,!d&&/^ *$/.test(u)&&(i+=u+"\n",e=e.substring(u.length+1),m=!0),!m){const E=new RegExp("^ {0,".concat(Math.min(3,o-1),"}(?:[*+-]|\\d{1,9}[.)])"));for(;e&&(h=e.split("\n",1)[0],d=h,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!E.test(d));){if(d.search(/[^ ]/)>=o||!d.trim())f+="\n"+d.slice(o);else if(!l)f+="\n"+d;else break;!l&&!d.trim()&&(l=!0),i+=h+"\n",e=e.substring(h.length+1)}}w.loose||(c?w.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(f),s&&(r=s[0]!=="[ ] ",f=f.replace(/^\[[ xX]\] +/,""))),w.items.push({type:"list_item",raw:i,task:!!s,checked:r,loose:!1,text:f}),w.raw+=i}w.items[w.items.length-1].raw=i.trimRight(),w.items[w.items.length-1].text=f.trimRight(),w.raw=w.raw.trimRight();const k=w.items.length;for(a=0;a<k;a++){this.lexer.state.top=!1,w.items[a].tokens=this.lexer.blockTokens(w.items[a].text,[]);const E=w.items[a].tokens.filter(P=>P.type==="space"),T=E.every(P=>{const C=P.raw.split("");let A=0;for(const R of C)if(R==="\n"&&(A+=1),A>1)return!0;return!1});!w.loose&&E.length&&T&&(w.loose=!0,w.items[a].loose=!0)}return w}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):Hs(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:AL(t[1]).map(s=>({text:s})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];let s=i.align.length,r,o,a,l;for(r=0;r<s;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(s=i.rows.length,r=0;r<s;r++)i.rows[r]=AL(i.rows[r],i.header.length).map(c=>({text:c}));for(s=i.header.length,o=0;o<s;o++)i.header[o].tokens=[],this.lexer.inlineTokens(i.header[o].text,i.header[o].tokens);for(s=i.rows.length,o=0;o<s;o++)for(l=i.rows[o],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)==="\n"?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){const t=this.rules.block.text.exec(e);if(t){const i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Hs(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Hs(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=Kv(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=P8e(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),PL(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s||!s.href){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return PL(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;const r=s[1]||s[2]||"";if(!r||r&&(i===""||this.rules.inline.punctuation.exec(i))){const o=s[0].length-1;let a,l,c=o,d=0;const u=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+o);(s=u.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=a.length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&o%3&&!((o+l)%3)){d+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+d),Math.min(o,l)%2){const f=e.slice(1,o+s.index+l);return{type:"em",raw:e.slice(0,o+s.index+l+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}const h=e.slice(2,o+s.index+l-1);return{type:"strong",raw:e.slice(0,o+s.index+l+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=Hs(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let s,r;return i[2]==="@"?(s=Hs(this.options.mangle?t(i[1]):i[1]),r="mailto:"+s):(s=Hs(i[1]),r=s),{type:"link",raw:i[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let s,r;if(i[2]==="@")s=Hs(this.options.mangle?t(i[0]):i[0]),r="mailto:"+s;else{let o;do o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(o!==i[0]);s=Hs(i[0]),i[1]==="www."?r="http://"+s:r=s}return{type:"link",raw:i[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Hs(i[0]):i[0]:s=Hs(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:s}}}}const rn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:hw,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};rn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;rn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;rn.def=Ni(rn.def).replace("label",rn._label).replace("title",rn._title).getRegex();rn.bullet=/(?:[*+-]|\d{1,9}[.)])/;rn.listItemStart=Ni(/^( *)(bull) */).replace("bull",rn.bullet).getRegex();rn.list=Ni(rn.list).replace(/bull/g,rn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+rn.def.source+")").getRegex();rn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";rn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;rn.html=Ni(rn.html,"i").replace("comment",rn._comment).replace("tag",rn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();rn.paragraph=Ni(rn._paragraph).replace("hr",rn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rn._tag).getRegex();rn.blockquote=Ni(rn.blockquote).replace("paragraph",rn.paragraph).getRegex();rn.normal=Ha({},rn);rn.gfm=Ha({},rn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});rn.gfm.table=Ni(rn.gfm.table).replace("hr",rn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rn._tag).getRegex();rn.gfm.paragraph=Ni(rn._paragraph).replace("hr",rn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",rn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",rn._tag).getRegex();rn.pedantic=Ha({},rn.normal,{html:Ni("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",rn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:hw,paragraph:Ni(rn.normal._paragraph).replace("hr",rn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",rn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Nt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:hw,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:hw,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Nt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Nt.punctuation=Ni(Nt.punctuation).replace(/punctuation/g,Nt._punctuation).getRegex();Nt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Nt.escapedEmSt=/\\\*|\\_/g;Nt._comment=Ni(rn._comment).replace("(?:-->|$)","-->").getRegex();Nt.emStrong.lDelim=Ni(Nt.emStrong.lDelim).replace(/punct/g,Nt._punctuation).getRegex();Nt.emStrong.rDelimAst=Ni(Nt.emStrong.rDelimAst,"g").replace(/punct/g,Nt._punctuation).getRegex();Nt.emStrong.rDelimUnd=Ni(Nt.emStrong.rDelimUnd,"g").replace(/punct/g,Nt._punctuation).getRegex();Nt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Nt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Nt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Nt.autolink=Ni(Nt.autolink).replace("scheme",Nt._scheme).replace("email",Nt._email).getRegex();Nt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Nt.tag=Ni(Nt.tag).replace("comment",Nt._comment).replace("attribute",Nt._attribute).getRegex();Nt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Nt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Nt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Nt.link=Ni(Nt.link).replace("label",Nt._label).replace("href",Nt._href).replace("title",Nt._title).getRegex();Nt.reflink=Ni(Nt.reflink).replace("label",Nt._label).replace("ref",rn._label).getRegex();Nt.nolink=Ni(Nt.nolink).replace("ref",rn._label).getRegex();Nt.reflinkSearch=Ni(Nt.reflinkSearch,"g").replace("reflink",Nt.reflink).replace("nolink",Nt.nolink).getRegex();Nt.normal=Ha({},Nt);Nt.pedantic=Ha({},Nt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ni(/^!?\[(label)\]\((.*?)\)/).replace("label",Nt._label).getRegex(),reflink:Ni(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Nt._label).getRegex()});Nt.gfm=Ha({},Nt.normal,{escape:Ni(Nt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Nt.gfm.url=Ni(Nt.gfm.url,"i").replace("email",Nt.gfm._extended_email).getRegex();Nt.breaks=Ha({},Nt.gfm,{br:Ni(Nt.br).replace("{2,}","*").getRegex(),text:Ni(Nt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function $8e(n){return n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function RL(n){let e="",t,i;const s=n.length;for(t=0;t<s;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}class Lc{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||um,this.options.tokenizer=this.options.tokenizer||new O3,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:rn.normal,inline:Nt.normal};this.options.pedantic?(t.block=rn.pedantic,t.inline=Nt.pedantic):this.options.gfm&&(t.block=rn.gfm,this.options.breaks?t.inline=Nt.breaks:t.inline=Nt.gfm),this.tokenizer.rules=t}static get rules(){return{block:rn,inline:Nt}}static lex(e,t){return new Lc(t).lex(e)}static lexInline(e,t){return new Lc(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let i,s,r,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+="\n"+i.raw,s.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+="\n"+i.raw,s.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){s=t[t.length-1],o&&s.type==="paragraph"?(s.raw+="\n"+i.raw,s.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i),o=r.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+="\n"+i.raw,s.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,s,r,o=e,a,l,c;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+IL("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+IL("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(i=d.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),s=t[t.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,RL)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,RL))){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const u=e.slice(1);let h;this.options.extensions.startInline.forEach(function(f){h=f.call({lexer:this},u),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(r=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(r,$8e)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}}class D3{constructor(e){this.options=e||um}code(e,t,i){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(e,s);r!=null&&r!==e&&(i=!0,e=r)}return e=e.replace(/\n$/,"")+"\n",s?'<pre><code class="'+this.options.langPrefix+Hs(s,!0)+'">'+(i?e:Hs(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Hs(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,i,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,i){const s=t?"ol":"ul",r=t&&i!==1?' start="'+i+'"':"";return"<"+s+r+">\n"+e+"</"+s+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(e=SL(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s='<a href="'+Hs(e)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+i+"</a>",s}image(e,t,i){if(e=SL(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s='<img src="'+e+'" alt="'+i+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(e){return e}}class Nz{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class Fz{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,s=0;if(this.seen.hasOwnProperty(i)){s=this.seen[e];do s++,i=e+"-"+s;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=s,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class Oc{constructor(e){this.options=e||um,this.options.renderer=this.options.renderer||new D3,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Nz,this.slugger=new Fz}static parse(e,t){return new Oc(t).parse(e)}static parseInline(e,t){return new Oc(t).parseInline(e)}parse(e,t=!0){let i="",s,r,o,a,l,c,d,u,h,f,m,g,b,w,x,k,E,T,P;const C=e.length;for(s=0;s<C;s++){if(f=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(P=this.options.extensions.renderers[f.type].call({parser:this},f),P!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))){i+=P||"";continue}switch(f.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(f.tokens),f.depth,Dz(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(f.text,f.lang,f.escaped);continue}case"table":{for(u="",d="",a=f.header.length,r=0;r<a;r++)d+=this.renderer.tablecell(this.parseInline(f.header[r].tokens),{header:!0,align:f.align[r]});for(u+=this.renderer.tablerow(d),h="",a=f.rows.length,r=0;r<a;r++){for(c=f.rows[r],d="",l=c.length,o=0;o<l;o++)d+=this.renderer.tablecell(this.parseInline(c[o].tokens),{header:!1,align:f.align[o]});h+=this.renderer.tablerow(d)}i+=this.renderer.table(u,h);continue}case"blockquote":{h=this.parse(f.tokens),i+=this.renderer.blockquote(h);continue}case"list":{for(m=f.ordered,g=f.start,b=f.loose,a=f.items.length,h="",r=0;r<a;r++)x=f.items[r],k=x.checked,E=x.task,w="",x.task&&(T=this.renderer.checkbox(k),b?x.tokens.length>0&&x.tokens[0].type==="paragraph"?(x.tokens[0].text=T+" "+x.tokens[0].text,x.tokens[0].tokens&&x.tokens[0].tokens.length>0&&x.tokens[0].tokens[0].type==="text"&&(x.tokens[0].tokens[0].text=T+" "+x.tokens[0].tokens[0].text)):x.tokens.unshift({type:"text",text:T}):w+=T),w+=this.parse(x.tokens,b),h+=this.renderer.listitem(w,E,k);i+=this.renderer.list(h,m,g);continue}case"html":{i+=this.renderer.html(f.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{for(h=f.tokens?this.parseInline(f.tokens):f.text;s+1<C&&e[s+1].type==="text";)f=e[++s],h+="\n"+(f.tokens?this.parseInline(f.tokens):f.text);i+=t?this.renderer.paragraph(h):h;continue}default:{const A='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(A);return}else throw new Error(A)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",s,r,o;const a=e.length;for(s=0;s<a;s++){if(r=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){i+=o||"";continue}switch(r.type){case"escape":{i+=t.text(r.text);break}case"html":{i+=t.html(r.text);break}case"link":{i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{i+=t.image(r.href,r.title,r.text);break}case"strong":{i+=t.strong(this.parseInline(r.tokens,t));break}case"em":{i+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{i+=t.codespan(r.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(r.tokens,t));break}case"text":{i+=t.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}}function vn(n,e,t){if(typeof n>"u"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Ha({},vn.defaults,e||{}),Mz(e),t){const i=e.highlight;let s;try{s=Lc.lex(n,e)}catch(a){return t(a)}const r=function(a){let l;if(!a)try{e.walkTokens&&vn.walkTokens(s,e.walkTokens),l=Oc.parse(s,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!s.length))return r();let o=0;vn.walkTokens(s,function(a){a.type==="code"&&(o++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&r()})},0))}),o===0&&r();return}try{const i=Lc.lex(n,e);return e.walkTokens&&vn.walkTokens(i,e.walkTokens),Oc.parse(i,e)}catch(i){if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+Hs(i.message+"",!0)+"</pre>";throw i}}vn.options=vn.setOptions=function(n){return Ha(vn.defaults,n),g8e(vn.defaults),vn};vn.getDefaults=Oz;vn.defaults=um;vn.use=function(...n){const e=Ha({},...n),t=vn.defaults.extensions||{renderers:{},childTokens:{}};let i;n.forEach(s=>{if(s.extensions&&(i=!0,s.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const o=t.renderers?t.renderers[r.name]:null;o?t.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[r.level]?t[r.level].unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}r.childTokens&&(t.childTokens[r.name]=r.childTokens)})),s.renderer){const r=vn.defaults.renderer||new D3;for(const o in s.renderer){const a=r[o];r[o]=(...l)=>{let c=s.renderer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}e.renderer=r}if(s.tokenizer){const r=vn.defaults.tokenizer||new O3;for(const o in s.tokenizer){const a=r[o];r[o]=(...l)=>{let c=s.tokenizer[o].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}e.tokenizer=r}if(s.walkTokens){const r=vn.defaults.walkTokens;e.walkTokens=function(o){s.walkTokens.call(this,o),r&&r.call(this,o)}}i&&(e.extensions=t),vn.setOptions(e)})};vn.walkTokens=function(n,e){for(const t of n)switch(e.call(vn,t),t.type){case"table":{for(const i of t.header)vn.walkTokens(i.tokens,e);for(const i of t.rows)for(const s of i)vn.walkTokens(s.tokens,e);break}case"list":{vn.walkTokens(t.items,e);break}default:vn.defaults.extensions&&vn.defaults.extensions.childTokens&&vn.defaults.extensions.childTokens[t.type]?vn.defaults.extensions.childTokens[t.type].forEach(function(i){vn.walkTokens(t[i],e)}):t.tokens&&vn.walkTokens(t.tokens,e)}};vn.parseInline=function(n,e){if(typeof n>"u"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=Ha({},vn.defaults,e||{}),Mz(e);try{const t=Lc.lexInline(n,e);return e.walkTokens&&vn.walkTokens(t,e.walkTokens),Oc.parseInline(t,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+Hs(t.message+"",!0)+"</pre>";throw t}};vn.Parser=Oc;vn.parser=Oc.parse;vn.Renderer=D3;vn.TextRenderer=Nz;vn.Lexer=Lc;vn.lexer=Lc.lex;vn.Tokenizer=O3;vn.Slugger=Fz;vn.parse=vn;vn.options;vn.setOptions;vn.use;vn.walkTokens;vn.parseInline;Oc.parse;Lc.lex;var M3=typeof window<"u"?window:{};function L8e(){var n=M3.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch(t){}return e}function O8e(){var n=function(){};return D8e()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}function D8e(){var n=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){M3.ActiveXObject&&(n=!0)}return n}L8e()?M3.DOMParser:O8e();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $L={"(":")","[":"]","{":"}"};class M8e extends Ml{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"mention")}execute(e){const t=this.editor.model,s=t.document.selection,r=typeof e.mention=="string"?{id:e.mention}:e.mention,o=r.id,a=e.range||s.getFirstRange();if(!t.canEditAt(a))return;const l=e.text||o,c=Bz({_text:l,id:o},r);if(e.marker.length!=1)throw new _e("mentioncommand-incorrect-marker",this);if(o.charAt(0)!=e.marker)throw new _e("mentioncommand-incorrect-id",this);t.change(d=>{const u=Hd(s.getAttributes()),h=new Map(u.entries());h.set("mention",c);const f=t.insertContent(d.createText(l,h),a),m=f.start.nodeBefore,g=f.end.nodeAfter,b=g&&g.is("$text")&&g.data.startsWith(" ");let w=!1;if(m&&g&&m.is("$text")&&g.is("$text")){const x=m.data.slice(-1),k=x in $L,E=k&&g.data.startsWith($L[x]);w=k&&E}!w&&!b&&t.insertContent(d.createText(" ",u),a.start.getShiftedBy(l.length))})}}class N8e extends tn{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model,i=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:s=>Vz(s)}}),e.conversion.for("downcast").attributeToElement({model:"mention",view:B8e}),e.conversion.for("downcast").add(F8e),i.registerPostFixer(s=>z8e(s,i,t.schema)),i.registerPostFixer(s=>H8e(s,i)),i.registerPostFixer(s=>V8e(s,i)),e.commands.add("mention",new M8e(e))}}function Bz(n,e){return Object.assign({uid:Oa()},n,e||{})}function Vz(n,e){const t=n.getAttribute("data-mention"),i=n.getChild(0);if(!i)return;const s={id:t,_text:i.data};return Bz(s,e)}function F8e(n){n.on("attribute:mention",(e,t,i)=>{const s=t.attributeNewValue;if(!t.item.is("$textProxy")||!s)return;const r=t.range.start;(r.textNode||r.nodeAfter).data!=s._text&&i.consumable.consume(t.item,e.name)},{priority:"highest"})}function B8e(n,{writer:e}){if(!n)return;const t={class:"mention","data-mention":n.id},i={id:n.uid,priority:20};return e.createAttributeElement("span",t,i)}function V8e(n,e){const t=e.selection,i=t.focus;return t.isCollapsed&&t.hasAttribute("mention")&&U8e(i)?(n.removeSelectionAttribute("mention"),!0):!1}function U8e(n){const e=n.isAtStart;return n.nodeBefore&&n.nodeBefore.is("$text")||e}function z8e(n,e,t){const i=e.differ.getChanges();let s=!1;for(const r of i){if(r.type=="attribute")continue;const o=r.position;if(r.name=="$text"){const a=o.textNode&&o.textNode.nextSibling;s=Iu(o.textNode,n)||s,s=Iu(a,n)||s,s=Iu(o.nodeBefore,n)||s,s=Iu(o.nodeAfter,n)||s}if(r.name!="$text"&&r.type=="insert"){const a=o.nodeAfter;for(const l of n.createRangeIn(a).getItems())s=Iu(l,n)||s}if(r.type=="insert"&&t.isInline(r.name)){const a=o.nodeAfter&&o.nodeAfter.nextSibling;s=Iu(o.nodeBefore,n)||s,s=Iu(a,n)||s}}return s}function H8e(n,e){const t=e.differ.getChanges();let i=!1;for(const s of t)if(s.type==="attribute"&&s.attributeKey!="mention"){const r=s.range.start.nodeBefore,o=s.range.end.nodeAfter;for(const a of[r,o])Uz(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(n.setAttribute(s.attributeKey,s.attributeNewValue,a),i=!0)}return i}function Uz(n){if(!n||!(n.is("$text")||n.is("$textProxy"))||!n.hasAttribute("mention"))return!1;const e=n.data,i=n.getAttribute("mention")._text;return e!=i}function Iu(n,e){return Uz(n)?(e.removeAttribute("mention",n),!0):!1}class j8e extends qx{constructor(t){super(t);$(this,"selected");$(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const t=this.selected,i=this.items.getIndex(t);this.select(i+1)}selectPrevious(){const t=this.selected,i=this.items.getIndex(t);this.select(i-1)}select(t){let i=0;t>0&&t<this.items.length?i=t:t<0&&(i=this.items.length-1);const s=this.items.get(i);this.selected!==s&&(this.selected&&this.selected.removeHighlight(),s.highlight(),this.selected=s,this._isItemVisibleInScrolledArea(s)||(this.element.scrollTop=s.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(t){return new Sn(this.element).contains(new Sn(t.element))}}class G8e extends un{constructor(t,i){super(t);$(this,"domElement");this.template=void 0,this.domElement=i,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(s,r,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class W8e extends $c{constructor(){super(...arguments);$(this,"item");$(this,"marker")}highlight(){const t=this.children.first;t.isOn=!0}removeHighlight(){const t=this.children.first;t.isOn=!1}}const av=3,q8e=[On.arrowup,On.arrowdown,On.esc],K8e=[On.enter,On.tab];class Y8e extends tn{constructor(t){super(t);$(this,"_mentionsView");$(this,"_mentionsConfigurations");$(this,"_balloon");$(this,"_items",new Jd);$(this,"_lastRequested");$(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=Sc(this._requestFeed,100),t.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Q$]}init(){const t=this.editor,i=t.config.get("mention.commitKeys")||K8e,s=q8e.concat(i);this._balloon=t.plugins.get(Q$),t.editing.view.document.on("keydown",(a,l)=>{o(l.keyCode)&&this._isUIVisible&&(l.preventDefault(),a.stop(),l.keyCode==On.arrowdown&&this._mentionsView.selectNext(),l.keyCode==On.arrowup&&this._mentionsView.selectPrevious(),i.includes(l.keyCode)&&this._mentionsView.executeSelected(),l.keyCode==On.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),C3({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=t.config.get("mention.feeds");for(const a of r){const{feed:l,marker:c,dropdownLimit:d}=a;if(!n$e(c))throw new _e("mentionconfig-incorrect-marker",null,{marker:c});const u=typeof l=="function"?l.bind(this.editor):J8e(l),h=a.itemRenderer,f={marker:c,feedCallback:u,itemRenderer:h,dropdownLimit:d};this._mentionsConfigurations.set(c,f)}this._setupTextWatcher(r),this.listenTo(t,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(a,l)=>this._handleFeedResponse(l)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(a){return s.includes(a)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const t=this.editor.locale,i=new j8e(t);return i.items.bindTo(this._items).using(s=>{const{item:r,marker:o}=s,{dropdownLimit:a}=this._mentionsConfigurations.get(o),l=a||this.editor.config.get("mention.dropdownLimit")||10;if(i.items.length>=l)return null;const c=new W8e(t),d=this._renderItem(r,o);return d.delegate("execute").to(c),c.children.add(d),c.item=r,c.marker=o,c.on("execute",()=>{i.fire("execute",{item:r,marker:o})}),c}),i.on("execute",(s,r)=>{const o=this.editor,a=o.model,l=r.item,c=r.marker,d=o.model.markers.get("mention"),u=a.createPositionAt(a.document.selection.focus),h=a.createPositionAt(d.getStart()),f=a.createRange(h,u);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:l,text:l.text,marker:c,range:f}),o.editing.view.focus()}),i}_getItemRenderer(t){const{itemRenderer:i}=this._mentionsConfigurations.get(t);return i}_requestFeed(t,i){this._lastRequested=i;const{feedCallback:s}=this._mentionsConfigurations.get(t),r=s(i);if(!(r instanceof Promise)){this.fire("requestFeed:response",{feed:r,marker:t,feedText:i});return}r.then(a=>{this._lastRequested==i?this.fire("requestFeed:response",{feed:a,marker:t,feedText:i}):this.fire("requestFeed:discarded",{feed:a,marker:t,feedText:i})}).catch(a=>{this.fire("requestFeed:error",{error:a}),is("mention-feed-callback-error",{marker:t})})}_setupTextWatcher(t){const i=this.editor,s=t.map(a=>({...a,pattern:Hz(a.marker,a.minimumCharacters||0)})),r=new gRe(i.model,Q8e(s));r.on("matched",(a,l)=>{const c=zz(s,l.text),u=i.model.document.selection.focus,h=i.model.createPositionAt(u.parent,c.position);if(e$e(u)||t$e(h)){this._hideUIAndRemoveMarker();return}const f=Z8e(c,l.text),m=c.marker.length+f.length,g=u.getShiftedBy(-m),b=u.getShiftedBy(-f.length),w=i.model.createRange(g,b);if(Bk(i)){const x=i.model.markers.get("mention");i.model.change(k=>{k.updateMarker(x,{range:w})})}else i.model.change(x=>{x.addMarker("mention",{range:w,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(c.marker,f)}),r.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=i.commands.get("mention");return r.bind("isEnabled").to(o),r}_handleFeedResponse(t){const{feed:i,marker:s}=t;if(!Bk(this.editor))return;this._items.clear();for(const o of i){const a=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:a,marker:s})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(t){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(t,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(t,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),Bk(this.editor)&&this.editor.model.change(t=>t.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(t,i){const s=this.editor;let r,o=t.id;const a=this._getItemRenderer(i);if(a){const l=a(t);typeof l!="string"?r=new G8e(s.locale,l):o=l}if(!r){const l=new pr(s.locale);l.label=o,l.withText=!0,r=l}return r}_getBalloonPanelPositionData(t,i){const s=this.editor,r=s.editing,o=r.view.domConverter,a=r.mapper,l=s.locale.uiLanguageDirection;return{target:()=>{let c=t.getRange();c.start.root.rootName=="$graveyard"&&(c=s.model.document.selection.getFirstRange());const d=a.toViewRange(c);return Sn.getDomRangeRects(o.viewRangeToDom(d)).pop()},limiter:()=>{const c=this.editor.editing.view,u=c.document.selection.editableElement;return u?c.domConverter.mapViewToDom(u.root):null},positions:X8e(i,l)}}}function X8e(n,e){const t={caret_se:i=>({top:i.bottom+av,left:i.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(i,s)=>({top:i.top-s.height-av,left:i.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(i,s)=>({top:i.bottom+av,left:i.right-s.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(i,s)=>({top:i.top-s.height-av,left:i.right-s.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(t,n)?[t[n]]:e!=="rtl"?[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw]:[t.caret_sw,t.caret_se,t.caret_nw,t.caret_ne]}function zz(n,e){let t;for(const i of n){const s=e.lastIndexOf(i.marker);s>0&&!e.substring(s-1).match(i.pattern)||(!t||s>=t.position)&&(t={marker:i.marker,position:s,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}return t}function Hz(n,e){const t=e==0?"*":"{".concat(e,",}"),i=bn.features.isRegExpUnicodePropertySupported?"\\p{Ps}\\p{Pi}\"'":"\\(\\[{\"'",s=".";n=n.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const r="(?:^|[ ".concat(i,"])([").concat(n,"])(").concat(s).concat(t,")$");return new RegExp(r,"u")}function Q8e(n){return t=>{const i=zz(n,t);if(!i)return!1;let s=0;i.position!==0&&(s=i.position-1);const r=t.substring(s);return i.pattern.test(r)}}function Z8e(n,e){let t=0;n.position!==0&&(t=n.position-1);const i=Hz(n.marker,0);return e.substring(t).match(i)[2]}function J8e(n){return e=>n.filter(i=>(typeof i=="string"?i:String(i.id)).toLowerCase().includes(e.toLowerCase()))}function e$e(n){const e=n.textNode&&n.textNode.hasAttribute("mention"),t=n.nodeBefore;return e||t&&t.is("$text")&&t.hasAttribute("mention")}function t$e(n){const e=n.nodeAfter;return e&&e.is("$text")&&e.hasAttribute("mention")}function n$e(n){return n&&n.length==1}function Bk(n){return n.model.markers.has("mention")}class i$e extends tn{toMentionAttribute(e,t){return Vz(e,t)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[N8e,Y8e]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class s$e extends un{constructor(t){super(t);$(this,"tiles");$(this,"focusTracker");$(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new na,this.keystrokes=new Dl,DIe({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>Ut.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(t,i){const s=new pr(this.locale);return s.set({label:t,withText:!0,class:"ck-character-grid__tile"}),s.extendTemplate({attributes:{title:i},on:{mouseover:s.bindTemplate.to("mouseover"),focus:s.bindTemplate.to("focus")}}),s.on("mouseover",()=>{this.fire("tileHover",{name:i,character:t})}),s.on("focus",()=>{this.fire("tileFocus",{name:i,character:t})}),s.on("execute",()=>{this.fire("execute",{name:i,character:t})}),s}render(){super.render();for(const t of this.tiles)this.focusTracker.add(t.element);this.tiles.on("change",(t,{added:i,removed:s})=>{if(i.length>0)for(const r of i)this.focusTracker.add(r.element);if(s.length>0)for(const r of s)this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class r$e extends un{constructor(e){super(e);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",o$e),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",i=>i||"​")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function o$e(n){return n===null?"":"U+"+("0000"+n.codePointAt(0).toString(16)).slice(-4)}class a$e extends un{constructor(t,i,s,r){super(t);$(this,"items");$(this,"focusTracker");$(this,"keystrokes");$(this,"_focusCycler");$(this,"categoriesView");$(this,"gridView");$(this,"infoView");this.categoriesView=i,this.gridView=s,this.infoView=r,this.items=this.createCollection(),this.focusTracker=new na,this.keystrokes=new Dl,this._focusCycler=new lm({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}var l$e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';class c$e extends un{constructor(t,i){super(t);$(this,"_groupNames");$(this,"_dropdownView");this.set("currentGroupName",Array.from(i.entries())[0][0]),this._groupNames=i,this._dropdownView=new XIe(t,mPe),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const t=new Jd;for(const[r,o]of this._groupNames){const a={type:"button",model:new KPe({name:r,label:o,role:"menuitemradio",withText:!0})};a.model.bind("isOn").to(this,"currentGroupName",l=>l===r),t.add(a)}const i=this.locale.t,s=i("Category");this._dropdownView.set({label:s,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:s,ariaLabel:s,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",r=>this._groupNames.get(r)),this._dropdownView.fieldView.on("execute",({source:r})=>{this.currentGroupName=r.name}),aPe(this._dropdownView.fieldView,t,{ariaLabel:s,role:"menu"})}}const Vk="All";class N3 extends tn{constructor(t){super(t);$(this,"_characters");$(this,"_groups");$(this,"_allSpecialCharactersGroupLabel");const i=t.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=i("All")}static get requires(){return[kz,cw]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const t=this.editor;t.ui.componentFactory.add("specialCharacters",()=>{const i=this._createDialogButton(pr);return i.set({tooltip:!0}),i}),t.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(cm))}addItems(t,i,s={label:t}){if(t===Vk)throw new _e("special-character-invalid-group-name",null);const r=this._getGroup(t,s.label);for(const o of i)r.items.add(o.title),this._characters.set(o.title,o.character)}getGroups(){const t=Array.from(this._groups.keys()),i=this.editor.config.get("specialCharacters.order")||[],s=i.find(r=>!t.includes(r));if(s)throw new _e("special-character-invalid-order-group-name",null,{invalidGroup:s});return new Set([...i,...t])}getCharactersForGroup(t){if(t===Vk)return new Set(this._characters.keys());const i=this._groups.get(t);if(i)return i.items}getCharacter(t){return this._characters.get(t)}_getGroup(t,i){return this._groups.has(t)||this._groups.set(t,{items:new Set,label:i}),this._groups.get(t)}_updateGrid(t,i){i.tiles.clear();const s=this.getCharactersForGroup(t);for(const r of s){const o=this.getCharacter(r);i.tiles.add(i.createTile(o,r))}}_createDropdownPanelContent(t){const i=Array.from(this.getGroups()).map(l=>[l,this._groups.get(l).label]),s=new Map([[Vk,this._allSpecialCharactersGroupLabel],...i]),r=new c$e(t,s),o=new s$e(t),a=new r$e(t);return o.on("tileHover",(l,c)=>{a.set(c)}),o.on("tileFocus",(l,c)=>{a.set(c)}),r.on("change:currentGroupName",(l,c,d)=>{this._updateGrid(d,o)}),this._updateGrid(r.currentGroupName,o),{categoriesView:r,gridView:o,infoView:a}}_createDialogButton(t){const i=this.editor,s=i.locale,r=new t(i.locale),o=i.commands.get("insertText"),a=s.t,l=this.editor.plugins.get("Dialog");return r.set({label:a("Special characters"),icon:l$e,isToggleable:!0}),r.bind("isOn").to(l,"id",c=>c==="specialCharacters"),r.bind("isEnabled").to(o,"isEnabled"),r.on("execute",()=>{if(l.id==="specialCharacters"){l.hide();return}this._showDialog()}),r}_showDialog(){const t=this.editor,i=t.plugins.get("Dialog"),s=t.locale,r=s.t,{categoriesView:o,gridView:a,infoView:l}=this._createDropdownPanelContent(s),c=new a$e(s,o,a,l);a.on("execute",(d,u)=>{t.execute("insertText",{text:u.character})}),i.show({id:"specialCharacters",title:r("Special characters"),className:"ck-special-characters",content:c,position:Fo.EDITOR_TOP_SIDE})}}class Xx extends tn{static get pluginName(){return"SpecialCharactersArrows"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Arrows",[{title:t("leftwards simple arrow"),character:"←"},{title:t("rightwards simple arrow"),character:"→"},{title:t("upwards simple arrow"),character:"↑"},{title:t("downwards simple arrow"),character:"↓"},{title:t("leftwards double arrow"),character:"⇐"},{title:t("rightwards double arrow"),character:"⇒"},{title:t("upwards double arrow"),character:"⇑"},{title:t("downwards double arrow"),character:"⇓"},{title:t("leftwards dashed arrow"),character:"⇠"},{title:t("rightwards dashed arrow"),character:"⇢"},{title:t("upwards dashed arrow"),character:"⇡"},{title:t("downwards dashed arrow"),character:"⇣"},{title:t("leftwards arrow to bar"),character:"⇤"},{title:t("rightwards arrow to bar"),character:"⇥"},{title:t("upwards arrow to bar"),character:"⤒"},{title:t("downwards arrow to bar"),character:"⤓"},{title:t("up down arrow with base"),character:"↨"},{title:t("back with leftwards arrow above"),character:"🔙"},{title:t("end with leftwards arrow above"),character:"🔚"},{title:t("on with exclamation mark with left right arrow above"),character:"🔛"},{title:t("soon with rightwards arrow above"),character:"🔜"},{title:t("top with upwards arrow above"),character:"🔝"}],{label:t("Arrows")})}}class Qx extends tn{static get pluginName(){return"SpecialCharactersText"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:t("Single left-pointing angle quotation mark")},{character:"›",title:t("Single right-pointing angle quotation mark")},{character:"«",title:t("Left-pointing double angle quotation mark")},{character:"»",title:t("Right-pointing double angle quotation mark")},{character:"‘",title:t("Left single quotation mark")},{character:"’",title:t("Right single quotation mark")},{character:"“",title:t("Left double quotation mark")},{character:"”",title:t("Right double quotation mark")},{character:"‚",title:t("Single low-9 quotation mark")},{character:"„",title:t("Double low-9 quotation mark")},{character:"¡",title:t("Inverted exclamation mark")},{character:"¿",title:t("Inverted question mark")},{character:"‥",title:t("Two dot leader")},{character:"…",title:t("Horizontal ellipsis")},{character:"‡",title:t("Double dagger")},{character:"‰",title:t("Per mille sign")},{character:"‱",title:t("Per ten thousand sign")},{character:"‼",title:t("Double exclamation mark")},{character:"⁈",title:t("Question exclamation mark")},{character:"⁉",title:t("Exclamation question mark")},{character:"⁇",title:t("Double question mark")},{character:"©",title:t("Copyright sign")},{character:"®",title:t("Registered sign")},{character:"™",title:t("Trade mark sign")},{character:"§",title:t("Section sign")},{character:"¶",title:t("Paragraph sign")},{character:"⁋",title:t("Reversed paragraph sign")}],{label:t("Text")})}}class Zx extends tn{static get pluginName(){return"SpecialCharactersMathematical"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:t("Less-than sign")},{character:">",title:t("Greater-than sign")},{character:"≤",title:t("Less-than or equal to")},{character:"≥",title:t("Greater-than or equal to")},{character:"–",title:t("En dash")},{character:"—",title:t("Em dash")},{character:"¯",title:t("Macron")},{character:"‾",title:t("Overline")},{character:"°",title:t("Degree sign")},{character:"−",title:t("Minus sign")},{character:"±",title:t("Plus-minus sign")},{character:"÷",title:t("Division sign")},{character:"⁄",title:t("Fraction slash")},{character:"×",title:t("Multiplication sign")},{character:"ƒ",title:t("Latin small letter f with hook")},{character:"∫",title:t("Integral")},{character:"∑",title:t("N-ary summation")},{character:"∞",title:t("Infinity")},{character:"√",title:t("Square root")},{character:"∼",title:t("Tilde operator")},{character:"≅",title:t("Approximately equal to")},{character:"≈",title:t("Almost equal to")},{character:"≠",title:t("Not equal to")},{character:"≡",title:t("Identical to")},{character:"∈",title:t("Element of")},{character:"∉",title:t("Not an element of")},{character:"∋",title:t("Contains as member")},{character:"∏",title:t("N-ary product")},{character:"∧",title:t("Logical and")},{character:"∨",title:t("Logical or")},{character:"¬",title:t("Not sign")},{character:"∩",title:t("Intersection")},{character:"∪",title:t("Union")},{character:"∂",title:t("Partial differential")},{character:"∀",title:t("For all")},{character:"∃",title:t("There exists")},{character:"∅",title:t("Empty set")},{character:"∇",title:t("Nabla")},{character:"∗",title:t("Asterisk operator")},{character:"∝",title:t("Proportional to")},{character:"∠",title:t("Angle")},{character:"¼",title:t("Vulgar fraction one quarter")},{character:"½",title:t("Vulgar fraction one half")},{character:"¾",title:t("Vulgar fraction three quarters")}],{label:t("Mathematical")})}}class Jx extends tn{static get pluginName(){return"SpecialCharactersLatin"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:t("Latin capital letter a with macron")},{character:"ā",title:t("Latin small letter a with macron")},{character:"Ă",title:t("Latin capital letter a with breve")},{character:"ă",title:t("Latin small letter a with breve")},{character:"Ą",title:t("Latin capital letter a with ogonek")},{character:"ą",title:t("Latin small letter a with ogonek")},{character:"Ć",title:t("Latin capital letter c with acute")},{character:"ć",title:t("Latin small letter c with acute")},{character:"Ĉ",title:t("Latin capital letter c with circumflex")},{character:"ĉ",title:t("Latin small letter c with circumflex")},{character:"Ċ",title:t("Latin capital letter c with dot above")},{character:"ċ",title:t("Latin small letter c with dot above")},{character:"Č",title:t("Latin capital letter c with caron")},{character:"č",title:t("Latin small letter c with caron")},{character:"Ď",title:t("Latin capital letter d with caron")},{character:"ď",title:t("Latin small letter d with caron")},{character:"Đ",title:t("Latin capital letter d with stroke")},{character:"đ",title:t("Latin small letter d with stroke")},{character:"Ē",title:t("Latin capital letter e with macron")},{character:"ē",title:t("Latin small letter e with macron")},{character:"Ĕ",title:t("Latin capital letter e with breve")},{character:"ĕ",title:t("Latin small letter e with breve")},{character:"Ė",title:t("Latin capital letter e with dot above")},{character:"ė",title:t("Latin small letter e with dot above")},{character:"Ę",title:t("Latin capital letter e with ogonek")},{character:"ę",title:t("Latin small letter e with ogonek")},{character:"Ě",title:t("Latin capital letter e with caron")},{character:"ě",title:t("Latin small letter e with caron")},{character:"Ĝ",title:t("Latin capital letter g with circumflex")},{character:"ĝ",title:t("Latin small letter g with circumflex")},{character:"Ğ",title:t("Latin capital letter g with breve")},{character:"ğ",title:t("Latin small letter g with breve")},{character:"Ġ",title:t("Latin capital letter g with dot above")},{character:"ġ",title:t("Latin small letter g with dot above")},{character:"Ģ",title:t("Latin capital letter g with cedilla")},{character:"ģ",title:t("Latin small letter g with cedilla")},{character:"Ĥ",title:t("Latin capital letter h with circumflex")},{character:"ĥ",title:t("Latin small letter h with circumflex")},{character:"Ħ",title:t("Latin capital letter h with stroke")},{character:"ħ",title:t("Latin small letter h with stroke")},{character:"Ĩ",title:t("Latin capital letter i with tilde")},{character:"ĩ",title:t("Latin small letter i with tilde")},{character:"Ī",title:t("Latin capital letter i with macron")},{character:"ī",title:t("Latin small letter i with macron")},{character:"Ĭ",title:t("Latin capital letter i with breve")},{character:"ĭ",title:t("Latin small letter i with breve")},{character:"Į",title:t("Latin capital letter i with ogonek")},{character:"į",title:t("Latin small letter i with ogonek")},{character:"İ",title:t("Latin capital letter i with dot above")},{character:"ı",title:t("Latin small letter dotless i")},{character:"Ĳ",title:t("Latin capital ligature ij")},{character:"ĳ",title:t("Latin small ligature ij")},{character:"Ĵ",title:t("Latin capital letter j with circumflex")},{character:"ĵ",title:t("Latin small letter j with circumflex")},{character:"Ķ",title:t("Latin capital letter k with cedilla")},{character:"ķ",title:t("Latin small letter k with cedilla")},{character:"ĸ",title:t("Latin small letter kra")},{character:"Ĺ",title:t("Latin capital letter l with acute")},{character:"ĺ",title:t("Latin small letter l with acute")},{character:"Ļ",title:t("Latin capital letter l with cedilla")},{character:"ļ",title:t("Latin small letter l with cedilla")},{character:"Ľ",title:t("Latin capital letter l with caron")},{character:"ľ",title:t("Latin small letter l with caron")},{character:"Ŀ",title:t("Latin capital letter l with middle dot")},{character:"ŀ",title:t("Latin small letter l with middle dot")},{character:"Ł",title:t("Latin capital letter l with stroke")},{character:"ł",title:t("Latin small letter l with stroke")},{character:"Ń",title:t("Latin capital letter n with acute")},{character:"ń",title:t("Latin small letter n with acute")},{character:"Ņ",title:t("Latin capital letter n with cedilla")},{character:"ņ",title:t("Latin small letter n with cedilla")},{character:"Ň",title:t("Latin capital letter n with caron")},{character:"ň",title:t("Latin small letter n with caron")},{character:"ŉ",title:t("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:t("Latin capital letter eng")},{character:"ŋ",title:t("Latin small letter eng")},{character:"Ō",title:t("Latin capital letter o with macron")},{character:"ō",title:t("Latin small letter o with macron")},{character:"Ŏ",title:t("Latin capital letter o with breve")},{character:"ŏ",title:t("Latin small letter o with breve")},{character:"Ő",title:t("Latin capital letter o with double acute")},{character:"ő",title:t("Latin small letter o with double acute")},{character:"Œ",title:t("Latin capital ligature oe")},{character:"œ",title:t("Latin small ligature oe")},{character:"Ŕ",title:t("Latin capital letter r with acute")},{character:"ŕ",title:t("Latin small letter r with acute")},{character:"Ŗ",title:t("Latin capital letter r with cedilla")},{character:"ŗ",title:t("Latin small letter r with cedilla")},{character:"Ř",title:t("Latin capital letter r with caron")},{character:"ř",title:t("Latin small letter r with caron")},{character:"Ś",title:t("Latin capital letter s with acute")},{character:"ś",title:t("Latin small letter s with acute")},{character:"Ŝ",title:t("Latin capital letter s with circumflex")},{character:"ŝ",title:t("Latin small letter s with circumflex")},{character:"Ş",title:t("Latin capital letter s with cedilla")},{character:"ş",title:t("Latin small letter s with cedilla")},{character:"Š",title:t("Latin capital letter s with caron")},{character:"š",title:t("Latin small letter s with caron")},{character:"Ţ",title:t("Latin capital letter t with cedilla")},{character:"ţ",title:t("Latin small letter t with cedilla")},{character:"Ť",title:t("Latin capital letter t with caron")},{character:"ť",title:t("Latin small letter t with caron")},{character:"Ŧ",title:t("Latin capital letter t with stroke")},{character:"ŧ",title:t("Latin small letter t with stroke")},{character:"Ũ",title:t("Latin capital letter u with tilde")},{character:"ũ",title:t("Latin small letter u with tilde")},{character:"Ū",title:t("Latin capital letter u with macron")},{character:"ū",title:t("Latin small letter u with macron")},{character:"Ŭ",title:t("Latin capital letter u with breve")},{character:"ŭ",title:t("Latin small letter u with breve")},{character:"Ů",title:t("Latin capital letter u with ring above")},{character:"ů",title:t("Latin small letter u with ring above")},{character:"Ű",title:t("Latin capital letter u with double acute")},{character:"ű",title:t("Latin small letter u with double acute")},{character:"Ų",title:t("Latin capital letter u with ogonek")},{character:"ų",title:t("Latin small letter u with ogonek")},{character:"Ŵ",title:t("Latin capital letter w with circumflex")},{character:"ŵ",title:t("Latin small letter w with circumflex")},{character:"Ŷ",title:t("Latin capital letter y with circumflex")},{character:"ŷ",title:t("Latin small letter y with circumflex")},{character:"Ÿ",title:t("Latin capital letter y with diaeresis")},{character:"Ź",title:t("Latin capital letter z with acute")},{character:"ź",title:t("Latin small letter z with acute")},{character:"Ż",title:t("Latin capital letter z with dot above")},{character:"ż",title:t("Latin small letter z with dot above")},{character:"Ž",title:t("Latin capital letter z with caron")},{character:"ž",title:t("Latin small letter z with caron")},{character:"ſ",title:t("Latin small letter long s")}],{label:t("Latin")})}}class e_ extends tn{static get pluginName(){return"SpecialCharactersCurrency"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:t("Dollar sign")},{character:"€",title:t("Euro sign")},{character:"¥",title:t("Yen sign")},{character:"£",title:t("Pound sign")},{character:"¢",title:t("Cent sign")},{character:"₠",title:t("Euro-currency sign")},{character:"₡",title:t("Colon sign")},{character:"₢",title:t("Cruzeiro sign")},{character:"₣",title:t("French franc sign")},{character:"₤",title:t("Lira sign")},{character:"¤",title:t("Currency sign")},{character:"₿",title:t("Bitcoin sign")},{character:"₥",title:t("Mill sign")},{character:"₦",title:t("Naira sign")},{character:"₧",title:t("Peseta sign")},{character:"₨",title:t("Rupee sign")},{character:"₩",title:t("Won sign")},{character:"₪",title:t("New sheqel sign")},{character:"₫",title:t("Dong sign")},{character:"₭",title:t("Kip sign")},{character:"₮",title:t("Tugrik sign")},{character:"₯",title:t("Drachma sign")},{character:"₰",title:t("German penny sign")},{character:"₱",title:t("Peso sign")},{character:"₲",title:t("Guarani sign")},{character:"₳",title:t("Austral sign")},{character:"₴",title:t("Hryvnia sign")},{character:"₵",title:t("Cedi sign")},{character:"₶",title:t("Livre tournois sign")},{character:"₷",title:t("Spesmilo sign")},{character:"₸",title:t("Tenge sign")},{character:"₹",title:t("Indian rupee sign")},{character:"₺",title:t("Turkish lira sign")},{character:"₻",title:t("Nordic mark sign")},{character:"₼",title:t("Manat sign")},{character:"₽",title:t("Ruble sign")}],{label:t("Currency")})}}class F3 extends tn{static get pluginName(){return"SpecialCharactersEssentials"}static get isOfficialPlugin(){return!0}static get requires(){return[e_,Qx,Zx,Xx,Jx]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jz(n){if(n.is("$text")||n.is("$textProxy"))return n.data;const e=n;let t="",i=null;for(const s of e.getChildren()){const r=jz(s);i&&i.is("element")&&(t+="\n"),t+=r,i=s}return t}class B3 extends tn{constructor(t){super(t);$(this,"_config");$(this,"_outputView");$(this,"_wordsMatchRegExp");this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=t.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=bn.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9À-ž]+\S?)+/gu}static get pluginName(){return"WordCount"}static get isOfficialPlugin(){return!0}init(){this.editor.model.document.on("change:data",p0(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(i,s)=>{this._config.onUpdate(s)}),Ac(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const t=this.editor,i=t.t,s=t.config.get("wordCount.displayWords"),r=t.config.get("wordCount.displayCharacters"),o=Sa.bind(this,this),a=[];return this._outputView||(this._outputView=new un,(s||s===void 0)&&(this.bind("_wordsLabel").to(this,"words",l=>i("Words: %0",l)),a.push({tag:"div",children:[{text:[o.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(r||r===void 0)&&(this.bind("_charactersLabel").to(this,"characters",l=>i("Characters: %0",l)),a.push({tag:"div",children:[{text:[o.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:a}),this._outputView.render()),this._outputView.element}_getText(){let t="";for(const i of this.editor.model.document.getRoots())t!==""&&(t+="\n"),t+=jz(i);return t}_getCharacters(t){return t.replace(/\n/g,"").length}_getWords(t){return(t.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const t=this._getText(),i=this.words=this._getWords(t),s=this.characters=this._getCharacters(t);this.fire("update",{words:i,characters:s})}}const d$e=Fe({__name:"MessageSkeleton",props:{isOwnMessage:{type:Boolean},isContinuous:{type:Boolean}},setup(n){return(e,t)=>(I(),ve(y(xT),null,{default:j(()=>[_("div",{class:gt(["flex items-center",e.isOwnMessage?"justify-end":"justify-start"])},[e.isOwnMessage?(I(),ve(y(QR),{key:0,class:gt(["flex max-w-[80%] min-h-10 rounded-md",e.isContinuous?"mt-1":"mt-2"])},null,8,["class"])):(I(),ve(y(QR),{key:1,class:"flex max-w-[90%] items-start min-h-10 rounded-md"}))],2)]),_:1}))}}),u$e={class:"px-4 text-center py-3"},h$e=["innerHTML"],f$e=Fe({__name:"MessageTypeNotification",props:{message:{}},setup(n){const e=n,t=()=>{var i,s;return(s=(i=e.message)==null?void 0:i.content)==null?void 0:s.replaceAll("&nbsp;","")};return(i,s)=>(I(),O("div",u$e,[_("div",{class:"text-xs text-[#6B7280] font-normal [overflow-wrap:anywhere]",innerHTML:t()},null,8,h$e)]))}}),p$e=["onClick"],m$e={class:""},g$e={class:"text-xs line-clamp-1 flex-1"},b$e=Fe({__name:"ModalMessageAction",props:{message:{},isOwnMessage:{type:Boolean},isGroup:{type:Boolean},isButtonEdit:{type:Boolean},isButtonRecall:{type:Boolean},isButtonDelete:{type:Boolean}},setup(n){const e=n,t=Rr(),i=()=>{t.sendMessageSocket("recallMessage",{message_id:e.message._id},l=>{(l==null?void 0:l.status)=="success"&&qe.dismiss(null,"recall")})},s=()=>{t.sendMessageSocket("removeMessage",{message_id:e.message._id,conversation_id:e.message.conversation_id},l=>{l.status=="success"&&qe.dismiss(null,"deleted")})},r=()=>{qe.dismiss(null,"edit")},o=[{label:"Sửa",src:"/icons/icEditChat.svg",action:r,active:e.isButtonEdit},{label:"Thu hồi",src:"/icons/icRecallChat.svg",action:i,active:e.isButtonRecall}],a=[{label:"Sửa",src:"/icons/icEditChat.svg",action:r,active:e.isButtonEdit},{label:"Thu hồi",src:"/icons/icRecallChat.svg",action:i,active:e.isButtonRecall},{label:"Xoá",icon:Rx,action:s,active:e.isButtonDelete}];return(l,c)=>(I(),O("div",null,[_("div",null,[L(FB,{message:l.message,"is-group":l.isGroup,"is-own-message":l.isOwnMessage},null,8,["message","is-group","is-own-message"])]),_("div",{class:gt(["bg-white w-fit rounded-lg px-3 mt-2 flex",l.isOwnMessage?"ml-auto":"ml-10"])},[(I(!0),O(Ue,null,ct(l.isGroup?a:o,(d,u)=>(I(),O("div",{key:u},[d.active?(I(),O("div",{key:0,onClick:d==null?void 0:d.action,class:"py-3.5 flex flex-col px-3 text-center"},[_("div",m$e,[d!=null&&d.icon?(I(),ve(y(fe),{key:0,icon:d==null?void 0:d.icon,class:"size-5 text-red-500"},null,8,["icon"])):(I(),ve(y(fe),{key:1,src:d.src,class:"size-5"},null,8,["src"]))]),_("div",g$e,Q(d.label),1)],8,p$e)):re("",!0)]))),128))],2)]))}});var LL;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE"})(LL||(LL={}));var OL;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(OL||(OL={}));const Gz=Na("Filesystem",{web:()=>Kn(()=>import("./web-CZ37fqBr.js"),[]).then(n=>new n.FilesystemWeb)}),v$e={categoriesLabel:"Danh mục",emojiUnsupportedMessage:"Trình duyệt của bạn không hỗ trợ emoji màu.",favoritesLabel:"Yêu thích",loadingMessage:"Đang tải…",networkErrorMessage:"Không thể tải emoji.",regionLabel:"Chọn emoji",searchDescription:"Khi có kết quả tìm kiếm, nhấn lên hoặc xuống để chọn và nhấn Enter để chọn.",searchLabel:"Tìm kiếm",searchResultsLabel:"Kết quả tìm kiếm",skinToneDescription:"Khi mở rộng, nhấn lên hoặc xuống để chọn và nhấn Enter để chọn.",skinToneLabel:"Chọn tông màu da (hiện tại {skinTone})",skinTonesLabel:"Tông màu da",skinTones:["Mặc định","Sáng","Sáng vừa","Trung bình","Tối vừa","Tối"],categories:{custom:"Tùy chỉnh","smileys-emotion":"Mặt cười và cảm xúc","people-body":"Người và cơ thể","animals-nature":"Động vật và thiên nhiên","food-drink":"Thức ăn và đồ uống","travel-places":"Du lịch và địa điểm",activities:"Hoạt động",objects:"Đồ vật",symbols:"Biểu tượng",flags:"Cờ"}},y$e=Fe({__name:"PickerEmo",props:{onSelectEmoji:{type:Function,default:()=>{}}},setup(n){return on(()=>{const e=document.querySelector("emoji-picker");e&&(e.i18n=v$e)}),(e,t)=>(I(),O("div",{onClick:t[1]||(t[1]=qt(()=>{},["stop"])),class:"bg-red-500 flex items-center justify-center"},[_("emoji-picker",{onEmojiClick:t[0]||(t[0]=qt((...i)=>e.onSelectEmoji&&e.onSelectEmoji(...i),["stop"])),class:"w-full","emoji-version":"16.0"},null,32)]))}}),w$e={class:"flex items-center gap-1.5 max-w-[90%]"},x$e=["src","placeholder"],_$e={class:"font-light text-black"},k$e={class:"font-medium line-clamp-1 text-wrap"},E$e={key:0,class:"text-xs text-gray2"},T$e={key:1,class:"scale-y-[-1] text-center text-gray2 mt-[70%]"},C$e={class:"flex overflow-x-scroll px-2"},S$e={class:"flex gap-2"},A$e=["src"],I$e={key:0,class:"flex items-center gap-2 mb-2"},P$e={class:"border-l-2 border-l-blue1 line-clamp-1 pl-2.5 w-full flex flex-col"},R$e=["innerHTML"],$$e={class:"flex place-items-end w-full items-center gap-2"},L$e={class:"w-full min-w-0 flex items-end bg-[#f0f2f5] px-2 pr-2.5 overflow-hidden rounded-[18px]"},O$e={class:"w-full min-w-0"},D$e={class:"flex gap-2 items-center h-10"},M$e=Fe({__name:"ChatRoom",setup(n){var Ae;const{VITE_IMGUR_CLIENT_ID:e,VITE_API_SOCKET:t}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},i=[R3,L3,S0,N3,Xx,e_,F3,Jx,Zx,Qx,B3],s=Zr(),r=en(),{userInfo:o}=et(r),a=Va(),{activeRoom:l,newMsg:c}=et(a),d=K(!1),u=K(),h=(Ae=s.params)==null?void 0:Ae.id,f=gn(),m=K([]),g=K(void 0),b=Rr(),w=K(""),x=K(null),k=K(),E=K([]),T=K(!0),P=K(),C=K(!1),A=()=>{f.back()},R=lt(()=>{var de,we,ze,le,Se,ne,ie,me,V,F;if((de=l.value)!=null&&de.is_group)return{avatar:t+"/"+((we=l.value)==null?void 0:we.avatar),name:(ze=l.value)==null?void 0:ze.name,online:!1};if(((Se=(le=l.value)==null?void 0:le.enemy)==null?void 0:Se.user_id)===((ne=o.value)==null?void 0:ne._id)){const z=(me=(ie=l.value)==null?void 0:ie.me)==null?void 0:me.user;return{avatar:z==null?void 0:z.avatar,name:z==null?void 0:z.full_name,online:!J.isEmpty(z==null?void 0:z.socket_client_ids)}}else{const z=(F=(V=l.value)==null?void 0:V.enemy)==null?void 0:F.user;return{avatar:z==null?void 0:z.avatar,name:z==null?void 0:z.full_name,online:!J.isEmpty(z==null?void 0:z.socket_client_ids)}}}),M=async(de=!1)=>{var we,ze;try{const{data:le}=await Vd.get("/chat/room-messages",{params:{limit:35,"filter[conversation_id]":h,"filter[last_message_id]":((we=g.value)==null?void 0:we._id)||void 0}});if(J.isEmpty(le))T.value=!1;else if(J.isEmpty(le.data))T.value=!1;else{const Se=(ze=le==null?void 0:le.data)!=null?ze:[];T.value=!0,g.value=Se[Se.length-1],de?m.value=[...m.value,...Se]:m.value=Se}}catch(le){console.log(le)}finally{d.value=!1}};on(()=>{d.value=!0,M(!1),T.value=!1,document.addEventListener("click",()=>{C.value=!1})}),_h(()=>{document.removeEventListener("click",()=>{C.value=!1})});const N=async de=>{M(!0),setTimeout(()=>de.target.complete(),500)};ki(c,()=>{var de,we,ze;console.log("ChatRoom new Msg: ",c.value),((de=c.value)==null?void 0:de._id)===h&&(J.isEmpty((we=c.value)==null?void 0:we.last_message)||m.value.unshift((ze=c.value)==null?void 0:ze.last_message))});const U=()=>{J.isEmpty(w.value)||b.sendMessageSocket("sendMessage",{content:w.value,conversation_id:h,type:WT.Default}),E.value.length>0&&b.sendMessageSocket("sendMessage",{attachments:E.value,conversation_id:h,type:WT.Default}),w.value="",E.value=[],k.value=[],C.value=!1,x.value.$el.scrollToTop()},G=async(de,we=-1)=>{var z,se,Te,ke,Ce,ge;const ze=de.sender_id===((z=o.value)==null?void 0:z._id),le=(de==null?void 0:de.status)===qT.Edited,Se=_t().diff(_t(de.created_at),"hour")>24,ne=!le&&ze&&!de.deleted_at&&!Se,ie=ze&&!de.deleted_at&&!Se,me=((se=l.value)==null?void 0:se.is_group)&&((ke=(Te=l.value)==null?void 0:Te.me)==null?void 0:ke.is_admin)&&!de.deleted_at;if(de!=null&&de.deleted_at||!(me||ie||ne))return;const V=await qe.create({component:b$e,componentProps:{message:de,isOwnMessage:ze,isGroup:(Ce=l.value)==null?void 0:Ce.is_group,isButtonDelete:me,isButtonRecall:ie,isButtonEdit:ne},showBackdrop:!0,backdropDismiss:!0,mode:"ios",cssClass:"centerModal msgback"});V.present();const{role:F}=await V.onDidDismiss();if(F==="recall"){const He=m.value.findIndex(Ge=>Ge._id===de._id);He!==-1&&(m.value[He].deleted_at=_t().toISOString())}else F==="deleted"?we!=-1&&m.value.splice(we,1):F==="edit"&&(u.value=de,w.value=(ge=de==null?void 0:de.content)!=null?ge:"")},B=de=>{var we;de.target.src=(we=l==null?void 0:l.value)!=null&&we.is_group?"/icGroup.png":"/upload-user.png"},te=()=>{u.value=void 0,w.value=""},X=async()=>{var de,we;try{if(!J.isEmpty(u.value)&&!J.isEmpty(w.value)){const ze=(de=w.value)==null?void 0:de.replaceAll("&nbsp;",""),le=(we=u.value)==null?void 0:we._id;b.sendMessageSocket("updateMessage",{content:ze,message_id:le},Se=>{if(Se.status==="success"){const ne=m.value.findIndex(ie=>ie._id===le);ne!==-1&&(m.value[ne].content=ze,m.value[ne].status=qT.Edited,m.value[ne].updated_at=_t().toISOString())}})}}catch(ze){console.log("accepupdate err",ze)}finally{te()}},ue=de=>{const we=de.detail.unicode;P.value&&P.value.model.change(ze=>{const le=P.value.model.document.selection,Se=le==null?void 0:le.getFirstPosition();ze.insertText(we,Se)})},he=async()=>{var de,we,ze;try{const le=await $x.pickImages({quality:20,limit:10});k.value=[...(de=k.value)!=null?de:[],...(we=le.photos)!=null?we:[]],await xe((ze=le==null?void 0:le.photos)!=null?ze:null)}catch(le){console.log(le)}},Ie=de=>{E.value.splice(de,1),k.value.splice(de,1)},xe=async de=>{var Se,ne,ie,me;const we=[],ze=V=>{if(!V)return"imgMsg_"+Date.now();const F=V.split("/");return F[F.length-1]},le=V=>{var se;const F=(se=V==null?void 0:V.split(".").pop())==null?void 0:se.toLowerCase();return{jpg:"image/jpg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"}[F]||"image/png"};for(const V of de){const F=await Gz.readFile({path:(Se=V==null?void 0:V.path)!=null?Se:""}),z=(ie=(ne=V==null?void 0:V.path)==null?void 0:ne.split(".").pop())==null?void 0:ie.toLowerCase(),se="".concat(ze(F==null?void 0:F.data.toString()),"_").concat(Date.now(),".").concat(z),Te=le(V.path),ke=Be((me=F==null?void 0:F.data.toString())!=null?me:"",Te),Ce=new File([ke],se,{type:Te}),ge=new FormData;ge.append("api_key",e),ge.append("file",Ce);const Ge=await(await fetch("https://api.imghippo.com/v1/upload",{method:"POST",body:ge})).json(),mt=Ge==null?void 0:Ge.data;Ge.success&&we.push({url:mt==null?void 0:mt.view_url,type:"image",size:Number(mt.size),extension:mt.extension})}E.value=[...E.value,...we]},Be=(de,we)=>{const ze=atob(de),le=new Array(ze.length);for(let ne=0;ne<ze.length;ne++)le[ne]=ze.charCodeAt(ne);const Se=new Uint8Array(le);return new Blob([Se],{type:we})},Pe=async()=>{f.push({name:"ChatDetail"},Wt)};return(de,we)=>{const ze=nb("ckeditor");return I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",translucent:""},{default:j(()=>[L(y(An),{mode:"ios",color:"white",class:"py-1"},{default:j(()=>{var le,Se,ne,ie,me,V,F;return[L(y(fe),{onClick:A,slot:"start",icon:y(Eo),class:"size-6 pl-2 pr-1 z-50"},null,8,["icon"]),_("div",w$e,[_("div",null,[(I(),O("img",{src:(Se=R.value.avatar)!=null?Se:(le=y(l))!=null&&le.is_group?"/icGroup.png":"/upload-user.png",key:R.value.avatar,onError:B,placeholder:(ne=y(l))!=null&&ne.is_group?"/icGroup.png":"/upload-user.png",class:"size-9 rounded-full object-cover border-2 border-white3"},null,40,x$e))]),_("div",_$e,[_("div",k$e,Q((ie=R.value)==null?void 0:ie.name),1),(me=y(l))!=null&&me.is_group?(I(),O("div",E$e,Q("".concat((V=y(l).total_member)!=null?V:0," thành viên")),1)):re("",!0)])]),(F=y(l))!=null&&F.is_group?(I(),O("div",{key:0,onClick:Pe,slot:"end",class:"pr-2 pl-1 z-50 flex items-center py-1"},[L(y(fe),{icon:y(Vbe),class:"size-6 text-black1"},null,8,["icon"])])):re("",!0)]}),_:1})]),_:1}),L(y(At),{ref_key:"refContentScroll",ref:x,class:"scale-y-[-1]",fullscreen:"","scroll-events":""},{default:j(()=>[d.value?(I(),ve(y(xT),{key:1,class:"px-2.5 pt-6"},{default:j(()=>[(I(!0),O(Ue,null,ct(y(H6),(le,Se)=>(I(),O("div",{key:Se},[L(d$e,{"is-own-message":le.senderId===2,"is-continuous":Se>0&&le.senderId===y(H6)[Se-1].senderId},null,8,["is-own-message","is-continuous"])]))),128))]),_:1})):(I(),O(Ue,{key:0},[L(y(xT),{class:"px-2.5 pt-6"},{default:j(()=>[y(J.isEmpty)(m.value)?(I(),O("div",T$e," Hãy nói gì đó để bắt đầu cuộc trò chuyện ")):(I(!0),O(Ue,{key:0},ct(m.value,(le,Se)=>{var ne,ie,me;return I(),O("div",{key:Se,class:"scale-y-[-1]"},[le.type==="message"?(I(),ve(FB,{key:0,onLongPress:V=>G(le,Se),"is-own-message":le.sender_id===((ne=y(o))==null?void 0:ne._id),"is-continuous":Se<m.value.length-1&&le.sender_id===m.value[Se+1].sender_id&&((ie=m.value[Se+1])==null?void 0:ie.type)=="message","is-group":(me=y(l))==null?void 0:me.is_group,message:le},null,8,["onLongPress","is-own-message","is-continuous","is-group","message"])):le.type==="notification"?(I(),ve(f$e,{key:1,message:le},null,8,["message"])):re("",!0)])}),128))]),_:1}),T.value?(I(),ve(y(Zn),{key:0,onIonInfinite:N,threshold:"0"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)],64))]),_:1},512),L(y(xA),{mode:"ios"},{default:j(()=>[C.value?(I(),ve(y$e,{key:0,onSelectEmoji:ue})):re("",!0),_("div",C$e,[_("div",S$e,[(I(!0),O(Ue,null,ct(k.value,(le,Se)=>(I(),O("div",{key:Se,class:"size-20 flex relative"},[_("img",{src:le.webPath,class:"size-20 flex rounded-md object-cover"},null,8,A$e),L(y(fe),{onClick:Ie,icon:y(ks),class:"size-5 absolute rounded-full top-1 text-black bg-white p-1 right-1"},null,8,["icon"])]))),128))])]),L(y(An),{class:"py-1 pb-1.5 px-2.5",color:"white"},{default:j(()=>{var le,Se;return[y(J.isEmpty)(u.value)?re("",!0):(I(),O("div",I$e,[_("div",P$e,[we[4]||(we[4]=_("div",{class:"text-xs pb-0.5 w-full text-blue1"}," Chỉnh sửa tin nhắn ",-1)),_("div",{class:"text-xs",innerHTML:(Se=(le=u.value)==null?void 0:le.content)==null?void 0:Se.replaceAll(" ","")},null,8,R$e)]),_("div",{onClick:te,class:"flex items-center justify-center"},[L(y(fe),{icon:y(Cp),class:"size-6 text-blue1"},null,8,["icon"])])])),_("div",$$e,[_("div",L$e,[_("div",O$e,[L(ze,{modelValue:w.value,"onUpdate:modelValue":we[0]||(we[0]=ne=>w.value=ne),editor:y(P3),onFocus:we[1]||(we[1]=()=>C.value=!1),onReady:we[2]||(we[2]=ne=>{P.value=ne}),config:{plugins:i,removePlugins:["MediaEmbedToolbar"],placeholder:"Aa"}},null,8,["modelValue","editor","config"])]),_("div",D$e,[L(y(fe),{onClick:we[3]||(we[3]=qt(ne=>C.value=!0,["stop"])),icon:y(Lbe),class:"size-6 items-end text-blue1"},null,8,["icon"]),L(y(fe),{onClick:he,icon:y(lB),class:"size-6 items-end text-blue1"},null,8,["icon"])])]),!y(J.isEmpty)(w.value)&&y(J.isEmpty)(u.value)||!y(J.isEmpty)(E.value)?(I(),ve(y(fe),{key:0,onClick:U,icon:y(fB),class:"w-7 h-10 text-blue1 flex flex-shrink-0"},null,8,["icon"])):re("",!0),!y(J.isEmpty)(w.value)&&!y(J.isEmpty)(u.value)?(I(),ve(y(fe),{key:1,onClick:X,icon:y(MA),class:"w-7 h-10 text-blue1 flex flex-shrink-0"},null,8,["icon"])):re("",!0)])]}),_:1})]),_:1})]),_:1})}}}),N$e="/icons/icPeoplePlus.png",F$e={key:0,class:"pb-8"},B$e={key:0,class:"mt-4 min-h-24"},V$e={class:"flex overflow-x-auto gap-2.5 scrollbar-hidden"},U$e={class:"w-16 flex flex-col items-center text-center gap-1"},z$e={class:"relative flex size-14"},H$e=["src"],j$e=["onClick"],G$e={class:"text-[10px] font-light"},W$e=["onClick"],q$e=["src"],K$e={class:"flex-1 font-medium [overflow-wrap:anywhere]"},Y$e={key:1,class:"mt-[75%] font-medium text-gray2 text-center"},Wz=Fe({__name:"ModalAddMemberToChat",props:{room:{}},setup(n){const e=n,t=Rr(),i=K([]),s=K(""),r=K(1),o=K(!1),a=K([]),l=()=>{s.value="",c(1,!1,""),r.value=1,o.value=!1},c=async(w=1,x=!1,k="")=>{var T,P,C,A;const{data:E}=await Vd.get("/chat/members",{params:{without_member_conversation_id:(T=e.room)==null?void 0:T._id,page:w,limit:25,keyword:k}});J.isEmpty(E)?o.value=!1:((P=E==null?void 0:E.meta)!=null&&P.hasNextPage?(r.value++,o.value=!0):o.value=!1,x?i.value=[...i.value,...(C=E==null?void 0:E.data)!=null?C:[]]:i.value=(A=E==null?void 0:E.data)!=null?A:[])},d=()=>{c(1,!1,s.value),r.value=1,o.value=!1},u=w=>{const x=a.value.find(k=>k._id===(w==null?void 0:w._id));J.isEmpty(x)?a.value.push(w):a.value=a.value.filter(k=>k._id!==(w==null?void 0:w._id))};tr(()=>{c()});const h=w=>{c(r.value,!0),setTimeout(()=>w.target.complete(),500)},f=w=>{w.target.src="/upload-user.png"},m=w=>{a.value.splice(w,1),console.log(w)},g=async()=>{var w;await qe.dismiss(a.value,"addsuccess"),t.sendMessageSocket("countMemberGroupChatCommunity",{conversation_id:(w=e.room)==null?void 0:w._id},x=>{var k,E,T,P;if(((E=(k=e.room)==null?void 0:k.community)==null?void 0:E.package_code)===Vu.START.info.code&&x<Vu.START.info.group_chat_member_limit||((P=(T=e.room)==null?void 0:T.community)==null?void 0:P.package_code)!==Vu.START.info.code&&x<Vu.VIP.info.group_chat_member_limit){if(J.isEmpty(e.room)||J.isEmpty(a.value))return;const C=a.value.map(A=>A._id);t.sendMessageSocket("addMemberConversation",{conversation_id:e.room._id,user_ids:C})}})},b=()=>qe.dismiss();return(w,x)=>(I(),O(Ue,null,[L(y(Bn),{class:"ion-no-border py-0.5"},{default:j(()=>[L(y(An),{color:"white"},{default:j(()=>[_("div",{slot:"start",onClick:b,class:"text-blue1 font-light"},"Hủy"),L(y(Qp),null,{default:j(()=>x[1]||(x[1]=[be("Thêm thành viên")])),_:1}),y(J.isEmpty)(a.value)?re("",!0):(I(),O("div",{key:0,slot:"end",onClick:g,class:"text-blue1 font-medium"}," Thêm "))]),_:1})]),_:1}),L(y(At),{class:"ion-padding-horizontal"},{default:j(()=>[y(J.isEmpty)(i.value)?(I(),O("div",Y$e," Chưa có bạn bè nào để mời ")):(I(),O("div",F$e,[_("form",{onSubmit:qt(d,["prevent"]),class:"w-full bg-white3 flex items-center px-3 rounded-xl"},[L(y(fe),{onClick:d,icon:y(Qd),class:"size-5 text-gray2"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":x[0]||(x[0]=k=>s.value=k),class:"w-full flex-1 py-1.5 pr-1 mx-2 bg-white3 outline-none",placeholder:"Tìm kiếm"},null,512),[[Ti,s.value]]),y(J.isEmpty)(s.value)?re("",!0):(I(),ve(y(fe),{key:0,onClick:l,icon:y(Ah),class:"size-5 text-gray2"},null,8,["icon"]))],32),y(J.isEmpty)(a.value)?re("",!0):(I(),O("section",B$e,[_("div",V$e,[(I(!0),O(Ue,null,ct(a.value,(k,E)=>{var T;return I(),O("div",{key:E,class:"flex-shrink-0"},[_("div",U$e,[_("div",z$e,[(I(),O("img",{src:(T=k==null?void 0:k.avatar)!=null?T:"/upload-user.png",key:k==null?void 0:k.avatar,class:"w-full rounded-full",placeholder:"/upload-user.png",onError:f},null,40,H$e)),_("div",{onClick:P=>m(E),class:"bg-white4 absolute p-0.5 flex items-center rounded-full shadow-st right-0"},[L(y(fe),{icon:y(Cp),class:"size-4"},null,8,["icon"])],8,j$e)]),_("div",G$e,Q(k.full_name),1)])])}),128))])])),_("section",{class:gt(y(J.isEmpty)(a.value)&&"mt-6")},[(I(!0),O(Ue,null,ct(i.value,(k,E)=>{var T;return I(),O("div",{key:E},[_("div",{onClick:P=>u(k),class:"flex items-center gap-4"},[(I(),O("img",{src:(T=k==null?void 0:k.avatar)!=null?T:"/upload-user.png",key:k==null?void 0:k.avatar,class:"size-11 rounded-full",placeholder:"/upload-user.png",onError:f},null,40,q$e)),_("div",{class:gt(["flex items-center flex-1 py-4",E<i.value.length-1&&" border-b-[0.15px]"])},[_("div",K$e,Q(k.full_name),1),a.value.includes(k)?(I(),ve(y(fe),{key:0,icon:y(MA),class:"size-7 text-blue1"},null,8,["icon"])):(I(),ve(y(fe),{key:1,icon:y(Ap),class:"size-7 text-gray2"},null,8,["icon"]))],2)],8,W$e)])}),128))],2)])),o.value?(I(),ve(y(Zn),{key:2,onIonInfinite:h},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})],64))}}),X$e={class:"flex flex-col items-center px-6"},Q$e={class:"relative"},Z$e=["src"],J$e={class:"flex items-center gap-1 mt-2"},eLe={class:"text-center text-lg font-medium"},tLe={class:"mt-6 flex justify-center w-full gap-8"},nLe={class:"p-2 bg-white2 rounded-full flex"},iLe={class:"text-[10px] font-light text-center"},sLe={key:0},rLe={key:1},oLe={class:"p-2 bg-white2 rounded-full flex"},aLe={class:"text-[10px] font-light text-center"},lLe={key:0},cLe={key:1},dLe={class:"pl-6"},uLe={class:"flex py-4 flex-1 border-b-[0.5px] border-gray1 pr-6"},hLe=Fe({__name:"ChatDetail",setup(n){const{VITE_API_SOCKET:e}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},{userInfo:t}=et(en()),i=gn(),s=Rr(),r=Va(),{activeRoom:o}=et(r),a=lt(()=>{var b,w;return(w=(b=o.value)==null?void 0:b.me)==null?void 0:w.is_admin}),l=lt(()=>{var b,w,x,k,E,T,P;return((w=(b=o.value)==null?void 0:b.enemy)==null?void 0:w.user_id)===((x=t.value)==null?void 0:x._id)?(E=(k=o.value)==null?void 0:k.enemy)==null?void 0:E.notification:(P=(T=o.value)==null?void 0:T.me)==null?void 0:P.notification}),c=()=>i.back(),d=b=>{b.target.src="/icGroup.png"},u=async()=>{var b;s.sendMessageSocket("toggleNotificationConversation",{conversation_id:(b=o.value)==null?void 0:b._id},async w=>{var x,k,E,T,P;if(((k=(x=o.value)==null?void 0:x.enemy)==null?void 0:k.user_id)===((E=t.value)==null?void 0:E._id)){const C={...(T=o.value)==null?void 0:T.enemy,notification:w.notification},A={...o.value,enemy:C};r.setActiveRoom(A)}else{const C={...(P=o.value)==null?void 0:P.me,notification:w.notification},A={...o.value,me:C};r.setActiveRoom(A)}})},h=async()=>{var b;s.sendMessageSocket("toggleTypeConversation",{conversation_id:(b=o.value)==null?void 0:b._id},async w=>{console.log(w);const x={...o.value,type:w==null?void 0:w.type};r.setActiveRoom(x)})},f=async()=>{await(await qe.create({mode:"ios",component:Wz,componentProps:{room:o.value},initialBreakpoint:.95,breakpoints:[0,.95]})).present()},m=()=>{i.push({name:"ChatMembers"},Wt)},g=async()=>{var b,w;(b=o.value)!=null&&b.is_group&&(s.sendMessageSocket("leaveGroup",{conversation_id:(w=o.value)==null?void 0:w._id}),i.replace({name:"ChatTab"},Wt))};return(b,w)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{onClick:c,slot:"start",icon:y(Eo),class:"size-6 pl-2 pr-1 z-50"},null,8,["icon"])]),_:1})]),_:1}),L(y(At),{"scroll-y":!1},{default:j(()=>{var x,k,E,T,P,C,A,R,M,N;return[_("section",X$e,[_("div",Q$e,[(I(),O("img",{src:(x=y(o))!=null&&x.avatar?"".concat(y(e),"/").concat((k=y(o))==null?void 0:k.avatar):"/icGroup.png",key:(E=y(o))==null?void 0:E.avatar,onError:d,placeholder:"/icGroup.png",class:"size-20 rounded-full object-cover border-2 border-white3"},null,40,Z$e))]),_("div",J$e,[_("div",eLe,Q((T=y(o))==null?void 0:T.name),1)]),_("section",tLe,[a.value||((P=y(t))==null?void 0:P._id)===((C=y(o))==null?void 0:C.created_by)?(I(),O("div",{key:0,onClick:h,class:"flex flex-col items-center gap-1"},[_("div",nLe,[L(y(fe),{icon:((A=y(o))==null?void 0:A.type)==="public"?y(rB):y(Px),class:"size-5 flex text-[#555]"},null,8,["icon"])]),_("div",iLe,[((R=y(o))==null?void 0:R.type)==="public"?(I(),O("span",sLe,w[0]||(w[0]=[be("Công "),_("br",null,null,-1),be("khai")]))):(I(),O("span",rLe,w[1]||(w[1]=[be("Riêng "),_("br",null,null,-1),be("tư")])))])])):re("",!0),a.value||((M=y(t))==null?void 0:M._id)===((N=y(o))==null?void 0:N.created_by)?(I(),O("div",{key:1,onClick:f,class:"flex flex-col items-center gap-1"},w[2]||(w[2]=[_("div",{class:"p-2 bg-white2 rounded-full flex"},[_("img",{src:N$e,class:"size-5 flex"})],-1),_("div",{class:"text-[10px] font-light text-center"},[be(" Thêm "),_("br"),be("thành viên ")],-1)]))):re("",!0),_("div",{onClick:u,class:"flex flex-col items-center gap-1"},[_("div",oLe,[L(y(fe),{icon:l.value?y(Wy):y(FT),class:"size-5 flex"},null,8,["icon"])]),_("div",aLe,[l.value?(I(),O("div",lLe,w[3]||(w[3]=[be("Tắt "),_("br",null,null,-1),be("thông báo")]))):(I(),O("div",cLe,w[4]||(w[4]=[be("Bật "),_("br",null,null,-1),be("thông báo")])))])])])]),w[7]||(w[7]=_("div",{class:"h-2.5 mt-6 mb-2 bg-white1 w-full"},null,-1)),_("section",dLe,[_("div",{onClick:m,class:"flex gap-4 items-center"},[L(y(fe),{icon:y(zbe),class:"size-6 text-gray2"},null,8,["icon"]),_("div",uLe,[w[5]||(w[5]=_("div",{class:"flex-1 text-sm font-light"},"Xem thành viên",-1)),L(y(fe),{icon:y(Gy),class:"size-4 text-gray2"},null,8,["icon"])])]),a.value?re("",!0):(I(),O("div",{key:0,onClick:g,class:"flex gap-4 items-center"},[L(y(fe),{icon:y(cB),class:"size-6 text-gray2 rotate-180"},null,8,["icon"]),w[6]||(w[6]=_("div",{class:"flex py-4 flex-1 pr-6"},[_("div",{class:"flex-1 text-sm font-light"},"Rời nhóm")],-1))]))])]}),_:1})]),_:1}))}}),fLe={class:"flex items-center gap-3.5 border-b-[0.2px] border-gray1 px-6 py-3.5"},pLe=["src"],mLe={class:"px-6 pt-2"},gLe={key:0},bLe=Fe({__name:"ModalMemberAction",props:{member:{},isAdmin:{type:Boolean,default:!1},isOwner:{type:Boolean,default:!1},onToggleAdminRole:{type:Function,default:()=>{}},onRemoveMember:{type:Function,default:()=>{}}},setup(n){const e=n,t=async()=>{await qe.dismiss(),e.onToggleAdminRole()},i=async()=>{await qe.dismiss(),e.onRemoveMember()},s=gn(),r=d=>{d.target.src="/upload-user.png"},o=Rr(),a=Va(),l=async d=>{await qe.dismiss(),s.push({name:"DetectUserCommunityScreen",params:{userId:d}},Wt)},c=d=>{o.sendMessageSocket("createSingleChatRoom",{user_id:d},async u=>{u!=null&&u._id&&(await a.setActiveRoom(u),s.push({name:"ChatRoom",params:{id:u==null?void 0:u._id}},Wt))})};return(d,u)=>{var h,f,m,g,b,w,x,k;return I(),O("div",null,[_("div",fLe,[_("div",null,[(I(),O("img",{src:(m=(f=(h=d.member)==null?void 0:h.user)==null?void 0:f.avatar)!=null?m:"/upload-user.png",key:(b=(g=d.member)==null?void 0:g.user)==null?void 0:b.avatar,placeholder:"/upload-user.png",onError:r,class:"size-12 rounded-full"},null,40,pLe))]),be(" "+Q((x=(w=d.member)==null?void 0:w.user)==null?void 0:x.full_name),1)]),_("section",mLe,[_("div",{onClick:u[0]||(u[0]=E=>{var T;return l((T=d.member)==null?void 0:T.user_id)}),class:"flex py-2 gap-2"},[_("div",null,[L(y(fe),{icon:y(NA),class:"size-6 text-[#505050]"},null,8,["icon"])]),u[2]||(u[2]=_("div",null,"Xem trang cá nhân",-1))]),_("div",{onClick:u[1]||(u[1]=E=>{var T;return c((T=d.member)==null?void 0:T.user_id)}),class:"flex py-2 gap-2"},[_("div",null,[L(y(fe),{icon:y(Ax),class:"size-6"},null,8,["icon"])]),u[3]||(u[3]=_("div",null,"Nhắn tin",-1))]),d.isOwner?(I(),O("section",gLe,[(k=d.member)!=null&&k.is_admin?(I(),O("div",{key:0,onClick:t,class:"flex py-2 gap-2"},[_("div",null,[L(y(fe),{src:"/icons/icAdmin.svg",class:"size-6"})]),u[4]||(u[4]=_("div",null,"Gỡ quyền quản trị viên",-1))])):(I(),O("div",{key:1,onClick:t,class:"flex py-2 gap-2"},[_("div",null,[L(y(fe),{src:"/icons/icAdmin.svg",class:"size-6"})]),u[5]||(u[5]=_("div",null,"Chỉ định làm quản trị viên",-1))])),_("div",{onClick:i,class:"flex py-2 gap-2"},[_("div",null,[L(y(fe),{icon:y(Rx),class:"size-6"},null,8,["icon"])]),u[6]||(u[6]=_("div",null,"Xoá khỏi nhóm",-1))])])):re("",!0)])])}}}),vLe=["onClick"],yLe={class:"size-11 flex"},wLe=["src"],xLe={class:"flex-1"},_Le={class:"font-medium"},kLe=["onClick"],ELe={class:"size-11 flex"},TLe=["src"],CLe={class:"flex-1"},SLe={class:"font-medium"},ALe=Fe({__name:"ChatMembers",setup(n){const e=gn(),t=()=>e.back(),{activeRoom:i}=et(Va()),s=Rr(),r=K(1),o=K(!1),a=K([]),{userInfo:l}=et(en()),c=K(1),d=K(!1),u=K([]),h=async(P=1,C=!1)=>{var R,M,N,U;const{data:A}=await Vd.get("/chat/members-conversation",{params:{"filter[conversation_id]":(R=i.value)==null?void 0:R._id,page:P,limit:25}});J.isEmpty(A)?o.value=!1:((M=A==null?void 0:A.meta)!=null&&M.hasNextPage?(r.value++,o.value=!0):o.value=!1,C?a.value=[...a.value,...(N=A==null?void 0:A.data)!=null?N:[]]:a.value=(U=A==null?void 0:A.data)!=null?U:[])},f=async(P=1,C=!1)=>{var R,M,N,U;const{data:A}=await Vd.get("/chat/members-conversation",{params:{"filter[conversation_id]":(R=i.value)==null?void 0:R._id,"filter[is_admin]":!0,page:P,limit:25}});J.isEmpty(A)?d.value=!1:((M=A==null?void 0:A.meta)!=null&&M.hasNextPage?(c.value++,d.value=!0):d.value=!1,C?u.value=[...u.value,...(N=A==null?void 0:A.data)!=null?N:[]]:u.value=(U=A==null?void 0:A.data)!=null?U:[])};on(()=>{h(),f()});const m=P=>{h(r.value,!0),setTimeout(()=>P.target.complete(),500)},g=P=>{f(c.value,!0),setTimeout(()=>P.target.complete(),500)},b=P=>{P.target.src="/upload-user.png"},w=async P=>{var A,R,M,N,U;if(P.user_id===((A=l.value)==null?void 0:A._id))return;await(await qe.create({mode:"ios",component:bLe,componentProps:{member:P,isOwner:((R=l.value)==null?void 0:R._id)===((M=i.value)==null?void 0:M.created_by),isAdmin:(U=(N=i.value)==null?void 0:N.me)==null?void 0:U.is_admin,onToggleAdminRole:()=>x(P),onRemoveMember:()=>E(P)},initialBreakpoint:.35,breakpoints:[0,.35]})).present()},x=async P=>{var A;const C=P==null?void 0:P.user_id;s.sendMessageSocket("toggleRoleAdminConversation",{conversation_id:(A=i.value)==null?void 0:A._id,user_id:C},async R=>{var M,N,U;if(console.log(R),R.status==="success"){const G=a.value.map(B=>{var te;return B.user_id===C?{...B,is_admin:(te=R==null?void 0:R.data)==null?void 0:te.is_admin}:B});if(a.value=G,(M=R==null?void 0:R.data)!=null&&M.is_admin){tt("Đã chỉ định ".concat((N=P==null?void 0:P.user)==null?void 0:N.full_name," làm quản trị viên."),"success");const B=u.value.find(te=>te.user_id===C);if(J.isEmpty(B)){const X={...a.value.find(ue=>ue.user_id===C),is_admin:!0};u.value=[...u.value,X]}}else tt("Đã gỡ quyền quản trị viên của ".concat((U=P==null?void 0:P.user)==null?void 0:U.full_name,"."),"success"),u.value=u.value.filter(B=>B.user_id!==C)}})},k=async P=>{var C;s.sendMessageSocket("removeMemberFromGroup",{conversation_id:(C=i.value)==null?void 0:C._id,user_id:P==null?void 0:P.user_id},()=>{a.value=a.value.filter(A=>(A==null?void 0:A.user_id)!==(P==null?void 0:P.user_id)),u.value=u.value.filter(A=>(A==null?void 0:A.user_id)!==(A==null?void 0:A.user_id))})},E=async P=>{var A;await(await Fd.create({mode:"ios",header:"Bạn có chắc muốn xoá ".concat((A=P==null?void 0:P.user)==null?void 0:A.full_name," ra khỏi nhóm?"),buttons:[{text:"Xác nhận",handler:()=>k(P),cssClass:"fcb"},{text:"Bỏ qua",role:"cancel",cssClass:"fcn"}]})).present()},T=async()=>{const P=await qe.create({mode:"ios",component:Wz,componentProps:{room:i.value},initialBreakpoint:.95,breakpoints:[0,.95]});await P.present();const{data:C,role:A}=await P.onWillDismiss();if(A==="addsuccess"){const R=C==null?void 0:C.map(M=>{var N;return{conversation_id:(N=i.value)==null?void 0:N._id,id:Date.now(),is_admin:!1,notification:!0,user_id:M==null?void 0:M._id,user:{...M}}});a.value=[...a.value,...R]}};return(P,C)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>{var A,R,M,N;return[L(y(fe),{slot:"start",onClick:t,icon:y(Eo),class:"size-6 pl-2 pr-1 z-50"},null,8,["icon"]),L(y(Qp),null,{default:j(()=>C[0]||(C[0]=[be("Thành viên")])),_:1}),(R=(A=y(i))==null?void 0:A.me)!=null&&R.is_admin||((M=y(l))==null?void 0:M._id)==((N=y(i))==null?void 0:N.created_by)?(I(),ve(y(fe),{key:0,slot:"end",onClick:T,icon:y(QF),class:"size-6 pl-2 pr-1 z-50"},null,8,["icon"])):re("",!0)]}),_:1})]),_:1}),L(y(YN),{mode:"ios",class:"w-[90%] mb-2 bg-white mx-auto",value:"all"},{default:j(()=>[L(y(ET),{mode:"ios",value:"all","content-id":"all"},{default:j(()=>C[1]||(C[1]=[_("div",{class:"font-semibold"},"Tất cả",-1)])),_:1}),L(y(ET),{mode:"ios",value:"admin","content-id":"admin"},{default:j(()=>C[2]||(C[2]=[_("div",{class:"font-semibold"},"Quản trị viên",-1)])),_:1})]),_:1}),L(y(tme),null,{default:j(()=>[L(y(XR),{id:"all"},{default:j(()=>[L(y(At),{color:"white",class:"ion-padding"},{default:j(()=>[_("div",null,[(I(!0),O(Ue,null,ct(a.value,(A,R)=>{var M,N,U,G;return I(),O("section",{key:R},[_("div",{onClick:B=>w(A),class:gt(["flex items-center gap-2 py-2.5",R<a.value.length-1&&"border-b-[0.15px] border-gray1"])},[_("div",yLe,[(I(),O("img",{src:(N=(M=A==null?void 0:A.user)==null?void 0:M.avatar)!=null?N:"/upload-user.png",key:(U=A==null?void 0:A.user)==null?void 0:U.avatar,class:"w-full rounded-full",placeholder:"/upload-user.png",onError:b},null,40,wLe))]),_("div",xLe,[_("div",_Le,Q((G=A.user)==null?void 0:G.full_name),1)])],10,vLe)])}),128))]),o.value?(I(),ve(y(Zn),{key:0,onIonInfinite:m},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]),_:1}),L(y(XR),{id:"admin"},{default:j(()=>[L(y(At),{color:"white",class:"ion-padding"},{default:j(()=>[_("div",null,[(I(!0),O(Ue,null,ct(u.value,(A,R)=>{var M,N,U,G;return I(),O("section",{key:R},[_("div",{onClick:B=>w(A),class:gt(["flex items-center gap-2 py-2.5",R<u.value.length-1&&"border-b-[0.15px] border-gray1"])},[_("div",ELe,[(I(),O("img",{src:(N=(M=A==null?void 0:A.user)==null?void 0:M.avatar)!=null?N:"/upload-user.png",key:(U=A==null?void 0:A.user)==null?void 0:U.avatar,class:"w-full rounded-full",placeholder:"/upload-user.png",onError:b},null,40,TLe))]),_("div",CLe,[_("div",SLe,Q((G=A.user)==null?void 0:G.full_name),1)])],10,kLe)])}),128))]),d.value?(I(),ve(y(Zn),{key:0,onIonInfinite:g},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}}),hm="/icEmpty.svg",Wn={CommunityCreateSuccess:"community_create_success",CommunityUserJoinSuccess:"community_user_join_success",CommunityUserJoinWaiting:"community_user_join_waiting",CommunityUserJoinReject:"community_user_join_reject",CommunityMemberPayment:"community_member_payment",CommunityMemberRemoved:"community_member_removed",CommunityMemberSuspended:"community_member_suspended",CommunityAdminPostNew:"community_admin_post_new",CommunityCommentNew:"community_comment_new",CommunityMention:"community_mention",CommunityPostLike:"community_post_like",CommunityCommentLike:"community_comment_like",CommunityPostPinned:"community_post_pinned",CommunityTopicAdd:"community_topic_add",CommunityCourseStudentAccess:"community_course_student_access",CommunityCourseNewPublic:"community_course_new_public",UpcomingEvent:"upcoming_event",LevelUp:"level_up",LeaderboardTop10:"leaderboard_top_10",CommunityOwnerCommunityPackageAboutExpire:"community_owner_community_package_about_expire"},DL={SendEmailNewPost:"send_email_new_post",SendEmailLatestCommunityPost:"send_email_latest_community_post"},ILe={[DL.SendEmailNewPost]:"Bài đăng admin cộng đồng",[DL.SendEmailLatestCommunityPost]:"Thảo luận trong bài đăng mới nhất"},PLe={[Wn.CommunityUserJoinSuccess]:"Thành viên tham gia cộng đồng thành công",[Wn.CommunityUserJoinWaiting]:"Chờ duyệt tham gia cộng đồng",[Wn.CommunityMemberPayment]:"Có thành viên mới thanh toán cộng đồng",[Wn.CommunityAdminPostNew]:"Có thảo luận mới từ admin trong cộng đồng",[Wn.CommunityPostPinned]:"Bài viết được ghim",[Wn.CommunityTopicAdd]:"Chủ đề mới được tạo trong cộng đồng",[Wn.CommunityCourseStudentAccess]:"Học viên mới truy cập khóa học"},RLe={[Wn.CommunityAdminPostNew]:"Có thảo luận mới từ admin trong cộng đồng",[Wn.CommunityCommentNew]:"Có bình luận mới trên bài viết của bạn",[Wn.CommunityMention]:"Được nhắc tới trong cộng đồng",[Wn.CommunityPostPinned]:"Bài viết được ghim",[Wn.CommunityTopicAdd]:"Chủ đề mới được tạo trong cộng đồng",[Wn.CommunityCourseNewPublic]:"Khóa học mới được công khai",[Wn.LevelUp]:"Đã lên level mới",[Wn.LeaderboardTop10]:"Đã vào top 10 bảng xếp hạng"},$Le={class:""},LLe=["onClick"],OLe={class:"flex size-14 relative"},DLe=["src"],MLe={key:0,alt:"Avatar",src:"/upload-user.png",class:"size-8 rounded-lg absolute -bottom-2 right-0"},NLe={class:"flex-1"},FLe=["innerHTML"],BLe=Fe({__name:"NotificationScreen",setup(n){const e=Li(),t=ln(),i=en(),{isLoggedIn:s}=et(i),r=K([]),o=gn(),a=K(1),l=K(!1),c=async()=>{o.push({name:"LoginScreen"},Wt)},d=async(x=1,k=!1)=>{var P,C,A,R;const E={limit:25,page:x},{data:T}=await Qe.get("/notification/user",{params:E});J.isEmpty(T)?l.value=!1:((P=T==null?void 0:T.meta)!=null&&P.hasNextPage?(a.value++,l.value=!0):l.value=!1,k?r.value=[...(C=r.value)!=null?C:[],...(A=T==null?void 0:T.data)!=null?A:[]]:r.value=(R=T==null?void 0:T.data)!=null?R:[])},u=x=>{d(a.value,!0),setTimeout(()=>x.target.complete(),500)};on(async()=>{d(1,!1),a.value=1,l.value=!1});const h=async x=>{d(1,!1),a.value=1,l.value=!1,setTimeout(()=>{x.target.complete()},1500)},f=async x=>{if(console.log(x),!J.isEmpty(x)){const k=x.notification;if(J.isEmpty(x.read_at)){const{status:E}=await Qe.get("/notification/read/".concat(x._id));if(E===200){const T=r.value.findIndex(C=>C._id===x._id),P=r.value[T];P.read_at=_t().toISOString()}}if(k)return g(k.type,k.metadata)}},m=(x,k)=>{x&&(k?o.push({name:"CommunityScreen",params:{id:x,tab:k}}):o.push({name:"CommunityScreen",params:{id:x}}))},g=async(x,k)=>{const E=k.community_short_name||k.community_id;switch(x){case Wn.UpcomingEvent:case Wn.CommunityUserJoinWaiting:return m(E,"member");case Wn.CommunityCreateSuccess:case Wn.CommunityUserJoinSuccess:case Wn.CommunityUserJoinReject:case Wn.CommunityMemberPayment:case Wn.CommunityMemberRemoved:case Wn.CommunityMemberSuspended:return m(E,"about");case Wn.CommunityTopicAdd:case Wn.CommunityAdminPostNew:case Wn.CommunityPostPinned:return m(E);case Wn.CommunityPostLike:case Wn.CommunityCommentNew:case Wn.CommunityMention:case Wn.CommunityCommentLike:if(k.community_post_id){await t.getCommunityInfo(E),await e.getUserCommunityInfo(k.community_id),o.push({name:"PostDetailScreen",params:{postId:k.community_post_id}});return}return m(E);case Wn.CommunityCourseNewPublic:case Wn.CommunityCourseStudentAccess:return m(E,"course");case Wn.LevelUp:case Wn.LeaderboardTop10:return m(E,"rank");case Wn.CommunityOwnerCommunityPackageAboutExpire:return m(E);default:return}},b=async()=>{const{status:x}=await Qe.patch("/notification/read-all");x===200&&(r.value=r.value.map(k=>(k.read_at=_t().toISOString(),k)))},w=x=>{x.target.src="/upload-user.png"};return(x,k)=>(I(),ve(y(Dn),null,{default:j(()=>[y(J.isEmpty)(r.value)?(I(),O(Ue,{key:1},[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white1 px-3"},{default:j(()=>[k[2]||(k[2]=_("div",{class:"text-lg font-medium",slot:"start"},"Thông báo",-1)),y(s)?re("",!0):(I(),O("div",{key:0,onClick:c,slot:"end",class:"text-lg text-gray2 font-medium"}," Đăng nhập "))]),_:1})]),_:1}),L(y(At),{color:"white1"},{default:j(()=>k[3]||(k[3]=[_("div",{class:"flex flex-col h-full items-center justify-center"},[_("img",{src:hm,class:"size-36 object-contain2"}),_("div",{class:"text-gray2 text-base"},"Chưa có thông báo")],-1)])),_:1})],64)):(I(),O(Ue,{key:0},[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white px-4"},{default:j(()=>[k[1]||(k[1]=_("div",{class:"text-lg font-medium",slot:"start"},"Thông báo",-1)),_("div",{onClick:b,slot:"end",class:"flex items-center text-sm gap-2 text-blue1"},[L(y(fe),{icon:y(nB),class:"size-4"},null,8,["icon"]),k[0]||(k[0]=be(" Đánh dấu đọc tất cả "))])]),_:1})]),_:1}),L(y(At),{color:"white",class:"ion-padding-bottom"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:h},{default:j(()=>[L(y(eo))]),_:1}),_("div",$Le,[(I(!0),O(Ue,null,ct(r.value,E=>{var T,P,C,A,R,M,N;return I(),O("div",{key:E._id},[_("div",{onClick:U=>f(E),class:gt(["flex py-2 items-center gap-2.5 ion-padding-horizontal",{"bg-blue1-tint3":y(J.isEmpty)(E.read_at)}])},[_("div",OLe,[(I(),O("img",{src:((T=E.notification)==null?void 0:T.creator.avatar)||"/upload-user.png",key:((P=E.notification)==null?void 0:P.creator.avatar)||"/upload-user.png",onError:w,class:"w-full rounded-full"},null,40,DLe)),((C=E.notification)==null?void 0:C.creator.type)=="community"&&((R=(A=E.notification)==null?void 0:A.metadata)!=null&&R.community_avatar)?(I(),O("img",MLe)):re("",!0)]),_("div",NLe,[_("div",{class:"text-wrap line-clamp-3 text-sm",innerHTML:(M=E.notification)==null?void 0:M.content},null,8,FLe),_("div",{class:gt(["capitalize-first-letter text-sm mt-0.5",{"text-blue-500":y(J.isEmpty)(E.read_at)}])},Q(y(_t)((N=E.notification)==null?void 0:N.created_at).fromNow()),3)])],10,LLe)])}),128))]),l.value?(I(),ve(y(Zn),{key:0,onIonInfinite:u,threshold:"0.9"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})],64))]),_:1}))}}),VLe=Xi(BLe,[["__scopeId","data-v-4682fdd3"]]),ULe={};function zLe(n,e){return I(),O("div")}const HLe=Xi(ULe,[["render",zLe]]),jLe={class:"ion-padding mt-1"},GLe={class:"flex items-center p-2 bg-white4 rounded-full"},WLe=Fe({__name:"ModalFriendAction",setup(n){const e=async()=>{await qe.dismiss(null,"remove")};return(t,i)=>(I(),O("div",jLe,[_("section",{onClick:e,class:"flex items-center gap-3.5"},[_("div",GLe,[L(y(fe),{src:"/icons/icRemoveFriend.svg",class:"size-5"})]),i[0]||(i[0]=_("div",{class:"text-base font-medium"},"Hủy kết bạn",-1))])]))}});/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var ML=typeof window<"u"?window:void 0,Uk=typeof document<"u"?document:void 0,zk,qLe=function(n){if(zk===void 0){var e=n.style.animationName!==void 0,t=n.style.webkitAnimationName!==void 0;zk=!e&&t?"-webkit-":""}return zk},Hk=function(n,e,t){var i=e.startsWith("animation")?qLe(n):"";n.style.setProperty(i+e,t)},lv=function(n,e){if(n===void 0&&(n=[]),e!==void 0){var t=Array.isArray(e)?e:[e];return Ta(Ta([],n,!0),t,!0)}return n},sh=function(n){var e,t,i,s,r,o,a=[],l=[],c=[],d=!1,u,h={},f=[],m=[],g={},b=0,w=!1,x=!1,k,E,T,P=!0,C=!1,A=!0,R,M=!1,N=n,U=[],G=[],B=[],te=[],X=[],ue=[],he=[],Ie=[],xe=[],Be=[],Pe=[],Ae=typeof AnimationEffect=="function"||ML!==void 0&&typeof ML.AnimationEffect=="function",de=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&Ae,we=function(){return Pe},ze=function(ae){return X.forEach(function(Ye){Ye.destroy(ae)}),le(ae),te.length=0,X.length=0,a.length=0,F(),d=!1,A=!0,R},le=function(ae){z(),ae&&se()},Se=function(){w=!1,x=!1,A=!0,k=void 0,E=void 0,T=void 0,b=0,C=!1,P=!0,M=!1},ne=function(){return b!==0&&!M},ie=function(ae,Ye){var vt=Ye.findIndex(function(Ft){return Ft.c===ae});vt>-1&&Ye.splice(vt,1)},me=function(ae,Ye){return B.push({c:ae,o:Ye}),R},V=function(ae,Ye){var vt=Ye!=null&&Ye.oneTimeCallback?G:U;return vt.push({c:ae,o:Ye}),R},F=function(){return U.length=0,G.length=0,R},z=function(){de&&(Pe.forEach(function(ae){ae.cancel()}),Pe.length=0)},se=function(){ue.forEach(function(ae){ae!=null&&ae.parentNode&&ae.parentNode.removeChild(ae)}),ue.length=0},Te=function(ae){return he.push(ae),R},ke=function(ae){return Ie.push(ae),R},Ce=function(ae){return xe.push(ae),R},ge=function(ae){return Be.push(ae),R},He=function(ae){return l=lv(l,ae),R},Ge=function(ae){return c=lv(c,ae),R},mt=function(ae){return ae===void 0&&(ae={}),h=ae,R},ut=function(ae){ae===void 0&&(ae=[]);for(var Ye=0,vt=ae;Ye<vt.length;Ye++){var Ft=vt[Ye];h[Ft]=""}return R},xt=function(ae){return f=lv(f,ae),R},kt=function(ae){return m=lv(m,ae),R},It=function(ae){return ae===void 0&&(ae={}),g=ae,R},Je=function(ae){ae===void 0&&(ae=[]);for(var Ye=0,vt=ae;Ye<vt.length;Ye++){var Ft=vt[Ye];g[Ft]=""}return R},rt=function(){return r!==void 0?r:u?u.getFill():"both"},Ct=function(){return k!==void 0?k:o!==void 0?o:u?u.getDirection():"normal"},Pt=function(){return w?"linear":i!==void 0?i:u?u.getEasing():"linear"},Xt=function(){return x?0:E!==void 0?E:t!==void 0?t:u?u.getDuration():0},mn=function(){return s!==void 0?s:u?u.getIterations():1},In=function(){return T!==void 0?T:e!==void 0?e:u?u.getDelay():0},ci=function(){return a},ri=function(ae){return o=ae,Jt(!0),R},wn=function(ae){return r=ae,Jt(!0),R},Mn=function(ae){return e=ae,Jt(!0),R},Oi=function(ae){return i=ae,Jt(!0),R},$r=function(ae){return!de&&ae===0&&(ae=1),t=ae,Jt(!0),R},us=function(ae){return s=ae,Jt(!0),R},Lr=function(ae){return u=ae,R},to=function(ae){if(ae!=null)if(ae.nodeType===1)te.push(ae);else if(ae.length>=0)for(var Ye=0;Ye<ae.length;Ye++)te.push(ae[Ye]);else console.error("Invalid addElement value");return R},no=function(ae){if(ae!=null)if(Array.isArray(ae))for(var Ye=0,vt=ae;Ye<vt.length;Ye++){var Ft=vt[Ye];Ft.parent(R),X.push(Ft)}else ae.parent(R),X.push(ae);return R},ja=function(ae){var Ye=a!==ae;return a=ae,Ye&&Ga(a),R},Ga=function(ae){de&&we().forEach(function(Ye){var vt=Ye.effect;if(vt.setKeyframes)vt.setKeyframes(ae);else{var Ft=new KeyframeEffect(vt.target,ae,vt.getTiming());Ye.effect=Ft}})},Wa=function(){he.forEach(function(Ft){return Ft()}),Ie.forEach(function(Ft){return Ft()});var ae=l,Ye=c,vt=h;te.forEach(function(Ft){var En=Ft.classList;ae.forEach(function(Qi){return En.add(Qi)}),Ye.forEach(function(Qi){return En.remove(Qi)});for(var hs in vt)vt.hasOwnProperty(hs)&&Hk(Ft,hs,vt[hs])})},sa=function(){xe.forEach(function(En){return En()}),Be.forEach(function(En){return En()});var ae=P?1:0,Ye=f,vt=m,Ft=g;te.forEach(function(En){var hs=En.classList;Ye.forEach(function(au){return hs.add(au)}),vt.forEach(function(au){return hs.remove(au)});for(var Qi in Ft)Ft.hasOwnProperty(Qi)&&Hk(En,Qi,Ft[Qi])}),E=void 0,k=void 0,T=void 0,U.forEach(function(En){return En.c(ae,R)}),G.forEach(function(En){return En.c(ae,R)}),G.length=0,A=!0,P&&(C=!0),P=!0},nr=function(){b!==0&&(b--,b===0&&(sa(),u&&u.animationFinish()))},qa=function(){te.forEach(function(ae){var Ye=ae.animate(a,{id:N,delay:In(),duration:Xt(),easing:Pt(),iterations:mn(),fill:rt(),direction:Ct()});Ye.pause(),Pe.push(Ye)}),Pe.length>0&&(Pe[0].onfinish=function(){nr()})},To=function(){Wa(),a.length>0&&de&&qa(),d=!0},Ts=function(ae){ae=Math.min(Math.max(ae,0),.9999),de&&Pe.forEach(function(Ye){Ye.currentTime=Ye.effect.getComputedTiming().delay+Xt()*ae,Ye.pause()})},Co=function(ae){Pe.forEach(function(Ye){Ye.effect.updateTiming({delay:In(),duration:Xt(),easing:Pt(),iterations:mn(),fill:rt(),direction:Ct()})}),ae!==void 0&&Ts(ae)},Jt=function(ae,Ye,vt){return ae===void 0&&(ae=!1),Ye===void 0&&(Ye=!0),ae&&X.forEach(function(Ft){Ft.update(ae,Ye,vt)}),de&&Co(vt),R},ir=function(ae,Ye){return ae===void 0&&(ae=!1),X.forEach(function(vt){vt.progressStart(ae,Ye)}),Nl(),w=ae,d||To(),Jt(!1,!0,Ye),R},Or=function(ae){return X.forEach(function(Ye){Ye.progressStep(ae)}),Ts(ae),R},tu=function(ae,Ye,vt){return w=!1,X.forEach(function(Ft){Ft.progressEnd(ae,Ye,vt)}),vt!==void 0&&(E=vt),C=!1,P=!0,ae===0?(k=Ct()==="reverse"?"normal":"reverse",k==="reverse"&&(P=!1),de?(Jt(),Ts(1-Ye)):(T=(1-Ye)*Xt()*-1,Jt(!1,!1))):ae===1&&(de?(Jt(),Ts(Ye)):(T=Ye*Xt()*-1,Jt(!1,!1))),ae!==void 0&&!u&&Ka(),R},Nl=function(){d&&(de?Pe.forEach(function(ae){ae.pause()}):te.forEach(function(ae){Hk(ae,"animation-play-state","paused")}),M=!0)},nu=function(){return X.forEach(function(ae){ae.pause()}),Nl(),R},iu=function(){nr()},su=function(){Pe.forEach(function(ae){ae.play()}),(a.length===0||te.length===0)&&nr()},ru=function(){de&&(Ts(0),Co())},Ka=function(ae){return new Promise(function(Ye){ae!=null&&ae.sync&&(x=!0,V(function(){return x=!1},{oneTimeCallback:!0})),d||To(),C&&(ru(),C=!1),A&&(b=X.length+1,A=!1);var vt=function(){ie(Ft,G),Ye()},Ft=function(){ie(vt,B),Ye()};V(Ft,{oneTimeCallback:!0}),me(vt,{oneTimeCallback:!0}),X.forEach(function(En){En.play()}),de?su():iu(),M=!1})},ou=function(){X.forEach(function(ae){ae.stop()}),d&&(z(),d=!1),Se(),B.forEach(function(ae){return ae.c(0,R)}),B.length=0},Fl=function(ae,Ye){var vt,Ft=a[0];return Ft!==void 0&&(Ft.offset===void 0||Ft.offset===0)?Ft[ae]=Ye:a=Ta([(vt={offset:0},vt[ae]=Ye,vt)],a,!0),R},Mh=function(ae,Ye){var vt,Ft=a[a.length-1];return Ft!==void 0&&(Ft.offset===void 0||Ft.offset===1)?Ft[ae]=Ye:a=Ta(Ta([],a,!0),[(vt={offset:1},vt[ae]=Ye,vt)],!1),R},Nh=function(ae,Ye,vt){return Fl(ae,Ye).to(ae,vt)};return R={parentAnimation:u,elements:te,childAnimations:X,id:N,animationFinish:nr,from:Fl,to:Mh,fromTo:Nh,parent:Lr,play:Ka,pause:nu,stop:ou,destroy:ze,keyframes:ja,addAnimation:no,addElement:to,update:Jt,fill:wn,direction:ri,iterations:us,duration:$r,easing:Oi,delay:Mn,getWebAnimations:we,getKeyframes:ci,getFill:rt,getDirection:Ct,getDelay:In,getIterations:mn,getEasing:Pt,getDuration:Xt,afterAddRead:Ce,afterAddWrite:ge,afterClearStyles:Je,afterStyles:It,afterRemoveClass:kt,afterAddClass:xt,beforeAddRead:Te,beforeAddWrite:ke,beforeClearStyles:ut,beforeStyles:mt,beforeRemoveClass:Ge,beforeAddClass:He,onFinish:V,isRunning:ne,progressStart:ir,progressStep:Or,progressEnd:tu}},KLe=Object.defineProperty,YLe=function(n,e){for(var t in e)KLe(n,t,{get:e[t],enumerable:!0})},XLe=new WeakMap,QLe=function(n){return XLe.get(n)},ZLe=typeof window<"u"?window:{},JLe=ZLe.document||{head:{}};(function(){var n=!1;try{JLe.addEventListener("e",null,Object.defineProperty({},"passive",{get:function(){n=!0}}))}catch(e){}return n})();(function(){try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(n){}return!1})();var eOe={};YLe(eOe,{err:function(){return qz},map:function(){return tOe},ok:function(){return EC},unwrap:function(){return nOe},unwrapErr:function(){return iOe}});var EC=function(n){return{isOk:!0,isErr:!1,value:n}},qz=function(n){return{isOk:!1,isErr:!0,value:n}};function tOe(n,e){if(n.isOk){var t=e(n.value);return t instanceof Promise?t.then(function(s){return EC(s)}):EC(t)}if(n.isErr){var i=n.value;return qz(i)}throw"should never get here"}var nOe=function(n){if(n.isOk)return n.value;throw n.value},iOe=function(n){if(n.isErr)return n.value;throw n.value},sOe=function(n){return QLe(n).V};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var rOe=function(){function n(){this.m=new Map}return n.prototype.reset=function(e){this.m=new Map(Object.entries(e))},n.prototype.get=function(e,t){var i=this.m.get(e);return i!==void 0?i:t},n.prototype.getBoolean=function(e,t){t===void 0&&(t=!1);var i=this.m.get(e);return i===void 0?t:typeof i=="string"?i==="true":!!i},n.prototype.getNumber=function(e,t){var i=parseFloat(this.m.get(e));return isNaN(i)?t!==void 0?t:NaN:i},n.prototype.set=function(e,t){this.m.set(e,t)},n}(),oOe=new rOe,aOe=function(n){return lOe(n)},NL=function(n,e){return typeof n=="string"&&(e=n,n=void 0),aOe(n).includes(e)},lOe=function(n){if(n===void 0&&(n=window),typeof n>"u")return[];n.Ionic=n.Ionic||{};var e=n.Ionic.platforms;return e==null&&(e=n.Ionic.platforms=cOe(n),e.forEach(function(t){return n.document.documentElement.classList.add("plt-".concat(t))})),e},cOe=function(n){var e=oOe.get("platform");return Object.keys(FL).filter(function(t){var i=e==null?void 0:e[t];return typeof i=="function"?i(n):FL[t](n)})},dOe=function(n){return t_(n)&&!Yz(n)},V3=function(n){return!!(bh(n,/iPad/i)||bh(n,/Macintosh/i)&&t_(n))},uOe=function(n){return bh(n,/iPhone/i)},hOe=function(n){return bh(n,/iPhone|iPod/i)||V3(n)},Kz=function(n){return bh(n,/android|sink/i)},fOe=function(n){return Kz(n)&&!bh(n,/mobile/i)},pOe=function(n){var e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),s=Math.max(e,t);return i>390&&i<520&&s>620&&s<800},mOe=function(n){var e=n.innerWidth,t=n.innerHeight,i=Math.min(e,t),s=Math.max(e,t);return V3(n)||fOe(n)||i>460&&i<820&&s>780&&s<1400},t_=function(n){return yOe(n,"(any-pointer:coarse)")},gOe=function(n){return!t_(n)},Yz=function(n){return Xz(n)||Qz(n)},Xz=function(n){return!!(n.cordova||n.phonegap||n.PhoneGap)},Qz=function(n){var e=n.Capacitor;return!!(e!=null&&e.isNative)},bOe=function(n){return bh(n,/electron/i)},vOe=function(n){var e;return!!(!((e=n.matchMedia)===null||e===void 0)&&e.call(n,"(display-mode: standalone)").matches||n.navigator.standalone)},bh=function(n,e){return e.test(n.navigator.userAgent)},yOe=function(n,e){var t;return(t=n.matchMedia)===null||t===void 0?void 0:t.call(n,e).matches},FL={ipad:V3,iphone:uOe,ios:hOe,android:Kz,phablet:pOe,tablet:mOe,cordova:Xz,capacitor:Qz,electron:bOe,pwa:vOe,mobile:t_,mobileweb:dOe,desktop:gOe,hybrid:Yz},wOe,U3=function(n){return n&&sOe(n)||wOe};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var BL=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return console.warn.apply(console,Ta(["[Ionic Warning]: ".concat(n)],e,!1))},Zz=function(n,e){n.componentOnReady?n.componentOnReady().then(function(t){return e(t)}):xOe(function(){return e(n)})},xOe=function(n){return typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(n):typeof requestAnimationFrame=="function"?requestAnimationFrame(n):setTimeout(n)},_Oe=99,z3=function(n){return sh().duration(n?400:300)},kOe=function(n){var e,t,i=n.width+8,s=sh(),r=sh();n.isEndSide?(e=i+"px",t="0px"):(e=-i+"px",t="0px"),s.addElement(n.menuInnerEl).fromTo("transform","translateX(".concat(e,")"),"translateX(".concat(t,")"));var o=U3(n),a=o==="ios",l=a?.2:.25;return r.addElement(n.backdropEl).fromTo("opacity",.01,l),z3(a).addAnimation([s,r])},EOe=function(n){var e,t,i=U3(n),s=n.width;n.isEndSide?(e=-s+"px",t=s+"px"):(e=s+"px",t=-s+"px");var r=sh().addElement(n.menuInnerEl).fromTo("transform","translateX(".concat(t,")"),"translateX(0px)"),o=sh().addElement(n.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(e,")")),a=sh().addElement(n.backdropEl).fromTo("opacity",.01,.32);return z3(i==="ios").addAnimation([r,o,a])},TOe=function(n){var e=U3(n),t=n.width*(n.isEndSide?-1:1)+"px",i=sh().addElement(n.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(t,")"));return z3(e==="ios").addAnimation(i)},COe=function(){var n=new Map,e=[],t=function(C){return Ur(void 0,void 0,void 0,function(){var A;return wr(this,function(R){switch(R.label){case 0:return[4,c(C,!0)];case 1:return A=R.sent(),A?[2,A.open()]:[2,!1]}})})},i=function(C){return Ur(void 0,void 0,void 0,function(){var A;return wr(this,function(R){switch(R.label){case 0:return[4,C!==void 0?c(C,!0):d()];case 1:return A=R.sent(),A!==void 0?[2,A.close()]:[2,!1]}})})},s=function(C){return Ur(void 0,void 0,void 0,function(){var A;return wr(this,function(R){switch(R.label){case 0:return[4,c(C,!0)];case 1:return A=R.sent(),A?[2,A.toggle()]:[2,!1]}})})},r=function(C,A){return Ur(void 0,void 0,void 0,function(){var R;return wr(this,function(M){switch(M.label){case 0:return[4,c(A)];case 1:return R=M.sent(),R&&(R.disabled=!C),[2,R]}})})},o=function(C,A){return Ur(void 0,void 0,void 0,function(){var R;return wr(this,function(M){switch(M.label){case 0:return[4,c(A)];case 1:return R=M.sent(),R&&(R.swipeGesture=C),[2,R]}})})},a=function(C){return Ur(void 0,void 0,void 0,function(){var A,A;return wr(this,function(R){switch(R.label){case 0:return C==null?[3,2]:[4,c(C)];case 1:return A=R.sent(),[2,A!==void 0&&A.isOpen()];case 2:return[4,d()];case 3:return A=R.sent(),[2,A!==void 0]}})})},l=function(C){return Ur(void 0,void 0,void 0,function(){var A;return wr(this,function(R){switch(R.label){case 0:return[4,c(C)];case 1:return A=R.sent(),A?[2,!A.disabled]:[2,!1]}})})},c=function(C){for(var A=[],R=1;R<arguments.length;R++)A[R-1]=arguments[R];return Ur(void 0,Ta([C],A,!0),void 0,function(M,N){var U,G,B;return N===void 0&&(N=!1),wr(this,function(te){switch(te.label){case 0:return[4,P()];case 1:if(te.sent(),M==="start"||M==="end"){if(U=e.filter(function(X){return X.side===M&&!X.disabled}),U.length>=1)return U.length>1&&N&&BL('menuController queried for a menu on the "'.concat(M,'" side, but ').concat(U.length," menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side."),U.map(function(X){return X.el})),[2,U[0].el];if(G=e.filter(function(X){return X.side===M}),G.length>=1)return G.length>1&&N&&BL('menuController queried for a menu on the "'.concat(M,'" side, but ').concat(G.length," menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side."),G.map(function(X){return X.el})),[2,G[0].el]}else if(M!=null)return[2,T(function(X){return X.menuId===M})];return B=T(function(X){return!X.disabled}),B?[2,B]:[2,e.length>0?e[0].el:void 0]}})})},d=function(){return Ur(void 0,void 0,void 0,function(){return wr(this,function(C){switch(C.label){case 0:return[4,P()];case 1:return C.sent(),[2,x()]}})})},u=function(){return Ur(void 0,void 0,void 0,function(){return wr(this,function(C){switch(C.label){case 0:return[4,P()];case 1:return C.sent(),[2,k()]}})})},h=function(){return Ur(void 0,void 0,void 0,function(){return wr(this,function(C){switch(C.label){case 0:return[4,P()];case 1:return C.sent(),[2,E()]}})})},f=function(C,A){n.set(C,A)},m=function(C){e.indexOf(C)<0&&e.push(C)},g=function(C){var A=e.indexOf(C);A>-1&&e.splice(A,1)},b=function(C,A,R,M){return Ur(void 0,void 0,void 0,function(){var N;return wr(this,function(U){switch(U.label){case 0:return E()?[2,!1]:A?[4,d()]:[3,3];case 1:return N=U.sent(),N&&C.el!==N?[4,N.setOpen(!1,!1)]:[3,3];case 2:U.sent(),U.label=3;case 3:return[2,C._setOpen(A,R,M)]}})})},w=function(C,A){var R=n.get(C);if(!R)throw new Error("animation not registered");var M=R(A);return M},x=function(){return T(function(C){return C._isOpen})},k=function(){return e.map(function(C){return C.el})},E=function(){return e.some(function(C){return C.isAnimating})},T=function(C){var A=e.find(C);if(A!==void 0)return A.el},P=function(){return Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(function(C){return new Promise(function(A){return Zz(C,A)})}))};return f("reveal",TOe),f("push",EOe),f("overlay",kOe),Uk==null||Uk.addEventListener("ionBackButton",function(C){var A=x();A&&C.detail.register(_Oe,function(){return A.close()})}),{registerAnimation:f,get:c,getMenus:u,getOpen:d,isEnabled:l,swipeGesture:o,isAnimating:h,isOpen:a,enable:r,toggle:s,close:i,open:t,_getOpenSync:x,_createAnimation:w,_register:m,_unregister:g,_setOpen:b}};COe();var SOe=function(n){return{create:function(e){return IOe(n,e)},dismiss:function(e,t,i){return ROe(document,e,t,n,i)},getTop:function(){return Ur(this,void 0,void 0,function(){return wr(this,function(e){return[2,Jz(document,n)]})})}}},AOe=SOe("ion-modal"),IOe=function(n,e){return typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(n).then(function(){var t=document.createElement(n);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},e),{hasController:!0})),OOe(document).appendChild(t),new Promise(function(i){return Zz(t,i)})}):Promise.resolve()},POe=function(n){return n.classList.contains("overlay-hidden")},ROe=function(n,e,t,i,s){var r=Jz(n,i,s);return r?r.dismiss(e,t):Promise.reject("overlay does not exist")},$Oe=function(n,e){return e===void 0&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter(function(t){return t.overlayIndex>0})},LOe=function(n,e){return $Oe(n,e).filter(function(t){return!POe(t)})},Jz=function(n,e,t){var i=LOe(n,e);return t===void 0?i[i.length-1]:i.find(function(s){return s.id===t})},OOe=function(n){return n.querySelector("ion-app")||n.body};const DOe={key:0,class:"space-y-5 p-4 rounded-lg border bg-white"},MOe=["onClick"],NOe=["src"],FOe={class:"flex-col gap-2"},BOe={class:"flex gap-2 w-64"},VOe={class:"text-zinc-950 text-lg font-semibold cursor-pointer truncate"},UOe={class:"flex items-center gap-2"},zOe={class:"text-neutral-500 text-sm font-light"},HOe={class:"text-neutral-500 text-sm font-light"},jOe={class:"text-neutral-500 text-sm font-light"},GOe={key:0},WOe={key:1},qOe=Fe({__name:"ModalCommunityDropdown",setup(n){const e=Zr(),t=K(1),i=K([]),s=K(!1),r=async(c=1,d=!1)=>{var h,f,m;const u={page:c,limit:20};try{const{data:g}=await Qe.get("/user-community/profile/".concat(e.params.userId),{params:u});J.isEmpty(g)?s.value=!1:((h=g==null?void 0:g.meta)!=null&&h.hasNextPage?(t.value++,s.value=!0):s.value=!1,d?i.value=[...i.value,...(f=g==null?void 0:g.data)!=null?f:[]]:i.value=(m=g==null?void 0:g.data)!=null?m:[])}catch(g){console.error("❌ Error fetching data:",g)}};on(()=>{a()});const o=async c=>{await r(t.value,!0),setTimeout(()=>c.target.complete(),500)},a=()=>{r(1,!1),t.value=1,s.value=!1},l=async c=>{AOe.dismiss(c,"confirm")};return(c,d)=>(I(),ve(y(At),null,{default:j(()=>[i.value?(I(),O("div",DOe,[(I(!0),O(Ue,null,ct(i.value,u=>{var h,f,m,g,b,w,x,k,E,T,P;return I(),O("div",{key:u._id,class:"flex-col w-full"},[_("use",{onClick:C=>l(u),class:"flex items-center gap-3 w-full"},[_("img",{src:(f=(h=u.community)==null?void 0:h.icon)!=null?f:"/favicon.ico",class:"w-12 h-12 rounded-lg shadow",fit:"cover",placeholder:"favicon.ico"},null,8,NOe),_("div",FOe,[_("div",BOe,[_("span",VOe,Q((m=u.community)==null?void 0:m.name),1)]),_("div",UOe,[_("div",zOe,Q(((g=u.community)==null?void 0:g.status)===0?"Riêng tư":"Công khai"),1),L(y(fe),{class:"w-1 h-1 text-gray-500 bg-black rounded-full"}),_("div",HOe,Q((w=(b=u.community)==null?void 0:b.total_member)!=null?w:0)+" thành viên ",1),L(y(fe),{class:"w-1 h-1 text-gray-500 bg-black rounded-full"}),_("div",jOe,[((k=(x=u.community)==null?void 0:x.communityFee)==null?void 0:k.price)==null?(I(),O("div",GOe," Miễn phí ")):(I(),O("div",WOe," Giá "+Q((P=(T=(E=u.community)==null?void 0:E.communityFee)==null?void 0:T.price)==null?void 0:P.toLocaleString("vi-VN"))+"đ ",1))])])])],8,MOe)])}),128))])):re("",!0),s.value?(I(),ve(y(Zn),{key:1,onIonInfinite:o,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),KOe={class:"ion-padding"},YOe={class:"flex justify-between items-center pb-4"},XOe={class:"grid grid-cols-2 flex-1 gap-2 justify-between pt-3"},eH=Fe({__name:"ModalLevelNote",setup(n){const e=async()=>qe.dismiss(null,"cancel"),t=[[0,0],[1,1],[2,5],[3,20],[4,65],[5,155],[6,515],[7,"2.015"],[8,"8.015"],[9,"33.015"]];return(i,s)=>(I(),O("section",KOe,[_("div",YOe,[s[0]||(s[0]=_("span",{class:"font-medium text-lg"},"Điểm trong cộng đồng",-1)),L(y(fe),{onClick:e,icon:y(ks),class:"size-7 text-gray2"},null,8,["icon"])]),_("div",null,[s[1]||(s[1]=_("div",{class:"font-medium text-lg"},"Điểm",-1)),s[2]||(s[2]=_("div",{class:"text-base font-light"}," Bạn được điểm khi thành viên khác thích bài viết của bạn (1 Like = 1 điểm) và khi bạn giới thiệu một thành viên mới vào cộng đồng (1 Ref = 2 điểm) ",-1)),s[3]||(s[3]=_("p",{class:"text-lg font-medium pt-3"},"Level",-1)),s[4]||(s[4]=_("div",{class:"text-base font-light"}," Khi bạn đạt được điểm, bạn sẽ lên cấp. Cấp độ của bạn được hiển thị ở dưới cùng bên phải hình đại diện của bạn. Số điểm cần thiết để lên cấp độ tiếp theo được hiển thị dưới hình đại diện trên trang hồ sơ của bạn. ",-1)),_("div",XOe,[(I(),O(Ue,null,ct(t,(r,o)=>_("div",{key:o,class:"text-base font-light"},Q("Level ".concat(r[0]," - ").concat(r[1]," điểm")),1)),64))])])]))}}),QOe={class:"ion-padding"},ZOe={class:"mb-6"},JOe={class:"uppercase font-medium"},eDe={slot:"label"},tDe={class:"flex justify-end gap-2"},nDe=Fe({__name:"ModalReportPost",props:{type:{},post:{}},setup(n){const e=n,t=K(""),i=lt(()=>J.isEmpty(t.value)),s=async()=>{var l,c;const o={reason:t.value,post_id:(l=e.post)==null?void 0:l._id,community_id:(c=e.post)==null?void 0:c.community_id},{status:a}=await Qe.post("/community-post-report",o);a===201&&(tt("Báo cáo thành công","success"),await qe.dismiss(null,"success"))},r=async()=>await qe.dismiss(null,"cancel");return(o,a)=>{var l;return I(),O("section",QOe,[_("div",ZOe,[a[1]||(a[1]=be(" Báo cáo bài viết: ")),_("span",JOe,Q(y(OB)((l=o.post)==null?void 0:l.title)),1)]),_("form",{class:"w-full",onSubmit:qt(s,["prevent"])},[L(y(Ep),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=c=>t.value=c),mode:"md",required:"","label-placement":"stacked",fill:"outline",placeholder:"Lý do báo cáo",class:"outline-none text-sm font-light mb-6 h-28",counter:!0,maxlength:255},{default:j(()=>[_("div",eDe,[a[3]||(a[3]=be("Lý do báo cáo")),L(y(Ai),{color:"danger"},{default:j(()=>a[2]||(a[2]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),_("div",tDe,[_("div",{onClick:r,class:"bg-white border-[1px] border-gray2 rounded-lg text-black font-medium py-1.5 px-6 flex items-center"}," Huỷ "),_("div",{onClick:s,class:gt(["rounded-lg py-1.5 px-5 text-white font-medium flex items-center",i.value?"bg-gray1":"bg-blue1"])}," Báo cáo ",2)])],32)])}}});function Ot(n,e,t){return(e=sDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iDe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sDe(n){var e=iDe(n,"string");return typeof e=="symbol"?e:String(e)}function rDe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function VL(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function oDe(n,e,t){return VL(n.prototype,e),VL(n,t),n}function aDe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function zL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(t),!0).forEach(function(i){aDe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):UL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}var HL={addCSS:!0,thumbWidth:15,watch:!0};function lDe(n,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(n,e)}function cDe(n,e){if(n&&e){var t=new Event(e,{bubbles:!0});n.dispatchEvent(t)}}var Ib=function(n){return n!=null?n.constructor:null},H3=function(n,e){return!!(n&&e&&n instanceof e)},tH=function(n){return n==null},nH=function(n){return Ib(n)===Object},dDe=function(n){return Ib(n)===Number&&!Number.isNaN(n)},iH=function(n){return Ib(n)===String},uDe=function(n){return Ib(n)===Boolean},hDe=function(n){return Ib(n)===Function},sH=function(n){return Array.isArray(n)},rH=function(n){return H3(n,NodeList)},fDe=function(n){return H3(n,Element)},pDe=function(n){return H3(n,Event)},mDe=function(n){return tH(n)||(iH(n)||sH(n)||rH(n))&&!n.length||nH(n)&&!Object.keys(n).length},ar={nullOrUndefined:tH,object:nH,number:dDe,string:iH,boolean:uDe,function:hDe,array:sH,nodeList:rH,element:fDe,event:pDe,empty:mDe};function gDe(n){var e="".concat(n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function bDe(n,e){if(1>e){var t=gDe(e);return parseFloat(n.toFixed(t))}return Math.round(n/e)*e}var vDe=function(){function n(e,t){rDe(this,n),ar.element(e)?this.element=e:ar.string(e)&&(this.element=document.querySelector(e)),ar.element(this.element)&&ar.empty(this.element.rangeTouch)&&(this.config=zL({},HL,{},t),this.init())}return oDe(n,[{key:"init",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(s){t.element[i](s,function(r){return t.set(r)},!1)})}},{key:"get",value:function(e){if(!n.enabled||!ar.event(e))return null;var t,i=e.target,s=e.changedTouches[0],r=parseFloat(i.getAttribute("min"))||0,o=parseFloat(i.getAttribute("max"))||100,a=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(t=100/l.width*(s.clientX-l.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*c:50<t&&(t+=2*(t-50)*c),r+bDe(t/100*(o-r),a)}},{key:"set",value:function(e){n.enabled&&ar.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),cDe(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;if(ar.empty(e)||ar.string(e)?i=Array.from(document.querySelectorAll(ar.string(e)?e:'input[type="range"]')):ar.element(e)?i=[e]:ar.nodeList(e)?i=Array.from(e):ar.array(e)&&(i=e.filter(ar.element)),ar.empty(i))return null;var s=zL({},HL,{},t);if(ar.string(e)&&s.watch){var r=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(l){ar.element(l)&&lDe(l,e)&&new n(l,s)})})});r.observe(document.body,{childList:!0,subtree:!0})}return i.map(function(o){return new n(o,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),n}();const Pb=n=>n!=null?n.constructor:null,Dc=(n,e)=>!!(n&&e&&n instanceof e),j3=n=>n==null,oH=n=>Pb(n)===Object,yDe=n=>Pb(n)===Number&&!Number.isNaN(n),n_=n=>Pb(n)===String,wDe=n=>Pb(n)===Boolean,aH=n=>typeof n=="function",lH=n=>Array.isArray(n),xDe=n=>Dc(n,WeakMap),cH=n=>Dc(n,NodeList),_De=n=>Pb(n)===Text,kDe=n=>Dc(n,Event),EDe=n=>Dc(n,KeyboardEvent),TDe=n=>Dc(n,window.TextTrackCue)||Dc(n,window.VTTCue),CDe=n=>Dc(n,TextTrack)||!j3(n)&&n_(n.kind),SDe=n=>Dc(n,Promise)&&aH(n.then),ADe=n=>n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.style=="object"&&typeof n.ownerDocument=="object",dH=n=>j3(n)||(n_(n)||lH(n)||cH(n))&&!n.length||oH(n)&&!Object.keys(n).length,IDe=n=>{if(Dc(n,window.URL))return!0;if(!n_(n))return!1;let e=n;n.startsWith("http://")&&n.startsWith("https://")||(e="http://".concat(n));try{return!dH(new URL(e).hostname)}catch(t){return!1}};var ce={nullOrUndefined:j3,object:oH,number:yDe,string:n_,boolean:wDe,function:aH,array:lH,weakMap:xDe,nodeList:cH,element:ADe,textNode:_De,event:kDe,keyboardEvent:EDe,cue:TDe,track:CDe,promise:SDe,url:IDe,empty:dH};const TC=(()=>{const n=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(e).find(i=>n.style[i]!==void 0);return!!ce.string(t)&&e[t]})();function uH(n,e){setTimeout(()=>{try{n.hidden=!0,n.offsetHeight,n.hidden=!1}catch(t){}},e)}const PDe=!!window.document.documentMode,RDe=/Edge/g.test(navigator.userAgent),$De="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),LDe=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,ODe=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,DDe=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var Gs={isIE:PDe,isEdge:RDe,isWebKit:$De,isIPhone:LDe,isIPadOS:ODe,isIos:DDe};function MDe(n){return JSON.parse(JSON.stringify(n))}function hH(n,e){return e.split(".").reduce((t,i)=>t&&t[i],n)}function ws(n={},...e){if(!e.length)return n;const t=e.shift();return ce.object(t)?(Object.keys(t).forEach(i=>{ce.object(t[i])?(Object.keys(n).includes(i)||Object.assign(n,{[i]:{}}),ws(n[i],t[i])):Object.assign(n,{[i]:t[i]})}),ws(n,...e)):n}function fH(n,e){const t=n.length?n:[n];Array.from(t).reverse().forEach((i,s)=>{const r=s>0?e.cloneNode(!0):e,o=i.parentNode,a=i.nextSibling;r.appendChild(i),a?o.insertBefore(r,a):o.appendChild(r)})}function CC(n,e){ce.element(n)&&!ce.empty(e)&&Object.entries(e).filter(([,t])=>!ce.nullOrUndefined(t)).forEach(([t,i])=>n.setAttribute(t,i))}function hn(n,e,t){const i=document.createElement(n);return ce.object(e)&&CC(i,e),ce.string(t)&&(i.innerText=t),i}function NDe(n,e){ce.element(n)&&ce.element(e)&&e.parentNode.insertBefore(n,e.nextSibling)}function jL(n,e,t,i){ce.element(e)&&e.appendChild(hn(n,t,i))}function gc(n){ce.nodeList(n)||ce.array(n)?Array.from(n).forEach(gc):ce.element(n)&&ce.element(n.parentNode)&&n.parentNode.removeChild(n)}function Yv(n){if(!ce.element(n))return;let{length:e}=n.childNodes;for(;e>0;)n.removeChild(n.lastChild),e-=1}function fw(n,e){return ce.element(e)&&ce.element(e.parentNode)&&ce.element(n)?(e.parentNode.replaceChild(n,e),n):null}function rl(n,e){if(!ce.string(n)||ce.empty(n))return{};const t={},i=ws({},e);return n.split(",").forEach(s=>{const r=s.trim(),o=r.replace(".",""),a=r.replace(/[[\]]/g,"").split("="),[l]=a,c=a.length>1?a[1].replace(/["']/g,""):"";switch(r.charAt(0)){case".":ce.string(i.class)?t.class="".concat(i.class," ").concat(o):t.class=o;break;case"#":t.id=r.replace("#","");break;case"[":t[l]=c}}),ws(i,t)}function Pu(n,e){if(!ce.element(n))return;let t=e;ce.boolean(t)||(t=!n.hidden),n.hidden=t}function yi(n,e,t){if(ce.nodeList(n))return Array.from(n).map(i=>yi(i,e,t));if(ce.element(n)){let i="toggle";return t!==void 0&&(i=t?"add":"remove"),n.classList[i](e),n.classList.contains(e)}return!1}function pw(n,e){return ce.element(n)&&n.classList.contains(e)}function zu(n,e){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(n,e)}function FDe(n,e){const{prototype:t}=Element;return(t.closest||function(){let i=this;do{if(zu.matches(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}).call(n,e)}function P0(n){return this.elements.container.querySelectorAll(n)}function $s(n){return this.elements.container.querySelector(n)}function jk(n=null,e=!1){ce.element(n)&&n.focus({preventScroll:!0,focusVisible:e})}const GL={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},xs={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(n,e){const t=xs[n]||e!=="html5";return{api:t,ui:t&&xs.rangeInput}},pip:!(Gs.isIPhone||!ce.function(hn("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||hn("video").disablePictureInPicture)),airplay:ce.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(n){if(ce.empty(n))return!1;const[e]=n.split("/");let t=n;if(!this.isHTML5||e!==this.type)return!1;Object.keys(GL).includes(t)&&(t+='; codecs="'.concat(GL[n],'"'));try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch(i){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const n=document.createElement("input");return n.type="range",n.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:TC!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},BDe=(()=>{let n=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(n=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return n})();function R0(n,e,t,i=!1,s=!0,r=!1){if(!n||!("addEventListener"in n)||ce.empty(e)||!ce.function(t))return;const o=e.split(" ");let a=r;BDe&&(a={passive:s,capture:r}),o.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:n,type:l,callback:t,options:a}),n[i?"addEventListener":"removeEventListener"](l,t,a)})}function ii(n,e="",t,i=!0,s=!1){R0.call(this,n,e,t,!0,i,s)}function i_(n,e="",t,i=!0,s=!1){R0.call(this,n,e,t,!1,i,s)}function G3(n,e="",t,i=!0,s=!1){const r=(...o)=>{i_(n,e,r,i,s),t.apply(this,o)};R0.call(this,n,e,r,!0,i,s)}function pn(n,e="",t=!1,i={}){if(!ce.element(n)||ce.empty(e))return;const s=new CustomEvent(e,{bubbles:t,detail:{...i,plyr:this}});n.dispatchEvent(s)}function VDe(){this&&this.eventListeners&&(this.eventListeners.forEach(n=>{const{element:e,type:t,callback:i,options:s}=n;e.removeEventListener(t,i,s)}),this.eventListeners=[])}function UDe(){return new Promise(n=>this.ready?setTimeout(n,0):ii.call(this,this.elements.container,"ready",n)).then(()=>{})}function gl(n){ce.promise(n)&&n.then(null,()=>{})}function SC(n){return ce.array(n)?n.filter((e,t)=>n.indexOf(e)===t):n}function pH(n,e){return ce.array(n)&&n.length?n.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t):null}function mH(n){return!(!window||!window.CSS)&&window.CSS.supports(n)}const WL=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((n,[e,t])=>({...n,[e/t]:[e,t]}),{});function gH(n){return ce.array(n)||ce.string(n)&&n.includes(":")?(ce.array(n)?n:n.split(":")).map(Number).every(ce.number):!1}function mw(n){if(!ce.array(n)||!n.every(ce.number))return null;const[e,t]=n,i=(r,o)=>o===0?r:i(o,r%o),s=i(e,t);return[e/s,t/s]}function W3(n){const e=i=>gH(i)?i.split(":").map(Number):null;let t=e(n);if(t===null&&(t=e(this.config.ratio)),t===null&&!ce.empty(this.embed)&&ce.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:i,videoHeight:s}=this.media;t=[i,s]}return mw(t)}function Mp(n){if(!this.isVideo)return{};const{wrapper:e}=this.elements,t=W3.call(this,n);if(!ce.array(t))return{};const[i,s]=mw(t),r=100/i*s;if(mH("aspect-ratio: ".concat(i,"/").concat(s))?e.style.aspectRatio="".concat(i,"/").concat(s):e.style.paddingBottom="".concat(r,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-r)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(a,"%)")}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:r,ratio:t}}function bH(n,e,t=.05){const i=n/e,s=pH(Object.keys(WL),i);return Math.abs(s-i)<=t?WL[s]:[n,e]}function zDe(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Cd={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(n=>{const e=n.getAttribute("type");return!!ce.empty(e)||xs.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Cd.getSources.call(this).map(n=>Number(n.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const n=this;n.options.speed=n.config.speed.options,ce.empty(this.config.ratio)||Mp.call(n),Object.defineProperty(n.media,"quality",{get(){const e=Cd.getSources.call(n).find(t=>t.getAttribute("src")===n.source);return e&&Number(e.getAttribute("size"))},set(e){if(n.quality!==e){if(n.config.quality.forced&&ce.function(n.config.quality.onChange))n.config.quality.onChange(e);else{const t=Cd.getSources.call(n).find(l=>Number(l.getAttribute("size"))===e);if(!t)return;const{currentTime:i,paused:s,preload:r,readyState:o,playbackRate:a}=n.media;n.media.src=t.getAttribute("src"),(r!=="none"||o)&&(n.once("loadedmetadata",()=>{n.speed=a,n.currentTime=i,s||gl(n.play())}),n.media.load())}pn.call(n,n.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(gc(Cd.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function HDe(n){return"".concat(n,"-").concat(Math.floor(1e4*Math.random()))}function AC(n,...e){return ce.empty(n)?n:n.toString().replace(/{(\d+)}/g,(t,i)=>e[i].toString())}function jDe(n,e){return n===0||e===0||Number.isNaN(n)||Number.isNaN(e)?0:(n/e*100).toFixed(2)}const Lg=(n="",e="",t="")=>n.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),vH=(n="")=>n.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function GDe(n=""){let e=n.toString();return e=Lg(e,"-"," "),e=Lg(e,"_"," "),e=vH(e),Lg(e," ","")}function WDe(n=""){let e=n.toString();return e=GDe(e),e.charAt(0).toLowerCase()+e.slice(1)}function qDe(n){const e=document.createDocumentFragment(),t=document.createElement("div");return e.appendChild(t),t.innerHTML=n,e.firstChild.innerText}function KDe(n){const e=document.createElement("div");return e.appendChild(n),e.innerHTML}const qL={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},zs={get(n="",e={}){if(ce.empty(n)||ce.empty(e))return"";let t=hH(e.i18n,n);if(ce.empty(t))return Object.keys(qL).includes(n)?qL[n]:"";const i={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(i).forEach(([s,r])=>{t=Lg(t,s,r)}),t}};let yH=class IC{constructor(e){Ot(this,"get",t=>{if(!IC.supported||!this.enabled)return null;const i=window.localStorage.getItem(this.key);if(ce.empty(i))return null;const s=JSON.parse(i);return ce.string(t)&&t.length?s[t]:s}),Ot(this,"set",t=>{if(!IC.supported||!this.enabled||!ce.object(t))return;let i=this.get();ce.empty(i)&&(i={}),ws(i,t);try{window.localStorage.setItem(this.key,JSON.stringify(i))}catch(s){}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}};function Rb(n,e="text"){return new Promise((t,i)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",()=>{if(e==="text")try{t(JSON.parse(s.responseText))}catch(r){t(s.responseText)}else t(s.response)}),s.addEventListener("error",()=>{throw new Error(s.status)}),s.open("GET",n,!0),s.responseType=e,s.send()}catch(s){i(s)}})}function wH(n,e){if(!ce.string(n))return;const t="cache",i=ce.string(e);let s=!1;const r=()=>document.getElementById(e)!==null,o=(a,l)=>{a.innerHTML=l,i&&r()||document.body.insertAdjacentElement("afterbegin",a)};if(!i||!r()){const a=yH.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),i&&l.setAttribute("id",e),a){const c=window.localStorage.getItem("".concat(t,"-").concat(e));if(s=c!==null,s){const d=JSON.parse(c);o(l,d.content)}}Rb(n).then(c=>{if(!ce.empty(c)){if(a)try{window.localStorage.setItem("".concat(t,"-").concat(e),JSON.stringify({content:c}))}catch(d){}o(l,c)}}).catch(()=>{})}}const xH=n=>Math.trunc(n/60/60%60,10),YDe=n=>Math.trunc(n/60%60,10),XDe=n=>Math.trunc(n%60,10);function s_(n=0,e=!1,t=!1){if(!ce.number(n))return s_(void 0,e,t);const i=a=>"0".concat(a).slice(-2);let s=xH(n);const r=YDe(n),o=XDe(n);return s=e||s>0?"".concat(s,":"):"","".concat(t&&n>0?"-":"").concat(s).concat(i(r),":").concat(i(o))}const Rt={getIconUrl(){const n=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,t=n.host!==e||Gs.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=$s.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:P0.call(this,this.config.selectors.buttons.play),pause:$s.call(this,this.config.selectors.buttons.pause),restart:$s.call(this,this.config.selectors.buttons.restart),rewind:$s.call(this,this.config.selectors.buttons.rewind),fastForward:$s.call(this,this.config.selectors.buttons.fastForward),mute:$s.call(this,this.config.selectors.buttons.mute),pip:$s.call(this,this.config.selectors.buttons.pip),airplay:$s.call(this,this.config.selectors.buttons.airplay),settings:$s.call(this,this.config.selectors.buttons.settings),captions:$s.call(this,this.config.selectors.buttons.captions),fullscreen:$s.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=$s.call(this,this.config.selectors.progress),this.elements.inputs={seek:$s.call(this,this.config.selectors.inputs.seek),volume:$s.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:$s.call(this,this.config.selectors.display.buffer),currentTime:$s.call(this,this.config.selectors.display.currentTime),duration:$s.call(this,this.config.selectors.display.duration)},ce.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(n){return this.debug.warn("It looks like there is a problem with your custom controls HTML",n),this.toggleNativeControls(!0),!1}},createIcon(n,e){const t="http://www.w3.org/2000/svg",i=Rt.getIconUrl.call(this),s="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),r=document.createElementNS(t,"svg");CC(r,ws(e,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(t,"use"),a="".concat(s,"-").concat(n);return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),r.appendChild(o),r},createLabel(n,e={}){const t=zs.get(n,this.config);return hn("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},t)},createBadge(n){if(ce.empty(n))return null;const e=hn("span",{class:this.config.classNames.menu.value});return e.appendChild(hn("span",{class:this.config.classNames.menu.badge},n)),e},createButton(n,e){const t=ws({},e);let i=WDe(n);const s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(t).includes(o)&&(s[o]=t[o],delete t[o])}),s.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(o=>o===this.config.classNames.control)||ws(t,{class:"".concat(t.class," ").concat(this.config.classNames.control)}):t.class=this.config.classNames.control,n){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":t.class+=" ".concat(this.config.classNames.control,"--overlaid"),i="play",s.label="play",s.icon="play";break;default:ce.empty(s.label)&&(s.label=i),ce.empty(s.icon)&&(s.icon=n)}const r=hn(s.element);return s.toggle?(r.appendChild(Rt.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),r.appendChild(Rt.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),r.appendChild(Rt.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),r.appendChild(Rt.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(r.appendChild(Rt.createIcon.call(this,s.icon)),r.appendChild(Rt.createLabel.call(this,s.label))),ws(t,rl(this.config.selectors.buttons[i],t)),CC(r,t),i==="play"?(ce.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(r)):this.elements.buttons[i]=r,r},createRange(n,e){const t=hn("input",ws(rl(this.config.selectors.inputs[n]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":zs.get(n,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[n]=t,Rt.updateRangeFill.call(this,t),vDe.setup(t),t},createProgress(n,e){const t=hn("progress",ws(rl(this.config.selectors.display[n]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(n!=="volume"){t.appendChild(hn("span",null,"0"));const i={played:"played",buffer:"buffered"}[n],s=i?zs.get(i,this.config):"";t.innerText="% ".concat(s.toLowerCase())}return this.elements.display[n]=t,t},createTime(n,e){const t=rl(this.config.selectors.display[n],e),i=hn("div",ws(t,{class:"".concat(t.class?t.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":zs.get(n,this.config),role:"timer"}),"00:00");return this.elements.display[n]=i,i},bindMenuItemShortcuts(n,e){ii.call(this,n,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const i=zu(n,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(t.key))Rt.showMenuPanel.call(this,e,!0);else{let s;t.key!==" "&&(t.key==="ArrowDown"||i&&t.key==="ArrowRight"?(s=n.nextElementSibling,ce.element(s)||(s=n.parentNode.firstElementChild)):(s=n.previousElementSibling,ce.element(s)||(s=n.parentNode.lastElementChild)),jk.call(this,s,!0))}},!1),ii.call(this,n,"keyup",t=>{t.key==="Return"&&Rt.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:n,list:e,type:t,title:i,badge:s=null,checked:r=!1}){const o=rl(this.config.selectors.inputs[t]),a=hn("button",ws(o,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(o.class?o.class:"").trim(),"aria-checked":r,value:n})),l=hn("span");l.innerHTML=i,ce.element(s)&&l.appendChild(s),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(c){c&&Array.from(a.parentNode.children).filter(d=>zu(d,'[role="menuitemradio"]')).forEach(d=>d.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",c?"true":"false")}}),this.listeners.bind(a,"click keyup",c=>{if(!ce.keyboardEvent(c)||c.key===" "){switch(c.preventDefault(),c.stopPropagation(),a.checked=!0,t){case"language":this.currentTrack=Number(n);break;case"quality":this.quality=n;break;case"speed":this.speed=parseFloat(n)}Rt.showMenuPanel.call(this,"home",ce.keyboardEvent(c))}},t,!1),Rt.bindMenuItemShortcuts.call(this,a,t),e.appendChild(a)},formatTime(n=0,e=!1){return ce.number(n)?s_(n,xH(this.duration)>0,e):n},updateTimeDisplay(n=null,e=0,t=!1){ce.element(n)&&ce.number(e)&&(n.innerText=Rt.formatTime(e,t))},updateVolume(){this.supported.ui&&(ce.element(this.elements.inputs.volume)&&Rt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),ce.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(n,e=0){ce.element(n)&&(n.value=e,Rt.updateRangeFill.call(this,n))},updateProgress(n){if(!this.supported.ui||!ce.event(n))return;let e=0;const t=(i,s)=>{const r=ce.number(s)?s:0,o=ce.element(i)?i:this.elements.display.buffer;if(ce.element(o)){o.value=r;const a=o.getElementsByTagName("span")[0];ce.element(a)&&(a.childNodes[0].nodeValue=r)}};if(n)switch(n.type){case"timeupdate":case"seeking":case"seeked":e=jDe(this.currentTime,this.duration),n.type==="timeupdate"&&Rt.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(n){const e=ce.event(n)?n.target:n;if(ce.element(e)&&e.getAttribute("type")==="range"){if(zu(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=Rt.formatTime(this.currentTime),i=Rt.formatTime(this.duration),s=zs.get("seekLabel",this.config);e.setAttribute("aria-valuetext",s.replace("{currentTime}",t).replace("{duration}",i))}else if(zu(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext","".concat(t.toFixed(1),"%"))}else e.setAttribute("aria-valuenow",e.value);(Gs.isWebKit||Gs.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(n){var e,t;if(!this.config.tooltips.seek||!ce.element(this.elements.inputs.seek)||!ce.element(this.elements.display.seekTooltip)||this.duration===0)return;const i=this.elements.display.seekTooltip,s="".concat(this.config.classNames.tooltip,"--visible"),r=d=>yi(i,s,d);if(this.touch)return void r(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(ce.event(n))o=100/a.width*(n.pageX-a.left);else{if(!pw(i,s))return;o=parseFloat(i.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;i.innerText=Rt.formatTime(l);const c=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.find(({time:d})=>d===Math.round(l));c&&i.insertAdjacentHTML("afterbegin","".concat(c.label,"<br>")),i.style.left="".concat(o,"%"),ce.event(n)&&["mouseenter","mouseleave"].includes(n.type)&&r(n.type==="mouseenter")},timeUpdate(n){const e=!ce.element(this.elements.display.duration)&&this.config.invertTime;Rt.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),n&&n.type==="timeupdate"&&this.media.seeking||Rt.updateProgress.call(this,n)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Pu(this.elements.display.currentTime,!0),void Pu(this.elements.progress,!0);ce.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const n=ce.element(this.elements.display.duration);!n&&this.config.displayDuration&&this.paused&&Rt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),n&&Rt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Rt.setMarkers.call(this),Rt.updateSeekTooltip.call(this)},toggleMenuButton(n,e){Pu(this.elements.settings.buttons[n],!e)},updateSetting(n,e,t){const i=this.elements.settings.panels[n];let s=null,r=e;if(n==="captions")s=this.currentTrack;else{if(s=ce.empty(t)?this[n]:t,ce.empty(s)&&(s=this.config[n].default),!ce.empty(this.options[n])&&!this.options[n].includes(s))return void this.debug.warn("Unsupported value of '".concat(s,"' for ").concat(n));if(!this.config[n].options.includes(s))return void this.debug.warn("Disabled value of '".concat(s,"' for ").concat(n))}if(ce.element(r)||(r=i&&i.querySelector('[role="menu"]')),!ce.element(r))return;this.elements.settings.buttons[n].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=Rt.getLabel.call(this,n,s);const o=r&&r.querySelector('[value="'.concat(s,'"]'));ce.element(o)&&(o.checked=!0)},getLabel(n,e){switch(n){case"speed":return e===1?zs.get("normal",this.config):"".concat(e,"&times;");case"quality":if(ce.number(e)){const t=zs.get("qualityLabel.".concat(e),this.config);return t.length?t:"".concat(e,"p")}return vH(e);case"captions":return oi.getLabel.call(this);default:return null}},setQualityMenu(n){if(!ce.element(this.elements.settings.panels.quality))return;const e="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');ce.array(n)&&(this.options.quality=SC(n).filter(r=>this.config.quality.options.includes(r)));const i=!ce.empty(this.options.quality)&&this.options.quality.length>1;if(Rt.toggleMenuButton.call(this,e,i),Yv(t),Rt.checkMenu.call(this),!i)return;const s=r=>{const o=zs.get("qualityBadge.".concat(r),this.config);return o.length?Rt.createBadge.call(this,o):null};this.options.quality.sort((r,o)=>{const a=this.config.quality.options;return a.indexOf(r)>a.indexOf(o)?1:-1}).forEach(r=>{Rt.createMenuItem.call(this,{value:r,list:t,type:e,title:Rt.getLabel.call(this,"quality",r),badge:s(r)})}),Rt.updateSetting.call(this,e,t)},setCaptionsMenu(){if(!ce.element(this.elements.settings.panels.captions))return;const n="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=oi.getTracks.call(this),i=!!t.length;if(Rt.toggleMenuButton.call(this,n,i),Yv(e),Rt.checkMenu.call(this),!i)return;const s=t.map((r,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:oi.getLabel.call(this,r),badge:r.language&&Rt.createBadge.call(this,r.language.toUpperCase()),list:e,type:"language"}));s.unshift({value:-1,checked:!this.captions.toggled,title:zs.get("disabled",this.config),list:e,type:"language"}),s.forEach(Rt.createMenuItem.bind(this)),Rt.updateSetting.call(this,n,e)},setSpeedMenu(){if(!ce.element(this.elements.settings.panels.speed))return;const n="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(i=>i>=this.minimumSpeed&&i<=this.maximumSpeed);const t=!ce.empty(this.options.speed)&&this.options.speed.length>1;Rt.toggleMenuButton.call(this,n,t),Yv(e),Rt.checkMenu.call(this),t&&(this.options.speed.forEach(i=>{Rt.createMenuItem.call(this,{value:i,list:e,type:n,title:Rt.getLabel.call(this,"speed",i)})}),Rt.updateSetting.call(this,n,e))},checkMenu(){const{buttons:n}=this.elements.settings,e=!ce.empty(n)&&Object.values(n).some(t=>!t.hidden);Pu(this.elements.settings.menu,!e)},focusFirstMenuItem(n,e=!1){if(this.elements.settings.popup.hidden)return;let t=n;ce.element(t)||(t=Object.values(this.elements.settings.panels).find(s=>!s.hidden));const i=t.querySelector('[role^="menuitem"]');jk.call(this,i,e)},toggleMenu(n){const{popup:e}=this.elements.settings,t=this.elements.buttons.settings;if(!ce.element(e)||!ce.element(t))return;const{hidden:i}=e;let s=i;if(ce.boolean(n))s=n;else if(ce.keyboardEvent(n)&&n.key==="Escape")s=!1;else if(ce.event(n)){const r=ce.function(n.composedPath)?n.composedPath()[0]:n.target,o=e.contains(r);if(o||!o&&n.target!==t&&s)return}t.setAttribute("aria-expanded",s),Pu(e,!s),yi(this.elements.container,this.config.classNames.menu.open,s),s&&ce.keyboardEvent(n)?Rt.focusFirstMenuItem.call(this,null,!0):s||i||jk.call(this,t,ce.keyboardEvent(n))},getMenuSize(n){const e=n.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),n.parentNode.appendChild(e);const t=e.scrollWidth,i=e.scrollHeight;return gc(e),{width:t,height:i}},showMenuPanel(n="",e=!1){const t=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(n));if(!ce.element(t))return;const i=t.parentNode,s=Array.from(i.children).find(r=>!r.hidden);if(xs.transitions&&!xs.reducedMotion){i.style.width="".concat(s.scrollWidth,"px"),i.style.height="".concat(s.scrollHeight,"px");const r=Rt.getMenuSize.call(this,t),o=a=>{a.target===i&&["width","height"].includes(a.propertyName)&&(i.style.width="",i.style.height="",i_.call(this,i,TC,o))};ii.call(this,i,TC,o),i.style.width="".concat(r.width,"px"),i.style.height="".concat(r.height,"px")}Pu(s,!0),Pu(t,!1),Rt.focusFirstMenuItem.call(this,t,e)},setDownloadUrl(){const n=this.elements.buttons.download;ce.element(n)&&n.setAttribute("href",this.download)},create(n){const{bindMenuItemShortcuts:e,createButton:t,createProgress:i,createRange:s,createTime:r,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=Rt;this.elements.controls=null,ce.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const c=hn("div",rl(this.config.selectors.controls.wrapper));this.elements.controls=c;const d={class:"plyr__controls__item"};return SC(ce.array(this.config.controls)?this.config.controls:[]).forEach(u=>{if(u==="restart"&&c.appendChild(t.call(this,"restart",d)),u==="rewind"&&c.appendChild(t.call(this,"rewind",d)),u==="play"&&c.appendChild(t.call(this,"play",d)),u==="fast-forward"&&c.appendChild(t.call(this,"fast-forward",d)),u==="progress"){const h=hn("div",{class:"".concat(d.class," plyr__progress__container")}),f=hn("div",rl(this.config.selectors.progress));if(f.appendChild(s.call(this,"seek",{id:"plyr-seek-".concat(n.id)})),f.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const m=hn("span",{class:this.config.classNames.tooltip},"00:00");f.appendChild(m),this.elements.display.seekTooltip=m}this.elements.progress=f,h.appendChild(this.elements.progress),c.appendChild(h)}if(u==="current-time"&&c.appendChild(r.call(this,"currentTime",d)),u==="duration"&&c.appendChild(r.call(this,"duration",d)),u==="mute"||u==="volume"){let{volume:h}=this.elements;if(ce.element(h)&&c.contains(h)||(h=hn("div",ws({},d,{class:"".concat(d.class," plyr__volume").trim()})),this.elements.volume=h,c.appendChild(h)),u==="mute"&&h.appendChild(t.call(this,"mute")),u==="volume"&&!Gs.isIos&&!Gs.isIPadOS){const f={max:1,step:.05,value:this.config.volume};h.appendChild(s.call(this,"volume",ws(f,{id:"plyr-volume-".concat(n.id)})))}}if(u==="captions"&&c.appendChild(t.call(this,"captions",d)),u==="settings"&&!ce.empty(this.config.settings)){const h=hn("div",ws({},d,{class:"".concat(d.class," plyr__menu").trim(),hidden:""}));h.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(n.id),"aria-expanded":!1}));const f=hn("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(n.id),hidden:""}),m=hn("div"),g=hn("div",{id:"plyr-settings-".concat(n.id,"-home")}),b=hn("div",{role:"menu"});g.appendChild(b),m.appendChild(g),this.elements.settings.panels.home=g,this.config.settings.forEach(w=>{const x=hn("button",ws(rl(this.config.selectors.buttons.settings),{type:"button",class:"".concat(this.config.classNames.control," ").concat(this.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,x,w),ii.call(this,x,"click",()=>{l.call(this,w,!1)});const k=hn("span",null,zs.get(w,this.config)),E=hn("span",{class:this.config.classNames.menu.value});E.innerHTML=n[w],k.appendChild(E),x.appendChild(k),b.appendChild(x);const T=hn("div",{id:"plyr-settings-".concat(n.id,"-").concat(w),hidden:""}),P=hn("button",{type:"button",class:"".concat(this.config.classNames.control," ").concat(this.config.classNames.control,"--back")});P.appendChild(hn("span",{"aria-hidden":!0},zs.get(w,this.config))),P.appendChild(hn("span",{class:this.config.classNames.hidden},zs.get("menuBack",this.config))),ii.call(this,T,"keydown",C=>{C.key==="ArrowLeft"&&(C.preventDefault(),C.stopPropagation(),l.call(this,"home",!0))},!1),ii.call(this,P,"click",()=>{l.call(this,"home",!1)}),T.appendChild(P),T.appendChild(hn("div",{role:"menu"})),m.appendChild(T),this.elements.settings.buttons[w]=x,this.elements.settings.panels[w]=T}),f.appendChild(m),h.appendChild(f),c.appendChild(h),this.elements.settings.popup=f,this.elements.settings.menu=h}if(u==="pip"&&xs.pip&&c.appendChild(t.call(this,"pip",d)),u==="airplay"&&xs.airplay&&c.appendChild(t.call(this,"airplay",d)),u==="download"){const h=ws({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(h.download="");const{download:f}=this.config.urls;!ce.url(f)&&this.isEmbed&&ws(h,{icon:"logo-".concat(this.provider),label:this.provider}),c.appendChild(t.call(this,"download",h))}u==="fullscreen"&&c.appendChild(t.call(this,"fullscreen",d))}),this.isHTML5&&o.call(this,Cd.getQualityOptions.call(this)),a.call(this),c},inject(){if(this.config.loadSprite){const s=Rt.getIconUrl.call(this);s.cors&&wH(s.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let n=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;ce.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),ce.element(this.config.controls)||ce.string(this.config.controls)?n=this.config.controls:(n=Rt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:oi.getLabel.call(this)}),t=!1);let i;if(t&&ce.string(this.config.controls)&&(n=(s=>{let r=s;return Object.entries(e).forEach(([o,a])=>{r=Lg(r,"{".concat(o,"}"),a)}),r})(n)),ce.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),ce.element(i)||(i=this.elements.container),i[ce.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),ce.element(this.elements.controls)||Rt.findElements.call(this),!ce.empty(this.elements.buttons)){const s=r=>{const o=this.config.classNames.controlPressed;r.setAttribute("aria-pressed","false"),Object.defineProperty(r,"pressed",{configurable:!0,enumerable:!0,get:()=>pw(r,o),set(a=!1){yi(r,o,a),r.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(r=>{ce.array(r)||ce.nodeList(r)?Array.from(r).filter(Boolean).forEach(s):s(r)})}if(Gs.isEdge&&uH(i),this.config.tooltips.controls){const{classNames:s,selectors:r}=this.config,o="".concat(r.controls.wrapper," ").concat(r.labels," .").concat(s.hidden),a=P0.call(this,o);Array.from(a).forEach(l=>{yi(l,this.config.classNames.hidden,!1),yi(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(n){}},setMarkers(){var n,e;if(!this.duration||this.elements.markers)return;const t=(n=this.config.markers)===null||n===void 0||(e=n.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(t==null||!t.length)return;const i=document.createDocumentFragment(),s=document.createDocumentFragment();let r=null;const o="".concat(this.config.classNames.tooltip,"--visible"),a=l=>yi(r,o,l);t.forEach(l=>{const c=hn("span",{class:this.config.classNames.marker},""),d=l.time/this.duration*100+"%";r&&(c.addEventListener("mouseenter",()=>{l.label||(r.style.left=d,r.innerHTML=l.label,a(!0))}),c.addEventListener("mouseleave",()=>{a(!1)})),c.addEventListener("click",()=>{this.currentTime=l.time}),c.style.left=d,s.appendChild(c)}),i.appendChild(s),this.config.tooltips.seek||(r=hn("span",{class:this.config.classNames.tooltip},""),i.appendChild(r)),this.elements.markers={points:s,tip:r},this.elements.progress.appendChild(i)}};function _H(n,e=!0){let t=n;if(e){const i=document.createElement("a");i.href=t,t=i.href}try{return new URL(t)}catch(i){return null}}function kH(n){const e=new URLSearchParams;return ce.object(n)&&Object.entries(n).forEach(([t,i])=>{e.set(t,i)}),e}const oi={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!xs.textTracks)return void(ce.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Rt.setCaptionsMenu.call(this));if(ce.element(this.elements.captions)||(this.elements.captions=hn("div",rl(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),NDe(this.elements.captions,this.elements.wrapper)),Gs.isIE&&window.URL){const i=this.media.querySelectorAll("track");Array.from(i).forEach(s=>{const r=s.getAttribute("src"),o=_H(r);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&Rb(r,"blob").then(a=>{s.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{gc(s)})})}const n=SC((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(i=>i.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=n);let t=this.storage.get("captions");if(ce.boolean(t)||({active:t}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:t,language:e,languages:n}),this.isHTML5){const i=this.config.captions.update?"addtrack removetrack":"removetrack";ii.call(this,this.media.textTracks,i,oi.update.bind(this))}setTimeout(oi.update.bind(this),0)},update(){const n=oi.getTracks.call(this,!0),{active:e,language:t,meta:i,currentTrackNode:s}=this.captions,r=!!n.find(o=>o.language===t);this.isHTML5&&this.isVideo&&n.filter(o=>!i.get(o)).forEach(o=>{this.debug.log("Track added",o),i.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),ii.call(this,o,"cuechange",()=>oi.updateCues.call(this))}),(r&&this.language!==t||!n.includes(s))&&(oi.setLanguage.call(this,t),oi.toggle.call(this,e&&r)),this.elements&&yi(this.elements.container,this.config.classNames.captions.enabled,!ce.empty(n)),ce.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Rt.setCaptionsMenu.call(this)},toggle(n,e=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,i=this.config.classNames.captions.active,s=ce.nullOrUndefined(n)?!t:n;if(s!==t){if(e||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!e){const r=oi.getTracks.call(this),o=oi.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void oi.set.call(this,r.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),yi(this.elements.container,i,s),this.captions.toggled=s,Rt.updateSetting.call(this,"captions"),pn.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout(()=>{s&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(n,e=!0){const t=oi.getTracks.call(this);if(n!==-1)if(ce.number(n))if(n in t){if(this.captions.currentTrack!==n){this.captions.currentTrack=n;const i=t[n],{language:s}=i||{};this.captions.currentTrackNode=i,Rt.updateSetting.call(this,"captions"),e||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),pn.call(this,this.media,"languagechange")}oi.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&oi.updateCues.call(this)}else this.debug.warn("Track not found",n);else this.debug.warn("Invalid caption argument",n);else oi.toggle.call(this,!1,e)},setLanguage(n,e=!0){if(!ce.string(n))return void this.debug.warn("Invalid language argument",n);const t=n.toLowerCase();this.captions.language=t;const i=oi.getTracks.call(this),s=oi.findTrack.call(this,[t]);oi.set.call(this,i.indexOf(s),e)},getTracks(n=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||n||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(n,e=!1){const t=oi.getTracks.call(this),i=o=>Number((this.captions.meta.get(o)||{}).default),s=Array.from(t).sort((o,a)=>i(a)-i(o));let r;return n.every(o=>(r=s.find(a=>a.language===o),!r)),r||(e?s[0]:void 0)},getCurrentTrack(){return oi.getTracks.call(this)[this.currentTrack]},getLabel(n){let e=n;return!ce.track(e)&&xs.textTracks&&this.captions.toggled&&(e=oi.getCurrentTrack.call(this)),ce.track(e)?ce.empty(e.label)?ce.empty(e.language)?zs.get("enabled",this.config):n.language.toUpperCase():e.label:zs.get("disabled",this.config)},updateCues(n){if(!this.supported.ui)return;if(!ce.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!ce.nullOrUndefined(n)&&!Array.isArray(n))return void this.debug.warn("updateCues: Invalid input",n);let e=n;if(!e){const i=oi.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map(s=>s.getCueAsHTML()).map(KDe)}const t=e.map(i=>i.trim()).join("\n");if(t!==this.elements.captions.innerHTML){Yv(this.elements.captions);const i=hn("span",rl(this.config.selectors.caption));i.innerHTML=t,this.elements.captions.appendChild(i),pn.call(this,this.media,"cuechange")}}},EH={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Gk={active:"picture-in-picture",inactive:"inline"},bd={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Wk={audio:"audio",video:"video"};function QDe(n){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(n)?bd.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(n)?bd.vimeo:null}const qk=()=>{};class ZDe{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):qk}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):qk}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):qk}}class da{constructor(e){Ot(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;ce.element(t)&&(t.pressed=this.active);const i=this.target===this.player.media?this.target:this.player.elements.container;pn.call(this.player,i,this.active?"enterfullscreen":"exitfullscreen",!0)}),Ot(this,"toggleFallback",(t=!1)=>{var i,s;if(t?this.scrollPosition={x:(i=window.scrollX)!=null?i:0,y:(s=window.scrollY)!=null?s:0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",yi(this.target,this.player.config.classNames.fullscreen.fallback,t),Gs.isIos){let r=document.head.querySelector('meta[name="viewport"]');const o="viewport-fit=cover";r||(r=document.createElement("meta"),r.setAttribute("name","viewport"));const a=ce.string(r.content)&&r.content.includes(o);t?(this.cleanupViewport=!a,a||(r.content+=",".concat(o))):this.cleanupViewport&&(r.content=r.content.split(",").filter(l=>l.trim()!==o).join(","))}this.onChange()}),Ot(this,"trapFocus",t=>{if(Gs.isIos||Gs.isIPadOS||!this.active||t.key!=="Tab")return;const i=document.activeElement,s=P0.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[r]=s,o=s[s.length-1];i!==o||t.shiftKey?i===r&&t.shiftKey&&(o.focus(),t.preventDefault()):(r.focus(),t.preventDefault())}),Ot(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":da.nativeSupported?"Native":"Fallback",this.player.debug.log("".concat(t," fullscreen enabled"))}else this.player.debug.log("Fullscreen not supported and fallback disabled");yi(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Ot(this,"enter",()=>{this.supported&&(Gs.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!da.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?ce.empty(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}),Ot(this,"exit",()=>{if(this.supported)if(Gs.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),gl(this.player.play());else if(!da.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!ce.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document["".concat(this.prefix).concat(t).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Ot(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=da.prefix,this.property=da.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&FDe(this.player.elements.container,e.config.fullscreen.container),ii.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),()=>{this.onChange()}),ii.call(this.player,this.player.elements.container,"dblclick",t=>{ce.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),ii.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return da.nativeSupported&&!this.forceFallback}static get prefix(){if(ce.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!ce.function(document["".concat(t,"ExitFullscreen")])&&!ce.function(document["".concat(t,"CancelFullScreen")]))&&(e=t,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,da.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||da.nativeSupported||!Gs.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!da.nativeSupported||this.forceFallback)return pw(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()["".concat(this.prefix).concat(this.property,"Element")]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){var e;return Gs.isIos&&this.player.config.fullscreen.iosNative?this.player.media:(e=this.player.elements.fullscreen)!=null?e:this.player.elements.container}}function Xv(n,e=1){return new Promise((t,i)=>{const s=new Image,r=()=>{delete s.onload,delete s.onerror,(s.naturalWidth>=e?t:i)(s)};Object.assign(s,{onload:r,onerror:r,src:n})})}const Si={addStyleHook(){yi(this.elements.container,this.config.selectors.container.replace(".",""),!0),yi(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(n=!1){n&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void Si.toggleNativeControls.call(this,!0);ce.element(this.elements.controls)||(Rt.inject.call(this),this.listeners.controls()),Si.toggleNativeControls.call(this),this.isHTML5&&oi.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Rt.updateVolume.call(this),Rt.timeUpdate.call(this),Rt.durationUpdate.call(this),Si.checkPlaying.call(this),yi(this.elements.container,this.config.classNames.pip.supported,xs.pip&&this.isHTML5&&this.isVideo),yi(this.elements.container,this.config.classNames.airplay.supported,xs.airplay&&this.isHTML5),yi(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{pn.call(this,this.media,"ready")},0),Si.setTitle.call(this),this.poster&&Si.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&Rt.durationUpdate.call(this),this.config.mediaMetadata&&Rt.setMediaMetadata.call(this)},setTitle(){let n=zs.get("play",this.config);if(ce.string(this.config.title)&&!ce.empty(this.config.title)&&(n+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",n)}),this.isEmbed){const e=$s.call(this,"iframe");if(!ce.element(e))return;const t=ce.empty(this.config.title)?"video":this.config.title,i=zs.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",t))}},togglePoster(n){yi(this.elements.container,this.config.classNames.posterEnabled,n)},setPoster(n,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",n),this.elements.poster.removeAttribute("hidden"),UDe.call(this).then(()=>Xv(n)).catch(t=>{throw n===this.poster&&Si.togglePoster.call(this,!1),t}).then(()=>{if(n!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:"url('".concat(n,"')"),backgroundSize:""}),Si.togglePoster.call(this,!0),n)))},checkPlaying(n){yi(this.elements.container,this.config.classNames.playing,this.playing),yi(this.elements.container,this.config.classNames.paused,this.paused),yi(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",zs.get(this.playing?"pause":"play",this.config))}),ce.event(n)&&n.type==="timeupdate"||Si.toggleControls.call(this)},checkLoading(n){this.loading=["stalled","waiting"].includes(n.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{yi(this.elements.container,this.config.classNames.loading,this.loading),Si.toggleControls.call(this)},this.loading?250:0)},toggleControls(n){const{controls:e}=this.elements;if(e&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(n||this.loading||this.paused||e.pressed||e.hover||t))}},migrateStyles(){Object.values({...this.media.style}).filter(n=>!ce.empty(n)&&ce.string(n)&&n.startsWith("--plyr")).forEach(n=>{this.elements.container.style.setProperty(n,this.media.style.getPropertyValue(n)),this.media.style.removeProperty(n)}),ce.empty(this.media.style)&&this.media.removeAttribute("style")}};class JDe{constructor(e){Ot(this,"firstTouch",()=>{const{player:t}=this,{elements:i}=t;t.touch=!0,yi(i.container,t.config.classNames.isTouch,!0)}),Ot(this,"global",(t=!0)=>{const{player:i}=this;i.config.keyboard.global&&R0.call(i,window,"keydown keyup",this.handleKey,t,!1),R0.call(i,document.body,"click",this.toggleMenu,t),G3.call(i,document.body,"touchstart",this.firstTouch)}),Ot(this,"container",()=>{const{player:t}=this,{config:i,elements:s,timers:r}=t;!i.keyboard.global&&i.keyboard.focused&&ii.call(t,s.container,"keydown keyup",this.handleKey,!1),ii.call(t,s.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:c}=s;c&&l.type==="enterfullscreen"&&(c.pressed=!1,c.hover=!1);let d=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Si.toggleControls.call(t,!0),d=t.touch?3e3:2e3),clearTimeout(r.controls),r.controls=setTimeout(()=>Si.toggleControls.call(t,!1),d)});const o=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const l=s.wrapper,{active:c}=t.fullscreen,[d,u]=W3.call(t),h=mH("aspect-ratio: ".concat(d," / ").concat(u));if(!c)return void(h?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[f,m]=zDe(),g=f/m>d/u;h?(l.style.width=g?"auto":"100%",l.style.height=g?"100%":"auto"):(l.style.maxWidth=g?m/u*d+"px":null,l.style.margin=g?"0 auto":null)},a=()=>{clearTimeout(r.resized),r.resized=setTimeout(o,50)};ii.call(t,s.container,"enterfullscreen exitfullscreen",l=>{const{target:c}=t.fullscreen;c===s.container&&(!t.isEmbed&&ce.empty(t.config.ratio)||(o(),(l.type==="enterfullscreen"?ii:i_).call(t,window,"resize",a)))})}),Ot(this,"media",()=>{const{player:t}=this,{elements:i}=t;if(ii.call(t,t.media,"timeupdate seeking seeked",r=>Rt.timeUpdate.call(t,r)),ii.call(t,t.media,"durationchange loadeddata loadedmetadata",r=>Rt.durationUpdate.call(t,r)),ii.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),ii.call(t,t.media,"progress playing seeking seeked",r=>Rt.updateProgress.call(t,r)),ii.call(t,t.media,"volumechange",r=>Rt.updateVolume.call(t,r)),ii.call(t,t.media,"playing play pause ended emptied timeupdate",r=>Si.checkPlaying.call(t,r)),ii.call(t,t.media,"waiting canplay seeked playing",r=>Si.checkLoading.call(t,r)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const r=$s.call(t,".".concat(t.config.classNames.video));if(!ce.element(r))return;ii.call(t,i.container,"click",o=>{([i.container,r].includes(o.target)||r.contains(o.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(o,t.restart,"restart"),this.proxy(o,()=>{gl(t.play())},"play")):this.proxy(o,()=>{gl(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&ii.call(t,i.wrapper,"contextmenu",r=>{r.preventDefault()},!1),ii.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),ii.call(t,t.media,"ratechange",()=>{Rt.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),ii.call(t,t.media,"qualitychange",r=>{Rt.updateSetting.call(t,"quality",null,r.detail.quality)}),ii.call(t,t.media,"ready qualitychange",()=>{Rt.setDownloadUrl.call(t)});const s=t.config.events.concat(["keyup","keydown"]).join(" ");ii.call(t,t.media,s,r=>{let{detail:o={}}=r;r.type==="error"&&(o=t.media.error),pn.call(t,i.container,r.type,!0,o)})}),Ot(this,"proxy",(t,i,s)=>{const{player:r}=this,o=r.config.listeners[s];let a=!0;ce.function(o)&&(a=o.call(r,t)),a!==!1&&ce.function(i)&&i.call(r,t)}),Ot(this,"bind",(t,i,s,r,o=!0)=>{const{player:a}=this,l=a.config.listeners[r],c=ce.function(l);ii.call(a,t,i,d=>this.proxy(d,s,r),o&&!c)}),Ot(this,"controls",()=>{const{player:t}=this,{elements:i}=t,s=Gs.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(r=>{this.bind(r,"click",()=>{gl(t.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(i.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{pn.call(t,t.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",r=>{r.stopPropagation(),r.preventDefault(),Rt.toggleMenu.call(t,r)},null,!1),this.bind(i.buttons.settings,"keyup",r=>{[" ","Enter"].includes(r.key)&&(r.key!=="Enter"?(r.preventDefault(),r.stopPropagation(),Rt.toggleMenu.call(t,r)):Rt.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(i.settings.menu,"keydown",r=>{r.key==="Escape"&&Rt.toggleMenu.call(t,r)}),this.bind(i.inputs.seek,"mousedown mousemove",r=>{const o=i.progress.getBoundingClientRect(),a=100/o.width*(r.pageX-o.left);r.currentTarget.setAttribute("seek-value",a)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",r=>{const o=r.currentTarget,a="play-on-seeked";if(ce.keyboardEvent(r)&&!["ArrowLeft","ArrowRight"].includes(r.key))return;t.lastSeekTime=Date.now();const l=o.hasAttribute(a),c=["mouseup","touchend","keyup"].includes(r.type);l&&c?(o.removeAttribute(a),gl(t.play())):!c&&t.playing&&(o.setAttribute(a,""),t.pause())}),Gs.isIos){const r=P0.call(t,'input[type="range"]');Array.from(r).forEach(o=>this.bind(o,s,a=>uH(a.target)))}this.bind(i.inputs.seek,s,r=>{const o=r.currentTarget;let a=o.getAttribute("seek-value");ce.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),t.currentTime=a/o.max*t.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",r=>Rt.updateSeekTooltip.call(t,r)),this.bind(i.progress,"mousemove touchmove",r=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.startMove(r)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:r}=t;r&&r.loaded&&r.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",r=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.startScrubbing(r)}),this.bind(i.progress,"mouseup touchend",r=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.endScrubbing(r)}),Gs.isWebKit&&Array.from(P0.call(t,'input[type="range"]')).forEach(r=>{this.bind(r,"input",o=>Rt.updateRangeFill.call(t,o.target))}),t.config.toggleInvert&&!ce.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,Rt.timeUpdate.call(t))}),this.bind(i.inputs.volume,s,r=>{t.volume=r.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",r=>{i.controls.hover=!t.touch&&r.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(r=>!r.contains(i.container)).forEach(r=>{this.bind(r,"mouseenter mouseleave",o=>{i.controls&&(i.controls.hover=!t.touch&&o.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",r=>{i.controls.pressed=["mousedown","touchstart"].includes(r.type)}),this.bind(i.controls,"focusin",()=>{const{config:r,timers:o}=t;yi(i.controls,r.classNames.noTransition,!0),Si.toggleControls.call(t,!0),setTimeout(()=>{yi(i.controls,r.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>Si.toggleControls.call(t,!1),a)}),this.bind(i.inputs.volume,"wheel",r=>{const o=r.webkitDirectionInvertedFromDevice,[a,l]=[r.deltaX,-r.deltaY].map(u=>o?-u:u),c=Math.sign(Math.abs(a)>Math.abs(l)?a:l);t.increaseVolume(c/50);const{volume:d}=t.media;(c===1&&d<1||c===-1&&d>0)&&r.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:s,type:r,altKey:o,ctrlKey:a,metaKey:l,shiftKey:c}=e,d=r==="keydown",u=d&&s===this.lastKey;if(!(o||a||l||c)&&s){if(d){const f=document.activeElement;if(ce.element(f)){const{editable:m}=t.config.selectors,{seek:g}=i.inputs;if(f!==g&&zu(f,m)||e.key===" "&&zu(f,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":u||(h=parseInt(s,10),t.currentTime=t.duration/10*h);break;case" ":case"k":u||gl(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":u||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":u||t.toggleCaptions();break;case"l":t.loop=!t.loop}s==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null;var h}}toggleMenu(e){Rt.toggleMenu.call(this.player,e)}}function e9e(n,e){return n(e={exports:{}},e.exports),e.exports}var t9e=e9e(function(n,e){n.exports=function(){var t=function(){},i={},s={},r={};function o(h,f){h=h.push?h:[h];var m,g,b,w=[],x=h.length,k=x;for(m=function(E,T){T.length&&w.push(E),--k||f(w)};x--;)g=h[x],(b=s[g])?m(g,b):(r[g]=r[g]||[]).push(m)}function a(h,f){if(h){var m=r[h];if(s[h]=f,m)for(;m.length;)m[0](h,f),m.splice(0,1)}}function l(h,f){h.call&&(h={success:h}),f.length?(h.error||t)(f):(h.success||t)(h)}function c(h,f,m,g){var b,w,x=document,k=m.async,E=(m.numRetries||0)+1,T=m.before||t,P=h.replace(/[\?|#].*$/,""),C=h.replace(/^(css|img)!/,"");g=g||0,/(^css!|\.css$)/.test(P)?((w=x.createElement("link")).rel="stylesheet",w.href=C,(b="hideFocus"in w)&&w.relList&&(b=0,w.rel="preload",w.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(P)?(w=x.createElement("img")).src=C:((w=x.createElement("script")).src=h,w.async=k===void 0||k),w.onload=w.onerror=w.onbeforeload=function(A){var R=A.type[0];if(b)try{w.sheet.cssText.length||(R="e")}catch(M){M.code!=18&&(R="e")}if(R=="e"){if((g+=1)<E)return c(h,f,m,g)}else if(w.rel=="preload"&&w.as=="style")return w.rel="stylesheet";f(h,R,A.defaultPrevented)},T(h,w)!==!1&&x.head.appendChild(w)}function d(h,f,m){var g,b,w=(h=h.push?h:[h]).length,x=w,k=[];for(g=function(E,T,P){if(T=="e"&&k.push(E),T=="b"){if(!P)return;k.push(E)}--w||f(k)},b=0;b<x;b++)c(h[b],g,m)}function u(h,f,m){var g,b;if(f&&f.trim&&(g=f),b=(g?m:f)||{},g){if(g in i)throw"LoadJS";i[g]=!0}function w(x,k){d(h,function(E){l(b,E),x&&l({success:x,error:k},E),a(g,E)},b)}if(b.returnPromise)return new Promise(w);w()}return u.ready=function(h,f){return o(h,function(m){l(f,m)}),u},u.done=function(h){a(h,[])},u.reset=function(){i={},s={},r={}},u.isDefined=function(h){return h in i},u}()});function q3(n){return new Promise((e,t)=>{t9e(n,{success:e,error:t})})}function n9e(n){return ce.empty(n)?null:ce.number(Number(n))?n:n.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:n}function i9e(n){const e=n.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Wm(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,pn.call(this,this.media,n?"play":"pause"))}const PC={setup(){const n=this;yi(n.elements.wrapper,n.config.classNames.embed,!0),n.options.speed=n.config.speed.options,Mp.call(n),ce.object(window.Vimeo)?PC.ready.call(n):q3(n.config.urls.vimeo.sdk).then(()=>{PC.ready.call(n)}).catch(e=>{n.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const n=this,e=n.config.vimeo,{premium:t,referrerPolicy:i,...s}=e;let r=n.media.getAttribute("src"),o="";ce.empty(r)?(r=n.media.getAttribute(n.config.attributes.embed.id),o=n.media.getAttribute(n.config.attributes.embed.hash)):o=i9e(r);const a=o?{h:o}:{};t&&Object.assign(s,{controls:!1,sidedock:!1});const l=kH({loop:n.config.loop.active,autoplay:n.autoplay,muted:n.muted,gesture:"media",playsinline:n.config.playsinline,...a,...s}),c=n9e(r),d=hn("iframe"),u=AC(n.config.urls.vimeo.iframe,c,l);if(d.setAttribute("src",u),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),ce.empty(i)||d.setAttribute("referrerPolicy",i),t||!e.customControls)d.setAttribute("data-poster",n.poster),n.media=fw(d,n.media);else{const x=hn("div",{class:n.config.classNames.embedContainer,"data-poster":n.poster});x.appendChild(d),n.media=fw(x,n.media)}e.customControls||Rb(AC(n.config.urls.vimeo.api,u)).then(x=>{!ce.empty(x)&&x.thumbnail_url&&Si.setPoster.call(n,x.thumbnail_url).catch(()=>{})}),n.embed=new window.Vimeo.Player(d,{autopause:n.config.autopause,muted:n.muted}),n.media.paused=!0,n.media.currentTime=0,n.supported.ui&&n.embed.disableTextTrack(),n.media.play=()=>(Wm.call(n,!0),n.embed.play()),n.media.pause=()=>(Wm.call(n,!1),n.embed.pause()),n.media.stop=()=>{n.pause(),n.currentTime=0};let{currentTime:h}=n.media;Object.defineProperty(n.media,"currentTime",{get:()=>h,set(x){const{embed:k,media:E,paused:T,volume:P}=n,C=T&&!k.hasPlayed;E.seeking=!0,pn.call(n,E,"seeking"),Promise.resolve(C&&k.setVolume(0)).then(()=>k.setCurrentTime(x)).then(()=>C&&k.pause()).then(()=>C&&k.setVolume(P)).catch(()=>{})}});let f=n.config.speed.selected;Object.defineProperty(n.media,"playbackRate",{get:()=>f,set(x){n.embed.setPlaybackRate(x).then(()=>{f=x,pn.call(n,n.media,"ratechange")}).catch(()=>{n.options.speed=[1]})}});let{volume:m}=n.config;Object.defineProperty(n.media,"volume",{get:()=>m,set(x){n.embed.setVolume(x).then(()=>{m=x,pn.call(n,n.media,"volumechange")})}});let{muted:g}=n.config;Object.defineProperty(n.media,"muted",{get:()=>g,set(x){const k=!!ce.boolean(x)&&x;n.embed.setMuted(!!k||n.config.muted).then(()=>{g=k,pn.call(n,n.media,"volumechange")})}});let b,{loop:w}=n.config;Object.defineProperty(n.media,"loop",{get:()=>w,set(x){const k=ce.boolean(x)?x:n.config.loop.active;n.embed.setLoop(k).then(()=>{w=k})}}),n.embed.getVideoUrl().then(x=>{b=x,Rt.setDownloadUrl.call(n)}).catch(x=>{this.debug.warn(x)}),Object.defineProperty(n.media,"currentSrc",{get:()=>b}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration}),Promise.all([n.embed.getVideoWidth(),n.embed.getVideoHeight()]).then(x=>{const[k,E]=x;n.embed.ratio=bH(k,E),Mp.call(this)}),n.embed.setAutopause(n.config.autopause).then(x=>{n.config.autopause=x}),n.embed.getVideoTitle().then(x=>{n.config.title=x,Si.setTitle.call(this)}),n.embed.getCurrentTime().then(x=>{h=x,pn.call(n,n.media,"timeupdate")}),n.embed.getDuration().then(x=>{n.media.duration=x,pn.call(n,n.media,"durationchange")}),n.embed.getTextTracks().then(x=>{n.media.textTracks=x,oi.setup.call(n)}),n.embed.on("cuechange",({cues:x=[]})=>{const k=x.map(E=>qDe(E.text));oi.updateCues.call(n,k)}),n.embed.on("loaded",()=>{n.embed.getPaused().then(x=>{Wm.call(n,!x),x||pn.call(n,n.media,"playing")}),ce.element(n.embed.element)&&n.supported.ui&&n.embed.element.setAttribute("tabindex",-1)}),n.embed.on("bufferstart",()=>{pn.call(n,n.media,"waiting")}),n.embed.on("bufferend",()=>{pn.call(n,n.media,"playing")}),n.embed.on("play",()=>{Wm.call(n,!0),pn.call(n,n.media,"playing")}),n.embed.on("pause",()=>{Wm.call(n,!1)}),n.embed.on("timeupdate",x=>{n.media.seeking=!1,h=x.seconds,pn.call(n,n.media,"timeupdate")}),n.embed.on("progress",x=>{n.media.buffered=x.percent,pn.call(n,n.media,"progress"),parseInt(x.percent,10)===1&&pn.call(n,n.media,"canplaythrough"),n.embed.getDuration().then(k=>{k!==n.media.duration&&(n.media.duration=k,pn.call(n,n.media,"durationchange"))})}),n.embed.on("seeked",()=>{n.media.seeking=!1,pn.call(n,n.media,"seeked")}),n.embed.on("ended",()=>{n.media.paused=!0,pn.call(n,n.media,"ended")}),n.embed.on("error",x=>{n.media.error=x,pn.call(n,n.media,"error")}),e.customControls&&setTimeout(()=>Si.build.call(n),0)}};function s9e(n){return ce.empty(n)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n}function qm(n){n&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===n&&(this.media.paused=!n,pn.call(this,this.media,n?"play":"pause"))}function r9e(n){return n.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const Qv={setup(){if(yi(this.elements.wrapper,this.config.classNames.embed,!0),ce.object(window.YT)&&ce.function(window.YT.Player))Qv.ready.call(this);else{const n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{ce.function(n)&&n(),Qv.ready.call(this)},q3(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(n){Rb(AC(this.config.urls.youtube.api,n)).then(e=>{if(ce.object(e)){const{title:t,height:i,width:s}=e;this.config.title=t,Si.setTitle.call(this),this.embed.ratio=bH(s,i)}Mp.call(this)}).catch(()=>{Mp.call(this)})},ready(){const n=this,e=n.config.youtube,t=n.media&&n.media.getAttribute("id");if(!ce.empty(t)&&t.startsWith("youtube-"))return;let i=n.media.getAttribute("src");ce.empty(i)&&(i=n.media.getAttribute(this.config.attributes.embed.id));const s=s9e(i),r=hn("div",{id:HDe(n.provider),"data-poster":e.customControls?n.poster:void 0});if(n.media=fw(r,n.media),e.customControls){const o=a=>"https://i.ytimg.com/vi/".concat(s,"/").concat(a,"default.jpg");Xv(o("maxres"),121).catch(()=>Xv(o("sd"),121)).catch(()=>Xv(o("hq"))).then(a=>Si.setPoster.call(n,a.src)).then(a=>{a.includes("maxres")||(n.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}n.embed=new window.YT.Player(n.media,{videoId:s,host:r9e(e),playerVars:ws({},{autoplay:n.config.autoplay?1:0,hl:n.config.hl,controls:n.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:n.config.playsinline&&!n.config.fullscreen.iosNative?1:0,cc_load_policy:n.captions.active?1:0,cc_lang_pref:n.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(o){if(!n.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";n.media.error={code:a,message:l},pn.call(n,n.media,"error")}},onPlaybackRateChange(o){const a=o.target;n.media.playbackRate=a.getPlaybackRate(),pn.call(n,n.media,"ratechange")},onReady(o){if(ce.function(n.media.play))return;const a=o.target;Qv.getTitle.call(n,s),n.media.play=()=>{qm.call(n,!0),a.playVideo()},n.media.pause=()=>{qm.call(n,!1),a.pauseVideo()},n.media.stop=()=>{a.stopVideo()},n.media.duration=a.getDuration(),n.media.paused=!0,n.media.currentTime=0,Object.defineProperty(n.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(u){n.paused&&!n.embed.hasPlayed&&n.embed.mute(),n.media.seeking=!0,pn.call(n,n.media,"seeking"),a.seekTo(u)}}),Object.defineProperty(n.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(u){a.setPlaybackRate(u)}});let{volume:l}=n.config;Object.defineProperty(n.media,"volume",{get:()=>l,set(u){l=u,a.setVolume(100*l),pn.call(n,n.media,"volumechange")}});let{muted:c}=n.config;Object.defineProperty(n.media,"muted",{get:()=>c,set(u){const h=ce.boolean(u)?u:c;c=h,a[h?"mute":"unMute"](),a.setVolume(100*l),pn.call(n,n.media,"volumechange")}}),Object.defineProperty(n.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(n.media,"ended",{get:()=>n.currentTime===n.duration});const d=a.getAvailablePlaybackRates();n.options.speed=d.filter(u=>n.config.speed.options.includes(u)),n.supported.ui&&e.customControls&&n.media.setAttribute("tabindex",-1),pn.call(n,n.media,"timeupdate"),pn.call(n,n.media,"durationchange"),clearInterval(n.timers.buffering),n.timers.buffering=setInterval(()=>{n.media.buffered=a.getVideoLoadedFraction(),(n.media.lastBuffered===null||n.media.lastBuffered<n.media.buffered)&&pn.call(n,n.media,"progress"),n.media.lastBuffered=n.media.buffered,n.media.buffered===1&&(clearInterval(n.timers.buffering),pn.call(n,n.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>Si.build.call(n),50)},onStateChange(o){const a=o.target;switch(clearInterval(n.timers.playing),n.media.seeking&&[1,2].includes(o.data)&&(n.media.seeking=!1,pn.call(n,n.media,"seeked")),o.data){case-1:pn.call(n,n.media,"timeupdate"),n.media.buffered=a.getVideoLoadedFraction(),pn.call(n,n.media,"progress");break;case 0:qm.call(n,!1),n.media.loop?(a.stopVideo(),a.playVideo()):pn.call(n,n.media,"ended");break;case 1:e.customControls&&!n.config.autoplay&&n.media.paused&&!n.embed.hasPlayed?n.media.pause():(qm.call(n,!0),pn.call(n,n.media,"playing"),n.timers.playing=setInterval(()=>{pn.call(n,n.media,"timeupdate")},50),n.media.duration!==a.getDuration()&&(n.media.duration=a.getDuration(),pn.call(n,n.media,"durationchange")));break;case 2:n.muted||n.embed.unMute(),qm.call(n,!1);break;case 3:pn.call(n,n.media,"waiting")}pn.call(n,n.elements.container,"statechange",!1,{code:o.data})}}})}},TH={setup(){this.media?(yi(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),yi(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&yi(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=hn("div",{class:this.config.classNames.video}),fH(this.media,this.elements.wrapper),this.elements.poster=hn("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Cd.setup.call(this):this.isYouTube?Qv.setup.call(this):this.isVimeo&&PC.setup.call(this)):this.debug.warn("No media element found!")}};class o9e{constructor(e){Ot(this,"load",()=>{this.enabled&&(ce.object(window.google)&&ce.object(window.google.ima)?this.ready():q3(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Ot(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Ot(this,"setupIMA",()=>{this.elements.container=hn("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),Ot(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=t.offsetWidth,i.linearAdSlotHeight=t.offsetHeight,i.nonLinearAdSlotWidth=t.offsetWidth,i.nonLinearAdSlotHeight=t.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),Ot(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const i=s_(Math.max(this.manager.getRemainingTime(),0)),s="".concat(zs.get("advertisement",this.player.config)," - ").concat(i);this.elements.container.setAttribute("data-badge-text",s)},100)}),Ot(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=t.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s)),Object.keys(google.ima.AdEvent.Type).forEach(s=>{this.manager.addEventListener(google.ima.AdEvent.Type[s],r=>this.onAdEvent(r))}),this.trigger("loaded")}),Ot(this,"addCuePoints",()=>{ce.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const i=this.player.elements.progress;if(ce.element(i)){const s=100/this.player.duration*t,r=hn("span",{class:this.player.config.classNames.cues});r.style.left="".concat(s.toString(),"%"),i.appendChild(r)}}})}),Ot(this,"onAdEvent",t=>{const{container:i}=this.player.elements,s=t.getAd(),r=t.getAdData();switch((o=>{pn.call(this.player,this.player.media,"ads".concat(o.replace(/_/g,"").toLowerCase()))})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),s.isLinear()||(s.width=i.offsetWidth,s.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(r.adError.getMessage()))}}),Ot(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),Ot(this,"listeners",()=>{const{container:t}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const s=this.player.currentTime;ce.empty(this.cuePoints)||this.cuePoints.forEach((r,o)=>{i<r&&r<s&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),Ot(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),Ot(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,gl(this.player.media.play())}),Ot(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Ot(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Ot(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Ot(this,"trigger",(t,...i)=>{const s=this.events[t];ce.array(s)&&s.forEach(r=>{ce.function(r)&&r.apply(this,i)})}),Ot(this,"on",(t,i)=>(ce.array(this.events[t])||(this.events[t]=[]),this.events[t].push(i),this)),Ot(this,"startSafetyTimer",(t,i)=>{this.player.debug.log("Safety timer invoked from: ".concat(i)),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),Ot(this,"clearSafetyTimer",t=>{ce.nullOrUndefined(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(t)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,i)=>{this.on("loaded",t),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!ce.empty(e.publisherId)||ce.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return ce.url(e.tagUrl)?e.tagUrl:"https://go.aniview.com/api/adserver6/vast/?".concat(kH({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId}))}}function CH(n=0,e=0,t=255){return Math.min(Math.max(n,e),t)}const a9e=n=>{const e=[];return n.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const i={};t.split(/\r\n|\n|\r/).forEach(s=>{if(ce.number(i.startTime)){if(!ce.empty(s.trim())&&ce.empty(i.text)){const r=s.trim().split("#xywh=");[i.text]=r,r[1]&&([i.x,i.y,i.w,i.h]=r[1].split(","))}}else{const r=s.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);r&&(i.startTime=60*Number(r[1]||0)*60+60*Number(r[2])+Number(r[3])+Number("0.".concat(r[4])),i.endTime=60*Number(r[6]||0)*60+60*Number(r[7])+Number(r[8])+Number("0.".concat(r[9])))}}),i.text&&e.push(i)}),e},KL=(n,e)=>{const t={};return n>e.width/e.height?(t.width=e.width,t.height=1/n*e.width):(t.height=e.height,t.width=n*e.height),t};class RC{constructor(e){Ot(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Ot(this,"getThumbnails",()=>new Promise(t=>{const{src:i}=this.player.config.previewThumbnails;if(ce.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const s=()=>{this.thumbnails.sort((r,o)=>r.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(ce.function(i))i(r=>{this.thumbnails=r,s()});else{const r=(ce.string(i)?[i]:i).map(o=>this.getThumbnail(o));Promise.all(r).then(s)}})),Ot(this,"getThumbnail",t=>new Promise(i=>{Rb(t).then(s=>{const r={frames:a9e(s),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||r.frames[0].text.startsWith("http://")||r.frames[0].text.startsWith("https://")||(r.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{r.height=o.naturalHeight,r.width=o.naturalWidth,this.thumbnails.push(r),i()},o.src=r.urlPrefix+r.frames[0].text})})),Ot(this,"startMove",t=>{if(this.loaded&&ce.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,s;const r=this.player.elements.progress.getBoundingClientRect(),o=100/r.width*(t.pageX-r.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=s_(this.seekTime);const a=(i=this.player.config.markers)===null||i===void 0||(s=i.points)===null||s===void 0?void 0:s.find(({time:l})=>l===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin","".concat(a.label,"<br>"))}this.showImageAtCurrentTime()}}),Ot(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Ot(this,"startScrubbing",t=>{(ce.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Ot(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):G3.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Ot(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Ot(this,"render",()=>{this.elements.thumb.container=hn("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=hn("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=hn("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=hn("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),ce.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=hn("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Ot(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Ot(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(r=>this.seekTime>=r.startTime&&this.seekTime<=r.endTime),i=t>=0;let s=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((r,o)=>{this.loadedImages.includes(r.frames[t].text)&&(s=o)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(s)))}),Ot(this,"loadImage",(t=0)=>{const i=this.showingThumb,s=this.thumbnails[t],{urlPrefix:r}=s,o=s.frames[i],a=s.frames[i].text,l=r+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,t,i,a,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const c=new Image;c.src=l,c.dataset.index=i,c.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log("Loading image: ".concat(l)),c.onload=()=>this.showImage(c,o,t,i,a,!0),this.loadingImage=c,this.removeOldImages(c)}}),Ot(this,"showImage",(t,i,s,r,o,a=!0)=>{this.player.debug.log("Showing thumb: ".concat(o,". num: ").concat(r,". qual: ").concat(s,". newimg: ").concat(a)),this.setImageSizeAndOffset(t,i),a&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(r,!0).then(this.preloadNearby(r,!1)).then(this.getHigherQuality(s,t,i,o))}),Ot(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const s=this.usingSprites?500:1e3;if(i.dataset.index!==t.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:r}=this;setTimeout(()=>{r.removeChild(i),this.player.debug.log("Removing thumb: ".concat(i.dataset.filename))},s)}})}),Ot(this,"preloadNearby",(t,i=!0)=>new Promise(s=>{setTimeout(()=>{const r=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===r){let o;o=i?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let a=!1;o.forEach(l=>{const c=l.text;if(c!==r&&!this.loadedImages.includes(c)){a=!0,this.player.debug.log("Preloading thumb filename: ".concat(c));const{urlPrefix:d}=this.thumbnails[0],u=d+c,h=new Image;h.src=u,h.onload=()=>{this.player.debug.log("Preloaded thumb filename: ".concat(c)),this.loadedImages.includes(c)||this.loadedImages.push(c),s()}}}),a||s()}},300)})),Ot(this,"getHigherQuality",(t,i,s,r)=>{if(t<this.thumbnails.length-1){let o=i.naturalHeight;this.usingSprites&&(o=s.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===r&&(this.player.debug.log("Showing higher quality thumb for: ".concat(r)),this.loadImage(t+1))},300)}}),Ot(this,"toggleThumbContainer",(t=!1,i=!1)=>{const s=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(s,t),!t&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),Ot(this,"toggleScrubbingContainer",(t=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),Ot(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Ot(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const i=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width="".concat(i,"px")}else if(t.clientHeight<20&&t.clientWidth>20){const i=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height="".concat(i,"px")}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height="".concat(this.thumbContainerHeight,"px"),t.style.width="".concat(i,"px")}this.setThumbContainerPos()}),Ot(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:s}=this.elements.thumb,r=i.left-t.left+10,o=i.right-t.left-s.clientWidth-10,a=this.mousePosX-t.left-s.clientWidth/2,l=CH(a,r,o);s.style.left="".concat(l,"px"),s.style.setProperty("--preview-arrow-offset",a-l+"px")}),Ot(this,"setScrubbingContainerSize",()=>{const{width:t,height:i}=KL(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(i,"px")}),Ot(this,"setImageSizeAndOffset",(t,i)=>{if(!this.usingSprites)return;const s=this.thumbContainerHeight/i.h;t.style.height=t.naturalHeight*s+"px",t.style.width=t.naturalWidth*s+"px",t.style.left="-".concat(i.x*s,"px"),t.style.top="-".concat(i.y*s,"px")}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=KL(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const $C={insertElements(n,e){ce.string(e)?jL(n,this.media,{src:e}):ce.array(e)&&e.forEach(t=>{jL(n,this.media,t)})},change(n){hH(n,"sources.length")?(Cd.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],gc(this.media),this.media=null,ce.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:t}=n,[{provider:i=bd.html5,src:s}]=e,r=i==="html5"?t:"div",o=i==="html5"?{}:{src:s};Object.assign(this,{provider:i,type:t,supported:xs.check(t,i,this.config.playsinline),media:hn(r,o)}),this.elements.container.appendChild(this.media),ce.boolean(n.autoplay)&&(this.config.autoplay=n.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),ce.empty(n.poster)||(this.poster=n.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Si.addStyleHook.call(this),this.isHTML5&&$C.insertElements.call(this,"source",e),this.config.title=n.title,TH.setup.call(this),this.isHTML5&&Object.keys(n).includes("tracks")&&$C.insertElements.call(this,"track",n.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Si.build.call(this),this.isHTML5&&this.media.load(),ce.empty(n.previewThumbnails)||(Object.assign(this.config.previewThumbnails,n.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new RC(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Np{constructor(e,t){if(Ot(this,"play",()=>ce.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>gl(this.media.play())),this.media.play()):null),Ot(this,"pause",()=>this.playing&&ce.function(this.media.pause)?this.media.pause():null),Ot(this,"togglePlay",a=>(ce.boolean(a)?a:!this.playing)?this.play():this.pause()),Ot(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):ce.function(this.media.stop)&&this.media.stop()}),Ot(this,"restart",()=>{this.currentTime=0}),Ot(this,"rewind",a=>{this.currentTime-=ce.number(a)?a:this.config.seekTime}),Ot(this,"forward",a=>{this.currentTime+=ce.number(a)?a:this.config.seekTime}),Ot(this,"increaseVolume",a=>{const l=this.media.muted?0:this.volume;this.volume=l+(ce.number(a)?a:0)}),Ot(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),Ot(this,"airplay",()=>{xs.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Ot(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const l=pw(this.elements.container,this.config.classNames.hideControls),c=a===void 0?void 0:!a,d=yi(this.elements.container,this.config.classNames.hideControls,c);if(d&&ce.array(this.config.controls)&&this.config.controls.includes("settings")&&!ce.empty(this.config.settings)&&Rt.toggleMenu.call(this,!1),d!==l){const u=d?"controlshidden":"controlsshown";pn.call(this,this.media,u)}return!d}return!1}),Ot(this,"on",(a,l)=>{ii.call(this,this.elements.container,a,l)}),Ot(this,"once",(a,l)=>{G3.call(this,this.elements.container,a,l)}),Ot(this,"off",(a,l)=>{i_(this.elements.container,a,l)}),Ot(this,"destroy",(a,l=!1)=>{if(!this.ready)return;const c=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(gc(this.elements.buttons.play),gc(this.elements.captions),gc(this.elements.controls),gc(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),ce.function(a)&&a()):(VDe.call(this),Cd.cancelRequests.call(this),fw(this.elements.original,this.elements.container),pn.call(this,this.elements.original,"destroyed",!0),ce.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Si.toggleNativeControls.call(this,!0),c()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&ce.function(this.embed.destroy)&&this.embed.destroy(),c()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(c),setTimeout(c,200))}),Ot(this,"supports",a=>xs.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=xs.touch,this.media=e,ce.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||ce.nodeList(this.media)||ce.array(this.media))&&(this.media=this.media[0]),this.config=ws({},EH,Np.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(a){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ZDe(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",xs),ce.nullOrUndefined(this.media)||!ce.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!xs.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const s=this.media.tagName.toLowerCase();let r=null,o=null;switch(s){case"div":if(r=this.media.querySelector("iframe"),ce.element(r)){if(o=_H(r.getAttribute("src")),this.provider=QDe(o.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(ce.empty(this.provider)||!Object.values(bd).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Wk.video;break;case"video":case"audio":this.type=s,this.provider=bd.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=xs.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new JDe(this),this.storage=new yH(this),this.media.plyr=this,ce.element(this.elements.container)||(this.elements.container=hn("div"),fH(this.media,this.elements.container)),Si.migrateStyles.call(this),Si.addStyleHook.call(this),TH.setup.call(this),this.config.debug&&ii.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log("event: ".concat(a.type))}),this.fullscreen=new da(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Si.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new o9e(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>gl(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new RC(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===bd.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===bd.youtube}get isVimeo(){return this.provider===bd.vimeo}get isVideo(){return this.type===Wk.video}get isAudio(){return this.type===Wk.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const t=ce.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return ce.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=ce.number(t)&&t!==1/0?t:0;return e||i}set volume(e){let t=e;ce.string(t)&&(t=Number(t)),ce.number(t)||(t=this.storage.get("volume")),ce.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!ce.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;ce.boolean(t)||(t=this.storage.get("muted")),ce.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;ce.number(e)&&(t=e),ce.number(t)||(t=this.storage.get("speed")),ce.number(t)||(t=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:s}=this;t=CH(t,i,s),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,i=this.options.quality;if(!i.length)return;let s=[!ce.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(ce.number),r=!0;if(!i.includes(s)){const o=pH(i,s);this.debug.warn("Unsupported quality option: ".concat(s,", using ").concat(o," instead")),s=o,r=!1}t.selected=s,this.media.quality=s,r&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(e){const t=ce.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(e){$C.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return ce.url(e)?e:this.source}set download(e){ce.url(e)&&(this.config.urls.download=e,Rt.setDownloadUrl.call(this))}set poster(e){this.isVideo?Si.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=mw(W3.call(this));return ce.array(e)?e.join(":"):e}set ratio(e){this.isVideo?ce.string(e)&&gH(e)?(this.config.ratio=mw(e),Mp.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=ce.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){oi.toggle.call(this,e,!1)}set currentTrack(e){oi.set.call(this,e,!1),oi.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){oi.setLanguage.call(this,e,!1)}get language(){return(oi.getCurrentTrack.call(this)||{}).language}set pip(e){if(!xs.pip)return;const t=ce.boolean(e)?e:!this.pip;ce.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Gk.active:Gk.inactive),ce.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return xs.pip?ce.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Gk.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new RC(this))}static supported(e,t){return xs.check(e,t)}static loadSprite(e,t){return wH(e,t)}static setup(e,t={}){let i=null;return ce.string(e)?i=Array.from(document.querySelectorAll(e)):ce.nodeList(e)?i=Array.from(e):ce.array(e)&&(i=e.filter(ce.element)),ce.empty(i)?null:i.map(s=>new Np(s,t))}}Np.defaults=MDe(EH);const gw=Fe({__name:"VideoPlayer",props:{course:{},user:{},lesson:{},src:{},provider:{},controls:{default:()=>["play-large","play","progress","current-time","mute","volume","settings","pip","airplay","fullscreen"]},canRotate:{type:Boolean,default:!0}},setup(n){const e=K(),t=n;let i;return on(()=>{i=new Np(e.value,{youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1},controls:t.controls,fullscreen:{enabled:!0,iosNative:!t.canRotate}}),i.source={type:"video",sources:[{src:t.src,provider:t.provider}]},i.on("enterfullscreen",async()=>{t.canRotate&&await s0.lock({orientation:"landscape"})}),i.on("exitfullscreen",async()=>{await s0.lock({orientation:"portrait"})})}),_h(()=>{i&&i.destroy()}),(s,r)=>(I(),O("video",{ref_key:"refPlayer",ref:e},null,512))}}),l9e={class:"overflow-y-scroll pb-6 mt-2 h-[50%]"},c9e=["onClick"],d9e=Fe({__name:"ModalTopicCommunityPostDropdown",props:{topics:{},selectedTopic:{}},setup(n){var c;const e=n,t=ln(),{community:i}=et(t),s=K(),r=K((c=e.topics)!=null?c:[]),o=K(e==null?void 0:e.selectedTopic),a=async()=>{var h,f;const d={"filter[community_id]":(h=i.value)==null?void 0:h._id,"filter[keyword]":s.value,"sort[order]":1},{data:u}=await Qe.get("/community-topic",{params:d});J.isEmpty(u)||(r.value=(f=u==null?void 0:u.data)!=null?f:[])},l=async d=>{o.value=d,qe.dismiss(d,"confirm")};return(d,u)=>(I(),ve(y(At),{class:"ion-padding-vertical shadow-st",color:"white1"},{default:j(()=>[_("form",{onSubmit:qt(a,["prevent"]),class:"flex items-center gap-2 rounded-lg shadow-st bg-white px-4 ion-margin-horizontal"},[L(y(fe),{icon:y(Qd),class:"text-gray2 size-6"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":u[0]||(u[0]=h=>s.value=h),class:"bg-white text-black text-base py-2 flex flex-1 mx-auto outline-none",placeholder:"Tìm kiếm"},null,512),[[Ti,s.value]])],32),_("section",l9e,[(I(!0),O(Ue,null,ct(r.value,(h,f)=>{var m;return I(),O("div",{key:f},[_("div",{onClick:g=>l(h),class:gt(["flex flex-1 py-2.5 rounded-md px-8",{"bg-blue1-tint1":(h==null?void 0:h._id)===((m=d.selectedTopic)==null?void 0:m._id)}])},Q(h==null?void 0:h.title),11,c9e)])}),128))])]),_:1}))}}),u9e={class:"flex justify-end gap-2 mt-3"},h9e=Fe({__name:"ModalAddLinktoPost",props:{onAddLink:{type:Function,default:()=>{}}},setup(n){const e=n,t=K(""),i=()=>{J.isEmpty(t.value)||(e.onAddLink(t.value),qe.dismiss(null,"cancel"))};return(s,r)=>(I(),ve(y(At),{color:"gray4",class:"ion-padding"},{default:j(()=>[_("form",{class:"w-full",onSubmit:qt(i,["prevent"])},[r[2]||(r[2]=_("div",{class:"text-black size-base font-medium mb-2"},[_("span",{class:"text-red-500"},"*"),be(" Thêm liên kết từ Youtube hoặc Vimeo ")],-1)),si(_("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>t.value=o),placeholder:"Nhập link",class:"bg-white shadow-st rounded-lg w-full text-base text-black py-2 px-2.5"},null,512),[[Ti,t.value]]),_("section",u9e,[r[1]||(r[1]=_("div",{class:"px-6 py-1.5 bg-white rounded-lg text-gray2 shadow-st"}," Huỷ ",-1)),_("div",{class:gt(["px-6 py-1.5 rounded-lg",y(J.isEmpty)(t.value)?"bg-gray3 text-gray2":" bg-blue1 text-white  shadow-st"]),onClick:i}," Thêm ",2)])],32)]),_:1}))}}),f9e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function p9e(n){return typeof n=="string"&&f9e.test(n)}function m9e(n){if(!p9e(n))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(n.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(n.slice(9,13),16))>>>8,e&255,(e=parseInt(n.slice(14,18),16))>>>8,e&255,(e=parseInt(n.slice(19,23),16))>>>8,e&255,(e=parseInt(n.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}const Js=[];for(let n=0;n<256;++n)Js.push((n+256).toString(16).slice(1));function K3(n,e=0){return(Js[n[e+0]]+Js[n[e+1]]+Js[n[e+2]]+Js[n[e+3]]+"-"+Js[n[e+4]]+Js[n[e+5]]+"-"+Js[n[e+6]]+Js[n[e+7]]+"-"+Js[n[e+8]]+Js[n[e+9]]+"-"+Js[n[e+10]]+Js[n[e+11]]+Js[n[e+12]]+Js[n[e+13]]+Js[n[e+14]]+Js[n[e+15]]).toLowerCase()}let Kk;const g9e=new Uint8Array(16);function YL(){if(!Kk){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Kk=crypto.getRandomValues.bind(crypto)}return Kk(g9e)}const Km={};function b9e(n,e,t){var r,o,a,l;let i;const s=(r=n==null?void 0:n._v6)!=null?r:!1;if(n){const c=Object.keys(n);c.length===1&&c[0]==="_v6"&&(n=void 0)}if(n)i=XL((l=(a=n.random)!=null?a:(o=n.rng)==null?void 0:o.call(n))!=null?l:YL(),n.msecs,n.nsecs,n.clockseq,n.node,e,t);else{const c=Date.now(),d=YL();v9e(Km,c,d),i=XL(d,Km.msecs,Km.nsecs,s?void 0:Km.clockseq,s?void 0:Km.node,e,t)}return e?i:K3(i)}function v9e(n,e,t){var i,s;return(i=n.msecs)!=null||(n.msecs=-1/0),(s=n.nsecs)!=null||(n.nsecs=0),e===n.msecs?(n.nsecs++,n.nsecs>=1e4&&(n.node=void 0,n.nsecs=0)):e>n.msecs?n.nsecs=0:e<n.msecs&&(n.node=void 0),n.node||(n.node=t.slice(10,16),n.node[0]|=1,n.clockseq=(t[8]<<8|t[9])&16383),n.msecs=e,n}function XL(n,e,t,i,s,r,o=0){if(n.length<16)throw new Error("Random bytes length must be >= 16");if(!r)r=new Uint8Array(16),o=0;else if(o<0||o+16>r.length)throw new RangeError("UUID byte range ".concat(o,":").concat(o+15," is out of buffer bounds"));e!=null||(e=Date.now()),t!=null||(t=0),i!=null||(i=(n[8]<<8|n[9])&16383),s!=null||(s=n.slice(10,16)),e+=122192928e5;const a=((e&268435455)*1e4+t)%4294967296;r[o++]=a>>>24&255,r[o++]=a>>>16&255,r[o++]=a>>>8&255,r[o++]=a&255;const l=e/4294967296*1e4&268435455;r[o++]=l>>>8&255,r[o++]=l&255,r[o++]=l>>>24&15|16,r[o++]=l>>>16&255,r[o++]=i>>>8|128,r[o++]=i&255;for(let c=0;c<6;++c)r[o++]=s[c];return r}function y9e(n){const e=typeof n=="string"?m9e(n):n,t=w9e(e);return typeof n=="string"?K3(t):t}function w9e(n){return Uint8Array.of((n[6]&15)<<4|n[7]>>4&15,(n[7]&15)<<4|(n[4]&240)>>4,(n[4]&15)<<4|(n[5]&240)>>4,(n[5]&15)<<4|(n[0]&240)>>4,(n[0]&15)<<4|(n[1]&240)>>4,(n[1]&15)<<4|(n[2]&240)>>4,96|n[2]&15,n[3],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function Sd(n,e,t){n!=null||(n={});let i=b9e({...n,_v6:!0},new Uint8Array(16));return i=y9e(i),K3(i)}const x9e={class:"p-4 border-[1px] border-gray3 rounded-lg mb-4"},_9e={class:"flex justify-between mb-2 items-center"},k9e={class:"flex items-center gap-2 mb-2.5"},E9e=["onUpdate:modelValue","placeholder"],T9e={class:"flex items-center justify-between pt-2"},C9e={class:"flex gap-4"},S9e={class:"flex items-center gap-1"},A9e={class:"flex items-center gap-1"},I9e=Fe({__name:"CreatePoll",props:Hg({onClose:{type:Function,default:()=>{}}},{type:{},typeModifiers:{},content:{default:[]},contentModifiers:{}}),emits:["update:type","update:content"],setup(n){const e=jg(n,"type"),t=jg(n,"content"),i=()=>{t.value.length>=10?tt("Chỉ được phép tối đa 10 lựa chọn","warning"):t.value.push({content:"",id:Sd()})},s=r=>{var o;(o=t.value)==null||o.splice(r,1)};return(r,o)=>(I(),O("section",x9e,[_("div",_9e,[o[1]||(o[1]=_("div",{class:"text-black font-medium"},"Bình chọn",-1)),L(y(fe),{onClick:r.onClose,icon:y(Cp),class:"size-7 text-red-500"},null,8,["onClick","icon"])]),(I(!0),O(Ue,null,ct(n.content,(a,l)=>(I(),O("div",{key:a.id},[_("div",k9e,[si(_("input",{"onUpdate:modelValue":c=>a.content=c,class:"bg-white1 w-full py-1.5 px-3 rounded-lg",placeholder:"Lựa chọn ".concat(l+1)},null,8,E9e),[[Ti,a.content]]),t.value.length>2?(I(),ve(y(fe),{key:0,onClick:c=>s(l),icon:y(BA),class:"size-6 text-gray2"},null,8,["onClick","icon"])):re("",!0)])]))),128)),_("div",T9e,[_("div",{onClick:i,class:"px-2.5 flex bg-blue1 rounded-full items-center"},[L(y(fe),{icon:y(QF),class:"size-6 text-white"},null,8,["icon"])]),_("div",null,[L(y(Tc),{value:1,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value=a)},{default:j(()=>[_("div",C9e,[_("div",S9e,[L(y(La),{value:1,mode:"md","label-placement":"end",color:"blue1",justify:"start",alignment:"start"}),o[2]||(o[2]=_("div",{class:"text-sm"},"Một lựa chọn",-1))]),_("div",A9e,[L(y(La),{value:2,mode:"md","label-placement":"end",color:"blue1",justify:"start",alignment:"start"}),o[3]||(o[3]=_("div",{class:"text-sm"},"Nhiều lựa chọn",-1))])])]),_:1},8,["modelValue"])])])]))}}),rh={User:1,Community:2},P9e={class:"text-black font-medium text-lg text-center"},R9e={class:"ion-padding bg-white"},$9e={class:"bg-white flex gap-2.5 mt-2 mb-4 items-center"},L9e={class:"size-10 rounded-full flex"},O9e=["src"],D9e={class:"flex-1 text-base text-gray2 font-normal"},M9e={class:"text-base text-black2 font-medium"},N9e={class:"text-base text-black2 font-medium pl-1"},F9e={class:"border-b"},B9e={class:"pb-4 flex flex-row overflow-x-scroll gap-2.5 items-center"},V9e={class:"flex gap-2.5"},U9e=["src"],z9e={class:"my-2 py-2"},H9e={class:"gap-1 flex items-center"},j9e={key:0,class:"flex items-center mt-4 gap-2"},cv=10,dv=2,G9e=Fe({__name:"ModalNewPost",props:{topics:{},post:{},type:{default:"create"},isPersonal:{type:Boolean,default:!1}},setup(n){var xe,Be,Pe,Ae,de,we,ze,le,Se,ne,ie,me,V,F,z,se,Te,ke,Ce,ge,He,Ge,mt,ut,xt,kt,It;const{DEV:e,VITE_API_URL_DEV:t,VITE_API_URL:i}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},s=e?t:i,r="https://unica.expert",o=n,a=["progress","volume","current-time","play-large","settings"],l=ln(),c=en(),{userInfo:d,accessToken:u}=et(c),{community:h}=et(l),f=K(),m=K((Pe=(Be=(xe=o.post)==null?void 0:xe.attachments)==null?void 0:Be.filter(Je=>!J.isEmpty(Je.url)&&!J.isEmpty(Je.ext)).map(Je=>Je.url))!=null?Pe:[]),g=K((we=(de=(Ae=o.post)==null?void 0:Ae.attachments)==null?void 0:de.filter(Je=>!J.isEmpty(Je.embed_url)).map(Je=>Je.embed_url))!=null?we:[]),b=K(!J.isEmpty((ze=o.post)==null?void 0:ze.poll)),w=K((ne=(Se=(le=o.post)==null?void 0:le.poll)==null?void 0:Se.type)!=null?ne:1),x=K((V=(me=(ie=o.post)==null?void 0:ie.poll)==null?void 0:me.options.map(Je=>({...Je,content:Je.option})))!=null?V:[{content:"",id:Sd()},{content:"",id:Sd()}]),k=()=>{var Je,rt,Ct;E.title="",E.description="",E.send_email=!1,E.topic_id=(Je=f.value)==null?void 0:Je._id,E.community_id=(rt=h.value)==null?void 0:rt.id,E.creator_id=(Ct=d.value)==null?void 0:Ct._id,E.files=[],E.links=[],m.value=[],f.value=null},E=Yi({title:(z=(F=o.post)==null?void 0:F.title)!=null?z:"",description:(Te=(se=o.post)==null?void 0:se.description)!=null?Te:"",send_email:(Ce=(ke=o.post)==null?void 0:ke.send_email)!=null?Ce:!1,community_id:(ge=h.value)==null?void 0:ge._id,creator_id:(He=d==null?void 0:d.value)==null?void 0:He._id,links:(ut=(mt=(Ge=o.post)==null?void 0:Ge.attachments)==null?void 0:mt.filter(Je=>!J.isEmpty(Je.embed_url)).map(Je=>Je.embed_url))!=null?ut:[],files:(It=(kt=(xt=o.post)==null?void 0:xt.attachments)==null?void 0:kt.filter(Je=>!J.isEmpty(Je.url)&&!J.isEmpty(Je.ext)).map(Je=>Je.url))!=null?It:[]}),T=()=>{b.value=!0},P=()=>{x.value=[{content:"",id:Sd()},{content:"",id:Sd()}],E.poll=void 0,w.value=1,b.value=!1},C=()=>{qe.dismiss(null,"cancel")},A=async()=>{g.value.length>=dv?tt("Mã nhúng có thể thêm vào tối đa là: ".concat(dv),"warning"):await(await qe.create({component:h9e,componentProps:{onAddLink:he},initialBreakpoint:.25,mode:"ios"})).present()},R=async()=>{var Pt;const Je=await qe.create({component:d9e,componentProps:{topics:(Pt=o.topics)!=null?Pt:[],selectedTopic:f.value},initialBreakpoint:.55,mode:"ios"});await Je.present();const{data:rt,role:Ct}=await Je.onWillDismiss();Ct==="confirm"&&(f.value=rt,E.topic_id=rt==null?void 0:rt._id)},M=async()=>{if(U.value){if(b.value)if(x.value.filter(Je=>Je.content).length<2){tt("Vui lòng nhập 2 lựa chọn trở lên","warning"),E.poll=void 0;return}else E.poll={type:w.value,options:x.value.map(Je=>Je.content)};try{const Je=new FormData,rt=(Ct,Pt="")=>{Ct&&(typeof Ct=="object"&&!(Ct instanceof File)?Object.keys(Ct).forEach(Xt=>{rt(Ct[Xt],Pt?"".concat(Pt,"[").concat(Xt,"]"):Xt)}):Je.append(Pt,Ct))};if(o.isPersonal&&(delete E.community_id,delete E.send_email),rt(E),o.type==="edit")N(Je);else if(o.isPersonal){Je.append("type",rh.User+"");const Ct=await fetch("".concat(s,"/community-post/personalPage"),{method:"POST",headers:{Authorization:"Bearer ".concat(u.value)},body:Je});if(Ct.status===201)k(),qe.dismiss(null,"posted");else if(Ct.status===403){const Pt=await Ct.json();J.isEmpty(Pt==null?void 0:Pt.message)?tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning"):tt(Pt==null?void 0:Pt.message,"warning")}else tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning")}else{const Ct=await fetch("".concat(s,"/community-post"),{method:"POST",headers:{Authorization:"Bearer ".concat(u.value)},body:Je});if(Ct.status===201)k(),qe.dismiss(null,"posted");else if(Ct.status===403){const Pt=await Ct.json();J.isEmpty(Pt==null?void 0:Pt.message)?tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning"):tt(Pt==null?void 0:Pt.message,"warning")}else tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning")}}catch(Je){tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning")}}},N=async Je=>{var Ct;const rt=await fetch("".concat(s,"/community-post/").concat((Ct=o.post)==null?void 0:Ct._id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(u.value)},body:Je});if(rt.status===201||rt.status===200)k(),qe.dismiss(null,"updated"),tt("Cập nhật bài viết thành công!","success");else if(rt.status===403){const Pt=await rt.json();J.isEmpty(Pt==null?void 0:Pt.message)?tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning"):tt(Pt==null?void 0:Pt.message,"warning")}else tt("Đã có lỗi xảy ra, vui lòng thử lại sau","warning")},U=lt(()=>!J.isEmpty(E.title)&&!J.isEmpty(E.description)),G=async()=>{var Je,rt,Ct,Pt,Xt,mn,In;try{if(!J.isEmpty(E.files)&&Number((rt=(Je=E.files)==null?void 0:Je.length)!=null?rt:0)>=cv)tt("Hình ảnh có thể thêm vào tối đa là: ".concat(cv),"warning");else{const ci=await $x.pickImages({quality:80,limit:J.isEmpty(E.files)?cv:cv-Number((Pt=(Ct=E.files)==null?void 0:Ct.length)!=null?Pt:0)});console.log("🌸 images 👉",ci),m.value=[...(Xt=m.value)!=null?Xt:[],...(mn=ci.photos)!=null?mn:[]],await B((In=ci.photos)!=null?In:null)}}catch(ci){}},B=async Je=>{var Xt,mn,In,ci,ri,wn;const rt=[];if(!Je)return[];const Ct=Mn=>{if(!Mn)return"imgpost_"+Date.now();const Oi=Mn.split("/");return Oi[Oi.length-1]},Pt=Mn=>{var us;const Oi=(us=Mn==null?void 0:Mn.split(".").pop())==null?void 0:us.toLowerCase();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"}[Oi]||"image/jpeg"};for(const Mn of Je){const Oi=await Gz.readFile({path:(Xt=Mn==null?void 0:Mn.path)!=null?Xt:""}),$r=(In=(mn=Mn==null?void 0:Mn.path)==null?void 0:mn.split(".").pop())==null?void 0:In.toLowerCase(),us="".concat(Ct(Oi==null?void 0:Oi.data.toString()),"_").concat(Date.now(),".").concat($r),Lr=Pt(Mn.path),to=te((ci=Oi==null?void 0:Oi.data.toString())!=null?ci:"",Lr),no=new File([to],us,{type:Lr});rt.push(no)}console.log([...(ri=E.files)!=null?ri:[],...rt]),E.files=[...(wn=E.files)!=null?wn:[],...rt]},te=(Je,rt)=>{const Ct=atob(Je),Pt=new Array(Ct.length);for(let mn=0;mn<Ct.length;mn++)Pt[mn]=Ct.charCodeAt(mn);const Xt=new Uint8Array(Pt);return new Blob([Xt],{type:rt})},X=Je=>{var rt;(rt=E.files)==null||rt.splice(Je,1),m.value.splice(Je,1)},ue=Je=>{var rt;(rt=E.links)==null||rt.splice(Je,1),g.value.splice(Je,1)},he=Je=>{var rt,Ct;g.value.length>=dv?tt("Mã nhúng có thể thêm vào tối đa là: ".concat(dv),"warning"):J.isEmpty(Je)||(g.value=[...(rt=g.value)!=null?rt:[],Je],E.links=[...(Ct=E.links)!=null?Ct:[],Je!=null?Je:""])},Ie=Je=>Je?Je.match(/^http/)?Je:"".concat(r,"/storage/").concat(Je):"";return(Je,rt)=>(I(),O(Ue,null,[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{color:"white",mode:"ios"},{default:j(()=>[L(y(fe),{slot:"start",onClick:C,icon:y(ks),class:"size-7 text-gray2 mr-4"},null,8,["icon"]),_("div",P9e,Q(Je.type==="create"?"Tạo bài viết":"Sửa bài viết"),1),_("div",{onClick:M,slot:"end",class:gt(["text-gray2 uppercase text-sm font-medium px-4 py-1 rounded-lg",U.value?"bg-blue1 text-white":"bg-gray1"])},Q(Je.type==="create"?"Đăng":"Sửa"),3)]),_:1})]),_:1}),L(y(At),{color:"white"},{default:j(()=>{var Ct,Pt,Xt,mn,In,ci,ri;return[_("div",R9e,[_("div",$9e,[_("div",L9e,[_("img",{src:(Pt=(Ct=y(d))==null?void 0:Ct.avatar)!=null?Pt:"/icUser.png",class:"w-full rounded-full",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,O9e)]),_("div",D9e,[_("span",M9e,Q((mn=(Xt=y(d))==null?void 0:Xt.full_name)!=null?mn:"-"),1),Je.isPersonal?re("",!0):(I(),O(Ue,{key:0},[rt[5]||(rt[5]=_("span",{class:"pl-1"},Q("đăng tại"),-1)),_("span",N9e,Q((ci=(In=y(h))==null?void 0:In.name)!=null?ci:"-"),1)],64))])]),_("div",F9e,[si(_("input",{"onUpdate:modelValue":rt[0]||(rt[0]=wn=>E.title=wn),class:"flex-1 w-full px-2 outline-none text-lg font-medium bg-white1 py-1",placeholder:"Tiêu đề"},null,512),[[Ti,E.title]]),si(_("textarea",{"onUpdate:modelValue":rt[1]||(rt[1]=wn=>E.description=wn),class:"flex-1 w-full p-2 text-base min-h-28 outline-none rounded-lg my-2 bg-white1",placeholder:"Nhập nội dung"},null,512),[[Ti,E.description]]),b.value&&!Je.isPersonal?(I(),ve(I9e,{key:0,type:w.value,"onUpdate:type":rt[2]||(rt[2]=wn=>w.value=wn),content:x.value,"onUpdate:content":rt[3]||(rt[3]=wn=>x.value=wn),onClose:P},null,8,["type","content"])):re("",!0),_("div",B9e,[_("div",V9e,[(I(!0),O(Ue,null,ct(m.value,(wn,Mn)=>{var Oi;return I(),O("div",{key:Mn,class:"size-40 rounded-lg overflow-hidden relative flex"},[_("img",{src:(Oi=wn.webPath)!=null?Oi:Ie(wn),class:"size-40 w-full flex object-cover"},null,8,U9e),L(y(fe),{onClick:$r=>X(Mn),icon:y(ks),class:"size-5 absolute rounded-full top-2 text-black bg-white p-1 right-2"},null,8,["onClick","icon"])])}),128))]),(I(!0),O(Ue,null,ct(g.value,(wn,Mn)=>(I(),O("div",{key:Mn},[(I(),O("div",{class:"aspect-video rounded-lg overflow-hidden h-40 relative",key:Mn},[L(gw,{src:y(Yy)(wn)==="youtube"?y(LB)(wn):wn,"can-rotate":!1,controls:a,provider:y(Yy)(wn)},null,8,["src","provider"]),L(y(fe),{onClick:Oi=>ue(Mn),icon:y(ks),class:"size-5 absolute rounded-full top-2 text-black bg-white p-1 right-2"},null,8,["onClick","icon"])]))]))),128))])]),_("div",z9e,[_("div",H9e,[L(y(fe),{onClick:G,icon:y(lB),class:"size-6 text-gray2 p-1"},null,8,["icon"]),L(y(fe),{onClick:A,src:"/icons/icWatch.svg",class:"size-6 p-1"}),Je.isPersonal?re("",!0):(I(),ve(y(fe),{key:0,onClick:T,icon:y(Gbe),class:"size-6 p-1 text-gray2"},null,8,["icon"])),Je.isPersonal?re("",!0):(I(),O("div",{key:1,onClick:qt(R,["stop"]),class:"flex items-center ml-2 gap-1 text-sm text-gray2 font-medium"},[be(Q(((ri=f.value)==null?void 0:ri.title)||"Chọn mục đăng")+" ",1),L(y(fe),{icon:y(c0),class:"size-4"},null,8,["icon"])]))]),Je.isPersonal?re("",!0):(I(),O("div",j9e,[L(y(Xp),{mode:"md",modelValue:E.send_email,"onUpdate:modelValue":rt[4]||(rt[4]=wn=>E.send_email=wn),alignment:"start",justify:"start","label-placement":"end",color:"blue1"},null,8,["modelValue"]),rt[6]||(rt[6]=_("div",{class:"flex items-center gap-2.5 text-sm text-gray2 font-medium"}," Gửi email đến toàn bộ thành viên ",-1))]))])])]}),_:1})],64))}}),Y3=Xi(G9e,[["__scopeId","data-v-ba7a4267"]]),W9e={class:"p-4 text-base font-normal"},q9e={class:"mt-2 mb-1 text-sm font-light"},K9e={class:"font-medium"},Y9e=Fe({__name:"ModalConfirmBlockUser",props:{creator:{}},setup(n){const e=n,{community:t}=et(ln()),i=async()=>qe.dismiss(null),s=async()=>{var o,a;const r=await Qe.patch("user-community/black-list-user",{community_id:(o=t.value)==null?void 0:o._id,blacklist:(a=e.creator)==null?void 0:a._id});r.status===200&&!J.isEmpty(r==null?void 0:r.data)&&await qe.dismiss("blocked")};return(r,o)=>{var a,l;return I(),O("div",W9e,[o[3]||(o[3]=_("h3",null,"Xác nhận chặn người dùng",-1)),_("h4",q9e,[o[0]||(o[0]=be(" Bạn có chắc chắn muốn chặn ")),_("span",K9e,Q((a=r.creator)==null?void 0:a.full_name),1),o[1]||(o[1]=be(" không? ")),o[2]||(o[2]=_("div",null,"Sau khi chặn:",-1)),_("li",null,Q((l=r.creator)==null?void 0:l._id),1)]),o[4]||(o[4]=_("div",{class:"px-4 font-light text-sm"},[_("ul",{class:"list-disc"},[_("li",null,"Bạn sẽ không thấy bài viết của người này nữa."),_("li",null,"Người này cũng sẽ không thể xem bài viết và tương tác với bạn."),_("li",null,"Bạn có thể bỏ chặn bất cứ lúc nào trong cài đặt.")])],-1)),_("div",{class:"text-sm font-medium flex justify-end items-center gap-2 mt-2"},[_("div",{onClick:s,class:"bg-red-500 px-4 py-1 text-white rounded-lg"}," Chặn "),_("div",{onClick:i,class:"bg-gray1 px-4 py-1 rounded-lg"},"Huỷ")])])}}}),X9e={class:"ion-padding h-[50%] bg-white1"},Q9e={class:"overflow-auto h-[95%] ion-padding-horizontal py-2.5 pb-8 bg-white mt-2 rounded-md"},Z9e={class:"font-nr"},J9e={class:"font-medium"},e7e=Fe({__name:"ModalPostAction",props:{post:{},onCallback:{type:Function,default:()=>{}},onGetReportNumber:{type:Function,default:()=>{}},onCallbackBlockUserPost:{type:Function,default:()=>{}},isPage:{type:Boolean,default:!1}},setup(n){const e=gn(),t=n,{userCommunity:i,usersLimitedByPackage:s}=et(Li()),{topics:r}=et(ln()),{userInfo:o}=et(en()),a=lt(()=>{const k=t.post;return!!(k!=null&&k.pin&&!(k!=null&&k.pin_in))}),l=lt(()=>{const k=t.post;return!!(k!=null&&k.pin&&k.pin_in)}),c=lt(()=>{var k;return((k=i.value)==null?void 0:k.role)===Ei.Admin}),d=async k=>{var E,T,P;try{if(k==="topic"&&!((E=t.post)!=null&&E.topic_id)){tt("Có lỗi xảy ra khi ghim danh mục. Vui lòng thử lại.","warning");return}if(!J.isEmpty(t==null?void 0:t.post)){const C={community_id:t.post.community_id};k==="topic"&&((T=t.post)!=null&&T.topic_id)&&(C["filter[topic_id]"]=(P=t.post)==null?void 0:P.topic_id);const{status:A}=await Qe.get("/community-post/pin/".concat(t.post._id),{params:C});A===200&&(t.onCallback(),tt("Ghim bài viết thành công","success"))}}catch(C){tt("Có lỗi xảy ra. Vui lòng thử lại.","warning")}finally{await qe.dismiss(null,"cancel")}},u=async()=>{try{if(!J.isEmpty(t.post)){const{status:k}=await Qe.get("/community-post/unpin/".concat(t.post._id),{params:{community_id:t.post.community_id}});k===200&&(tt("Đã bỏ ghim bài viết","success"),t.onCallback())}}catch(k){tt("Có lỗi xảy ra. Vui lòng thử lại.","warning")}finally{await qe.dismiss(null,"cancel")}},h=async()=>{await qe.dismiss(null,"cancel")},f=async()=>{if(await h(),s.value){tt("Tài khoản bị giới hạn!","warning");return}const k=await qe.create({component:nDe,componentProps:{type:"post",post:t==null?void 0:t.post},cssClass:"reportpost"});await k.present();const{role:E}=await k.onWillDismiss();E==="success"&&(t.onGetReportNumber(),console.log("report succeeees"))},m=async k=>{var E;try{const T={disabled_comment:k},{status:P}=await Qe.patch("/community-post/".concat((E=t.post)==null?void 0:E._id),T);P===200||P===201?(t.onCallback(),tt("Đã ".concat(k?"tắt":"bật"," bình luận thành công!"),"success")):tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}catch(T){tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}finally{h()}},g=async()=>{var k,E;try{const T={post_id:(k=t.post)==null?void 0:k._id,community_id:(E=t.post)==null?void 0:E.community_id,is_hidden:0},{status:P}=await Qe.post("/user-post",T);P===201?(t.isPage?e.back():t.onCallback(),tt("Ẩn bài viết thành công!","success")):tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}catch(T){tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}finally{h()}},b=async()=>{var k;try{const{status:E}=await Qe.delete("/community-post/".concat((k=t.post)==null?void 0:k._id));E===200?(t.isPage?e.back():t.onCallback(),tt("Gỡ bài viết thành công!","success")):tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}catch(E){tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}finally{h()}},w=async()=>{var T;await h();const k=await qe.create({component:Y3,componentProps:{type:"edit",topics:(T=r.value)!=null?T:[],post:t.post},mode:"ios"});await k.present();const{role:E}=await k.onWillDismiss();E==="updated"&&t.onCallback()};console.log(t.post);const x=async k=>{await h();const E=await qe.create({component:Y9e,componentProps:{creator:k},mode:"ios",cssClass:"reportpost"});await E.present();const{data:T}=await E.onWillDismiss();T==="blocked"&&k&&t.onCallbackBlockUserPost(k==null?void 0:k._id)};return(k,E)=>{var T,P,C,A,R,M,N,U,G,B,te,X,ue,he,Ie,xe,Be,Pe;return I(),O("div",X9e,[_("section",Q9e,[c.value&&((T=k.post)==null?void 0:T.type)===y(rh).Community||((P=y(o))==null?void 0:P._id)===((C=k.post)==null?void 0:C.creator_id)?(I(),O("div",{key:0,onClick:w}," Chỉnh sửa ")):re("",!0),c.value&&((A=k.post)==null?void 0:A.type)===y(rh).Community?(I(),O(Ue,{key:1},[a.value?(I(),O("div",{key:1,onClick:u},"Bỏ ghim tất cả")):(I(),O("div",{key:0,onClick:d},"Ghim tất cả")),(R=k.post)!=null&&R.topic_id?(I(),O(Ue,{key:2},[l.value?(I(),O("div",{key:1,onClick:u},"Bỏ ghim danh mục")):(I(),O("div",{key:0,onClick:E[0]||(E[0]=Ae=>d("topic"))}," Ghim danh mục "))],64)):re("",!0),c.value||((M=y(o))==null?void 0:M._id)===((N=k.post)==null?void 0:N.creator_id)?(I(),O(Ue,{key:3},[(U=k.post)!=null&&U.disabled_comment?(I(),O("div",{key:0,onClick:E[1]||(E[1]=Ae=>m(!1))}," Mở bình luận ")):(G=k.post)!=null&&G.disabled_comment?re("",!0):(I(),O("div",{key:1,onClick:E[2]||(E[2]=Ae=>m(!0))}," Tắt bình luận "))],64)):re("",!0)],64)):re("",!0),_("div",{onClick:g},"Ẩn bài viết"),((B=y(o))==null?void 0:B._id)!==((te=k.post)==null?void 0:te.creator_id)?(I(),O("div",{key:2,onClick:f}," Báo cáo bài viết ")):re("",!0),((X=y(o))==null?void 0:X._id)!==((ue=k.post)==null?void 0:ue.creator_id)?(I(),O("div",{key:3,onClick:E[3]||(E[3]=Ae=>{var de;return x((de=k.post)==null?void 0:de.creator)})},[_("div",null,[_("p",Z9e,[E[4]||(E[4]=be(" Chặn ")),_("span",J9e,Q((Ie=(he=k.post)==null?void 0:he.creator)==null?void 0:Ie.full_name),1)])])])):re("",!0),c.value&&((xe=k.post)==null?void 0:xe.type)===y(rh).Community||((Be=k.post)==null?void 0:Be.creator_id)===((Pe=y(o))==null?void 0:Pe._id)?(I(),O("div",{key:4,onClick:b,class:"text-red-500"},"Xóa bài viết")):re("",!0)])])}}}),r_=Xi(e7e,[["__scopeId","data-v-9aa85156"]]),ms={Waiting:1,Joined:2,Refuse:3,Leaved:4,WaitPay:5},t7e={class:"flex-1 flex-col h-[75%] overflow-y-scroll pb-10 ion-padding"},n7e={class:"flex items-center gap-4"},i7e=["src"],s7e={class:"font-normal text-lg"},r7e=Fe({__name:"ModalShowUserLiked",props:{post:{}},setup(n){const e=n,t=K([]),i=K(1),s=K(!1),r=async(l=1,c=!1)=>{var h,f,m;const d={"w[]":["responder"],"filter[post_id]":(h=e.post)==null?void 0:h._id,limit:15,page:l},{data:u}=await Qe.get("/community-reaction",{params:d});J.isEmpty(u)?s.value=!1:((f=u==null?void 0:u.meta)!=null&&f.hasNextPage?(i.value++,s.value=!0):s.value=!1,c?t.value=[...t.value,...(m=u==null?void 0:u.data)!=null?m:[]]:t.value=u==null?void 0:u.data)},o=()=>{r(1,!1),i.value=1,s.value=!1};on(()=>{o()});const a=l=>{r(i.value,!0),setTimeout(()=>l.target.complete(),500)};return(l,c)=>(I(),O(Ue,null,[c[0]||(c[0]=_("div",{class:"flex justify-between ion-padding items-center"},[_("div",{class:"text-lg font-medium"},"Người tương tác")],-1)),L(y(At),{class:"flex-1 flex-col","scroll-y":!0},{default:j(()=>[_("section",t7e,[(I(!0),O(Ue,null,ct(t.value,d=>{var u,h;return I(),O("div",{key:d==null?void 0:d._id,class:"my-2 py-1.5"},[_("div",n7e,[_("img",{src:(u=d==null?void 0:d.responder)==null?void 0:u.avatar,class:"size-11 rounded-full"},null,8,i7e),_("div",s7e,Q((h=d==null?void 0:d.responder)==null?void 0:h.full_name),1)])])}),128)),s.value?(I(),ve(y(Zn),{key:0,onIonInfinite:a,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)])]),_:1})],64))}}),o7e={class:"flex gap-2 px-2 overflow-x-scroll pb-4 scrollbar-hidden"},a7e=["onClick"],l7e=["src"],c7e={key:1,class:"h-48 bg-[#ddd] aspect-video rounded-lg overflow-hidden"},d7e=Fe({__name:"PostAttachments",props:{attachments:{}},setup(n){const e="https://unica.expert",t=s=>s.url?s.url.match(/^http/)?s.url:"".concat(e,"/storage/").concat(s.url):"",i=async s=>{await(await qe.create({component:NB,componentProps:{imgSrc:s},cssClass:"img-viewer"})).present()};return(s,r)=>(I(),O("div",o7e,[(I(!0),O(Ue,null,ct(s.attachments,(o,a)=>(I(),O("div",{key:a},[o.url?(I(),O("div",{key:0,class:"size-48 overflow-hidden flex",onClick:l=>i(t(o))},[_("img",{src:t(o),class:"size-48 rounded-lg aspect-square"},null,8,l7e)],8,a7e)):re("",!0),o.embed_url?(I(),O("div",c7e,[L(gw,{"can-rotate":!1,src:y(Yy)(o.embed_url)==="youtube"?y(LB)(o.embed_url):o.embed_url,controls:["progress","volume","fullscreen","current-time","play-large","play","settings"],provider:y(Yy)(o.embed_url)},null,8,["src","provider"])])):re("",!0)]))),128))]))}}),QL={OneChoice:1,MultipleChoice:2},u7e={class:"h-[60%] overflow-y-scroll flex-1 flex-col ion-padding"},h7e={class:"text-black font-medium text-lg mb-2"},f7e={key:0},p7e={class:"flex items-center gap-2 py-2"},m7e=["src"],g7e={class:"text-base font-medium text-black"},b7e={class:"text-sm font-light text-black"},v7e={key:1,class:"flex flex-col mt-[15%] items-center"},y7e=Fe({__name:"ModalVotedUser",props:{data:{},pollId:{}},setup(n){const e=n,t=K([]),i=K(1),s=K(!1),r=async(a=1,l=!1)=>{var d,u,h,f;const{data:c}=await Qe.get("/community-post-poll/".concat(e.pollId,"/").concat((d=e.data)==null?void 0:d._id,"/voters"),{params:{page:a,limit:20}});J.isEmpty(c)?s.value=!1:((u=c==null?void 0:c.meta)!=null&&u.hasNextPage?(i.value++,s.value=!0):s.value=!1,l?t.value=[...t.value,...(h=c==null?void 0:c.data)!=null?h:[]]:t.value=(f=c==null?void 0:c.data)!=null?f:[])};on(()=>{r(1,!1)});const o=a=>{r(i.value,!0),setTimeout(()=>a.target.complete(),500)};return(a,l)=>(I(),ve(y(At),{class:"flex-1 flex-col","scroll-y":!0},{default:j(()=>{var c,d;return[_("section",u7e,[_("div",h7e,Q((d=Number((c=a.data)==null?void 0:c.total))!=null?d:0)+" bình chọn ",1),y(J.isEmpty)(t.value)?(I(),O("div",v7e,l[0]||(l[0]=[_("img",{src:hm,class:"size-32"},null,-1),_("div",{class:"text-gray2 font-normal"},"Chưa có bình chọn",-1)]))):(I(),O("div",f7e,[(I(!0),O(Ue,null,ct(t.value,u=>{var h;return I(),O("div",{key:u._id},[_("div",p7e,[_("img",{src:(h=u.voter.avatar)!=null?h:"/icUser.png",class:"size-11 rounded-full flex"},null,8,m7e),_("div",null,[_("div",g7e,Q(u.voter.full_name),1),_("div",b7e,Q(u.voter.bio),1)])])])}),128))]))]),s.value?(I(),ve(y(Zn),{key:0,onIonInfinite:o},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1}))}}),w7e={key:0},x7e=["src"],_7e={key:0,class:"text-xs font-medium ml-0.5 text-black"},ZL=Fe({__name:"PollVotedUser",props:{data:{},pollId:{}},setup(n){const e=n,t=async()=>{await(await qe.create({component:y7e,componentProps:{data:e.data,pollId:e.pollId},initialBreakpoint:.6,mode:"ios"})).present()};return(i,s)=>{var r,o,a,l;return y(J.isEmpty)((r=i.data)==null?void 0:r.votes)?re("",!0):(I(),O("section",w7e,[_("div",{class:"flex items-center",onClick:t},[(I(!0),O(Ue,null,ct((o=i.data)==null?void 0:o.votes.slice(0,2),(c,d)=>{var u;return I(),O("div",{key:c._id,class:"relative flex size-7 items-center"},[_("img",{src:c.voter.avatar,class:gt(["size-7 rounded-full absolute",d!==1&&Number((u=i.data)==null?void 0:u.votes.length)>1&&"left-2.5"])},null,10,x7e)])}),128)),Number((a=i.data)==null?void 0:a.total)>2?(I(),O("span",_7e,Q(Number((l=i.data)==null?void 0:l.total)-2)+"+",1)):re("",!0)])]))}}}),k7e={class:"px-1 w-full"},E7e={key:0,class:"text-sm flex items-center mt-4 gap-1.5 font-medium text-green-600"},T7e={key:0},C7e={class:"flex text-wrap bg-[#f1f1f1] px-2.5 py-1.5 rounded-lg w-full gap-1 items-center"},S7e={class:"flex-1"},A7e={key:1},I7e={class:"bg-[#f1f1f1] w-full px-2.5 py-1.5 rounded-lg flex items-center gap-1"},P7e={class:"flex-1"},R7e=Fe({__name:"PollVote",props:{poll:{},disabled:{type:Boolean,default:!1},isAPage:{type:Boolean,default:!1}},setup(n){const e=n,{userInfo:t}=et(en()),i=K([]),s=K(),r=K(),o=K(!1),a=K([]),l=lt(()=>{var f;return(f=e.poll)==null?void 0:f.type}),c=async(f=!1)=>{var x,k;const{data:m}=await Qe.get("/community-post-poll/".concat((x=e==null?void 0:e.poll)==null?void 0:x._id,"/latest-vote")),g=(k=e.poll)==null?void 0:k.options,b=g==null?void 0:g.map(E=>{var P,C;const T=(C=(P=m==null?void 0:m.data)==null?void 0:P.find(A=>A._id===E._id))!=null?C:void 0;return{...E,vote:T!=null?T:void 0}});if(a.value=b!=null?b:[],J.isEmpty(m))return;r.value=m;const w=m.data.map(E=>E.votes);if(!J.isEmpty(w)){for(const E of w)if(!J.isEmpty(E)){const T=E.find(P=>{var C;return P.voter_id===((C=t.value)==null?void 0:C._id)});!J.isEmpty(T)&&f&&(i.value.push(T.option_id),s.value=T.option_id)}}};on(()=>{c(!0)});const d=async(f,m)=>{let g=null;const b=i.value;f.detail.checked?g=[...b!=null?b:[],m]:g=b.filter(w=>w!==m),i.value=g,g!==null&&await u(g)},u=async f=>{var m,g;o.value=!0;try{if(!((m=e.poll)!=null&&m._id)){o.value=!1;return}const{status:b}=await Qe.post("/community-post-poll/".concat((g=e==null?void 0:e.poll)==null?void 0:g._id,"/vote"),{option_ids:f});b===201&&(tt("Bạn đã bỏ phiếu thành công","success"),await c())}catch(b){tt("Có lỗi xảy ra. Vui lòng thử lại.","warning")}finally{o.value=!1}},h=async f=>{if(f.detail.value){const m=[f.detail.value];J.isEmpty(m)||await u(m)}};return(f,m)=>{var g,b,w,x;return I(),O(Ue,null,[_("section",k7e,[f.isAPage?(I(),O(Ue,{key:1},[l.value===y(QL).OneChoice?(I(),O("div",T7e,[L(y(Tc),{value:s.value,modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=k=>s.value=k),onIonChange:h},{default:j(()=>{var k,E,T;return[(I(!0),O(Ue,null,ct((T=(E=a.value)!=null?E:(k=f.poll)==null?void 0:k.options)!=null?T:[],(P,C)=>{var A;return I(),O("div",{key:C,class:"py-1.5 flex items-center gap-2 w-full"},[L(y(La),{disabled:f.disabled,alignment:"center","label-placement":"end",mode:"md",value:P._id,color:"blue1",justify:"start"},null,8,["disabled","value"]),_("div",C7e,[_("div",S7e,Q(P.option),1),L(ZL,{data:P.vote,"poll-id":(A=f.poll)==null?void 0:A._id},null,8,["data","poll-id"])])])}),128))]}),_:1},8,["value","modelValue"])])):l.value===y(QL).MultipleChoice?(I(),O("div",A7e,[(I(!0),O(Ue,null,ct((x=(w=a.value)!=null?w:(b=f.poll)==null?void 0:b.options)!=null?x:[],k=>{var E;return I(),O("div",{key:k._id,class:"py-1.5 flex items-center gap-2 w-full"},[L(y(Xp),{disabled:f.disabled,mode:"md",checked:i.value.includes(k._id),onIonChange:T=>d(T,k._id)},null,8,["disabled","checked","onIonChange"]),_("div",I7e,[_("div",P7e,Q(k.option),1),L(ZL,{data:k.vote,"poll-id":(E=f.poll)==null?void 0:E._id},null,8,["data","poll-id"])])])}),128))])):re("",!0)],64)):(I(),O("div",E7e,[m[1]||(m[1]=_("div",{class:"px-3 border-green-600 border-[1px] rounded-lg py-0.5"}," Bình chọn ",-1)),_("div",null,Q((g=r.value)==null?void 0:g.uniqueVotes)+" thành viên đã bỏ phiếu",1)]))]),L(em,{"is-open":o.value},null,8,["is-open"])],64)}}}),$7e={class:"rounded-lg overflow-hidden"},L7e={key:0,class:"bg-orange-200/70 font-medium text-sm ion-padding-horizontal py-2 flex items-center gap-2"},O7e={class:"bg-white ion-padding"},D7e={class:"flex items-center"},M7e={class:"size-12 rounded-full flex relative"},N7e=["src"],F7e={class:"flex flex-1 items-center"},B7e={class:"line-clamp-1"},V7e={class:"text-sm font-medium text-gray2 flex items-center gap-2 text-nowrap"},U7e={class:"text-black2 text-wrap line-clamp-1"},z7e={class:"flex items-center gap-2 overflow-x-hidden"},H7e={class:"flex-1"},j7e=["innerHTML"],G7e={key:0},W7e=["src"],q7e={key:1,class:"relative flex justify-center size-20 items-center"},K7e=["src"],Y7e={class:"bg-red-500 size-5 rounded-full items-center justify-center flex absolute"},X7e={key:0,class:"mt-4 overflow-x-scroll w-full"},Q7e={key:1},Z7e={class:"mt-4 flex items-center gap-5"},J7e={class:"flex items-center text-sm font-medium text-gray2"},eMe={class:"flex items-center text-sm font-medium text-gray2"},tMe={class:"flex items-center"},nMe={key:0},iMe={key:1},$0=Fe({__name:"DiscussPost",props:{onOptionPress:{type:Function,default:()=>{}},onPostPress:{type:Function,default:()=>{}},onCallbackLike:{type:Function,default:()=>{}},onCallbackShowLikes:{type:Function,default:()=>{}},isAPage:{type:Boolean,default:!1},showOption:{type:Boolean,default:!0},post:{},commentCount:{}},setup(n){var k,E,T,P,C;const e=en(),t=Li(),i=ln(),{isLoggedIn:s,userInfo:r}=et(e),{community:o}=et(i),{userCommunity:a}=et(t),l=n,c="https://unica.expert",d=K(((E=(k=l.post)==null?void 0:k.user_reaction)==null?void 0:E.responder_id)==((T=r.value)==null?void 0:T._id)&&s.value),u=K((C=(P=l.post)==null?void 0:P.total_reactions)!=null?C:0),h=K(0),f=lt(()=>{var A,R,M;return a.value&&a.value.role===Ei.Member&&((A=o.value)!=null&&A.member_last_limit_package)?_t((R=o.value)==null?void 0:R.member_last_limit_package).isBefore((M=a.value)==null?void 0:M.created_at):!1}),m=A=>A.url?A.url.match(/^http/)?A.url:"".concat(c,"/storage/").concat(A.url):"",g=A=>{yS.push({name:"DetectUserCommunityScreen",params:{userId:A}})},b=()=>!a.value||a.value.status!==ms.Joined?(tt("Bạn phải là thành viên của cộng đồng trước. Hãy đăng ký làm thành viên.","warning"),!1):f.value?(tt("Tài khoản bị giới hạn!","warning"),!1):!0,w=async()=>{var R,M,N,U;if(h.value==5){tt("Bạn đã đạt giới hạn like bài viết này vui lòng load lại trang để tiếp tục","warning");return}if(b()&&s.value&&h.value<5){const G={post_id:(R=l.post)==null?void 0:R._id,responder_id:(M=r.value)==null?void 0:M._id,community_id:(N=o.value)==null?void 0:N._id},{data:B}=await Qe.post("/community-reaction",G);(B==null?void 0:B.responder_id)===((U=r.value)==null?void 0:U._id)?(u.value++,d.value=!0):(u.value>0&&u.value--,d.value=!1),h.value++}},x=async()=>{await(await qe.create({component:r7e,componentProps:{post:l==null?void 0:l.post},mode:"ios",initialBreakpoint:.75,cssClass:"userLike"})).present()};return(A,R)=>{var M,N,U,G,B,te,X,ue,he,Ie,xe,Be,Pe,Ae,de,we,ze,le,Se,ne,ie,me,V,F,z,se,Te,ke,Ce,ge,He,Ge,mt,ut,xt,kt;return I(),O("div",$7e,[!A.isAPage&&!y(J.isEmpty)((M=A.post)==null?void 0:M.pin)?(I(),O("div",L7e,[L(y(fe),{src:"/icons/icPin.svg",class:"size-[18px]"}),R[2]||(R[2]=be(" Đã ghim "))])):re("",!0),_("div",O7e,[_("section",D7e,[_("div",M7e,[_("img",{src:(G=(U=(N=A.post)==null?void 0:N.creator)==null?void 0:U.avatar)!=null?G:"/upload-user.png",class:"w-full rounded-full",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,N7e)]),_("div",{class:"text-sm font-medium flex-1 mx-3",onClick:R[0]||(R[0]=qt(It=>{var Je,rt;return g((rt=(Je=A.post)==null?void 0:Je.creator)==null?void 0:rt._id)},["stop"]))},[_("div",F7e,[_("div",B7e,Q((te=(B=A.post)==null?void 0:B.creator)==null?void 0:te.full_name),1)]),_("div",V7e,[be(Q(y(_t)((X=A.post)==null?void 0:X.created_at).from(y(_t)()))+" ",1),_("span",U7e,Q((he=(ue=A.post)==null?void 0:ue.topic)==null?void 0:he.title),1)])]),A.showOption&&((Ie=A.post)==null?void 0:Ie.type)!==y(rh).User?(I(),ve(y(fe),{key:0,onClick:A.onOptionPress,icon:y(Sp),class:"size-6 text-gray2"},null,8,["onClick","icon"])):re("",!0)]),_("div",{onClick:R[1]||(R[1]=(...It)=>A.onPostPress&&A.onPostPress(...It))},[_("div",z7e,[_("div",H7e,[_("div",{class:gt(["my-3 text-base font-medium uppercase text-black2 text-wrap truncate",!A.isAPage&&"line-clamp-1"])},Q((xe=A.post)==null?void 0:xe.title),3),_("div",{class:gt(["text-base font-light text-black2 flex-1",!A.isAPage&&"line-clamp-3"])},[_("div",{innerHTML:(Pe=(Be=A.post)==null?void 0:Be.description)==null?void 0:Pe.trim(),class:"w-full"},null,8,j7e)],2)]),A.isAPage?re("",!0):(I(),O("div",G7e,[(Ae=A.post)!=null&&Ae.attachments&&y(J.isEmpty)((we=(de=A.post)==null?void 0:de.attachments[0])==null?void 0:we.embed_url)&&((le=(ze=A.post)==null?void 0:ze.attachments[0])!=null&&le.url)&&m((Se=A.post)==null?void 0:Se.attachments[0])?(I(),O("img",{key:0,src:(ne=m(A.post.attachments[0]))!=null?ne:"https://placehold.co/100/ddd/ddd",class:"size-20 rounded-md my-1 object-cover",placeholder:"https://placehold.co/100/ddd/ddd"},null,8,W7e)):(ie=A.post)!=null&&ie.attachments&&!y(J.isEmpty)((V=(me=A.post)==null?void 0:me.attachments[0])==null?void 0:V.embed_url)?(I(),O("div",q7e,[_("img",{src:(Te=y(aye)((se=(z=(F=A.post)==null?void 0:F.attachments[0])==null?void 0:z.embed_url)!=null?se:""))!=null?Te:"https://placehold.co/100/ddd/ddd",class:"size-20 rounded-md my-1 object-cover",placeholder:"https://placehold.co/100/ddd/ddd"},null,8,K7e),_("div",Y7e,[L(y(fe),{icon:y(Hbe),class:"text-white size-3"},null,8,["icon"])])])):re("",!0)]))]),A.isAPage?(I(),O("div",X7e,[y(J.isEmpty)((ke=A.post)==null?void 0:ke.attachments)?re("",!0):(I(),ve(d7e,{key:0,attachments:(Ce=A.post)==null?void 0:Ce.attachments},null,8,["attachments"]))])):re("",!0),y(J.isEmpty)((ge=A.post)==null?void 0:ge.poll)?re("",!0):(I(),O("div",Q7e,[_("div",null,[y(J.isEmpty)((He=A.post)==null?void 0:He.poll)?re("",!0):(I(),ve(R7e,{key:0,disabled:!A.isAPage,poll:(Ge=A.post)==null?void 0:Ge.poll,"is-a-page":A.isAPage},null,8,["disabled","poll","is-a-page"]))])])),_("div",Z7e,[_("div",J7e,[_("div",{onClick:qt(w,["stop"]),class:"flex items-center p-1"},[L(y(fe),{src:d.value?"/icons/icThumbupsFill.svg":"/icons/icThumbups.svg",class:"size-5"},null,8,["src"])]),A.isAPage?(I(),O("span",{key:0,onClick:qt(x,["stop"])}," Thích "+Q("(")+Q(u.value)+Q(")"),1)):(I(),O("span",{key:1,onClick:qt(x,["stop"])},Q((mt=u.value)!=null?mt:0),1))]),_("div",eMe,[_("div",tMe,[L(y(fe),{src:"/icons/icChatBubble.svg",class:"size-5 mr-2"})]),A.isAPage?(I(),O("span",nMe,"Bình luận "+Q("("))):re("",!0),be(Q((kt=(xt=A.commentCount)!=null?xt:(ut=A.post)==null?void 0:ut.total_comments)!=null?kt:0),1),A.isAPage?(I(),O("span",iMe,Q(")"))):re("",!0)])])])])])}}}),sMe="/icons/icUnfollow.png",rMe={class:"ion-padding mt-1"},oMe=Fe({__name:"ModalDissFollow",setup(n){const e=async t=>{qe.dismiss(t,"confirm")};return(t,i)=>(I(),O("section",rMe,[_("div",{onClick:e,class:"flex items-center pb-4 gap-3"},i[0]||(i[0]=[_("img",{src:sMe,class:"size-6"},null,-1),_("span",{class:"font-medium text-base"},"Bỏ theo dõi",-1)]))]))}}),aMe={class:"space-y-5 p-4 my-2 rounded-lg border bg-white"},lMe={class:"font-medium text-lg"},cMe={key:0},dMe=["onClick"],uMe=["src"],hMe={class:"flex-col gap-2"},fMe={class:"flex gap-2 w-64"},pMe={class:"text-zinc-950 text-lg font-semibold cursor-pointer truncate"},mMe={class:"flex items-center gap-2"},gMe={class:"text-neutral-500 text-sm font-light"},bMe={class:"text-neutral-500 text-sm font-light"},vMe={class:"text-neutral-500 text-sm font-light"},yMe={key:0},wMe={key:1},JL=Fe({__name:"UserWallCommunities",props:{label:{},data:{},onCardClick:{type:Function,default:()=>{}},onChangeTabListCommunityUser:{type:Function,default:()=>{}}},setup(n){return(e,t)=>(I(),O("div",aMe,[_("h1",lMe,Q(e.label),1),e.data?(I(),O("div",cMe,[(I(!0),O(Ue,null,ct(e.data.data,i=>{var s,r,o,a,l,c,d,u,h,f,m;return I(),O("div",{key:i._id,class:"flex-col w-full"},[_("use",{onClick:g=>e.onCardClick(i.community),class:"flex items-center gap-3 w-full pb-4"},[_("img",{src:(r=(s=i.community)==null?void 0:s.icon)!=null?r:"/favicon.ico",class:"w-12 h-12 rounded-lg shadow",fit:"cover",placeholder:"favicon.ico"},null,8,uMe),_("div",hMe,[_("div",fMe,[_("span",pMe,Q((o=i.community)==null?void 0:o.name),1)]),_("div",mMe,[_("div",gMe,Q(((a=i.community)==null?void 0:a.status)===0?"Riêng tư":"Công khai"),1),t[1]||(t[1]=_("div",{class:"w-1 h-1 text-gray-500 bg-black rounded-full"},null,-1)),_("div",bMe,Q((c=(l=i.community)==null?void 0:l.total_member)!=null?c:0)+" thành viên ",1),t[2]||(t[2]=_("div",{class:"w-1 h-1 text-gray-500 bg-black rounded-full"},null,-1)),_("div",vMe,[((u=(d=i.community)==null?void 0:d.communityFee)==null?void 0:u.price)==null?(I(),O("div",yMe," Miễn phí ")):(I(),O("div",wMe," Giá "+Q((m=(f=(h=i.community)==null?void 0:h.communityFee)==null?void 0:f.price)==null?void 0:m.toLocaleString("vi-VN"))+"đ ",1))])])])],8,dMe)])}),128))])):re("",!0),e.data&&e.data.meta.itemCount>1?(I(),O("div",{key:1,onClick:t[0]||(t[0]=(...i)=>e.onChangeTabListCommunityUser&&e.onChangeTabListCommunityUser(...i)),class:"flex font-medium items-center justify-center w-full bg-gray-100 rounded-lg p-2 text-center"}," Xem tất cả cộng đồng ")):re("",!0)]))}});var Og=(n=>(n.Pending="pending",n.Accepted="accepted",n))(Og||{});const xMe={slot:"start",class:"flex items-center p-3"},_Me={class:"ion-padding pb-10"},kMe={key:0,class:"flex-col items-start gap-3 inline-flex w-full border p-4 rounded-lg bg-white"},EMe={class:"bg-white rounded-lg items-center w-full"},TMe={class:"size-36 mx-auto relative"},CMe=["src"],SMe={class:"text-center mt-3 mx-auto"},AMe={class:"text-[#050505] text-[20px] font-medium"},IMe={key:0,class:"text-sm font-light text-[#929292] flex justify-center items-center gap-x-1"},PMe={class:"text-[#003555] text-sm font-medium py-2"},RMe={class:"text-zinc-950 text-base font-light"},$Me={class:"flex items-center space-x-2"},LMe=["onClick"],OMe={class:"flex items-center space-x-2"},DMe={class:"text-xs text-gray-500"},MMe={class:"font-medium"},NMe={class:"justify-start items-center gap-2 inline-flex"},FMe={class:"text-gray-500 text-base font-light"},BMe={class:"grid grid-cols-3 w-full"},VMe={key:0,class:"border-t border-b text-center py-4"},UMe={class:"flex-col justify-start items-center gap-2 inline-flex"},zMe={class:"text-zinc-950 text-base font-semibold"},HMe={class:"border-l border-t border-b text-center py-4"},jMe={class:"flex-col justify-start items-center gap-2 inline-flex"},GMe={class:"text-zinc-950 text-base font-semibold"},WMe={class:"border-l border-t border-b text-center py-4"},qMe={class:"flex-col justify-start items-center gap-2 inline-flex"},KMe={class:"text-zinc-950 text-base font-semibold"},YMe={class:"flex gap-2.5 flex-1 w-full"},XMe={class:"bg-white px-4 rounded-lg shadow-sm py-2"},QMe={key:0,class:"flex items-center justify-between py-1"},ZMe={class:"flex-[0.65] text-sm text-gray-500"},JMe={class:"truncate"},eNe={class:"size-9"},tNe=["src"],nNe={class:"mt-1.5"},iNe={key:0},sNe={key:0,class:"text-base text-gray2 text-center py-2"},rNe={key:1},oNe={key:0,class:"text-center mt-1.5 bg-white p-2 rounded-lg"},aNe=Fe({__name:"DetectUserCommunityScreen",setup(n){const e=Zr(),t=gn(),i=en(),s=Rr(),r=Va(),{userInfo:o}=et(i),a=ln(),{community:l,communityLevel:c}=et(a),d=K(),u=K(),h=K(),f=K([]),m=K(),g=K(),b=K(l.value),w=K(),x=K(),k=K(0),E=K([]),T=K(1),P=K(!1),C=K(),A=async()=>{var He,Ge,mt,ut,xt,kt,It,Je,rt,Ct,Pt,Xt;const Ce={page:1,limit:1},ge=await Qe.get("/user-community/profile/".concat(e.params.userId),{params:Ce});g.value=ge.data,J.isEmpty(ge.data)||(b.value=(Ge=(He=ge==null?void 0:ge.data)==null?void 0:He.data[0])==null?void 0:Ge.community,Be((It=(xt=(ut=(mt=ge==null?void 0:ge.data)==null?void 0:mt.data[0])==null?void 0:ut.community)==null?void 0:xt._id)!=null?It:(kt=l.value)==null?void 0:kt._id),X((Xt=(Ct=(rt=(Je=ge==null?void 0:ge.data)==null?void 0:Je.data[0])==null?void 0:rt.community)==null?void 0:Ct._id)!=null?Xt:(Pt=l.value)==null?void 0:Pt._id))},R=async()=>{const Ce={page:1,limit:1,"filter[role]":2},{data:ge}=await Qe.get("/user-community/profile/".concat(e.params.userId),{params:Ce});u.value=ge!=null?ge:void 0},M=()=>{t.push({name:"ListCommunityUserScreen",params:{userId:e.params.userId}},Wt)},N=()=>{var Ce,ge;t.push({name:"ListCommunityUserScreen",params:{userId:e.params.userId,username:(ge=(Ce=m.value)==null?void 0:Ce.full_name)!=null?ge:""}},Wt)},U=async()=>{await(await qe.create({component:eH,mode:"ios",cssClass:"noteLevel"})).present()},G=async()=>{var Ce,ge,He,Ge,mt,ut;try{const xt={"w[]":["level"],"filter[community_id]":(Ce=l.value)==null?void 0:Ce._id,"filter[user_id]":e.params.userId},{data:kt}=await Qe.get("/user-community",{params:xt}),It=(He=(ge=c.value)==null?void 0:ge.find(Je=>Je.level_id===(kt==null?void 0:kt.data[0].level_id)))==null?void 0:He.name;if(J.isEmpty(It)||!((Ge=kt==null?void 0:kt.data[0])!=null&&Ge.level))return"";d.value=((ut=(mt=kt==null?void 0:kt.data[0])==null?void 0:mt.level)==null?void 0:ut.name)+" - "+It}catch(xt){console.error("❌ Error fetching user communities:",xt)}},B=async()=>{const{data:Ce}=await Qe.get("/users/".concat(e.params.userId));m.value=Ce!=null?Ce:[]},te=async Ce=>{await Xr.open({url:Ce})},X=async Ce=>{const ge={community_id:Ce},{data:He}=await Qe.get("/users/".concat(e.params.userId,"/contribute"),{params:ge});w.value=He},ue=async()=>{const Ce={community_id:void 0},{data:ge}=await Qe.get("/users/".concat(e.params.userId,"/contribute"),{params:Ce}),He=(ge==null?void 0:ge.totalPosts)+(ge==null?void 0:ge.totalComments)+(ge==null?void 0:ge.totalReactions);k.value=He},he=async()=>{var He;const Ce={"filter[user_id]":(He=o.value)==null?void 0:He._id,"filter[follower_id]":e.params.userId},{data:ge}=await Qe.get("/user-followers",{params:Ce});x.value=ge==null?void 0:ge.data},Ie=async()=>{var Ce,ge;if(J.isEmpty(x.value))await Qe.post("/user-followers",{user_id:(Ce=o.value)==null?void 0:Ce._id,follower_id:e.params.userId})&&(await he(),await B());else{const He=await qe.create({component:oMe,componentProps:{dataFollow:m.value},initialBreakpoint:.15,breakpoints:[0,.15],mode:"ios"});await He.present();const{role:Ge}=await He.onWillDismiss();Ge==="confirm"&&await Qe.delete("/user-followers/".concat(x.value[0]._id),{data:{user_id:(ge=o.value)==null?void 0:ge._id,follower_id:e.params.userId}})&&(await he(),await B())}},xe=async()=>{const Ce=await qe.create({component:qOe,initialBreakpoint:.75,mode:"ios"});await Ce.present();const{data:ge,role:He}=await Ce.onWillDismiss();He==="confirm"&&(h.value=ge,Be(ge==null?void 0:ge.community_id),X(ge==null?void 0:ge.community_id))},Be=async Ce=>{var Ge;const ge={"w[]":["creator","topic","total_comments","total_reactions","user_reaction","poll"],"wo[]":["user_posts"],limit:1,page:1,"filter[community_id]":Ce,"filter[creator_id]":e.params.userId},{data:He}=await Qe.get("/community-post/profile",{params:ge});J.isEmpty(He)||(f.value=(Ge=He==null?void 0:He.data)!=null?Ge:[])},Pe=async Ce=>{await(await qe.create({component:r_,componentProps:{post:Ce},initialBreakpoint:.5,mode:"ios"})).present()},Ae=Ce=>{Ce&&t.push({name:"PostDetailScreen",params:{postId:Ce._id}})},de=async()=>{const Ce=await qe.create({component:Y3,componentProps:{type:"create",isPersonal:!0}});await Ce.present();const{role:ge}=await Ce.onWillDismiss();ge==="posted"&&(le(),T.value=1,P.value=!1)},we=async Ce=>{a.setCommunity(Ce),t.push({name:"CommunityScreen",params:{id:Ce.short_name||Ce._id}},Wt)},ze=()=>{var Ce,ge,He,Ge,mt,ut,xt;((Ce=h.value)!=null&&Ce.community_id||(ge=b.value)!=null&&ge._id)&&t.push({name:"UserCommunityContributeScreen",params:{communityId:((He=h.value)==null?void 0:He.community_id)||((Ge=b.value)==null?void 0:Ge._id),userId:e.params.userId,name:((ut=(mt=h.value)==null?void 0:mt.community)==null?void 0:ut.name)||((xt=b.value)==null?void 0:xt.name)}},Wt)},le=async(Ce=1,ge=!1)=>{var Ge,mt,ut,xt;const{data:He}=await Qe.get("/community-post/profile",{params:{"w[]":["creator","total_comments","total_reactions","user_reaction"],"wo[]":["user_posts"],"filter[creator_id]":(Ge=e.params)==null?void 0:Ge.userId,"filter[community_id]":"null",page:Ce,limit:15}});J.isEmpty(He)?P.value=!1:((mt=He==null?void 0:He.meta)!=null&&mt.hasNextPage?(T.value++,P.value=!0):P.value=!1,ge?E.value=[...E.value,...(ut=He==null?void 0:He.data)!=null?ut:[]]:E.value=(xt=He==null?void 0:He.data)!=null?xt:[])},Se=Ce=>{le(T.value,!0),setTimeout(()=>Ce.target.complete(),500)},ne=async()=>{var ge;const{data:Ce}=await Qe.get("/friend-ship/check-friendship",{params:{senderId:(ge=o.value)==null?void 0:ge._id,receiverId:e.params.userId}});console.log("checkFriend",Ce),C.value=Ce};on(()=>{A(),ne(),R(),B(),G(),he(),ue(),le(),T.value=1,P.value=!1});const ie=()=>t.back(),me=()=>{var Ce;if(J.isEmpty(C.value))return{action:V,label:"Kết bạn"};if(C.value.status===Og.Accepted)return{label:"Bạn bè",action:Te};if(C.value.status===Og.Pending)return C.value.sender_id===((Ce=o.value)==null?void 0:Ce._id)?{label:"Hủy lời mời",action:z}:{label:"Phản hồi",action:se}},V=async()=>{var He;const{status:Ce,data:ge}=await Qe.post("/friend-ship",{senderId:(He=o.value)==null?void 0:He._id,receiverId:e.params.userId,status:Og.Pending});Ce===201&&(C.value=ge)},F=async()=>{const{status:Ce}=await Qe.delete("/friend-ship",{data:{receiverId:e.params.userId}});Ce===200&&(C.value=void 0)},z=async()=>{await(await Fd.create({mode:"ios",backdropDismiss:!1,header:"Huỷ lời mời kết bạn?",buttons:[{text:"Xác nhận",cssClass:"fcb",handler:F},{text:"Bỏ qua",role:"cancel",cssClass:"fcn"}]})).present()},se=async()=>{await(await qe.create({mode:"ios",component:HLe,initialBreakpoint:.35,breakpoints:[0,.35]})).present()},Te=async()=>{const Ce=await qe.create({mode:"ios",component:WLe,initialBreakpoint:.15,breakpoints:[0,.15]});await Ce.present();const{role:ge}=await Ce.onWillDismiss();ge==="remove"&&z()},ke=Ce=>{s.sendMessageSocket("createSingleChatRoom",{user_id:Ce},async ge=>{ge!=null&&ge._id&&(await r.setActiveRoom(ge),t.push({name:"ChatRoom",params:{id:ge==null?void 0:ge._id}},Wt))})};return(Ce,ge)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",xMe,[L(y(fe),{onClick:ie,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),ge[3]||(ge[3]=_("img",{src:Ol,class:"w-auto size-7"},null,-1))])]),_:1})]),_:1}),L(y(At),{color:"white1"},{default:j(()=>{var He,Ge,mt,ut,xt,kt,It,Je,rt,Ct,Pt,Xt,mn,In,ci,ri,wn,Mn,Oi,$r,us,Lr,to,no,ja,Ga,Wa,sa,nr,qa,To,Ts,Co;return[_("div",_Me,[m.value?(I(),O("div",kMe,[_("div",EMe,[_("div",TMe,[_("img",{src:(Ge=(He=m.value)==null?void 0:He.avatar)!=null?Ge:"/upload-user.png",class:"size-36 rounded-full",placeholder:"/upload-user.png"},null,8,CMe)]),_("div",SMe,[_("div",AMe,Q((ut=(mt=m.value)==null?void 0:mt.full_name)!=null?ut:"-"),1),y(l)!=null&&((xt=y(e).params)==null?void 0:xt.t)!=="own"?(I(),O("div",IMe,[_("p",PMe,Q((kt=d.value)!=null?kt:"level 0"),1),L(y(fe),{onClick:U,icon:y(aB),class:"size-5"},null,8,["icon"])])):re("",!0)])]),_("div",RMe,Q((It=m.value)==null?void 0:It.bio),1),(I(!0),O(Ue,null,ct(m.value.socials,Jt=>(I(),O("div",{key:Jt==null?void 0:Jt.id,class:"flex-col items-start gap-2 flex"},[_("div",$Me,[L(y(fe),{icon:y(Ix),class:"w-5 h-5 text-gray-500"},null,8,["icon"]),_("div",{onClick:ir=>te(Jt==null?void 0:Jt.url),class:"text-gray-500"},Q(Jt==null?void 0:Jt.title),9,LMe)])]))),128)),_("div",OMe,[ge[5]||(ge[5]=_("div",{class:"w-2.5 h-2.5 rounded-full bg-green-500 mx-1"},null,-1)),_("div",DMe,[ge[4]||(ge[4]=be(" Hoạt động ")),_("span",MMe,Q(y(_t)((rt=(Je=m.value)==null?void 0:Je.last_deactivated_at)!=null?rt:new Date).fromNow().toString()),1)])]),_("div",NMe,[L(y(fe),{icon:y(DA),class:"w-5 h-5 text-gray-500"},null,8,["icon"]),_("div",FMe,Q(y(_t)((Ct=m.value)==null?void 0:Ct.created_at).format("DD/MM/YYYY")),1)]),_("div",BMe,[w.value?(I(),O("div",VMe,[_("div",UMe,[_("div",zMe,Q(k.value),1),ge[6]||(ge[6]=_("p",{class:"text-zinc-950 text-sm font-light"},"Đóng góp",-1))])])):re("",!0),_("div",HMe,[_("div",jMe,[_("div",GMe,Q((Xt=(Pt=m.value)==null?void 0:Pt.total_follower)!=null?Xt:0),1),ge[7]||(ge[7]=_("p",{class:"text-zinc-950 text-sm font-light"},"Người theo dõi",-1))])]),_("div",WMe,[_("div",qMe,[_("div",KMe,Q((In=(mn=m.value)==null?void 0:mn.total_following)!=null?In:0),1),ge[8]||(ge[8]=_("p",{class:"text-zinc-950 text-sm font-light"},"Đang theo dõi",-1))])])]),_("div",YMe,[((ci=y(e).params)==null?void 0:ci.userId)!=((ri=y(o))==null?void 0:ri._id)?(I(),O("div",{key:0,onClick:ge[0]||(ge[0]=(...Jt)=>{var ir,Or;return((ir=me())==null?void 0:ir.action)&&((Or=me())==null?void 0:Or.action(...Jt))}),class:"flex justify-center gap-2 font-medium items-center py-2 w-full flex-1 text-base uppercase rounded-lg bg-blue1 text-white shadow-sm"},Q((wn=me())==null?void 0:wn.label),1)):re("",!0),((Mn=y(e).params)==null?void 0:Mn.userId)!=((Oi=y(o))==null?void 0:Oi._id)?(I(),O("div",{key:1,onClick:Ie,class:gt(["text-center font-medium items-center py-2 w-full flex-1 text-base uppercase rounded-lg shadow-sm",y(J.isEmpty)(x.value)?"bg-blue1 text-white":"bg-white3 text-[#777777]"])},Q(x.value&&(($r=x.value)==null?void 0:$r.length)>0?"Đang theo dõi":"Theo Dõi"),3)):re("",!0)]),m.value.id!=((us=y(o))==null?void 0:us._id)?(I(),O("div",{key:0,onClick:ge[1]||(ge[1]=Jt=>ke(m.value.id)),class:"flex justify-center items-center py-2 w-full font-medium text-base uppercase rounded-lg text-[#555555] bg-white4 shadow-sm"}," Nhắn Tin ")):(I(),O("div",{key:1,onClick:ge[2]||(ge[2]=Jt=>y(t).push({name:"ChatTab"})),class:"text-center items-center py-2 w-full text-base uppercase rounded-lg text-blue-500 border border-blue-500 bg-white shadow-sm"}," Tin Nhắn "))])):re("",!0),L(JL,{label:"Được tạo bởi ".concat((Lr=m.value)==null?void 0:Lr.full_name),data:u.value,onCardClick:we,onChangeTabListCommunityUser:N},null,8,["label","data"]),L(JL,{label:"Thành viên của cộng đồng",data:g.value,onCardClick:we,onChangeTabListCommunityUser:M},null,8,["data"]),_("section",XMe,[w.value?(I(),O("div",QMe,[_("span",ZMe,Q((to=w.value)==null?void 0:to.totalPosts)+" đóng góp",1),_("div",{onClick:qt(xe,["stop"]),class:"flex-1 flex items-center justify-between text-base rounded-lg border-gray1 border-[1px] p-1.5 overflow-hidden"},[_("span",JMe,Q((Wa=(ja=(no=h.value)==null?void 0:no.community)==null?void 0:ja.name)!=null?Wa:(Ga=b.value)==null?void 0:Ga.name),1),L(y(fe),{icon:y(c0),class:"ml-2"},null,8,["icon"])])])):re("",!0),_("section",null,[(I(!0),O(Ue,null,ct(f.value,(Jt,ir)=>(I(),O("div",{key:ir},[L($0,{"show-option":!1,post:Jt,onOptionPress:Or=>Pe(Jt),onPostPress:Or=>Ae(Jt)},null,8,["post","onOptionPress","onPostPress"])]))),128))]),_("div",{class:"text-base text-center bg-white1 py-1.5 rounded-lg mt-2 font-medium",onClick:ze}," Xem tất cả đóng góp ")]),((sa=y(e).params)==null?void 0:sa.t)==="own"||y(e).params.userId===((nr=y(o))==null?void 0:nr._id)?(I(),O("div",{key:1,onClick:de,class:"bg-white flex items-center mt-4 mb-1.5 gap-4 text-gray2 text-base font-normal p-2 rounded-lg shadow-st"},[_("div",eNe,[_("img",{src:(To=(qa=y(o))==null?void 0:qa.avatar)!=null?To:"/icUser.png",class:"w-full rounded-full"},null,8,tNe)]),ge[9]||(ge[9]=be(" Tạo bài viết "))])):re("",!0),_("section",nNe,[(I(!0),O(Ue,null,ct(E.value,(Jt,ir)=>(I(),O("div",{key:ir,class:"py-1.5"},[L($0,{"show-option":!1,post:Jt,onOptionPress:Or=>Pe(Jt),onPostPress:Or=>Ae(Jt)},null,8,["post","onOptionPress","onPostPress"])]))),128)),y(J.isEmpty)(E.value)?(I(),O("div",iNe,[((Ts=y(e).params)==null?void 0:Ts.t)==="own"?(I(),O("div",sNe,Q("Chưa có nội dung nào"))):re("",!0)])):(I(),O("div",rNe,[((Co=y(e).params)==null?void 0:Co.t)!=="own"?(I(),O("div",oNe,ge[10]||(ge[10]=[_("div",{class:"text-lg font-semibold text-gray2"}," Bạn đã xem hết rồi ",-1),_("div",{class:"font-300 text-sm text-gray2"}," Hãy quay lại sau để xem thêm thông tin mớis ",-1)]))):re("",!0)]))])]),P.value?(I(),ve(y(Zn),{key:0,onIonInfinite:Se},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1})]),_:1}))}}),lNe={key:0,class:"flex flex-1 flex-col h-full"},cNe={class:"w-full mt-20"},dNe={key:1,class:"flex flex-1 flex-col h-full"},uNe={class:"items-center justify-center flex flex-col gap-1 pb-5"},hNe={class:"bg-gray-100 rounded-full relative mb-2"},fNe=["src"],pNe={class:"text-xl font-semibold"},mNe={key:0,class:"text-gray2 font-medium"},gNe={class:"text-black2 font-normal line-clamp-3 px-3"},bNe={class:"w-full"},vNe=["onClick"],yNe=["href"],wNe={class:"flex items-center"},xNe={key:1,class:"w-full font-medium text-black2 flex items-center gap-4"},_Ne={class:"flex items-center"},kNe={key:1,class:"bg-gray-300 w-[95%] h-[1px] mx-auto my-1"},ENe={class:"text-xs text-center mt-2"},TNe=Fe({__name:"AccountScreen",setup(n){const{VITE_IOS_VERSION:e,VITE_ANDROID_VERSION:t,VITE_IOS_SCHEME:i,VITE_ANDROID_SCHEME:s,VITE_MAIL:r,VITE_HOTLINE:o}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},a=en(),l=ln(),c=Li(),d=Ba(),u=Sx(),{userInfo:h,isLoggedIn:f}=et(a),m=gn(),g=Rr(),b=async()=>{var P,C;if(await a.logOut(),l.clear(),c.clear(),d.clear(),u.clear(),J.isEmpty((P=h.value)==null?void 0:P.ggId)||await wg.logout({provider:"google"}),mi("ios")&&((C=h==null?void 0:h.value)==null?void 0:C.ggId)==="apple")try{await wg.logout({provider:"apple"})}catch(A){console.log(A)}g.disconnect(),m.replace({name:"SplashScreen"})},w=()=>{var P;m.push({name:"DetectUserCommunityScreen",params:{userId:(P=h.value)==null?void 0:P._id,t:"own"}})},x=()=>{m.push({name:"AppAboutScreen"},Wt)},E=[{label:"Nhà tôi",action:w,icon:"/account/icMyHome.svg"},{label:"Hồ sơ",action:()=>m.push({name:"UserProfileScreen"},Wt),icon:"/account/icProfile.svg"},{label:"Bạn bè",action:()=>m.push({name:"FriendScreen"},Wt),icon:"/account/icFriend.svg"},{label:"Affiliate",action:()=>m.push({name:"UserAffiliateScreen"},Wt),icon:"/account/icAff.svg"},{label:"Cộng đồng",action:()=>m.push({name:"UserCommunityScreen"},Wt),icon:"/account/icCommunity.svg"},{label:"Sự kiện",action:()=>m.push({name:"UserEventScreen"},Wt),icon:"/account/icEvent.svg"},{label:"Vé của tôi",action:()=>m.push({name:"UserTicketScreen"},Wt),icon:"/account/icTicket.svg"},{label:"Giới thiệu về Unica Expert",action:x,icon:"/account/icAbout.svg"},{label:"Hỗ trợ khách hàng",action:async()=>{await(await Bd.create({mode:"ios",header:"Liên hệ",buttons:[{text:"Hotline: ".concat(o),handler:()=>{document.location.href="tel:".concat(o.trim())}},{text:r,handler:()=>{document.location.href="mailto:".concat(r)}}]})).present()},icon:"/account/icCskh.svg"},{key:"scheme",label:"Đánh giá ứng dụng",scheme:mi("ios")?i:s,icon:"/account/icRate.svg"},{isHide:!0,label:"Đổi mật khẩu",action:()=>m.push({name:"ChangePassword"},Wt),icon:"/account/icChangePassword.svg.svg"},{key:"removeAccount",label:"Đóng tài khoản",action:()=>m.push({name:"AccountDetailScreen"},Wt),icon:"/account/icRemoveAccount.svg"},{key:"logout",label:"Đăng xuất",action:b,icon:"/account/icLogout.svg"}],T=()=>{m.push({name:"LoginScreen"},Wt)};return(P,C)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"})]),_:1}),L(y(At),{class:"ion-padding",color:"white"},{default:j(()=>{var A,R,M,N,U,G;return[!y(f)&&y(J.isEmpty)(y(h))?(I(),O("div",lNe,[C[1]||(C[1]=_("div",{class:"items-center justify-center flex"},[_("img",{src:"/upload-user.png",class:"size-28 rounded-full",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"})],-1)),_("div",cNe,[_("div",{onClick:x,class:"flex items-center ion-padding-horizontal py-2.5 rounded-md"},[C[0]||(C[0]=_("div",{class:"w-full text-black2 font-medium"},Q("Giới thiệu về Unica Expert"),-1)),L(y(fe),{icon:y(Gy)},null,8,["icon"])])]),_("div",{onClick:T,class:"w-full bg-gray1 text-red-500 shadow-st rounded-md mt-10 p-3 text-center font-medium"}," ĐĂNG NHẬP ")])):(I(),O("div",dNe,[_("div",uNe,[_("div",hNe,[_("img",{src:((A=y(h))==null?void 0:A.avatar)||((R=y(h))==null?void 0:R.ggAvatar)||"/upload-user.png",class:"size-28 rounded-full",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,fNe)]),_("div",pNe,Q((M=y(h))==null?void 0:M.full_name),1),(N=y(h))!=null&&N.username?(I(),O("div",mNe," @"+Q((U=y(h))==null?void 0:U.username),1)):re("",!0),_("div",gNe,Q((G=y(h))==null?void 0:G.bio),1),_("section",bNe,[(I(),O(Ue,null,ct(E,(B,te)=>_("div",{key:te,class:"w-full"},[B!=null&&B.isHide?re("",!0):(I(),O("div",{key:0,onClick:B.action,class:"flex items-center ion-padding-horizontal py-2.5 my-.5 rounded-md"},[B.key==="scheme"?(I(),O("a",{key:0,href:B.scheme,class:"no-underline w-full font-medium text-black2 flex items-center gap-4"},[_("div",wNe,[L(y(fe),{src:B.icon,class:"size-6"},null,8,["src"])]),be(" "+Q(B.label),1)],8,yNe)):(I(),O("div",xNe,[_("div",_Ne,[L(y(fe),{src:B.icon,class:"size-6"},null,8,["src"])]),_("div",null,Q(B.label),1)])),L(y(fe),{icon:y(Gy)},null,8,["icon"])],8,vNe)),te<E.length-1&&!B.isHide?(I(),O("div",kNe)):re("",!0)])),64)),_("div",ENe," Phiên bản v"+Q(y(mi)("ios")?y(e):y(t)),1)])])]))]}),_:1})]),_:1}))}}),CNe=Xi(TNe,[["__scopeId","data-v-6c4d215b"]]),SNe={class:"pb-8"},ANe=["onClick"],INe={class:"flex-1"},PNe={class:"pt-1 text-xs text-gray2"},RNe={class:"flex-1"},$Ne={class:"pt-1 text-xs text-gray2"},LNe={class:"h-full flex flex-1 flex-col justify-center items-center"},ONe=Fe({__name:"SegmentMyCommunity",setup(n){const e=gn(),t=ln(),i=K([]),s=K(1),r=K(!1),o=async(c=1,d=!1)=>{var f,m,g;const u={"filter[role]":Ei.Admin,page:c,limit:15},{data:h}=await Qe.get("/user-community/me",{params:u});J.isEmpty(h)?r.value=!1:((f=h==null?void 0:h.meta)!=null&&f.hasNextPage?(s.value++,r.value=!0):r.value=!1,d?i.value=[...i.value,...(m=h==null?void 0:h.data)!=null?m:[]]:i.value=(g=h==null?void 0:h.data)!=null?g:[])};on(()=>{o(),s.value=1,r.value=!1});const a=c=>{t.setCommunity(c),e.push({name:"CommunityScreen",params:{id:c.short_name||c._id}},Wt)},l=c=>{o(s.value,!0),setTimeout(()=>c.target.complete(),500)};return(c,d)=>y(J.isEmpty)(i.value)?(I(),ve(y(At),{key:1,class:"ion-padding",color:"white1"},{default:j(()=>[_("div",LNe,[L(y(fe),{src:"/icEmpty.svg",class:"size-28"}),d[1]||(d[1]=be(" Bạn chưa có cộng đồng nào "))])]),_:1})):(I(),ve(y(At),{key:0,class:"ion-padding",color:"white1"},{default:j(()=>[_("div",SNe,[d[0]||(d[0]=_("section",{class:"flex justify-between gap-2 bg-gray1 py-1.5 rounded-lg"},[_("div",{class:"flex-1 text-center"},"Cộng đồng"),_("div",{class:"text-center flex-1"},"Gói")],-1)),_("section",null,[(I(!0),O(Ue,null,ct(i.value,u=>{var h,f,m;return I(),O("div",{class:"flex-1",key:u._id},[_("div",{onClick:g=>a(u.community),class:"flex flex-1 gap-1 border-b-[1px] border-gray1 my-2 px-2 pb-2"},[_("div",INe,[be(Q((h=u.community)==null?void 0:h.name)+" ",1),_("div",PNe,Q(y(jy)[u.role]),1)]),_("div",RNe,[be(Q((f=u.community)==null?void 0:f.package_code)+" ",1),_("div",$Ne,Q((m=u.community)!=null&&m.package_expires?"Thời hạn: ".concat(y(_t)(u.community.package_expires).format("DD/MM/YYYY")):"Không thời hạn"),1)])],8,ANe)])}),128))])]),r.value?(I(),ve(y(Zn),{key:0,threshold:"0.9%",onIonInfinite:l},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),DNe={class:"pb-8"},MNe=["onClick"],NNe={class:"flex-1"},FNe={class:"pt-1 text-sm text-gray2"},BNe={class:"text-xs pt-1 text-gray2"},VNe={class:"flex-[0.5] text-center"},UNe={class:"pt-1"},zNe={class:"pt-1"},HNe={class:"h-full flex flex-1 flex-col justify-center items-center"},jNe=Fe({__name:"SegmentParticipateCommunity",setup(n){const e=gn(),t=K([]),i=K(1),s=K(!1),r=ln(),o=async(c=1,d=!1)=>{var f,m,g;const u={"filter[ignore_role]":Ei.Admin,page:c,limit:15},{data:h}=await Qe.get("/user-community/me",{params:u});J.isEmpty(h)||(J.isEmpty(h)?s.value=!1:((f=h==null?void 0:h.meta)!=null&&f.hasNextPage?(i.value++,s.value=!0):s.value=!1,d?t.value=[...t.value,...(m=h==null?void 0:h.data)!=null?m:[]]:t.value=(g=h==null?void 0:h.data)!=null?g:[]))};on(()=>{o(),i.value=1,s.value=!1});const a=c=>{r.setCommunity(c),e.push({name:"CommunityScreen",params:{id:c.short_name||c._id}},Wt)},l=c=>{o(i.value,!0),setTimeout(()=>c.target.complete(),500)};return(c,d)=>y(J.isEmpty)(t.value)?(I(),ve(y(At),{key:1,class:"ion-padding",color:"white1"},{default:j(()=>[_("div",HNe,[L(y(fe),{src:"/icEmpty.svg",class:"size-28"}),d[1]||(d[1]=be(" Bạn chưa tham gia cộng đồng nào "))]),s.value?(I(),ve(y(Zn),{key:0,threshold:"0.9%",onIonInfinite:l},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})):(I(),ve(y(At),{key:0,class:"ion-padding",color:"white1"},{default:j(()=>[_("div",DNe,[d[0]||(d[0]=_("section",{class:"flex justify-between gap-2 bg-gray1 py-1.5 rounded-lg"},[_("div",{class:"flex-1 text-center"},"Cộng đồng"),_("div",{class:"text-center flex-[0.5]"},"Cấp độ")],-1)),_("section",null,[(I(!0),O(Ue,null,ct(t.value,u=>{var h,f;return I(),O("div",{class:"flex-1",key:u._id},[_("div",{onClick:m=>a(u.community),class:"flex flex-1 gap-1 border-b-[1px] border-gray1 my-2 px-2 pb-2 items-baseline"},[_("div",NNe,[be(Q((h=u.community)==null?void 0:h.name)+" ",1),_("div",FNe,Q(y(jy)[u.role]),1),_("div",BNe,Q(u!=null&&u.created_at?"Ngày tham gia: ".concat(y(_t)(u.created_at).format("DD/MM/YYYY")):"-"),1)]),_("div",VNe,[_("div",UNe,Q("Cấp độ: ".concat((f=u.level)!=null?f:0)),1),_("div",zNe,Q("Điểm: ".concat(u.point)),1)])],8,MNe)])}),128))])])]),_:1}))}}),GNe={slot:"start",class:"flex items-center p-3"},WNe={class:"flex justify-around bg-white1 ion-padding-horizontal py-1 gap-2"},qNe=Fe({__name:"UserCommunityScreen",setup(n){const e=gn(),t=K("owner"),i=()=>{e.back(Wt)},s=r=>{t.value=r};return(r,o)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white1"},{default:j(()=>[_("div",GNe,[L(y(fe),{onClick:i,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),o[2]||(o[2]=be(" Cộng đồng của tôi "))])]),_:1})]),_:1}),_("section",WNe,[_("div",{onClick:o[0]||(o[0]=a=>s("owner")),class:gt(["py-2 px-1 rounded-lg text-base flex-1 text-center",t.value=="owner"?"bg-blue1-tint1":"bg-white shadow-st"])}," Cộng đồng của tôi ",2),_("div",{onClick:o[1]||(o[1]=a=>s("participate")),class:gt(["py-2 px-1 rounded-lg flex-1 text-center",t.value=="participate"?"bg-blue1-tint1":"bg-white shadow-st"])}," Đã tham gia ",2)]),t.value==="owner"?(I(),ve(ONe,{key:0})):t.value==="participate"?(I(),ve(jNe,{key:1})):re("",!0)]),_:1}))}}),Yk={Female:0,Male:1,Unknown:2},KNe=new Map([[Yk.Female,"Nữ"],[Yk.Male,"Nam"],[Yk.Unknown,"Khác"]]),YNe={class:"flex justify-between items-center w-full p-4 bg-white1"},XNe={class:"flex items-center"},QNe={class:"bg-red-200 flex justify-center items-center"},ZNe=Fe({__name:"ModalBirthdayPicker",props:{selectedDate:{},maxDate:{default:void 0},minDate:{default:void 0},value:{default:void 0}},setup(n){var o;const t=K((o=n.selectedDate)!=null?o:void 0),i=()=>qe.dismiss(),s=async()=>qe.dismiss(t.value,"confirm"),r=a=>{t.value=a.detail.value};return(a,l)=>(I(),ve(y(At),null,{default:j(()=>[_("div",YNe,[_("div",XNe,[L(y(fe),{onClick:i,icon:y(ks),class:"size-7 text-gray2"},null,8,["icon"])]),_("div",{onClick:s,class:"text-blue1 font-medium text-base"}," Xong ")]),_("div",QNe,[L(y(Jpe),{value:a.value,onIonChange:r,placeholder:"Select Date",max:a.maxDate,min:a.minDate,presentation:"date",class:"w-full bg-white",mode:"ios",locale:"vi-VN",size:"cover"},null,8,["value","max","min"])])]),_:1}))}}),SH=Xi(ZNe,[["__scopeId","data-v-f6e40f08"]]),JNe={class:"flex-col h-[75%] bg-white1"},eFe={class:"h-[10%] flex items-center ion-padding-horizontal"},tFe={class:"flex shadow-st rounded-lg bg-white items-center px-2 gap-2"},nFe={class:"overflow-y-scroll h-[90%] bg-white1 pb-8"},iFe=["onClick"],sFe=Fe({__name:"ModalCountriesPicker",props:{data:{},selectedCountry:{}},setup(n){var a;const e=n,t=K((a=e.data)!=null?a:[]),i=()=>{if(r.value){const l=r.value.toLowerCase();t.value=e.data.filter(c=>c.name.toLowerCase().includes(l))}else t.value=e.data},s=async l=>{await qe.dismiss(l,"confirm")},r=K(""),o=()=>{r.value="",t.value=e.data};return(l,c)=>(I(),O("div",JNe,[_("div",eFe,[_("form",{class:"w-full",onSubmit:qt(i,["prevent"])},[_("div",tFe,[L(y(fe),{onClick:i,icon:y(Qd),class:"text-gray2 size-6"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>r.value=d),placeholder:"Tìm kiếm",class:"w-full py-1.5 outline-none"},null,512),[[Ti,r.value]]),y(J.isEmpty)(r.value)?re("",!0):(I(),ve(y(fe),{key:0,icon:y(Ah),onClick:o,class:"text-gray2 size-6"},null,8,["icon"]))])],32)]),_("div",nFe,[(I(!0),O(Ue,null,ct(t.value,d=>{var u;return I(),O("div",{key:d.id,class:gt(["flex justify-between items-center w-full ion-padding-horizontal py-2",((u=l.selectedCountry)==null?void 0:u.id)===d.id?"bg-blue1-tint1":"white"])},[_("div",{onClick:h=>s(d)},Q(d.name),9,iFe)],2)}),128))])]))}}),$b={FullProfile:"full_profile",CompleteProfile:"complete_profile",Ref:"ref",Coupon:"coupon",PaymentSetting:"payment_setting"},AH={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:01\\d|[24-689])\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[25-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-359]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[468]))\\d{4}|(?:305[3-9]|472[24]|505[2-57-9]|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[0135-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function Lb(n,e){var t=Array.prototype.slice.call(e);return t.push(AH),n.apply(this,t)}function LC(n){"@babel/helpers - typeof";return LC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LC(n)}function rFe(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function oFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function aFe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&L0(n,e)}function lFe(n){var e=PH();return function(){var i=O0(n),s;if(e){var r=O0(this).constructor;s=Reflect.construct(i,arguments,r)}else s=i.apply(this,arguments);return cFe(this,s)}}function cFe(n,e){if(e&&(LC(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IH(n)}function IH(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function OC(n){var e=typeof Map=="function"?new Map:void 0;return OC=function(i){if(i===null||!dFe(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,s)}function s(){return Zv(i,arguments,O0(this).constructor)}return s.prototype=Object.create(i.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),L0(s,i)},OC(n)}function Zv(n,e,t){return PH()?Zv=Reflect.construct:Zv=function(s,r,o){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(s,a),c=new l;return o&&L0(c,o.prototype),c},Zv.apply(null,arguments)}function PH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function dFe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function L0(n,e){return L0=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},L0(n,e)}function O0(n){return O0=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O0(n)}var lc=function(n){aFe(t,n);var e=lFe(t);function t(i){var s;return oFe(this,t),s=e.call(this,i),Object.setPrototypeOf(IH(s),t.prototype),s.name=s.constructor.name,s}return rFe(t)}(OC(Error)),X3=2,uFe=17,hFe=3,Pr="0-9０-９٠-٩۰-۹",fFe="-‐-―−ー－",pFe="／/",mFe="．.",gFe="  ­​⁠　",bFe="()（）［］\\[\\]",vFe="~⁓∼～",Aa="".concat(fFe).concat(pFe).concat(mFe).concat(gFe).concat(bFe).concat(vFe),o_="+＋";function eO(n,e){n=n.split("-"),e=e.split("-");for(var t=n[0].split("."),i=e[0].split("."),s=0;s<3;s++){var r=Number(t[s]),o=Number(i[s]);if(r>o)return 1;if(o>r)return-1;if(!isNaN(r)&&isNaN(o))return 1;if(isNaN(r)&&!isNaN(o))return-1}return n[1]&&e[1]?n[1]>e[1]?1:n[1]<e[1]?-1:0:!n[1]&&e[1]?1:n[1]&&!e[1]?-1:0}var yFe={}.constructor;function Dg(n){return n!=null&&n.constructor===yFe}function DC(n){"@babel/helpers - typeof";return DC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DC(n)}function a_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wFe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function l_(n,e,t){return e&&wFe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var xFe="1.2.0",_Fe="1.7.35",tO=" ext. ",kFe=/^\d+$/,Ys=function(){function n(e){a_(this,n),SFe(e),this.metadata=e,$H.call(this,e)}return l_(n,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(t){return t!=="001"})}},{key:"getCountryMetadata",value:function(t){return this.metadata.countries[t]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(t){return this.getCountryMetadata(t)!==void 0}},{key:"hasCallingCode",value:function(t){if(this.getCountryCodesForCallingCode(t))return!0;if(this.nonGeographic()){if(this.nonGeographic()[t])return!0}else{var i=this.countryCallingCodes()[t];if(i&&i.length===1&&i[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(t){return this.nonGeographic()?!!this.nonGeographic()[t]:!this.getCountryCodesForCallingCode(t)}},{key:"country",value:function(t){return this.selectNumberingPlan(t)}},{key:"selectNumberingPlan",value:function(t,i){if(t&&kFe.test(t)&&(i=t,t=null),t&&t!=="001"){if(!this.hasCountry(t))throw new Error("Unknown country: ".concat(t));this.numberingPlan=new nO(this.getCountryMetadata(t),this)}else if(i){if(!this.hasCallingCode(i))throw new Error("Unknown calling code: ".concat(i));this.numberingPlan=new nO(this.getNumberingPlanMetadata(i),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(t){var i=this.countryCallingCodes()[t];if(i)return i.length===1&&i[0].length===3?void 0:i}},{key:"getCountryCodeForCallingCode",value:function(t){var i=this.getCountryCodesForCallingCode(t);if(i)return i[0]}},{key:"getNumberingPlanMetadata",value:function(t){var i=this.getCountryCodeForCallingCode(t);if(i)return this.getCountryMetadata(i);if(this.nonGeographic()){var s=this.nonGeographic()[t];if(s)return s}else{var r=this.countryCallingCodes()[t];if(r&&r.length===1&&r[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(t){return this.numberingPlan.type(t)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(t){return this.selectNumberingPlan(t)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),n}(),nO=function(){function n(e,t){a_(this,n),this.globalMetadataObject=t,this.metadata=e,$H.call(this,t.metadata)}return l_(n,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(t){return t[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var t=this,i=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return i.map(function(s){return new EFe(s,t)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(t){return t[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(t){if(this.hasTypes()&&iO(this.types(),t))return new CFe(iO(this.types(),t),this)}},{key:"ext",value:function(){return this.v1||this.v2?tO:this.metadata[13]||tO}}]),n}(),EFe=function(){function n(e,t){a_(this,n),this._format=e,this.metadata=t}return l_(n,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!TFe.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),n}(),TFe=/^\(?\$1\)?$/,CFe=function(){function n(e,t){a_(this,n),this.type=e,this.metadata=t}return l_(n,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),n}();function iO(n,e){switch(e){case"FIXED_LINE":return n[0];case"MOBILE":return n[1];case"TOLL_FREE":return n[2];case"PREMIUM_RATE":return n[3];case"PERSONAL_NUMBER":return n[4];case"VOICEMAIL":return n[5];case"UAN":return n[6];case"PAGER":return n[7];case"VOIP":return n[8];case"SHARED_COST":return n[9]}}function SFe(n){if(!n)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!Dg(n)||!Dg(n.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(Dg(n)?"an object of shape: { "+Object.keys(n).join(", ")+" }":"a "+AFe(n)+": "+n,"."))}var AFe=function(e){return DC(e)};function c_(n,e){if(e=new Ys(e),e.hasCountry(n))return e.country(n).countryCallingCode();throw new Error("Unknown country: ".concat(n))}function RH(n,e){return e.countries.hasOwnProperty(n)}function $H(n){var e=n.version;typeof e=="number"?(this.v1=e===1,this.v2=e===2,this.v3=e===3,this.v4=e===4):e?eO(e,xFe)===-1?this.v2=!0:eO(e,_Fe)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var IFe=";ext=",uf=function(e){return"([".concat(Pr,"]{1,").concat(e,"})")};function LH(n){var e="20",t="15",i="9",s="6",r="[  \\t,]*",o="[:\\.．]?[  \\t,-]*",a="#?",l="(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)",c="(?:[xｘ#＃~～]|int|ｉｎｔ)",d="[- ]+",u="[  \\t]*",h="(?:,{2}|;)",f=IFe+uf(e),m=r+l+o+uf(e)+a,g=r+c+o+uf(i)+a,b=d+uf(s)+"#",w=u+h+o+uf(t)+a,x=u+"(?:,)+"+o+uf(i)+a;return f+"|"+m+"|"+g+"|"+b+"|"+w+"|"+x}var PFe="["+Pr+"]{"+X3+"}",RFe="["+o_+"]{0,1}(?:["+Aa+"]*["+Pr+"]){3,}["+Aa+Pr+"]*",$Fe=new RegExp("^["+o_+"]{0,1}(?:["+Aa+"]*["+Pr+"]){1,2}$","i"),LFe=RFe+"(?:"+LH()+")?",OFe=new RegExp("^"+PFe+"$|^"+LFe+"$","i");function DFe(n){return n.length>=X3&&OFe.test(n)}function MFe(n){return $Fe.test(n)}var sO=new RegExp("(?:"+LH()+")$","i");function NFe(n){var e=n.search(sO);if(e<0)return{};for(var t=n.slice(0,e),i=n.match(sO),s=1;s<i.length;){if(i[s])return{number:t,ext:i[s]};s++}}function FFe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=BFe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function BFe(n,e){if(n){if(typeof n=="string")return rO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rO(n,e)}}function rO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var VFe={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function OH(n){return VFe[n]}function bw(n){for(var e="",t=FFe(n.split("")),i;!(i=t()).done;){var s=i.value,r=OH(s);r&&(e+=r)}return e}function UFe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=zFe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zFe(n,e){if(n){if(typeof n=="string")return oO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oO(n,e)}}function oO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function aO(n){for(var e="",t=UFe(n.split("")),i;!(i=t()).done;){var s=i.value;e+=HFe(s,e)||""}return e}function HFe(n,e,t){return n==="+"?e?void 0:"+":OH(n)}function d_(n,e){return jFe(n,void 0,e)}function jFe(n,e,t){var i=t.type(e),s=i&&i.possibleLengths()||t.possibleLengths();if(!s)return"IS_POSSIBLE";var r=n.length,o=s[0];return o===r?"IS_POSSIBLE":o>r?"TOO_SHORT":s[s.length-1]<r?"TOO_LONG":s.indexOf(r,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function GFe(n,e,t){if(e===void 0&&(e={}),t=new Ys(t),e.v2){if(!n.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(n.countryCallingCode)}else{if(!n.phone)return!1;if(n.country){if(!t.hasCountry(n.country))throw new Error("Unknown country: ".concat(n.country));t.country(n.country)}else{if(!n.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(n.countryCallingCode)}}if(t.possibleLengths())return DH(n.phone||n.nationalNumber,t);if(n.countryCallingCode&&t.isNonGeographicCallingCode(n.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function DH(n,e){switch(d_(n,e)){case"IS_POSSIBLE":return!0;default:return!1}}function Mc(n,e){return n=n||"",new RegExp("^(?:"+e+")$").test(n)}function WFe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=qFe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qFe(n,e){if(n){if(typeof n=="string")return lO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lO(n,e)}}function lO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var KFe=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function Q3(n,e,t){if(e=e||{},!(!n.country&&!n.countryCallingCode)){t=new Ys(t),t.selectNumberingPlan(n.country,n.countryCallingCode);var i=e.v2?n.nationalNumber:n.phone;if(Mc(i,t.nationalNumberPattern())){if(Xk(i,"FIXED_LINE",t))return t.type("MOBILE")&&t.type("MOBILE").pattern()===""||!t.type("MOBILE")||Xk(i,"MOBILE",t)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var s=WFe(KFe),r;!(r=s()).done;){var o=r.value;if(Xk(i,o,t))return o}}}}function Xk(n,e,t){return e=t.type(e),!e||!e.pattern()||e.possibleLengths()&&e.possibleLengths().indexOf(n.length)<0?!1:Mc(n,e.pattern())}function YFe(n,e,t){if(e=e||{},t=new Ys(t),t.selectNumberingPlan(n.country,n.countryCallingCode),t.hasTypes())return Q3(n,e,t.metadata)!==void 0;var i=e.v2?n.nationalNumber:n.phone;return Mc(i,t.nationalNumberPattern())}function XFe(n,e,t){var i=new Ys(t),s=i.getCountryCodesForCallingCode(n);return s?s.filter(function(r){return QFe(e,r,t)}):[]}function QFe(n,e,t){var i=new Ys(t);return i.selectNumberingPlan(e),i.numberingPlan.possibleLengths().indexOf(n.length)>=0}function MH(n){return n.replace(new RegExp("[".concat(Aa,"]+"),"g")," ").trim()}var NH=/(\$\d)/;function FH(n,e,t){var i=t.useInternationalFormat,s=t.withNationalPrefix;t.carrierCode,t.metadata;var r=n.replace(new RegExp(e.pattern()),i?e.internationalFormat():s&&e.nationalPrefixFormattingRule()?e.format().replace(NH,e.nationalPrefixFormattingRule()):e.format());return i?MH(r):r}var ZFe=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function JFe(n,e,t){var i=new Ys(t);if(i.selectNumberingPlan(n,e),i.defaultIDDPrefix())return i.defaultIDDPrefix();if(ZFe.test(i.IDDPrefix()))return i.IDDPrefix()}function eBe(n){var e=n.number,t=n.ext;if(!e)return"";if(e[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(e).concat(t?";ext="+t:"")}function tBe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=nBe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nBe(n,e){if(n){if(typeof n=="string")return cO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cO(n,e)}}function cO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function dO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function uO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(t),!0).forEach(function(i){iBe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dO(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function iBe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var hO={formatExtension:function(e,t,i){return"".concat(e).concat(i.ext()).concat(t)}};function sBe(n,e,t,i){if(t?t=uO(uO({},hO),t):t=hO,i=new Ys(i),n.country&&n.country!=="001"){if(!i.hasCountry(n.country))throw new Error("Unknown country: ".concat(n.country));i.country(n.country)}else if(n.countryCallingCode)i.selectNumberingPlan(n.countryCallingCode);else return n.phone||"";var s=i.countryCallingCode(),r=t.v2?n.nationalNumber:n.phone,o;switch(e){case"NATIONAL":return r?(o=vw(r,n.carrierCode,"NATIONAL",i,t),Qk(o,n.ext,i,t.formatExtension)):"";case"INTERNATIONAL":return r?(o=vw(r,null,"INTERNATIONAL",i,t),o="+".concat(s," ").concat(o),Qk(o,n.ext,i,t.formatExtension)):"+".concat(s);case"E.164":return"+".concat(s).concat(r);case"RFC3966":return eBe({number:"+".concat(s).concat(r),ext:n.ext});case"IDD":if(!t.fromCountry)return;var a=oBe(r,n.carrierCode,s,t.fromCountry,i);return Qk(a,n.ext,i,t.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function vw(n,e,t,i,s){var r=rBe(i.formats(),n);return r?FH(n,r,{useInternationalFormat:t==="INTERNATIONAL",withNationalPrefix:!(r.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&s&&s.nationalPrefix===!1),carrierCode:e,metadata:i}):n}function rBe(n,e){for(var t=tBe(n),i;!(i=t()).done;){var s=i.value;if(s.leadingDigitsPatterns().length>0){var r=s.leadingDigitsPatterns()[s.leadingDigitsPatterns().length-1];if(e.search(r)!==0)continue}if(Mc(e,s.pattern()))return s}}function Qk(n,e,t,i){return e?i(n,e,t):n}function oBe(n,e,t,i,s){var r=c_(i,s.metadata);if(r===t){var o=vw(n,e,"NATIONAL",s);return t==="1"?t+" "+o:o}var a=JFe(i,void 0,s.metadata);if(a)return"".concat(a," ").concat(t," ").concat(vw(n,null,"INTERNATIONAL",s))}function fO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function pO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fO(Object(t),!0).forEach(function(i){aBe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fO(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function aBe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lBe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cBe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function dBe(n,e,t){return cBe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var Z3=function(){function n(e,t,i){if(lBe(this,n),!e)throw new TypeError("`country` or `countryCallingCode` not passed");if(!t)throw new TypeError("`nationalNumber` not passed");if(!i)throw new TypeError("`metadata` not passed");var s=hBe(e,i),r=s.country,o=s.countryCallingCode;this.country=r,this.countryCallingCode=o,this.nationalNumber=t,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return i}}return dBe(n,[{key:"setExt",value:function(t){this.ext=t}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:XFe(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return GFe(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return YFe(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var t=new Ys(this.getMetadata());return t.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(t){return this.number===t.number&&this.ext===t.ext}},{key:"getType",value:function(){return Q3(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(t,i){return sBe(this,t,i?pO(pO({},i),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(t){return this.format("NATIONAL",t)}},{key:"formatInternational",value:function(t){return this.format("INTERNATIONAL",t)}},{key:"getURI",value:function(t){return this.format("RFC3966",t)}}]),n}(),uBe=function(e){return/^[A-Z]{2}$/.test(e)};function hBe(n,e){var t,i,s=new Ys(e);return uBe(n)?(t=n,s.selectNumberingPlan(t),i=s.countryCallingCode()):i=n,{country:t,countryCallingCode:i}}var fBe=new RegExp("(["+Pr+"])");function BH(n,e,t,i){if(e){var s=new Ys(i);s.selectNumberingPlan(e,t);var r=new RegExp(s.IDDPrefix());if(n.search(r)===0){n=n.slice(n.match(r)[0].length);var o=n.match(fBe);if(!(o&&o[1]!=null&&o[1].length>0&&o[1]==="0"))return n}}}function MC(n,e){if(n&&e.numberingPlan.nationalPrefixForParsing()){var t=new RegExp("^(?:"+e.numberingPlan.nationalPrefixForParsing()+")"),i=t.exec(n);if(i){var s,r,o=i.length-1,a=o>0&&i[o];if(e.nationalPrefixTransformRule()&&a)s=n.replace(t,e.nationalPrefixTransformRule()),o>1&&(r=i[1]);else{var l=i[0];s=n.slice(l.length),a&&(r=i[1])}var c;if(a){var d=n.indexOf(i[1]),u=n.slice(0,d);u===e.numberingPlan.nationalPrefix()&&(c=e.numberingPlan.nationalPrefix())}else c=i[0];return{nationalNumber:s,nationalPrefix:c,carrierCode:r}}}return{nationalNumber:n}}function NC(n,e){var t=MC(n,e),i=t.carrierCode,s=t.nationalNumber;if(s!==n){if(!pBe(n,s,e))return{nationalNumber:n};if(e.possibleLengths()&&!mBe(s,e))return{nationalNumber:n}}return{nationalNumber:s,carrierCode:i}}function pBe(n,e,t){return!(Mc(n,t.nationalNumberPattern())&&!Mc(e,t.nationalNumberPattern()))}function mBe(n,e){switch(d_(n,e)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function VH(n,e,t,i){var s=e?c_(e,i):t;if(n.indexOf(s)===0){i=new Ys(i),i.selectNumberingPlan(e,t);var r=n.slice(s.length),o=NC(r,i),a=o.nationalNumber,l=NC(n,i),c=l.nationalNumber;if(!Mc(c,i.nationalNumberPattern())&&Mc(a,i.nationalNumberPattern())||d_(c,i)==="TOO_LONG")return{countryCallingCode:s,number:r}}return{number:n}}function UH(n,e,t,i){if(!n)return{};var s;if(n[0]!=="+"){var r=BH(n,e,t,i);if(r&&r!==n)s=!0,n="+"+r;else{if(e||t){var o=VH(n,e,t,i),a=o.countryCallingCode,l=o.number;if(a)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:a,number:l}}return{number:n}}}if(n[1]==="0")return{};i=new Ys(i);for(var c=2;c-1<=hFe&&c<=n.length;){var d=n.slice(1,c);if(i.hasCallingCode(d))return i.selectNumberingPlan(d),{countryCallingCodeSource:s?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:d,number:n.slice(c)};c++}return{}}function gBe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=bBe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bBe(n,e){if(n){if(typeof n=="string")return mO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mO(n,e)}}function mO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function zH(n,e){var t=e.countries;e.defaultCountry;var i=e.metadata;i=new Ys(i);for(var s=gBe(t),r;!(r=s()).done;){var o=r.value;if(i.country(o),i.leadingDigits()){if(n&&n.search(i.leadingDigits())===0)return o}else if(Q3({phone:n,country:o},void 0,i.metadata))return o}}function HH(n,e){var t=e.nationalNumber,i=e.defaultCountry,s=e.metadata,r=s.getCountryCodesForCallingCode(n);if(r)return r.length===1?r[0]:zH(t,{countries:r,defaultCountry:i,metadata:s.metadata})}var jH="+",vBe="[\\-\\.\\(\\)]?",gO="(["+Pr+"]|"+vBe+")",yBe="^\\"+jH+gO+"*["+Pr+"]"+gO+"*$",wBe=new RegExp(yBe,"g"),FC=Pr,xBe="["+FC+"]+((\\-)*["+FC+"])*",_Be="a-zA-Z",kBe="["+_Be+"]+((\\-)*["+FC+"])*",EBe="^("+xBe+"\\.)*"+kBe+"\\.?$",TBe=new RegExp(EBe,"g"),bO="tel:",BC=";phone-context=",CBe=";isub=";function SBe(n){var e=n.indexOf(BC);if(e<0)return null;var t=e+BC.length;if(t>=n.length)return"";var i=n.indexOf(";",t);return i>=0?n.substring(t,i):n.substring(t)}function ABe(n){return n===null?!0:n.length===0?!1:wBe.test(n)||TBe.test(n)}function IBe(n,e){var t=e.extractFormattedPhoneNumber,i=SBe(n);if(!ABe(i))throw new lc("NOT_A_NUMBER");var s;if(i===null)s=t(n)||"";else{s="",i.charAt(0)===jH&&(s+=i);var r=n.indexOf(bO),o;r>=0?o=r+bO.length:o=0;var a=n.indexOf(BC);s+=n.substring(o,a)}var l=s.indexOf(CBe);if(l>0&&(s=s.substring(0,l)),s!=="")return s}var PBe=250,RBe=new RegExp("["+o_+Pr+"]"),$Be=new RegExp("[^"+Pr+"#]+$");function LBe(n,e,t){if(e=e||{},t=new Ys(t),e.defaultCountry&&!t.hasCountry(e.defaultCountry))throw e.v2?new lc("INVALID_COUNTRY"):new Error("Unknown country: ".concat(e.defaultCountry));var i=DBe(n,e.v2,e.extract),s=i.number,r=i.ext,o=i.error;if(!s){if(e.v2)throw o==="TOO_SHORT"?new lc("TOO_SHORT"):new lc("NOT_A_NUMBER");return{}}var a=NBe(s,e.defaultCountry,e.defaultCallingCode,t),l=a.country,c=a.nationalNumber,d=a.countryCallingCode,u=a.countryCallingCodeSource,h=a.carrierCode;if(!t.hasSelectedNumberingPlan()){if(e.v2)throw new lc("INVALID_COUNTRY");return{}}if(!c||c.length<X3){if(e.v2)throw new lc("TOO_SHORT");return{}}if(c.length>uFe){if(e.v2)throw new lc("TOO_LONG");return{}}if(e.v2){var f=new Z3(d,c,t.metadata);return l&&(f.country=l),h&&(f.carrierCode=h),r&&(f.ext=r),f.__countryCallingCodeSource=u,f}var m=(e.extended?t.hasSelectedNumberingPlan():l)?Mc(c,t.nationalNumberPattern()):!1;return e.extended?{country:l,countryCallingCode:d,carrierCode:h,valid:m,possible:m?!0:!!(e.extended===!0&&t.possibleLengths()&&DH(c,t)),phone:c,ext:r}:m?MBe(l,c,r):{}}function OBe(n,e,t){if(n){if(n.length>PBe){if(t)throw new lc("TOO_LONG");return}if(e===!1)return n;var i=n.search(RBe);if(!(i<0))return n.slice(i).replace($Be,"")}}function DBe(n,e,t){var i=IBe(n,{extractFormattedPhoneNumber:function(o){return OBe(o,t,e)}});if(!i)return{};if(!DFe(i))return MFe(i)?{error:"TOO_SHORT"}:{};var s=NFe(i);return s.ext?s:{number:i}}function MBe(n,e,t){var i={country:n,phone:e};return t&&(i.ext=t),i}function NBe(n,e,t,i){var s=UH(aO(n),e,t,i.metadata),r=s.countryCallingCodeSource,o=s.countryCallingCode,a=s.number,l;if(o)i.selectNumberingPlan(o);else if(a&&(e||t))i.selectNumberingPlan(e,t),e&&(l=e),o=t||c_(e,i.metadata);else return{};if(!a)return{countryCallingCodeSource:r,countryCallingCode:o};var c=NC(aO(a),i),d=c.nationalNumber,u=c.carrierCode,h=HH(o,{nationalNumber:d,defaultCountry:e,metadata:i});return h&&(l=h,h==="001"||i.country(l)),{country:l,countryCallingCode:o,countryCallingCodeSource:r,nationalNumber:d,carrierCode:u}}function vO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function yO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vO(Object(t),!0).forEach(function(i){FBe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vO(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function FBe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BBe(n,e,t){return LBe(n,yO(yO({},e),{},{v2:!0}),t)}function wO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function VBe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wO(Object(t),!0).forEach(function(i){UBe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wO(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function UBe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zBe(n,e){return WBe(n)||GBe(n,e)||jBe(n,e)||HBe()}function HBe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jBe(n,e){if(n){if(typeof n=="string")return xO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xO(n,e)}}function xO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function GBe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function WBe(n){if(Array.isArray(n))return n}function qBe(n){var e=Array.prototype.slice.call(n),t=zBe(e,4),i=t[0],s=t[1],r=t[2],o=t[3],a,l,c;if(typeof i=="string")a=i;else throw new TypeError("A text for parsing must be a string.");if(!s||typeof s=="string")o?(l=r,c=o):(l=void 0,c=r),s&&(l=VBe({defaultCountry:s},l));else if(Dg(s))r?(l=s,c=r):c=s;else throw new Error("Invalid second argument: ".concat(s));return{text:a,options:l,metadata:c}}function _O(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function kO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_O(Object(t),!0).forEach(function(i){KBe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_O(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KBe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YBe(n,e,t){e&&e.defaultCountry&&!RH(e.defaultCountry,t)&&(e=kO(kO({},e),{},{defaultCountry:void 0}));try{return BBe(n,e,t)}catch(i){if(!(i instanceof lc))throw i}}function XBe(){var n=qBe(arguments),e=n.text,t=n.options,i=n.metadata;return YBe(e,t,i)}function QBe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ZBe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function JBe(n,e,t){return ZBe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var eVe=function(){function n(e){var t=e.onCountryChange,i=e.onCallingCodeChange;QBe(this,n),this.onCountryChange=t,this.onCallingCodeChange=i}return JBe(n,[{key:"reset",value:function(t){var i=t.country,s=t.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(i,s)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(t){for(var i=0,s=Object.keys(t);i<s.length;i++){var r=s[i];this[r]=t[r]}}},{key:"initCountryAndCallingCode",value:function(t,i){this.setCountry(t),this.setCallingCode(i)}},{key:"setCountry",value:function(t){this.country=t,this.onCountryChange(t)}},{key:"setCallingCode",value:function(t){this.callingCode=t,this.onCallingCodeChange(t,this.country)}},{key:"startInternationalNumber",value:function(t,i){this.international=!0,this.initCountryAndCallingCode(t,i)}},{key:"appendDigits",value:function(t){this.digits+=t}},{key:"appendNationalSignificantNumberDigits",value:function(t){this.nationalSignificantNumber+=t}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}]),n}();function tVe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=nVe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nVe(n,e){if(n){if(typeof n=="string")return EO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return EO(n,e)}}function EO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var ua="x",Zk=new RegExp(ua);function Jv(n,e){if(e<1)return"";for(var t="";e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function TO(n,e){return n[e]===")"&&e++,iVe(n.slice(0,e))}function iVe(n){for(var e=[],t=0;t<n.length;)n[t]==="("?e.push(t):n[t]===")"&&e.pop(),t++;var i=0,s="";e.push(n.length);for(var r=0,o=e;r<o.length;r++){var a=o[r];s+=n.slice(i,a),i=a+1}return s}function sVe(n,e,t){for(var i=tVe(t.split("")),s;!(s=i()).done;){var r=s.value;if(n.slice(e+1).search(Zk)<0)return;e=n.search(Zk),n=n.replace(Zk,r)}return[n,e]}function rVe(n,e,t){var i=t.metadata,s=t.shouldTryNationalPrefixFormattingRule,r=t.getSeparatorAfterNationalPrefix,o=new RegExp("^(?:".concat(e.pattern(),")$"));if(o.test(n.nationalSignificantNumber))return aVe(n,e,{metadata:i,shouldTryNationalPrefixFormattingRule:s,getSeparatorAfterNationalPrefix:r})}function oVe(n,e){return d_(n,e)==="IS_POSSIBLE"}function aVe(n,e,t){var i=t.metadata,s=t.shouldTryNationalPrefixFormattingRule,r=t.getSeparatorAfterNationalPrefix;if(n.nationalSignificantNumber,n.international,n.nationalPrefix,n.carrierCode,s(e)){var o=CO(n,e,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:r,metadata:i});if(o)return o}return CO(n,e,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:r,metadata:i})}function CO(n,e,t){var i=t.metadata,s=t.useNationalPrefixFormattingRule,r=t.getSeparatorAfterNationalPrefix,o=FH(n.nationalSignificantNumber,e,{carrierCode:n.carrierCode,useInternationalFormat:n.international,withNationalPrefix:s,metadata:i});if(s||(n.nationalPrefix?o=n.nationalPrefix+r(e)+o:n.complexPrefixBeforeNationalSignificantNumber&&(o=n.complexPrefixBeforeNationalSignificantNumber+" "+o)),lVe(o,n))return o}function lVe(n,e){return bw(n)===e.getNationalDigits()}function cVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dVe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function uVe(n,e,t){return dVe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var hVe=function(){function n(){cVe(this,n)}return uVe(n,[{key:"parse",value:function(t){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(t),this.context.length!==1)throw new Error("Non-finalized contexts left when pattern parse ended");var i=this.context[0],s=i.branches,r=i.instructions;if(s)return{op:"|",args:s.concat([Jk(r)])};if(r.length===0)throw new Error("Pattern is required");return r.length===1?r[0]:r}},{key:"startContext",value:function(t){this.context.push(t)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(t){if(!t)throw new Error("Pattern is required");var i=t.match(mVe);if(!i){if(pVe.test(t))throw new Error("Illegal characters found in a pattern: ".concat(t));this.getContext().instructions=this.getContext().instructions.concat(t.split(""));return}var s=i[1],r=t.slice(0,i.index),o=t.slice(i.index+s.length);switch(s){case"(?:":r&&this.parsePattern(r),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(r&&this.parsePattern(r),this.getContext().instructions.length===0)throw new Error('No instructions found after "|" operator in an "or" group');var a=this.getContext(),l=a.branches;l.push(Jk(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:l});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(r&&this.parsePattern(r),!this.getContext().branches)if(this.context.length===1)this.getContext().branches=[];else throw new Error('"branches" not found in an "or" group context');this.getContext().branches.push(Jk(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":r&&this.parsePattern(r),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:fVe(r)});break;default:throw new Error("Unknown operator: ".concat(s))}o&&this.parsePattern(o)}}]),n}();function fVe(n){for(var e=[],t=0;t<n.length;){if(n[t]==="-"){if(t===0||t===n.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(n));for(var i=n[t-1].charCodeAt(0)+1,s=n[t+1].charCodeAt(0)-1,r=i;r<=s;)e.push(String.fromCharCode(r)),r++}else e.push(n[t]);t++}return e}var pVe=/[\(\)\[\]\?\:\|]/,mVe=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function Jk(n){return n.length===1?n[0]:n}function SO(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=gVe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gVe(n,e){if(n){if(typeof n=="string")return AO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AO(n,e)}}function AO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function bVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function vVe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function yVe(n,e,t){return vVe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var wVe=function(){function n(e){bVe(this,n),this.matchTree=new hVe().parse(e)}return yVe(n,[{key:"match",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.allowOverflow;if(!t)throw new Error("String is required");var r=VC(t.split(""),this.matchTree,!0);if(r&&r.match&&delete r.matchedChars,!(r&&r.overflow&&!s))return r}}]),n}();function VC(n,e,t){if(typeof e=="string"){var i=n.join("");return e.indexOf(i)===0?n.length===e.length?{match:!0,matchedChars:n}:{partialMatch:!0}:i.indexOf(e)===0?t&&n.length>e.length?{overflow:!0}:{match:!0,matchedChars:n.slice(0,e.length)}:void 0}if(Array.isArray(e)){for(var s=n.slice(),r=0;r<e.length;){var o=e[r],a=VC(s,o,t&&r===e.length-1);if(a){if(a.overflow)return a;if(a.match){if(s=s.slice(a.matchedChars.length),s.length===0)return r===e.length-1?{match:!0,matchedChars:n}:{partialMatch:!0}}else{if(a.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(a,null,2)))}}else return;r++}return t?{overflow:!0}:{match:!0,matchedChars:n.slice(0,n.length-s.length)}}switch(e.op){case"|":for(var l,c=SO(e.args),d;!(d=c()).done;){var u=d.value,h=VC(n,u,t);if(h){if(h.overflow)return h;if(h.match)return{match:!0,matchedChars:h.matchedChars};if(h.partialMatch)l=!0;else throw new Error("Unsupported match result:\n".concat(JSON.stringify(h,null,2)))}}return l?{partialMatch:!0}:void 0;case"[]":for(var f=SO(e.args),m;!(m=f()).done;){var g=m.value;if(n[0]===g)return n.length===1?{match:!0,matchedChars:n}:t?{overflow:!0}:{match:!0,matchedChars:[g]}}return;default:throw new Error("Unsupported instruction tree: ".concat(e))}}function IO(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=xVe(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xVe(n,e){if(n){if(typeof n=="string")return PO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PO(n,e)}}function PO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function _Ve(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kVe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function EVe(n,e,t){return kVe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var UC="9",TVe=15,CVe=Jv(UC,TVe),SVe=/[- ]/,AVe=function(){return/\[([^\[\]])*\]/g},IVe=function(){return/\d(?=[^,}][^,}])/g},PVe=new RegExp("["+Aa+"]*\\$1["+Aa+"]*(\\$\\d["+Aa+"]*)*$"),RO=3,RVe=function(){function n(e){e.state;var t=e.metadata;_Ve(this,n),this.metadata=t,this.resetFormat()}return EVe(n,[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(t,i){this.resetFormat(),t?(this.isNANP=t.callingCode()==="1",this.matchingFormats=t.formats(),i.nationalSignificantNumber&&this.narrowDownMatchingFormats(i)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(t,i){var s=this;if(oVe(i.nationalSignificantNumber,this.metadata))for(var r=IO(this.matchingFormats),o;!(o=r()).done;){var a=o.value,l=rVe(i,a,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(d){return s.shouldTryNationalPrefixFormattingRule(d,{international:i.international,nationalPrefix:i.nationalPrefix})},getSeparatorAfterNationalPrefix:function(d){return s.getSeparatorAfterNationalPrefix(d)}});if(l)return this.resetFormat(),this.chosenFormat=a,this.setNationalNumberTemplate(l.replace(/\d/g,ua),i),this.populatedNationalNumberTemplate=l,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(ua),l}return this.formatNationalNumberWithNextDigits(t,i)}},{key:"formatNationalNumberWithNextDigits",value:function(t,i){var s=this.chosenFormat,r=this.chooseFormat(i);if(r)return r===s?this.formatNextNationalNumberDigits(t):this.formatNextNationalNumberDigits(i.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(t){var i=this,s=t.nationalSignificantNumber,r=t.nationalPrefix,o=t.international,a=s,l=a.length-RO;l<0&&(l=0),this.matchingFormats=this.matchingFormats.filter(function(c){return i.formatSuits(c,o,r)&&i.formatMatches(c,a,l)}),this.chosenFormat&&this.matchingFormats.indexOf(this.chosenFormat)===-1&&this.resetFormat()}},{key:"formatSuits",value:function(t,i,s){return!(s&&!t.usesNationalPrefix()&&!t.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!i&&!s&&t.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(t,i,s){var r=t.leadingDigitsPatterns().length;if(r===0)return!0;s=Math.min(s,r-1);var o=t.leadingDigitsPatterns()[s];if(i.length<RO)try{return new wVe(o).match(i,{allowOverflow:!0})!==void 0}catch(a){return console.error(a),!0}return new RegExp("^(".concat(o,")")).test(i)}},{key:"getFormatFormat",value:function(t,i){return i?t.internationalFormat():t.format()}},{key:"chooseFormat",value:function(t){for(var i=this,s=function(){var c=o.value;return i.chosenFormat===c?"break":PVe.test(i.getFormatFormat(c,t.international))?i.createTemplateForFormat(c,t)?(i.chosenFormat=c,"break"):(i.matchingFormats=i.matchingFormats.filter(function(d){return d!==c}),"continue"):"continue"},r=IO(this.matchingFormats.slice()),o;!(o=r()).done;){var a=s();if(a==="break")break}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(t,i){if(!(t.pattern().indexOf("|")>=0)){var s=this.getTemplateForFormat(t,i);if(s)return this.setNationalNumberTemplate(s,i),!0}}},{key:"getSeparatorAfterNationalPrefix",value:function(t){return this.isNANP||t&&t.nationalPrefixFormattingRule()&&SVe.test(t.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(t,i){var s=t.IDDPrefix,r=t.missingPlus;return s?i&&i.spacing===!1?s:s+" ":r?"":"+"}},{key:"getTemplate",value:function(t){if(this.template){for(var i=-1,s=0,r=t.international?this.getInternationalPrefixBeforeCountryCallingCode(t,{spacing:!1}):"";s<r.length+t.getDigitsWithoutInternationalPrefix().length;)i=this.template.indexOf(ua,i+1),s++;return TO(this.template,i+1)}}},{key:"setNationalNumberTemplate",value:function(t,i){this.nationalNumberTemplate=t,this.populatedNationalNumberTemplate=t,this.populatedNationalNumberTemplatePosition=-1,i.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(i).replace(/[\d\+]/g,ua)+Jv(ua,i.callingCode.length)+" "+t:this.template=t}},{key:"getTemplateForFormat",value:function(t,i){var s=i.nationalSignificantNumber,r=i.international,o=i.nationalPrefix,a=i.complexPrefixBeforeNationalSignificantNumber,l=t.pattern();l=l.replace(AVe(),"\\d").replace(IVe(),"\\d");var c=CVe.match(l)[0];if(!(s.length>c.length)){var d=new RegExp("^"+l+"$"),u=s.replace(/\d/g,UC);d.test(u)&&(c=u);var h=this.getFormatFormat(t,r),f;if(this.shouldTryNationalPrefixFormattingRule(t,{international:r,nationalPrefix:o})){var m=h.replace(NH,t.nationalPrefixFormattingRule());if(bw(t.nationalPrefixFormattingRule())===(o||"")+bw("$1")&&(h=m,f=!0,o))for(var g=o.length;g>0;)h=h.replace(/\d/,ua),g--}var b=c.replace(new RegExp(l),h).replace(new RegExp(UC,"g"),ua);return f||(a?b=Jv(ua,a.length)+" "+b:o&&(b=Jv(ua,o.length)+this.getSeparatorAfterNationalPrefix(t)+b)),r&&(b=MH(b)),b}}},{key:"formatNextNationalNumberDigits",value:function(t){var i=sVe(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,t);if(!i){this.resetFormat();return}return this.populatedNationalNumberTemplate=i[0],this.populatedNationalNumberTemplatePosition=i[1],TO(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1)}},{key:"shouldTryNationalPrefixFormattingRule",value:function(t,i){var s=i.international,r=i.nationalPrefix;if(t.nationalPrefixFormattingRule()){var o=t.usesNationalPrefix();if(o&&r||!o&&!s)return!0}}}]),n}();function GH(n,e){return DVe(n)||OVe(n,e)||LVe(n,e)||$Ve()}function $Ve(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function LVe(n,e){if(n){if(typeof n=="string")return $O(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $O(n,e)}}function $O(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function OVe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function DVe(n){if(Array.isArray(n))return n}function MVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function NVe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function FVe(n,e,t){return NVe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var BVe="["+Aa+Pr+"]+",VVe=new RegExp("^"+BVe+"$","i"),UVe="(?:["+o_+"]["+Aa+Pr+"]*|["+Aa+Pr+"]+)",zVe=new RegExp("[^"+Aa+Pr+"]+.*$"),HVe=/[^\d\[\]]/,jVe=function(){function n(e){var t=e.defaultCountry,i=e.defaultCallingCode,s=e.metadata,r=e.onNationalSignificantNumberChange;MVe(this,n),this.defaultCountry=t,this.defaultCallingCode=i,this.metadata=s,this.onNationalSignificantNumberChange=r}return FVe(n,[{key:"input",value:function(t,i){var s=qVe(t),r=GH(s,2),o=r[0],a=r[1],l=bw(o),c;return a&&(i.digits||(i.startInternationalNumber(),l||(c=!0))),l&&this.inputDigits(l,i),{digits:l,justLeadingPlus:c}}},{key:"inputDigits",value:function(t,i){var s=i.digits,r=s.length<3&&s.length+t.length>=3;if(i.appendDigits(t),r&&this.extractIddPrefix(i),this.isWaitingForCountryCallingCode(i)){if(!this.extractCountryCallingCode(i))return}else i.appendNationalSignificantNumberDigits(t);i.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(i.getNationalDigits(),function(o){return i.update(o)})}},{key:"isWaitingForCountryCallingCode",value:function(t){var i=t.international,s=t.callingCode;return i&&!s}},{key:"extractCountryCallingCode",value:function(t){var i=UH("+"+t.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),s=i.countryCallingCode,r=i.number;if(s)return t.setCallingCode(s),t.update({nationalSignificantNumber:r}),!0}},{key:"reset",value:function(t){if(t){this.hasSelectedNumberingPlan=!0;var i=t._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=i&&HVe.test(i)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(t,i){if(this.hasSelectedNumberingPlan){var s=MC(t,this.metadata),r=s.nationalPrefix,o=s.nationalNumber,a=s.carrierCode;if(o!==t)return this.onExtractedNationalNumber(r,a,o,t,i),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(t,i,s){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(t,s);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var r=MC(t,this.metadata),o=r.nationalPrefix,a=r.nationalNumber,l=r.carrierCode;if(a!==i)return this.onExtractedNationalNumber(o,l,a,t,s),!0}}},{key:"onExtractedNationalNumber",value:function(t,i,s,r,o){var a,l,c=r.lastIndexOf(s);if(c>=0&&c===r.length-s.length){l=!0;var d=r.slice(0,c);d!==t&&(a=d)}o({nationalPrefix:t,carrierCode:i,nationalSignificantNumber:s,nationalSignificantNumberMatchesInput:l,complexPrefixBeforeNationalSignificantNumber:a}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(t){if(this.extractAnotherNationalSignificantNumber(t.getNationalDigits(),t.nationalSignificantNumber,function(i){return t.update(i)}))return!0;if(this.extractIddPrefix(t))return this.extractCallingCodeAndNationalSignificantNumber(t),!0;if(this.fixMissingPlus(t))return this.extractCallingCodeAndNationalSignificantNumber(t),!0}},{key:"extractIddPrefix",value:function(t){var i=t.international,s=t.IDDPrefix,r=t.digits;if(t.nationalSignificantNumber,!(i||s)){var o=BH(r,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);if(o!==void 0&&o!==r)return t.update({IDDPrefix:r.slice(0,r.length-o.length)}),this.startInternationalNumber(t,{country:void 0,callingCode:void 0}),!0}}},{key:"fixMissingPlus",value:function(t){if(!t.international){var i=VH(t.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),s=i.countryCallingCode;if(i.number,s)return t.update({missingPlus:!0}),this.startInternationalNumber(t,{country:t.country,callingCode:s}),!0}}},{key:"startInternationalNumber",value:function(t,i){var s=i.country,r=i.callingCode;t.startInternationalNumber(s,r),t.nationalSignificantNumber&&(t.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(t){this.extractCountryCallingCode(t)&&this.extractNationalSignificantNumber(t.getNationalDigits(),function(i){return t.update(i)})}}]),n}();function GVe(n){var e=n.search(UVe);if(!(e<0)){n=n.slice(e);var t;return n[0]==="+"&&(t=!0,n=n.slice(1)),n=n.replace(zVe,""),t&&(n="+"+n),n}}function WVe(n){var e=GVe(n)||"";return e[0]==="+"?[e.slice(1),!0]:[e]}function qVe(n){var e=WVe(n),t=GH(e,2),i=t[0],s=t[1];return VVe.test(i)||(i=""),[i,s]}function KVe(n,e){return ZVe(n)||QVe(n,e)||XVe(n,e)||YVe()}function YVe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function XVe(n,e){if(n){if(typeof n=="string")return LO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return LO(n,e)}}function LO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function QVe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function ZVe(n){if(Array.isArray(n))return n}function JVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function eUe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function tUe(n,e,t){return eUe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var WH=function(){function n(e,t){JVe(this,n),this.metadata=new Ys(t);var i=this.getCountryAndCallingCode(e),s=KVe(i,2),r=s[0],o=s[1];this.defaultCountry=r,this.defaultCallingCode=o,this.reset()}return tUe(n,[{key:"getCountryAndCallingCode",value:function(t){var i,s;return t&&(Dg(t)?(i=t.defaultCountry,s=t.defaultCallingCode):i=t),i&&!this.metadata.hasCountry(i)&&(i=void 0),[i,s]}},{key:"input",value:function(t){var i=this.parser.input(t,this.state),s=i.digits,r=i.justLeadingPlus;if(r)this.formattedOutput="+";else if(s){this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state);var o;if(this.metadata.hasSelectedNumberingPlan()&&(o=this.formatter.format(s,this.state)),o===void 0&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var a=this.state.getNationalDigits();a&&(o=this.formatter.format(a,this.state))}this.formattedOutput=o?this.getFullNumber(o):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var t=this;return this.state=new eVe({onCountryChange:function(s){t.country=s},onCallingCodeChange:function(s,r){t.metadata.selectNumberingPlan(r,s),t.formatter.reset(t.metadata.numberingPlan,t.state),t.parser.reset(t.metadata.numberingPlan)}}),this.formatter=new RVe({state:this.state,metadata:this.metadata}),this.parser=new jVe({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){t.determineTheCountryIfNeeded(),t.formatter.reset(t.metadata.numberingPlan,t.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){var t=this.state.digits;if(t)return this._getCountry()}},{key:"_getCountry",value:function(){var t=this.state.country;return t}},{key:"determineTheCountryIfNeeded",value:function(){(!this.state.country||this.isCountryCallingCodeAmbiguous())&&this.determineTheCountry()}},{key:"getFullNumber",value:function(t){var i=this;if(this.isInternational()){var s=function(a){return i.formatter.getInternationalPrefixBeforeCountryCallingCode(i.state,{spacing:!!a})+a},r=this.state.callingCode;return s(r?t?"".concat(r," ").concat(t):r:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return t}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var t=this.state,i=t.nationalSignificantNumber,s=t.complexPrefixBeforeNationalSignificantNumber,r=t.nationalPrefix,o=i,a=s||r;return a&&(o=a+o),o}},{key:"getNonFormattedNumber",value:function(){var t=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(t?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var t=this.getNonFormattedNumber();if(t)return t.replace(/[\+\d]/g,ua)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var t=this.state.callingCode,i=this.metadata.getCountryCodesForCallingCode(t);return i&&i.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(HH(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,defaultCountry:this.defaultCountry,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var t=this.state,i=t.digits,s=t.callingCode,r=t.country,o=t.nationalSignificantNumber;if(i){if(this.isInternational())return s?"+"+s+o:"+"+i;if(r||s){var a=r?this.metadata.countryCallingCode():s;return"+"+a+o}}}},{key:"getNumber",value:function(){var t=this.state,i=t.nationalSignificantNumber,s=t.carrierCode,r=t.callingCode,o=this._getCountry();if(i&&!(!o&&!r)){if(o&&o===this.defaultCountry){var a=new Ys(this.metadata.metadata);a.selectNumberingPlan(o);var l=a.numberingPlan.callingCode(),c=this.metadata.getCountryCodesForCallingCode(l);if(c.length>1){var d=zH(i,{countries:c,defaultCountry:this.defaultCountry,metadata:this.metadata.metadata});d&&(o=d)}}var u=new Z3(o||r,i,this.metadata.metadata);return s&&(u.carrierCode=s),u}}},{key:"isPossible",value:function(){var t=this.getNumber();return t?t.isPossible():!1}},{key:"isValid",value:function(){var t=this.getNumber();return t?t.isValid():!1}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}]),n}();function nUe(n){return new Ys(n).getCountries()}function iUe(n,e,t){if(e[n])return new Z3(n,e[n],t)}function sUe(){return Lb(XBe,arguments)}function yw(n){return WH.call(this,n,AH)}yw.prototype=Object.create(WH.prototype,{});yw.prototype.constructor=yw;function rUe(){return Lb(RH,arguments)}function qH(){return Lb(nUe,arguments)}function ww(){return Lb(c_,arguments)}function oUe(){return Lb(iUe,arguments)}var aUe=Object.defineProperty,lUe=(n,e,t)=>e in n?aUe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hf=(n,e,t)=>lUe(n,typeof e!="symbol"?e+"":e,t);function J3({componentName:n,providedId:e}){return lt(()=>e!=null?e:"".concat(n,"-").concat(XJ().replace(/:/g,"")))}function OO(n,e="20x15"){return"https://flagcdn.com/".concat(e,"/").concat(n.toLowerCase(),".png")}function KH(n,e){const t=qi(n,e);if(!t)throw new TypeError("[maz-ui](injectStrict) Could not resolve ".concat(n.toString()));return t}function cUe(n){return!!n}const dUe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",uUe={baseClass:"m-lazy-img",loadedClass:"m-lazy-loaded",loadingClass:"m-lazy-loading",errorClass:"m-lazy-error",noPhotoClass:"m-lazy-no-photo",noPhoto:!1,observerOnce:!0,loadOnce:!1,noUseErrorPhoto:!1,observerOptions:{threshold:.1}};class hUe{constructor(e={}){hf(this,"observers",[]),hf(this,"defaultOptions",uUe),hf(this,"options"),hf(this,"onImgLoadedCallback"),hf(this,"onImgErrorCallback"),hf(this,"hasImgLoaded",!1),this.options=this.buildOptions(e),this.onImgLoadedCallback=this.imageIsLoaded.bind(this),this.onImgErrorCallback=this.imageHasError.bind(this)}async loadErrorPhoto(){const{default:e}=await Kn(()=>import("./no-photography.BJX8HSus-CQMntAsz.js"),[]);return e}buildOptions(e){return{...this.defaultOptions,...e,observerOptions:{...this.defaultOptions.observerOptions,...e.observerOptions}}}removeClass(e,t){e.classList.remove(t)}addClass(e,t){e.classList.add(t)}removeAllStateClasses(e){this.removeClass(e,this.options.loadedClass),this.removeClass(e,this.options.loadingClass),this.removeClass(e,this.options.errorClass),this.removeClass(e,this.options.noPhotoClass)}setBaseClass(e){this.addClass(e,this.options.baseClass)}imageIsLoading(e){var t,i;this.addClass(e,this.options.loadingClass),(i=(t=this.options).onLoading)==null||i.call(t,e)}imageHasNoPhoto(e){this.removeClass(e,this.options.loadingClass),this.addClass(e,this.options.noPhotoClass),this.setDefaultPhoto(e)}imageIsLoaded(e){var t,i;this.hasImgLoaded=!0,this.removeClass(e,this.options.loadingClass),this.addClass(e,this.options.loadedClass),(i=(t=this.options).onLoaded)==null||i.call(t,e)}imageHasError(e){var t,i;this.removeClass(e,this.options.loadingClass),this.addClass(e,this.options.errorClass),(i=(t=this.options).onError)==null||i.call(t,e),this.setDefaultPhoto(e)}getSrc(e){return typeof e.value=="object"?e.value.src:e.value}getImageUrl(e,t){return this.getImgElement(e).getAttribute("data-lazy-src")||this.getSrc(t)}async setPictureSourceUrls(e){const t=e.querySelectorAll("source");if(t.length>0)for await(const i of t){const s=i.getAttribute("data-lazy-srcset");if(s)i.srcset=s;else return this.imageHasError(e)}else this.imageHasError(e)}hasBgImgMode(e){return e.arg==="bg-image"}isPictureElement(e){return e instanceof HTMLPictureElement}getImgElement(e){return this.isPictureElement(e)?e.querySelector("img"):e}async setDefaultPhoto(e){var r;if(this.options.noUseErrorPhoto)return;const t=(r=this.options.fallbackSrc)!=null?r:this.options.errorPhoto;typeof t=="string"&&this.addClass(e,this.options.noPhotoClass);const i=t!=null?t:await this.loadErrorPhoto(),s=e.querySelectorAll("source");if(s.length>0)for await(const o of s)o.srcset=i;else this.setImgSrc(e,i)}addEventListenerToImg(e){const t=this.getImgElement(e);t.addEventListener("load",()=>this.onImgLoadedCallback(e),{once:!0}),t.addEventListener("error",i=>this.onImgErrorCallback(e,i),{once:!0})}async loadImage(e,t){if(this.imageIsLoading(e),this.isPictureElement(e))this.addEventListenerToImg(e),await this.setPictureSourceUrls(e);else{const i=this.getImageUrl(e,t);if(!i)return this.imageHasError(e);this.hasBgImgMode(t)?(e.style.backgroundImage="url('".concat(i,"')"),this.imageIsLoaded(e)):(this.addEventListenerToImg(e),this.setImgSrc(e,i))}}setImgSrc(e,t){const i=this.getImgElement(e);i.src=t}handleIntersectionObserver(e,t,i,s){var r,o;this.observers.push(s);for(const a of i)if(a.isIntersecting){if((o=(r=this.options).onIntersecting)==null||o.call(r,a.target),this.options.observerOnce&&s.unobserve(e),this.options.loadOnce&&this.hasImgLoaded)return;this.loadImage(e,t)}}createObserver(e,t){const i=(r,o)=>{this.handleIntersectionObserver(e,t,r,o)},s=this.options.observerOptions;new IntersectionObserver(i,s).observe(e)}async imageHandler(e,t,i){if(i==="update")for await(const s of this.observers)s.unobserve(e);window.IntersectionObserver?this.createObserver(e,t):this.loadImage(e,t)}async bindUpdateHandler(e,t,i){if(this.options.noPhoto)return this.imageHasNoPhoto(e);await this.imageHandler(e,t,i)}async add(e,t){if(this.hasBgImgMode(t)&&this.isPictureElement(e))throw new Error('[MazLazyImg] You can\'t use the "bg-image" mode with "<picture />" element');setTimeout(()=>this.setBaseClass(e),0),e.getAttribute("src")||this.setImgSrc(e,dUe),await this.bindUpdateHandler(e,t,"bind")}async update(e,t){t.value!==t.oldValue&&(this.hasImgLoaded=!1,this.removeAllStateClasses(e),await this.bindUpdateHandler(e,t,"update"))}remove(e,t){this.hasImgLoaded=!1,this.hasBgImgMode(t)&&(e.style.backgroundImage=""),this.removeAllStateClasses(e);for(const i of this.observers)i.unobserve(e);this.observers=[]}}let uv;const fUe={created(n,e){const t=typeof e.value=="object"?e.value:{};uv=new hUe(t),uv.add(n,e)},updated(n,e){uv.update(n,e)},unmounted(n,e){uv.remove(n,e)}},pUe=["data-lazy-srcset","media"],mUe=["alt"],gUe={key:0,class:"m-lazy-img-component-loader"},bUe=Fe({inheritAttrs:!1,__name:"MazLazyImg",props:{style:{default:void 0},class:{default:void 0},image:{default:void 0},src:{default:void 0},alt:{default:void 0},noPhoto:{type:Boolean},noLoader:{type:Boolean},noObserverOnce:{type:Boolean},loadOnce:{type:Boolean},imageHeightFull:{type:Boolean},observerOptions:{default:void 0},fallbackSrc:{default:void 0},imgClass:{},block:{type:Boolean}},emits:["intersecting","loading","loaded","error"],setup(n){const e=n,t=ml(()=>Kn(()=>import("./MazSpinner.DZT5jj-c-BaUX9pCM.js"),__vite__mapDeps([0,1]))),i=lt(()=>e.image||e.src),s=lt(()=>{var r;return typeof i.value=="string"?[{srcset:i.value}]:(r=i.value)==null?void 0:r.sources});return(r,o)=>si((I(),O("picture",{class:gt(["m-lazy-img-component m-reset-css",[{"--use-loader":!r.noLoader,"--height-full":r.imageHeightFull,"--block":r.block},e.class]]),style:bo(r.style)},[(I(!0),O(Ue,null,ct(s.value,({srcset:a,media:l},c)=>(I(),O("source",{key:c,"data-lazy-srcset":a,media:l},null,8,pUe))),128)),_("img",Ld(r.$attrs,{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",loading:"lazy",alt:r.alt,class:r.imgClass}),null,16,mUe),r.noLoader?re("v-if",!0):(I(),O("div",gUe,[L(y(t),{size:"2em"})])),qr(r.$slots,"default",{},void 0)],6)),[[y(fUe),{noPhoto:r.noPhoto,loadOnce:r.loadOnce,observerOptions:r.observerOptions,fallbackSrc:r.fallbackSrc,observerOnce:!r.noObserverOnce,onIntersecting:a=>r.$emit("intersecting",a),onLoading:a=>r.$emit("loading",a),onLoaded:a=>r.$emit("loaded",a),onError:a=>r.$emit("error",a)}]])}}),fm=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},DO=fm(bUe,[["__scopeId","data-v-16d47574"]]),vUe={removeAccents:!0,caseSensitive:!1,replaceSpaces:!0,removeSpecialCharacters:!1,trim:!0,normalizeSpaces:!0,removeNumbers:!1,customNormalizationForms:["NFC","NFKD"]};function xw(n,e){const t={...vUe,...e},i={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Î:"I",Ï:"I",í:"I",î:"i",ï:"i",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ç:"C",ç:"c",ÿ:"y",Ñ:"N",ñ:"n",ó:"o"};let s=n.toString();if(t.trim&&(s=s.trim()),t.normalizeSpaces&&(s=s.replaceAll(/\s+/g," ")),t.replaceSpaces&&(s=s.replaceAll(" ","-")),t.removeNumbers&&(s=s.replaceAll(/\d/g,"")),t.removeAccents&&(s=s.replaceAll(/[ÀÁÂÃÄÅÇÈÉÊËÎÏÑÔÕÖØÙÚÛÜàáâãäåçèéêëíîïñóôõöøùúûüÿ]/g,r=>i[r]||r),s=s.replaceAll(/[\u0300-\u036F]/g,"")),t.caseSensitive===!1&&(s=s.toLowerCase()),t.removeSpecialCharacters&&(s=s.replaceAll(/[^\dA-Z-]/gi,"")),t.trim&&(s=s.trim()),t.customNormalizationForms)for(const r of t.customNormalizationForms)s=s.normalize(r);return s}function yUe(n,e){const t=n.length,i=e.length,s=[];for(let r=0;r<=t;r++)s[r]=[r];for(let r=0;r<=i;r++)s[0][r]=r;for(let r=1;r<=t;r++)for(let o=1;o<=i;o++){const a=n[r-1]===e[o-1]?0:1;s[r][o]=Math.min(s[r-1][o]+1,s[r][o-1]+1,s[r-1][o-1]+a)}return s[t][i]}function YH(n,e){const t=yUe(n,e),i=Math.max(n.length,e.length);return 1-t/i}function wUe(n,e,t=.75){return YH(n,e)>=t}function eE(n,e,t=.75){const i=lt(()=>xw(typeof n=="string"?n:n.value)),s=lt(()=>xw(typeof e=="string"?e:e.value)),r=lt(()=>typeof t=="number"?t:t.value),o=lt(()=>YH(i.value,s.value));return{isMatching:lt(()=>wUe(i.value,s.value,r.value)),score:o}}function XH(n,e,t){var l;var i,s;n.stopPropagation();const r=typeof t.value=="function"?t.value:t.value.handler,o=typeof t.value=="object"?t.value.exclude:void 0;let a=!1;if(o&&o.length>0){for(const c of o)if(!a&&n.target instanceof HTMLElement){const d=(i=document.querySelector(c))==null?void 0:i.getAttribute("id");a=(l=n.target.getAttribute("id")===d||((s=document.querySelector(c))==null?void 0:s.contains(n.target)))!=null?l:!1}}!e.contains(n.target)&&!a&&(r==null||r(n))}function QH(){return document.ontouchstart===null?"touchstart":"click"}function xUe(n,e){const t=QH();document.removeEventListener(t,i=>XH(i,n,e))}function _Ue(n,e){if(typeof e.value!="function"&&typeof e.value=="object"&&typeof e.value.handler!="function"){console.error("[maz-ui](vClosable) v-closable directive requires a handler function");return}const t=QH();document.addEventListener(t,i=>XH(i,n,e))}const kUe={mounted:_Ue,unmounted:xUe};let tE=null;function EUe(n,e){tE&&clearTimeout(tE),tE=setTimeout(n,e)}function TUe(n,e){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>{n.apply(this,i)},e)}}const CUe=["for"],SUe={key:0,class:"m-input-wrapper-left"},AUe=["id","name","placeholder","aria-label","type","inputmode","disabled","readonly","autocomplete","required"],IUe={key:1,class:"m-input-wrapper-right"},PUe=Fe({inheritAttrs:!1,__name:"MazInput",props:{style:{default:void 0},class:{default:void 0},modelValue:{default:void 0},placeholder:{default:void 0},label:{default:void 0},topLabel:{},assistiveText:{},name:{default:void 0},color:{default:"primary"},type:{default:"text"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},id:{default:void 0},error:{type:Boolean,default:!1},success:{type:Boolean,default:!1},warning:{type:Boolean,default:!1},hint:{default:void 0},inputClasses:{default:void 0},noBorder:{type:Boolean,default:!1},noRadius:{type:Boolean,default:!1},inputmode:{default:"text"},size:{default:"md"},debounce:{type:[Boolean,Number],default:!1},debounceDelay:{default:500},validButton:{type:Boolean,default:!1},validButtonLoading:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},borderActive:{type:Boolean,default:!1},leftIcon:{type:[String,Function,Object],default:void 0},rightIcon:{type:[String,Function,Object],default:void 0},roundedSize:{default:void 0},block:{type:Boolean},autocomplete:{}},emits:["update:model-value","focus","blur","click","change","input"],setup(n,{emit:e}){var G;const t=n,i=e,s=ml(()=>Kn(()=>import("./MazBtn.1qp5aQ4N-BJ-H3EoN.js"),__vite__mapDeps([2,3]))),r=ml(()=>Kn(()=>import("./MazIcon.B5hPzeLk-CLiaODKd.js"),[])),o=ml(()=>Kn(()=>import("./eye-slash.BoO00xzs-BYW4k127.js"),[])),a=ml(()=>Kn(()=>import("./eye.f8zAUc30-CtP1ApoX.js"),[])),l=ml(()=>Kn(()=>import("./check.C9Q_W85g-D9ztUmKg.js"),[])),c=K(!1),d=K(!1),u=K(),h=J3({componentName:"MazInput",providedId:t.id});on(()=>{var B;t.autoFocus&&((B=u.value)==null||B.focus())});const f=lt(()=>t.type==="password"),m=lt(()=>c.value?"text":t.type),g=lt(()=>{if(!t.noBorder){if(t.error)return"maz-border-danger";if(t.success)return"maz-border-success";if(t.warning)return"maz-border-warning";if(d.value||t.borderActive){if(t.color==="black")return"maz-border-black";if(t.color==="danger")return"maz-border-danger";if(t.color==="info")return"maz-border-info";if(t.color==="primary")return"maz-border-primary";if(t.color==="secondary")return"maz-border-secondary";if(t.color==="success")return"maz-border-success";if(t.color==="warning")return"maz-border-warning";if(t.color==="white")return"maz-border-white"}return"--default-border"}}),b=lee(),w=lt(()=>E.value!==void 0&&E.value!==""),x=TUe(B=>{i("update:model-value",B)},typeof t.debounce=="number"?t.debounce:(G=t.debounceDelay)!=null?G:500);function k(B){if(t.debounce)return x(B);i("update:model-value",B)}const E=lt({get:()=>t.modelValue,set:B=>k(B)}),T=lt(()=>(!!t.label||!!t.hint)&&(d.value||!!w.value||!!t.placeholder||["date","month","week"].includes(t.type))),P=lt(()=>!!t.label||!!t.hint);function C(){return!!b["right-icon"]||f.value||!!b["valid-button"]||t.validButton||!!t.rightIcon}function A(){return!!b["left-icon"]||!!t.leftIcon}function R(B){i("focus",B),d.value=!0}function M(B){i("blur",B),d.value=!1}function N(B){return i("change",B)}function U(B){return i("input",B)}return(B,te)=>(I(),O("div",{class:gt(["m-input",[{"--is-focused":d.value||B.borderActive,"--should-up":T.value,"--has-label":P.value,"--is-disabled":B.disabled,"--is-readonly":B.readonly,"--has-z-2":B.error||B.warning||B.success,"--has-state":B.error||B.warning||B.success,"--block":B.block},t.class,"--".concat(B.color)]]),style:bo(B.style)},[B.topLabel?(I(),O("label",{key:0,for:y(h),class:"m-input-top-label"},Q(B.topLabel),9,CUe)):re("v-if",!0),_("div",{class:gt(["m-input-wrapper m-reset-css",[B.inputClasses,g.value,B.roundedSize?"--rounded-".concat(B.roundedSize):{"maz-rounded":!B.noRadius},{"--block":B.block}]])},[A()?(I(),O("div",SUe,[B.$slots["left-icon"]||B.leftIcon?qr(B.$slots,"left-icon",{key:0},()=>[typeof B.leftIcon=="string"?(I(),ve(y(r),{key:0,name:B.leftIcon,class:"maz-text-xl maz-text-muted"},null,8,["name"])):B.leftIcon?(I(),ve(GE(B.leftIcon),{key:1,class:"maz-text-xl maz-text-muted"})):re("v-if",!0)]):re("v-if",!0)])):re("v-if",!0),_("div",{class:gt(["m-input-wrapper-input",["--".concat(B.size),{"--top-label":!!B.topLabel}]])},[si(_("input",Ld({id:y(h)},B.$attrs,{ref_key:"input",ref:u,"onUpdate:modelValue":te[0]||(te[0]=X=>E.value=X),name:B.name,placeholder:B.placeholder,"aria-label":B.label||B.placeholder,type:m.value,inputmode:B.inputmode,disabled:B.disabled,readonly:B.readonly,autocomplete:B.autocomplete,required:B.required,class:"m-input-input"},oee({blur:M,focus:R,change:N,input:U}),{onClick:te[1]||(te[1]=X=>B.$emit("click",X))}),null,16,AUe),[[xte,E.value]]),B.label||B.hint?(I(),O("span",{key:0,class:gt(["m-input-label",[{"maz-text-danger-600":B.error,"maz-text-success-600":B.success,"maz-text-warning-600":B.warning}]])},Q(B.hint||B.label),3)):re("v-if",!0)],2),C()?(I(),O("div",IUe,[B.$slots["right-icon"]||B.rightIcon?qr(B.$slots,"right-icon",{key:0},()=>[typeof B.rightIcon=="string"?(I(),ve(y(r),{key:0,name:B.rightIcon,class:"maz-text-xl maz-text-muted"},null,8,["name"])):B.rightIcon?(I(),ve(GE(B.rightIcon),{key:1,class:"maz-text-xl maz-text-muted"})):re("v-if",!0)]):re("v-if",!0),f.value?(I(),ve(y(s),{key:1,color:"transparent",tabindex:"-1",size:"mini",onClick:te[2]||(te[2]=qt(X=>c.value=!c.value,["stop"]))},{default:j(()=>[c.value?(I(),ve(y(o),{key:0,class:"maz-text-xl maz-text-muted"})):(I(),ve(y(a),{key:1,class:"maz-text-xl maz-text-muted"}))]),_:1})):re("v-if",!0),B.$slots["valid-button"]||B.validButton?qr(B.$slots,"valid-button",{key:2},()=>[L(y(s),{color:"transparent",disabled:B.disabled,tabindex:"-1",loading:B.validButtonLoading,class:"m-input-valid-button",size:"mini",type:"submit"},{default:j(()=>[L(y(l),{class:"maz-text-2xl maz-text-normal"})]),_:1},8,["disabled","loading"])]):re("v-if",!0)])):re("v-if",!0)],2),B.assistiveText?(I(),O("div",{key:1,class:gt(["m-input-bottom-text",[{"maz-text-danger-600":B.error,"maz-text-success-600":B.success,"maz-text-warning-600":B.warning,"maz-text-muted":!B.error&&!B.success&&!B.warning}]])},Q(B.assistiveText),3)):re("v-if",!0)],6))}}),zC=fm(PUe,[["__scopeId","data-v-8def99c5"]]),RUe=["aria-label"],$Ue={class:"m-select-list__no-results"},LUe={key:2,class:"m-select-list__scroll-wrapper",tabindex:"-1"},OUe={class:"m-select-list-optgroup"},DUe=["onClick"],MUe=Fe({inheritAttrs:!1,__name:"MazSelect",props:{style:{default:void 0},class:{default:void 0},id:{default:void 0},modelValue:{default:void 0},options:{default:void 0},optionValueKey:{default:"value"},optionLabelKey:{default:"label"},optionInputValueKey:{default:"label"},listPosition:{default:"bottom left"},itemHeight:{default:void 0},maxListHeight:{default:240},maxListWidth:{default:void 0},minListHeight:{default:void 0},minListWidth:{default:void 0},size:{default:"md"},color:{default:"primary"},search:{type:Boolean},searchPlaceholder:{default:"Search in options"},searchFunction:{},searchThreshold:{default:.75},open:{type:Boolean},multiple:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},block:{type:Boolean},excludeSelectors:{default:void 0},autocomplete:{default:"off"}},emits:["close","open","blur","focus","change","input","update:model-value","selected-option"],setup(n,{expose:e,emit:t}){const i=n,s=t,r=ml(()=>Kn(()=>import("./MazCheckbox.UAnkvAoS-xQYwohE0.js"),__vite__mapDeps([4,5,6]))),o=ml(()=>Kn(()=>import("./magnifying-glass.-nBiyXot-CYTTOFrY.js"),[])),a=ml(()=>Kn(()=>import("./chevron-down.BkvtON3b-M577QRPS.js"),[])),l=ml(()=>Kn(()=>import("./no-symbol.CIgKzsrB-BFftgfUF.js"),[]));e({openList:xe,closeList:Ie});const c=K(!1),d=K(),u=lt(()=>["black","transparent","white"].includes(i.color)),h=lt(()=>u.value?"var(--maz-color-black)":"var(--maz-color-".concat(i.color,"-800)")),f=lt(()=>u.value?"var(--maz-color-muted)":"var(--maz-color-".concat(i.color,"-100)")),m=lt(()=>u.value?"var(--maz-color-muted)":"var(--maz-color-".concat(i.color,"-200)")),g=lt(()=>c.value||i.open),b=J3({componentName:"MazSelect",providedId:i.id});function w(F){return{[i.optionValueKey]:F,[i.optionLabelKey]:F,[i.optionInputValueKey]:F}}function x(F){return{...F,[i.optionValueKey]:F[i.optionValueKey],[i.optionLabelKey]:F[i.optionLabelKey],[i.optionInputValueKey]:F[i.optionInputValueKey]}}function k(F){const z=[];if(!(F!=null&&F.length))return[];for(const se of F)typeof se=="string"||typeof se=="number"||typeof se=="boolean"?z.push(w(se)):typeof se=="object"&&"options"in se&&Array.isArray(se.options)?z.push({label:se.label,isOptGroup:!0},...se.options.map(Te=>typeof Te=="string"||typeof Te=="number"||typeof Te=="boolean"?w(Te):x(Te))):z.push(x(se));return z}const E=lt(()=>{var F;return k((F=i.options)!=null?F:[])}),T=lt(()=>{var z;var F;return(z=(F=E.value)==null?void 0:F.filter(se=>i.multiple?Array.isArray(i.modelValue)?i.modelValue.includes(se[i.optionValueKey])&&!M(se[i.optionValueKey]):!1:i.modelValue===se[i.optionValueKey]&&!M(se[i.optionValueKey])))!=null?z:[]});tr(()=>{var F;(F=i.options)!=null&&F.length||console.warn("[maz-ui](MazSelect) you must provide options"),me()});const P=K(),C=K(),A=K(),R=K();function M(F){return F==null}function N(F){var se;var z;return((se=(z=T.value)==null?void 0:z.some(Te=>Te[i.optionValueKey]===F[i.optionValueKey]))!=null?se:!1)&&!M(F[i.optionValueKey])}const U=lt(()=>{var F;if(i.multiple&&i.modelValue&&Array.isArray(i.modelValue))return i.modelValue.map(se=>{var Te,ke;return(ke=(Te=E.value)==null?void 0:Te.find(Ce=>Ce[i.optionValueKey]===se))==null?void 0:ke[i.optionInputValueKey]}).join(", ");const z=(F=E.value)==null?void 0:F.find(se=>se[i.optionValueKey]===i.modelValue);return M(i.modelValue)||z==null?void 0:z[i.optionInputValueKey]}),G=lt(()=>i.listPosition.includes("bottom")?"maz-slide":"maz-slideinvert"),B=K(""),te=K("");function X(F,z){return z&&F&&xw(F).includes(xw(z))}function ue(F){var z;return F?(z=E.value)==null?void 0:z.filter(se=>{const Te=se[i.optionLabelKey],ke=se[i.optionValueKey],Ce=se[i.optionInputValueKey],ge=i.searchThreshold;return X(Te,F)||X(Ce,F)||X(ke,F)||typeof Te=="string"&&eE(Te,F,ge).isMatching.value||typeof Ce=="string"&&eE(Ce,F,ge).isMatching.value||typeof ke=="string"&&eE(ke,F,ge).isMatching.value}):E.value}const he=lt(()=>{var F,z;return i.searchFunction&&i.search&&B.value?k((z=i.searchFunction(B.value,(F=i.options)!=null?F:[]))!=null?z:[]):ue(B.value)});async function Ie(F){var z,se;if(!g.value)return;if(F&&("relatedTarget"in F&&(z=P.value)!=null&&z.contains(F.relatedTarget)||F.type==="keydown"))return F.preventDefault();const Te=F&&"relatedTarget"in F&&F.relatedTarget instanceof HTMLElement&&F.relatedTarget.getAttribute("id");if((se=i.excludeSelectors)!=null&&se.includes("#".concat(Te)))return F==null?void 0:F.preventDefault();await vc(),c.value=!1,d.value=0,s("close",F)}async function xe(F){i.disabled||g.value||(F==null||F.preventDefault(),c.value=!0,await ie(),s("focus",F),s("open",c.value))}function Be(){var F,z;(z=((F=C.value)==null?void 0:F.$el).querySelector("input"))==null||z.focus()}function Pe(){var F,z;(z=((F=C.value)==null?void 0:F.$el).querySelector("input"))==null||z.dispatchEvent(new Event("input"))}function Ae(F){c.value?Ie(F):Be()}function de(F){var z,se;B.value=F,(se=((z=A.value)==null?void 0:z.$el).querySelector("input"))==null||se.focus()}function we(F){var z;F==="Backspace"&&te.value.length>0?te.value=te.value.slice(0,-1):te.value+=F;const se=ue(te.value);se!=null&&se.length&&(d.value=(z=he.value)==null?void 0:z.findIndex(Te=>Te[i.optionValueKey]===se[0][i.optionValueKey]),typeof d.value=="number"&&d.value>=0&&ie(d.value)),EUe(()=>{te.value=""},1e3)}function ze(F){const z=F.key;/^[\dA-Za-z\u0400-\u04FF]$/.test(z)?(F.preventDefault(),xe(F),i.search?de(z):we(z)):le(F)}function le(F,z=!0){const se=F.code,Te=["ArrowUp","ArrowDown"].includes(se),ke=(z?["Enter","Space"]:["Enter"]).includes(se),Ce=se==="Escape"&&g.value;Te?Se(F,d.value):ke?ne(F,d.value):Ce&&Ie(F)}function Se(F,z){var se;F.preventDefault();const Te=F.code;g.value||xe(F);const ke=(se=he.value)==null?void 0:se.length;ke&&(typeof z=="number"?z===ke-1&&Te==="ArrowDown"?d.value=0:z===0&&Te==="ArrowUp"?d.value=ke-1:d.value=Te==="ArrowDown"?z+1:z-1:d.value=Te==="ArrowDown"?0:ke-1,ie(d.value))}function ne(F,z){var ge;var se,Te,ke;if(!g.value)return;F.preventDefault();const Ce=z?(ge=(se=he.value)==null?void 0:se[z])!=null?ge:(Te=he.value)==null?void 0:Te[0]:(ke=he.value)==null?void 0:ke[0];M(Ce)||V(Ce)}async function ie(F){var z,se;await vc(),typeof F!="number"&&me();const Te=F!=null?F:d.value;if(typeof Te=="number"&&Te>=0){const ke=(z=R.value)==null?void 0:z.querySelectorAll(".m-select-list-item");(se=ke==null?void 0:ke[Te])==null||se.scrollIntoView({behavior:"auto",block:"nearest",inline:"start"})}}function me(F){var z;const se=(z=he.value)==null?void 0:z.findIndex(Te=>{var ke,Ce;return i.multiple&&Array.isArray(i.modelValue)?F?F[i.optionValueKey]===Te[i.optionValueKey]:[...i.modelValue].reverse()[0]===Te[i.optionValueKey]:((Ce=(ke=T.value)==null?void 0:ke[0])==null?void 0:Ce[i.optionValueKey])===Te[i.optionValueKey]});d.value=se&&se>=0?se:0}function V(F,z=!0){var se;z&&!i.multiple&&vc(()=>Ie()),B.value="";const Te=(se=T.value)==null?void 0:se.some(ge=>ge[i.optionValueKey]===F[i.optionValueKey]);let ke=T.value;Te&&i.multiple?ke=ke==null?void 0:ke.filter(ge=>ge[i.optionValueKey]!==F[i.optionValueKey]):i.multiple?ke.push(F):ke=[F];const Ce=ke.map(ge=>ge[i.optionValueKey]);s("update:model-value",i.multiple?Ce:Ce[0]),s("selected-option",F),Pe(),me(F),Be()}return(F,z)=>si((I(),O("div",{ref_key:"mazSelectElement",ref:P,class:gt(["m-select m-reset-css",[{"--is-open":g.value,"--disabled":F.disabled,"--block":F.block},i.class,"--".concat(F.size)]]),style:bo([F.style,{"--keyboard-selected-bg-color":m.value,"--selected-bg-color":f.value,"--selected-text-color":h.value}])},[L(zC,Ld({id:y(b),ref_key:"mazInputComponent",ref:C,class:"m-select-input"},F.$attrs,{required:F.required,"border-active":c.value,color:F.color,"model-value":U.value,size:F.size,block:"",autocomplete:F.autocomplete,disabled:F.disabled,onFocus:qt(xe,["prevent","stop"]),onBlur:qt(Ie,["prevent","stop"]),onClick:qt(xe,["prevent","stop"]),onChange:z[0]||(z[0]=se=>s("change",se)),onInput:z[1]||(z[1]=se=>s("input",se)),onKeydown:ze}),{"right-icon":j(()=>[_("button",{tabindex:"-1",type:"button",class:"m-select-input__toggle-button maz-custom","aria-label":"".concat(g.value?"collapse":"expand"," list of options"),onClick:qt(Ae,["stop"])},[L(y(a),{class:"m-select-chevron maz-text-xl"})],8,RUe)]),_:1},16,["id","required","border-active","color","model-value","size","autocomplete","disabled"]),L(Zee,{name:G.value},{default:j(()=>[g.value?(I(),O("div",{key:0,ref_key:"optionListElement",ref:R,class:gt(["m-select-list",{"--top":F.listPosition.includes("top"),"--left":F.listPosition.includes("left"),"--right":F.listPosition.includes("right"),"--bottom":F.listPosition.includes("bottom")}]),style:bo({maxHeight:"".concat(F.maxListHeight,"px"),maxWidth:"".concat(F.maxListWidth,"px"),minHeight:"".concat(F.minListHeight,"px"),minWidth:"".concat(F.minListWidth,"px")})},[F.search?(I(),ve(zC,{key:0,ref_key:"searchInputComponent",ref:A,modelValue:B.value,"onUpdate:modelValue":[z[2]||(z[2]=se=>B.value=se),z[4]||(z[4]=se=>d.value=0)],size:"sm",color:F.color,placeholder:F.searchPlaceholder,name:"search",inputmode:"search",block:"",autocomplete:"off",tabindex:"-1",class:"m-select-list__search-input maz-flex-none","left-icon":y(o),onKeydown:z[3]||(z[3]=se=>le(se,!1))},null,8,["modelValue","color","placeholder","left-icon"])):re("v-if",!0),!he.value||he.value.length<=0?qr(F.$slots,"no-results",{key:1},()=>[_("span",$Ue,[L(y(l),{class:"maz-h-6 maz-w-6 maz-text-normal"})])],!0):(I(),O("div",LUe,[(I(!0),O(Ue,null,ct(he.value,(se,Te)=>(I(),O(Ue,{key:Te},[se.label&&se.isOptGroup?qr(F.$slots,"optgroup",{key:0,label:se.label},()=>[_("span",OUe,Q(se.label),1)],!0):(I(),O("button",{key:1,tabindex:"-1",type:"button",class:gt(["m-select-list-item maz-custom maz-flex-none",[{"--is-keyboard-selected":d.value===Te,"--is-selected":N(se),"--is-none-value":M(se[F.optionValueKey])}]]),style:bo(F.itemHeight?{height:"".concat(F.itemHeight,"px")}:void 0),onClick:qt(ke=>V(se),["prevent","stop"])},[F.multiple?(I(),ve(y(r),{key:0,tabindex:"-1","model-value":N(se),size:"sm",color:F.color},null,8,["model-value","color"])):re("v-if",!0),qr(F.$slots,"default",{option:se,isSelected:N(se)},()=>[_("span",null,Q(se[F.optionLabelKey]),1)],!0)],14,DUe))],64))),128))]))],6)):re("v-if",!0)]),_:3},8,["name"])],6)),[[y(kUe),{exclude:F.excludeSelectors,handler:Ie}]])}}),NUe=fm(MUe,[["__scopeId","data-v-98157b75"]]);function ZH(){if(typeof window>"u")return;const n=window.navigator.language;if(!n)return;let e=n.slice(3,7).toUpperCase();return e===""&&(e=n.slice(0,2).toUpperCase()),e==="EN"&&(e="US"),e==="JA"&&(e="JP"),{locale:e,browserLocale:n}}let nE,MO;function FUe(n,e,t){return t!=null&&t[e]?t[e]:((MO!==n||!nE)&&(MO=n,nE=new Intl.DisplayNames([n],{type:"region"})),nE.of(e))}function BUe(n,e){var r;var t;const i=[],s=qH();n=(r=n!=null?n:(t=ZH())==null?void 0:t.browserLocale)!=null?r:"en-US";for(const o of s){const a=FUe(n,o,e);if(a)try{const l=ww(o);i.push({iso2:o,dialCode:l,name:a})}catch(l){console.error("[MazPhoneNumberInput](getCountryCallingCode) ".concat(l))}}return i}async function VUe(){try{const n=await fetch("https://ipwho.is"),{country_code:e}=await n.json();return e}catch(n){throw new Error("[MazPhoneNumberInput](fetchCountryCode) ".concat(n))}}function UUe(n){if(!n)return"";const e=new RegExp(/[^\d ()+-]/g);return n.replaceAll(e,"").trim()}function e5(){return{sanitizePhoneNumber:UUe,fetchCountryCode:VUe,getBrowserLocale:ZH,getCountriesList:BUe}}const zUe=["id"],HUe={key:0,class:"m-country-selector__select__item__flag-container"},jUe=Fe({__name:"CountrySelector",props:{style:{default:void 0},class:{default:void 0},modelValue:{default:void 0},id:{},color:{},size:{},preferredCountries:{default:void 0},ignoredCountries:{default:void 0},onlyCountries:{default:void 0},customCountriesList:{default:void 0},locales:{},listPosition:{default:"bottom left"},noFlags:{type:Boolean},noSearch:{type:Boolean},disabled:{type:Boolean},showCodeOnList:{type:Boolean},countryLocale:{default:void 0},success:{type:Boolean},error:{type:Boolean},countrySelectorDisplayName:{type:Boolean},searchThreshold:{},width:{default:"9rem"},excludeSelectors:{default:void 0}},emits:["update:model-value"],setup(n){const e=n,{phoneNumber:t}=KH("data"),i=K(),{getCountriesList:s}=e5(),r=lt(()=>s(e.countryLocale,e.customCountriesList)),o=lt(()=>{var h;return(h=r.value)==null?void 0:h.filter(f=>{var m;return!((m=e.ignoredCountries)!=null&&m.includes(f.iso2))})}),a=lt(()=>{const h=e.onlyCountries||e.preferredCountries;return h==null?void 0:h.map(f=>{var m;return(m=o.value)==null?void 0:m.find(g=>g.iso2.includes(f))})}),l=lt(()=>{var h;return(h=o.value)==null?void 0:h.filter(f=>{var m;return!((m=e.preferredCountries)!=null&&m.includes(f.iso2))})}),c=lt(()=>{var h,f;return e.preferredCountries?[...(h=a.value)!=null?h:[],...(f=l.value)!=null?f:[]]:e.onlyCountries?a.value:o.value}),d=lt(()=>{var h;return(h=c.value)==null?void 0:h.map(f=>f?{...f,dialCode:"+".concat(f.dialCode)}:void 0).filter(cUe)});function u(){var h;(h=i.value)==null||h.openList()}return(h,f)=>{var m;return I(),O("div",{class:gt(["m-country-selector",[e.class,{"--no-flags":h.noFlags}]]),style:bo(h.style)},[h.modelValue&&!h.noFlags?(I(),O("button",{key:0,id:"country-selector-flag-button-".concat(h.id),class:gt(["m-country-selector__country-flag",{"--should-have-bottom-flag":h.locales.countrySelector.placeholder.length>0}]),tabindex:"-1",type:"button",onClick:u},[qr(h.$slots,"selector-flag",{countryCode:h.modelValue},()=>[L(DO,{src:y(OO)(h.modelValue,"h20"),alt:h.modelValue,width:"20",height:"20","img-class":"maz-w-5 maz-h-4 maz-rounded-sm"},null,8,["src","alt"])])],10,zUe)):re("v-if",!0),L(NUe,Ld({id:"country-selector-".concat(h.id),ref_key:"CountrySelectorRef",ref:i,"model-value":h.modelValue},{...h.$attrs},{class:"m-country-selector__select","option-value-key":"iso2","option-label-key":"name","option-input-value-key":h.countrySelectorDisplayName?"name":"dialCode",name:"country","max-list-width":250,"min-list-width":200,disabled:h.disabled,color:h.color,size:h.size,error:h.error,"list-position":h.listPosition,"item-height":38,success:h.success,search:!h.noSearch,"search-placeholder":h.locales.countrySelector.searchPlaceholder,"search-threshold":h.searchThreshold,options:d.value,hint:y(t)&&!h.modelValue?h.locales.countrySelector.error:void 0,label:h.locales.countrySelector.placeholder,style:{width:h.width},"exclude-selectors":["#country-selector-flag-button-".concat(h.id),...(m=h.excludeSelectors)!=null?m:[]],"onUpdate:modelValue":f[0]||(f[0]=g=>h.$emit("update:model-value",g))}),{"no-results":j(()=>[qr(h.$slots,"no-results",{},void 0,!0)]),default:j(({option:g,isSelected:b})=>[_("div",{class:gt(["m-country-selector__select__item",{"m-country-selector__select__item--selected":b}])},[!h.noFlags&&typeof g.iso2=="string"?(I(),O("span",HUe,[qr(h.$slots,"country-list-flag",{countryCode:g.iso2,option:g,isSelected:b},()=>[L(DO,{src:y(OO)(g.iso2,"h20"),alt:"".concat(g.name," flag"),width:"20",height:"20","img-class":"maz-rounded-full maz-w-5 maz-h-5"},null,8,["src","alt"])],!0)])):re("v-if",!0),h.showCodeOnList?(I(),O("span",{key:1,class:gt(["maz-w-9 maz-flex-none",{"maz-text-muted":!b}])},Q(g.dialCode),3)):re("v-if",!0),_("span",{class:gt(["maz-flex-1 maz-truncate",{"maz-font-semibold":b}])},Q(g.name),3)],2)]),_:3},16,["id","model-value","option-input-value-key","disabled","color","size","error","list-position","success","search","search-placeholder","search-threshold","options","hint","label","style","exclude-selectors"])],6)}}}),GUe=fm(jUe,[["__scopeId","data-v-e2fee821"]]),WUe={countrySelector:{placeholder:"Country code",error:"Choose country",searchPlaceholder:"Search the country"},phoneInput:{placeholder:"Phone number",example:"Example:"}},D0=K();function qUe(n){try{return rUe(n)||(console.error('[maz-ui](MazPhoneNumberInput) The code country "'.concat(n,'" is not available')),!1)}catch(e){return console.error("[maz-ui](MazPhoneNumberInput) ".concat(e)),!1}}function KUe({phoneNumber:n,countryCode:e,checkCountryCode:t=!1}){var i;try{if(!n)return{isValid:!1,countryCode:e};const s=sUe(n,e!=null?e:void 0),r=(i=s==null?void 0:s.isValid())!=null?i:!1,o=e&&t?(s==null?void 0:s.country)&&e===s.country:!0;return{isValid:r&&!!o,countryCode:e,parsedCountryCode:s==null?void 0:s.country,isPossible:s==null?void 0:s.isPossible(),countryCallingCode:s==null?void 0:s.countryCallingCode,nationalNumber:s==null?void 0:s.nationalNumber,type:s==null?void 0:s.getType(),formatInternational:s==null?void 0:s.formatInternational(),formatNational:s==null?void 0:s.formatNational(),uri:s==null?void 0:s.getURI(),e164:s==null?void 0:s.format("E.164"),rfc3966:s==null?void 0:s.format("RFC3966"),possibleCountries:s==null?void 0:s.getPossibleCountries(),phoneNumber:n}}catch(s){throw new Error("[MazPhoneNumberInput](getResultsFromPhoneNumber) ".concat(s))}}async function JH(){const{default:n}=await Kn(()=>import("./examples.mobile.json.tW3aL0qI-DhYVM353.js"),[]);return n}function YUe(n){var e;try{return D0.value&&n?(e=oUe(n,D0.value))==null?void 0:e.formatNational():void 0}catch(t){console.error("[maz-ui](MazPhoneNumberInput) ".concat(t))}}function XUe(n,e){try{return!e||!n?void 0:new yw(n).input(e)}catch(t){throw new Error("[MazPhoneNumberInput](getAsYouTypeFormat) ".concat(t))}}function QUe(n,e){return ww(n)===ww(e)}async function ZUe(){try{if(D0.value)return;D0.value=await JH()}catch(n){console.error("[maz-ui](MazPhoneNumberInput) while loading phone number examples file",n)}}function ej(){return{examples:D0,getAsYouTypeFormat:XUe,getPhoneNumberResults:KUe,getPhoneNumberExamplesFile:JH,getPhoneNumberExample:YUe,isSameCountryCallingCode:QUe,isCountryAvailable:qUe,getCountries:qH,getCountryCallingCode:ww,loadExamples:ZUe}}const JUe=Fe({__name:"PhoneInput",props:Hg({style:{},class:{},placeholder:{},label:{},topLabel:{},assistiveText:{},name:{},color:{},type:{},required:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},id:{},error:{type:Boolean},success:{type:Boolean},warning:{type:Boolean},hint:{},inputClasses:{},noBorder:{type:Boolean},noRadius:{type:Boolean},inputmode:{},size:{},debounce:{type:[Boolean,Number]},debounceDelay:{},validButton:{type:Boolean},validButtonLoading:{type:Boolean},autoFocus:{type:Boolean},borderActive:{type:Boolean},leftIcon:{type:[String,Function,Object]},rightIcon:{type:[String,Function,Object]},roundedSize:{},block:{type:Boolean},autocomplete:{},locales:{},noExample:{type:Boolean},hasRadius:{type:Boolean},autoFormat:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const{getPhoneNumberExample:e,getAsYouTypeFormat:t,loadExamples:i}=ej(),{sanitizePhoneNumber:s}=e5(),{results:r,selectedCountry:o}=KH("data"),a=jg(n,"modelValue"),l=lt(()=>{const m=r.value.isValid?r.value.formatNational:a.value;return t(o.value,m)||m}),c=K(!1),d=lt({get:()=>!c.value&&n.autoFormat?l.value:a.value,set:m=>{a.value=s(m)}});function u(m){const g=e(m);return g?"".concat(n.locales.phoneInput.example," ").concat(g):void 0}const h=lt(()=>{var m;if(n.label||n.placeholder)return n.label||n.placeholder;const g=n.locales.phoneInput.placeholder;if(n.noExample||!c.value)return g;{const b=u(o.value);return(m=r.value)!=null&&m.isValid||!b?g:b}}),f=lt(()=>n.placeholder?{placeholder:h.value}:{label:h.value});return on(()=>{n.noExample||i()}),(m,g)=>(I(),ve(zC,Ld({id:m.id,modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=b=>d.value=b)},{...m.$attrs,...f.value},{disabled:m.disabled,color:m.color,error:m.error,size:m.size,success:m.success,name:m.name,inputmode:m.inputmode,autocomplete:m.autocomplete,class:["m-phone-input",[{"--border-radius":m.hasRadius,"--error":m.error||!y(r).isValid,"--focused":c.value}]],onFocus:g[1]||(g[1]=b=>c.value=!0),onBlur:g[2]||(g[2]=b=>c.value=!1)}),null,16,["id","modelValue","disabled","color","error","size","success","name","inputmode","autocomplete","class"]))}}),eze=fm(JUe,[["__scopeId","data-v-3619d84c"]]),tze=Fe({name:"MazPhoneNumberInput",inheritAttrs:!1,__name:"MazPhoneNumberInput",props:{style:{default:void 0},class:{default:void 0},modelValue:{default:void 0},defaultPhoneNumber:{default:void 0},countryCode:{default:void 0},defaultCountryCode:{default:void 0},id:{default:void 0},placeholder:{default:void 0},label:{default:void 0},preferredCountries:{default:void 0},ignoredCountries:{default:void 0},onlyCountries:{default:void 0},translations:{default:void 0},listPosition:{default:"bottom left"},color:{default:"primary"},size:{default:"md"},noFlags:{type:Boolean},disabled:{type:Boolean},noExample:{type:Boolean,default:!1},noSearch:{type:Boolean},searchThreshold:{default:.75},noUseBrowserLocale:{type:Boolean},fetchCountry:{type:Boolean},noCountrySelector:{type:Boolean},showCodeOnList:{type:Boolean},customCountriesList:{default:void 0},autoFormat:{type:Boolean,default:!0},noFormattingAsYouType:{type:Boolean,default:!1},countryLocale:{default:void 0},noValidationError:{type:Boolean},noValidationSuccess:{type:Boolean},success:{type:Boolean},error:{type:Boolean},countrySelectorDisplayName:{type:Boolean},countrySelectorWidth:{default:"9rem"},block:{type:Boolean},excludeSelectors:{default:void 0},orientation:{default:"responsive"},countrySelectAttributes:{default:()=>({name:"country",autocomplete:"off"})},phoneInputAttributes:{default:()=>({name:"phone",autocomplete:"tel",inputmode:"tel"})}},emits:["update:model-value","country-code","update:country-code","update","data"],setup(n,{emit:e}){var C;const t=n,i=e,{fetchCountryCode:s,getBrowserLocale:r}=e5(),{isCountryAvailable:o,getPhoneNumberResults:a}=ej(),l=J3({componentName:"MazPhoneNumberInput",providedId:t.id}),c=K(),d=K(),u=K(!1),h=K(!1),f=lt(()=>({...WUe,...t.translations})),m=lt(()=>t.autoFormat&&!t.noFormattingAsYouType),g=K({isValid:!1,countryCode:(C=t.countryCode)!=null?C:t.defaultCountryCode,phoneNumber:t.modelValue}),b=K();tr(async()=>{var A;if((t.countryCode||t.defaultCountryCode)&&!d.value&&P({countryCode:(A=t.countryCode)!=null?A:t.defaultCountryCode}),t.fetchCountry&&!d.value){const R=await s();P({countryCode:R})}}),on(()=>{var A;if(!d.value&&!t.noUseBrowserLocale){const R=(A=r())==null?void 0:A.locale;P({countryCode:R})}});function w({phone:A=c.value||t.modelValue,countryCode:R=d.value,checkCountryCode:M=!1}){g.value=a({phoneNumber:A,countryCode:R,checkCountryCode:M})}function x(){var A;return(A=b.value)==null?void 0:A.$el.querySelector("input")}async function k(){var A;await vc(),(A=x())==null||A.select()}function E(A){if(A){if(!o(A)){console.warn('[MazPhoneNumberInput] Country code not available: "'.concat(A,'"')),d.value=void 0;return}d.value=A}}function T({newPhoneNumber:A}){var R;w({phone:A}),g.value.parsedCountryCode&&g.value.parsedCountryCode!==d.value&&P({countryCode:g.value.parsedCountryCode,updateResults:!1}),g.value.isValid&&m.value?c.value=(R=g.value.formatNational)==null?void 0:R.trim().replaceAll(new RegExp(/\D/g),""):c.value=A,u.value=!0,g.value.e164?i("update:model-value",g.value.e164):i("update:model-value",g.value.phoneNumber),setTimeout(()=>{u.value=!1},0)}function P({countryCode:A,updateResults:R=!0,selectPhoneNumber:M=!1}){if(!A){d.value=void 0;return}h.value=!0,A!==d.value&&E(A),R&&w({countryCode:d.value,checkCountryCode:!0});const N=g.value.countryCode||g.value.parsedCountryCode;i("country-code",N),i("update:country-code",N),M&&!g.value.isValid&&k(),setTimeout(()=>{h.value=!1},0)}return ki(()=>{var A;return(A=t.modelValue)!=null?A:t.defaultPhoneNumber},(A,R)=>{!u.value&&A!==R&&A!==c.value&&T({newPhoneNumber:A})},{immediate:!0}),ki(()=>{var A;return(A=t.countryCode)!=null?A:t.defaultCountryCode},(A,R)=>{!h.value&&A&&A!==R&&A!==d.value&&P({countryCode:A})},{immediate:!0}),ki(g,A=>{i("update",A),i("data",A)},{immediate:!0}),Ad("data",{selectedCountry:d,phoneNumber:c,results:g}),(A,R)=>{var M;return I(),O("div",{class:gt(["m-phone-number-input m-reset-css",[t.class,{"--block":A.block},A.orientation?"--".concat(A.orientation):void 0]]),style:bo(A.style)},[A.noCountrySelector?re("v-if",!0):(I(),ve(GUe,Ld({key:0,id:y(l)},A.countrySelectAttributes,{"model-value":d.value,color:A.color,size:A.size,"country-locale":A.countryLocale,"country-selector-display-name":A.countrySelectorDisplayName,"custom-countries-list":A.customCountriesList,"ignored-countries":A.ignoredCountries,"list-position":A.listPosition,"no-flags":A.noFlags,"no-search":A.noSearch,"exclude-selectors":A.excludeSelectors,error:A.error||(A.noValidationError?!1:!!c.value&&!d.value),success:A.success||(A.noValidationSuccess?!1:(M=g.value)==null?void 0:M.isValid),locales:f.value,disabled:A.disabled,"search-threshold":A.searchThreshold,"show-code-on-list":A.showCodeOnList,"only-countries":A.onlyCountries,"preferred-countries":A.preferredCountries,width:A.countrySelectorWidth,"onUpdate:modelValue":R[0]||(R[0]=N=>P({countryCode:N,selectPhoneNumber:!0}))}),{"no-results":j(()=>[qr(A.$slots,"no-results",{},void 0,!0)]),"selector-flag":j(({countryCode:N})=>[qr(A.$slots,"selector-flag",{countryCode:N},void 0,!0)]),"country-list-flag":j(({isSelected:N,option:U})=>[qr(A.$slots,"country-list-flag",{countryCode:U.iso2,option:U,isSelected:N},void 0,!0)]),_:3},16,["id","model-value","color","size","country-locale","country-selector-display-name","custom-countries-list","ignored-countries","list-position","no-flags","no-search","exclude-selectors","error","success","locales","disabled","search-threshold","show-code-on-list","only-countries","preferred-countries","width"])),L(eze,Ld({id:y(l),ref_key:"PhoneInputRef",ref:b,"model-value":c.value},{...A.$attrs,...A.phoneInputAttributes},{color:A.color,size:A.size,"auto-format":m.value,"no-example":A.noExample,block:"",disabled:A.disabled,"has-radius":!A.noCountrySelector,success:A.success||(A.noValidationSuccess?!1:g.value.isValid),error:A.error||(A.noValidationError?!1:!!c.value&&!g.value.isValid),locales:f.value,label:A.label,placeholder:A.placeholder,"onUpdate:modelValue":R[1]||(R[1]=N=>T({newPhoneNumber:N}))}),null,16,["id","model-value","color","size","auto-format","no-example","disabled","has-radius","success","error","locales","label","placeholder"])],6)}}}),nze=fm(tze,[["__scopeId","data-v-fb5085d5"]]),ize={class:"h-[20%] ion-padding-vertical bg-white1"},sze=["onClick"],rze=Fe({__name:"ModalGenderPicker",setup(n){const e=[{id:0,name:"Nữ"},{id:1,name:"Nam"},{id:2,name:"Khác"}],t=async i=>qe.dismiss(i,"confirm");return(i,s)=>(I(),O("div",ize,[(I(),O(Ue,null,ct(e,(r,o)=>_("div",{key:o,class:"ion-padding-horizontal"},[_("div",{class:"py-2",onClick:a=>t(r.id)},Q(r.name),9,sze)])),64))]))}}),oze={slot:"start",class:"flex items-center p-3"},aze={class:"flex items-center gap-4"},lze=["src"],cze={slot:"label"},dze={slot:"label"},uze={class:"text-sm font-light"},hze={slot:"label"},fze={class:"relative"},pze={class:"absolute top-1 flex items-center w-full z-10"},mze={slot:"label"},gze={slot:"end",class:"flex items-center"},bze={slot:"label"},vze={slot:"label"},yze={class:"pt-4"},wze={class:"text-base font-medium flex items-center gap-2"},xze={class:"border-b-[1px] border-gray1 pb-4"},_ze={slot:"label"},kze={class:"flex items-center gap-2"},Eze={slot:"label"},Tze=["onClick"],Cze=Fe({__name:"UserProfileScreen",setup(n){var G,B,te,X,ue,he,Ie,xe,Be,Pe,Ae,de,we,ze,le,Se,ne,ie;const{DEV:e,VITE_API_URL_DEV:t,VITE_API_URL:i}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},s=e?t:i,r=K(!1),o=gn(),a=en(),l=Ba(),{listCountries:c}=et(l),{userInfo:d,accessToken:u}=et(a),h=()=>o.back(),f=K(c.value.find(me=>{var V;return(me==null?void 0:me.id)===((V=d.value)==null?void 0:V.country_id)})),m=Yi({full_name:(B=(G=d.value)==null?void 0:G.full_name)!=null?B:"",username:(X=(te=d.value)==null?void 0:te.username)!=null?X:"",email:(he=(ue=d.value)==null?void 0:ue.email)!=null?he:"",phone:(xe=(Ie=d.value)==null?void 0:Ie.phone)!=null?xe:"",birthday:(Be=d.value)!=null&&Be.birthday?_t((Pe=d.value)==null?void 0:Pe.birthday).format("DD/MM/YYYY"):void 0,gender:(de=(Ae=d.value)==null?void 0:Ae.gender)!=null?de:1,country_id:void 0,province_id:void 0,bio:(ze=(we=d.value)==null?void 0:we.bio)!=null?ze:"",socials:(Se=(le=d.value)==null?void 0:le.socials)!=null?Se:[{title:"",url:"",id:Sd()}]}),g=lt(()=>{var me;return!((me=d.value)!=null&&me.rename_at)}),b=K(!0),w=()=>{g.value&&(b.value=!1)},x=K((ie=(ne=d.value)==null?void 0:ne.birthday)!=null?ie:void 0),k=()=>{m.socials=[{title:"",url:"",id:Sd()},...m.socials]},E=async()=>{const me=await qe.create({component:SH,componentProps:{selectedDate:x.value,maxDate:_t(new Date).toISOString()},initialBreakpoint:.5});await me.present();const{data:V,role:F}=await me.onDidDismiss();F==="confirm"&&(m.birthday=V)},T=async()=>{const me=await qe.create({component:sFe,componentProps:{data:c.value,selectedCountry:f.value},initialBreakpoint:.75});await me.present();const{data:V,role:F}=await me.onDidDismiss();F==="confirm"&&(m.country_id=V.id,f.value=V)},P=async()=>{const me=await qe.create({component:rze,initialBreakpoint:.2});await me.present();const{data:V,role:F}=await me.onDidDismiss();F==="confirm"&&(m.gender=V)},C=me=>{var V;(V=m.socials)==null||V.splice(me,1)},A=lt(()=>m.full_name&&m.username&&m.email&&m.phone&&m.birthday&&m.gender&&m.bio),R=async me=>{var V;await a.getUserInfo(),m.birthday=(V=d.value)==null?void 0:V.birthday,setTimeout(()=>{me.target.complete()},1500)};on(async()=>{await a.getUserInfo()});const M=async()=>{var me,V,F,z;try{const se=await Qe.patch("/users/me",{...m,birthday:_t(m.birthday).isValid()?_t(m.birthday).format("DD/MM/YYYY"):"",form:$b.FullProfile});if((se==null?void 0:se.status)===400){if(!J.isEmpty((V=(me=se==null?void 0:se.response)==null?void 0:me.data)==null?void 0:V.message)){const Te=(z=(F=se==null?void 0:se.response)==null?void 0:F.data)==null?void 0:z.message[0].constraints,ke=Object.values(Te)[0];ke&&tt(ke,"warning")}}else se.status===200&&(await a.setUserInfo(se.data),tt("Cập nhật thông tin thành công","success"))}catch(se){console.log(se)}},N=(me,V)=>{const F=atob(me.split(",")[1]),z=new Array(F.length);for(let Te=0;Te<F.length;Te++)z[Te]=F.charCodeAt(Te);const se=new Uint8Array(z);return new Blob([se],{type:V})},U=async()=>{if(!r.value)try{const me=await $x.getPhoto({quality:100,allowEditing:!0,resultType:Ky.DataUrl});if(me!=null&&me.dataUrl){const V=me.dataUrl.split(",")[0].split(":")[1].split(";")[0],F=N(me.dataUrl,V),z=Date.now(),se="avatar_".concat(z,".png"),Te=new File([F],se,{type:V!=null?V:"image/jpeg"});console.log("file",Te);const ke=new FormData;ke.append("avatar",Te),r.value=!0;const Ce=await fetch("".concat(s,"/users/me/avatar"),{method:"PATCH",body:ke,headers:{Authorization:"Bearer ".concat(u.value)}});if(Ce.status===200){const ge=await Ce.json();await a.setUserInfo(ge),tt("Cập nhật thông tin thành công","success")}else tt("Có lỗi xảy ra. Vui lòng thử lại.","error")}}catch(me){console.log(me)}finally{r.value=!1}};return _h(()=>{r.value=!1}),(me,V)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",oze,[L(y(fe),{onClick:h,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),V[5]||(V[5]=_("div",{class:"text-lg font-medium"},"Hồ sơ",-1))])]),_:1})]),_:1}),L(y(At),{class:"ion-padding flex-col"},{default:j(()=>{var F,z,se,Te;return[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:R},{default:j(()=>[L(y(eo))]),_:1}),_("div",aze,[_("img",{src:(z=(F=y(d))==null?void 0:F.avatar)!=null?z:"/upload-user.png",class:"size-16 rounded-full border-[1px] border-gray1",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,lze),_("div",{onClick:U,class:"text-blue1 text-sm font-medium"}," Thay đổi ảnh đại diện ")]),_("form",{class:"w-full pb-6",onSubmit:qt(M,["prevent"])},[_("section",null,[L(y(Tn),{mode:"md",modelValue:m.full_name,"onUpdate:modelValue":V[0]||(V[0]=ke=>m.full_name=ke),required:"",disabled:"",readonly:"",fill:"outline",placeholder:"Họ và tên",class:"outline-none text-sm font-light my-4 disabled",type:"text","label-placement":"stacked",color:"blue1"},{default:j(()=>[_("div",cze,[V[7]||(V[7]=be("Họ và tên")),L(y(Ai),{color:"danger"},{default:j(()=>V[6]||(V[6]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Tn),{mode:"md",modelValue:m.username,"onUpdate:modelValue":V[1]||(V[1]=ke=>m.username=ke),required:"",fill:"outline",disabled:b.value,placeholder:"Username",class:gt(["outline-none text-sm font-light mt-4",b.value&&"disabled"]),type:"text","label-placement":"stacked",color:"blue1",counter:!0,maxlength:50},{default:j(()=>[_("div",dze,[V[9]||(V[9]=be("Username")),L(y(Ai),{color:"danger"},{default:j(()=>V[8]||(V[8]=[be("*")])),_:1})])]),_:1},8,["modelValue","disabled","class"]),_("div",uze,[V[10]||(V[10]=be(" Bạn chỉ có thể đổi tên 1 lần duy nhất, bạn phải sử dụng tên thật. ")),g.value?(I(),O("span",{key:0,onClick:w,class:"text-blue1 font-normal"},"Sửa tên")):re("",!0)]),L(y(Tn),{mode:"md",modelValue:m.email,"onUpdate:modelValue":V[2]||(V[2]=ke=>m.email=ke),fill:"outline",placeholder:"Email",disabled:"",class:"outline-none text-sm font-light my-4 disabled",required:"",type:"text","label-placement":"stacked",color:"blue1"},{default:j(()=>[_("div",hze,[V[12]||(V[12]=be("Email")),L(y(Ai),{color:"danger"},{default:j(()=>V[11]||(V[11]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),_("div",fze,[L(y(Tn),{mode:"md",fill:"outline",class:"outline-none text-sm font-light my-4 maz",type:"text",disabled:"","label-placement":"stacked",color:"blue1",required:"",readonly:""}),_("div",pze,[L(y(nze),{modelValue:m.phone,"onUpdate:modelValue":V[3]||(V[3]=ke=>m.phone=ke),"no-country-selector":"","no-example":"",mode:"ios",class:"maz text-sm","country-code":"VN",placeholder:"Số điện thoại",translations:{countrySelector:{placeholder:"",error:"Chọn mã quốc tế",searchPlaceholder:"Tìm mã quốc tế"},phoneInput:{placeholder:"",example:""}}},null,8,["modelValue"])])]),L(y(Tn),{value:y(J.isEmpty)(m.birthday)?"Chọn ngày sinh":y(_t)(m.birthday).isValid()?y(_t)(m.birthday).format("DD/MM/YYYY"):"Chọn ngày sinh",mode:"md",fill:"outline",placeholder:"Ngày sinh",class:"outline-none text-sm font-light my-4","label-placement":"stacked",color:"blue1",required:"",readonly:"",onClick:qt(E,["stop"])},{default:j(()=>[_("div",mze,[V[14]||(V[14]=be("Ngày sinh")),L(y(Ai),{color:"danger"},{default:j(()=>V[13]||(V[13]=[be("*")])),_:1})]),_("div",gze,[L(y(fe),{onClick:qt(()=>{},["stop"]),icon:y(eB),slot:"icon-only",class:"text-gray2 size-5","aria-hidden":"true"},null,8,["icon"])])]),_:1},8,["value"]),L(y(Tn),{value:y(KNe).get(m.gender),mode:"md",fill:"outline",placeholder:"Giới tính",class:"outline-none text-sm font-light my-4",type:"text","label-placement":"stacked",color:"blue1",readonly:"",required:"",onClick:P},{default:j(()=>[_("div",bze,[V[16]||(V[16]=be("Giới tính")),L(y(Ai),{color:"danger"},{default:j(()=>V[15]||(V[15]=[be("*")])),_:1})]),L(y(fe),{slot:"end",icon:y(c0),class:"size-6 text-gray2"},null,8,["icon"])]),_:1},8,["value"]),L(y(Tn),{mode:"md",fill:"outline",placeholder:"Quốc gia",class:"outline-none text-sm font-light my-4",type:"text",label:"Quốc gia","label-placement":"stacked",color:"blue1",readonly:"",value:(Te=(se=f.value)==null?void 0:se.name)!=null?Te:"",onClick:T},{default:j(()=>[L(y(fe),{slot:"end",icon:y(c0),class:"size-6 text-gray2"},null,8,["icon"])]),_:1},8,["value"]),L(y(Ep),{modelValue:m.bio,"onUpdate:modelValue":V[4]||(V[4]=ke=>m.bio=ke),mode:"md",required:"","label-placement":"stacked",fill:"outline",rows:10,placeholder:"Nhập Bio của bạn",class:"outline-none text-sm font-light mb-6",counter:!0,maxlength:500},{default:j(()=>[_("div",vze,[V[18]||(V[18]=be(" Giới thiệu")),L(y(Ai),{color:"danger"},{default:j(()=>V[17]||(V[17]=[be("*")])),_:1})])]),_:1},8,["modelValue"])]),_("section",yze,[_("div",wze,[V[19]||(V[19]=_("div",null,"Link Social",-1)),_("div",{class:"flex",onClick:k},[L(y(fe),{icon:y(OA),class:"size-6 text-blue1"},null,8,["icon"])])]),(I(!0),O(Ue,null,ct(m.socials,(ke,Ce)=>(I(),O("div",{key:Ce},[_("div",xze,[L(y(Tn),{modelValue:ke.title,"onUpdate:modelValue":ge=>ke.title=ge,mode:"md",fill:"outline",placeholder:"Tiêu đề",class:"outline-none text-sm font-light my-4",type:"text","label-placement":"stacked",color:"blue1",required:""},{default:j(()=>[_("div",_ze,[V[21]||(V[21]=be(" Tiêu đề")),L(y(Ai),{color:"danger"},{default:j(()=>V[20]||(V[20]=[be("*")])),_:1})])]),_:2},1032,["modelValue","onUpdate:modelValue"]),_("div",kze,[L(y(Tn),{modelValue:ke.url,"onUpdate:modelValue":ge=>ke.url=ge,mode:"md",fill:"outline",placeholder:"URL",class:"outline-none text-sm font-light",type:"text","label-placement":"stacked",color:"blue1",required:""},{default:j(()=>[_("div",Eze,[V[23]||(V[23]=be("URL")),L(y(Ai),{color:"danger"},{default:j(()=>V[22]||(V[22]=[be("*")])),_:1})])]),_:2},1032,["modelValue","onUpdate:modelValue"]),_("div",{onClick:ge=>C(Ce),class:"flex items-center"},[L(y(fe),{icon:y(BA),class:"size-6 text-gray3"},null,8,["icon"])],8,Tze)])])]))),128))]),L(y(ko),{disabled:!A.value,type:"submit",color:A.value?"blue1":"gray3",class:"mt-4 h-12 w-full text-base uppercase text-center shadow-st rounded-xl"},{default:j(()=>V[24]||(V[24]=[be(" Lưu Lại ")])),_:1},8,["disabled","color"])],32)]}),_:1}),L(em,{"is-open":r.value},null,8,["is-open"])]),_:1}))}}),Sze=Xi(Cze,[["__scopeId","data-v-bb22d72b"]]),Aze={key:0},Ize={class:"flex-col flex-1"},Pze=Fe({__name:"TabViewComp",props:{routes:{default:()=>[]},tabKey:{},onChangeTab:{type:Function,default:()=>{}},slot:{default:void 0},normalText:{type:Boolean,default:!1},backgroundColor:{default:"#fff"}},setup(n){return(e,t)=>{var i;return I(),O(Ue,null,[e.routes.length>1?(I(),ve(y(YN),{key:0,value:(i=e.tabKey)!=null?i:e.routes[0].key,mode:"md",style:bo({backgroundColor:e.backgroundColor}),class:gt(e.slot=="start"&&"flex"),"swipe-gesture":"",scrollable:"",color:"blue1",onIonChange:t[0]||(t[0]=s=>e.onChangeTab(s.detail.value))},{default:j(()=>[(I(!0),O(Ue,null,ct(e.routes,s=>(I(),ve(y(ET),{key:s.key,class:gt(["text-gray2",(e.slot=="start"||e.normalText)&&"normal-case"]),value:s.key},{default:j(()=>[be(Q(s.title),1)]),_:2},1032,["class","value"]))),128)),e.slot=="start"?(I(),O("div",Aze)):re("",!0)]),_:1},8,["value","style","class"])):re("",!0),_("div",Ize,[qr(e.$slots,"scene",{},void 0)])],64)}}}),Ob=Xi(Pze,[["__scopeId","data-v-8bec1e59"]]);/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * © 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var vl=function(){return vl=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vl.apply(this,arguments)};var vh;(function(n){var e=function(){function o(a,l,c,d){if(this.version=a,this.errorCorrectionLevel=l,this.modules=[],this.isFunction=[],a<o.MIN_VERSION||a>o.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=a*4+17;for(var u=[],h=0;h<this.size;h++)u.push(!1);for(var h=0;h<this.size;h++)this.modules.push(u.slice()),this.isFunction.push(u.slice());this.drawFunctionPatterns();var f=this.addEccAndInterleave(c);if(this.drawCodewords(f),d==-1)for(var m=1e9,h=0;h<8;h++){this.applyMask(h),this.drawFormatBits(h);var g=this.getPenaltyScore();g<m&&(d=h,m=g),this.applyMask(h)}s(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}return o.encodeText=function(a,l){var c=n.QrSegment.makeSegments(a);return o.encodeSegments(c,l)},o.encodeBinary=function(a,l){var c=n.QrSegment.makeBytes(a);return o.encodeSegments([c],l)},o.encodeSegments=function(a,l,c,d,u,h){if(c===void 0&&(c=1),d===void 0&&(d=40),u===void 0&&(u=-1),h===void 0&&(h=!0),!(o.MIN_VERSION<=c&&c<=d&&d<=o.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");var f,m;for(f=c;;f++){var g=o.getNumDataCodewords(f,l)*8,b=r.getTotalBits(a,f);if(b<=g){m=b;break}if(f>=d)throw new RangeError("Data too long")}for(var w=0,x=[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH];w<x.length;w++){var k=x[w];h&&m<=o.getNumDataCodewords(f,k)*8&&(l=k)}for(var E=[],T=0,P=a;T<P.length;T++){var C=P[T];t(C.mode.modeBits,4,E),t(C.numChars,C.mode.numCharCountBits(f),E);for(var A=0,R=C.getData();A<R.length;A++){var M=R[A];E.push(M)}}s(E.length==m);var N=o.getNumDataCodewords(f,l)*8;s(E.length<=N),t(0,Math.min(4,N-E.length),E),t(0,(8-E.length%8)%8,E),s(E.length%8==0);for(var U=236;E.length<N;U^=253)t(U,8,E);for(var G=[];G.length*8<E.length;)G.push(0);return E.forEach(function(B,te){return G[te>>>3]|=B<<7-(te&7)}),new o(f,l,G,u)},o.prototype.getModule=function(a,l){return 0<=a&&a<this.size&&0<=l&&l<this.size&&this.modules[l][a]},o.prototype.getModules=function(){return this.modules},o.prototype.drawFunctionPatterns=function(){for(var a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var l=this.getAlignmentPatternPositions(),c=l.length,a=0;a<c;a++)for(var d=0;d<c;d++)a==0&&d==0||a==0&&d==c-1||a==c-1&&d==0||this.drawAlignmentPattern(l[a],l[d]);this.drawFormatBits(0),this.drawVersion()},o.prototype.drawFormatBits=function(a){for(var l=this.errorCorrectionLevel.formatBits<<3|a,c=l,d=0;d<10;d++)c=c<<1^(c>>>9)*1335;var u=(l<<10|c)^21522;s(u>>>15==0);for(var d=0;d<=5;d++)this.setFunctionModule(8,d,i(u,d));this.setFunctionModule(8,7,i(u,6)),this.setFunctionModule(8,8,i(u,7)),this.setFunctionModule(7,8,i(u,8));for(var d=9;d<15;d++)this.setFunctionModule(14-d,8,i(u,d));for(var d=0;d<8;d++)this.setFunctionModule(this.size-1-d,8,i(u,d));for(var d=8;d<15;d++)this.setFunctionModule(8,this.size-15+d,i(u,d));this.setFunctionModule(8,this.size-8,!0)},o.prototype.drawVersion=function(){if(!(this.version<7)){for(var a=this.version,l=0;l<12;l++)a=a<<1^(a>>>11)*7973;var c=this.version<<12|a;s(c>>>18==0);for(var l=0;l<18;l++){var d=i(c,l),u=this.size-11+l%3,h=Math.floor(l/3);this.setFunctionModule(u,h,d),this.setFunctionModule(h,u,d)}}},o.prototype.drawFinderPattern=function(a,l){for(var c=-4;c<=4;c++)for(var d=-4;d<=4;d++){var u=Math.max(Math.abs(d),Math.abs(c)),h=a+d,f=l+c;0<=h&&h<this.size&&0<=f&&f<this.size&&this.setFunctionModule(h,f,u!=2&&u!=4)}},o.prototype.drawAlignmentPattern=function(a,l){for(var c=-2;c<=2;c++)for(var d=-2;d<=2;d++)this.setFunctionModule(a+d,l+c,Math.max(Math.abs(d),Math.abs(c))!=1)},o.prototype.setFunctionModule=function(a,l,c){this.modules[l][a]=c,this.isFunction[l][a]=!0},o.prototype.addEccAndInterleave=function(a){var l=this.version,c=this.errorCorrectionLevel;if(a.length!=o.getNumDataCodewords(l,c))throw new RangeError("Invalid argument");for(var d=o.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l],u=o.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l],h=Math.floor(o.getNumRawDataModules(l)/8),f=d-h%d,m=Math.floor(h/d),g=[],b=o.reedSolomonComputeDivisor(u),w=0,x=0;w<d;w++){var k=a.slice(x,x+m-u+(w<f?0:1));x+=k.length;var E=o.reedSolomonComputeRemainder(k,b);w<f&&k.push(0),g.push(k.concat(E))}for(var T=[],P=function(C){g.forEach(function(A,R){(C!=m-u||R>=f)&&T.push(A[C])})},w=0;w<g[0].length;w++)P(w);return s(T.length==h),T},o.prototype.drawCodewords=function(a){if(a.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var l=0,c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(var d=0;d<this.size;d++)for(var u=0;u<2;u++){var h=c-u,f=(c+1&2)==0,m=f?this.size-1-d:d;!this.isFunction[m][h]&&l<a.length*8&&(this.modules[m][h]=i(a[l>>>3],7-(l&7)),l++)}}s(l==a.length*8)},o.prototype.applyMask=function(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(var l=0;l<this.size;l++)for(var c=0;c<this.size;c++){var d=void 0;switch(a){case 0:d=(c+l)%2==0;break;case 1:d=l%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+l)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(l/2))%2==0;break;case 5:d=c*l%2+c*l%3==0;break;case 6:d=(c*l%2+c*l%3)%2==0;break;case 7:d=((c+l)%2+c*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][c]&&d&&(this.modules[l][c]=!this.modules[l][c])}},o.prototype.getPenaltyScore=function(){for(var a=0,l=0;l<this.size;l++){for(var c=!1,d=0,u=[0,0,0,0,0,0,0],h=0;h<this.size;h++)this.modules[l][h]==c?(d++,d==5?a+=o.PENALTY_N1:d>5&&a++):(this.finderPenaltyAddHistory(d,u),c||(a+=this.finderPenaltyCountPatterns(u)*o.PENALTY_N3),c=this.modules[l][h],d=1);a+=this.finderPenaltyTerminateAndCount(c,d,u)*o.PENALTY_N3}for(var h=0;h<this.size;h++){for(var c=!1,f=0,u=[0,0,0,0,0,0,0],l=0;l<this.size;l++)this.modules[l][h]==c?(f++,f==5?a+=o.PENALTY_N1:f>5&&a++):(this.finderPenaltyAddHistory(f,u),c||(a+=this.finderPenaltyCountPatterns(u)*o.PENALTY_N3),c=this.modules[l][h],f=1);a+=this.finderPenaltyTerminateAndCount(c,f,u)*o.PENALTY_N3}for(var l=0;l<this.size-1;l++)for(var h=0;h<this.size-1;h++){var m=this.modules[l][h];m==this.modules[l][h+1]&&m==this.modules[l+1][h]&&m==this.modules[l+1][h+1]&&(a+=o.PENALTY_N2)}for(var g=0,b=0,w=this.modules;b<w.length;b++){var x=w[b];g=x.reduce(function(T,P){return T+(P?1:0)},g)}var k=this.size*this.size,E=Math.ceil(Math.abs(g*20-k*10)/k)-1;return s(0<=E&&E<=9),a+=E*o.PENALTY_N4,s(0<=a&&a<=2568888),a},o.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var a=Math.floor(this.version/7)+2,l=Math.floor((this.version*8+a*3+5)/(a*4-4))*2,c=[6],d=this.size-7;c.length<a;d-=l)c.splice(1,0,d);return c},o.getNumRawDataModules=function(a){if(a<o.MIN_VERSION||a>o.MAX_VERSION)throw new RangeError("Version number out of range");var l=(16*a+128)*a+64;if(a>=2){var c=Math.floor(a/7)+2;l-=(25*c-10)*c-55,a>=7&&(l-=36)}return s(208<=l&&l<=29648),l},o.getNumDataCodewords=function(a,l){return Math.floor(o.getNumRawDataModules(a)/8)-o.ECC_CODEWORDS_PER_BLOCK[l.ordinal][a]*o.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][a]},o.reedSolomonComputeDivisor=function(a){if(a<1||a>255)throw new RangeError("Degree out of range");for(var l=[],c=0;c<a-1;c++)l.push(0);l.push(1);for(var d=1,c=0;c<a;c++){for(var u=0;u<l.length;u++)l[u]=o.reedSolomonMultiply(l[u],d),u+1<l.length&&(l[u]^=l[u+1]);d=o.reedSolomonMultiply(d,2)}return l},o.reedSolomonComputeRemainder=function(a,l){for(var c=l.map(function(m){return 0}),d=function(m){var g=m^c.shift();c.push(0),l.forEach(function(b,w){return c[w]^=o.reedSolomonMultiply(b,g)})},u=0,h=a;u<h.length;u++){var f=h[u];d(f)}return c},o.reedSolomonMultiply=function(a,l){if(a>>>8||l>>>8)throw new RangeError("Byte out of range");for(var c=0,d=7;d>=0;d--)c=c<<1^(c>>>7)*285,c^=(l>>>d&1)*a;return s(c>>>8==0),c},o.prototype.finderPenaltyCountPatterns=function(a){var l=a[1];s(l<=this.size*3);var c=l>0&&a[2]==l&&a[3]==l*3&&a[4]==l&&a[5]==l;return(c&&a[0]>=l*4&&a[6]>=l?1:0)+(c&&a[6]>=l*4&&a[0]>=l?1:0)},o.prototype.finderPenaltyTerminateAndCount=function(a,l,c){return a&&(this.finderPenaltyAddHistory(l,c),l=0),l+=this.size,this.finderPenaltyAddHistory(l,c),this.finderPenaltyCountPatterns(c)},o.prototype.finderPenaltyAddHistory=function(a,l){l[0]==0&&(a+=this.size),l.pop(),l.unshift(a)},o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o}();n.QrCode=e;function t(o,a,l){if(a<0||a>31||o>>>a)throw new RangeError("Value out of range");for(var c=a-1;c>=0;c--)l.push(o>>>c&1)}function i(o,a){return(o>>>a&1)!=0}function s(o){if(!o)throw new Error("Assertion error")}var r=function(){function o(a,l,c){if(this.mode=a,this.numChars=l,this.bitData=c,l<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}return o.makeBytes=function(a){for(var l=[],c=0,d=a;c<d.length;c++){var u=d[c];t(u,8,l)}return new o(o.Mode.BYTE,a.length,l)},o.makeNumeric=function(a){if(!o.isNumeric(a))throw new RangeError("String contains non-numeric characters");for(var l=[],c=0;c<a.length;){var d=Math.min(a.length-c,3);t(parseInt(a.substring(c,c+d),10),d*3+1,l),c+=d}return new o(o.Mode.NUMERIC,a.length,l)},o.makeAlphanumeric=function(a){if(!o.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");var l=[],c;for(c=0;c+2<=a.length;c+=2){var d=o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(c))*45;d+=o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(c+1)),t(d,11,l)}return c<a.length&&t(o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(c)),6,l),new o(o.Mode.ALPHANUMERIC,a.length,l)},o.makeSegments=function(a){return a==""?[]:o.isNumeric(a)?[o.makeNumeric(a)]:o.isAlphanumeric(a)?[o.makeAlphanumeric(a)]:[o.makeBytes(o.toUtf8ByteArray(a))]},o.makeEci=function(a){var l=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)t(a,8,l);else if(a<16384)t(2,2,l),t(a,14,l);else if(a<1e6)t(6,3,l),t(a,21,l);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,l)},o.isNumeric=function(a){return o.NUMERIC_REGEX.test(a)},o.isAlphanumeric=function(a){return o.ALPHANUMERIC_REGEX.test(a)},o.prototype.getData=function(){return this.bitData.slice()},o.getTotalBits=function(a,l){for(var c=0,d=0,u=a;d<u.length;d++){var h=u[d],f=h.mode.numCharCountBits(l);if(h.numChars>=1<<f)return 1/0;c+=4+f+h.bitData.length}return c},o.toUtf8ByteArray=function(a){a=encodeURI(a);for(var l=[],c=0;c<a.length;c++)a.charAt(c)!="%"?l.push(a.charCodeAt(c)):(l.push(parseInt(a.substring(c+1,c+3),16)),c+=2);return l},o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o}();n.QrSegment=r})(vh||(vh={}));(function(n){(function(e){var t=function(){function i(s,r){this.ordinal=s,this.formatBits=r}return i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),i}();e.Ecc=t})(n.QrCode||(n.QrCode={}))})(vh||(vh={}));(function(n){(function(e){var t=function(){function i(s,r){this.modeBits=s,this.numBitsCharCount=r}return i.prototype.numCharCountBits=function(s){return this.numBitsCharCount[Math.floor((s+7)/17)]},i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),i}();e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(vh||(vh={}));var Of=vh,t5="L",n5={L:Of.QrCode.Ecc.LOW,M:Of.QrCode.Ecc.MEDIUM,Q:Of.QrCode.Ecc.QUARTILE,H:Of.QrCode.Ecc.HIGH},Rze=function(){try{new Path2D().addPath(new Path2D)}catch(n){return!1}return!0}();function i5(n){return n in n5}function tj(n,e){e===void 0&&(e=0);var t=[];return n.forEach(function(i,s){var r=null;i.forEach(function(o,a){if(!o&&r!==null){t.push("M".concat(r+e," ").concat(s+e,"h").concat(a-r,"v1H").concat(r+e,"z")),r=null;return}if(a===i.length-1){if(!o)return;r===null?t.push("M".concat(a+e,",").concat(s+e," h1v1H").concat(a+e,"z")):t.push("M".concat(r+e,",").concat(s+e," h").concat(a+1-r,"v1H").concat(r+e,"z"));return}o&&r===null&&(r=a)})}),t.join("")}function nj(n,e,t,i){var s=i.width,r=i.height,o=i.x,a=i.y,l=n.length+t*2,c=Math.floor(e*.1),d=l/e,u=(s||c)*d,h=(r||c)*d,f=o==null?n.length/2-u/2:o*d,m=a==null?n.length/2-h/2:a*d,g=null;if(i.excavate){var b=Math.floor(f),w=Math.floor(m),x=Math.ceil(u+f-b),k=Math.ceil(h+m-w);g={x:b,y:w,w:x,h:k}}return{x:f,y:m,h,w:u,excavation:g}}function ij(n,e){return n.slice().map(function(t,i){return i<e.y||i>=e.y+e.h?t:t.map(function(s,r){return r<e.x||r>=e.x+e.w?s:!1})})}var s5={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:t5,validator:function(n){return i5(n)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(n){return["linear","radial"].indexOf(n)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},$ze=vl(vl({},s5),{renderAs:{type:String,required:!1,default:"canvas",validator:function(n){return["canvas","svg"].indexOf(n)>-1}}}),Lze=Fe({name:"QRCodeSvg",props:s5,setup:function(n){var e=K(0),t=K(""),i,s=function(){var o=n.value,a=n.level,l=n.margin,c=l>>>0,d=i5(a)?a:t5,u=Of.QrCode.encodeText(o,n5[d]).getModules();if(e.value=u.length+c*2,n.imageSettings.src){var h=nj(u,n.size,c,n.imageSettings);i={x:h.x+c,y:h.y+c,width:h.w,height:h.h},h.excavation&&(u=ij(u,h.excavation))}t.value=tj(u,c)},r=function(){if(!n.gradient)return null;var o=n.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return hi(n.gradientType==="linear"?"linearGradient":"radialGradient",vl({id:"qr-gradient"},o),[hi("stop",{offset:"0%",style:{stopColor:n.gradientStartColor}}),hi("stop",{offset:"100%",style:{stopColor:n.gradientEndColor}})])};return s(),BS(s),function(){return hi("svg",{width:n.size,height:n.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(e.value," ").concat(e.value)},[hi("defs",{},[r()]),hi("rect",{width:"100%",height:"100%",fill:n.background}),hi("path",{fill:n.gradient?"url(#qr-gradient)":n.foreground,d:t.value}),n.imageSettings.src&&hi("image",vl({href:n.imageSettings.src},i))])}}}),Oze=Fe({name:"QRCodeCanvas",props:s5,setup:function(n,e){var t=K(null),i=K(null),s=function(){var o=n.value,a=n.level,l=n.size,c=n.margin,d=n.background,u=n.foreground,h=n.gradient,f=n.gradientType,m=n.gradientStartColor,g=n.gradientEndColor,b=c>>>0,w=i5(a)?a:t5,x=t.value;if(x){var k=x.getContext("2d");if(k){var E=Of.QrCode.encodeText(o,n5[w]).getModules(),T=E.length+b*2,P=i.value,C={x:0,y:0,width:0,height:0},A=n.imageSettings.src&&P!=null&&P.naturalWidth!==0&&P.naturalHeight!==0;if(A){var R=nj(E,n.size,b,n.imageSettings);C={x:R.x+b,y:R.y+b,width:R.w,height:R.h},R.excavation&&(E=ij(E,R.excavation))}var M=window.devicePixelRatio||1,N=l/T*M;if(x.height=x.width=l*M,k.scale(N,N),k.fillStyle=d,k.fillRect(0,0,T,T),h){var U=void 0;f==="linear"?U=k.createLinearGradient(0,0,T,T):U=k.createRadialGradient(T/2,T/2,0,T/2,T/2,T/2),U.addColorStop(0,m),U.addColorStop(1,g),k.fillStyle=U}else k.fillStyle=u;Rze?k.fill(new Path2D(tj(E,b))):E.forEach(function(G,B){G.forEach(function(te,X){te&&k.fillRect(X+b,B+b,1,1)})}),A&&k.drawImage(P,C.x,C.y,C.width,C.height)}}};on(s),BS(s);var r=e.attrs.style;return function(){return hi(Ue,[hi("canvas",vl(vl({},e.attrs),{ref:t,style:vl(vl({},r),{width:"".concat(n.size,"px"),height:"".concat(n.size,"px")})})),n.imageSettings.src&&hi("img",{ref:i,src:n.imageSettings.src,style:{display:"none"},onLoad:s})])}}}),u_=Fe({name:"Qrcode",render:function(){var n=this.$props,e=n.renderAs,t=n.value,i=n.size,s=n.margin,r=n.level,o=n.background,a=n.foreground,l=n.imageSettings,c=n.gradient,d=n.gradientType,u=n.gradientStartColor,h=n.gradientEndColor;return hi(e==="svg"?Lze:Oze,{value:t,size:i,margin:s,level:r,background:o,foreground:a,imageSettings:l,gradient:c,gradientType:d,gradientStartColor:u,gradientEndColor:h})},props:$ze});const Dze={class:"items-center flex gap-2 text-base font-medium py-1"},Mze={class:"border border-gray1 rounded-md !mb-3 bg-white"},Nze={class:"flex justify-between flex-wrap sm:flex-nowrap max-sm:gap-3 w-full p-2 pr-1"},Fze={class:"w-full"},Bze={class:"md:pl-3 py-2 text-gray-700 whitespace-pre-wrap"},Vze=["textContent"],Uze={class:"flex gap-2 items-center"},zze={key:0,class:"mx-1 flex items-center"},Hze={class:"my-3.5 flex flex-col items-center"},jze=Fe({__name:"TabGetLinkAff",setup(n){var h,f;const e="https://unica.expert",t=en(),{userInfo:i}=et(t),s=lt(()=>"".concat(e,"/app?ref=")),r=K(((h=i.value)==null?void 0:h.username)||((f=i.value)==null?void 0:f._id)),o=Yi({username:r.value}),a="".concat(s.value).concat(o.username),l=K(!1),c=async()=>{await Xr.open({url:"https://unica.expert/policy/affiliate.html"})},d=async()=>{try{const{data:m,status:g}=await Qe.patch("/users/me",{...o,form:$b.Ref});g==200?(await t.setUserInfo(m),await tt("Cập nhật mã giới thiệu thành công!","success")):await tt("Cập nhật mã giới thiệu thất bại!","warning")}catch(m){await tt("Cập nhật mã giới thiệu thất bại!","warning"),console.error(m)}finally{l.value=!1}l.value=!1},u=async()=>{const m="".concat(s.value).concat(o.username);await Cc.write({string:m}),await tt("Sao chép mã giới thiệu thành công!","success")};return(m,g)=>(I(),ve(y(At),{class:"ion-padding",color:"white"},{default:j(()=>[_("div",null,[_("div",Dze,[L(y(fe),{icon:y(Ix),class:"size-6"},null,8,["icon"]),g[2]||(g[2]=_("span",null,"Link giới thiệu của bạn:",-1))]),_("div",Mze,[_("div",Nze,[_("div",Fze,[_("span",Bze,Q(s.value),1),l.value?si((I(),O("input",{key:0,"onUpdate:modelValue":g[0]||(g[0]=b=>o.username=b),class:"border-2 border-dashed p-1 rounded-lg mx-1 outline-0 w-auto"},null,512)),[[Ti,o.username]]):(I(),O("span",{key:1,textContent:Q(o.username),class:"text-base font-medium"},null,8,Vze))]),_("div",Uze,[l.value?(I(),O("button",{key:1,onClick:d,class:"px-2 flex items-center",type:"button"},[L(y(fe),{icon:y(hB),class:"size-6 text-gray2"},null,8,["icon"])])):(I(),O("div",zze,[L(y(fe),{onClick:g[1]||(g[1]=b=>l.value=!0),icon:y(sB),class:"size-6 text-blue1"},null,8,["icon"])])),_("button",{onClick:u,class:"px-2 flex items-center text-gray2",type:"button"},[L(y(fe),{icon:y(vb),class:"size-6"},null,8,["icon"])])])])]),_("div",{class:"pb-2 mt-5 font-light"},[g[3]||(g[3]=be(" Giới thiệu người dùng vào Unica.expert bạn sẽ nhận 2 loại hoa hồng. ")),_("span",{onClick:c,class:"text-blue1"}," Tìm hiểu thêm")]),g[5]||(g[5]=_("ul",{class:"font-light"},[_("li",{class:"pb-2.5"},[be(" Người bạn giới thiệu tạo cộng đồng và nâng cấp gói trả phí, hoa hồng cố định: "),_("span",{class:"font-semibold"},"30%")]),_("li",{class:"pb-1.5"},[be(" Người bạn giới thiệu mua sản phẩm/khóa học trong cộng đồng, hoa hồng: "),_("span",{class:"font-semibold"},"10% - 60%")])],-1)),g[6]||(g[6]=_("div",{class:"font-medium text-base py-1 mt-2"},"Hoa hồng trọn đời",-1)),g[7]||(g[7]=_("div",{class:"font-light"}," Bất kì khi nào người dùng/cộng đồng bạn giới thiệu thực hiện giao dịch trên Unica.expert, bạn sẽ nhận được hoa hồng ",-1)),_("div",Hze,[g[4]||(g[4]=_("p",{class:"pb-2 text-base"},"Mã QR giới thiệu của bạn:",-1)),L(u_,{value:a,"render-as":"svg",size:160,level:"L"})])])]),_:1}))}}),Gze={key:0},Wze={class:"flex px-2 py-2 border-b-[1px] border-gray1 gap-4"},qze={class:"flex-[0.6]"},Kze={class:"text-base text-black"},Yze={class:"text-gray2 pt-1 text-base"},Xze={class:"flex-[0.4] text-base pl-2 text-black"},Qze={key:1,class:"justify-center items-center flex flex-col mt-[20%]"},Zze=Fe({__name:"TabCommunity",setup(n){const e=K([]),t=K(1),i=K(!1),s=async(o=1,a=!1)=>{var d,u,h;const l={limit:20,page:o},{data:c}=await Qe.get("/community/community-introduced-by-me",{params:l});console.log("🌸  data 👉",c),J.isEmpty(c)?i.value=!1:((d=c==null?void 0:c.meta)!=null&&d.hasNextPage?(t.value++,i.value=!0):i.value=!1,a?e.value=[...e.value,...(u=c==null?void 0:c.data)!=null?u:[]]:e.value=(h=c==null?void 0:c.data)!=null?h:[])};on(()=>{s(1,!1)});const r=o=>{s(t.value,!0),setTimeout(()=>o.target.complete(),500)};return(o,a)=>(I(),ve(y(At),{class:"ion-padding",color:"white"},{default:j(()=>[_("div",null,[a[2]||(a[2]=_("div",{class:"text-lg font-medium pb-4"},"Cộng đồng tôi giới thiệu",-1)),_("section",null,[a[1]||(a[1]=_("div",{class:"flex py-2 text-center bg-gray1 rounded-md"},[_("div",{class:"flex-[0.5]"},"Cộng đồng"),_("div",{class:"flex-[0.5]"},"Người tạo")],-1)),y(J.isEmpty)(e.value)?(I(),O("div",Qze,[L(y(fe),{src:"/icEmpty.svg",class:"size-32"}),a[0]||(a[0]=_("p",{class:"text-gray2 text-base"},"Không có dữ liệu",-1))])):(I(),O("div",Gze,[(I(!0),O(Ue,null,ct(e.value,l=>(I(),O("div",{key:l._id},[_("div",Wze,[_("div",qze,[_("div",Kze,Q(l.name),1),_("div",Yze," Ngày tạo: "+Q(y(_t)(l.created_at).format("DD/MM/YYYY")),1)]),_("div",Xze,Q(l==null?void 0:l.owner_name),1)])]))),128))]))])]),i.value?(I(),ve(y(Zn),{key:0,onIonInfinite:r},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),Jze={class:"text-lg text-black font-medium mb-2"},eHe={class:"px-4 flex items-center gap-2 border-[1.5px] py-2 rounded-lg border-gray-300"},tHe={class:"flex-1"},nHe={class:"text-nowrap gap-2 items-center mb-10"},iHe={class:"flex items-center gap-2"},sHe=Fe({__name:"TabCoupon",setup(n){var l;const e=en(),{userInfo:t}=et(e),i=K(!1),s=K((l=t.value)==null?void 0:l.discount),r=lt(()=>{var d;return/^(1[0-5]|[0-9])$/g.test(s.value+"")?((d=t.value)==null?void 0:d.discount)!=s.value:!1}),o=async()=>{var c,d;await Cc.write({string:((c=t.value)==null?void 0:c.username)||((d=t.value)==null?void 0:d._id)}),tt("Sao chép mã giảm giá thành công!","success"),i.value=!0},a=async()=>{if(!/^(1[0-5]|[0-9])$/g.test(s.value+""))tt("Vui lòng nhập tỉ lệ giảm giá 0% - 15%","warning");else if(r.value)try{const d={discount:s.value,form:$b.Coupon},{data:u}=await Qe.patch("/users/me",d);J.isEmpty(u)?tt("Cập nhật thất bại","warning"):(await e.setUserInfo(u),tt("Cập nhật thành công","success"))}catch(d){tt("Cập nhật thất bại","warning")}};return(c,d)=>(I(),ve(y(At),{class:"ion-padding",color:"white"},{default:j(()=>{var u,h,f,m;return[_("div",null,[_("div",Jze,[d[1]||(d[1]=be(" Mã giảm giá phần mềm: ")),_("div",eHe,[_("div",tHe,Q(((u=y(t))==null?void 0:u.username)||((h=y(t))==null?void 0:h._id)),1),!y(J.isEmpty)((f=y(t))==null?void 0:f.username)||!y(J.isEmpty)((m=y(t))==null?void 0:m._id)?(I(),ve(y(fe),{key:0,onClick:o,icon:y(vb),class:gt(["size-6",i.value?"text-blue1":"text-gray2"])},null,8,["icon","class"])):re("",!0)])]),d[4]||(d[4]=_("p",null," Bạn có thể trích phần hoa hồng của mình để giảm giá cho người mua gói cộng đồng. ",-1)),d[5]||(d[5]=_("p",{class:"my-4"},[be(" Mã giảm giá chính là mã giới thiệu của bạn. "),_("br"),be("Tỷ lệ giảm giá không vượt quá 15% ")],-1)),_("div",nHe,[d[3]||(d[3]=_("p",null,"Nhập tỉ lệ giảm giá của bạn:",-1)),_("div",iHe,[L(y(Tn),{mode:"ios",class:"w-[20%] shadow-st rounded-lg text-lg font-medium custom",type:"tel",min:"0",max:"15",modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=g=>s.value=g)},null,8,["modelValue"]),d[2]||(d[2]=_("span",{class:"text-lg font-medium"},"%",-1))])]),_("div",{onClick:a,class:gt(["shadow-st p-2 text-center bg-blue1 text-white rounded-lg font-medium",r.value?"bg-blue1 text-white":"bg-gray3 text-white"])}," SAVE ",2)])]}),_:1}))}}),rHe=Xi(sHe,[["__scopeId","data-v-007f995f"]]),oHe={key:0},aHe={class:"flex px-2 py-2 border-b-[1px] border-gray1 gap-4"},lHe={class:"flex-[0.6]"},cHe={class:"text-base text-black"},dHe={class:"text-gray2 pt-1 text-base"},uHe={class:"flex-[0.4] text-base pl-2 text-black"},hHe={key:1,class:"justify-center items-center flex flex-col mt-[20%]"},fHe=Fe({__name:"TabMember",setup(n){const e=K([]),t=K(1),i=K(!1),s=async(o=1,a=!1)=>{var d,u,h;const l={limit:20,page:o},{data:c}=await Qe.get("/users/member-introduced-by-me",{params:l});J.isEmpty(c)?i.value=!1:((d=c==null?void 0:c.meta)!=null&&d.hasNextPage?(t.value++,i.value=!0):i.value=!1,a?e.value=[...e.value,...(u=c==null?void 0:c.data)!=null?u:[]]:e.value=(h=c==null?void 0:c.data)!=null?h:[])};on(()=>{s(1,!1),t.value=1,i.value=!1});const r=o=>{s(t.value,!0),setTimeout(()=>o.target.complete(),500)};return(o,a)=>(I(),ve(y(At),{class:"ion-padding",color:"white"},{default:j(()=>[_("div",null,[a[2]||(a[2]=_("div",{class:"text-lg font-medium pb-4"},"Thành viên tôi giới thiệu",-1)),_("section",null,[a[1]||(a[1]=_("div",{class:"flex py-2 text-center bg-gray1 rounded-md"},[_("div",{class:"flex-[0.5]"},"Tên"),_("div",{class:"flex-[0.5]"},"Ngày tạo")],-1)),y(J.isEmpty)(e.value)?(I(),O("div",hHe,[L(y(fe),{src:"/icEmpty.svg",class:"size-32"}),a[0]||(a[0]=_("p",{class:"text-gray2 text-base"},"Không có dữ liệu",-1))])):(I(),O("div",oHe,[(I(!0),O(Ue,null,ct(e.value,l=>{var c,d;return I(),O("div",{key:l._id},[_("div",aHe,[_("div",lHe,[_("div",cHe,Q((c=l.full_name)!=null?c:"-"),1),_("div",dHe,Q((d=l.email)!=null?d:"-"),1)]),_("div",uHe,Q(y(J.isEmpty)(l.created_at)?"-":y(_t)(l.created_at).format("DD/MM/YYYY")),1)])])}),128))]))])]),i.value?(I(),ve(y(Zn),{key:0,onIonInfinite:r},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),pHe={slot:"start",class:"flex items-center p-3"},mHe=Fe({__name:"UserAffiliateScreen",setup(n){const e=en(),{accessToken:t}=et(e);on(async()=>{await e.getUserInfo(t.value)});const i=gn(),s=[{key:"getlink",title:"Lấy link"},{key:"coupon",title:"Coupon"},{key:"member",title:"Thành viên"},{key:"community",title:"Cộng đồng"}],r=K(s[0].key),o=()=>i.back(Wt),a=l=>{r.value=l};return(l,c)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",pHe,[L(y(fe),{onClick:o,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),c[0]||(c[0]=_("div",{class:"text-lg font-medium text-black"},"Affiliate",-1))])]),_:1})]),_:1}),L(Ob,{routes:s,"tab-key":r.value,onChangeTab:a},{scene:j(()=>[r.value==="getlink"?(I(),ve(jze,{key:0})):re("",!0),r.value==="coupon"?(I(),ve(rHe,{key:1})):re("",!0),r.value==="member"?(I(),ve(fHe,{key:2})):re("",!0),r.value==="community"?(I(),ve(Zze,{key:3})):re("",!0)]),_:1},8,["tab-key"])]),_:1}))}}),gHe={slot:"start",class:"flex items-center p-3"},bHe={class:"px-4"},vHe={class:"text-lg"},yHe={class:"text-gray2"},wHe={class:"px-4 py-2"},xHe=Fe({__name:"UserCommunityContributeScreen",setup(n){const e=Zr(),t=gn(),i=()=>t.back(),s=K([]),r=K(0),o=K(),a=K(!1),l=K(1),c=async()=>{const{data:b}=await Qe.get("/community/".concat(e.params.communityId));console.log("community",b),J.isEmpty(b)||(o.value=b)},d=async b=>{const w={community_id:b},{data:x}=await Qe.get("/users/".concat(e.params.userId,"/contribute"),{params:w}),k=x.totalPosts;r.value=k!=null?k:0},u=async(b=1,w=!1,x)=>{var T,P,C;const k={"w[]":["creator","topic","total_comments","total_reactions","user_reaction","poll"],"wo[]":["user_posts"],limit:15,page:b,"filter[community_id]":x,"filter[creator_id]":e.params.userId},{data:E}=await Qe.get("/community-post/profile",{params:k});J.isEmpty(E)?a.value=!1:((T=E==null?void 0:E.meta)!=null&&T.hasNextPage?(l.value++,a.value=!0):a.value=!1,w?s.value=[...s.value,...(P=E.data)!=null?P:[]]:s.value=(C=E==null?void 0:E.data)!=null?C:[])},h=b=>{u(l.value,!0,e.params.communityId),setTimeout(()=>b.target.complete(),1e3)},f=()=>{u(1,!1,e.params.communityId),l.value=1,a.value=!1};on(()=>{c(),d(e.params.communityId),f()});const m=b=>{b&&t.push({name:"PostDetailScreen",params:{postId:b._id}})},g=async b=>{await(await qe.create({component:r_,componentProps:{post:b,onCallback:f},initialBreakpoint:.5,mode:"ios"})).present()};return(b,w)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",gHe,[L(y(fe),{onClick:i,icon:y(ea),class:"size-7 mr-2"},null,8,["icon"]),w[0]||(w[0]=_("h1",{class:"font-medium text-lg"},"Đóng góp trong cộng đồng",-1))])]),_:1})]),_:1}),L(y(At),{class:"ion-padding-vertical",color:"white1"},{default:j(()=>{var x;return[_("section",bHe,[_("div",vHe,Q(((x=o.value)==null?void 0:x.name)||y(e).params.name),1),_("div",yHe,Q(r.value)+" đóng góp",1)]),_("section",wHe,[(I(!0),O(Ue,null,ct(s.value,k=>(I(),O("div",{key:k._id,class:"py-2"},[L($0,{post:k,"show-option":!0,onOptionPress:E=>g(k),onPostPress:E=>m(k)},null,8,["post","onOptionPress","onPostPress"])]))),128))]),a.value?(I(),ve(y(Zn),{key:0,onIonInfinite:h},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1})]),_:1}))}}),rg={Online:0,Offline:1},_He={class:"aspect-video relative"},kHe=["src"],EHe={class:"ion-padding bg-white flex flex-col justify-between h-full"},THe={class:"font-medium text-base"},CHe={class:"flex justify-between items-center mt-2 mb-1"},SHe={class:"flex items-center gap-2"},AHe={class:"font-normal text-sm text-gray2"},IHe={class:"text-sm font-medium text-gray2"},PHe={class:"flex justify-between items-center mt-2"},RHe={class:"flex items-center gap-2"},$He={class:"font-normal text-sm text-gray2"},LHe={class:"text-gray2 text-sm font-medium"},OHe={key:0},DHe={key:1},r5=Fe({__name:"CardEvent",props:{event:{},isPersonal:{type:Boolean,default:!1},hasSetting:{type:Boolean,default:!1},onSetting:{type:Function,default:()=>{}}},setup(n){const e=Li(),t=n,i=gn(),s=async()=>{var o,a,l;t.event.use_landing_page&&((o=t.event)!=null&&o.url)?await Xr.open({url:(a=t.event)==null?void 0:a.url}):(t.isPersonal&&e.getUserCommunityInfo(t.event.community_id),i.push({name:"EventDetailScreen",params:{eventId:(l=t==null?void 0:t.event)==null?void 0:l.url}},Wt))},r=(o,a)=>{const l=_t(o!=null?o:new Date),c=_t(a!=null?a:new Date),d=c.format("DD/MM/YYYY"),u=l.diff(c,"year"),h=l.diff(c,"month"),f=l.diff(c,"day");return u!=0?l.format("DD/MM/YYYY")+" - "+d:h!=0?l.format("DD/MM")+" - "+d:f!=0?l.format("DD")+" - "+d:d};return(o,a)=>{var l,c,d,u,h;return I(),O("div",{onClick:a[1]||(a[1]=f=>s()),class:"h-full bg-white flex flex-col flex-1 justify-between"},[_("div",_He,[_("img",{class:"aspect-video w-full",src:(l=o.event.image)!=null?l:"https://placehold.co/100/ddd/ddd",placeholder:"https://placehold.co/100/ddd/ddd"},null,8,kHe),o.hasSetting?(I(),O("div",{key:0,onClick:a[0]||(a[0]=qt((...f)=>o.onSetting&&o.onSetting(...f),["stop"])),class:"absolute top-2 bg-white right-2 size-7 items-center justify-center flex rounded-full"},[L(y(fe),{icon:y(Sp),class:"size-5 text-gray5"},null,8,["icon"])])):re("",!0)]),_("div",EHe,[_("div",THe,Q((d=(c=o.event)==null?void 0:c.name)!=null?d:"-"),1),_("div",null,[_("section",CHe,[_("div",SHe,[L(y(fe),{icon:y(DA),class:"size-4 text-gray2"},null,8,["icon"]),_("div",AHe,Q(r(o.event.start_date,o.event.end_date)),1)]),_("div",IHe,Q(o.event.type===y(rg).Online?"Online":"Offline"),1)]),_("section",PHe,[_("div",RHe,[L(y(fe),{icon:y(pB),class:"size-4 text-gray2"},null,8,["icon"]),_("div",$He,Q(y(_t)(o.event.start_date).format("HH:mm"))+" - "+Q(y(_t)(o.event.end_date).format("HH:mm")),1)]),_("div",LHe,[o.event.price==0||y(J.isEmpty)(o.event.price+"")?(I(),O("span",OHe," Miễn phí ")):(I(),O("span",DHe,Q((h=(u=o.event)==null?void 0:u.price)==null?void 0:h.toLocaleString("vi-VN",{style:"currency",currency:"VND"})),1))])])])])])}}}),MHe=["onClick"],NHe=Fe({__name:"ModalFilterEventStatus",props:{selected:{}},setup(n){var r;const e=n,t=[{value:"2",label:"Tất cả"},{value:"0",label:"Online"},{value:"1",label:"Offline"}],i=K((r=e.selected)!=null?r:t[0]),s=async o=>{i.value=o,await qe.dismiss(o,"confirm")};return(o,a)=>(I(),O("section",null,[(I(),O(Ue,null,ct(t,(l,c)=>_("div",{key:c},[_("div",{onClick:d=>s(l),class:gt(["py-2 px-4 text-base font-normal",i.value.value===l.value&&"bg-blue1-tint1"])},Q(l.label),11,MHe)])),64))]))}}),FHe={slot:"start",class:"flex items-center p-3"},BHe={class:"bg-white"},VHe={class:"ion-padding-horizontal pb-0.5 pt-2"},UHe={class:"flex items-center gap-2"},zHe={class:"flex items-center justify-between px-4 bg-white mt-2.5 mb-2"},HHe={class:"line-clamp-1"},jHe={class:"ion-padding pb-10"},GHe={key:0,class:"justify-center items-center flex flex-col mt-[20%]"},WHe=Fe({__name:"UserEventScreen",setup(n){const e=gn(),t=()=>e.back(Wt),i=K(""),s=K("NewlyPosted"),r=K([]),o=K(1),a=K(!1),l=K(),c=b=>{b!==s.value&&(i.value="",l.value=null,d(1,!1,b),o.value=1,a.value=!1),s.value=b},d=async(b=1,w=!1,x="NewlyPosted",k="",E=null)=>{var P,C,A;const{data:T}=await Qe.get("event/allcommunity/".concat(x),{params:{page:b,limit:15,"filter[name]":J.isEmpty(k)?null:k,"filter[type]":E!=null?E:null}});J.isEmpty(T)?a.value=!1:((P=T==null?void 0:T.meta)!=null&&P.hasNextPage?(o.value++,a.value=!0):a.value=!1,w?r.value=[...r.value,...(C=T==null?void 0:T.data)!=null?C:[]]:r.value=(A=T==null?void 0:T.data)!=null?A:[])};on(()=>{u()});const u=()=>{d(1,!1),o.value=1,a.value=!1},h=()=>{var b;d(1,!1,s.value,i.value,(b=l.value)==null?void 0:b.value),o.value=1,a.value=!1},f=b=>{d(o.value,!0,s.value),setTimeout(()=>b.target.complete(),500)},m=async()=>{var k;const b=await qe.create({component:NHe,componentProps:{selected:l.value},initialBreakpoint:.2});await b.present();const{data:w,role:x}=await b.onWillDismiss();x==="confirm"&&(J.isEmpty(w)||((k=l.value)==null?void 0:k.value)!==(w==null?void 0:w.value)&&(w.value==="2"?(d(1,!1,s.value,i.value,null),l.value=null):(d(1,!1,s.value,i.value,w==null?void 0:w.value),l.value=w)))},g=async b=>{h(),setTimeout(()=>{b.target.complete()},500)};return(b,w)=>(I(),ve(y(Dn),null,{default:j(()=>{var x;return[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",FHe,[L(y(fe),{onClick:t,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),w[3]||(w[3]=_("div",{class:"text-lg font-medium text-black"},"Sự kiện",-1))])]),_:1})]),_:1}),_("div",BHe,[_("section",VHe,[_("div",UHe,[_("div",{onClick:w[0]||(w[0]=k=>c("NewlyPosted")),class:gt(["py-1.5 text-center px-4 flex-1 rounded-lg",s.value==="NewlyPosted"?" bg-blue1-tint1":"bg-gray4"])}," Sắp diễn ra ",2),_("div",{onClick:w[1]||(w[1]=k=>c("RecentlyPosted")),class:gt(["py-1.5 px-4 text-center flex-1 rounded-lg",s.value==="RecentlyPosted"?" bg-blue1-tint1":"bg-gray4"])}," Mới đăng ",2)])]),_("section",zHe,[_("form",{onSubmit:qt(h,["prevent"]),class:"flex items-center border-[1px] bg-white border-gray3 rounded-lg flex-[0.65] overflow-hidden"},[L(y(fe),{onClick:h,icon:y(Qd),class:"text-gray2 size-6 pl-2"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":w[2]||(w[2]=k=>i.value=k),placeholder:"Tìm sự kiện",class:"py-1.5 px-2 w-full"},null,512),[[Ti,i.value]])],32),_("div",{onClick:m,class:"flex flex-[0.3] items-center border-[1px] border-gray3 rounded-lg py-1.5 px-2 justify-between gap-2 bg-white"},[_("div",HHe,Q(((x=l.value)==null?void 0:x.label)||"Tất cả"),1),L(y(fe),{icon:y(Al),class:"size-4 text-gray2"},null,8,["icon"])])])]),L(y(At),{color:"white1"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:g},{default:j(()=>[L(y(eo))]),_:1}),_("section",jHe,[y(J.isEmpty)(r.value)?(I(),O("div",GHe,[L(y(fe),{src:"/icEmpty.svg",class:"size-32"}),w[4]||(w[4]=_("p",{class:"text-gray2 text-base"},"Chưa có sự kiện diễn ra",-1))])):(I(!0),O(Ue,{key:1},ct(r.value,k=>(I(),O("div",{key:k==null?void 0:k._id,class:"rounded-lg overflow-hidden mb-4"},[L(r5,{event:k,"is-personal":""},null,8,["event"])]))),128))]),a.value?(I(),ve(y(Zn),{key:0,onIonInfinite:f},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]}),_:1}))}}),Af={Register:1,Cancel:2},qHe={class:"ion-padding"},KHe={class:"ion-padding-horizontal"},YHe={class:"text-lg font-normal"},XHe=Fe({__name:"ModalTicketCodeDetail",props:{codes:{}},setup(n){return(e,t)=>(I(),O("div",qHe,[t[0]||(t[0]=_("div",{class:"text-lg font-medium pb-2"},"Chi tiết mã vé",-1)),_("section",KHe,[(I(!0),O(Ue,null,ct(e.codes,(i,s)=>(I(),O("div",{key:s,class:"my-1"},[_("span",YHe,Q(i),1)]))),128))])]))}}),QHe={class:"ion-padding"},ZHe={class:"flex justify-between items-center"},JHe={class:"line-clamp-1"},eje={class:"flex flex-col items-center mt-2.5 gap-3"},tje=Fe({__name:"ModalTicketSharing",props:{url:{}},setup(n){const e=n,t=async()=>{await Cc.write({string:e.url}),tt("Đã copy link sự kiện\n".concat(e.url),"success")},i=async()=>{await qe.dismiss()};return(s,r)=>(I(),O("section",QHe,[_("div",ZHe,[r[0]||(r[0]=_("div",{class:"text-base font-medium"},"Chia sẻ sự kiện",-1)),L(y(fe),{onClick:i,icon:y(ks),class:"size-7 text-gray2"},null,8,["icon"])]),_("div",{onClick:t,class:"bg-gray4 p-2 rounded-lg flex items-center gap-2 mt-3.5 justify-between"},[_("div",JHe,Q(s.url)+Q(),1),_("div",null,[L(y(fe),{icon:y(vb),class:"flex size-4 text-blue1"},null,8,["icon"])])]),_("div",eje,[r[1]||(r[1]=_("p",null,"Mã QR giới thiệu của bạn:",-1)),L(u_,{value:s.url,"render-as":"svg",level:"M",size:180},null,8,["value"])]),r[2]||(r[2]=_("div",{class:"flex justify-end mt-4"},null,-1))]))}}),nje={class:"ion-padding"},ije={class:"flex justify-between items-center pb-2"},sj=Fe({__name:"ModalConfirmCancelEvent",setup(n){const e=()=>qe.dismiss(null,"cancel"),t=()=>qe.dismiss(null,"confirm");return(i,s)=>(I(),O("section",nje,[_("div",ije,[s[0]||(s[0]=_("span",{class:"font-medium text-lg"},"Huỷ tham gia sự kiện?",-1)),L(y(fe),{icon:y(ks),onClick:e,class:"size-8 text-gray2"},null,8,["icon"])]),s[1]||(s[1]=_("div",{class:"text-black text-base font-normal py-1"}," Người tổ chức sẽ được thông báo và bạn sẽ không thể tham gia sự kiện ",-1)),s[2]||(s[2]=_("div",{class:"text-orange1 text-base font-normal py-1"}," Để yêu cầu hoàn lại tiền (nếu có), hãy liên hệ người tổ chức ",-1)),_("div",{class:"flex items-center justify-end gap-4 mt-2"},[_("div",{onClick:t,class:"px-3 py-1.5 bg-white text-black font-medium rounded-lg"}," Huỷ tham gia "),_("div",{onClick:e,class:"px-3 py-1.5 bg-blue1 shadow-st text-white font-medium rounded-lg"}," Vẫn tham gia ")])]))}}),sje={class:"border-[1px] bg-white border-gray1 rounded-lg p-2"},rje={class:"flex gap-3 items-stretch"},oje=["src"],aje={class:"text-base font-medium"},lje={class:"text-sm gap-y-1 flex flex-col mt-1 font-light"},cje={class:"text-sm font-normal"},dje={class:"text-sm font-normal"},uje={class:"text-sm font-normal"},hje={class:"flex items-center gap-1"},fje={class:"flex justify-end gap-6 text-base font-normal"},pje=Fe({__name:"TicketCard",props:{ticket:{},onCallbackCancel:{type:Function,default:()=>{}}},setup(n){const e="https://unica.expert",t=n,i=lt(()=>{var c,d;return"".concat(e,"/").concat(t.ticket.event.url,"/event/").concat((d=(c=t.ticket.event)==null?void 0:c.community_id)==null?void 0:d.short_name)}),s=(c,d)=>{const u=_t(c!=null?c:new Date),h=_t(d!=null?d:new Date),f=h.format("DD/MM/YYYY"),m=u.diff(h,"year"),g=u.diff(h,"month"),b=u.diff(h,"day"),w=()=>u.format("HH:mm")+" - "+h.format("HH:mm");return m!=0?u.format("DD/MM/YYYY")+" - "+f+" "+w():g!=0?u.format("DD/MM")+" - "+f+" "+w():b!=0?u.format("DD")+" - "+f+" "+w():f+" "+w()},r=async()=>{var d,u;await(await qe.create({component:XHe,mode:"ios",componentProps:{codes:(u=(d=t.ticket)==null?void 0:d.ticket_detail)!=null?u:[]},initialBreakpoint:.5})).present()},o=async()=>{try{const{status:c}=await Qe.patch("/event-subscribe/".concat(t.ticket._id),{status:Af.Cancel});c===201&&(t.onCallbackCancel(),tt("Huỷ vé thành công!","success"))}catch(c){tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}},a=async()=>{const c=await qe.create({component:sj,mode:"ios",cssClass:"confirmmd"});await c.present();const{role:d}=await c.onWillDismiss();d==="confirm"&&o()},l=async()=>{await(await qe.create({component:tje,componentProps:{url:i.value},mode:"ios",cssClass:"confirmmd"})).present()};return(c,d)=>{var u,h,f,m,g;return I(),O("div",sje,[_("div",rje,[_("img",{src:c.ticket.event.image,class:"size-14 object-cover flex rounded-lg"},null,8,oje),_("div",null,[_("div",aje,Q(c.ticket.event.name),1)])]),_("div",lje,[_("div",null,[d[0]||(d[0]=be(" Ngày đăng ký: ")),_("span",cje,Q(y(_t)((u=c.ticket)==null?void 0:u.created_at).format("DD/MM/YYYY")),1)]),_("div",null,[d[1]||(d[1]=be(" Thời gian sự kiện: ")),_("span",dje,Q(s(c.ticket.event.start_date,c.ticket.event.end_date)),1)]),_("div",null,[d[2]||(d[2]=be(" Trạng thái : ")),_("span",{class:gt(["text-sm font-normal",c.ticket.status==1?"text-green-600":"text-red-600"])},Q(c.ticket.status==1?"Hoạt động":"Đã huỷ"),3)]),_("div",null,[d[3]||(d[3]=be(" Phí: ")),_("span",uje,Q(((f=(h=c.ticket)==null?void 0:h.event)==null?void 0:f.price)===0?"Miễn phí":((g=(m=c.ticket)==null?void 0:m.event)==null?void 0:g.price)+"đ"),1)]),_("div",hje,[d[4]||(d[4]=be(" Mã vé: ")),_("span",{onClick:r,class:"text-sm font-normal mr-4 flex items-center gap-1"},[be(Q(c.ticket.registration_number)+" ",1),L(y(fe),{icon:y(Al),class:"size-4"},null,8,["icon"])])]),_("div",fje,[c.ticket.status===1?(I(),O("div",{key:0,onClick:a,class:"text-red-600 flex items-center gap-1"},[L(y(fe),{icon:y(ks),class:"size-5"},null,8,["icon"]),d[5]||(d[5]=be(" Huỷ vé "))])):re("",!0),_("div",{onClick:l,class:"text-blue1 flex items-center gap-1"},[L(y(fe),{icon:y(Kbe),class:"size-5"},null,8,["icon"]),d[6]||(d[6]=be(" Chia sẻ "))])])])])}}}),mje=["onClick"],gje=Fe({__name:"ModalFilterTicketStatus",props:{selected:{}},setup(n){var r;const e=n,t=[{value:"0",label:"Tất cả"},{value:"1",label:"Hoạt động"},{value:"2",label:"Hủy"}],i=K((r=e.selected)!=null?r:t[0]),s=async o=>{i.value=o,await qe.dismiss(o,"confirm")};return(o,a)=>(I(),O("section",null,[(I(),O(Ue,null,ct(t,(l,c)=>_("div",{key:c},[_("div",{onClick:d=>s(l),class:gt(["py-2 px-4 text-base font-normal",i.value.value===l.value&&"bg-blue1-tint1"])},Q(l.label),11,mje)])),64))]))}}),bje={slot:"start",class:"flex items-center p-3"},vje={class:"flex items-center justify-between px-4 bg-white mt-2.5 mb-2"},yje={class:"line-clamp-1"},wje={class:"px-4 pb-10"},xje={key:1,class:"mt-[30%] flex flex-1 flex-col justify-center items-center text-gray2"},_je=Fe({__name:"UserTicketScreen",setup(n){const e=gn(),t=()=>e.back(Wt),{userInfo:i}=et(en()),s=K(1),r=K(!1),o=K([]),a=K(),l=K(""),c=async(m=1,g=!1)=>{var w,x,k,E,T,P;const{data:b}=await Qe.get("event-subscribe/myticket/".concat((w=i.value)==null?void 0:w._id),{params:{page:m,limit:15,"filter[status]":(k=(x=a.value)==null?void 0:x.value)!=null?k:null,"filter[name]":J.isEmpty(l.value)?null:l.value}});J.isEmpty(b)?r.value=!1:((E=b==null?void 0:b.meta)!=null&&E.hasNextPage?(s.value++,r.value=!0):r.value=!1,g?o.value=[...o.value,...(T=b==null?void 0:b.data)!=null?T:[]]:o.value=(P=b==null?void 0:b.data)!=null?P:[])},d=()=>{c(1,!1),s.value=1,r.value=!1};on(()=>{d()}),ki(a,()=>{d()});const u=m=>{c(s.value,!0),setTimeout(()=>m.target.complete(),500)},h=async m=>{d(),setTimeout(()=>{m.target.complete()},500)},f=async()=>{const m=await qe.create({component:gje,componentProps:{selected:a.value},initialBreakpoint:.2});await m.present();const{data:g,role:b}=await m.onWillDismiss();b==="confirm"&&(J.isEmpty(g)||(g.value==="0"?a.value=null:a.value=g))};return(m,g)=>(I(),ve(y(Dn),null,{default:j(()=>{var b;return[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",bje,[L(y(fe),{onClick:t,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),g[1]||(g[1]=_("div",{class:"text-lg font-medium text-black"},"Vé của tôi",-1))])]),_:1})]),_:1}),_("section",vje,[_("form",{onSubmit:qt(d,["prevent"]),class:"flex items-center border-[1px] border-gray3 rounded-lg flex-[0.65] overflow-hidden"},[L(y(fe),{onClick:d,icon:y(Qd),class:"text-gray2 size-6 pl-2"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":g[0]||(g[0]=w=>l.value=w),placeholder:"Tìm sự kiện",class:"py-1.5 px-2 w-full"},null,512),[[Ti,l.value]])],32),_("div",{onClick:f,class:"flex flex-[0.3] items-center border-[1px] border-gray3 rounded-lg py-1.5 px-2 justify-between gap-2"},[_("div",yje,Q(((b=a.value)==null?void 0:b.label)||"Tất cả"),1),L(y(fe),{icon:y(Al),class:"size-4 text-gray2"},null,8,["icon"])])]),L(y(At),{color:"white1"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:h},{default:j(()=>[L(y(eo))]),_:1}),_("section",wje,[y(J.isEmpty)(o.value)?(I(),O("div",xje,[L(y(fe),{src:"/icEmpty.svg",class:"size-28"}),g[2]||(g[2]=be(" Chưa có vé nào "))])):(I(!0),O(Ue,{key:0},ct(o.value,w=>(I(),O("div",{key:w._id,class:"py-1.5"},[L(pje,{ticket:w,onCallbackCancel:d},null,8,["ticket"])]))),128))]),r.value?(I(),ve(y(Zn),{key:0,onIonInfinite:u},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]}),_:1}))}}),kje={slot:"start",class:"flex items-center p-3"},Eje={class:"font-normal text-lg text-black mb-6"},Tje={class:"text-lg font-light text-black"},Cje=Fe({__name:"AccountDetailScreen",setup(n){const e=gn(),t=K(),i=en(),s=ln(),r=Li(),o=Ba(),a=Sx(),l=()=>{e.back()},c=async()=>{const{data:b}=await Qe.get("community/me");console.log(b),t.value=b};on(()=>{c()});const{userInfo:d}=et(i),u=async b=>{(await Fd.create({mode:"ios",header:"Thông báo",message:b,buttons:["Đồng ý"]})).present()},h=async()=>{await(await Fd.create({mode:"ios",header:"Bạn có chắc chắn muốn đóng tài khoản?",buttons:[{text:"Giữ lại",role:"cancel"},{text:"Đồng ý",role:"destructive",handler:g}]})).present()},f=async()=>{try{await Xr.open({url:"mailto:mailto:cskh@unica.vn"})}catch(b){console.log(b)}},m=async()=>{var b,w;try{if(((w=(b=t==null?void 0:t.value)==null?void 0:b.meta)==null?void 0:w.itemCount)>0){u("Bạn phải chuyển quyền sở hữu cộng đồng hoặc xoá cộng đồng trước khi đóng tài khoản");return}h()}catch(x){console.log(x)}},g=async()=>{try{const{status:b}=await Qe.delete("users/me");b===200&&(await tt("Tài khoản của bạn đã được đóng. Chúng tôi rất tiếc vì bạn đã rời bỏ chúng tôi.","success"),i.logOut(),s.clear(),r.clear(),o.clear(),a.clear(),e.replace({name:"defaultBottomTab"}))}catch(b){tt("Đóng tài khoản thất bại. Vui lòng thử lại sau.","error")}};return(b,w)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",kje,[L(y(fe),{onClick:l,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),w[0]||(w[0]=_("div",{class:"text-lg font-medium text-black"},"Đóng tài khoản",-1))])]),_:1})]),_:1}),L(y(At),{class:"ion-padding"},{default:j(()=>{var x;return[_("div",Eje,[w[1]||(w[1]=be(" Email: ")),_("span",Tje,Q((x=y(d))==null?void 0:x.email),1)]),_("div",{onClick:m,class:"text-red-500 font-medium text-center py-3 bg-red-50 rounded-lg"}," Đóng tài khoản "),_("div",{class:"my-4 text-sm font-light"},[w[2]||(w[2]=_("span",{class:"text-red-500 font-medium"},"Cảnh báo:",-1)),w[3]||(w[3]=be(" Nếu bạn đóng tài khoản, bạn sẽ mất quyền truy cập vào tài khoản và dữ liệu liên quan đến tài khoản của bạn mãi mãi, ngay cả khi bạn chọn tạo tài khoản mới bằng cùng địa chỉ email trong tương lai. Xin lưu ý, nếu bạn muốn khôi phục tài khoản sau khi gửi yêu cầu xóa, bạn sẽ có ")),w[4]||(w[4]=_("span",{class:"text-red-500 font-medium italic"},"30 ngày",-1)),w[5]||(w[5]=be(" sau ngày gửi ban đầu để liên hệ với ")),_("a",{onClick:f,class:"text-blue1 font-medium"},"cskh@unica.vn"),w[6]||(w[6]=be(" để hủy yêu cầu này. Nếu có bất kỳ dữ liệu nào liên quan đến cộng đồng sở hữu bạn cần ")),w[7]||(w[7]=_("span",{class:"text-black font-medium"},"chuyển quyền sở hữu cộng đồng",-1)),w[8]||(w[8]=be(" đó cho thành viên khác hoặc phải ")),w[9]||(w[9]=_("span",{class:"text-black font-medium"},"xoá cộng đồng",-1)),w[10]||(w[10]=be(" đó trước khi xoá tài khoản. Nếu bạn muốn khôi phục cộng đồng sau khi gửi yêu cầu xoá, bạn sẽ có ")),w[11]||(w[11]=_("span",{class:"text-red-500 font-medium italic"},"90 ngày",-1)),w[12]||(w[12]=be(" kể từ ngày thực hiện. "))])]}),_:1})]),_:1}))}}),Sje={slot:"start",class:"flex items-center p-3"},Aje={class:"w-full mt-2"},Ije=["onClick"],Pje={class:"w-full text-black2 font-medium"},Rje=Fe({__name:"AppAboutScreen",setup(n){const e=gn(),t=()=>e.back(),i=[{label:"Điều khoản dịch vụ",action:async()=>await Xr.open({url:"https://unica.expert/policy/privacy.html"})},{label:"Chính sách bảo mật",action:async()=>await Xr.open({url:"https://unica.expert/policy/privacy.html"})},{label:"Thoả thuận người dùng",action:async()=>await Xr.open({url:"https://unica.expert/page/dieu-khoan-su-dung.html"})}];return(s,r)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:""},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",Sje,[L(y(fe),{onClick:t,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),r[0]||(r[0]=_("div",{class:"text-lg font-medium text-black"}," Giới thiệu về Unica Expert ",-1))])]),_:1})]),_:1}),L(y(At),null,{default:j(()=>[_("section",Aje,[(I(),O(Ue,null,ct(i,(o,a)=>_("div",{key:a,class:"w-full"},[_("div",{onClick:o.action,class:"flex items-center ion-padding-horizontal py-2.5 my-.5 rounded-md"},[_("div",Pje,Q(o.label),1),L(y(fe),{icon:y(Gy)},null,8,["icon"])],8,Ije)])),64))])]),_:1})]),_:1}))}}),$je={slot:"start",class:"flex items-center p-3"},Lje=Fe({__name:"ChangePassword",setup(n){const{VITE_API_URL_ID:e}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},t=gn(),{accessToken:i}=et(en()),s=()=>t.back(),r=async()=>{const o=new FormData;o.append("password","999999");const a=await fetch("".concat(e,"/users"),{method:"PUT",body:o,headers:{Accept:"Application/json",Authorization:"Bearer ".concat(i.value),"Content-Type":"multipart/form-data"}});console.log(a)};return(o,a)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",$je,[L(y(fe),{onClick:s,icon:y(ea),class:"size-6 mr-4"},null,8,["icon"]),a[0]||(a[0]=_("div",{class:"text-lg font-medium text-black"},"Đổi mật khẩu",-1))])]),_:1})]),_:1}),L(y(At),null,{default:j(()=>[_("div",null,[_("div",{onClick:r},"Lưu")])]),_:1})]),_:1}))}}),Oje=()=>{const n=gn(),e=en(),{userInfo:t}=et(e),i=K(""),s=K(1),r=K(!1),o=K([]),a=()=>{i.value="",l(1,!1,""),s.value=1,r.value=!1},l=async(b=1,w=!1,x)=>{var E,T,P,C;const{data:k}=await Qe.get("/friend-ship/all-friend",{params:{senderId:(E=t.value)==null?void 0:E._id,search:x,page:b,limit:20}});J.isEmpty(k)?r.value=!1:((T=k==null?void 0:k.meta)!=null&&T.hasNextPage?(s.value++,r.value=!0):r.value=!1,w?o.value=[...o.value,...(P=k==null?void 0:k.data)!=null?P:[]]:o.value=(C=k==null?void 0:k.data)!=null?C:[])},c=async(b,w)=>{const{data:x}=await Qe.delete("/friend-ship",{data:{receiverId:b}});J.isEmpty(x)||(o.value.splice(w,1),tt("Đã huỷ kết bạn!","success"))};on(()=>{l()});const d=()=>{l(1,!1,i.value),s.value=1,r.value=!1};return{back:()=>n.back(),refresh:async b=>{d(),setTimeout(()=>{b.target.complete()},500)},friends:o,onSearch:d,refSearch:i,clearSearch:a,canLoadmore:r,onRemoveFriend:c,onInfiniteLoad:b=>{l(s.value,!0),setTimeout(()=>b.target.complete(),500)},onGotoFriendRequest:()=>{n.push({name:"FriendRequestScreen"},Wt)},onGotoMyRequest:()=>{n.push({name:"FriendMyRequestedScreen"},Wt)}}},Dje={class:"p-4 flex gap-3 items-center [overflow-wrap:anywhere] border-[1px]"},Mje=["src"],Nje={class:"w-full flex flex-col"},Fje={class:"text-lg line-clamp-2 font-semibold"},Bje={class:"text-base text-gray5"},Vje={class:"p-4"},Uje={class:"flex items-center p-2.5 bg-white4 rounded-full"},zje={class:"text-base font-medium"},Hje={class:"flex items-center p-2.5 bg-white4 rounded-full"},jje={class:"text-base font-medium"},Gje=Fe({__name:"ModalActionFriend",props:{friend:{},onCallback:{type:Function,default:()=>{}}},setup(n){const e=n,t=gn(),i=Rr(),s=Va(),r=l=>{l.target.src="/upload-user.png"},o=async()=>{var l,c;await qe.dismiss(),i.sendMessageSocket("createSingleChatRoom",{user_id:(c=(l=e.friend)==null?void 0:l.user)==null?void 0:c._id},async d=>{await s.setActiveRoom(d),t.push({name:"ChatRoom",params:{id:d==null?void 0:d._id}},Wt)})},a=async()=>{var c,d,u,h;await qe.dismiss(null,"remove"),await(await Fd.create({mode:"ios",backdropDismiss:!1,header:"Huỷ kết bạn với ".concat((d=(c=e==null?void 0:e.friend)==null?void 0:c.user)==null?void 0:d.full_name.split(" ")[0]),message:"Bạn có chắc chắn muốn huỷ kết bạn với ".concat((h=(u=e==null?void 0:e.friend)==null?void 0:u.user)==null?void 0:h.full_name.split(" ")[0]," không?"),buttons:[{text:"Xác nhận",handler:()=>e.onCallback(),cssClass:"fcb"},{text:"Bỏ qua",role:"cancel",cssClass:"fcn"}]})).present()};return(l,c)=>{var d,u,h,f,m,g,b,w,x,k,E,T;return I(),O("div",null,[_("section",Dje,[(I(),O("img",{src:(h=(u=(d=l.friend)==null?void 0:d.user)==null?void 0:u.avatar)!=null?h:"/upload-user.png",key:(m=(f=l.friend)==null?void 0:f.user)==null?void 0:m.avatar,placeholder:"/upload-user.png",onError:r,class:"size-14 rounded-full"},null,40,Mje)),_("div",Nje,[_("div",Fje,Q((b=(g=l.friend)==null?void 0:g.user)==null?void 0:b.full_name),1),_("div",Bje," Là bạn bè từ "+Q(y(_t)((w=l.friend)==null?void 0:w.created_at).format("MMMM YYYY")),1)])]),_("div",Vje,[_("section",{onClick:o,class:"flex items-center gap-2 py-2"},[_("div",Uje,[L(y(fe),{icon:y(Ax),class:"size-5"},null,8,["icon"])]),_("div",zje," Nhắn tin cho "+Q((k=(x=l.friend)==null?void 0:x.user)==null?void 0:k.full_name.split(" ")[0]),1)]),_("section",{onClick:a,class:"flex items-center gap-2 py-2"},[_("div",Hje,[L(y(fe),{src:"/icons/icRemoveFriend.svg",class:"size-5"})]),_("div",jje," Huỷ kết bạn với "+Q((T=(E=l.friend)==null?void 0:E.user)==null?void 0:T.full_name.split(" ")[0]),1)])])])}}}),Wje={class:"py-2 rounded-lg flex gap-2 items-center [overflow-wrap:anywhere]"},qje=["src"],Kje={class:"w-full flex flex-col gap-1"},Yje={class:"text-lg font-medium line-clamp-2"},Xje={class:"text-xs text-gray5"},Qje=["onClick"],Zje=Fe({__name:"FriendScreen",setup(n){const{back:e,refresh:t,friends:i,onSearch:s,canLoadmore:r,refSearch:o,clearSearch:a,onInfiniteLoad:l,onRemoveFriend:c,onGotoFriendRequest:d,onGotoMyRequest:u}=Oje(),h=m=>{m.target.src="/upload-user.png"},f=async(m,g)=>{await(await qe.create({mode:"ios",component:Gje,componentProps:{friend:m,onCallback:()=>{var w;return c((w=m==null?void 0:m.user)==null?void 0:w._id,g)}},initialBreakpoint:.35,breakpoints:[0,.35]})).present()};return(m,g)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{onClick:y(e),slot:"start",icon:y(Eo),class:"size-6 pl-2 pr-1 z-50"},null,8,["onClick","icon"]),L(y(Qp),{class:"text-lg font-medium"},{default:j(()=>g[2]||(g[2]=[be("Bạn bè")])),_:1})]),_:1})]),_:1}),L(y(At),{color:"white",class:"ion-padding"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:y(t)},{default:j(()=>[L(y(eo))]),_:1},8,["onIonRefresh"]),_("form",{onSubmit:g[1]||(g[1]=qt((...b)=>y(s)&&y(s)(...b),["prevent"])),class:"mb-1 items-center flex px-3 rounded-3xl bg-white3 overflow-hidden"},[L(y(fe),{onClick:y(s),icon:y(yb),class:"size-7 text-gray2"},null,8,["onClick","icon"]),si(_("input",{"onUpdate:modelValue":g[0]||(g[0]=b=>Pi(o)?o.value=b:null),placeholder:"Tìm kiếm bạn bè",class:"p-2 w-full text-base bg-white3 outline-none"},null,512),[[Ti,y(o)]]),y(o)?(I(),ve(y(fe),{key:0,onClick:y(a),icon:y(Ah),class:"size-7 text-gray2"},null,8,["onClick","icon"])):re("",!0)],32),L(y(YR),{onClick:y(d),class:"font-medium bg-white4"},{default:j(()=>g[3]||(g[3]=[be("Lời mời kết bạn")])),_:1},8,["onClick"]),L(y(YR),{onClick:y(u),class:"font-medium bg-white4"},{default:j(()=>g[4]||(g[4]=[be("Đã gửi kết bạn")])),_:1},8,["onClick"]),_("div",null,[(I(!0),O(Ue,null,ct(y(i),(b,w)=>{var x,k,E,T;return I(),O("section",{key:w,class:"py-1"},[_("div",Wje,[(I(),O("img",{src:(k=(x=b.user)==null?void 0:x.avatar)!=null?k:"/upload-user.png",key:(E=b.user)==null?void 0:E.avatar,placeholder:"/upload-user.png",onError:h,class:"size-16 rounded-full"},null,40,qje)),_("div",Kje,[_("div",Yje,Q((T=b.user)==null?void 0:T.full_name),1),_("div",Xje," Bạn bè từ ngày: "+Q(y(_t)(b.created_at).format("DD/MM/YYYY")),1)]),_("div",{onClick:P=>f(b,w),class:"flex items-center"},[L(y(fe),{icon:y(Sp),class:"size-6"},null,8,["icon"])],8,Qje)])])}),128))]),y(r)?(I(),ve(y(Zn),{key:0,onIonInfinite:y(l)},{default:j(()=>[L(y(Jn))]),_:1},8,["onIonInfinite"])):re("",!0)]),_:1})]),_:1}))}}),Jje=()=>{const n=en(),{userInfo:e}=et(n),t=K([]),i=gn(),s=()=>i.back(),r=K(""),o=K(1),a=K(!1),l=async(b=1,w=!1,x)=>{var E,T,P,C;const{data:k}=await Qe.get("/friend-ship/friend-requests/received",{params:{senderId:(E=e.value)==null?void 0:E._id,search:x,page:b,limit:10}});J.isEmpty(k)?a.value=!1:((T=k==null?void 0:k.meta)!=null&&T.hasNextPage?(o.value++,a.value=!0):a.value=!1,w?t.value=[...t.value,...(P=k==null?void 0:k.data)!=null?P:[]]:t.value=(C=k==null?void 0:k.data)!=null?C:[])};on(()=>{l()});const c=()=>{l(1,!1,r.value),o.value=1,a.value=!1},d=()=>{r.value="",l(1,!1,""),o.value=1,a.value=!1},u=async b=>{c(),setTimeout(()=>{b.target.complete()},500)},h=b=>{l(o.value,!0),setTimeout(()=>b.target.complete(),500)},f=async(b,w)=>{var k;const{status:x}=await Qe.patch("/friend-ship",{senderId:(k=e.value)==null?void 0:k._id,receiverId:b,status:Og.Accepted});x===200&&t.value.splice(w,1)},m=async(b,w)=>{var k,E;await(await Fd.create({mode:"ios",backdropDismiss:!1,header:"Từ chối kết bạn với ".concat((k=b==null?void 0:b.user)==null?void 0:k.full_name.split(" ")[0]),message:"Bạn có chắc chắn muốn từ chối kết bạn với ".concat((E=b==null?void 0:b.user)==null?void 0:E.full_name.split(" ")[0]," không?"),buttons:[{text:"Xác nhận",handler:()=>{var T;return g((T=b==null?void 0:b.user)==null?void 0:T._id,w)},cssClass:"fcb"},{text:"Bỏ qua",role:"cancel",cssClass:"fcn"}]})).present()},g=async(b,w)=>{const{data:x}=await Qe.delete("/friend-ship",{data:{receiverId:b}});J.isEmpty(x)||(t.value.splice(w,1),tt("Đã huỷ gửi lời mời kết bạn","success"))};return{back:s,friends:t,refresh:u,onInfiniteLoad:h,refSearch:r,onSearch:c,canLoadmore:a,clearSearch:d,onAcceptFriend:f,onRemoveFriend:m}},eGe={class:"py-2 rounded-lg flex gap-3 items-center [overflow-wrap:anywhere]"},tGe=["src"],nGe={class:"w-full flex flex-col gap-2"},iGe={class:"text-lg font-medium line-clamp-2"},sGe={class:"flex flex-1 gap-2.5"},rGe=["onClick"],oGe=["onClick"],aGe=Fe({__name:"FriendRequestScreen",setup(n){const{back:e,friends:t,clearSearch:i,refresh:s,onInfiniteLoad:r,refSearch:o,onSearch:a,canLoadmore:l,onAcceptFriend:c,onRemoveFriend:d}=Jje(),u=h=>{h.target.src="/upload-user.png"};return(h,f)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{onClick:y(e),slot:"start",icon:y(Eo),class:"size-6 pl-2 pr-1 z-50"},null,8,["onClick","icon"]),L(y(Qp),{class:"text-lg font-medium"},{default:j(()=>f[2]||(f[2]=[be("Lời mời kết bạn")])),_:1})]),_:1})]),_:1}),L(y(At),{class:"ion-padding",color:"white"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:y(s)},{default:j(()=>[L(y(eo))]),_:1},8,["onIonRefresh"]),_("form",{onSubmit:f[1]||(f[1]=qt((...m)=>y(a)&&y(a)(...m),["prevent"])),class:"mb-1 items-center flex px-3 rounded-3xl bg-white3 overflow-hidden"},[L(y(fe),{onClick:y(a),icon:y(yb),class:"size-7 text-gray2"},null,8,["onClick","icon"]),si(_("input",{"onUpdate:modelValue":f[0]||(f[0]=m=>Pi(o)?o.value=m:null),placeholder:"Tìm kiếm bạn bè",class:"p-2 w-full text-base bg-white3 outline-none"},null,512),[[Ti,y(o)]]),y(o)?(I(),ve(y(fe),{key:0,onClick:y(i),icon:y(Ah),class:"size-7 text-gray2"},null,8,["onClick","icon"])):re("",!0)],32),_("div",null,[(I(!0),O(Ue,null,ct(y(t),(m,g)=>{var b,w,x,k;return I(),O("section",{key:g,class:"py-1"},[_("div",eGe,[(I(),O("img",{src:(w=(b=m.user)==null?void 0:b.avatar)!=null?w:"/upload-user.png",key:(x=m.user)==null?void 0:x.avatar,placeholder:"/upload-user.png",onError:u,class:"size-16 rounded-full"},null,40,tGe)),_("div",nGe,[_("div",iGe,Q((k=m.user)==null?void 0:k.full_name),1),_("div",sGe,[_("div",{onClick:E=>{var T;return y(c)((T=m.user)==null?void 0:T._id,g)},class:"bg-blue1 flex-1 py-1.5 text-center text-base font-medium text-white rounded-lg"}," Xác nhận ",8,rGe),_("div",{onClick:E=>y(d)(m,g),class:"bg-white4 flex-1 text-center py-1.5 text-base font-medium text-black rounded-lg"}," Xoá ",8,oGe)])])])])}),128))]),y(l)?(I(),ve(y(Zn),{key:0,onIonInfinite:y(r)},{default:j(()=>[L(y(Jn))]),_:1},8,["onIonInfinite"])):re("",!0)]),_:1})]),_:1}))}}),lGe=()=>{const n=en(),{userInfo:e}=et(n),t=K([]),i=gn(),s=K(""),r=()=>i.back(),o=K(1),a=K(!1),l=async(g=1,b=!1,w)=>{var k,E,T,P;const{data:x}=await Qe.get("/friend-ship/friend-requests/sent",{params:{senderId:(k=e.value)==null?void 0:k._id,search:w,page:g,limit:20}});console.log(x),J.isEmpty(x)?a.value=!1:((E=x==null?void 0:x.meta)!=null&&E.hasNextPage?(o.value++,a.value=!0):a.value=!1,b?t.value=[...t.value,...(T=x==null?void 0:x.data)!=null?T:[]]:t.value=(P=x==null?void 0:x.data)!=null?P:[])},c=async(g,b)=>{var x,k;await(await Fd.create({mode:"ios",backdropDismiss:!1,header:"Huỷ gửi kết bạn đến ".concat((x=g==null?void 0:g.user)==null?void 0:x.full_name.split(" ")[0]),message:"Bạn có chắc chắn muốn huỷ gửi kết bạn đến ".concat((k=g==null?void 0:g.user)==null?void 0:k.full_name.split(" ")[0]," không?"),buttons:[{text:"Xác nhận",cssClass:"fcb",handler:()=>{var E;return d((E=g==null?void 0:g.user)==null?void 0:E._id,b)}},{text:"Bỏ qua",role:"cancel",cssClass:"fcn"}]})).present()},d=async(g,b)=>{const{data:w}=await Qe.delete("/friend-ship",{data:{receiverId:g}});J.isEmpty(w)||(t.value.splice(b,1),tt("Đã huỷ gửi lời mời kết bạn","success"))};on(()=>{l()});const u=()=>{l(1,!1,s.value),o.value=1,a.value=!1};return{back:r,refresh:async g=>{u(),setTimeout(()=>{g.target.complete()},500)},friends:t,refSearch:s,onSearch:u,canLoadmore:a,onRemoveFriend:c,onInfiniteLoad:g=>{l(o.value,!0),setTimeout(()=>g.target.complete(),500)},clearSearch:()=>{s.value="",l(1,!1,""),o.value=1,a.value=!1}}},cGe={class:"py-2 rounded-lg flex gap-2.5 items-center [overflow-wrap:anywhere]"},dGe=["src"],uGe={class:"w-full flex-1 flex flex-col gap-1"},hGe={class:"text-lg font-medium line-clamp-2"},fGe={class:"text-xs text-gray5"},pGe=["onClick"],mGe=Fe({__name:"FriendMyRequestedScreen",setup(n){const e=u=>{u.target.src="/upload-user.png"},{back:t,friends:i,canLoadmore:s,refresh:r,onInfiniteLoad:o,onRemoveFriend:a,refSearch:l,onSearch:c,clearSearch:d}=lGe();return(u,h)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{onClick:y(t),slot:"start",icon:y(Eo),class:"size-6 pl-2 pr-1 z-50"},null,8,["onClick","icon"]),L(y(Qp),{class:"text-lg font-medium"},{default:j(()=>h[2]||(h[2]=[be("Đã gửi kết bạn")])),_:1})]),_:1})]),_:1}),L(y(At),{color:"white",class:"ion-padding"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:y(r)},{default:j(()=>[L(y(eo))]),_:1},8,["onIonRefresh"]),_("form",{onSubmit:h[1]||(h[1]=qt((...f)=>y(c)&&y(c)(...f),["prevent"])),class:"mb-1 items-center flex px-3 rounded-3xl bg-white3 overflow-hidden"},[L(y(fe),{onClick:y(c),icon:y(yb),class:"size-7 text-gray2"},null,8,["onClick","icon"]),si(_("input",{"onUpdate:modelValue":h[0]||(h[0]=f=>Pi(l)?l.value=f:null),placeholder:"Tìm kiếm bạn bè",class:"p-2 w-full text-base bg-white3 outline-none"},null,512),[[Ti,y(l)]]),y(l)?(I(),ve(y(fe),{key:0,onClick:y(d),icon:y(Ah),class:"size-7 text-gray2"},null,8,["onClick","icon"])):re("",!0)],32),_("div",null,[(I(!0),O(Ue,null,ct(y(i),(f,m)=>{var g,b,w,x;return I(),O("section",{key:m,class:"my-1"},[_("div",cGe,[(I(),O("img",{src:(b=(g=f.user)==null?void 0:g.avatar)!=null?b:"/upload-user.png",key:(w=f.user)==null?void 0:w.avatar,placeholder:"/upload-user.png",onError:e,class:"size-16 rounded-full"},null,40,dGe)),_("div",uGe,[_("div",hGe,Q((x=f.user)==null?void 0:x.full_name),1),_("div",fGe," Đã gửi từ ngày: "+Q(y(_t)(f.created_at).format("DD/MM/YYYY")),1)]),_("div",{onClick:k=>y(a)(f,m),class:"text-sm bg-white4 py-1.5 px-5 rounded-lg font-medium"}," Hủy ",8,pGe)])])}),128))]),y(s)?(I(),ve(y(Zn),{key:0,onIonInfinite:y(o)},{default:j(()=>[L(y(Jn))]),_:1},8,["onIonInfinite"])):re("",!0)]),_:1})]),_:1}))}}),gGe={class:"flex bg-white2 w-full px-3 gap-3 items-center rounded-xl mb-3"},bGe={class:"size-12 bg-white2 rounded-full items-center justify-center flex"},vGe={class:"size-12 bg-white2 rounded-full items-center justify-center flex"},yGe=["onClick"],wGe={class:"size-12 rounded-lg flex"},xGe=["src"],_Ge=Fe({__name:"MenuDrawer",setup(n){const e=ln(),t=gn(),i=K(),s=K(""),r=en(),{isLoggedIn:o}=et(r),a=()=>{pc.close("sidemenu"),t.push({name:"CreateCommunityScreen"},Wt)},l=async(f="")=>{var b;const m={"filter[role]":Ei.Admin,"filter[keyword]":f,page:1,limit:5},{data:g}=await Qe.get("user-community/me",{params:m});i.value=(b=g==null?void 0:g.data)!=null?b:[]},c=()=>{pc.close("sidemenu"),t.replace({name:"defaultBottomTab"})},d=f=>{e.setCommunity(f),pc.close("sidemenu"),t.push({name:"CommunityScreen",params:{id:f.short_name||f._id}},Wt)};tr(()=>{l()}),ki([o],()=>{l()});const u=()=>{l(s.value)},h=()=>{s.value="",l("")};return(f,m)=>(I(),ve(y(At),{class:"ion-padding",color:"white"},{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",gGe,[L(y(fe),{onClick:u,src:"/icSearch.svg",class:"size-6"}),_("form",{onSubmit:qt(u,["prevent"])},[si(_("input",{"onUpdate:modelValue":m[0]||(m[0]=g=>s.value=g),type:"search","enter-key-hint":"Search",class:"w-full py-2 bg-white2 text-base outline-none",placeholder:"Tìm cộng đồng"},null,512),[[Ti,s.value]])],32),y(J.isEmpty)(s.value)?re("",!0):(I(),ve(y(fe),{key:0,onClick:h,icon:y(iB),class:"size-6 text-gray2"},null,8,["icon"]))])]),_:1})]),_:1}),_("div",{onClick:a,class:"items-center flex gap-2 text-lg font-medium"},[_("div",bGe,[L(y(fe),{src:"/icons/icAddOutline.svg",class:"size-7 text-gray2"})]),m[1]||(m[1]=be(" Tạo cộng đồng "))]),_("div",{onClick:c,class:"items-center flex gap-2 text-lg font-medium my-3"},[_("div",vGe,[L(y(fe),{src:"/icons/icDiscovery.svg",class:"size-7 text-gray2"})]),m[2]||(m[2]=be(" Khám phá cộng đồng "))]),(I(!0),O(Ue,null,ct(i.value,(g,b)=>{var w,x,k;return I(),O("section",{key:b,onClick:E=>d(g==null?void 0:g.community),class:"items-center flex gap-2 text-lg font-medium mb-3"},[_("div",wGe,[_("img",{src:(x=(w=g==null?void 0:g.community)==null?void 0:w.icon)!=null?x:"/favicon.ico",class:"w-full rounded-lg object-cover shadow-st",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,xGe)]),be(" "+Q((k=g.community)==null?void 0:k.name),1)],8,yGe)}),128))]),_:1}))}}),kGe=Xi(_Ge,[["__scopeId","data-v-e05e842b"]]),EGe=["ChatTab","ChatRoom"],TGe=()=>{const n=Zr(),{userInfo:e}=et(en()),t=Rr(),{isConnected:i,socketApp:s}=et(t),r=Va(),{activeRoom:o}=et(r);ki(e,async l=>{J.isEmpty(l)||await a()}),on(async()=>{await a()});const a=async()=>{var l,c,d,u;i.value||(await t.socketInit(),s.value.connect(),s.value&&((l=s.value)==null||l.on("connect",async()=>{console.log("SOCKET IS CONNECTED")}),s.value.on("newMessage",h=>{var f;r.setNewChat(h),n.name&&!EGe.includes((f=n.name)==null?void 0:f.toString())&&(r.increaseCountMsg(),console.log("increase"))}),(c=s.value)==null||c.on("newMessageCurrent",h=>{const f={...o.value,last_message:h,last_message_id:h==null?void 0:h._id};r.setNewChat(f),console.log("activeroom",o.value),console.log("myMsgSent",f)}),(d=s.value)==null||d.on("exception",async h=>{await tt(h.message,"error")}),(u=s.value)==null||u.on("disconnect",async()=>{console.log("SOCKET IS DISCONNECTED")})))}};var St=Ar&&Ar.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(d){try{c(i.next(d))}catch(u){o(u)}}function l(d){try{c(i.throw(d))}catch(u){o(u)}}function c(d){d.done?r(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},$e;(function(n){(function(i){i[i.SETUP=6777001]="SETUP",i[i.LOAD=6777002]="LOAD",i[i.PURCHASE=6777003]="PURCHASE",i[i.LOAD_RECEIPTS=6777004]="LOAD_RECEIPTS",i[i.CLIENT_INVALID=6777005]="CLIENT_INVALID",i[i.PAYMENT_CANCELLED=6777006]="PAYMENT_CANCELLED",i[i.PAYMENT_INVALID=6777007]="PAYMENT_INVALID",i[i.PAYMENT_NOT_ALLOWED=6777008]="PAYMENT_NOT_ALLOWED",i[i.UNKNOWN=6777010]="UNKNOWN",i[i.REFRESH_RECEIPTS=6777011]="REFRESH_RECEIPTS",i[i.INVALID_PRODUCT_ID=6777012]="INVALID_PRODUCT_ID",i[i.FINISH=6777013]="FINISH",i[i.COMMUNICATION=6777014]="COMMUNICATION",i[i.SUBSCRIPTIONS_NOT_AVAILABLE=6777015]="SUBSCRIPTIONS_NOT_AVAILABLE",i[i.MISSING_TOKEN=6777016]="MISSING_TOKEN",i[i.VERIFICATION_FAILED=6777017]="VERIFICATION_FAILED",i[i.BAD_RESPONSE=6777018]="BAD_RESPONSE",i[i.REFRESH=6777019]="REFRESH",i[i.PAYMENT_EXPIRED=6777020]="PAYMENT_EXPIRED",i[i.DOWNLOAD=6777021]="DOWNLOAD",i[i.SUBSCRIPTION_UPDATE_NOT_AVAILABLE=6777022]="SUBSCRIPTION_UPDATE_NOT_AVAILABLE",i[i.PRODUCT_NOT_AVAILABLE=6777023]="PRODUCT_NOT_AVAILABLE",i[i.CLOUD_SERVICE_PERMISSION_DENIED=6777024]="CLOUD_SERVICE_PERMISSION_DENIED",i[i.CLOUD_SERVICE_NETWORK_CONNECTION_FAILED=6777025]="CLOUD_SERVICE_NETWORK_CONNECTION_FAILED",i[i.CLOUD_SERVICE_REVOKED=6777026]="CLOUD_SERVICE_REVOKED",i[i.PRIVACY_ACKNOWLEDGEMENT_REQUIRED=6777027]="PRIVACY_ACKNOWLEDGEMENT_REQUIRED",i[i.UNAUTHORIZED_REQUEST_DATA=6777028]="UNAUTHORIZED_REQUEST_DATA",i[i.INVALID_OFFER_IDENTIFIER=6777029]="INVALID_OFFER_IDENTIFIER",i[i.INVALID_OFFER_PRICE=6777030]="INVALID_OFFER_PRICE",i[i.INVALID_SIGNATURE=6777031]="INVALID_SIGNATURE",i[i.MISSING_OFFER_PARAMS=6777032]="MISSING_OFFER_PARAMS",i[i.VALIDATOR_SUBSCRIPTION_EXPIRED=6778003]="VALIDATOR_SUBSCRIPTION_EXPIRED"})(n.ErrorCode||(n.ErrorCode={}));function t(i,s,r,o){return{isError:!0,code:i,message:s,platform:r,productId:o}}n.storeError=t})($e||($e={}));var $e;(function(n){class e{constructor(i,s){this.config=i,i.url||(i.url="https://validator.iaptic.com"),this.store=s!=null?s:n.store,this.log=this.store.log.child("Iaptic")}get braintreeClientTokenProvider(){return i=>{this.log.info("Calling Braintree clientTokenProvider"),n.Utils.ajax(this.log,{url:"".concat(this.config.url,"/v3/braintree/client-token?appName=").concat(this.config.appName,"&apiKey=").concat(this.config.apiKey),method:"POST",data:{applicationUsername:n.store.getApplicationUsername(),customerId:n.Braintree.customerId},success:s=>{this.log.info("clientTokenProvider success: "+JSON.stringify(s)),i(s.clientToken)},error:s=>{this.log.info("clientTokenProvider error: "+JSON.stringify(s)),i(n.storeError(s,"ERROR "+s,n.Platform.BRAINTREE,null))}})}}get appStoreDiscountEligibilityDeterminer(){let i;this.log.debug("AppStore eligibility determiner is listening..."),this.store.when().verified(o=>{o.platform===n.Platform.APPLE_APPSTORE&&(this.log.debug("Got a verified AppStore receipt."),i=o)},"appStoreDiscountEligibilityDeterminer_listening");const s=(o,a,l)=>{if(this.log.debug("AppStore eligibility determiner"),i)return this.log.debug("Using cached receipt"),l(r(i,a));const c=d=>{d.platform===n.Platform.APPLE_APPSTORE&&(this.log.debug("Receipt is verified, let's analyze the content and respond."),this.store.off(c),l(r(d,a)))};this.log.debug("Waiting for receipt"),this.store.when().verified(c,"appStoreDiscountEligibilityDeterminer_waiting")};return s.cacheReceipt=function(o){i=o},s;function r(o,a){const l=o.raw.ineligible_for_intro_price;return a.map(c=>{var d;return c.discountType==="Introductory"&&l&&l.find(u=>c.productId===u)?!1:c.discountType==="Subscription"?!!((d=o.raw.collection)===null||d===void 0?void 0:d.find(h=>h.id===c.productId)):!0})}}get validator(){return"".concat(this.config.url,"/v1/validate?appName=").concat(this.config.appName,"&apiKey=").concat(this.config.apiKey)}}n.Iaptic=e})($e||($e={}));var $e;(function(n){let e;(function(o){o[o.QUIET=0]="QUIET",o[o.ERROR=1]="ERROR",o[o.WARNING=2]="WARNING",o[o.INFO=3]="INFO",o[o.DEBUG=4]="DEBUG"})(e=n.LogLevel||(n.LogLevel={}));class t{constructor(a,l=""){this.prefix="",this.store=a,this.prefix=l||"CdvPurchase"}child(a){return new t(this.store,this.prefix+"."+a)}error(a){r(this.store.verbosity,e.ERROR,this.prefix,a);try{throw new Error(s(a))}catch(l){r(this.store.verbosity,e.ERROR,this.prefix,l.stack)}}warn(a){r(this.store.verbosity,e.WARNING,this.prefix,a)}info(a){r(this.store.verbosity,e.INFO,this.prefix,a)}debug(a){r(this.store.verbosity,e.DEBUG,this.prefix,a)}logCallbackException(a,l){if(this.warn("A callback in '"+a+"' failed with an exception."),typeof l=="string")this.warn("           "+l);else if(l){const c=l;c.fileName&&this.warn("           "+c.fileName+":"+c.lineNumber),l.message&&this.warn("           "+l.message),l.stack&&this.warn("           "+l.stack)}}}t.console=window.console,n.Logger=t;const i=["QUIET","ERROR","WARNING","INFO","DEBUG"];function s(o){return typeof o!="string"&&(o=JSON.stringify(o)),o}function r(o,a,l,c){var d=o===!0?1:o;if(a>d)return;typeof c!="string"&&(c=JSON.stringify(c));const u=l?"[".concat(l,"] "):"",h=a===e.ERROR?f=>t.console.error(f):a===e.WARNING?f=>t.console.warn(f):f=>t.console.log(f);i[a]?h("".concat(u).concat(i[a],": ").concat(c)):h("".concat(u).concat(c))}})($e||($e={}));var $e;(function(n){(function(e){e.nonEnumerable=(t,i,s)=>{if(s)return s.enumerable=!1,s;Object.defineProperty(t,i,{set(r){Object.defineProperty(this,i,{value:r,writable:!0,configurable:!0})},configurable:!0})}})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){class e{constructor(i,s){this.className="Product",this.title="",this.description="",this.platform=i.platform,this.type=i.type,this.id=i.id,this.group=i.group,this.offers=[],Object.defineProperty(this,"pricing",{enumerable:!1,get:()=>{var r;return(r=this.offers[0])===null||r===void 0?void 0:r.pricingPhases[0]}}),Object.defineProperty(this,"canPurchase",{enumerable:!1,get:()=>s.canPurchase(this)}),Object.defineProperty(this,"owned",{enumerable:!1,get:()=>s.owned(this)})}get pricing(){var i;return(i=this.offers[0])===null||i===void 0?void 0:i.pricingPhases[0]}get canPurchase(){return!1}get owned(){return!1}getOffer(i=""){return i?this.offers.find(s=>s.id===i):this.offers[0]}addOffer(i){return this.getOffer(i.id)?this:(this.offers.push(i),this)}}n.Product=e})($e||($e={}));var $e;(function(n){(function(e){function t(i){const s=[];for(let r in i)i.hasOwnProperty(r)&&s.push(i[r]);return s}e.objectValues=t})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(i){switch(i){case n.Platform.APPLE_APPSTORE:return"App Store";case n.Platform.GOOGLE_PLAY:return"Google Play";case n.Platform.WINDOWS_STORE:return"Windows Store";case n.Platform.BRAINTREE:return"Braintree";case n.Platform.TEST:return"Test";default:return i}}e.platformName=t})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(){this.array=[]}get length(){return this.array.length}get(){return this.array.concat()}add(o){this.has(o)||this.array.push(o)}clear(){for(;this.array.length!==0;)this.array.pop()}has(o){return!!this.array.find(a=>a===o)}}e.ReceiptsToValidate=t;class i{constructor(o,a){this.receiptsToValidate=new t,this.verifiedReceipts=[],this.numRequests=0,this.numResponses=0,this.cache={},this.controller=o,this.log=a.child("Validator")}incrRequestsCounter(){this.numRequests=this.numRequests+1|0,this.log.debug("Validation requests=".concat(this.numRequests," responses=").concat(this.numResponses))}incrResponsesCounter(){this.numResponses=this.numResponses+1|0,this.log.debug("Validation requests=".concat(this.numRequests," responses=").concat(this.numResponses))}addVerifiedReceipt(o,a){for(const c of this.verifiedReceipts)if(c.platform===o.platform&&c.id===a.id)return this.log.debug("Updating existing receipt."),c.set(o,a),c;this.log.debug("Register a new verified receipt.");const l=new n.VerifiedReceipt(o,a,this.controller);return this.verifiedReceipts.push(l),l}add(o){this.log.debug("Schedule validation: "+JSON.stringify(o));const a=o instanceof n.Transaction?o.parentReceipt:o;this.receiptsToValidate.has(a)||(this.incrRequestsCounter(),this.receiptsToValidate.add(a))}run(){const o=this.receiptsToValidate.get();this.receiptsToValidate.clear();const a=l=>St(this,void 0,void 0,function*(){var c;const{receipt:d,payload:u}=l;this.incrResponsesCounter();try{const h=this.controller.adapters.find(d.platform);if(yield h==null?void 0:h.handleReceiptValidationResponse(d,u),u.ok){const f=this.addVerifiedReceipt(d,u.data);this.controller.verifiedCallbacks.trigger(f,"payload_ok")}else if(u.code===n.ErrorCode.VALIDATOR_SUBSCRIPTION_EXPIRED){const f=(c=d.lastTransaction())===null||c===void 0?void 0:c.transactionId,m=f?this.verifiedReceipts.find(g=>{var b;return((b=g.collection[0])===null||b===void 0?void 0:b.transactionId)===f}):void 0;m?(m==null||m.collection.forEach(g=>{g.transactionId===f&&(g.isExpired=!0)}),this.controller.verifiedCallbacks.trigger(m,"payload_expired")):this.controller.unverifiedCallbacks.trigger({receipt:d,payload:u},"no_verified_receipt")}else this.controller.unverifiedCallbacks.trigger({receipt:d,payload:u},"validator_error")}catch(h){this.log.error("Exception probably caused by an invalid response from the validator."+h.message),this.controller.unverifiedCallbacks.trigger({receipt:d,payload:{ok:!1,code:n.ErrorCode.VERIFICATION_FAILED,message:h.message}},"validator_exception")}});o.forEach(l=>this.runOnReceipt(l,a))}runOnReceipt(o,a){var l,c;return St(this,void 0,void 0,function*(){if(o.platform===n.Platform.TEST)return this.log.debug("Using Test Adapter mock verify function."),n.Test.Adapter.verify(o,a);if(!this.controller.validator){this.incrResponsesCounter(),a({receipt:o,payload:{ok:!0,data:{id:((c=(l=o.transactions)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.transactionId)||"unknown",latest_receipt:!0,transaction:{type:"test"}}}});return}const d=yield this.buildRequestBody(o);if(!d){this.incrResponsesCounter();return}if(typeof this.controller.validator=="function")return this.runValidatorFunction(this.controller.validator,o,d,a);const u=typeof this.controller.validator=="string"?{url:this.controller.validator,timeout:2e4}:this.controller.validator;return this.runValidatorRequest(u,o,d,a)})}runValidatorFunction(o,a,l,c){try{o(l,d=>c({receipt:a,payload:d}))}catch(d){this.log.warn("user provided validator function failed with error: "+(d==null?void 0:d.stack))}}buildRequestBody(o){var a,l,c;return St(this,void 0,void 0,function*(){const d=this.controller.adapters.find(o.platform),u=yield d==null?void 0:d.receiptValidationBody(o);if(u){if(u.additionalData=Object.assign(Object.assign({},(a=u.additionalData)!==null&&a!==void 0?a:{}),{applicationUsername:this.controller.getApplicationUsername()}),u.additionalData.applicationUsername||delete u.additionalData.applicationUsername,u.device=Object.assign(Object.assign({},(l=u.device)!==null&&l!==void 0?l:{}),n.Validator.Internal.getDeviceInfo(this.controller)),((c=u.offers)===null||c===void 0?void 0:c.length)===1){const h=u.offers[0];if(h.pricingPhases.length===1){const f=h.pricingPhases[0];u.currency=f.currency,u.priceMicros=f.priceMicros}else if(h.pricingPhases.length===2){const f=h.pricingPhases[1];u.currency=f.currency,u.priceMicros=f.priceMicros;const m=h.pricingPhases[0];u.introPriceMicros=m.priceMicros}}return u}})}removeExpiredCache(){const o=+new Date,a=[];for(const l in this.cache)this.cache[l].expires<o&&a.push(l);for(const l of a)delete this.cache[l]}runValidatorRequest(o,a,l,c){this.removeExpiredCache();const d=n.Utils.md5(JSON.stringify(l.transaction)),u=this.cache[d];if(u)return this.log.debug("validator cache hit, using cached response"),c({receipt:a,payload:u.payload});n.Utils.ajax(this.log.child("Ajax"),{url:o.url,method:"POST",customHeaders:o.headers,timeout:o.timeout,data:l,success:h=>{var f;if(this.log.debug("validator success, response: "+JSON.stringify(h)),!s(h))return c({receipt:a,payload:{ok:!1,code:n.ErrorCode.BAD_RESPONSE,message:"Validator responded with invalid data",data:{latest_receipt:(f=h==null?void 0:h.data)===null||f===void 0?void 0:f.latest_receipt}}});this.cache[d]={payload:h,expires:+new Date+12e4},c({receipt:a,payload:h})},error:(h,f,m)=>{var g="Error "+h+": "+f;this.log.debug("validator failed, response: "+JSON.stringify(g)),this.log.debug("body => "+JSON.stringify(m)),c({receipt:a,payload:{ok:!1,message:g,code:n.ErrorCode.COMMUNICATION,status:h,data:{}}})}})}}e.Validator=i;function s(r){return!!r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"}})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(){this.list=[]}add(s,r,o){r.forEach(a=>{if(s.info(""),!this.find(a.platform))switch(a.platform){case n.Platform.APPLE_APPSTORE:return this.list.push(new n.AppleAppStore.Adapter(o,a.options||{}));case n.Platform.GOOGLE_PLAY:return this.list.push(new n.GooglePlay.Adapter(o));case n.Platform.BRAINTREE:return a.options||s.error("Options missing for Braintree initialization. Use {platform: Platform.BRAINTREE, options: {...}} in your call to store.initialize"),this.list.push(new n.Braintree.Adapter(o,a.options));case n.Platform.TEST:return this.list.push(new n.Test.Adapter(o));default:return}})}initialize(s,r){return St(this,void 0,void 0,function*(){typeof s=="string"&&(s=[s]);const o=s.map(d=>typeof d=="string"?{platform:d}:d).filter(d=>!this.find(d.platform)),a=r.log.child("Adapters");a.info("Adding platforms: "+JSON.stringify(o)),this.add(a,o,r);const l=r.registeredProducts.byPlatform();return(yield Promise.all(o.map(d=>St(this,void 0,void 0,function*(){var u,h,f;const m=(f=(h=(u=l.filter(E=>E.platform===d.platform))===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.products)!==null&&f!==void 0?f:[],g=this.find(d.platform);if(!g)return;if(a.info("".concat(g.name," initializing...")),!g.isSupported){a.info("".concat(g.name," is not supported."));return}const b=yield g.initialize();if(g.ready=!0,a.info("".concat(g.name," initialized. ").concat(b?JSON.stringify(b):"")),b!=null&&b.code)return b;if(a.info("".concat(g.name," products: ").concat(JSON.stringify(m))),m.length===0)return;let w=[],x=[];g.supportsParallelLoading?[w,x]=yield Promise.all([g.loadProducts(m),g.loadReceipts()]):(w=yield g.loadProducts(m),x=yield g.loadReceipts()),a.info("".concat(g.name," products loaded: ").concat(JSON.stringify(w)));const k=w.filter(E=>E instanceof n.Product);return r.listener.productsUpdated(d.platform,k),a.info("".concat(g.name," receipts loaded: ").concat(JSON.stringify(x))),w.filter(E=>"code"in E&&"message"in E)[0]})))).filter(d=>d)})}find(s){return this.list.filter(r=>r.id===s)[0]}findReady(s){return this.list.filter(r=>(!s||r.id===s)&&r.ready)[0]}}e.Adapters=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s,r){this.supportedPlatforms=[],this.platformWithReceiptsReady=[],this.lastTransactionState={},this.lastCallTimeForState={},this.updatedReceiptsToProcess=[],this.delegate=s,this.log=r.child("AdapterListener")}static makeTransactionToken(s){return s.platform+"|"+s.transactionId}setSupportedPlatforms(s){this.log.debug("setSupportedPlatforms: ".concat(s.join(",")," (").concat(this.platformWithReceiptsReady.length," have their receipts ready)")),this.supportedPlatforms=s,this.supportedPlatforms.length===this.platformWithReceiptsReady.length&&(this.log.debug("triggering receiptsReady()"),this.delegate.receiptsReadyCallbacks.trigger(void 0,"adapterListener_setSupportedPlatforms"))}receiptsReady(s){if(this.supportedPlatforms.length>0&&this.platformWithReceiptsReady.length===this.supportedPlatforms.length){this.log.debug("receiptsReady: "+s+"(skipping)");return}this.platformWithReceiptsReady.indexOf(s)<0&&(this.platformWithReceiptsReady.push(s),this.log.debug("receiptsReady: ".concat(s," (").concat(this.platformWithReceiptsReady.length,"/").concat(this.supportedPlatforms.length,")")),this.platformWithReceiptsReady.length===this.supportedPlatforms.length&&(this.log.debug("triggering receiptsReady()"),this.delegate.receiptsReadyCallbacks.trigger(void 0,"adapterListener_receiptsReady")))}productsUpdated(s,r){r.forEach(o=>this.delegate.updatedCallbacks.trigger(o,"adapterListener_productsUpdated"))}receiptsUpdated(s,r){this.log.debug("receiptsUpdated: "+JSON.stringify(r.map(o=>({platform:o.platform,transactions:o.transactions}))));for(const o of r)this.updatedReceiptsToProcess.indexOf(o)<0&&this.updatedReceiptsToProcess.push(o);this.updatedReceiptsProcessor!==void 0&&clearTimeout(this.updatedReceiptsProcessor),this.updatedReceiptsProcessor=setTimeout(()=>{this._processUpdatedReceipts()},500)}_processUpdatedReceipts(){this.log.debug("processing "+this.updatedReceiptsToProcess.length+" updated receipts");const s=+new Date,r=this.updatedReceiptsToProcess;this.updatedReceiptsToProcess=[],r.forEach(o=>{this.delegate.updatedReceiptCallbacks.trigger(o,"adapterListener_receiptsUpdated"),o.transactions.forEach(a=>{var l;const c=t.makeTransactionToken(a),d=c+"@"+a.state,u=this.lastTransactionState[c];if(a.state===n.TransactionState.APPROVED){const h=(l=this.lastCallTimeForState[d])!==null&&l!==void 0?l:0;s-h>6e4?(this.lastCallTimeForState[d]=s,this.delegate.approvedCallbacks.trigger(a,"adapterListener_receiptsUpdated_approved")):this.log.debug("Skipping ".concat(d,", because it has been last called ").concat(h>0?Math.round(s-h)+"ms ago ("+s+"-"+h+")":"never"))}else u!==a.state&&(a.state===n.TransactionState.INITIATED?(this.lastCallTimeForState[d]=s,this.delegate.initiatedCallbacks.trigger(a,"adapterListener_receiptsUpdated_initiated")):a.state===n.TransactionState.FINISHED?(this.lastCallTimeForState[d]=s,this.delegate.finishedCallbacks.trigger(a,"adapterListener_receiptsUpdated_finished")):a.state===n.TransactionState.PENDING&&(this.lastCallTimeForState[d]=s,this.delegate.pendingCallbacks.trigger(a,"adapterListener_receiptsUpdated_pending")));this.lastTransactionState[c]=a.state})})}}e.StoreAdapterListener=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s,r,o=!1){this.callbacks=[],this.numTriggers=0,this.logger=s,this.className=r,this.finalStateMode=o}push(s,r){if(this.finalStateMode&&this.numTriggers>0)s(this.lastTriggerArgument);else{for(const o of this.callbacks)if(o.callback===s)throw new Error("REGISTERING THE SAME CALLBACK TWICE? This is indicative of a bug in your integration.");this.callbacks.push({callback:s,callbackName:r})}}trigger(s,r){this.lastTriggerArgument=s,this.numTriggers++;const o=this.callbacks;this.finalStateMode&&(this.callbacks=[]),o.forEach(a=>{n.Utils.safeCall(this.logger,this.className,a.callback,s,a.callbackName,r)})}remove(s){this.callbacks=this.callbacks.filter(r=>r.callback!==s)}}e.Callbacks=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s){this.isReady=!1,this.readyCallbacks=[],this.logger=s}add(s){if(this.isReady)return setTimeout(s,0);this.readyCallbacks.push(s)}trigger(s){this.isReady=!0,this.readyCallbacks.forEach(r=>n.Utils.safeCall(this.logger,"ready()",r,void 0,void 0,s)),this.readyCallbacks=[]}remove(s){this.readyCallbacks=this.readyCallbacks.filter(r=>r!==s)}}e.ReadyCallbacks=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){function t(s){return typeof s!="object"?!1:s.hasOwnProperty("platform")&&s.hasOwnProperty("id")&&s.hasOwnProperty("type")}class i{constructor(){this.list=[]}find(r,o){return this.list.find(a=>a.platform===r&&a.id===o)}add(r){const o=[],l=(Array.isArray(r)?r:[r]).filter(c=>!this.find(c.platform,c.id));for(const c of l)t(c)?this.list.push(c):o.push(n.storeError(n.ErrorCode.LOAD,'Invalid parameter to "register", expected "id", "type" and "platform". Got: '+JSON.stringify(c),null,null));return o}byPlatform(){const r={};return this.list.forEach(o=>{r[o.platform]=(r[o.platform]||[]).concat(o)}),Object.keys(r).map(o=>({platform:o,products:r[o]}))}}e.RegisteredProducts=i})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s){this.monitors=[],this.isListening=!1,this.when=s}findMonitors(s){return this.monitors.filter(r=>r.transaction.platform===s.platform&&r.transaction.transactionId===s.transactionId)}startListening(){this.isListening||(this.isListening=!0,this.when.approved(s=>this.callOnChange(s),"transactionStateMonitors_callOnChange").finished(s=>this.callOnChange(s),"transactionStateMonitors_callOnChange"))}callOnChange(s){this.findMonitors(s).forEach(r=>{r.lastChange!==s.state&&(r.lastChange=s.state,r.onChange(s.state))})}start(s,r){this.startListening();const o=n.Utils.uuidv4();return this.monitors.push({monitorId:o,transaction:s,onChange:r,lastChange:s.state}),setTimeout(r,0,s.state),{transaction:s,stop:()=>this.stop(o)}}stop(s){this.monitors=this.monitors.filter(r=>r.monitorId!==s)}}e.TransactionStateMonitors=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s){this.hasCalledReceiptsVerified=!1,this.controller=s,this.log=s.log.child("ReceiptsMonitor")}callReceiptsVerified(){this.hasCalledReceiptsVerified||(this.hasCalledReceiptsVerified=!0,this.log.info("receiptsVerified()"),this.controller.when().receiptsReady(()=>{setTimeout(()=>{this.controller.receiptsVerified()},0)},"receiptsMonitor_callReceiptsVerified"))}launch(){const s=()=>{this.log.debug("check(".concat(this.controller.numValidationResponses(),"/").concat(this.controller.numValidationRequests(),")")),this.controller.numValidationRequests()===this.controller.numValidationResponses()&&(this.intervalChecker!==void 0&&(clearInterval(this.intervalChecker),this.intervalChecker=void 0),this.controller.off(s),this.callReceiptsVerified())};this.controller.when().verified(s,"receiptsMonitor_check").unverified(s,"receiptsMonitor_check").receiptsReady(()=>{this.log.debug("receiptsReady..."),(!this.controller.hasLocalReceipts()||!this.controller.hasValidator())&&setTimeout(()=>{s()},0),this.intervalChecker=setInterval(()=>{this.log.debug("keep checking every 10s..."),s()},1e4)},"receiptsMonitor_setup")}}e.ReceiptsMonitor=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s){this.activePurchases={},this.notifiedPurchases={},this.controller=s}launch(){this.interval=setInterval(()=>{var s,r;const o=+new Date;for(const a of this.controller.verifiedReceipts){const l=(s=t.GRACE_PERIOD_MS[a.platform])!==null&&s!==void 0?s:t.GRACE_PERIOD_MS.DEFAULT;for(const c of a.collection)if(c.expiryDate){const d=c.expiryDate+l,u=(r=c.transactionId)!==null&&r!==void 0?r:"".concat(d);d>o&&(this.activePurchases[u]=!0),d<o&&this.activePurchases[u]&&!this.notifiedPurchases[u]&&(this.notifiedPurchases[u]=!0,this.controller.onVerifiedPurchaseExpired(c,a))}}},t.INTERVAL_MS)}}t.INTERVAL_MS=1e4,t.GRACE_PERIOD_MS={DEFAULT:6e4,"ios-appstore":6e4,"android-playstore":3e4},e.ExpiryMonitor=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){n.PLUGIN_VERSION="13.12.1";class e{constructor(){this.adapters=new n.Internal.Adapters,this.registeredProducts=new n.Internal.RegisteredProducts,this.log=new n.Logger(this),this.verbosity=n.LogLevel.ERROR,this._readyCallbacks=new n.Internal.ReadyCallbacks(this.log),this.updatedCallbacks=new n.Internal.Callbacks(this.log,"productUpdated()"),this.updatedReceiptsCallbacks=new n.Internal.Callbacks(this.log,"receiptUpdated()"),this.initiatedCallbacks=new n.Internal.Callbacks(this.log,"initiated()"),this.approvedCallbacks=new n.Internal.Callbacks(this.log,"approved()"),this.finishedCallbacks=new n.Internal.Callbacks(this.log,"finished()"),this.pendingCallbacks=new n.Internal.Callbacks(this.log,"pending()"),this.verifiedCallbacks=new n.Internal.Callbacks(this.log,"verified()"),this.unverifiedCallbacks=new n.Internal.Callbacks(this.log,"unverified()"),this.receiptsReadyCallbacks=new n.Internal.Callbacks(this.log,"receiptsReady()",!0),this.receiptsVerifiedCallbacks=new n.Internal.Callbacks(this.log,"receiptsVerified()",!0),this.errorCallbacks=new n.Internal.Callbacks(this.log,"error()"),this.initializedHasBeenCalled=!1,this.lastUpdate=0,this.minTimeBetweenUpdates=6e5,this.version=n.PLUGIN_VERSION;const i=this;this.listener=new n.Internal.StoreAdapterListener({updatedCallbacks:this.updatedCallbacks,updatedReceiptCallbacks:this.updatedReceiptsCallbacks,initiatedCallbacks:this.initiatedCallbacks,approvedCallbacks:this.approvedCallbacks,finishedCallbacks:this.finishedCallbacks,pendingCallbacks:this.pendingCallbacks,receiptsReadyCallbacks:this.receiptsReadyCallbacks},this.log),this.transactionStateMonitors=new n.Internal.TransactionStateMonitors(this.when()),this._validator=new n.Internal.Validator({adapters:this.adapters,getApplicationUsername:this.getApplicationUsername.bind(this),get localReceipts(){return i.localReceipts},get validator(){return i.validator},get validator_privacy_policy(){return i.validator_privacy_policy},verifiedCallbacks:this.verifiedCallbacks,unverifiedCallbacks:this.unverifiedCallbacks,finish:s=>this.finish(s)},this.log),new n.Internal.ReceiptsMonitor({hasLocalReceipts:()=>this.localReceipts.length>0,hasValidator:()=>!!this.validator,numValidationRequests:()=>this._validator.numRequests,numValidationResponses:()=>this._validator.numResponses,off:this.off.bind(this),when:this.when.bind(this),receiptsVerified:()=>{i.receiptsVerifiedCallbacks.trigger(void 0,"receipts_monitor_controller")},log:this.log}).launch(),this.expiryMonitor=new n.Internal.ExpiryMonitor({get verifiedReceipts(){return i.verifiedReceipts},onVerifiedPurchaseExpired(s,r){i.verify(r.sourceReceipt)}}),this.expiryMonitor.launch()}getAdapter(i){return this.adapters.find(i)}getApplicationUsername(){return this.applicationUsername instanceof Function?this.applicationUsername():this.applicationUsername}register(i){this.registeredProducts.add(i).forEach(r=>{n.store.errorCallbacks.trigger(r,"register_error"),this.log.error(r)})}initialize(i=[this.defaultPlatform()]){return St(this,void 0,void 0,function*(){if(this.initializedHasBeenCalled)return this.log.warn("store.initialized() has been called already."),[];this.log.info("initialize("+JSON.stringify(i)+") v"+n.PLUGIN_VERSION),this.initializedHasBeenCalled=!0,this.lastUpdate=+new Date;const s=this,r=this.adapters.initialize(i,{error:this.triggerError.bind(this),get verbosity(){return s.verbosity},getApplicationUsername(){return s.getApplicationUsername()},get listener(){return s.listener},get log(){return s.log},get registeredProducts(){return s.registeredProducts},apiDecorators:{canPurchase:this.canPurchase.bind(this),owned:this.owned.bind(this),finish:this.finish.bind(this),order:this.order.bind(this),verify:this.verify.bind(this)}});return r.then(()=>{this._readyCallbacks.trigger("initialize_promise_resolved"),this.listener.setSupportedPlatforms(this.adapters.list.filter(o=>o.isSupported).map(o=>o.id))}),r})}refresh(){throw new Error("use store.initialize() or store.update()")}update(){var i;return St(this,void 0,void 0,function*(){if(this.log.info("update()"),!this._readyCallbacks.isReady){this.log.warn("Do not call store.update() at startup! It is meant to reload the price of products (if needed) long after initialization.");return}const s=+new Date;if(this.lastUpdate>s-this.minTimeBetweenUpdates){this.log.info("Skipping store.update() as the last call occurred less than store.minTimeBetweenUpdates millis ago.");return}this.lastUpdate=s;for(const r of this.registeredProducts.byPlatform()){const o=yield(i=this.adapters.findReady(r.platform))===null||i===void 0?void 0:i.loadProducts(r.products);o==null||o.forEach(a=>{a instanceof n.Product&&this.updatedCallbacks.trigger(a,"update_has_loaded_products")})}})}ready(i){this._readyCallbacks.add(i)}get isReady(){return this._readyCallbacks.isReady}when(){const i={productUpdated:(s,r)=>(this.updatedCallbacks.push(s,r),i),receiptUpdated:(s,r)=>(this.updatedReceiptsCallbacks.push(s,r),i),updated:(s,r)=>(this.updatedCallbacks.push(s,r),this.updatedReceiptsCallbacks.push(s,r),i),approved:(s,r)=>(this.approvedCallbacks.push(s,r),i),initiated:(s,r)=>(this.initiatedCallbacks.push(s,r),i),pending:(s,r)=>(this.pendingCallbacks.push(s,r),i),finished:(s,r)=>(this.finishedCallbacks.push(s,r),i),verified:(s,r)=>(this.verifiedCallbacks.push(s,r),i),unverified:(s,r)=>(this.unverifiedCallbacks.push(s,r),i),receiptsReady:(s,r)=>(this.receiptsReadyCallbacks.push(s,r),i),receiptsVerified:(s,r)=>(this.receiptsVerifiedCallbacks.push(s,r),i)};return i}off(i){this.updatedCallbacks.remove(i),this.updatedReceiptsCallbacks.remove(i),this.approvedCallbacks.remove(i),this.finishedCallbacks.remove(i),this.pendingCallbacks.remove(i),this.verifiedCallbacks.remove(i),this.unverifiedCallbacks.remove(i),this.receiptsReadyCallbacks.remove(i),this.receiptsVerifiedCallbacks.remove(i),this.errorCallbacks.remove(i),this._readyCallbacks.remove(i)}monitor(i,s,r){return this.transactionStateMonitors.start(i,n.Utils.safeCallback(this.log,"monitor()",s,r,"transactionStateMonitors_stateChanged"))}get products(){return[].concat(...this.adapters.list.map(i=>i.products))}get(i,s){var r;return(r=this.adapters.findReady(s))===null||r===void 0?void 0:r.products.find(o=>o.id===i)}get localReceipts(){return[].concat(...this.adapters.list.map(i=>i.receipts))}get localTransactions(){const i=[];for(const s of this.localReceipts)i.push(...s.transactions);return i}get verifiedReceipts(){return this._validator.verifiedReceipts}get verifiedPurchases(){return n.Internal.VerifiedReceipts.getVerifiedPurchases(this.verifiedReceipts)}findInVerifiedReceipts(i){return n.Internal.VerifiedReceipts.find(this.verifiedReceipts,i)}findInLocalReceipts(i){return n.Internal.LocalReceipts.find(this.localReceipts,i)}canPurchase(i){const s=i instanceof n.Offer?this.get(i.productId,i.platform):i,r=this.adapters.findReady(i.platform);return r!=null&&r.checkSupport("order")?n.Internal.LocalReceipts.canPurchase(this.localReceipts,s):!1}owned(i){return n.Internal.owned({product:typeof i=="string"?{id:i}:i,verifiedReceipts:this.validator?this.verifiedReceipts:void 0,localReceipts:this.localReceipts})}order(i,s){return St(this,void 0,void 0,function*(){this.log.info("order(".concat(i.productId,")"));const r=this.adapters.findReady(i.platform);if(!r)return n.storeError(n.ErrorCode.PAYMENT_NOT_ALLOWED,"Adapter not found or not ready ("+i.platform+")",i.platform,null);const o=yield r.order(i,s||{});return o&&"isError"in o&&n.store.triggerError(o),o})}requestPayment(i,s){var r,o,a,l,c;const d=this.adapters.findReady(i.platform);if(!d)return n.PaymentRequestPromise.failed(n.ErrorCode.PAYMENT_NOT_ALLOWED,"Adapter not found or not ready ("+i.platform+")",i.platform,null);if(!i.amountMicros){i.amountMicros=0;for(const h of i.items)i.amountMicros+=(o=(r=h==null?void 0:h.pricing)===null||r===void 0?void 0:r.priceMicros)!==null&&o!==void 0?o:0}if(i.currency)for(const h of i.items)if(!((l=h==null?void 0:h.pricing)===null||l===void 0)&&l.currency){if(i.currency!==h.pricing.currency)return n.PaymentRequestPromise.failed(n.ErrorCode.PAYMENT_INVALID,"Currencies do not match",i.platform,h.id)}else h!=null&&h.pricing&&(h.pricing.currency=i.currency);else for(const h of i.items)!((a=h==null?void 0:h.pricing)===null||a===void 0)&&a.currency&&(i.currency=h.pricing.currency);if(i.items.length===1){const h=i.items[0];h&&!h.pricing&&(h.pricing={priceMicros:(c=i.amountMicros)!==null&&c!==void 0?c:0,currency:i.currency})}const u=new n.PaymentRequestPromise;return d.requestPayment(i,s).then(h=>{if(u.trigger(h),h instanceof n.Transaction){const f=g=>{u.trigger(h),h.state===n.TransactionState.FINISHED&&m.stop()},m=this.monitor(h,f,"requestPayment_onStateChange")}}),u}checkSupport(i,s){const r=this.adapters.find(i);return r?r.checkSupport(s):!1}verify(i){return St(this,void 0,void 0,function*(){this.log.info("verify(".concat(i.className,")")),this._validator.add(i),setTimeout(()=>this._validator.run(),200)})}finish(i){return St(this,void 0,void 0,function*(){this.log.info("finish(".concat(i.className,")")),(i instanceof n.VerifiedReceipt?i.sourceReceipt.transactions:i instanceof n.Receipt?i.transactions:[i]).forEach(r=>{var o;(o=this.adapters.findReady(r.platform))===null||o===void 0||o.finish(r)})})}restorePurchases(){return St(this,void 0,void 0,function*(){let i;for(const s of this.adapters.list)s.ready&&(i=i!=null?i:yield s.restorePurchases());return i})}manageSubscriptions(i){return St(this,void 0,void 0,function*(){this.log.info("manageSubscriptions()");const s=this.adapters.findReady(i);return s?s.manageSubscriptions():n.storeError(n.ErrorCode.SETUP,"Found no adapter ready to handle 'manageSubscription'",i!=null?i:null,null)})}manageBilling(i){return St(this,void 0,void 0,function*(){this.log.info("manageBilling()");const s=this.adapters.findReady(i);return s?s.manageBilling():n.storeError(n.ErrorCode.SETUP,"Found no adapter ready to handle 'manageBilling'",i!=null?i:null,null)})}defaultPlatform(){switch(n.Utils.platformId()){case"android":return n.Platform.GOOGLE_PLAY;case"ios":return n.Platform.APPLE_APPSTORE;default:return n.Platform.TEST}}error(i){this.errorCallbacks.push(i)}triggerError(i){this.errorCallbacks.trigger(i,"triggerError")}}n.Store=e})($e||($e={}));window.cordova?setTimeout(NO,0):NO();function NO(){var n;console.log("Create CdvPurchase...");const e=(n=window.CdvPurchase)===null||n===void 0?void 0:n.store;window.CdvPurchase=$e,e?window.CdvPurchase.store=e:window.CdvPurchase.store=new $e.Store,Object.assign(window.CdvPurchase.store,$e.LogLevel,$e.ProductType,$e.ErrorCode,$e.Platform)}var $e;(function(n){(function(e){e.CONSUMABLE="consumable",e.NON_CONSUMABLE="non consumable",e.FREE_SUBSCRIPTION="free subscription",e.PAID_SUBSCRIPTION="paid subscription",e.NON_RENEWING_SUBSCRIPTION="non renewing subscription",e.APPLICATION="application"})(n.ProductType||(n.ProductType={})),function(e){e.NON_RECURRING="NON_RECURRING",e.FINITE_RECURRING="FINITE_RECURRING",e.INFINITE_RECURRING="INFINITE_RECURRING"}(n.RecurrenceMode||(n.RecurrenceMode={})),function(e){e.PAY_AS_YOU_GO="PayAsYouGo",e.UP_FRONT="UpFront",e.FREE_TRIAL="FreeTrial"}(n.PaymentMode||(n.PaymentMode={})),function(e){e.APPLE_APPSTORE="ios-appstore",e.GOOGLE_PLAY="android-playstore",e.WINDOWS_STORE="windows-store-transaction",e.BRAINTREE="braintree",e.TEST="test"}(n.Platform||(n.Platform={})),function(e){e.INITIATED="initiated",e.PENDING="pending",e.APPROVED="approved",e.CANCELLED="cancelled",e.FINISHED="finished",e.UNKNOWN_STATE=""}(n.TransactionState||(n.TransactionState={})),function(e){e.LAPSE="Lapse",e.RENEW="Renew"}(n.RenewalIntent||(n.RenewalIntent={})),function(e){e.NOTIFIED="Notified",e.AGREED="Agreed"}(n.PriceConsentStatus||(n.PriceConsentStatus={})),function(e){e.NOT_CANCELED="",e.DEVELOPER="Developer",e.SYSTEM="System",e.SYSTEM_REPLACED="System.Replaced",e.SYSTEM_PRODUCT_UNAVAILABLE="System.ProductUnavailable",e.SYSTEM_BILLING_ERROR="System.BillingError",e.SYSTEM_DELETED="System.Deleted",e.CUSTOMER="Customer",e.CUSTOMER_TECHNICAL_ISSUES="Customer.TechnicalIssues",e.CUSTOMER_PRICE_INCREASE="Customer.PriceIncrease",e.CUSTOMER_COST="Customer.Cost",e.CUSTOMER_FOUND_BETTER_APP="Customer.FoundBetterApp",e.CUSTOMER_NOT_USEFUL_ENOUGH="Customer.NotUsefulEnough",e.CUSTOMER_OTHER_REASON="Customer.OtherReason",e.UNKNOWN="Unknown"}(n.CancelationReason||(n.CancelationReason={}))})($e||($e={}));var $e;(function(n){class e{constructor(i,s){this.className="Offer",this.id=i.id,this.pricingPhases=i.pricingPhases,Object.defineProperty(this,"productId",{enumerable:!0,get:()=>i.product.id}),Object.defineProperty(this,"productType",{enumerable:!0,get:()=>i.product.type}),Object.defineProperty(this,"productGroup",{enumerable:!0,get:()=>i.product.group}),Object.defineProperty(this,"platform",{enumerable:!0,get:()=>i.product.platform}),Object.defineProperty(this,"order",{enumerable:!1,get:()=>r=>s.order(this,r)}),Object.defineProperty(this,"canPurchase",{enumerable:!1,get:()=>s.canPurchase(this)})}get productId(){return""}get productType(){return n.ProductType.APPLICATION}get productGroup(){}get platform(){return n.Platform.TEST}order(i){return St(this,void 0,void 0,function*(){})}get canPurchase(){return!1}}n.Offer=e})($e||($e={}));var $e;(function(n){class e{constructor(){this.failedCallbacks=new n.Internal.PromiseLike,this.initiatedCallbacks=new n.Internal.PromiseLike,this.approvedCallbacks=new n.Internal.PromiseLike,this.finishedCallbacks=new n.Internal.PromiseLike,this.cancelledCallback=new n.Internal.PromiseLike}failed(i){return this.failedCallbacks.push(i),this}initiated(i){return this.initiatedCallbacks.push(i),this}approved(i){return this.approvedCallbacks.push(i),this}finished(i){return this.finishedCallbacks.push(i),this}cancelled(i){return this.cancelledCallback.push(i),this}trigger(i){if(!i)this.cancelledCallback.resolve();else if("isError"in i)this.failedCallbacks.resolve(i);else switch(i.state){case n.TransactionState.INITIATED:this.initiatedCallbacks.resolve(i);break;case n.TransactionState.APPROVED:this.approvedCallbacks.resolve(i);break;case n.TransactionState.FINISHED:this.finishedCallbacks.resolve(i);break}return this}static failed(i,s,r,o){return new e().trigger(n.storeError(i,s,r,o))}static cancelled(){return new e().trigger()}static initiated(i){return new e().trigger(i)}}n.PaymentRequestPromise=e})($e||($e={}));var $e;(function(n){class e{constructor(i,s){this.className="Receipt",this.transactions=[],this.platform=i,Object.defineProperty(this,"verify",{enumerable:!1,get(){return()=>s.verify(this)}}),Object.defineProperty(this,"finish",{enumerable:!1,get(){return()=>s.finish(this)}})}verify(){return St(this,void 0,void 0,function*(){})}finish(){return St(this,void 0,void 0,function*(){})}hasTransaction(i){return!!this.transactions.find(s=>s===i)}lastTransaction(){return this.transactions[this.transactions.length-1]}}n.Receipt=e})($e||($e={}));var $e;(function(n){class e{constructor(i,s,r){this.className="Transaction",this.transactionId="",this.state=n.TransactionState.UNKNOWN_STATE,this.products=[],this.platform=i,Object.defineProperty(this,"finish",{enumerable:!1,get(){return()=>r.finish(this)}}),Object.defineProperty(this,"verify",{enumerable:!1,get(){return()=>r.verify(this)}}),Object.defineProperty(this,"parentReceipt",{enumerable:!1,get(){return s}})}finish(){return St(this,void 0,void 0,function*(){})}verify(){return St(this,void 0,void 0,function*(){})}get parentReceipt(){return{}}}n.Transaction=e})($e||($e={}));var $e;(function(n){(function(e){class t{static find(s,r){var o,a;if(!r)return;let l;for(const c of s)if(!(r.platform&&c.platform!==r.platform))for(const d of c.transactions)for(const u of d.products)u.id===r.id&&(!l||((o=d.purchaseDate)!==null&&o!==void 0?o:0)<((a=l.purchaseDate)!==null&&a!==void 0?a:1))&&(l=d);return l}static isOwned(s,r){if(!r)return!1;const o=t.find(s,r);return!o||o.isConsumed||o.isPending?!1:o.expirationDate?o.expirationDate.getTime()>+new Date:!0}static canPurchase(s,r){if(!r)return!1;const o=t.find(s,r);return!o||o.isConsumed?!0:o.expirationDate?o.expirationDate.getTime()<=+new Date:!0}}e.LocalReceipts=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){function t(i){return i.verifiedReceipts!==void 0?e.VerifiedReceipts.isOwned(i.verifiedReceipts,i.product):i.localReceipts!==void 0?e.LocalReceipts.isOwned(i.localReceipts,i.product):!1}e.owned=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(){this.resolved=!1,this.callbacks=[]}push(s){this.resolved?setTimeout(s,0,this.resolvedArgument):this.callbacks.push(s)}resolve(s){this.resolved||(this.resolved=!0,this.resolvedArgument=s,this.callbacks.forEach(r=>setTimeout(r,0,s)),this.callbacks=[])}}e.PromiseLike=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(s=5e3,r=12e4){this.maxTimeout=12e4,this.minTimeout=5e3,this.retryTimeout=5e3,this.retries=[],this.minTimeout=s,this.maxTimeout=r,this.retryTimeout=s,document.addEventListener("online",()=>{const o=this.retries;this.retries=[],this.retryTimeout=this.minTimeout;for(var a=0;a<o.length;++a)clearTimeout(o[a].tid),o[a].fn.call(this)},!1)}retry(s){var r=setTimeout(()=>{this.retries=this.retries.filter(function(o){return r!==o.tid}),s()},this.retryTimeout);this.retries.push({tid:r,fn:s}),this.retryTimeout*=2,this.retryTimeout>this.maxTimeout&&(this.retryTimeout=this.maxTimeout)}}e.Retry=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){class t{static find(s,r){var o,a;if(!r)return;let l;for(const c of s)if(!(r.platform&&c.platform!==r.platform))for(const d of c.collection)d.id===r.id&&((o=l==null?void 0:l.purchaseDate)!==null&&o!==void 0?o:0)<((a=d.purchaseDate)!==null&&a!==void 0?a:1)&&(l=d);return l}static isOwned(s,r){if(!r)return!1;const o=t.find(s,r);return!o||o!=null&&o.isExpired?!1:o!=null&&o.expiryDate?o.expiryDate>+new Date:!0}static getVerifiedPurchases(s){var r,o,a,l;const c={};for(const d of s)for(const u of d.collection){const h=d.platform+":"+u.id,f=c[h];(!f||f&&((o=(r=f.lastRenewalDate)!==null&&r!==void 0?r:f.purchaseDate)!==null&&o!==void 0?o:0)<((l=(a=u.lastRenewalDate)!==null&&a!==void 0?a:u.purchaseDate)!==null&&l!==void 0?l:0))&&(c[h]=Object.assign(Object.assign({},u),{platform:d.platform}))}return Object.keys(c).map(d=>c[d])}}e.VerifiedReceipts=t})(n.Internal||(n.Internal={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){t.Name="name",t.EmailAddress="emailAddress",t.PhoneNumber="phoneNumber",t.PostalAddress="postalAddress",t.PhoneticName="phoneticName"})(e.ContactField||(e.ContactField={})),function(t){t.Amex="Amex",t.Barcode="Barcode",t.CartesBancaires="CartesBancaires",t.ChinaUnionPay="ChinaUnionPay",t.Dankort="Dankort",t.Discover="Discover",t.Eftpos="Eftpos",t.Electron="Electron",t.Elo="Elo",t.Girocard="Girocard",t.IDCredit="IDCredit",t.Interac="Interac",t.JCB="JCB",t.Mada="Mada",t.Maestro="Maestro",t.MasterCard="MasterCard",t.Mir="Mir",t.Nanaco="Nanaco",t.PrivateLabel="PrivateLabel",t.QuicPay="QuicPay",t.Suica="Suica",t.Visa="Visa",t.VPay="VPay",t.Waon="Waon"}(e.PaymentNetwork||(e.PaymentNetwork={})),function(t){t.ThreeDS="3DS",t.EMV="EMV",t.Credit="Credit",t.Debit="Debit"}(e.MerchantCapability||(e.MerchantCapability={}))})(n.ApplePay||(n.ApplePay={}))})($e||($e={}));var $e;(function(n){(function(e){function t(r){return"virtual.".concat(r)}class i{constructor(o,a){var l,c;this.id=n.Platform.APPLE_APPSTORE,this.name="AppStore",this.ready=!1,this._canMakePayments=!1,this.forceReceiptReload=!1,this._products=[],this.validProducts={},this._paymentMonitor=()=>{},this.supportsParallelLoading=!0,this._appStoreReceiptLoading=!1,this._appStoreReceiptCallbacks=[],this.context=o,this.bridge=new e.Bridge.Bridge,this.log=o.log.child("AppleAppStore"),this.discountEligibilityDeterminer=a.discountEligibilityDeterminer,this.needAppReceipt=(l=a.needAppReceipt)!==null&&l!==void 0?l:!0,this.autoFinish=(c=a.autoFinish)!==null&&c!==void 0?c:!1,this.pseudoReceipt=new n.Receipt(n.Platform.APPLE_APPSTORE,this.context.apiDecorators),this.receiptsUpdated=n.Utils.createDebouncer(()=>{this._receiptsUpdated()},300)}get products(){return this._products}getProduct(o){return this._products.find(a=>a.id===o)}get receipts(){return this.isSupported?(this._receipt?[this._receipt]:[]).concat(this.pseudoReceipt?this.pseudoReceipt:[]):[]}addValidProducts(o,a){a.forEach(l=>{const c=o.find(d=>d.id===l.id);c&&(this.validProducts[l.id]=Object.assign(Object.assign({},l),c))})}get isSupported(){return n.Utils.platformId()==="ios"}upsertTransactionInProgress(o,a){const l=t(o);return new Promise(c=>{const d=this.pseudoReceipt.transactions.find(u=>u.transactionId===l);if(d)d.state=a,d.refresh(o),c(d);else{const u=new e.SKTransaction(n.Platform.APPLE_APPSTORE,this.pseudoReceipt,this.context.apiDecorators);u.state=a,u.transactionId=l,u.refresh(o),this.pseudoReceipt.transactions.push(u),c(u)}})}removeTransactionInProgress(o){const a=t(o);this.pseudoReceipt.transactions=this.pseudoReceipt.transactions.filter(l=>l.transactionId!==a)}upsertTransaction(o,a,l){return St(this,void 0,void 0,function*(){return new Promise(c=>{this.initializeAppReceipt(()=>{var d;if(!this._receipt){this.log.warn("Failed to load the application receipt, cannot proceed with handling the purchase");return}const u=(d=this._receipt)===null||d===void 0?void 0:d.transactions.find(h=>h.transactionId===a);if(u)u.state=l,u.refresh(o),c(u);else{const h=new e.SKTransaction(n.Platform.APPLE_APPSTORE,this._receipt,this.context.apiDecorators);h.state=l,h.transactionId=a,h.refresh(o),this._receipt.transactions.push(h),c(h)}})})})}removeTransaction(o){this._receipt&&(this._receipt.transactions=this._receipt.transactions.filter(a=>a.transactionId!==o))}_receiptsUpdated(){this._receipt?(this.log.debug("receipt updated and ready."),this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[this._receipt,this.pseudoReceipt]),this.context.listener.receiptsReady(n.Platform.APPLE_APPSTORE)):(this.log.debug("receipt updated."),this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[this.pseudoReceipt]))}setPaymentMonitor(o){this._paymentMonitor=o}callPaymentMonitor(o,a,l){this._paymentMonitor(o)}initialize(){return new Promise(o=>{this.log.info("bridge.init");const a=this.log.child("Bridge");this.bridge.init({autoFinish:this.autoFinish,debug:this.context.verbosity===n.LogLevel.DEBUG,log:l=>a.debug(l),error:(l,c,d)=>{if(this.log.error("ERROR: "+l+" - "+c),l===n.ErrorCode.PAYMENT_CANCELLED){this.callPaymentMonitor("cancelled",n.ErrorCode.PAYMENT_CANCELLED,c);return}else this.context.error(s(l,c,(d==null?void 0:d.productId)||null))},ready:()=>{this.log.info("ready")},purchased:(l,c,d,u,h)=>St(this,void 0,void 0,function*(){this.log.info("purchase: id:"+l+" product:"+c+" originalTransaction:"+d+" - date:"+u+" - discount:"+h),(yield this.upsertTransaction(c,l,n.TransactionState.APPROVED)).refresh(c,d,u,h),this.removeTransactionInProgress(c),this.receiptsUpdated.call(),this.callPaymentMonitor("purchased")}),purchaseEnqueued:(l,c)=>St(this,void 0,void 0,function*(){this.log.info("purchaseEnqueued: "+l+" - "+c),yield this.upsertTransactionInProgress(l,n.TransactionState.INITIATED),this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[this.pseudoReceipt])}),purchaseFailed:(l,c,d)=>{this.log.info("purchaseFailed: "+l+" - "+c+" - "+d),this.removeTransactionInProgress(l),this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[this.pseudoReceipt]),this.callPaymentMonitor("failed",c,d)},purchasing:l=>St(this,void 0,void 0,function*(){this.log.info("purchasing: "+l),yield this.upsertTransactionInProgress(l,n.TransactionState.INITIATED),this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[this.pseudoReceipt])}),deferred:l=>St(this,void 0,void 0,function*(){this.log.info("deferred: "+l),yield this.upsertTransactionInProgress(l,n.TransactionState.PENDING),this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[this.pseudoReceipt]),this.callPaymentMonitor("deferred")}),finished:(l,c)=>St(this,void 0,void 0,function*(){yield this.receiptsUpdated.wait(),this.log.info("finish: "+l+" - "+c),this.removeTransactionInProgress(c),yield this.upsertTransaction(c,l,n.TransactionState.FINISHED),this.receiptsUpdated.call()}),restored:(l,c)=>St(this,void 0,void 0,function*(){this.log.info("restore: "+l+" - "+c),yield this.upsertTransaction(c,l,n.TransactionState.APPROVED),this.receiptsUpdated.call()}),receiptsRefreshed:l=>{this.log.info("receiptsRefreshed"),this._receipt&&this._receipt.refresh(l,this.needAppReceipt,this.context.apiDecorators)},restoreFailed:l=>{this.log.info("restoreFailed: "+l),this.onRestoreCompleted&&(this.onRestoreCompleted(s(l,"Restore purchases failed",null)),this.onRestoreCompleted=void 0)},restoreCompleted:()=>{this.log.info("restoreCompleted"),this.onRestoreCompleted&&(this.onRestoreCompleted(void 0),this.onRestoreCompleted=void 0)}},()=>St(this,void 0,void 0,function*(){this.log.info("bridge.init done"),yield this.canMakePayments(),o(void 0)}),(l,c)=>{this.log.info("bridge.init failed: "+l+" - "+c),o(s(l,c,null))})})}loadReceipts(){return new Promise(o=>{setTimeout(()=>{this.initializeAppReceipt(()=>{this.receiptsUpdated.call(),this._receipt?o([this._receipt,this.pseudoReceipt]):o([this.pseudoReceipt])})},300)})}canMakePayments(){return St(this,void 0,void 0,function*(){return new Promise(o=>{this.bridge.canMakePayments(()=>{this._canMakePayments=!0,o(!0)},a=>{this.log.warn("canMakePayments: ".concat(a)),this._canMakePayments=!1,o(!1)})})})}initializeAppReceipt(o){return St(this,void 0,void 0,function*(){if(this._receipt)return this.log.debug("initializeAppReceipt() => already initialized."),o(void 0);if(this._appStoreReceiptCallbacks.push(o),this._appStoreReceiptLoading){this.log.debug("initializeAppReceipt() => already loading.");return}this._appStoreReceiptLoading=!0;const a=yield this.loadAppStoreReceipt(),l=c=>{const d=this._appStoreReceiptCallbacks;this._appStoreReceiptCallbacks=[],d.forEach(u=>{u(c)})};if(!(a!=null&&a.appStoreReceipt)){this.log.warn("no appStoreReceipt"),this._appStoreReceiptLoading=!1,l(s(n.ErrorCode.REFRESH,"No appStoreReceipt",null));return}this._receipt=new e.SKApplicationReceipt(a,this.needAppReceipt,this.context.apiDecorators),l(void 0)})}prepareReceipt(o){o!=null&&o.appStoreReceipt&&(this._receipt?this._receipt.refresh(o,this.needAppReceipt,this.context.apiDecorators):this._receipt=new e.SKApplicationReceipt(o,this.needAppReceipt,this.context.apiDecorators))}loadAppStoreReceipt(){return St(this,void 0,void 0,function*(){let o=!1;return new Promise(a=>{var l;if(!((l=this.bridge.appStoreReceipt)===null||l===void 0)&&l.appStoreReceipt&&!this.forceReceiptReload)return this.log.debug("using cached appstore receipt"),a(this.bridge.appStoreReceipt);this.log.debug("loading appstore receipt..."),this.forceReceiptReload=!1,this.bridge.loadReceipts(c=>{this.log.debug("appstore receipt loaded"),o||a(c),o=!0},(c,d)=>{this.log.warn("Failed to load appStoreReceipt: "+c+" - "+d),o||a(void 0),o=!0}),setTimeout(function(){o||a(void 0),o=!0},5e3)}).then(a=>(this.context.listener.receiptsReady(n.Platform.APPLE_APPSTORE),a)).catch(a=>(this.context.listener.receiptsReady(n.Platform.APPLE_APPSTORE),a))})}loadEligibility(o){return St(this,void 0,void 0,function*(){if(this.log.debug("load eligibility: "+JSON.stringify(o)),!this.discountEligibilityDeterminer)return this.log.debug("No discount eligibility determiner, skipping..."),new e.Internal.DiscountEligibilities([],[]);const a=[];if(o.forEach(l=>{var c,d,u;(c=l.discounts)===null||c===void 0||c.forEach(h=>{a.push({productId:l.id,discountId:h.id,discountType:h.type})}),((u=(d=l.discounts)===null||d===void 0?void 0:d.length)!==null&&u!==void 0?u:0)===0&&l.introPrice&&a.push({productId:l.id,discountId:"intro",discountType:"Introductory"})}),a.length>0){const l=yield this.loadAppStoreReceipt();if(!l||!l.appStoreReceipt)return this.log.debug("no receipt, assuming introductory price are available."),new e.Internal.DiscountEligibilities(a,a.map(c=>c.discountType==="Introductory"));{this.log.debug("calling discount eligibility determiner.");const c=yield this.callDiscountEligibilityDeterminer(l,a);return this.log.debug("response: "+JSON.stringify(c)),new e.Internal.DiscountEligibilities(a,c)}}else return new e.Internal.DiscountEligibilities([],[])})}callDiscountEligibilityDeterminer(o,a){return new Promise(l=>{if(!this.discountEligibilityDeterminer)return l([]);this.discountEligibilityDeterminer(o,a,l)})}loadProducts(o){return new Promise(a=>{this.log.info("bridge.load"),this.bridge.load(o.map(l=>l.id),(l,c)=>St(this,void 0,void 0,function*(){this.log.info("bridge.loaded: "+JSON.stringify({validProducts:l,invalidProducts:c})),this.addValidProducts(o,l);const d=yield this.loadEligibility(l);this.log.info("eligibilities ready: "+JSON.stringify(d));const u=o.map(h=>{if(c.indexOf(h.id)>=0)return this.log.debug("".concat(h.id," is invalid")),s(n.ErrorCode.INVALID_PRODUCT_ID,"Product not found in AppStore. #400",h.id);{const f=l.find(g=>g.id===h.id);if(this.log.debug("".concat(h.id," is valid: ").concat(JSON.stringify(f))),!f)return s(n.ErrorCode.INVALID_PRODUCT_ID,"Product not found in AppStore. #404",h.id);let m=this.getProduct(h.id);return m?(this.log.debug("refreshing existing product"),m==null||m.refresh(f,this.context.apiDecorators,d)):(this.log.debug("registering new product"),m=new e.SKProduct(f,h,this.context.apiDecorators,d),this._products.push(m)),m}});this.log.debug("Products loaded: ".concat(JSON.stringify(u))),a(u)}),(l,c)=>o.map(d=>s(l,c,null)))})}order(o,a){return St(this,void 0,void 0,function*(){let l=!1;return new Promise(c=>{var d;const u=b=>{l||(this.setPaymentMonitor(()=>{}),l=!0,c(b))};this.log.info("order");const h=o.id!==e.DEFAULT_OFFER_ID?o.id:void 0,f=(d=a==null?void 0:a.appStore)===null||d===void 0?void 0:d.discount;if(h&&!f)return u(s(n.ErrorCode.MISSING_OFFER_PARAMS,"Missing additionalData.appStore.discount when ordering a discount offer",o.productId));if(h&&(f==null?void 0:f.id)!==h)return u(s(n.ErrorCode.INVALID_OFFER_IDENTIFIER,"Offer identifier does not match additionalData.appStore.discount.id",o.productId));this.setPaymentMonitor((b,w,x)=>{if(this.log.info("order.paymentMonitor => "+b+" "+(w!=null?w:"")+" "+(x!=null?x:"")),!l)switch(b){case"cancelled":u(s(w!=null?w:n.ErrorCode.PAYMENT_CANCELLED,x!=null?x:"The user cancelled the order.",o.productId));break;case"failed":setTimeout(()=>{u(s(w!=null?w:n.ErrorCode.PURCHASE,x!=null?x:"Purchase failed",o.productId))},500);break;case"purchased":case"deferred":u(void 0);break}});const m=()=>{this.log.info("order.success")},g=()=>{this.log.info("order.error"),u(s(n.ErrorCode.PURCHASE,"Failed to place order",o.productId))};this.forceReceiptReload=!0,this.bridge.purchase(o.productId,1,this.context.getApplicationUsername(),f,m,g)})})}finish(o){return new Promise(a=>{if(this.log.info("finish("+o.transactionId+")"),o.transactionId===e.APPLICATION_VIRTUAL_TRANSACTION_ID||o.transactionId===t(o.products[0].id))return o.state=n.TransactionState.FINISHED,this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[o.parentReceipt]),a(void 0);const l=()=>{o.state=n.TransactionState.FINISHED,this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[o.parentReceipt]),a(void 0)},c=d=>{var u,h;d!=null&&d.includes("[#CdvPurchase:100]")?l():a(s(n.ErrorCode.FINISH,"Failed to finish transaction",(h=(u=o.products[0])===null||u===void 0?void 0:u.id)!==null&&h!==void 0?h:null))};this.bridge.finish(o.transactionId,l,c)})}refreshReceipt(){return new Promise(o=>{const a=c=>{o(c)},l=(c,d)=>{o(s(c,d,null))};this.bridge.refreshReceipts(a,l)})}receiptValidationBody(o){return St(this,void 0,void 0,function*(){if(o.platform!==n.Platform.APPLE_APPSTORE||o!==this._receipt)return;const a=o;let l=a.nativeData;if(this.forceReceiptReload){const d=yield this.loadAppStoreReceipt();this.forceReceiptReload=!1,d&&(l=d,this.prepareReceipt(d))}if(!a.nativeData.appStoreReceipt){this.log.info("Cannot prepare the receipt validation body, because appStoreReceipt is missing. Refreshing...");const d=yield this.refreshReceipt();if(!d||"isError"in d){this.log.warn("Failed to refresh receipt, cannot run receipt validation."),d&&this.log.error(d);return}this.log.info("Receipt refreshed."),l=d}const c=a.transactions.slice(-1)[0];return{id:l.bundleIdentifier,type:n.ProductType.APPLICATION,products:n.Utils.objectValues(this.validProducts).map(d=>new e.SKProduct(d,d,this.context.apiDecorators,{isEligible:()=>!0})),transaction:{type:"ios-appstore",id:c==null?void 0:c.transactionId,appStoreReceipt:l.appStoreReceipt}}})}handleReceiptValidationResponse(o,a){var l,c;return St(this,void 0,void 0,function*(){let d=!1;if(a.ok){const u=(l=a.data)===null||l===void 0?void 0:l.transaction;(u==null?void 0:u.type)==="ios-appstore"&&"original_application_version"in u&&((c=this._receipt)===null||c===void 0||c.transactions.forEach(h=>{h.transactionId===e.APPLICATION_VIRTUAL_TRANSACTION_ID&&u.original_purchase_date_ms&&(h.purchaseDate=new Date(parseInt(u.original_purchase_date_ms)),d=!0)}))}d&&this.context.listener.receiptsUpdated(n.Platform.APPLE_APPSTORE,[o])})}requestPayment(o,a){return St(this,void 0,void 0,function*(){return s(n.ErrorCode.UNKNOWN,"requestPayment not supported",null)})}manageSubscriptions(){return St(this,void 0,void 0,function*(){this.bridge.manageSubscriptions()})}manageBilling(){return St(this,void 0,void 0,function*(){this.bridge.manageBilling()})}checkSupport(o){return o==="order"?this._canMakePayments:["order","manageBilling","manageSubscriptions"].indexOf(o)>=0}restorePurchases(){return new Promise(o=>{this.onRestoreCompleted=a=>{this.onRestoreCompleted=void 0,this.bridge.refreshReceipts(l=>{o(a)},(l,c)=>{o(a||s(l,c,null))})},this.forceReceiptReload=!0,this.bridge.restore()})}presentCodeRedemptionSheet(){return new Promise(o=>{this.bridge.presentCodeRedemptionSheet(o)})}}e.Adapter=i;function s(r,o,a){return n.storeError(r,o,n.Platform.APPLE_APPSTORE,a)}})(n.AppleAppStore||(n.AppleAppStore={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){const i=l=>{};let s=i;function r(l,c,d,u){window.cordova.exec(d,u,"InAppPurchase",l,c)}function o(l,c,...d){if(l)try{l.apply(this,d)}catch(u){s("exception in "+c+': "'+u+'"')}}class a{constructor(){this.transactionsForProduct={},this.initialized=!1,this.registeredProducts=[],this.needRestoreNotification=!1,this.pendingUpdates=[],this.onPurchased=!1,this.onFailed=!1,this.onRestored=!1,window.storekit=this,this.options={error:i,ready:i,purchased:i,purchaseEnqueued:i,purchasing:i,purchaseFailed:i,deferred:i,finished:i,restored:i,receiptsRefreshed:i,restoreFailed:i,restoreCompleted:i}}init(c,d,u){this.options={error:c.error||i,ready:c.ready||i,purchased:c.purchased||i,purchaseEnqueued:c.purchaseEnqueued||i,purchasing:c.purchasing||i,purchaseFailed:c.purchaseFailed||i,deferred:c.deferred||i,finished:c.finished||i,restored:c.restored||i,receiptsRefreshed:c.receiptsRefreshed||i,restoreFailed:c.restoreFailed||i,restoreCompleted:c.restoreCompleted||i},c.debug&&(r("debug",[],i,i),s=c.log||function(m){console.log("[CdvPurchase.AppAppStore.Bridge] "+m)}),c.autoFinish&&r("autoFinish",[],i,i),r("setup",[],()=>{s("setup ok"),o(this.options.ready,"options.ready"),o(d,"init.success"),this.initialized=!0,setTimeout(()=>this.processPendingTransactions(),50)},m=>{s("setup failed"),o(u,"init.error",n.ErrorCode.SETUP,"Setup failed: "+m)})}processPendingTransactions(){s("processing pending transactions"),r("processPendingTransactions",[],()=>{this.finalizeTransactionUpdates()},void 0)}purchase(c,d,u,h,f,m){d=d|0||1;const g=this.options;if(this.registeredProducts.indexOf(c)<0){const x="Purchasing "+c+" failed.  Ensure the product was loaded first with Bridge.load(...)!";s(x),typeof g.error=="function"&&o(g.error,"options.error",n.ErrorCode.PURCHASE,"Trying to purchase a unknown product.",{productId:c,quantity:d});return}r("purchase",[c,d,u,h||{}],()=>{s("Purchase enqueued "+c),typeof g.purchaseEnqueued=="function"&&o(g.purchaseEnqueued,"options.purchaseEnqueued",c,d),o(f,"purchase.success")},()=>{const x="Purchase failed: "+c;s(x),typeof g.error=="function"&&o(g.error,"options.error",n.ErrorCode.PURCHASE,x,{productId:c,quantity:d}),o(m,"purchase.error")})}canMakePayments(c,d){return r("canMakePayments",[],c,d)}restore(c){this.needRestoreNotification=!0,r("restoreCompletedTransactions",[],c,c)}manageSubscriptions(c){r("manageSubscriptions",[],c,c)}manageBilling(c){r("manageBilling",[],c,c)}presentCodeRedemptionSheet(c){r("presentCodeRedemptionSheet",[],c,c)}load(c,d,u){const h=this.options;if(typeof c=="string"&&(c=[c]),!c)o(d,"load.success",[],[]);else if(!c.length)o(d,"load.success",[],[]);else{if(typeof c[0]!="string"){const g="invalid productIds given to store.load: "+JSON.stringify(c);s(g),o(h.error,"options.error",n.ErrorCode.LOAD,g),o(u,"load.error",n.ErrorCode.LOAD,g);return}s("load "+JSON.stringify(c));const f=g=>{const b=g[0],w=g[1];s("load ok: { valid:"+JSON.stringify(b)+" invalid:"+JSON.stringify(w)+" }"),o(d,"load.success",b,w)},m=g=>{s("load failed"),s(g);const b="Load failed: "+g;o(h.error,"options.error",n.ErrorCode.LOAD,b),o(u,"load.error",n.ErrorCode.LOAD,b)};this.registeredProducts=this.registeredProducts.concat(c),r("load",[c],f,m)}}finish(c,d,u){r("finishTransaction",[c],d,u)}finalizeTransactionUpdates(){for(let c=0;c<this.pendingUpdates.length;++c){const d=this.pendingUpdates[c];this.transactionUpdated(d.state,d.errorCode,d.errorText,d.transactionIdentifier,d.productId,d.transactionReceipt,d.originalTransactionIdentifier,d.transactionDate,d.discountId)}this.pendingUpdates=[]}lastTransactionUpdated(){}transactionUpdated(c,d,u,h,f,m,g,b,w){if(!this.initialized){this.pendingUpdates.push({state:c,errorCode:d,errorText:u,transactionIdentifier:h,productId:f,transactionReceipt:m,originalTransactionIdentifier:g,transactionDate:b,discountId:w});return}switch(s("transaction updated:"+h+" state:"+c+" product:"+f),f&&h&&(this.transactionsForProduct[f]?this.transactionsForProduct[f].push(h):this.transactionsForProduct[f]=[h]),c){case"PaymentTransactionStatePurchasing":o(this.options.purchasing,"options.purchasing",f);return;case"PaymentTransactionStatePurchased":o(this.options.purchased,"options.purchase",h,f,g,b,w);return;case"PaymentTransactionStateDeferred":o(this.options.deferred,"options.deferred",f);return;case"PaymentTransactionStateFailed":o(this.options.purchaseFailed,"options.purchaseFailed",f,d||n.ErrorCode.UNKNOWN,u||"ERROR"),o(this.options.error,"options.error",d||n.ErrorCode.UNKNOWN,u||"ERROR",{productId:f});return;case"PaymentTransactionStateRestored":o(this.options.restored,"options.restore",h,f);return;case"PaymentTransactionStateFinished":o(this.options.finished,"options.finish",h,f);return}}restoreCompletedTransactionsFinished(){this.needRestoreNotification&&(this.needRestoreNotification=!1,o(this.options.restoreCompleted,"options.restoreCompleted"))}restoreCompletedTransactionsFailed(c){this.needRestoreNotification&&(this.needRestoreNotification=!1,o(this.options.restoreFailed,"options.restoreFailed",c))}parseReceiptArgs(c){const d=c[0],u=c[1],h=c[2],f=c[3],m=c[4];return s("infoPlist: "+u+","+h+","+f+","+m),{appStoreReceipt:d,bundleIdentifier:u,bundleShortVersion:h,bundleNumericVersion:f,bundleSignature:m}}refreshReceipts(c,d){const u=f=>{const m=this.parseReceiptArgs(f);this.appStoreReceipt=m,o(this.options.receiptsRefreshed,"options.receiptsRefreshed",m),o(c,"refreshReceipts.success",m)},h=f=>{s("refresh receipt failed: "+f),f.includes("(@AMSErrorDomain:100)")&&s('authentication failed, indicated by the string "(@AMSErrorDomain:100)"'),o(this.options.error,"options.error",n.ErrorCode.REFRESH_RECEIPTS,"Failed to refresh receipt: "+f),o(d,"refreshReceipts.error",n.ErrorCode.REFRESH_RECEIPTS,"Failed to refresh receipt: "+f)};this.appStoreReceipt=null,s("refreshing appStoreReceipt"),r("appStoreRefreshReceipt",[],u,h)}loadReceipts(c,d){const u=f=>{const m=this.parseReceiptArgs(f);this.appStoreReceipt=m,o(c,"loadReceipts.callback",m)},h=f=>{};s("loading appStoreReceipt"),r("appStoreReceipt",[],u,h)}}t.Bridge=a})(e.Bridge||(e.Bridge={}))})(n.AppleAppStore||(n.AppleAppStore={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){class i{constructor(r,o){this.request=r,this.response=o}isEligible(r,o,a){var l;for(let c=0;c<this.request.length;++c){const d=this.request[c];if(d.productId===r&&d.discountId===a&&d.discountType===o)return(l=this.response[c])!==null&&l!==void 0?l:!1}return!0}}t.DiscountEligibilities=i})(e.Internal||(e.Internal={}))})(n.AppleAppStore||(n.AppleAppStore={}))})($e||($e={}));var $e;(function(n){(function(e){e.DEFAULT_OFFER_ID="$";class t extends n.Offer{constructor(r,o){super(r,o),this.offerType=r.offerType}}e.SKOffer=t;class i extends n.Product{constructor(r,o,a,l){super(o,a),this.raw=r,this.refresh(r,a,l)}removeIneligibleDiscounts(r){this.offers=this.offers.filter(o=>{const a=o;return a.offerType==="Default"?!0:r.isEligible(this.id,a.offerType,o.id)})}refresh(r,o,a){var l;this.raw=r,this.title=r.title,this.description=r.description,this.countryCode=r.countryCode,r.group&&(this.group=r.group),this.removeIneligibleDiscounts(a);const c={price:r.price,priceMicros:r.priceMicros,currency:r.currency,billingPeriod:u(r.billingPeriod,r.billingPeriodUnit),paymentMode:this.type===n.ProductType.PAID_SUBSCRIPTION?n.PaymentMode.PAY_AS_YOU_GO:n.PaymentMode.UP_FRONT,recurrenceMode:this.type===n.ProductType.PAID_SUBSCRIPTION?n.RecurrenceMode.INFINITE_RECURRING:n.RecurrenceMode.NON_RECURRING};if((l=r.discounts)===null||l===void 0||l.forEach(h=>{if(a.isEligible(r.id,h.type,h.id)){const f=[],m=h.paymentMode===n.PaymentMode.PAY_AS_YOU_GO?h.period:1,g=h.paymentMode===n.PaymentMode.PAY_AS_YOU_GO?1:h.period,b={price:h.price,priceMicros:h.priceMicros,currency:r.currency,billingPeriod:u(g,h.periodUnit),billingCycles:m,paymentMode:h.paymentMode,recurrenceMode:n.RecurrenceMode.FINITE_RECURRING};f.push(b),f.push(c),this.addOffer(new t({id:h.id,product:this,pricingPhases:f,offerType:h.type},o))}}),!d(this)){const h=[];if(r.introPrice&&r.introPriceMicros!==void 0&&a.isEligible(r.id,"Introductory","intro")){const f={price:r.introPrice,priceMicros:r.introPriceMicros,currency:r.currency,billingPeriod:u(r.introPricePeriod,r.introPricePeriodUnit),paymentMode:r.introPricePaymentMode,recurrenceMode:n.RecurrenceMode.FINITE_RECURRING,billingCycles:1};h.push(f)}h.push(c),this.addOffer(new t({id:e.DEFAULT_OFFER_ID,product:this,pricingPhases:h,offerType:"Default"},o))}function d(h){return h.offers.filter(f=>{const m=f;return m.offerType==="Introductory"||m.offerType==="Default"&&m.pricingPhases.length>1}).length>0}function u(h,f){if(h&&f)return"P".concat(h).concat(f[0])}}}e.SKProduct=i})(n.AppleAppStore||(n.AppleAppStore={}))})($e||($e={}));var $e;(function(n){(function(e){e.APPLICATION_VIRTUAL_TRANSACTION_ID="appstore.application";class t extends n.Receipt{constructor(r,o,a){super(n.Platform.APPLE_APPSTORE,a),this.nativeData=r,this.refresh(this.nativeData,o,a)}refresh(r,o,a){if(this.nativeData=r,o){if(this.transactions.find(d=>d.transactionId===e.APPLICATION_VIRTUAL_TRANSACTION_ID))return;const c=new n.Transaction(n.Platform.APPLE_APPSTORE,this,a);c.transactionId=e.APPLICATION_VIRTUAL_TRANSACTION_ID,c.state=n.TransactionState.APPROVED,c.products.push({id:r.bundleIdentifier}),this.transactions.push(c)}}}e.SKApplicationReceipt=t;class i extends n.Transaction{refresh(r,o,a,l){r&&(this.products=[{id:r,offerId:l}]),o&&(this.originalTransactionId=o),a&&(this.purchaseDate=new Date(+a))}}e.SKTransaction=i})(n.AppleAppStore||(n.AppleAppStore={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i.CANCELED="1",i.BILLING_ERROR="2",i.PRICE_INCREASE="3",i.PRODUCT_NOT_AVAILABLE="4",i.UNKNOWN="5"})(t.AppleExpirationIntent||(t.AppleExpirationIntent={}))})(e.VerifyReceipt||(e.VerifyReceipt={}))})(n.AppleAppStore||(n.AppleAppStore={}))})($e||($e={}));var $e;(function(n){(function(e){class t extends n.Receipt{constructor(d,u,h){var f,m,g;super(n.Platform.BRAINTREE,h);const b=new n.Transaction(n.Platform.BRAINTREE,this,h);b.purchaseDate=new Date,b.products=((f=d.items)===null||f===void 0?void 0:f.filter(w=>w).map(w=>({id:(w==null?void 0:w.id)||""})))||[],b.state=n.TransactionState.APPROVED,b.transactionId=(g=(m=u.paymentMethodNonce)===null||m===void 0?void 0:m.nonce)!==null&&g!==void 0?g:"UNKNOWN_".concat(u.paymentMethodType,"_").concat(u.paymentDescription),this.transactions=[b],this.dropInResult=u,this.paymentRequest=d,this.refresh(d,u,h)}refresh(d,u,h){var f,m;this.dropInResult=u,this.paymentRequest=d;const g=new n.Transaction(n.Platform.BRAINTREE,this,h);g.products=d.items.filter(b=>b).map(b=>({id:(b==null?void 0:b.id)||""})),g.state=n.TransactionState.APPROVED,g.transactionId=(m=(f=u.paymentMethodNonce)===null||f===void 0?void 0:f.nonce)!==null&&m!==void 0?m:"UNKNOWN_".concat(u.paymentMethodType,"_").concat(u.paymentDescription),g.amountMicros=d.amountMicros,g.currency=d.currency,this.transactions=[g]}}e.BraintreeReceipt=t;class i{constructor(d,u){this.id=n.Platform.BRAINTREE,this.name="BrainTree",this.ready=!1,this.products=[],this._receipts=[],this.supportsParallelLoading=!1,this.context=d,this.log=d.log.child("Braintree"),this.options=u}get receipts(){return this._receipts}get isSupported(){return e.IosBridge.Bridge.isSupported()||e.AndroidBridge.Bridge.isSupported()}initialize(){return new Promise(d=>{if(this.log.info("initialize()"),e.IosBridge.Bridge.isSupported())this.log.info("instantiating ios bridge..."),this.iosBridge=new e.IosBridge.Bridge(this.log,u=>{this.options.tokenizationKey?u(this.options.tokenizationKey):this.options.clientTokenProvider?this.options.clientTokenProvider(u):u(l(n.ErrorCode.CLIENT_INVALID,"Braintree iOS Bridge requires a clientTokenProvider or tokenizationKey"))},this.options.applePay),this.iosBridge.initialize(this.context,d);else if(e.AndroidBridge.Bridge.isSupported()&&!this.androidBridge){this.log.info("instantiating android bridge..."),this.androidBridge=new e.AndroidBridge.Bridge(this.log),this.log.info("calling android bridge -> initialize...");const u=this.options.tokenizationKey?this.options.tokenizationKey:this.options.clientTokenProvider?this.options.clientTokenProvider:"";this.androidBridge.initialize(u,d)}else this.log.info("platform not supported..."),d(void 0);this.context.listener.receiptsReady(n.Platform.BRAINTREE)})}loadProducts(d){return St(this,void 0,void 0,function*(){return d.map(u=>l(n.ErrorCode.PRODUCT_NOT_AVAILABLE,"N/A"))})}loadReceipts(){return St(this,void 0,void 0,function*(){return this.context.listener.receiptsReady(n.Platform.BRAINTREE),[]})}order(d){return St(this,void 0,void 0,function*(){return l(n.ErrorCode.UNKNOWN,"N/A: Not implemented with Braintree")})}finish(d){return St(this,void 0,void 0,function*(){d.state=n.TransactionState.FINISHED,this.context.listener.receiptsUpdated(n.Platform.TEST,[d.parentReceipt])})}manageSubscriptions(){return St(this,void 0,void 0,function*(){this.log.info("N/A: manageSubscriptions() is not available with Braintree")})}manageBilling(){return St(this,void 0,void 0,function*(){this.log.info("N/A: manageBilling() is not available with Braintree")})}launchDropIn(d,u){return St(this,void 0,void 0,function*(){return this.androidBridge?this.androidBridge.launchDropIn(u):this.iosBridge?this.iosBridge.launchDropIn(d,u):l(n.ErrorCode.PURCHASE,"Braintree is not available")})}requestPayment(d,u){var h,f,m,g,b,w,x,k,E;return St(this,void 0,void 0,function*(){this.log.info("requestPayment()"+JSON.stringify(d));const T=((h=u==null?void 0:u.braintree)===null||h===void 0?void 0:h.dropInRequest)||{};if((yield e.IosBridge.ApplePayPlugin.isSupported(this.log))||(this.log.info("Apple Pay is not supported."),T.applePayDisabled=!0),this.options.googlePay||T.googlePayRequest){const R=Object.assign(Object.assign({},(f=this.options.googlePay)!==null&&f!==void 0?f:{}),(m=T.googlePayRequest)!==null&&m!==void 0?m:{});R.transactionInfo||(R.transactionInfo={currencyCode:(g=d.currency)!==null&&g!==void 0?g:"",totalPrice:((b=d.amountMicros)!==null&&b!==void 0?b:0)/1e6,totalPriceStatus:e.GooglePay.TotalPriceStatus.FINAL}),T.googlePayRequest=R}if(this.options.threeDSecure||T.threeDSecureRequest){const R=Object.assign(Object.assign({},(w=this.options.threeDSecure)!==null&&w!==void 0?w:{}),(x=T.threeDSecureRequest)!==null&&x!==void 0?x:{});R.amount||(R.amount=s((k=d.amountMicros)!==null&&k!==void 0?k:0)),!R.billingAddress&&d.billingAddress&&(R.billingAddress={givenName:d.billingAddress.givenName,surname:d.billingAddress.surname,countryCodeAlpha2:d.billingAddress.countryCode,postalCode:d.billingAddress.postalCode,locality:d.billingAddress.locality,streetAddress:d.billingAddress.streetAddress1,extendedAddress:d.billingAddress.streetAddress2,line3:d.billingAddress.streetAddress3,phoneNumber:d.billingAddress.phoneNumber,region:d.billingAddress.region}),R.email||(R.email=d.email),T.threeDSecureRequest=R}const P=yield this.launchDropIn(d,T);if(!o(P))return a(this.log,P);const C=P;if(this.log.info("launchDropIn success: "+JSON.stringify({paymentRequest:d,dropInResult:C})),!(!((E=C.paymentMethodNonce)===null||E===void 0)&&E.nonce))return l(n.ErrorCode.BAD_RESPONSE,"launchDropIn returned no paymentMethodNonce");let A=this._receipts.find(R=>{var M,N;return((M=R.dropInResult.paymentMethodNonce)===null||M===void 0?void 0:M.nonce)===((N=C.paymentMethodNonce)===null||N===void 0?void 0:N.nonce)});return A?A.refresh(d,C,this.context.apiDecorators):(A=new t(d,C,this.context.apiDecorators),this.receipts.push(A)),this.context.listener.receiptsUpdated(n.Platform.BRAINTREE,[A]),A.transactions[0]})}receiptValidationBody(d){var u,h,f,m,g;return St(this,void 0,void 0,function*(){if(!r(d)){this.log.error("Unexpected error, expecting a BraintreeReceipt: "+JSON.stringify(d));return}return this.log.info("create receiptValidationBody for: "+JSON.stringify(d)),{id:(f=(h=(u=d.paymentRequest.items)===null||u===void 0?void 0:u[0])===null||h===void 0?void 0:h.id)!==null&&f!==void 0?f:"unknown",type:n.ProductType.CONSUMABLE,priceMicros:d.paymentRequest.amountMicros,currency:d.paymentRequest.currency,products:[],transaction:{type:n.Platform.BRAINTREE,deviceData:d.dropInResult.deviceData,id:"nonce",paymentMethodNonce:(g=(m=d.dropInResult.paymentMethodNonce)===null||m===void 0?void 0:m.nonce)!==null&&g!==void 0?g:"",paymentDescription:d.dropInResult.paymentDescription,paymentMethodType:d.dropInResult.paymentMethodType}}})}handleReceiptValidationResponse(d,u){var h;return St(this,void 0,void 0,function*(){if(this.log.info("receipt validation response: "+JSON.stringify(u)),u!=null&&u.data&&"transaction"in u.data&&u.data.transaction.type==="braintree"){const f=(h=u.data.transaction.data.transaction)===null||h===void 0?void 0:h.customer.id;f&&!e.customerId&&(this.log.info("customerId updated: "+f),e.customerId=f)}})}checkSupport(d){return d==="requestPayment"}restorePurchases(){return St(this,void 0,void 0,function*(){})}}e.Adapter=i;function s(c){const d=""+c/1e4;return(d.slice(0,-2)||"0")+"."+(d.slice(-2,-1)||"0")+(d.slice(-1)||"0")}function r(c){return c.platform===n.Platform.BRAINTREE}const o=c=>!!c&&!("code"in c&&"message"in c),a=(c,d)=>{if(d){if(d.code===n.ErrorCode.PAYMENT_CANCELLED){c.info("User cancelled the payment request");return}return c.warn("launchDropIn failed: "+JSON.stringify(d)),d}else return c.warn("launchDropIn failed: no response"),l(n.ErrorCode.BAD_RESPONSE,"Braintree failed to launch drop in")};function l(c,d){return n.storeError(c,d,n.Platform.BRAINTREE,null)}e.braintreeError=l})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){const t="BraintreePlugin";(function(i){class s{constructor(o){this.log=o.child("AndroidBridge")}listener(o){this.log.debug("listener: "+JSON.stringify(o)),!(!o||!o.type)&&(o.type==="getClientToken"?this.getClientToken():o.type)}initialize(o,a){try{if(typeof o=="string"){const c=o;this.clientTokenProvider=d=>{d(c)}}else this.clientTokenProvider=o;this.log.info("exec.setListener()");const l=this.listener.bind(this);window.cordova.exec(l,null,t,"setListener",[]),a(void 0)}catch(l){this.log.warn("initialization failed: "+(l==null?void 0:l.message)),a(e.braintreeError(n.ErrorCode.SETUP,"Failed to initialize Braintree Android Bridge: "+(l==null?void 0:l.message)))}}getClientToken(){this.log.info("getClientToken()"),this.clientTokenProvider?(this.log.debug("clientTokenProvider set, calling."),this.clientTokenProvider(o=>{typeof o=="string"?window.cordova.exec(null,null,t,"onClientTokenSuccess",[o]):window.cordova.exec(null,null,t,"onClientTokenFailure",[o.code,o.message])})):(this.log.debug("clientTokenProvider not set, retrying later..."),setTimeout(()=>this.getClientToken(),1e3))}static isSupported(){return n.Utils.platformId()==="android"}isApplePaySupported(){return St(this,void 0,void 0,function*(){return!1})}launchDropIn(o){return new Promise(a=>{window.cordova.exec(l=>{this.log.info("dropInSuccess: "+JSON.stringify(l)),a(l)},l=>{this.log.info("dropInFailure: "+l);const c=l.split("|")[0],d=l.split("|").slice(1).join("");a(c==="UserCanceledException"?e.braintreeError(n.ErrorCode.PAYMENT_CANCELLED,d):c==="AuthorizationException"?e.braintreeError(n.ErrorCode.UNAUTHORIZED_REQUEST_DATA,d):e.braintreeError(n.ErrorCode.UNKNOWN,l))},t,"launchDropIn",[o])})}}i.Bridge=s})(e.AndroidBridge||(e.AndroidBridge={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){const i="BraintreeApplePayPlugin";class s{static get(){return window.CdvPurchaseBraintreeApplePay}static requestPayment(o){return new Promise(a=>{var l;if(!((l=s.get())===null||l===void 0)&&l.installed){const c=u=>{a(u)},d=u=>{const h=u!=null?u:"payment request failed";a(e.braintreeError(n.ErrorCode.PURCHASE,"Braintree+ApplePay ERROR: "+h))};window.cordova.exec(c,d,i,"presentDropInPaymentUI",[o])}else return a(e.braintreeError(n.ErrorCode.SETUP,"cordova-plugin-purchase-braintree-applepay does not appear to be installed."))})}static isSupported(o){return new Promise(a=>{var l;if(n.Utils.platformId()!=="ios")return o.info("BraintreeApplePayPlugin is only available for ios."),a(!1);if(!(!((l=s.get())===null||l===void 0)&&l.installed))return o.info("BraintreeApplePayPlugin does not appear to be installed."),a(!1);try{window.cordova.exec(c=>{a(c)},()=>{o.info("BraintreeApplePayPlugin is not available."),a(!1)},i,"isApplePaySupported",[])}catch(c){o.info("BraintreeApplePayPlugin is not installed."),a(!1)}})}}t.ApplePayPlugin=s})(e.IosBridge||(e.IosBridge={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){class i{constructor(r,o,a){this.log=r.child("IosBridge"),this.clientTokenProvider=o,this.applePayOptions=a}initialize(r,o){window.cordova.exec(null,null,"BraintreePlugin","setVerbosity",[r.verbosity]),window.cordova.exec(a=>this.log.debug("(Native) "+a),null,"BraintreePlugin","setLogger",[]),setTimeout(()=>o(void 0),0)}continueDropInForApplePay(r,o,a){var l,c,d,u,h,f,m,g,b;return St(this,void 0,void 0,function*(){const w=((c=(l=this.applePayOptions)===null||l===void 0?void 0:l.preparePaymentRequest)===null||c===void 0?void 0:c.call(l,r))||{merchantCapabilities:[n.ApplePay.MerchantCapability.ThreeDS]};if(!w.paymentSummaryItems){const k=r.items.filter(T=>T).map((T,P)=>{var C,A,R;return{type:"final",label:(T==null?void 0:T.title)||(T==null?void 0:T.id)||"Item #".concat(P+1),amount:"".concat(Math.round(((R=(A=(C=T==null?void 0:T.pricing)===null||C===void 0?void 0:C.priceMicros)!==null&&A!==void 0?A:r.amountMicros)!==null&&R!==void 0?R:0)/1e4)/100)}}),E={type:"final",label:(u=(d=this.applePayOptions)===null||d===void 0?void 0:d.companyName)!==null&&u!==void 0?u:"Total",amount:"".concat(Math.round(((h=r.amountMicros)!==null&&h!==void 0?h:0)/1e4)/100)};w.paymentSummaryItems=[...k,E]}const x=yield t.ApplePayPlugin.requestPayment(w);return this.log.info("Result from Apple Pay: "+JSON.stringify(x)),"isError"in x?x:x.userCancelled?e.braintreeError(n.ErrorCode.PAYMENT_CANCELLED,"User cancelled the payment request"):{paymentMethodNonce:{isDefault:!1,nonce:(m=(f=x.applePayCardNonce)===null||f===void 0?void 0:f.nonce)!==null&&m!==void 0?m:"",type:(b=(g=x.applePayCardNonce)===null||g===void 0?void 0:g.type)!==null&&b!==void 0?b:""},paymentMethodType:a.paymentMethodType,deviceData:a.deviceData,paymentDescription:a.paymentDescription}})}launchDropIn(r,o){return new Promise(a=>St(this,void 0,void 0,function*(){const l=d=>{this.log.info("dropInSuccess: "+JSON.stringify(d)),d.paymentMethodType===e.DropIn.PaymentMethod.APPLE_PAY?(this.log.info("it's an ApplePay request, we have to process it."),this.continueDropInForApplePay(r,o,d).then(a)):a(d)},c=d=>{this.log.info("dropInFailure: "+d);const[u,h]=d.split("|");a(u==="UserCanceledException"?e.braintreeError(n.ErrorCode.PAYMENT_CANCELLED,h):e.braintreeError(n.ErrorCode.UNKNOWN,"ERROR "+u+": "+h))};this.clientTokenProvider(d=>{typeof d=="string"?window.cordova.exec(l,c,"BraintreePlugin","launchDropIn",[d,o]):a(d)})}))}braintreePlugin(){return window.CdvPurchaseBraintree}static isSupported(){return n.Utils.platformId()==="ios"}}t.Bridge=i})(e.IosBridge||(e.IosBridge={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i[i.DISABLED=0]="DISABLED",i[i.OPTIONAL=1]="OPTIONAL",i[i.REQUIRED=2]="REQUIRED"})(t.CardFormFieldStatus||(t.CardFormFieldStatus={}))})(e.DropIn||(e.DropIn={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i.GOOGLE_PAY="GOOGLE_PAY",i.LASER="LASER",i.UK_MAESTRO="UK_MAESTRO",i.SWITCH="SWITCH",i.SOLOR="SOLO",i.APPLE_PAY="APPLE_PAY",i.AMEX="AMEX",i.DINERS_CLUB="DINERS_CLUB",i.DISCOVER="DISCOVER",i.JCB="JCB",i.MAESTRO="MAESTRO",i.MASTERCARD="MASTERCARD",i.PAYPAL="PAYPAL",i.VISA="VISA",i.VENMO="VENMO",i.UNIONPAY="UNIONPAY",i.HIPER="HIPER",i.HIPERCARD="HIPERCARD",i.UNKNOWN="UNKNOWN"})(t.PaymentMethod||(t.PaymentMethod={}))})(e.DropIn||(e.DropIn={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i[i.MIN=0]="MIN",i[i.FULL=1]="FULL"})(t.BillingAddressFormat||(t.BillingAddressFormat={})),function(i){i[i.NOT_CURRENTLY_KNOWN=1]="NOT_CURRENTLY_KNOWN",i[i.ESTIMATED=2]="ESTIMATED",i[i.FINAL=3]="FINAL"}(t.TotalPriceStatus||(t.TotalPriceStatus={}))})(e.GooglePay||(e.GooglePay={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i.UNSPECIFIED="00",i.CREDIT="01",i.DEBIT="02"})(t.AccountType||(t.AccountType={})),function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.SAME_DAY=1]="SAME_DAY",i[i.EXPEDITED=2]="EXPEDITED",i[i.PRIORITY=3]="PRIORITY",i[i.GROUND=4]="GROUND",i[i.ELECTRONIC_DELIVERY=5]="ELECTRONIC_DELIVERY",i[i.SHIP_TO_STORE=6]="SHIP_TO_STORE"}(t.ShippingMethod||(t.ShippingMethod={})),function(i){i[i.V1=0]="V1",i[i.V2=1]="V2"}(t.Version||(t.Version={}))})(e.ThreeDSecure||(e.ThreeDSecure={}))})(n.Braintree||(n.Braintree={}))})($e||($e={}));var $e;(function(n){(function(e){class t extends n.Transaction{constructor(a,l,c){super(n.Platform.GOOGLE_PLAY,l,c),this.nativePurchase=a,this.refresh(a,!0)}static toState(a,l,c,d){switch(l){case e.Bridge.PurchaseState.PENDING:return n.TransactionState.INITIATED;case e.Bridge.PurchaseState.PURCHASED:return d?n.TransactionState.FINISHED:c?n.TransactionState.APPROVED:a?n.TransactionState.INITIATED:n.TransactionState.APPROVED;case e.Bridge.PurchaseState.UNSPECIFIED_STATE:return n.TransactionState.UNKNOWN_STATE}}refresh(a,l){var c,d;this.nativePurchase=a,this.transactionId="".concat(a.orderId||a.purchaseToken),this.purchaseId="".concat(a.purchaseToken),this.products=a.productIds.map(u=>({id:u})),a.purchaseTime&&(this.purchaseDate=new Date(a.purchaseTime)),this.isPending=a.getPurchaseState===e.Bridge.PurchaseState.PENDING,typeof a.acknowledged<"u"&&(this.isAcknowledged=a.acknowledged),typeof a.consumed<"u"&&(this.isConsumed=a.consumed),typeof a.autoRenewing<"u"&&(this.renewalIntent=a.autoRenewing?n.RenewalIntent.RENEW:n.RenewalIntent.LAPSE),this.state=t.toState(l!=null?l:!1,a.getPurchaseState,(c=this.isAcknowledged)!==null&&c!==void 0?c:!1,(d=this.isConsumed)!==null&&d!==void 0?d:!1)}}e.Transaction=t;class i extends n.Receipt{constructor(a,l){super(n.Platform.GOOGLE_PLAY,l),this.transactions=[new t(a,this,l)],this.purchaseToken=a.purchaseToken,this.orderId=a.orderId}refreshPurchase(a){var l;(l=this.transactions[0])===null||l===void 0||l.refresh(a),this.orderId=a.orderId}}e.Receipt=i;class s{constructor(a,l=1e3*3600*24){if(this.id=n.Platform.GOOGLE_PLAY,this.name="GooglePlay",this.ready=!1,this.supportsParallelLoading=!1,this._receipts=[],this.bridge=new e.Bridge.Bridge,this.initialized=!1,this.retry=new n.Internal.Retry,this.autoRefreshIntervalMillis=0,s._instance)throw new Error("GooglePlay adapter already initialized");this._products=new e.Products(a.apiDecorators),this.autoRefreshIntervalMillis=l,this.context=a,this.log=a.log.child("GooglePlay"),s._instance=this}get products(){return this._products.products}get receipts(){return this._receipts}get isSupported(){return n.Utils.platformId()==="android"}initialize(){return St(this,void 0,void 0,function*(){return this.log.info("Initialize"),this.initializationPromise?this.initializationPromise:this.initializationPromise=new Promise(a=>{const l=this.log.child("Bridge"),c={onSetPurchases:this.onSetPurchases.bind(this),onPurchasesUpdated:this.onPurchasesUpdated.bind(this),onPurchaseConsumed:this.onPurchaseConsumed.bind(this),showLog:this.context.verbosity>=n.LogLevel.DEBUG,log:h=>l.info(h)},d=()=>{this.log.debug("Ready"),this.autoRefreshIntervalMillis>0&&window.setInterval(()=>this.getPurchases(),this.autoRefreshIntervalMillis),a(void 0)},u=h=>{this.initialized=!1,this.context.error(r(n.ErrorCode.SETUP,"Init failed - "+h,null)),this.retry.retry(()=>this.initialize())};this.bridge.init(d,u,c)})})}getSkusOf(a){const l=[],c=[];for(const d of a)d.type===n.ProductType.PAID_SUBSCRIPTION?c.push(d.id):l.push(d.id);return{inAppSkus:l,subsSkus:c}}loadReceipts(){return new Promise(a=>{this.getPurchases().then(l=>{a(this._receipts)})})}loadProducts(a){return new Promise(l=>{this.log.debug("Load: "+JSON.stringify(a));const c=u=>{if(this.log.debug("Loaded: "+JSON.stringify(u)),!Array.isArray(u)){const f="Invalid product list received: ".concat(JSON.stringify(u),", retrying later...");this.log.warn(f),this.retry.retry(d),this.context.error(r(n.ErrorCode.LOAD,f,null));return}const h=a.map(f=>{const m=u.find(g=>g.productId===f.id);return m&&m.productId?this._products.addProduct(f,m):r(n.ErrorCode.INVALID_PRODUCT_ID,"Product with id ".concat(f.id," not found."),f.id)});l(h)},d=()=>{const{inAppSkus:u,subsSkus:h}=this.getSkusOf(a);this.log.debug("getAvailableProducts: "+JSON.stringify(u)+" | "+JSON.stringify(h)),this.bridge.getAvailableProducts(u,h,c,f=>{this.retry.retry(d),this.context.error(r(n.ErrorCode.LOAD,"Loading product info failed - "+f+" - retrying later...",null))})};d()})}finish(a){return new Promise(l=>{const c=()=>{a.state!==n.TransactionState.FINISHED&&(a.state=n.TransactionState.FINISHED,this.context.listener.receiptsUpdated(n.Platform.GOOGLE_PLAY,[a.parentReceipt])),l(void 0)},d=a.products[0];if(!d)return l(r(n.ErrorCode.FINISH,"Cannot finish a transaction with no product",null));const u=this._products.getProduct(d.id);if(!u)return l(r(n.ErrorCode.FINISH,"Cannot finish transaction, unknown product "+d.id,d.id));const h=this._receipts.find(m=>m.hasTransaction(a));if(!h)return l(r(n.ErrorCode.FINISH,"Cannot finish transaction, linked receipt not found.",u.id));if(!h.purchaseToken)return l(r(n.ErrorCode.FINISH,"Cannot finish transaction, linked receipt contains no purchaseToken.",u.id));const f=(m,g)=>l(r(g||n.ErrorCode.UNKNOWN,m,u.id));if(u.type===n.ProductType.NON_RENEWING_SUBSCRIPTION||u.type===n.ProductType.CONSUMABLE){if(!a.isConsumed)return this.bridge.consumePurchase(c,f,h.purchaseToken)}else if(!a.isAcknowledged)return this.bridge.acknowledgePurchase(c,f,h.purchaseToken);l(void 0)})}onPurchaseConsumed(a){this.log.debug("onPurchaseConsumed: "+a.orderId),a.acknowledged=!0,a.consumed=!0,this.onPurchasesUpdated([a])}onPurchasesUpdated(a){this.log.debug("onPurchaseUpdated: "+a.map(l=>l.orderId).join(", ")),a.forEach(l=>{const c=this.receipts.find(d=>d.purchaseToken===l.purchaseToken);if(c)c.refreshPurchase(l),this.context.listener.receiptsUpdated(n.Platform.GOOGLE_PLAY,[c]);else{const d=new i(l,this.context.apiDecorators);this.receipts.push(d),this.context.listener.receiptsUpdated(n.Platform.GOOGLE_PLAY,[d]),d.transactions[0].state===n.TransactionState.INITIATED&&!d.transactions[0].isPending&&(d.refreshPurchase(l),this.context.listener.receiptsUpdated(n.Platform.GOOGLE_PLAY,[d]))}})}onSetPurchases(a){this.log.debug("onSetPurchases: "+JSON.stringify(a)),this.onPurchasesUpdated(a),this.context.listener.receiptsReady(n.Platform.GOOGLE_PLAY)}onPriceChangeConfirmationResult(a){}getPurchases(){return new Promise(a=>{this.log.debug("getPurchases");const l=()=>{this.log.debug("getPurchases success"),setTimeout(()=>a(void 0),0)},c=(d,u)=>{this.log.warn("getPurchases failed: "+d+" ("+u+")"),setTimeout(()=>a(r(u||n.ErrorCode.UNKNOWN,d,null)),0)};this.bridge.getPurchases(l,c)})}order(a,l){return St(this,void 0,void 0,function*(){return new Promise(c=>{this.log.info("Order - "+JSON.stringify(a));const d=()=>c(void 0),u=(h,f)=>{this.log.warn("Order failed: "+JSON.stringify({message:h,code:f})),c(r(f!=null?f:n.ErrorCode.UNKNOWN,h,a.productId))};if(a.productType===n.ProductType.PAID_SUBSCRIPTION){const h="token"in a?a.productId+"@"+a.token:a.productId,f=this.findOldPurchaseToken(a.productId,a.productGroup);f&&(l.googlePlay?l.googlePlay.oldPurchaseToken||(l.googlePlay.oldPurchaseToken=f):l.googlePlay={oldPurchaseToken:f}),this.bridge.subscribe(d,u,h,l)}else this.bridge.buy(d,u,a.productId,l)})})}findOldPurchaseToken(a,l){if(!l)return;const c=this._receipts.find(d=>!!d.transactions.find(u=>!!u.products.find(h=>{const f=this._products.getProduct(h.id);return!f||!n.Internal.LocalReceipts.isOwned([d],f)?!1:h.id===a||l&&f.group===l})));return c==null?void 0:c.purchaseToken}receiptValidationBody(a){var l;return St(this,void 0,void 0,function*(){const c=a.transactions[0];if(!c)return;const d=(l=c.products[0])===null||l===void 0?void 0:l.id;if(!d)return;const u=this._products.getProduct(d);if(!u)return;const h=c.nativePurchase;return{id:d,type:u.type,offers:u.offers,products:this._products.products,transaction:{type:n.Platform.GOOGLE_PLAY,id:a.transactions[0].transactionId,purchaseToken:h.purchaseToken,signature:h.signature,receipt:h.receipt}}})}handleReceiptValidationResponse(a,l){var c;return St(this,void 0,void 0,function*(){if(l!=null&&l.ok){const d=(c=l==null?void 0:l.data)===null||c===void 0?void 0:c.transaction;if((d==null?void 0:d.type)!==n.Platform.GOOGLE_PLAY)return;switch(d.kind){}}})}requestPayment(a,l){return St(this,void 0,void 0,function*(){return r(n.ErrorCode.UNKNOWN,"requestPayment not supported",null)})}manageSubscriptions(){return St(this,void 0,void 0,function*(){this.bridge.manageSubscriptions()})}manageBilling(){return St(this,void 0,void 0,function*(){this.bridge.manageBilling()})}checkSupport(a){return["order","manageBilling","manageSubscriptions"].indexOf(a)>=0}restorePurchases(){return new Promise(a=>{this.bridge.getPurchases(()=>a(void 0),(l,c)=>{this.log.warn("getPurchases() failed: "+(c!=null?c:"ERROR")+": "+l),a(r(c!=null?c:n.ErrorCode.UNKNOWN,l,null))})})}}s.trimProductTitles=!0,e.Adapter=s;function r(o,a,l){return n.storeError(o,a,n.Platform.GOOGLE_PLAY,l)}})(n.GooglePlay||(n.GooglePlay={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i.FINITE_RECURRING="FINITE_RECURRING",i.INFINITE_RECURRING="INFINITE_RECURRING",i.NON_RECURRING="NON_RECURRING"})(t.RecurrenceMode||(t.RecurrenceMode={}))})(e.Bridge||(e.Bridge={}))})(n.GooglePlay||(n.GooglePlay={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){t.IMMEDIATE_WITH_TIME_PRORATION="IMMEDIATE_WITH_TIME_PRORATION",t.IMMEDIATE_AND_CHARGE_PRORATED_PRICE="IMMEDIATE_AND_CHARGE_PRORATED_PRICE",t.IMMEDIATE_WITHOUT_PRORATION="IMMEDIATE_WITHOUT_PRORATION",t.DEFERRED="DEFERRED",t.IMMEDIATE_AND_CHARGE_FULL_PRICE="IMMEDIATE_AND_CHARGE_FULL_PRICE"})(e.ProrationMode||(e.ProrationMode={})),function(t){t.WITH_TIME_PRORATION="IMMEDIATE_WITH_TIME_PRORATION",t.CHARGE_PRORATED_PRICE="IMMEDIATE_AND_CHARGE_PRORATED_PRICE",t.WITHOUT_PRORATION="IMMEDIATE_WITHOUT_PRORATION",t.DEFERRED="DEFERRED",t.CHARGE_FULL_PRICE="IMMEDIATE_AND_CHARGE_FULL_PRICE"}(e.ReplacementMode||(e.ReplacementMode={})),function(t){let i=function(c){console.log("InAppBilling[js]: "+c)};(function(l){l[l.UNSPECIFIED_STATE=0]="UNSPECIFIED_STATE",l[l.PURCHASED=1]="PURCHASED",l[l.PENDING=2]="PENDING"})(t.PurchaseState||(t.PurchaseState={}));class s{constructor(){this.options={}}init(c,d,u){u||(u={}),u.log&&(i=u.log),this.options={showLog:u.showLog!==!1,onPurchaseConsumed:u.onPurchaseConsumed,onPurchasesUpdated:u.onPurchasesUpdated,onSetPurchases:u.onSetPurchases},this.options.showLog&&i("setup ok");const h=this.listener.bind(this);window.cordova.exec(h,function(f){},"InAppBillingPlugin","setListener",[]),window.cordova.exec(c,r(d),"InAppBillingPlugin","init",[])}load(c,d,u,h,f){if(typeof u<"u"&&(typeof u=="string"&&(u=[u]),u.length>0)){if(typeof u[0]!="string"){var m="invalid productIds: "+JSON.stringify(u);this.options.showLog&&i(m),d(m,n.ErrorCode.INVALID_PRODUCT_ID);return}this.options.showLog&&i("load "+JSON.stringify(u))}window.cordova.exec(c,r(d),"InAppBillingPlugin","load",[u,h,f])}listener(c){this.options.showLog&&i("listener: "+JSON.stringify(c)),!(!c||!c.type)&&(c.type==="setPurchases"&&this.options.onSetPurchases&&this.options.onSetPurchases(c.data.purchases),c.type==="purchasesUpdated"&&this.options.onPurchasesUpdated&&this.options.onPurchasesUpdated(c.data.purchases),c.type==="purchaseConsumed"&&this.options.onPurchaseConsumed&&this.options.onPurchaseConsumed(c.data.purchase),c.type==="onPriceChangeConfirmationResultOK"&&this.options.onPriceChangeConfirmationResult&&this.options.onPriceChangeConfirmationResult("OK"),c.type==="onPriceChangeConfirmationResultUserCanceled"&&this.options.onPriceChangeConfirmationResult&&this.options.onPriceChangeConfirmationResult("UserCanceled"),c.type==="onPriceChangeConfirmationResultUnknownSku"&&this.options.onPriceChangeConfirmationResult&&this.options.onPriceChangeConfirmationResult("UnknownProduct"))}getPurchases(c,d){return this.options.showLog&&i("getPurchases()"),window.cordova.exec(c,r(d),"InAppBillingPlugin","getPurchases",["null"])}buy(c,d,u,h){return this.options.showLog&&i("buy()"),window.cordova.exec(c,r(d),"InAppBillingPlugin","buy",[u,a(h)])}subscribe(c,d,u,h){var f;return this.options.showLog&&i("subscribe()"),!((f=h.googlePlay)===null||f===void 0)&&f.oldPurchaseToken&&this.options.showLog&&i("subscribe() -> upgrading from an old purchase"),window.cordova.exec(c,r(d),"InAppBillingPlugin","subscribe",[u,a(h)])}consumePurchase(c,d,u){return this.options.showLog&&i("consumePurchase()"),window.cordova.exec(c,r(d),"InAppBillingPlugin","consumePurchase",[u])}acknowledgePurchase(c,d,u){return this.options.showLog&&i("acknowledgePurchase()"),window.cordova.exec(c,r(d),"InAppBillingPlugin","acknowledgePurchase",[u])}getAvailableProducts(c,d,u,h){return this.options.showLog&&i("getAvailableProducts()"),window.cordova.exec(u,r(h),"InAppBillingPlugin","getAvailableProducts",[c,d])}manageSubscriptions(){return window.cordova.exec(function(){},function(){},"InAppBillingPlugin","manageSubscriptions",[])}manageBilling(){return window.cordova.exec(function(){},function(){},"InAppBillingPlugin","manageBilling",[])}launchPriceChangeConfirmationFlow(c){return window.cordova.exec(function(){},function(){},"InAppBillingPlugin","launchPriceChangeConfirmationFlow",[c])}}t.Bridge=s;function r(l){return function(c){if(!l)return;const d=typeof c=="string"?c.split("|"):[];if(d.length>1&&/^[-+]?(\d+)$/.test(d[0])){var u=d[0],h=d[1];l(h,+u)}else l(c)}}function o(l){return l&&l.constructor===Object?l:{}}function a(l){const c=o(l==null?void 0:l.googlePlay);return!c.accountId&&(l!=null&&l.applicationUsername)&&(c.accountId=n.Utils.md5(l.applicationUsername)),c}}(e.Bridge||(e.Bridge={}))})(n.GooglePlay||(n.GooglePlay={}))})($e||($e={}));var $e;(function(n){(function(e){class t extends n.Product{}e.GProduct=t;class i extends n.Offer{constructor(){super(...arguments),this.type="inapp"}}e.InAppOffer=i;class s extends n.Offer{constructor(a,l){super(a,l),this.type="subs",this.tags=a.tags,this.token=a.token}}e.SubscriptionOffer=s;class r{constructor(a){this.products=[],this.offers=[],this.decorator=a}getProduct(a){return this.products.find(l=>l.id===a)}getOffer(a){return this.offers.find(l=>l.id===a)}addProduct(a,l){const c=this.getProduct(a.id),d=c!=null?c:new t(a,this.decorator);return d.title=l.title||l.name||d.title,e.Adapter.trimProductTitles&&(d.title=d.title.replace(/ \(.*\)$/,"")),d.description=l.description||d.description,"product_format"in l&&l.product_format==="v12.0"?l.product_type==="subs"?this.onSubsV12Loaded(d,l):this.onInAppLoaded(d,l):this.onInAppLoaded(d,l),c||this.products.push(d),d}onSubsV12Loaded(a,l){l.offers.forEach(d=>{const u=d.pricing_phases.slice(-1)[0];if((u==null?void 0:u.recurrence_mode)===n.RecurrenceMode.FINITE_RECURRING){const f=c(d.base_plan_id);f&&f!==d&&d.pricing_phases.push(...f.pricing_phases)}const h=this.iabSubsOfferV12Loaded(a,l,d);a.addOffer(h)});function c(d){if(!d)return null;for(const u of l.offers)if(u.base_plan_id===d&&!u.offer_id)return u;return null}return a}makeOfferId(a,l){return l.base_plan_id?l.offer_id?a+"@"+l.base_plan_id+"@"+l.offer_id:a+"@"+l.base_plan_id:a+"@"+l.token}iabSubsOfferV12Loaded(a,l,c){const d=this.makeOfferId(l.productId,c),u=this.getOffer(d),h=c.pricing_phases.map(f=>this.toPricingPhase(f));if(u)return u.pricingPhases=h,u;{const f=new s({id:d,product:a,pricingPhases:h,token:c.token,tags:c.tags},this.decorator);return this.offers.push(f),f}}onInAppLoaded(a,l){var c,d,u,h;const f=this.getOffer(l.productId),m=[{price:(d=(c=l.formatted_price)!==null&&c!==void 0?c:l.price)!==null&&d!==void 0?d:"".concat(((u=l.price_amount_micros)!==null&&u!==void 0?u:0)/1e6," ").concat(l.price_currency_code),priceMicros:(h=l.price_amount_micros)!==null&&h!==void 0?h:0,currency:l.price_currency_code,recurrenceMode:n.RecurrenceMode.NON_RECURRING}];if(f)f.pricingPhases=m,a.offers=[f];else{const g=new i({id:l.productId,product:a,pricingPhases:m},this.decorator);this.offers.push(g),a.offers=[g]}return a}toPaymentMode(a){return a.price_amount_micros===0?n.PaymentMode.FREE_TRIAL:a.recurrence_mode===e.Bridge.RecurrenceMode.NON_RECURRING?n.PaymentMode.UP_FRONT:n.PaymentMode.PAY_AS_YOU_GO}toRecurrenceMode(a){switch(a){case e.Bridge.RecurrenceMode.FINITE_RECURRING:return n.RecurrenceMode.FINITE_RECURRING;case e.Bridge.RecurrenceMode.INFINITE_RECURRING:return n.RecurrenceMode.INFINITE_RECURRING;case e.Bridge.RecurrenceMode.NON_RECURRING:return n.RecurrenceMode.NON_RECURRING}}toPricingPhase(a){return{price:a.formatted_price,priceMicros:a.price_amount_micros,currency:a.price_currency_code,billingPeriod:a.billing_period,billingCycles:a.billing_cycle_count,recurrenceMode:this.toRecurrenceMode(a.recurrence_mode),paymentMode:this.toPaymentMode(a)}}}e.Products=r})(n.GooglePlay||(n.GooglePlay={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){(function(i){i.SUBSCRIPTION_NO_LONGER_AVAILABLE="subscriptionPurchaseNoLongerAvailable",i.PURCHASE_TOKEN_NO_LONGER_VALID="purchaseTokenNoLongerValid"})(t.GoogleErrorReason||(t.GoogleErrorReason={})),function(i){i[i.GONE=410]="GONE"}(t.ErrorCode||(t.ErrorCode={}))})(e.PublisherAPI||(e.PublisherAPI={}))})(n.GooglePlay||(n.GooglePlay={}))})($e||($e={}));var $e;(function(n){(function(e){const t=n.Platform.TEST;let i=[];function s(a){a.products.forEach(l=>{var c,d,u,h;const f=i.find(g=>l.id===g.id),m={id:l.id,purchaseDate:(c=a.purchaseDate)===null||c===void 0?void 0:c.getTime(),expiryDate:(d=a.expirationDate)===null||d===void 0?void 0:d.getTime(),lastRenewalDate:(u=a.lastRenewalDate)===null||u===void 0?void 0:u.getTime(),renewalIntent:a.renewalIntent,renewalIntentChangeDate:(h=a.renewalIntentChangeDate)===null||h===void 0?void 0:h.getTime()};f?Object.assign(f,m):i.push(m)})}class r{constructor(l){this.id=n.Platform.TEST,this.name="Test",this.ready=!1,this.products=[],this.receipts=[],this.supportsParallelLoading=!0,this.context=l,this.log=l.log.child("Test")}get isSupported(){return!0}initialize(){return St(this,void 0,void 0,function*(){})}loadReceipts(){return St(this,void 0,void 0,function*(){return new Promise(l=>{setTimeout(()=>{this.context.listener.receiptsReady(n.Platform.TEST),l(this.receipts)},600)})})}loadProducts(l){return St(this,void 0,void 0,function*(){return l.map(c=>{if(!e.testProductsArray.find(h=>h.id===c.id&&h.type===c.type))return o(n.ErrorCode.PRODUCT_NOT_AVAILABLE,"This product is not available",c.id);const d=this.products.find(h=>h.id===c.id);if(d)return d;c.id===e.testProducts.PAID_SUBSCRIPTION_ACTIVE.id&&setTimeout(()=>{this.reportActiveSubscription()},500);const u=e.initTestProduct(c.id,this.context.apiDecorators);return u?(this.products.push(u),this.context.listener.productsUpdated(n.Platform.TEST,[u]),u):o(n.ErrorCode.PRODUCT_NOT_AVAILABLE,"Could not load this product",c.id)})})}order(l){return St(this,void 0,void 0,function*(){if(l.id.indexOf("-fail-")>0)return o(n.ErrorCode.PURCHASE,"Purchase failed.",l.productId);const c=this.products.find(f=>f.id===l.productId);if(!n.Internal.LocalReceipts.canPurchase(this.receipts,c))return o(n.ErrorCode.PURCHASE,"Product already owned",l.productId);const d=prompt("Do you want to purchase ".concat(l.productId," for ").concat(l.pricingPhases[0].price,'?\nEnter "Y" to confirm.\nEnter "E" to fail with an error.Anything else to cancel.'));if((d==null?void 0:d.toUpperCase())==="E")return o(n.ErrorCode.PURCHASE,"Purchase failed",l.productId);if((d==null?void 0:d.toUpperCase())!=="Y")return o(n.ErrorCode.PAYMENT_CANCELLED,"Purchase flow has been cancelled by the user",l.productId);const u=new n.Receipt(t,this.context.apiDecorators),h=new n.Transaction(t,u,this.context.apiDecorators);u.transactions=[h],h.products=[{id:l.productId,offerId:l.id}],h.state=n.TransactionState.APPROVED,h.purchaseDate=new Date,h.transactionId=l.productId+"-"+new Date().getTime(),h.isAcknowledged=!1,l.productType===n.ProductType.PAID_SUBSCRIPTION&&(h.expirationDate=new Date(+new Date+6048e5),h.renewalIntent=n.RenewalIntent.RENEW),s(h),this.receipts.push(u),this.context.listener.receiptsUpdated(n.Platform.TEST,[u])})}finish(l){return new Promise(c=>{setTimeout(()=>{l.state=n.TransactionState.FINISHED,l.isAcknowledged=!0,s(l);const d=this.products.find(h=>l.products[0].id===h.id);(d==null?void 0:d.type)===n.ProductType.CONSUMABLE&&(l.isConsumed=!0);const u=this.receipts.filter(h=>h.hasTransaction(l));this.context.listener.receiptsUpdated(t,u),c(void 0)},500)})}receiptValidationBody(l){return St(this,void 0,void 0,function*(){})}handleReceiptValidationResponse(l,c){return St(this,void 0,void 0,function*(){})}requestPayment(l,c){var d;return St(this,void 0,void 0,function*(){yield n.Utils.asyncDelay(100);const u=prompt("Mock payment of ".concat(((d=l.amountMicros)!==null&&d!==void 0?d:0)/1e6," ").concat(l.currency,'. Enter "Y" to confirm. Enter "E" to trigger an error.'));if((u==null?void 0:u.toUpperCase())==="E")return o(n.ErrorCode.PAYMENT_NOT_ALLOWED,"Payment not allowed",null);if((u==null?void 0:u.toUpperCase())!=="Y")return;const h=new n.Receipt(t,this.context.apiDecorators),f=new n.Transaction(n.Platform.TEST,h,this.context.apiDecorators);return f.purchaseDate=new Date,f.products=l.items.filter(m=>m).map(m=>({id:(m==null?void 0:m.id)||""})),f.state=n.TransactionState.APPROVED,f.transactionId="payment-"+new Date().getTime(),f.amountMicros=l.amountMicros,f.currency=l.currency,h.transactions=[f],this.receipts.push(h),setTimeout(()=>{this.context.listener.receiptsUpdated(t,[h])},400),f})}manageSubscriptions(){return St(this,void 0,void 0,function*(){alert("Pseudo subscription management interface. Close it when you are done.")})}manageBilling(){return St(this,void 0,void 0,function*(){alert("Pseudo billing management interface. Close it when you are done.")})}reportActiveSubscription(){if(this.receipts.find(f=>f.transactions[0].transactionId===u(1)))return;const l=2*6e4,c=new n.Receipt(t,this.context.apiDecorators),d=f=>{var m,g;const b=new n.Transaction(t,c,this.context.apiDecorators);b.products=[{id:e.testProducts.PAID_SUBSCRIPTION_ACTIVE.id,offerId:e.testProducts.PAID_SUBSCRIPTION_ACTIVE.extra.offerId}],b.state=n.TransactionState.APPROVED,b.transactionId=u(f),b.isAcknowledged=f==1,b.renewalIntent=n.RenewalIntent.RENEW;const w=+(((g=(m=c==null?void 0:c.transactions)===null||m===void 0?void 0:m[0])===null||g===void 0?void 0:g.purchaseDate)||new Date);return b.purchaseDate=new Date(w),b.lastRenewalDate=new Date(w+l*(f-1)),b.expirationDate=new Date(w+l*f),s(b),b};c.transactions.push(d(1)),this.receipts.push(c),this.context.listener.receiptsUpdated(n.Platform.TEST,[c]);function u(f){return"test-active-subscription-transaction-"+f}let h=1;setInterval(()=>{this.log.info("auto-renewing the mock subscription"),h+=1,c.transactions.push(d(h)),this.context.listener.receiptsUpdated(n.Platform.TEST,[c])},l)}static verify(l,c){setTimeout(()=>{var d,u;c({receipt:l,payload:{ok:!0,data:{id:(u=(d=l.transactions[0])===null||d===void 0?void 0:d.products[0])===null||u===void 0?void 0:u.id,latest_receipt:!0,transaction:{type:"test"},collection:i}}})},500)}checkSupport(l){return!0}restorePurchases(){return St(this,void 0,void 0,function*(){})}}e.Adapter=r;function o(a,l,c){return n.storeError(a,l,n.Platform.TEST,c)}})(n.Test||(n.Test={}))})($e||($e={}));var $e;(function(n){(function(e){const t=n.Platform.TEST;e.testProducts={CONSUMABLE:{platform:t,id:"test-consumable",type:n.ProductType.CONSUMABLE},CONSUMABLE_FAILING:{platform:t,id:"test-consumable-fail",type:n.ProductType.CONSUMABLE},NON_CONSUMABLE:{platform:t,id:"test-non-consumable",type:n.ProductType.NON_CONSUMABLE},PAID_SUBSCRIPTION:{platform:t,id:"test-subscription",type:n.ProductType.PAID_SUBSCRIPTION},PAID_SUBSCRIPTION_ACTIVE:{platform:t,id:"test-subscription-active",type:n.ProductType.PAID_SUBSCRIPTION,extra:{offerId:"test-paid-subscription-active-offer1"}}},e.testProductsArray=n.Utils.objectValues(e.testProducts);function i(s,r){const o=Object.keys(e.testProducts).find(l=>e.testProducts[l]&&e.testProducts[l].id===s);if(!o)return;const a=new n.Product(e.testProducts[o],r);switch(o){case"CONSUMABLE":a.title="Test Consumable",a.description="A consumable product that you can purchase",a.addOffer(new n.Offer({id:"test-consumable-offer1",pricingPhases:[{price:"$4.99",currency:"USD",priceMicros:499e4,paymentMode:n.PaymentMode.UP_FRONT,recurrenceMode:n.RecurrenceMode.NON_RECURRING}],product:a},r));break;case"CONSUMABLE_FAILING":a.title="Failing Consumable",a.description="A consumable product that cannot be purchased",a.addOffer(new n.Offer({id:"test-consumable-fail-offer1",pricingPhases:[{price:"$1.99",currency:"USD",priceMicros:199e4,paymentMode:n.PaymentMode.UP_FRONT,recurrenceMode:n.RecurrenceMode.NON_RECURRING}],product:a},r));break;case"NON_CONSUMABLE":a.title="Non Consumable",a.description="A non consumable product",a.addOffer(new n.Offer({id:"test-non-consumable-offer1",pricingPhases:[{price:"$9.99",currency:"USD",priceMicros:999e4,paymentMode:n.PaymentMode.UP_FRONT,recurrenceMode:n.RecurrenceMode.NON_RECURRING}],product:a},r));break;case"PAID_SUBSCRIPTION":a.title="A subscription product",a.description="An auto-renewing paid subscription with a trial period",a.addOffer(new n.Offer({id:"test-paid-subscription-offer1",product:a,pricingPhases:[{price:"$0.00",currency:"USD",priceMicros:0,paymentMode:n.PaymentMode.FREE_TRIAL,recurrenceMode:n.RecurrenceMode.FINITE_RECURRING,billingCycles:3,billingPeriod:"P1W"},{price:"$4.99",currency:"USD",priceMicros:499e4,paymentMode:n.PaymentMode.PAY_AS_YOU_GO,recurrenceMode:n.RecurrenceMode.INFINITE_RECURRING,billingPeriod:"P1M"}]},r));break;case"PAID_SUBSCRIPTION_ACTIVE":a.title="An owned subscription product",a.description="An active paid subscription",a.addOffer(new n.Offer({id:e.testProducts.PAID_SUBSCRIPTION_ACTIVE.extra.offerId,product:a,pricingPhases:[{price:"$19.99",currency:"USD",priceMicros:1999e4,paymentMode:n.PaymentMode.PAY_AS_YOU_GO,recurrenceMode:n.RecurrenceMode.INFINITE_RECURRING,billingPeriod:"P1Y"}]},r));break;default:const l=o;throw new Error("Unhandled enum case: ".concat(l))}return a}e.initTestProduct=i})(n.Test||(n.Test={}))})($e||($e={}));var $e;(function(n){(function(e){class t{constructor(){this.id=n.Platform.WINDOWS_STORE,this.name="WindowsStore",this.ready=!1,this.supportsParallelLoading=!1,this.products=[],this.receipts=[]}initialize(){return St(this,void 0,void 0,function*(){})}get isSupported(){return!1}loadProducts(r){return St(this,void 0,void 0,function*(){return r.map(o=>i(n.ErrorCode.PRODUCT_NOT_AVAILABLE,"TODO",o.id))})}loadReceipts(){return St(this,void 0,void 0,function*(){return[]})}order(r){return St(this,void 0,void 0,function*(){return i(n.ErrorCode.UNKNOWN,"TODO: Not implemented",r.productId)})}finish(r){return St(this,void 0,void 0,function*(){return i(n.ErrorCode.UNKNOWN,"TODO: Not implemented",null)})}handleReceiptValidationResponse(r,o){return St(this,void 0,void 0,function*(){})}receiptValidationBody(r){return St(this,void 0,void 0,function*(){})}requestPayment(r,o){return St(this,void 0,void 0,function*(){return i(n.ErrorCode.UNKNOWN,"requestPayment not supported",null)})}manageSubscriptions(){return St(this,void 0,void 0,function*(){return i(n.ErrorCode.UNKNOWN,"manageSubscriptions not supported",null)})}manageBilling(){return St(this,void 0,void 0,function*(){return i(n.ErrorCode.UNKNOWN,"manageBilling not supported",null)})}checkSupport(r){return!1}restorePurchases(){return St(this,void 0,void 0,function*(){})}}e.Adapter=t;function i(s,r,o){return n.storeError(s,r,n.Platform.WINDOWS_STORE,o)}})(n.WindowsStore||(n.WindowsStore={}))})($e||($e={}));var $e;(function(n){(function(e){let t;(function(r){r.HTTP_REQUEST_TIMEOUT=408})(t=e.Ajax||(e.Ajax={}));function i(r,o){if(typeof window<"u"&&window.cordova&&window.cordova.plugin&&window.cordova.plugin.http)return s(r,o);var a=function(){},l=new XMLHttpRequest;o.timeout&&(l.timeout=o.timeout,l.ontimeout=function(){r.warn("ajax -> request to "+o.url+" timeout"),e.callExternal(r,"ajax.error",o.error,t.HTTP_REQUEST_TIMEOUT,"Timeout")}),l.open(o.method||"POST",o.url,!0),l.onreadystatechange=function(){try{l.readyState===4&&(l.status===200?e.callExternal(r,"ajax.success",o.success,JSON.parse(l.responseText)):(r.warn("ajax -> request to "+o.url+" failed with status "+l.status+" ("+l.statusText+")"),e.callExternal(r,"ajax.error",o.error,l.status,l.statusText)))}catch(d){r.warn("ajax -> request to "+o.url+" failed with an exception: "+d.message),o.error&&o.error(417,d.message,null)}l.readyState===4&&e.callExternal(r,"ajax.done",a)};const c=o.customHeaders;return c&&Object.keys(c).forEach(function(d){r.debug("ajax -> adding custom header: "+d),l.setRequestHeader(d,c[d])}),l.setRequestHeader("Accept","application/json"),r.debug("ajax -> send request to "+o.url),o.data?(l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.send(JSON.stringify(o.data))):l.send(),{done:function(d){return a=d,this}}}e.ajax=i;function s(r,o){let a=function(){};const l={method:(o.method||"get").toLowerCase(),data:o.data,serializer:"json"};o.customHeaders&&(r.debug("ajax[http] -> adding custom headers: "+JSON.stringify(o.customHeaders)),l.headers=o.customHeaders),r.debug("ajax[http] -> send request to "+o.url);const c=d=>{try{d.status==200?e.callExternal(r,"ajax.success",o.success,JSON.parse(d.data)):(r.warn("ajax[http] -> request to "+o.url+" failed with status "+d.status+" ("+d.error+")"),e.callExternal(r,"ajax.error",o.error,d.status,d.error))}catch(u){r.warn("ajax[http] -> request to "+o.url+" failed with an exception: "+u.message),o.error&&e.callExternal(r,"ajax.error",o.error,417,u.message)}e.callExternal(r,"ajax.done",a)};return window.cordova.plugin.http.sendRequest(o.url,l,c,c),{done:function(d){return a=d,this}}}})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(i,s,r,...o){try{const a=Array.prototype.slice.call(arguments,3);r&&r.apply(n.store,a)}catch(a){i.logCallbackException(s,a)}}e.callExternal=t})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(o,a){return setTimeout(o,a)}e.delay=t;function i(o,a){return s(o,a).call}e.debounce=i;function s(o,a){let l=null,c=[];const d=function(h,f){const m=c;c=[],l=null,o(),m.forEach(g=>g())};return{call:function(){l&&window.clearTimeout(l),l=setTimeout(d,a)},wait:()=>new Promise(h=>{l?c.push(h):h()})}}e.createDebouncer=s;function r(o){return new Promise(a=>setTimeout(a,o))}e.asyncDelay=r})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(s){switch(i(s)){case n.RecurrenceMode.FINITE_RECURRING:return"".concat(s.billingCycles,"x ").concat(e.formatDurationEN(s.billingPeriod));case n.RecurrenceMode.NON_RECURRING:return"for "+e.formatDurationEN(s.billingPeriod);default:return"every "+e.formatDurationEN(s.billingPeriod,{omitOne:!0})}}e.formatBillingCycleEN=t;function i(s){var r;const o=(r=s.billingCycles)!==null&&r!==void 0?r:0;if(s.recurrenceMode===n.RecurrenceMode.FINITE_RECURRING){if(o==1)return n.RecurrenceMode.NON_RECURRING;if(o<=0)return n.RecurrenceMode.INFINITE_RECURRING}return s.recurrenceMode}})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(i,s){if(!i)return"";const r=i.length,o=i.slice(1,r-1);if(o==="1")return s!=null&&s.omitOne?{D:"day",W:"week",M:"month",Y:"year"}[i[r-1]]||i[r-1]:{D:"1 day",W:"1 week",M:"1 month",Y:"1 year"}[i[r-1]]||i[r-1];{const a={D:"days",W:"weeks",M:"months",Y:"years"}[i[r-1]]||i[r-1];return"".concat(o," ").concat(a)}}e.formatDurationEN=t})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){const t="0123456789abcdef".split("");function i(g){for(var b="",w=0;w<4;w++)b+=t[g>>8*w+4&15]+t[g>>8*w&15];return b}function s(g){const b=[];for(var w=g.length,x=0;x<w;x++)b.push(i(g[x]));return b.join("")}function r(g,b){return g+b&4294967295}function o(g,b,w,x,k,E,T){function P(A,R,M){return r(A<<R|A>>>32-R,M)}function C(A,R,M,N){return r(r(R,A),r(M,N))}return P(C(g,b,x,E),k,w)}var a=function(g,b,w,x,k,E,T,P){return o(w&x|~w&k,b,w,E,T,P)},l=function(g,b,w,x,k,E,T,P){return o(w&k|x&~k,b,w,E,T,P)},c=function(g,b,w,x,k,E,T,P){return o(w^x^k,b,w,E,T,P)},d=function(g,b,w,x,k,E,T,P){return o(x^(w|~k),b,w,E,T,P)};function u(g,b,w){w||(w=r);let x=g[0],k=g[1],E=g[2],T=g[3];var P=a.bind(null,w);x=P(x,k,E,T,b[0],7,-680876936),T=P(T,x,k,E,b[1],12,-389564586),E=P(E,T,x,k,b[2],17,606105819),k=P(k,E,T,x,b[3],22,-1044525330),x=P(x,k,E,T,b[4],7,-176418897),T=P(T,x,k,E,b[5],12,1200080426),E=P(E,T,x,k,b[6],17,-1473231341),k=P(k,E,T,x,b[7],22,-45705983),x=P(x,k,E,T,b[8],7,1770035416),T=P(T,x,k,E,b[9],12,-1958414417),E=P(E,T,x,k,b[10],17,-42063),k=P(k,E,T,x,b[11],22,-1990404162),x=P(x,k,E,T,b[12],7,1804603682),T=P(T,x,k,E,b[13],12,-40341101),E=P(E,T,x,k,b[14],17,-1502002290),k=P(k,E,T,x,b[15],22,1236535329);var C=l.bind(null,w);x=C(x,k,E,T,b[1],5,-165796510),T=C(T,x,k,E,b[6],9,-1069501632),E=C(E,T,x,k,b[11],14,643717713),k=C(k,E,T,x,b[0],20,-373897302),x=C(x,k,E,T,b[5],5,-701558691),T=C(T,x,k,E,b[10],9,38016083),E=C(E,T,x,k,b[15],14,-660478335),k=C(k,E,T,x,b[4],20,-405537848),x=C(x,k,E,T,b[9],5,568446438),T=C(T,x,k,E,b[14],9,-1019803690),E=C(E,T,x,k,b[3],14,-187363961),k=C(k,E,T,x,b[8],20,1163531501),x=C(x,k,E,T,b[13],5,-1444681467),T=C(T,x,k,E,b[2],9,-51403784),E=C(E,T,x,k,b[7],14,1735328473),k=C(k,E,T,x,b[12],20,-1926607734);var A=c.bind(null,w);x=A(x,k,E,T,b[5],4,-378558),T=A(T,x,k,E,b[8],11,-2022574463),E=A(E,T,x,k,b[11],16,1839030562),k=A(k,E,T,x,b[14],23,-35309556),x=A(x,k,E,T,b[1],4,-1530992060),T=A(T,x,k,E,b[4],11,1272893353),E=A(E,T,x,k,b[7],16,-155497632),k=A(k,E,T,x,b[10],23,-1094730640),x=A(x,k,E,T,b[13],4,681279174),T=A(T,x,k,E,b[0],11,-358537222),E=A(E,T,x,k,b[3],16,-722521979),k=A(k,E,T,x,b[6],23,76029189),x=A(x,k,E,T,b[9],4,-640364487),T=A(T,x,k,E,b[12],11,-421815835),E=A(E,T,x,k,b[15],16,530742520),k=A(k,E,T,x,b[2],23,-995338651);var R=d.bind(null,w);x=R(x,k,E,T,b[0],6,-198630844),T=R(T,x,k,E,b[7],10,1126891415),E=R(E,T,x,k,b[14],15,-1416354905),k=R(k,E,T,x,b[5],21,-57434055),x=R(x,k,E,T,b[12],6,1700485571),T=R(T,x,k,E,b[3],10,-1894986606),E=R(E,T,x,k,b[10],15,-1051523),k=R(k,E,T,x,b[1],21,-2054922799),x=R(x,k,E,T,b[8],6,1873313359),T=R(T,x,k,E,b[15],10,-30611744),E=R(E,T,x,k,b[6],15,-1560198380),k=R(k,E,T,x,b[13],21,1309151649),x=R(x,k,E,T,b[4],6,-145523070),T=R(T,x,k,E,b[11],10,-1120210379),E=R(E,T,x,k,b[2],15,718787259),k=R(k,E,T,x,b[9],21,-343485551),g[0]=w(x,g[0]),g[1]=w(k,g[1]),g[2]=w(E,g[2]),g[3]=w(T,g[3])}function h(g){for(var b=[],w=0;w<64;w+=4)b[w>>2]=g.charCodeAt(w)+(g.charCodeAt(w+1)<<8)+(g.charCodeAt(w+2)<<16)+(g.charCodeAt(w+3)<<24);return b}function f(g,b){let w;const x=g.length,k=[1732584193,-271733879,-1732584194,271733878];for(w=64;w<=x;w+=64)u(k,h(g.substring(w-64,w)),b);const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=(g=g.substring(w-64)).length;let P;for(P=0;P<T;P++)E[P>>2]|=g.charCodeAt(P)<<(P%4<<3);if(E[P>>2]|=128<<(P%4<<3),P>55)for(u(k,E,b),P=16;P--;)E[P]=0;return E[14]=8*x,u(k,E,b),k}function m(g){if(!g)return"";let b;return s(f("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(b=function(w,x){const k=(65535&w)+(65535&x);return(w>>16)+(x>>16)+(k>>16)<<16|65535&k}),s(f(g,b))}e.md5=m})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(){var i,s,r;return!((i=window.cordova)===null||i===void 0)&&i.platformId?(s=window.cordova)===null||s===void 0?void 0:s.platformId:!((r=window.Capacitor)===null||r===void 0)&&r.getPlatform?window.Capacitor.getPlatform():"web"}e.platformId=t})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(s,r,o,a,l){return function(c){i(s,r,o,c,a,l)}}e.safeCallback=t;function i(s,r,o,a,l,c){o&&(l||(l=o.name||"#"+e.md5(o.toString())),setTimeout(()=>{try{s.debug("Calling callback: type=".concat(r," name=").concat(l," reason=").concat(c)),o(a)}catch(d){s.error("Error in callback: type=".concat(r," name=").concat(l," reason=").concat(c)),s.debug(o.toString());const u=d;"message"in u&&s.error(u.message),"fileName"in d&&s.error("in "+d.fileName+":"+d.lineNumber),"stack"in u&&s.error(u.stack)}},0))}e.safeCall=i})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){function t(){return window.crypto||window.msCrypto}function i(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(s){return(s^t().getRandomValues(new Uint8Array(1))[0]&15>>s/4).toString(16)})}e.uuidv4=i})(n.Utils||(n.Utils={}))})($e||($e={}));var $e;(function(n){(function(e){(function(t){function i(a){return Object.prototype.toString.call(a)==="[object Array]"}function s(a){return Object.prototype.toString.call(a)==="[object Object]"}function r(a){return typeof a.validator_privacy_policy=="string"?a.validator_privacy_policy.split(","):i(a.validator_privacy_policy)?a.validator_privacy_policy:["analytics","support","fraud"]}function o(a){const l=r(a);function c(m){return l.indexOf(m)>=0}const d={plugin:"cordova-plugin-purchase/"+n.PLUGIN_VERSION},u=window,h=s(u.device)?u.device:{};if(c("analytics")||c("support")){const m=u.Ionic||u.ionic;m&&m.version&&(d.ionic=m.version),h.cordova&&(d.cordova=h.cordova),h.model&&(d.model=h.model),h.platform&&(d.platform=h.platform),h.version&&(d.version=h.version),h.manufacturer&&(d.manufacturer=h.manufacturer)}if(c("tracking")&&(h.serial&&(d.serial=h.serial),h.uuid&&(d.uuid=h.uuid)),h.isVirtual&&(d.isVirtual=h.isVirtual),c("fraud")){var f="";h.serial?f="serial:"+h.serial:h.uuid?f="uuid:"+h.uuid:(h.model&&(f+="/"+h.model),h.manufacturer&&(f="/"+h.manufacturer)),f&&(d.fingerprint=n.Utils.md5(f))}return d}t.getDeviceInfo=o})(e.Internal||(e.Internal={}))})(n.Validator||(n.Validator={}))})($e||($e={}));var $e;(function(n){(function(e){e.Request||(e.Request={})})(n.Validator||(n.Validator={}))})($e||($e={}));var $e;(function(n){class e{constructor(i,s,r){var o;this.className="VerifiedReceipt",this.id=s.id,this.sourceReceipt=i,this.collection=(o=s.collection)!==null&&o!==void 0?o:[],this.latestReceipt=s.latest_receipt,this.nativeTransactions=[s.transaction],this.warning=s.warning,this.validationDate=s.date?new Date(s.date):new Date,Object.defineProperty(this,"raw",{enumerable:!1,get(){return s}}),Object.defineProperty(this,"finish",{enumerable:!1,get(){return()=>r.finish(this)}})}get platform(){return this.sourceReceipt.platform}get raw(){return{}}set(i,s){var r;this.id=s.id,this.sourceReceipt=i,this.collection=(r=s.collection)!==null&&r!==void 0?r:[],this.latestReceipt=s.latest_receipt,this.nativeTransactions=[s.transaction],this.warning=s.warning}finish(){return St(this,void 0,void 0,function*(){})}}n.VerifiedReceipt=e})($e||($e={}));const rj=["expert149k","expert199k","expertpro3m","expertvip3m"],CGe=()=>{const n=[...rj],e=CdvPurchase.store,t=()=>{e.register(n.map(s=>({id:s,type:CdvPurchase.ProductType.CONSUMABLE,platform:CdvPurchase.Platform.APPLE_APPSTORE}))),e.initialize([{platform:CdvPurchase.Platform.APPLE_APPSTORE,options:{needAppReceipt:!0}}])},i=()=>{mi("ios")&&t()};on(()=>{i()})},SGe=["src"],AGe=Fe({__name:"HomeBottomTab",setup(n){const e=en(),{isLoggedIn:t,userInfo:i}=et(e),s=Sx(),{newNotificationCount:r}=et(s),o=Va(),{countNewMsg:a}=et(o);TGe(),CGe(),on(()=>{s.getCountUnreadAndNewNotification()}),ki([t],()=>{t.value&&s.getCountUnreadAndNewNotification()});const l=()=>{s.markAsReadAll()};return(c,d)=>(I(),ve(y(Dn),{class:"bg-white1"},{default:j(()=>[L(y(eme),{"menu-id":"sidemenu","content-id":"sidemenu",side:"end"},{default:j(()=>[L(kGe)]),_:1}),L(y(dme),null,{default:j(()=>[L(y(QN),{id:"sidemenu"}),L(y(ume),{slot:"bottom",class:"shadow-st"},{default:j(()=>[L(y(j1),{tab:"home",href:"/homebottomtab/hometab"},{default:j(()=>[L(y(fe),{class:"size-7","aria-hidden":"true",icon:y(Dbe)},null,8,["icon"])]),_:1}),L(y(j1),{tab:"chat",href:"/homebottomtab/chattab",onClick:y(o).resetCountNewMsg},{default:j(()=>[L(y(fe),{class:"size-7","aria-hidden":"true",icon:y(Ax)},null,8,["icon"]),Number(y(a))>0?(I(),ve(y(KR),{key:0,mode:"ios",class:"bg-[#f00]"},{default:j(()=>[be(Q(Number(y(a))>99?"99+":isNaN(Number(y(a)))?0:y(a)),1)]),_:1})):re("",!0)]),_:1},8,["onClick"]),L(y(j1),{tab:"notify",href:"/homebottomtab/notificationtab",onClick:l},{default:j(()=>[L(y(fe),{class:"size-7","aria-hidden":"true",icon:y(Wy)},null,8,["icon"]),Number(y(r))>0?(I(),ve(y(KR),{key:0,mode:"ios",class:"bg-red-500 text-white"},{default:j(()=>[be(Q(Number(y(r))>99?"99+":y(r)),1)]),_:1})):re("",!0)]),_:1}),L(y(j1),{tab:"account",href:"/homebottomtab/accounttab"},{default:j(()=>{var u,h,f,m;return[(u=y(i))!=null&&u.avatar||(h=y(i))!=null&&h.ggAvatar?(I(),O("img",{key:0,class:"size-8 rounded-full","aria-hidden":"true",src:((f=y(i))==null?void 0:f.avatar)||((m=y(i))==null?void 0:m.ggAvatar)||"/upload-user.png"},null,8,SGe)):(I(),ve(y(fe),{key:1,class:gt(y(mi)("ios")?"size-7":"size-8"),"aria-hidden":"true",icon:y(NA)},null,8,["class","icon"]))]}),_:1})]),_:1})]),_:1})]),_:1}))}}),IGe=Xi(AGe,[["__scopeId","data-v-2e4c2a95"]]),_w={TextBox:1,MultipleChoice:2};_w.TextBox+"",_w.MultipleChoice+"";const PGe={class:"px-4"},RGe={key:0,class:"mb-4"},$Ge={class:"font-medium"},LGe={key:1},OGe={class:"font-medium"},DGe=Fe({__name:"QAJoinModal",props:{data:{}},setup(n){const e=n,t=Yi({}),i=()=>qe.dismiss(null,"cancel"),s=()=>{var r;e!=null&&e.data&&(Object.keys(t).length<((r=e.data)==null?void 0:r.length)||!t)?tt("Vui lòng nhập câu trả lời khảo sát","warning"):qe.dismiss(t,"confirm")};return(r,o)=>(I(),O(Ue,null,[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{color:"white1",mode:"ios"},{default:j(()=>[L(y(fe),{slot:"end",onClick:i,icon:y(ks),class:"size-7 text-[#929292]"},null,8,["icon"])]),_:1})]),_:1}),L(y(At),{color:"white1"},{default:j(()=>[o[1]||(o[1]=_("div",{class:"text-center text-xl font-medium text-black2 pb-5"}," Trả lời câu hỏi để tham gia cộng đồng ",-1)),_("div",PGe,[(I(!0),O(Ue,null,ct(r.data,(a,l)=>(I(),O("div",{key:l},[a.type==y(_w).MultipleChoice?(I(),O("section",RGe,[_("div",$Ge,Q("Câu hỏi ".concat(l+1," : ").concat(a.question)),1),L(y(Tc),{modelValue:t[a.question],"onUpdate:modelValue":c=>t[a.question]=c},{default:j(()=>[(I(!0),O(Ue,null,ct(a.answer,(c,d)=>(I(),O("div",{key:d,class:"py-1"},[L(y(La),{mode:"md",value:c,"label-placement":"end",color:"blue1"},{default:j(()=>[L(y(Nd),null,{default:j(()=>[be(Q(c),1)]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):re("",!0),a.type==y(_w).TextBox?(I(),O("section",LGe,[_("div",OGe,Q("Câu hỏi ".concat(l+1," : ").concat(a.question)),1),L(y(Tn),{modelValue:t[a.question],"onUpdate:modelValue":c=>t[a.question]=c,mode:"md",fill:"outline",placeholder:"Nhập câu trả lời của bạn",class:"outline-none text-sm font-light mb-4 mt-2",label:"Nhập câu trả lời của bạn",type:"text","label-placement":"floating",color:"blue1"},null,8,["modelValue","onUpdate:modelValue"])])):re("",!0)]))),128)),L(y(ko),{color:"blue1",onClick:s,class:"mt-4 h-12 w-full text-sm uppercase text-center shadow-sm"},{default:j(()=>o[0]||(o[0]=[be(" Xác nhận ")])),_:1})])]),_:1})],64))}});var HC=(n=>(n[n.Private=0]="Private",n[n.Public=1]="Public",n))(HC||{});const oj={0:"Riêng tư",1:"Công khai"},MGe={class:"mt-4 pb-8 flex-1 w-full bg-white"},NGe=["src"],FGe={class:"px-4"},BGe={class:"overflow-x-scroll my-6 items-center flex gap-3 scrollbar-hidden"},VGe=["onClick"],UGe=["src"],zGe={class:"text-sm text-black2 font-medium"},HGe={class:"flex pb-5"},jGe={class:"flex-1 flex items-center gap-2"},GGe={class:"flex-1 flex items-center gap-2"},WGe={class:"flex"},qGe={class:"flex flex-1 items-center gap-2"},KGe={class:"flex flex-1 items-center gap-2"},YGe=["src"],XGe={class:"ion-padding mt-8 bg-white"},QGe=["src"],ZGe={class:"my-6"},JGe={class:"font-medium"},eWe={class:"text-base font-light text-black2"},tWe={class:"flex mb-6"},nWe={class:"text-center text-base font-normal text-black flex-1 border-r-[0.75px] border-t-[1.5px] border-b-[1.5px] border-gray3 py-3"},iWe={class:"font-semibold"},sWe={class:"text-center text-base font-normal text-black flex-1 border-l-[0.75px] border-t-[1.5px] border-b-[1.5px] border-gray3 py-3"},rWe={class:"font-semibold"},oWe={key:0},aWe={key:1},lWe={key:3},FO=Fe({__name:"TabAbout",setup(n){var R,M;const e=gn(),t=ln(),i=Li(),s=en(),r=Ba(),{community:o}=et(t),{isLoggedIn:a}=et(s),l="https://unica.expert",c=K((R=o.value)!=null&&R.slides?(M=o.value)==null?void 0:M.slides[0]:void 0),{userCommunity:d}=et(i),u=lt(()=>!d.value||!o.value||d.value.community_id===o.value._id&&!(d.value.status===ms.Joined||d.value.status===ms.Waiting)),h=lt(()=>{var N,U,G,B;return!u.value&&((N=d.value)==null?void 0:N.status)===ms.Joined&&(((U=d.value)==null?void 0:U.role)===Ei.Admin||((G=d.value)==null?void 0:G.user_id)===((B=o.value)==null?void 0:B.owner_id))}),f=lt(()=>{var N;return!u.value&&((N=d.value)==null?void 0:N.status)===ms.Joined});lt(()=>{var N,U,G;return d.value&&d.value.role===Ei.Member&&((N=o.value)!=null&&N.member_last_limit_package)?_t((U=o.value)==null?void 0:U.member_last_limit_package).isBefore((G=d.value)==null?void 0:G.created_at):!1});const m=lt(()=>{var N,U;if((N=o.value)!=null&&N.communityFee){const G=(U=o.value.communityFee)==null?void 0:U.price;return G==null?null:G>0?"THAM GIA VỚI ".concat(G.toLocaleString("vi-VN",{style:"currency",currency:"VND"}),"/THÁNG"):null}return null}),g=lt(()=>{var U,G;const N=((G=(U=o.value)==null?void 0:U.communityFee)==null?void 0:G.price)||0;return N>0?"".concat(N.toLocaleString("vi-VN",{currency:"VND"}),"đ/tháng"):"Miễn phí"}),b=N=>{setTimeout(()=>{N.target.complete()},2e3)},w=async()=>{var N;try{const{data:U}=await Qe.get("/community-utility/".concat((N=o.value)==null?void 0:N._id,"/survey"));return U}catch(U){console.log(U)}},x=async N=>{const U=await qe.create({component:DGe,componentProps:{data:N}});U.present();const{data:G,role:B}=await U.onWillDismiss();B==="confirm"&&E(G)},k=async()=>{var U;if(!a.value){e.push({name:"LoginScreen"}),r.setRouterCallback({goBack:!0});return}const N=await w();J.isEmpty(N==null?void 0:N.questions)?E():x((U=N==null?void 0:N.questions)!=null?U:[])},E=async N=>{var U,G,B,te,X;try{const ue=await Qe.post("/user-community",{community_id:(U=o.value)==null?void 0:U._id,survey_questions:N,current_frontend_url:l,ref:void 0});((ue==null?void 0:ue.status)===201||(ue==null?void 0:ue.status)===200)&&((G=ue==null?void 0:ue.data)!=null&&G.message)&&(i.setUserCommunity((B=ue==null?void 0:ue.data)==null?void 0:B.user_community),tt((X=(te=ue==null?void 0:ue.data)==null?void 0:te.message)!=null?X:"","warning"))}catch(ue){console.log(ue)}},T=async()=>{var U;const{status:N}=await Qe.patch("/user-community/".concat((U=d.value)==null?void 0:U._id,"/unsubscribe"));N===200&&(i.setUserCommunity(),tt("Đã huỷ yêu cầu tham gia cộng đồng","warning"))},P=N=>{c.value=N};tr(()=>{w()});const C=async N=>{await Xr.open({url:N})},A=N=>{N.target.src=""};return(N,U)=>(I(),ve(y(At),{class:"flex-col scrollbar-hidden",color:"white1"},{default:j(()=>{var G,B,te,X,ue,he,Ie,xe,Be,Pe,Ae,de,we,ze,le,Se,ne,ie,me,V,F,z,se,Te,ke,Ce,ge,He,Ge,mt,ut,xt,kt;return[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:b},{default:j(()=>[L(y(eo))]),_:1}),_("div",MGe,[_("div",null,[((G=c.value)==null?void 0:G.type)==="youtube"&&((B=c.value)!=null&&B.url)?(I(),O("div",{class:"aspect-video",key:c.value.id},[L(gw,{provider:"youtube",src:(X=c.value.embed_url)!=null?X:(te=c.value)==null?void 0:te.url,"can-rotate":!1},null,8,["src"])])):((ue=c.value)==null?void 0:ue.type)==="vimeo"&&((he=c.value)!=null&&he.url)?(I(),O("div",{class:"aspect-video bg-black content-center",key:c.value.id+"vimeo"},[L(gw,{provider:"vimeo",src:c.value.url,"can-rotate":!1},null,8,["src"])])):(I(),O("img",{key:2,src:y(J.isEmpty)(c.value)?(we=(de=y(o))==null?void 0:de.thumbnail)!=null?we:"https://via.placeholder.com/100x100/ddd/ddd":((Ie=c.value)==null?void 0:Ie.type)=="image"?(Be=(xe=c.value)==null?void 0:xe.url)!=null?Be:"https://via.placeholder.com/100x100/ddd/ddd":(Ae=(Pe=c.value)==null?void 0:Pe.thumb)!=null?Ae:"https://via.placeholder.com/100x100/ddd/ddd",onError:A,class:"object-cover bg-[#ddd] w-full aspect-video"},null,40,NGe))]),_("div",FGe,[_("section",BGe,[(I(!0),O(Ue,null,ct((ze=y(o))==null?void 0:ze.slides,(It,Je)=>{var rt;return I(),O("div",{key:Je},[_("div",{onClick:Ct=>P(It),class:"size-20 justify-center flex items-center relative rounded-lg"},[It.type!="image"?(I(),ve(y(fe),{key:0,icon:y(jbe),class:"absolute size-8 text-[#f8f8f8]"},null,8,["icon"])):re("",!0),_("img",{src:It.type=="image"?It==null?void 0:It.url:It==null?void 0:It.thumb,class:gt(["h-full bg-[#ddd] flex-1 object-cover rounded-lg",{"border-[3px] border-blue1":((rt=c.value)==null?void 0:rt.id)==It.id,"":It.type!="image"}]),onError:A,placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,42,UGe)],8,VGe)])}),128))]),_("div",zGe,[_("div",HGe,[_("div",jGe,[L(y(fe),{icon:((le=y(o))==null?void 0:le.status)===1?y(rB):y(Px),class:"size-5"},null,8,["icon"]),be(" "+Q(y(oj)[(Se=y(o))==null?void 0:Se.status]),1)]),_("div",GGe,[L(y(fe),{src:"/icUser.svg",class:"size-5"}),be(" "+Q((ie=(ne=y(o))==null?void 0:ne.total_member)!=null?ie:0)+" thành viên ",1)])]),_("div",WGe,[_("div",qGe,[L(y(fe),{src:"/tag.svg",class:"size-5"}),be(" "+Q(g.value),1)]),_("div",KGe,[y(J.isEmpty)((V=(me=y(o))==null?void 0:me.owner)==null?void 0:V.avatar)?(I(),ve(y(fe),{key:1,icon:y(NA),class:"size-6"},null,8,["icon"])):(I(),O("img",{key:0,src:(z=(F=y(o))==null?void 0:F.owner)==null?void 0:z.avatar,class:"size-6 rounded-full"},null,8,YGe)),be(" "+Q((Te=(se=y(o))==null?void 0:se.owner)==null?void 0:Te.full_name),1)])])])])]),_("section",XGe,[(I(),O("img",{src:(ke=y(o))==null?void 0:ke.thumbnail,key:(Ce=y(o))==null?void 0:Ce.thumbnail,onError:A,class:"object-cover bg-[#ddd] w-full aspect-video rounded-lg"},null,40,QGe)),_("div",ZGe,[_("div",JGe,Q((ge=y(o))==null?void 0:ge.name),1),_("div",{onClick:U[0]||(U[0]=It=>{var Je,rt,Ct;return C("".concat(y(l),"/").concat((Ct=(Je=y(o))==null?void 0:Je.short_name)!=null?Ct:(rt=y(o))==null?void 0:rt._id))}),class:"py-2.5 text-sm font-light text-gray2"},Q("".concat(y(l),"/").concat((mt=(He=y(o))==null?void 0:He.short_name)!=null?mt:(Ge=y(o))==null?void 0:Ge._id)),1),_("span",eWe,Q((ut=y(o))==null?void 0:ut.description),1)]),_("section",tWe,[_("div",nWe,[_("div",iWe,Q((xt=y(o))==null?void 0:xt.total_member),1),U[1]||(U[1]=be(" Thành viên "))]),_("div",sWe,[_("div",rWe,Q((kt=y(o))==null?void 0:kt.total_admin),1),U[2]||(U[2]=be(" Admin "))])]),u.value?(I(),O("div",oWe,[m.value?re("",!0):(I(),ve(y(ko),{key:0,onClick:k,color:"orange1",class:"flex items-center font-medium w-full h-12 justify-center text-sm uppercase text-center shadow-st rounded-xl"},{default:j(()=>{var It;return[be(Q((It=m.value)!=null?It:"Tham gia cộng đồng"),1)]}),_:1}))])):h.value?(I(),O("div",aWe)):f.value?(I(),O(Ue,{key:2},[],64)):(I(),O("div",lWe,[U[3]||(U[3]=_("div",{class:"flex items-center text-[#6B7280] shadow-st bg-gray4 font-semibold w-full h-12 justify-center text-sm uppercase text-center rounded-xl"}," Chờ xác nhận ",-1)),_("div",{onClick:T,class:"text-sm text-gray2 font-medium text-center mt-4"}," Huỷ đăng ký cộng đồng ")]))]),U[4]||(U[4]=_("div",{class:"text-center text-sm font-light my-4 mb-10 text-gray2"},[be(" Vận hành bởi "),_("span",{class:"font-medium"},"Unica.expert")],-1))]}),_:1}))}}),If={Free:1,Paid:2,Vip:3};var uo=(n=>(n[n.Draft=0]="Draft",n[n.Publish=1]="Publish",n[n.StopSelling=2]="StopSelling",n))(uo||{});const Ym={Forever:0,OneMonth:1,ThreeMonth:2,SixMonth:3,TwelveMonth:4},BO=[{type:"auto",title:"Thanh toán theo gói, gia hạn tự động",description:"Đến kỳ thanh toán hệ thống sẽ tự động trừ tiền từ tài khoảnthẻ của bạn. Bạn có thể hủy bất cứ khi nào."},{type:"manual",title:"Thanh toán theo gói, gia hạn thủ công",description:"Thanh toán thủ công mỗi lần gia hạn"}],aj=[{value:Ym.Forever,label:"Trọn đời"},{value:Ym.OneMonth,label:"1 tháng"},{value:Ym.ThreeMonth,label:"3 tháng"},{value:Ym.SixMonth,label:"6 tháng"},{value:Ym.TwelveMonth,label:"12 tháng"}],hv=[{value:0,label:"Mọi người"},{value:1,label:"Level 1"},{value:2,label:"Level 2"},{value:3,label:"Level 3"},{value:4,label:"Level 4"},{value:5,label:"Level 5"},{value:6,label:"Level 6"},{value:7,label:"Level 7"},{value:8,label:"Level 8"},{value:9,label:"Level 9"}],VO=[{id:"0",logoSrc:"/wallets/momo.png",name:"Ví điện tử MoMo"},{id:"1",logoSrc:"/wallets/qrcode.png",name:"Chuyển khoản liên ngân hàng bằng QR code"},{id:"2",logoSrc:"/wallets/atm.png",name:"Thẻ ATM/Internet Banking"},{id:"3",logoSrc:"/wallets/visa.png",name:"Thẻ quốc tế Visa/Master"},{id:"4",logoSrc:"/wallets/vnpay.png",name:"Cổng thanh toán VNPay"},{id:"5",logoSrc:"/wallets/shopeepay.png",name:"Cổng thanh toán ShopeePay"},{id:"6",logoSrc:"/wallets/zalopay.png",name:"Cổng thanh toán ZaloPay"}],cWe=[{id:void 0,label:"Tất cả"},{id:HC.Public,label:"Công khai"},{id:HC.Private,label:"Riêng tư"}],dWe=[{id:"all",label:"Tất cả"},{id:"free",label:"Miễn phí"},{id:"pay_fee",label:"Có phí"}],iE=[{name:"Gói START",code:"START"},{name:"Gói PRO 3 tháng: 999k/tháng",code:"PRO_MONTHLY",sku:"expertpro3m",price:3*999*1e3,unit:999*1e3,duration:3,packageName:"PRO"},{name:"Gói VIP 3 tháng: 1999k/tháng",code:"VIP_MONTHLY",sku:"expertvip3m",price:3*1999*1e3,unit:1999*1e3,duration:3,packageName:"VIP"}],uWe=Fe({__name:"ModalPopoverBlockCourse",setup(n){return(e,t)=>(I(),ve(y(At),null,{default:j(()=>t[0]||(t[0]=[_("div",{class:"text-center text-sm py-2"},"Hết hạn gói Vip",-1)])),_:1}))}}),hWe=["src","alt"],fWe=Fe({__name:"ImgElement",props:{src:{type:String,default:"https://via.placeholder.com/300x200"},alt:{type:String,default:"Image"},fallback:{type:String,default:"https://via.placeholder.com/300x200?text=Image+Not+Found"}},setup(n){const e=n,t=K(e.src);function i(){t.value=e.fallback}return(s,r)=>(I(),O("img",{src:t.value,alt:n.alt,loading:"lazy",onError:i},null,40,hWe))}}),pWe={Processing:0,Paid:1,Cancel:2,Removed:3,Refund:4};var lj=(n=>(n[n.Member=1]="Member",n[n.Service=2]="Service",n))(lj||{});const{DEV:sE,VITE_API_URL:mWe,VITE_API_URL_DEV:gWe}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},cj=(n,e)=>{const t=sE?gWe:mWe,i=[...rj],s=gn(),r=K(),o=K(),a=CdvPurchase.store,l=K(!1),c=K(0),d=()=>{l.value=!0,a.when().productUpdated(()=>{console.log("productUpdated")}).receiptsReady(()=>{l.value=!1,console.log("receiptsReady",a.products)}).approved(g=>{g.verify()}).verified(g=>{l.value=!1,g.finish()}).unverified(g=>{console.log("Purchase unverified:",g)}).finished(async g=>{var b;!J.isEmpty((b=g.purchaseDate)==null?void 0:b.toString())&&g.transactionId!=="appstore.application"&&(console.log("counter",c.value,n),c.value==0&&(console.log("🌸 transaction 👉",g),n==="course"?await f(g.transactionId):n==="create-community"&&await m(g.transactionId),l.value=!1,c.value++,g.finish())),l.value=!1})},u=async(g,b,w)=>{var k,E,T,P,C,A,R,M,N,U,G,B,te;if(console.log("Buying course"),!g)return;if(mi("android")||mi("mobileweb")||!i.includes(b!=null?b:"none")){const X=await Qe.post("community-order/buy-course",{platform:"android",course_id:g,payment_type:w!=null?w:1,current_frontend_url:t});if((X==null?void 0:X.status)===400&&((E=(k=X==null?void 0:X.response)==null?void 0:k.data)!=null&&E.message)){tt(((P=(T=X==null?void 0:X.response)==null?void 0:T.data)==null?void 0:P.message)||"Có lỗi xảy ra, vui lòng thử lại sau","error");return}if((X==null?void 0:X.status)===201){const ue=(C=X==null?void 0:X.data)==null?void 0:C.payment_link;ue&&await Xr.open({url:ue})}return}const x=await Qe.post("community-order/buy-course",{platform:"ios",course_id:g,current_frontend_url:t,payment_type:1});if((x==null?void 0:x.status)===400&&((R=(A=x==null?void 0:x.response)==null?void 0:A.data)!=null&&R.message)){tt(((N=(M=x==null?void 0:x.response)==null?void 0:M.data)==null?void 0:N.message)||"Có lỗi xảy ra, vui lòng thử lại sau","error");return}if(!J.isEmpty((U=x==null?void 0:x.data)==null?void 0:U._id)&&(x==null?void 0:x.status)===201&&b){r.value=(G=x==null?void 0:x.data)==null?void 0:G._id,console.log("🌸 community_order_id 👉",(B=x==null?void 0:x.data)==null?void 0:B._id);const X=await a.get(b);if(!X){console.log("Product not found");return}l.value=!0,(te=X.getOffer())==null||te.order().then(ue=>{ue&&(ue.code===CdvPurchase.ErrorCode.PAYMENT_CANCELLED?(console.log("Payment cancelled by user"),l.value=!1):(l.value=!1,console.log("Failed to subscribe:",ue)))})}},h=async(g,b)=>{var k,E,T,P,C,A,R;const w={order_type:lj.Service,order_status:pWe.Processing,origin_total_amount:b==null?void 0:b.total_amount,total_amount:b==null?void 0:b.total_amount,period:b==null?void 0:b.period,package_name:b==null?void 0:b.package_name,community_id:b==null?void 0:b.community_id,ref:null,current_frontend_url:t,code:"",unit_price:b==null?void 0:b.unit_price,money_discount_from_old_package:0};console.log(w);const x=await Qe.post("/community-pay/create-payment",w);if((x==null?void 0:x.status)===400&&((E=(k=x==null?void 0:x.response)==null?void 0:k.data)!=null&&E.message)){tt(((P=(T=x==null?void 0:x.response)==null?void 0:T.data)==null?void 0:P.message)||"Có lỗi xảy ra, vui lòng thử lại sau","error");return}if(!J.isEmpty((C=x==null?void 0:x.data)==null?void 0:C.order_id)&&(x==null?void 0:x.status)===201&&g){o.value=(A=x==null?void 0:x.data)==null?void 0:A.order_id;const M=await a.get(g);if(!M){console.log("Product not found");return}l.value=!0,(R=M.getOffer())==null||R.order().then(N=>{N&&(N.code===CdvPurchase.ErrorCode.PAYMENT_CANCELLED?(console.log("Payment cancelled by user"),l.value=!1):(l.value=!1,console.log("Failed to subscribe:",N)))})}},f=async g=>{const{data:b,status:w}=await Qe.post("app-transaction",{community_order_id:r.value,platform:"ios",transaction_id:Number(g),debug:sE});console.log("data app trans",b,w),w===201&&(s.push({name:"CourseLearningScreen",params:{courseId:b==null?void 0:b.course_id}},Wt),e&&await e()),l.value=!1},m=async g=>{const{data:b,status:w}=await Qe.post("app-transaction",{order_id:o.value,platform:"ios",transaction_id:Number(g),debug:sE});w===201&&(s.replace({name:"CommunityScreen",params:{id:b==null?void 0:b.community_id}},Wt),e&&await e()),l.value=!1};return on(()=>{mi("ios")&&d()}),Jw(()=>{l.value=!1}),{listenBuyIn:d,loadingIAP:l,_SKU:i,buyCourse:u,buyCreateCommunity:h}},bWe={class:"flex justify-between ion-padding-horizontal py-3"},vWe={class:"flex items-center"},yWe={class:"ion-padding-horizontal pb-4"},wWe={class:"text-lg"},xWe={key:0,class:"flex justify-between text-base font-normal mt-4"},_We={class:"flex justify-between text-base font-normal py-4"},kWe={class:"flex justify-between text-lg font-medium text-black border-t-[1px] border-gray1 pt-4"},EWe={key:1,class:"w-full mt-4"},TWe={class:"text-wrap"},CWe={class:"font-medium text-base"},SWe={class:"font-light text-sm"},AWe={key:0},IWe=Fe({__name:"ModalConfirmBuyCourse",props:{sku:{},course:{},callbackBuySuccess:{type:Function,default:()=>{}}},setup(n){const e=[{id:1,title:"Thanh toán một lần",description:"Thanh toán thủ công mỗi lần gia hạn"},{id:2,title:"Thanh toán định kỳ (tự động)",description:"Đến kỳ thanh toán hệ thống sẽ tự động trừ tiền từ tài khoản thẻ của bạn. Bạn có thể hủy bất cứ khi nào. (Áp dụng với giao dịch nhỏ hơn hoặc bằng 1 triệu đồng)"}],t=n,i=K(1),s=async()=>{t.callbackBuySuccess(),await qe.dismiss(null,"close")},{buyCourse:r,loadingIAP:o,_SKU:a}=cj("course",s),l=async()=>{o.value||await qe.dismiss(null,"close")};return(c,d)=>{var u,h,f,m,g,b,w,x,k,E;return I(),O(Ue,null,[_("div",bWe,[d[2]||(d[2]=_("h1",{class:"font-medium text-xl"},"Đăng ký khoá học",-1)),_("div",vWe,[L(y(fe),{onClick:l,icon:y(ks),class:"size-7 text-gray2"},null,8,["icon"])])]),_("div",yWe,[_("div",wWe,Q((u=c.course)==null?void 0:u.title),1),(h=c.course)!=null&&h.time_expired&&((f=c.course)==null?void 0:f.time_expired)!=0&&!y(J.isNull)((m=c.course)==null?void 0:m.price)&&Number((g=c.course)==null?void 0:g.price)<=Math.pow(10,6)&&!y(a).includes(c.sku)?(I(),O("div",xWe,[d[3]||(d[3]=_("div",null,"Thời hạn:",-1)),_("div",null,Q(y(aj)[c.course.time_expired].label),1)])):re("",!0),_("div",_We,[d[4]||(d[4]=_("div",null,"Tạm tính:",-1)),_("div",null,Q(new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0}).format((w=(b=c.course)==null?void 0:b.price)!=null?w:0)),1)]),_("div",kWe,[d[5]||(d[5]=_("div",null,"Tổng tiền:",-1)),_("div",null,Q(new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0}).format((k=(x=c.course)==null?void 0:x.price)!=null?k:0)),1)]),((E=c.course)==null?void 0:E.time_expired)!=0&&!y(a).includes(c.sku)?(I(),O("div",EWe,[L(y(Tc),{value:i.value,modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=T=>i.value=T)},{default:j(()=>[(I(),O(Ue,null,ct(e,(T,P)=>_("div",{key:P,class:gt(["my-1.5 p-2 flex items-center w-full border-[1px] rounded-lg gap-2",i.value===T.id?"border-blue1":"border-gray2 opacity-40"])},[L(y(La),{value:T.id,mode:"md",alignment:"start","label-placement":"end",color:"blue1",justify:"start"},null,8,["value"]),_("div",TWe,[_("div",CWe,Q(T.title),1),_("div",SWe,Q(T.description),1)])],2)),64))]),_:1},8,["value","modelValue"])])):re("",!0),_("div",{onClick:d[1]||(d[1]=()=>{var T,P;return y(r)((T=c.course)==null?void 0:T._id,t==null?void 0:t.sku,(P=i.value)!=null?P:1)}),class:"bg-blue1 text-white font-medium text-lg flex justify-center py-2 rounded-lg mt-8"},[y(o)?(I(),ve(y(fb),{key:1,class:"size-7",color:"white"})):(I(),O("div",AWe,"ĐĂNG KÝ NGAY"))])]),L(em,{"is-open":y(o),"backdrop-opacity":.2},null,8,["is-open"])],64)}}}),PWe={class:"relative"},RWe={key:1,class:"w-full bg-[#ddd] aspect-video rounded-t-lg"},$We={key:2,class:"absolute top-2 left-2 bg-gray2 text-white p-1 px-2 rounded-lg font-medium text-sm"},LWe={key:3,class:"absolute top-2 left-2 bg-red-500 text-white p-1 px-2 rounded-lg font-medium text-sm"},OWe={key:5,class:"bg-[#00000080] w-full aspect-video absolute top-0 text-white justify-center flex flex-col items-center"},DWe={class:"text-lg uppercase font-semibold mt-2"},MWe={key:0},NWe={key:0,class:"flex gap-4 mt-3"},FWe={class:"p-4"},BWe={class:"text-base text-black2 font-medium"},VWe={class:"line-clamp-3 text-base text-black2 font-light my-3"},UWe={class:"flex justify-between"},zWe={class:"text-base font-normal text-gray-600"},HWe={key:0,class:"text-base font-medium text-black"},jWe={key:0,class:"text-sm font-normal"},GWe=Fe({__name:"CardCourse",props:{onPress:{type:Function,default:()=>{}},onActionPress:{type:Function,default:()=>{}},course:{},id:{},onCallBackBuySuccess:{type:Function,default:()=>{}}},setup(n){var m,g;const e=n,t=Li(),i=ln(),s=en(),{userCommunity:r}=et(t),{community:o}=et(i),{userInfo:a}=et(s),l=!!((m=o.value)!=null&&m.package_expires&&_t((g=o.value)==null?void 0:g.package_expires).isBefore(_t())),c=lt(()=>{var b,w,x,k,E;return((b=r.value)==null?void 0:b.user_id)===((w=a.value)==null?void 0:w._id)&&(((x=r.value)==null?void 0:x.role)===Ei.Admin||((k=o.value)==null?void 0:k.owner_id)===((E=a.value)==null?void 0:E._id))}),d=async b=>{await(await EA.create({component:uWe,event:b,size:"auto",cssClass:"popcss"})).present()},u=lt(()=>J.isEmpty(e.course)||J.isEmpty(r.value)?!1:e.course.level?!(e.course.level_point&&r.value.point<e.course.level_point):!0);lt(()=>{var b;return!((b=e.course)!=null&&b.price)||e.course.price<=0,!1});const h=lt(()=>{var b;return c.value||u.value?!0:(b=e.course)==null?void 0:b.paid}),f=async()=>{var w,x;await(await qe.create({mode:"ios",component:IWe,componentProps:{sku:isNaN(Number((w=e.course)==null?void 0:w.price))?null:"expert".concat(Number((x=e.course)==null?void 0:x.price)/1e3,"k"),course:e.course,callbackBuySuccess:e.onCallBackBuySuccess},cssClass:"buycourse",backdropDismiss:!1})).present()};return(b,w)=>(I(),ve(y(qN),{class:"shadow-st my-4 ion-margin-horizontal bg-white rounded-t-lg overflow-hidden",onClick:b.onPress},{default:j(()=>{var x,k,E,T,P,C,A,R,M,N,U,G,B,te,X,ue,he,Ie,xe;return[_("div",PWe,[(x=b.course)!=null&&x.thumbnail?(I(),ve(fWe,{key:0,src:(k=b.course)==null?void 0:k.thumbnail,class:"w-full aspect-video rounded-t-lg",alt:(E=b.course)==null?void 0:E.title},null,8,["src","alt"])):(I(),O("div",RWe)),((T=b.course)==null?void 0:T.status)===y(uo).Draft&&c.value?(I(),O("div",$We," Nháp ")):re("",!0),((P=b.course)==null?void 0:P.status)===y(uo).StopSelling?(I(),O("div",LWe," Dừng bán ")):l?(I(),O("div",{key:4,onClick:qt(d,["stop"]),class:"absolute top-2 left-2 bg-[#ba133a] text-white p-1 px-2 rounded-lg font-medium text-sm"}," Khoá ")):re("",!0),h.value?re("",!0):(I(),O("div",OWe,[L(y(fe),{icon:y(Px),class:"size-10"},null,8,["icon"]),_("div",DWe,[!((C=b.course)!=null&&C.price)||b.course.price<=0?re("",!0):(I(),O("span",MWe,"Mua hoặc ")),be(" Mở khoá từ level "+Q((A=b.course)==null?void 0:A.level),1)]),!((R=b.course)!=null&&R.price)||b.course.price<=0?re("",!0):(I(),O("div",NWe,[_("div",{onClick:qt(f,["stop"]),class:"bg-blue1 py-1.5 px-2 rounded-lg text-base font-medium"}," Mua khoá học ")]))]))]),_("div",FWe,[_("span",BWe,Q((M=b.course)==null?void 0:M.title),1),_("div",VWe,Q(y(OB)((N=b.course)==null?void 0:N.description)),1),_("div",UWe,[_("div",zWe,Q((U=b.course)!=null&&U.level?"Level ".concat((G=b.course)==null?void 0:G.level):"Mọi cấp độ"),1),!h.value&&((B=b.course)!=null&&B.price)?(I(),O("div",HWe,[be(Q(new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0}).format((X=(te=b.course)==null?void 0:te.price)!=null?X:0))+" ",1),(ue=b.course)!=null&&ue.time_expired&&((he=b.course)==null?void 0:he.time_expired)!=0&&!y(J.isNull)((Ie=b.course)==null?void 0:Ie.price)&&((xe=b.course)==null?void 0:xe.price)>0?(I(),O("span",jWe,"/ "+Q(y(aj)[b.course.time_expired].label),1)):re("",!0)])):re("",!0)])])]}),_:1},8,["onClick"]))}}),WWe={key:0,class:"pb-8"},qWe={key:1,class:"h-full"},KWe=Fe({__name:"TabCourse",setup(n){const e=gn(),t=ln(),i=Li(),{userInfo:s}=et(en()),{community:r}=et(t),{userCommunity:o}=et(i),a=K([]),l=K(1),c=K(!1),d=K(!1),u=async(T=1,P=!1)=>{var R,M,N,U,G;const C={community_id:(R=r.value)==null?void 0:R._id,can_modify:((M=o.value)==null?void 0:M.role)===Ei.Admin,limit:10,page:T},{data:A}=await Qe.get("/course",{params:C});if(J.isEmpty(A))c.value=!1;else if((N=A==null?void 0:A.meta)!=null&&N.hasNextPage?(l.value++,c.value=!0):c.value=!1,P){const B=await h(A==null?void 0:A.data);a.value=[...a.value,...(U=B!=null?B:A.data)!=null?U:[]]}else{const B=await h(A==null?void 0:A.data);a.value=(G=B!=null?B:A==null?void 0:A.data)!=null?G:[]}},h=async T=>{var A,R;const P=T==null?void 0:T.map(M=>M._id);if(J.isEmpty(P))return[];const{data:C}=await Qe.get("user-course",{params:{user_id:(A=s.value)==null?void 0:A._id,course_ids:P,community_id:(R=r.value)==null?void 0:R._id,paid:!0,access_by_level:!0,is_attached:!0}});if(!J.isEmpty(C)){const M=C.map(U=>U.course_id),N=T==null?void 0:T.map(U=>M.includes(U==null?void 0:U._id)?{...U,paid:!0}:U);return J.isEmpty(N)?null:N}return null},f=()=>{u(1,!1),l.value=1,c.value=!1};tr(()=>{f()});const m=T=>{f(),setTimeout(()=>{T.target.complete()},700)},g=async T=>{u(l.value,!0),setTimeout(()=>T.target.complete(),500)},b=T=>{!o.value||o.value.status!=ms.Joined?d.value||tt("Bạn phải là thành viên của cộng đồng trước. Hãy đăng ký làm thành viên","warning"):e.push({name:"CourseLearningScreen",params:{courseId:T._id}},Wt)},w=()=>{e.push({name:"CourseEditInfomationScreen",params:{courseId:"a515a"}},Wt)},x=async T=>{const P=await Bd.create({mode:"ios",buttons:[{text:"Chỉnh sửa",handler:w},{text:"Xoá",role:"destructive",handler:()=>console.log("asasas")},{text:"Huỷ",role:"cancel"}],translucent:!0});await P.present();const C=await P.onWillDismiss();console.log(C,T)},k=lt(()=>mi("tablet")||mi("ipad")),E=T=>{a.value[T].paid=!0};return(T,P)=>(I(),ve(y(At),{class:"flex-col",color:"white1"},{default:j(()=>[L(y(Jr),{mode:"md",slot:"fixed",onIonRefresh:m},{default:j(()=>[L(y(eo))]),_:1}),y(J.isEmpty)(a.value)?(I(),O("div",qWe,P[0]||(P[0]=[_("section",{class:"flex flex-col h-full items-center justify-center text-gray2"},[_("img",{src:hm,class:"size-32"}),_("div",{class:"text-center mb-2 font-light"},[be(" Hiện tại chưa có khóa học nào."),_("br")])],-1)]))):(I(),O("div",WWe,[_("div",{class:gt(k.value?"grid grid-cols-2":"")},[(I(!0),O(Ue,null,ct(a.value,(C,A)=>(I(),O("section",{key:C._id,class:""},[L(GWe,{course:C,onCallBackBuySuccess:R=>E(A),onPress:R=>b(C),onActionPress:R=>x(C)},null,8,["course","onCallBackBuySuccess","onPress","onActionPress"])]))),128))],2)])),c.value?(I(),ve(y(Zn),{key:2,threshold:"0.9%",onIonInfinite:g},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),YWe={class:"h-[50%] overflow-y-scroll pb-10"},XWe=["onClick"],QWe=Fe({__name:"ModalTopicCommunityDropdown",props:{topics:{},selectedTopic:{}},setup(n){const e=async t=>{qe.dismiss(t,"confirm")};return(t,i)=>(I(),ve(y(At),{class:"ion-padding-vertical",color:"white1"},{default:j(()=>[_("section",YWe,[(I(!0),O(Ue,null,ct(t.topics,(s,r)=>{var o;return I(),O("div",{key:r},[_("div",{onClick:a=>e(s),class:gt(["flex flex-1 py-2.5 rounded-md px-8",{"bg-blue1-tint1":(s==null?void 0:s._id)===((o=t.selectedTopic)==null?void 0:o._id)}])},Q(s==null?void 0:s.title),11,XWe)])}),128))])]),_:1}))}}),ZWe=Xi(QWe,[["__scopeId","data-v-3fc40fe3"]]);var kw=(n=>(n[n.Processing=0]="Processing",n[n.Processed=1]="Processed",n))(kw||{});const JWe={key:0,class:"absolute top-2 right-2 shadow-st bg-white text-sm font-normal rounded-lg text-green-500 px-1.5 py-1"},eqe=Fe({__name:"ComingSoonEvent",setup(n){const e=ln(),t=en(),{userInfo:i}=et(t),{community:s}=et(e),r=K([]),o=async()=>{var d,u,h;const l={"filter[user_id]":(d=i.value)==null?void 0:d._id},{data:c}=await Qe.get("/event/community/".concat((u=s.value)==null?void 0:u._id,"/comingSoon"),{params:l});J.isEmpty(c)||(r.value=(h=c==null?void 0:c.data)!=null?h:[])};on(()=>{o()});const a=lt(()=>NL("tablet")||NL("ipad"));return(l,c)=>y(J.isEmpty)(r.value)?re("",!0):(I(),O("div",{key:0,class:gt(["flex overflow-auto mb-4 ion-padding-horizontal scrollbar-hidden",a.value?"gap-4":"gap-2"])},[(I(!0),O(Ue,null,ct(r.value,d=>(I(),O("div",{key:d._id,class:gt(["flex-none rounded-lg overflow-hidden relative shadow-st my-1",a.value?"w-3/5":"w-4/5"])},[L(r5,{event:d},null,8,["event"]),y(J.isEmpty)(d.subscription)?re("",!0):(I(),O("div",JWe," Đã đăng ký "))],2))),128))],2))}}),tqe={class:"ion-padding-horizontal"},nqe={class:"size-9 rounded-full flex"},iqe=["src"],sqe={key:0,class:"text-center mb-4 flex justify-center gap-2 items-center"},rqe={class:"text-center bg-red-600 justify-center items-center text-white text-sm size-6 font-medium rounded-full flex"},oqe={key:1,class:"text-center mb-4 flex justify-center gap-2 items-center"},aqe={class:"text-center bg-[#FFC451] justify-center items-center text-white text-sm size-6 font-medium rounded-full flex"},lqe={class:"flex justify-between items-center ion-padding-horizontal"},cqe={class:"flex flex-[0.5] truncate items-center gap-2"},dqe={class:"flex items-center line-clamp-1"},uqe={class:"flex"},hqe={class:"flex-[0.5] mx-2"},fqe={class:"my-4 ion-padding-horizontal"},pqe={key:0,class:"flex flex-col flex-1 items-center justify-center text-gray2 mt-[15%]"},mqe={class:"p-8"},gqe={class:"font-bold"},bqe={class:"ion-margin-horizontal py-1 font-normal"},vqe={class:"font-bold"},yqe={class:"ion-margin-horizontal py-1 font-normal"},wqe=Fe({__name:"TabDiscuss",props:{topics:{},onChangeTab:{type:Function,default:()=>{}}},setup(n){const e=n,t=[{label:"Không",value:void 0},{label:"Đã ghim",value:"pin"}],i=[{label:"Hoạt động gần đây",value:void 0},{label:"Bài viết mới nhất",value:{created_at:-1}},{label:"Bài viết cũ nhất",value:{created_at:1}}],s=K({title:"Tất cả",id:"all"}),r=gn(),o=Zr(),a=en(),l=ln(),c=Li(),d=K(null),{userInfo:u}=et(a),{community:h}=et(l),{userCommunity:f}=et(c),m=K([]),g=K(s.value),b=K(""),w=K(1),x=K(!1),k=K(),E=Yi({filterIdx:0,sortIdx:0}),T=K(void 0),P=K(void 0),C=Pe=>{g.value=Pe},A=Pe=>{Pe&&(m.value=m.value.filter(Ae=>Ae.creator_id!==Pe))},R=async Pe=>{const Ae=await qe.create({component:r_,componentProps:{post:Pe,onCallback:X,onGetReportNumber:te,onCallbackBlockUserPost:A},initialBreakpoint:.5,mode:"ios"});await Ae.present();const{data:de,role:we}=await Ae.onWillDismiss();we==="confirm"&&console.log(de)},M=async()=>{var de;const Pe=await qe.create({component:Y3,componentProps:{type:"create",topics:(de=e.topics)!=null?de:[]},mode:"ios"});Pe.present();const{role:Ae}=await Pe.onWillDismiss();Ae==="posted"&&X()},N=Pe=>{Pe&&r.push({name:"PostDetailScreen",params:{postId:Pe._id}})},U=async()=>{const Pe=await qe.create({component:ZWe,componentProps:{topics:[s.value,...e.topics],selectedTopic:g.value},initialBreakpoint:.5,mode:"ios"});Pe.present();const{data:Ae,role:de}=await Pe.onWillDismiss();de==="confirm"&&C(Ae)},G=async(Pe=1,Ae=!1)=>{var ze,le,Se,ne,ie,me,V,F,z;const de={"w[]":["creator","topic","total_comments","total_reactions","user_reaction","poll"],"wo[]":["user_posts"],limit:20,page:Pe,blacklist:(le=(ze=f.value)==null?void 0:ze.blacklist)!=null?le:[],"filter[community_id]":(Se=h.value)==null?void 0:Se._id,"filter[pin_exists]":t[E.filterIdx].value==="pin"?!0:void 0,"filter[topic_id]":g.value.id!=="all"?g.value.id:void 0,"filter[keyword]":(ne=b.value)!=null?ne:void 0,"sort[created_at]":(me=(ie=i[E.sortIdx].value)==null?void 0:ie.created_at)!=null?me:void 0},{data:we}=await Qe.get("community-post",{params:de});console.log("🌸  res_post 👉",we),J.isEmpty(we)?x.value=!1:((V=we==null?void 0:we.meta)!=null&&V.hasNextPage?(w.value++,x.value=!0):x.value=!1,Ae?m.value=[...m.value,...(F=we.data)!=null?F:[]]:m.value=(z=we==null?void 0:we.data)!=null?z:[])},B=async()=>{var de,we,ze;const Pe={"filter[community_id]":(de=h.value)==null?void 0:de._id,"filter[status]":ms.Waiting},{data:Ae}=await Qe.get("/user-community",{params:Pe});J.isEmpty(Ae)||(T.value=(ze=(we=Ae.meta)==null?void 0:we.itemCount)!=null?ze:void 0)},te=async()=>{var de;const Pe={"filter[community_id]":(de=h.value)==null?void 0:de._id,"filter[status]":kw.Processing},{data:Ae}=await Qe.get("/community-post-report/count-report/",{params:Pe});P.value=Ae!=null?Ae:0},X=()=>{G(1,!1),w.value=1,x.value=!1};on(async()=>{var Ae,de,we;X(),((Ae=f.value)==null?void 0:Ae.status)===ms.Joined&&(((de=f.value)==null?void 0:de.role)===Ei.Admin||f.value.user_id===((we=h.value)==null?void 0:we.owner_id))&&(B(),te())}),ki([g,E],()=>{X()}),ki(o,()=>{o.name==="CommunityScreen"&&(X(),te())});const ue=async Pe=>{G(w.value,!0),te(),setTimeout(()=>Pe.target.complete(),500)},he=()=>{},Ie=async()=>{await k.value.$el.present()},xe=()=>{r.push({name:"CommunityReportPostScreen"},Wt)},Be=async Pe=>{var de,we,ze;X(),((de=f.value)==null?void 0:de.status)===ms.Joined&&(((we=f.value)==null?void 0:we.role)===Ei.Admin||f.value.user_id===((ze=h.value)==null?void 0:ze.owner_id))&&(B(),te()),setTimeout(()=>{Pe.target.complete()},1500)};return(Pe,Ae)=>(I(),O(Ue,null,[L(y(At),{onIonScrollEnd:he,ref_key:"refContentView",ref:d,"scroll-events":!0,class:"flex-col ion-padding-vertical",color:"white1"},{default:j(()=>{var de,we;return[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:Be},{default:j(()=>[L(y(eo))]),_:1}),L(eqe),_("div",tqe,[_("div",{onClick:M,class:"bg-white flex items-center mb-4 gap-4 text-gray2 text-base font-normal p-2 rounded-lg shadow-st"},[_("div",nqe,[_("img",{src:(de=y(u))==null?void 0:de.avatar,class:"w-full rounded-full",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,iqe)]),Ae[4]||(Ae[4]=be(" Tạo bài viết "))]),T.value&&T.value>0?(I(),O("div",sqe,[_("span",rqe,Q(T.value),1),_("span",{class:"text-blue2 text-base font-medium",onClick:Ae[0]||(Ae[0]=qt((...ze)=>Pe.onChangeTab&&Pe.onChangeTab(...ze),["stop"]))},"Yêu cầu thành viên chờ xử lý")])):re("",!0),P.value&&Number(P.value)>0?(I(),O("div",oqe,[_("span",aqe,Q(P.value),1),_("span",{class:"text-blue2 text-base font-medium",onClick:qt(xe,["stop"])},"Báo cáo bài viết từ thành viên")])):re("",!0)]),_("div",lqe,[_("div",cqe,[_("div",dqe,[_("div",uqe,[L(y(fe),{icon:y(Al),class:"size-5 text-black"},null,8,["icon"])]),_("div",{class:"truncate text-nowrap line-clamp-1 flex-1 items-center font-medium gap-2 p-0.5 px-2 rounded-lg",onClick:U},Q((we=g.value)==null?void 0:we.title),1)])]),_("div",hqe,[_("form",{class:"w-full",onSubmit:qt(X,["prevent"])},[si(_("input",{"onUpdate:modelValue":Ae[1]||(Ae[1]=ze=>b.value=ze),class:"px-2 text-sm w-full shadow-st outline-none py-2 rounded-lg bg-white",placeholder:"Tìm kiếm"},null,512),[[Ti,b.value]])],32)]),_("div",{onClick:Ie,class:"shadow-st bg-white items-center flex p-[9.5px] px-2.5 rounded-xl"},[L(y(fe),{icon:y(dB),class:"size-5",color:"gray2"},null,8,["icon"])])]),_("section",fqe,[(I(!0),O(Ue,null,ct(m.value,(ze,le)=>(I(),O("div",{key:le,class:"my-4"},[(I(),ve($0,{key:Date.now(),post:ze,onOptionPress:Se=>R(ze),onPostPress:Se=>N(ze)},null,8,["post","onOptionPress","onPostPress"]))]))),128))]),y(J.isEmpty)(m.value)?(I(),O("div",pqe,[L(y(fe),{icon:"/icEmpty.svg",class:"size-32"}),Ae[5]||(Ae[5]=be(" Chưa có bài viết "))])):re("",!0),x.value?(I(),ve(y(Zn),{key:1,onIonInfinite:ue,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1},512),L(y(kA),{id:"filtercss",ref_key:"refOptionFilter",ref:k},{default:j(()=>[_("div",mqe,[_("form",null,[_("div",gqe,[Ae[6]||(Ae[6]=be(" Lọc ")),_("div",bqe,[L(y(Tc),{value:0,modelValue:E.filterIdx,"onUpdate:modelValue":Ae[2]||(Ae[2]=de=>E.filterIdx=de)},{default:j(()=>[(I(),O(Ue,null,ct(t,(de,we)=>_("div",{key:we,class:"py-1 flex items-center"},[L(y(La),{alignment:"start",mode:"md",value:we,"label-placement":"end",color:"blue1",justify:"start"},{default:j(()=>[L(y(Nd),{class:"text-wrap text-base"},{default:j(()=>[be(Q(de.label),1)]),_:2},1024)]),_:2},1032,["value"])])),64))]),_:1},8,["modelValue"])])]),_("div",vqe,[Ae[7]||(Ae[7]=be(" Sắp xếp ")),_("div",yqe,[L(y(Tc),{value:0,modelValue:E.sortIdx,"onUpdate:modelValue":Ae[3]||(Ae[3]=de=>E.sortIdx=de)},{default:j(()=>[(I(),O(Ue,null,ct(i,(de,we)=>_("div",{key:"sort-post-"+we,class:"py-1 flex items-center"},[L(y(La),{alignment:"center",mode:"md",value:we,"label-placement":"end",color:"blue1",justify:"start"},{default:j(()=>[L(y(Nd),{class:"text-wrap text-base"},{default:j(()=>[be(Q(de.label),1)]),_:2},1024)]),_:2},1032,["value"])])),64))]),_:1},8,["modelValue"])])])])])]),_:1},512)],64))}});var Db=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yh=typeof window>"u"||"Deno"in globalThis;function Vo(){}function xqe(n,e){return typeof n=="function"?n(e):n}function jC(n){return typeof n=="number"&&n>=0&&n!==1/0}function dj(n,e){return Math.max(n+(e||0)-Date.now(),0)}function qf(n,e){return typeof n=="function"?n(e):n}function va(n,e){return typeof n=="function"?n(e):n}function UO(n,e){const{type:t="all",exact:i,fetchStatus:s,predicate:r,queryKey:o,stale:a}=n;if(o){if(i){if(e.queryHash!==o5(o,e.options))return!1}else if(!N0(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||r&&!r(e))}function zO(n,e){const{exact:t,status:i,predicate:s,mutationKey:r}=n;if(r){if(!e.options.mutationKey)return!1;if(t){if(M0(e.options.mutationKey)!==M0(r))return!1}else if(!N0(e.options.mutationKey,r))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function o5(n,e){return((e==null?void 0:e.queryKeyHashFn)||M0)(n)}function M0(n){return JSON.stringify(n,(e,t)=>WC(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function N0(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!N0(n[t],e[t])):!1}function uj(n,e){if(n===e)return n;const t=HO(n)&&HO(e);if(t||WC(n)&&WC(e)){const i=t?n:Object.keys(n),s=i.length,r=t?e:Object.keys(e),o=r.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const d=t?c:r[c];(!t&&i.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=uj(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&l++)}return s===o&&l===s?n:a}return e}function GC(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function HO(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function WC(n){if(!jO(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!jO(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function jO(n){return Object.prototype.toString.call(n)==="[object Object]"}function _qe(n){return new Promise(e=>{setTimeout(e,n)})}function qC(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?uj(n,e):e}function kqe(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function Eqe(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var a5=Symbol();function hj(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===a5?()=>Promise.reject(new Error("Missing queryFn: '".concat(n.queryHash,"'"))):n.queryFn}var Gu,vd,Zf,m9,Tqe=(m9=class extends Db{constructor(){super();Qt(this,Gu,void 0);Qt(this,vd,void 0);Qt(this,Zf,void 0);Bt(this,Zf,e=>{if(!yh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Le(this,vd)||this.setEventListener(Le(this,Zf))}onUnsubscribe(){var e;this.hasListeners()||((e=Le(this,vd))==null||e.call(this),Bt(this,vd,void 0))}setEventListener(e){var t;Bt(this,Zf,e),(t=Le(this,vd))==null||t.call(this),Bt(this,vd,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){Le(this,Gu)!==e&&(Bt(this,Gu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Le(this,Gu)=="boolean"?Le(this,Gu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gu=new WeakMap,vd=new WeakMap,Zf=new WeakMap,m9),l5=new Tqe,Jf,yd,ep,g9,Cqe=(g9=class extends Db{constructor(){super();Qt(this,Jf,!0);Qt(this,yd,void 0);Qt(this,ep,void 0);Bt(this,ep,e=>{if(!yh&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){Le(this,yd)||this.setEventListener(Le(this,ep))}onUnsubscribe(){var e;this.hasListeners()||((e=Le(this,yd))==null||e.call(this),Bt(this,yd,void 0))}setEventListener(e){var t;Bt(this,ep,e),(t=Le(this,yd))==null||t.call(this),Bt(this,yd,e(this.setOnline.bind(this)))}setOnline(e){Le(this,Jf)!==e&&(Bt(this,Jf,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return Le(this,Jf)}},Jf=new WeakMap,yd=new WeakMap,ep=new WeakMap,g9),Ew=new Cqe;function KC(){let n,e;const t=new Promise((s,r)=>{n=s,e=r});t.status="pending",t.catch(()=>{});function i(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},t.reject=s=>{i({status:"rejected",reason:s}),e(s)},t}function Sqe(n){return Math.min(1e3*2**n,3e4)}function fj(n){return(n!=null?n:"online")==="online"?Ew.isOnline():!0}var pj=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function rE(n){return n instanceof pj}function mj(n){let e=!1,t=0,i=!1,s;const r=KC(),o=g=>{var b;i||(h(new pj(g)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>l5.isFocused()&&(n.networkMode==="always"||Ew.isOnline())&&n.canRun(),d=()=>fj(n.networkMode)&&n.canRun(),u=g=>{var b;i||(i=!0,(b=n.onSuccess)==null||b.call(n,g),s==null||s(),r.resolve(g))},h=g=>{var b;i||(i=!0,(b=n.onError)==null||b.call(n,g),s==null||s(),r.reject(g))},f=()=>new Promise(g=>{var b;s=w=>{(i||c())&&g(w)},(b=n.onPause)==null||b.call(n)}).then(()=>{var g;s=void 0,i||(g=n.onContinue)==null||g.call(n)}),m=()=>{if(i)return;let g;const b=t===0?n.initialPromise:void 0;try{g=b!=null?b:n.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(u).catch(w=>{var P,C,A;if(i)return;const x=(P=n.retry)!=null?P:yh?0:3,k=(C=n.retryDelay)!=null?C:Sqe,E=typeof k=="function"?k(t,w):k,T=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,w);if(e||!T){h(w);return}t++,(A=n.onFail)==null||A.call(n,t,w),_qe(E).then(()=>c()?void 0:f()).then(()=>{e?h(w):m()})})};return{promise:r,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():f().then(m),r)}}function Aqe(){let n=[],e=0,t=a=>{a()},i=a=>{a()},s=a=>setTimeout(a,0);const r=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{i(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{r(()=>{a(...l)})},schedule:r,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{s=a}}}var hr=Aqe(),Wu,b9,gj=(b9=class{constructor(){Qt(this,Wu,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jC(this.gcTime)&&Bt(this,Wu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n!=null?n:yh?1/0:5*60*1e3)}clearGcTimeout(){Le(this,Wu)&&(clearTimeout(Le(this,Wu)),Bt(this,Wu,void 0))}},Wu=new WeakMap,b9),tp,np,Bo,cr,U0,qu,pa,nc,v9,Iqe=(v9=class extends gj{constructor(e){var t;super();Qt(this,pa);Qt(this,tp,void 0);Qt(this,np,void 0);Qt(this,Bo,void 0);Qt(this,cr,void 0);Qt(this,U0,void 0);Qt(this,qu,void 0);Bt(this,qu,!1),Bt(this,U0,e.defaultOptions),this.setOptions(e.options),this.observers=[],Bt(this,Bo,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Bt(this,tp,Pqe(this.options)),this.state=(t=e.state)!=null?t:Le(this,tp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Le(this,cr))==null?void 0:e.promise}setOptions(e){this.options={...Le(this,U0),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,Bo).remove(this)}setData(e,t){const i=qC(this.state.data,e,this.options);return jn(this,pa,nc).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){jn(this,pa,nc).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,s;const t=(i=Le(this,cr))==null?void 0:i.promise;return(s=Le(this,cr))==null||s.cancel(e),t?t.then(Vo).catch(Vo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,tp))}isActive(){return this.observers.some(e=>va(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===a5||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!dj(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=Le(this,cr))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=Le(this,cr))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Le(this,Bo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Le(this,cr)&&(Le(this,qu)?Le(this,cr).cancel({revert:!0}):Le(this,cr).cancelRetry()),this.scheduleGc()),Le(this,Bo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||jn(this,pa,nc).call(this,{type:"invalidate"})}fetch(e,t){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(Le(this,cr))return Le(this,cr).continueRetry(),Le(this,cr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const i=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(Bt(this,qu,!0),i.signal)})},r=()=>{const u=hj(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return s(h),Bt(this,qu,!1),this.options.persister?this.options.persister(u,h,this):u(h)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:r};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),Bt(this,np,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&jn(this,pa,nc).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=u=>{var h,f,m,g;rE(u)&&u.silent||jn(this,pa,nc).call(this,{type:"error",error:u}),rE(u)||((f=(h=Le(this,Bo).config).onError)==null||f.call(h,u,this),(g=(m=Le(this,Bo).config).onSettled)==null||g.call(m,this.state.data,u,this)),this.scheduleGc()};return Bt(this,cr,mj({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:u=>{var h,f,m,g;if(u===void 0){a(new Error("".concat(this.queryHash," data is undefined")));return}try{this.setData(u)}catch(b){a(b);return}(f=(h=Le(this,Bo).config).onSuccess)==null||f.call(h,u,this),(g=(m=Le(this,Bo).config).onSettled)==null||g.call(m,u,this.state.error,this),this.scheduleGc()},onError:a,onFail:(u,h)=>{jn(this,pa,nc).call(this,{type:"failed",failureCount:u,error:h})},onPause:()=>{jn(this,pa,nc).call(this,{type:"pause"})},onContinue:()=>{jn(this,pa,nc).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Le(this,cr).start()}},tp=new WeakMap,np=new WeakMap,Bo=new WeakMap,cr=new WeakMap,U0=new WeakMap,qu=new WeakMap,pa=new WeakSet,nc=function(e){const t=i=>{var s,r;switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...bj(i.data,this.options),fetchMeta:(s=e.meta)!=null?s:null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(r=e.dataUpdatedAt)!=null?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return rE(o)&&o.revert&&Le(this,np)?{...Le(this,np),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),hr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Le(this,Bo).notify({query:this,type:"updated",action:e})})},v9);function bj(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fj(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Pqe(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i!=null?i:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var cl,y9,vj=(y9=class extends Db{constructor(t={}){super();Qt(this,cl,void 0);this.config=t,Bt(this,cl,new Map)}build(t,i,s){var l;const r=i.queryKey,o=(l=i.queryHash)!=null?l:o5(r,i);let a=this.get(o);return a||(a=new Iqe({cache:this,queryKey:r,queryHash:o,options:t.defaultQueryOptions(i),state:s,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){Le(this,cl).has(t.queryHash)||(Le(this,cl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const i=Le(this,cl).get(t.queryHash);i&&(t.destroy(),i===t&&Le(this,cl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){hr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,cl).get(t)}getAll(){return[...Le(this,cl).values()]}find(t){const i={exact:!0,...t};return this.getAll().find(s=>UO(i,s))}findAll(t={}){const i=this.getAll();return Object.keys(t).length>0?i.filter(s=>UO(t,s)):i}notify(t){hr.batch(()=>{this.listeners.forEach(i=>{i(t)})})}onFocus(){hr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){hr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},cl=new WeakMap,y9),dl,xr,Ku,ul,ad,w9,Rqe=(w9=class extends gj{constructor(e){super();Qt(this,ul);Qt(this,dl,void 0);Qt(this,xr,void 0);Qt(this,Ku,void 0);this.mutationId=e.mutationId,Bt(this,xr,e.mutationCache),Bt(this,dl,[]),this.state=e.state||$qe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Le(this,dl).includes(e)||(Le(this,dl).push(e),this.clearGcTimeout(),Le(this,xr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Bt(this,dl,Le(this,dl).filter(t=>t!==e)),this.scheduleGc(),Le(this,xr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Le(this,dl).length||(this.state.status==="pending"?this.scheduleGc():Le(this,xr).remove(this))}continue(){var e,t;return(t=(e=Le(this,Ku))==null?void 0:e.continue())!=null?t:this.execute(this.state.variables)}async execute(e){var s,r,o,a,l,c,d,u,h,f,m,g,b,w,x,k,E,T,P,C,A;Bt(this,Ku,mj({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(R,M)=>{jn(this,ul,ad).call(this,{type:"failed",failureCount:R,error:M})},onPause:()=>{jn(this,ul,ad).call(this,{type:"pause"})},onContinue:()=>{jn(this,ul,ad).call(this,{type:"continue"})},retry:(s=this.options.retry)!=null?s:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,xr).canRun(this)}));const t=this.state.status==="pending",i=!Le(this,Ku).canStart();try{if(!t){jn(this,ul,ad).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(r=Le(this,xr).config).onMutate)==null?void 0:o.call(r,e,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));M!==this.state.context&&jn(this,ul,ad).call(this,{type:"pending",context:M,variables:e,isPaused:i})}const R=await Le(this,Ku).start();return await((d=(c=Le(this,xr).config).onSuccess)==null?void 0:d.call(c,R,e,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,R,e,this.state.context)),await((m=(f=Le(this,xr).config).onSettled)==null?void 0:m.call(f,R,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,R,null,e,this.state.context)),jn(this,ul,ad).call(this,{type:"success",data:R}),R}catch(R){try{throw await((x=(w=Le(this,xr).config).onError)==null?void 0:x.call(w,R,e,this.state.context,this)),await((E=(k=this.options).onError)==null?void 0:E.call(k,R,e,this.state.context)),await((P=(T=Le(this,xr).config).onSettled)==null?void 0:P.call(T,void 0,R,this.state.variables,this.state.context,this)),await((A=(C=this.options).onSettled)==null?void 0:A.call(C,void 0,R,e,this.state.context)),R}finally{jn(this,ul,ad).call(this,{type:"error",error:R})}}finally{Le(this,xr).runNext(this)}}},dl=new WeakMap,xr=new WeakMap,Ku=new WeakMap,ul=new WeakSet,ad=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),hr.batch(()=>{Le(this,dl).forEach(i=>{i.onMutationUpdate(e)}),Le(this,xr).notify({mutation:this,type:"updated",action:e})})},w9);function $qe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cc,ma,z0,x9,yj=(x9=class extends Db{constructor(t={}){super();Qt(this,cc,void 0);Qt(this,ma,void 0);Qt(this,z0,void 0);this.config=t,Bt(this,cc,new Set),Bt(this,ma,new Map),Bt(this,z0,0)}build(t,i,s){const r=new Rqe({mutationCache:this,mutationId:++T1(this,z0)._,options:t.defaultMutationOptions(i),state:s});return this.add(r),r}add(t){Le(this,cc).add(t);const i=fv(t);if(typeof i=="string"){const s=Le(this,ma).get(i);s?s.push(t):Le(this,ma).set(i,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,cc).delete(t)){const i=fv(t);if(typeof i=="string"){const s=Le(this,ma).get(i);if(s)if(s.length>1){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}else s[0]===t&&Le(this,ma).delete(i)}}this.notify({type:"removed",mutation:t})}canRun(t){const i=fv(t);if(typeof i=="string"){const s=Le(this,ma).get(i),r=s==null?void 0:s.find(o=>o.state.status==="pending");return!r||r===t}else return!0}runNext(t){var s,r;const i=fv(t);if(typeof i=="string"){const o=(s=Le(this,ma).get(i))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(r=o==null?void 0:o.continue())!=null?r:Promise.resolve()}else return Promise.resolve()}clear(){hr.batch(()=>{Le(this,cc).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,cc).clear(),Le(this,ma).clear()})}getAll(){return Array.from(Le(this,cc))}find(t){const i={exact:!0,...t};return this.getAll().find(s=>zO(i,s))}findAll(t={}){return this.getAll().filter(i=>zO(t,i))}notify(t){hr.batch(()=>{this.listeners.forEach(i=>{i(t)})})}resumePausedMutations(){const t=this.getAll().filter(i=>i.state.isPaused);return hr.batch(()=>Promise.all(t.map(i=>i.continue().catch(Vo))))}},cc=new WeakMap,ma=new WeakMap,z0=new WeakMap,x9);function fv(n){var e;return(e=n.options.scope)==null?void 0:e.id}function GO(n){return{onFetch:(e,t)=>{var d,u,h,f,m;const i=e.options,s=(h=(u=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:h.direction,r=((f=e.state.data)==null?void 0:f.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{var k;let g=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=hj(e.options,e.fetchOptions),x=async(E,T,P)=>{if(g)return Promise.reject();if(T==null&&E.pages.length)return Promise.resolve(E);const C={queryKey:e.queryKey,pageParam:T,direction:P?"backward":"forward",meta:e.options.meta};b(C);const A=await w(C),{maxPages:R}=e.options,M=P?Eqe:kqe;return{pages:M(E.pages,A,R),pageParams:M(E.pageParams,T,R)}};if(s&&r.length){const E=s==="backward",T=E?Lqe:WO,P={pages:r,pageParams:o},C=T(i,P);a=await x(P,C,E)}else{const E=n!=null?n:r.length;do{const T=l===0?(k=o[0])!=null?k:i.initialPageParam:WO(i,a);if(l>0&&T==null)break;a=await x(a,T),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function WO(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function Lqe(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var ps,wd,xd,ip,sp,_d,rp,op,_9,Oqe=(_9=class{constructor(e={}){Qt(this,ps,void 0);Qt(this,wd,void 0);Qt(this,xd,void 0);Qt(this,ip,void 0);Qt(this,sp,void 0);Qt(this,_d,void 0);Qt(this,rp,void 0);Qt(this,op,void 0);Bt(this,ps,e.queryCache||new vj),Bt(this,wd,e.mutationCache||new yj),Bt(this,xd,e.defaultOptions||{}),Bt(this,ip,new Map),Bt(this,sp,new Map),Bt(this,_d,0)}mount(){T1(this,_d)._++,Le(this,_d)===1&&(Bt(this,rp,l5.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,ps).onFocus())})),Bt(this,op,Ew.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,ps).onOnline())})))}unmount(){var e,t;T1(this,_d)._--,Le(this,_d)===0&&((e=Le(this,rp))==null||e.call(this),Bt(this,rp,void 0),(t=Le(this,op))==null||t.call(this),Bt(this,op,void 0))}isFetching(e){return Le(this,ps).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,wd).findAll({...e,status:"pending"}).length}getQueryData(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=Le(this,ps).get(t.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),i=Le(this,ps).build(this,t),s=i.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(qf(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Le(this,ps).findAll(e).map(({queryKey:t,state:i})=>{const s=i.data;return[t,s]})}setQueryData(e,t,i){const s=this.defaultQueryOptions({queryKey:e}),r=Le(this,ps).get(s.queryHash),o=r==null?void 0:r.state.data,a=xqe(t,o);if(a!==void 0)return Le(this,ps).build(this,s).setData(a,{...i,manual:!0})}setQueriesData(e,t,i){return hr.batch(()=>Le(this,ps).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,i)]))}getQueryState(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=Le(this,ps).get(t.queryHash))==null?void 0:i.state}removeQueries(e){const t=Le(this,ps);hr.batch(()=>{t.findAll(e).forEach(i=>{t.remove(i)})})}resetQueries(e,t){const i=Le(this,ps),s={type:"active",...e};return hr.batch(()=>(i.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries(s,t)))}cancelQueries(e,t={}){const i={revert:!0,...t},s=hr.batch(()=>Le(this,ps).findAll(e).map(r=>r.cancel(i)));return Promise.all(s).then(Vo).catch(Vo)}invalidateQueries(e,t={}){return hr.batch(()=>{var s,r;if(Le(this,ps).findAll(e).forEach(o=>{o.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const i={...e,type:(r=(s=e==null?void 0:e.refetchType)!=null?s:e==null?void 0:e.type)!=null?r:"active"};return this.refetchQueries(i,t)})}refetchQueries(e,t={}){var r;const i={...t,cancelRefetch:(r=t.cancelRefetch)!=null?r:!0},s=hr.batch(()=>Le(this,ps).findAll(e).filter(o=>!o.isDisabled()).map(o=>{let a=o.fetch(void 0,i);return i.throwOnError||(a=a.catch(Vo)),o.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(Vo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const i=Le(this,ps).build(this,t);return i.isStaleByTime(qf(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Vo).catch(Vo)}fetchInfiniteQuery(e){return e.behavior=GO(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Vo).catch(Vo)}ensureInfiniteQueryData(e){return e.behavior=GO(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ew.isOnline()?Le(this,wd).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,ps)}getMutationCache(){return Le(this,wd)}getDefaultOptions(){return Le(this,xd)}setDefaultOptions(e){Bt(this,xd,e)}setQueryDefaults(e,t){Le(this,ip).set(M0(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,ip).values()],i={};return t.forEach(s=>{N0(e,s.queryKey)&&Object.assign(i,s.defaultOptions)}),i}setMutationDefaults(e,t){Le(this,sp).set(M0(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,sp).values()];let i={};return t.forEach(s=>{N0(e,s.mutationKey)&&(i={...i,...s.defaultOptions})}),i}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,xd).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=o5(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===a5&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,xd).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,ps).clear(),Le(this,wd).clear()}},ps=new WeakMap,wd=new WeakMap,xd=new WeakMap,ip=new WeakMap,sp=new WeakMap,_d=new WeakMap,rp=new WeakMap,op=new WeakMap,_9),Hr,Gn,H0,_r,Yu,ap,kd,hl,j0,lp,cp,Xu,Qu,Ed,dp,Zu,og,G0,YC,W0,XC,q0,QC,K0,ZC,Y0,JC,X0,eS,Q0,tS,jw,wj,k9,Dqe=(k9=class extends Db{constructor(e,t){super();Qt(this,Zu);Qt(this,G0);Qt(this,W0);Qt(this,q0);Qt(this,K0);Qt(this,Y0);Qt(this,X0);Qt(this,Q0);Qt(this,jw);Qt(this,Hr,void 0);Qt(this,Gn,void 0);Qt(this,H0,void 0);Qt(this,_r,void 0);Qt(this,Yu,void 0);Qt(this,ap,void 0);Qt(this,kd,void 0);Qt(this,hl,void 0);Qt(this,j0,void 0);Qt(this,lp,void 0);Qt(this,cp,void 0);Qt(this,Xu,void 0);Qt(this,Qu,void 0);Qt(this,Ed,void 0);Qt(this,dp,new Set);this.options=t,Bt(this,Hr,e),Bt(this,hl,null),Bt(this,kd,KC()),this.options.experimental_prefetchInRender||Le(this,kd).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,Gn).addObserver(this),qO(Le(this,Gn),this.options)?jn(this,Zu,og).call(this):this.updateResult(),jn(this,K0,ZC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nS(Le(this,Gn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nS(Le(this,Gn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,jn(this,Y0,JC).call(this),jn(this,X0,eS).call(this),Le(this,Gn).removeObserver(this)}setOptions(e,t){const i=this.options,s=Le(this,Gn);if(this.options=Le(this,Hr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof va(this.options.enabled,Le(this,Gn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");jn(this,Q0,tS).call(this),Le(this,Gn).setOptions(this.options),i._defaulted&&!GC(this.options,i)&&Le(this,Hr).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,Gn),observer:this});const r=this.hasListeners();r&&KO(Le(this,Gn),s,this.options,i)&&jn(this,Zu,og).call(this),this.updateResult(t),r&&(Le(this,Gn)!==s||va(this.options.enabled,Le(this,Gn))!==va(i.enabled,Le(this,Gn))||qf(this.options.staleTime,Le(this,Gn))!==qf(i.staleTime,Le(this,Gn)))&&jn(this,G0,YC).call(this);const o=jn(this,W0,XC).call(this);r&&(Le(this,Gn)!==s||va(this.options.enabled,Le(this,Gn))!==va(i.enabled,Le(this,Gn))||o!==Le(this,Ed))&&jn(this,q0,QC).call(this,o)}getOptimisticResult(e){const t=Le(this,Hr).getQueryCache().build(Le(this,Hr),e),i=this.createResult(t,e);return Nqe(this,i)&&(Bt(this,_r,i),Bt(this,ap,this.options),Bt(this,Yu,Le(this,Gn).state)),i}getCurrentResult(){return Le(this,_r)}trackResult(e,t){const i={};return Object.keys(e).forEach(s=>{Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),i}trackProp(e){Le(this,dp).add(e)}getCurrentQuery(){return Le(this,Gn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Le(this,Hr).defaultQueryOptions(e),i=Le(this,Hr).getQueryCache().build(Le(this,Hr),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){var t;return jn(this,Zu,og).call(this,{...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),Le(this,_r)))}createResult(e,t){var A;const i=Le(this,Gn),s=this.options,r=Le(this,_r),o=Le(this,Yu),a=Le(this,ap),c=e!==i?e.state:Le(this,H0),{state:d}=e;let u={...d},h=!1,f;if(t._optimisticResults){const R=this.hasListeners(),M=!R&&qO(e,t),N=R&&KO(e,i,t,s);(M||N)&&(u={...u,...bj(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:b}=u;if(t.select&&u.data!==void 0)if(r&&u.data===(o==null?void 0:o.data)&&t.select===Le(this,j0))f=Le(this,lp);else try{Bt(this,j0,t.select),f=t.select(u.data),f=qC(r==null?void 0:r.data,f,t),Bt(this,lp,f),Bt(this,hl,null)}catch(R){Bt(this,hl,R)}else f=u.data;if(t.placeholderData!==void 0&&f===void 0&&b==="pending"){let R;if(r!=null&&r.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))R=r.data;else if(R=typeof t.placeholderData=="function"?t.placeholderData((A=Le(this,cp))==null?void 0:A.state.data,Le(this,cp)):t.placeholderData,t.select&&R!==void 0)try{R=t.select(R),Bt(this,hl,null)}catch(M){Bt(this,hl,M)}R!==void 0&&(b="success",f=qC(r==null?void 0:r.data,R,t),h=!0)}Le(this,hl)&&(m=Le(this,hl),f=Le(this,lp),g=Date.now(),b="error");const w=u.fetchStatus==="fetching",x=b==="pending",k=b==="error",E=x&&w,T=f!==void 0,C={status:b,fetchStatus:u.fetchStatus,isPending:x,isSuccess:b==="success",isError:k,isInitialLoading:E,isLoading:E,data:f,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!x,isLoadingError:k&&!T,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:k&&T,isStale:c5(e,t),refetch:this.refetch,promise:Le(this,kd)};if(this.options.experimental_prefetchInRender){const R=U=>{C.status==="error"?U.reject(C.error):C.data!==void 0&&U.resolve(C.data)},M=()=>{const U=Bt(this,kd,C.promise=KC());R(U)},N=Le(this,kd);switch(N.status){case"pending":e.queryHash===i.queryHash&&R(N);break;case"fulfilled":(C.status==="error"||C.data!==N.value)&&M();break;case"rejected":(C.status!=="error"||C.error!==N.reason)&&M();break}}return C}updateResult(e){const t=Le(this,_r),i=this.createResult(Le(this,Gn),this.options);if(Bt(this,Yu,Le(this,Gn).state),Bt(this,ap,this.options),Le(this,Yu).data!==void 0&&Bt(this,cp,Le(this,Gn)),GC(i,t))return;Bt(this,_r,i);const s={},r=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!Le(this,dp).size)return!0;const l=new Set(a!=null?a:Le(this,dp));return this.options.throwOnError&&l.add("error"),Object.keys(Le(this,_r)).some(c=>{const d=c;return Le(this,_r)[d]!==t[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&r()&&(s.listeners=!0),jn(this,jw,wj).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&jn(this,K0,ZC).call(this)}},Hr=new WeakMap,Gn=new WeakMap,H0=new WeakMap,_r=new WeakMap,Yu=new WeakMap,ap=new WeakMap,kd=new WeakMap,hl=new WeakMap,j0=new WeakMap,lp=new WeakMap,cp=new WeakMap,Xu=new WeakMap,Qu=new WeakMap,Ed=new WeakMap,dp=new WeakMap,Zu=new WeakSet,og=function(e){jn(this,Q0,tS).call(this);let t=Le(this,Gn).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Vo)),t},G0=new WeakSet,YC=function(){jn(this,Y0,JC).call(this);const e=qf(this.options.staleTime,Le(this,Gn));if(yh||Le(this,_r).isStale||!jC(e))return;const i=dj(Le(this,_r).dataUpdatedAt,e)+1;Bt(this,Xu,setTimeout(()=>{Le(this,_r).isStale||this.updateResult()},i))},W0=new WeakSet,XC=function(){var e;return(e=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,Gn)):this.options.refetchInterval)!=null?e:!1},q0=new WeakSet,QC=function(e){jn(this,X0,eS).call(this),Bt(this,Ed,e),!(yh||va(this.options.enabled,Le(this,Gn))===!1||!jC(Le(this,Ed))||Le(this,Ed)===0)&&Bt(this,Qu,setInterval(()=>{(this.options.refetchIntervalInBackground||l5.isFocused())&&jn(this,Zu,og).call(this)},Le(this,Ed)))},K0=new WeakSet,ZC=function(){jn(this,G0,YC).call(this),jn(this,q0,QC).call(this,jn(this,W0,XC).call(this))},Y0=new WeakSet,JC=function(){Le(this,Xu)&&(clearTimeout(Le(this,Xu)),Bt(this,Xu,void 0))},X0=new WeakSet,eS=function(){Le(this,Qu)&&(clearInterval(Le(this,Qu)),Bt(this,Qu,void 0))},Q0=new WeakSet,tS=function(){const e=Le(this,Hr).getQueryCache().build(Le(this,Hr),this.options);if(e===Le(this,Gn))return;const t=Le(this,Gn);Bt(this,Gn,e),Bt(this,H0,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},jw=new WeakSet,wj=function(e){hr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(Le(this,_r))}),Le(this,Hr).getQueryCache().notify({query:Le(this,Gn),type:"observerResultsUpdated"})})},k9);function Mqe(n,e){return va(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function qO(n,e){return Mqe(n,e)||n.state.data!==void 0&&nS(n,e,e.refetchOnMount)}function nS(n,e,t){if(va(e.enabled,n)!==!1){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&c5(n,e)}return!1}function KO(n,e,t,i){return(n!==e||va(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&c5(n,t)}function c5(n,e){return va(e.enabled,n)!==!1&&n.isStaleByTime(qf(e.staleTime,n))}function Nqe(n,e){return!GC(n.getCurrentResult(),e)}var Fqe="VUE_QUERY_CLIENT";function xj(n){const e=n?":".concat(n):"";return"".concat(Fqe).concat(e)}function YO(n,e){Object.keys(n).forEach(t=>{n[t]=e[t]})}function iS(n,e,t="",i=0){if(e){const s=e(n,t,i);if(s===void 0&&Pi(n)||s!==void 0)return s}if(Array.isArray(n))return n.map((s,r)=>iS(s,e,String(r),i+1));if(typeof n=="object"&&Vqe(n)){const s=Object.entries(n).map(([r,o])=>[r,iS(o,e,r,i+1)]);return Object.fromEntries(s)}return n}function Bqe(n,e){return iS(n,e)}function Fn(n,e=!1){return Bqe(n,(t,i,s)=>{if(s===1&&i==="queryKey")return Fn(t,!0);if(e&&Uqe(t))return Fn(t(),e);if(Pi(t))return Fn(y(t),e)})}function Vqe(n){if(Object.prototype.toString.call(n)!=="[object Object]")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}function Uqe(n){return typeof n=="function"}function XO(n,e){return typeof n=="function"?n(...e):!!n}function zqe(n=""){if(!A7())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=xj(n),t=qi(e);if(!t)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return t}var Hqe=class extends vj{find(n){return super.find(Fn(n))}findAll(n={}){return super.findAll(Fn(n))}},jqe=class extends yj{find(n){return super.find(Fn(n))}findAll(n={}){return super.findAll(Fn(n))}},Gqe=class extends Oqe{constructor(n={}){const e={defaultOptions:n.defaultOptions,queryCache:n.queryCache||new Hqe,mutationCache:n.mutationCache||new jqe};super(e),this.isRestoring=K(!1)}isFetching(n={}){return super.isFetching(Fn(n))}isMutating(n={}){return super.isMutating(Fn(n))}getQueryData(n){return super.getQueryData(Fn(n))}ensureQueryData(n){return super.ensureQueryData(Fn(n))}getQueriesData(n){return super.getQueriesData(Fn(n))}setQueryData(n,e,t={}){return super.setQueryData(Fn(n),e,Fn(t))}setQueriesData(n,e,t={}){return super.setQueriesData(Fn(n),e,Fn(t))}getQueryState(n){return super.getQueryState(Fn(n))}removeQueries(n={}){return super.removeQueries(Fn(n))}resetQueries(n={},e={}){return super.resetQueries(Fn(n),Fn(e))}cancelQueries(n={},e={}){return super.cancelQueries(Fn(n),Fn(e))}invalidateQueries(n={},e={}){var r,o;const t=Fn(n),i=Fn(e);if(super.invalidateQueries({...t,refetchType:"none"},i),t.refetchType==="none")return Promise.resolve();const s={...t,type:(o=(r=t.refetchType)!=null?r:t.type)!=null?o:"active"};return vc().then(()=>super.refetchQueries(s,i))}refetchQueries(n={},e={}){return super.refetchQueries(Fn(n),Fn(e))}fetchQuery(n){return super.fetchQuery(Fn(n))}prefetchQuery(n){return super.prefetchQuery(Fn(n))}fetchInfiniteQuery(n){return super.fetchInfiniteQuery(Fn(n))}prefetchInfiniteQuery(n){return super.prefetchInfiniteQuery(Fn(n))}setDefaultOptions(n){super.setDefaultOptions(Fn(n))}setQueryDefaults(n,e){super.setQueryDefaults(Fn(n),Fn(e))}getQueryDefaults(n){return super.getQueryDefaults(Fn(n))}setMutationDefaults(n,e){super.setMutationDefaults(Fn(n),Fn(e))}getMutationDefaults(n){return super.getMutationDefaults(Fn(n))}},Wqe={install:(n,e={})=>{const t=xj(e.queryClientKey);let i;if("queryClient"in e&&e.queryClient)i=e.queryClient;else{const o="queryClientConfig"in e?e.queryClientConfig:void 0;i=new Gqe(o)}yh||i.mount();let s=()=>{};if(e.clientPersister){i.isRestoring.value=!0;const[o,a]=e.clientPersister(i);s=o,a.then(()=>{var l;i.isRestoring.value=!1,(l=e.clientPersisterOnSuccess)==null||l.call(e,i)})}const r=()=>{i.unmount(),s()};if(n.onUnmount)n.onUnmount(r);else{const o=n.unmount;n.unmount=function(){r(),o()}}n.provide(t,i)}};function qqe(n,e,t){const i=zqe(),s=lt(()=>{const f=Fn(e);typeof f.enabled=="function"&&(f.enabled=f.enabled());const m=i.defaultQueryOptions(f);return m._optimisticResults=i.isRestoring.value?"isRestoring":"optimistic",m}),r=new n(i,s.value),o=OS(r.getCurrentResult());let a=()=>{};ki(i.isRestoring,f=>{f||(a(),a=r.subscribe(m=>{YO(o,m)}))},{immediate:!0});const l=()=>{r.setOptions(s.value),YO(o,r.getCurrentResult())};ki(s,l),B9(()=>{a()});const c=(...f)=>(l(),o.refetch(...f)),d=()=>new Promise((f,m)=>{let g=()=>{};const b=()=>{if(s.value.enabled!==!1){r.setOptions(s.value);const w=r.getOptimisticResult(s.value);w.isStale?(g(),r.fetchOptimistic(s.value).then(f,x=>{XO(s.value.throwOnError,[x,r.getCurrentQuery()])?m(x):f(r.getCurrentResult())})):(g(),f(w))}};b(),g=ki(s,b)});ki(()=>o.error,f=>{if(o.isError&&!o.isFetching&&XO(s.value.throwOnError,[f,r.getCurrentQuery()]))throw f});const h=i7(o);for(const f in o)typeof o[f]=="function"&&(h[f]=o[f]);return h.suspense=d,h.refetch=c,h}function Kqe(n,e){return qqe(Dqe,n)}const Yqe={class:"p-4"},Xqe={class:"font-light my-2"},Qqe={class:"font-medium text-lg"},Zqe=Fe({__name:"ModalConfirmDeleteUser",props:{member:{},callback:{type:Function,default:()=>{}}},setup(n){const e=n,{community:t}=et(ln()),i=async()=>{var o,a,l,c;const r=await Qe.delete("user-community/".concat((o=e.member.user_community)==null?void 0:o._id),{data:{community_id:(a=t.value)==null?void 0:a._id}});switch(r==null?void 0:r.status){case 200:e.callback(),tt("Thành viên đã bị xoá khỏi cộng đồng","success");break;case 400:tt(((c=(l=r==null?void 0:r.response)==null?void 0:l.data)==null?void 0:c.message)||"Có lỗi xảy ra, vui lòng thử lại sau","error");break;case 500:tt("Có lỗi xảy ra từ server","error");break;default:tt("Có lỗi xảy ra, vui lòng thử lại sau","error");break}s()},s=async()=>{await qe.dismiss()};return(r,o)=>(I(),O("div",Yqe,[o[2]||(o[2]=_("h3",{class:"font-medium text-lg text-black"}," Xoá thành viên khỏi cộng đồng ",-1)),_("h4",Xqe,[o[0]||(o[0]=be(" Bạn có chắc chắn muốn xoá ")),_("span",Qqe,Q(r.member.full_name),1),o[1]||(o[1]=be(" ra khỏi cộng đồng "))]),_("div",{class:"flex justify-end gap-2 items-center"},[_("div",{onClick:s,class:"bg-gray4 rounded-lg py-1 px-5 text-base font-medium"}," Huỷ "),_("div",{onClick:i,class:"bg-blue1 px-5 py-1 text-white font-medium text-base rounded-lg"}," Xoá ")])]))}}),Jqe={class:"p-4"},eKe={class:"font-light text-base my-1"},tKe={class:"font-medium text-lg"},nKe={key:1,class:"font-light text-base my-2 items-center"},iKe={class:"font-medium text-lg"},sKe={class:"font-medium text-base"},rKe={class:"flex justify-end gap-2 mt-1 items-center"},oKe=Fe({__name:"ModalSuspendMember",props:{member:{},callback:{type:Function,default:()=>{}}},setup(n){const e=[{id:"time-12",label:"12 giờ",hours:12},{id:"time-24",label:"24 giờ",hours:24},{id:"time-72",label:"3 ngày",hours:72},{id:"time-168",label:"7 ngày",hours:168},{id:"time-336",label:"14 ngày",hours:336},{id:"time-672",label:"28 ngày",hours:672}],t=n,{community:i}=et(ln()),s=K(e[0].id),r=async()=>{await qe.dismiss()},o=async()=>{var d,u,h,f,m,g,b;const a=e.find(w=>w.id===s.value),l=(u=(d=t.member)==null?void 0:d.user_community)==null?void 0:u.unlock_message_at,c=await Qe.patch("user-community/".concat((h=t==null?void 0:t.member)==null?void 0:h._id,"/unlock"),{unlock_message_at:l?null:a!=null&&a.hours?_t().add(a.hours,"hour").toDate():null,community_id:(f=i.value)==null?void 0:f._id});(c==null?void 0:c.status)===200&&((b=t.callback)==null||b.call(t,l?null:(g=(m=c==null?void 0:c.data)==null?void 0:m.unlock_message_at)!=null?g:null)),r()};return(a,l)=>{var c,d,u,h,f,m,g,b;return I(),O("div",Jqe,[l[6]||(l[6]=_("div",{class:"text-lg font-medium mb-1"},"Đình chỉ thành viên",-1)),(d=(c=a.member)==null?void 0:c.user_community)!=null&&d.unlock_message_at?(I(),O("div",nKe,[_("span",iKe,Q((h=a.member)==null?void 0:h.full_name),1),l[4]||(l[4]=be(" còn ")),_("span",sKe,Q(y(_t)((m=(f=a.member)==null?void 0:f.user_community)==null?void 0:m.unlock_message_at).from(y(_t)(),!0)),1),l[5]||(l[5]=be(" đình chỉ "))])):(I(),O(Ue,{key:0},[_("div",eKe,[l[1]||(l[1]=be(" Bạn muốn đình chỉ ")),_("span",tKe,Q((u=a.member)==null?void 0:u.full_name),1),l[2]||(l[2]=be(" bao lâu? "))]),l[3]||(l[3]=_("div",{class:"mt-1 mb-2 font-normal"}," Họ sẽ có thể xem cộng đồng nhưng không thể đăng bài, bình luận trong khung thời gian đã chọn. ",-1)),L(y(Tc),{value:e[0].id,modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=w=>s.value=w)},{default:j(()=>[(I(),O(Ue,null,ct(e,w=>_("div",{key:w.id,class:"py-1 flex items-center px-1.5"},[L(y(La),{alignment:"center",mode:"md",value:w.id,"label-placement":"end",color:"blue1",justify:"start"},{default:j(()=>[L(y(Nd),{class:"text-wrap text-lg my-1"},{default:j(()=>[be(Q(w.label),1)]),_:2},1024)]),_:2},1032,["value"])])),64))]),_:1},8,["value","modelValue"])],64)),_("div",rKe,[_("div",{onClick:r,class:"bg-gray4 py-1 px-5 rounded-lg font-medium"}," Huỷ "),_("div",{onClick:o,class:"bg-blue1 py-1 px-5 rounded-lg text-white font-medium"},Q((b=(g=a.member)==null?void 0:g.user_community)!=null&&b.unlock_message_at?"Huỷ đình chỉ":"Đình chỉ"),1)])])}}}),aKe={class:"h-[50%]"},lKe=["onClick"],cKe=Fe({__name:"ModalMemberRoleDrop",props:{roles:{},selectedRole:{}},setup(n){const e=async t=>{qe.dismiss(t,"confirm")};return(t,i)=>(I(),ve(y(At),{class:"ion-padding-vertical",color:"white1","scroll-y":!1},{default:j(()=>[_("section",aKe,[(I(!0),O(Ue,null,ct(t.roles,(s,r)=>{var o;return I(),O("div",{key:r},[_("div",{onClick:a=>e(s),class:gt(["flex flex-1 py-2.5 mb-2 rounded-md px-8",{"bg-blue1-tint1":(s==null?void 0:s.value)===((o=t.selectedRole)==null?void 0:o.value)}])},Q(s.label),11,lKe)])}),128))])]),_:1}))}}),dKe={class:"h-[50%] overflow-y-scroll pb-10"},uKe=["onClick"],hKe=Fe({__name:"ModalMemberLevel",props:{levels:{},selectedLevel:{}},setup(n){const e=async t=>{qe.dismiss(t,"confirm")};return(t,i)=>(I(),ve(y(At),{class:"ion-padding-vertical",color:"white1"},{default:j(()=>[_("section",dKe,[(I(!0),O(Ue,null,ct(t.levels,(s,r)=>{var o;return I(),O("div",{key:r},[_("div",{onClick:a=>e(s),class:gt(["flex flex-1 py-2.5 mb-2 rounded-md px-8",{"bg-blue1-tint1":(s==null?void 0:s.value)===((o=t.selectedLevel)==null?void 0:o.value)}])},Q(s.label),11,uKe)])}),128))])]),_:1}))}}),fKe={1:"Thành viên",2:"Admin",3:"Sale"},pKe={class:"ion-padding"},mKe={class:"border-b-2 border-b-white2 pb-2"},gKe={class:"text-lg font-medium mb-1"},bKe={class:"font-normal"},vKe={key:0,class:"text-lg font-light mb-1"},yKe={class:"font-normal"},wKe={class:"text-lg font-light"},xKe={class:"font-normal"},_Ke={key:0},kKe={key:1},EKe={key:0},TKe={key:0},CKe={key:0,class:"text-gray2"},SKe=Fe({__name:"ModalMemberSetting",props:{member:{},isAdmin:{type:Boolean,default:!1},canManage:{type:Boolean,default:!1},isOwner:{type:Boolean,default:!1}},setup(n){const e=()=>{qe.dismiss("suspend")},t=async()=>{await qe.dismiss("remove")},i=async()=>{await qe.dismiss("block")};return(s,r)=>{var o,a,l,c,d;return I(),O("div",pKe,[_("section",mKe,[_("div",gKe,[_("span",bKe,Q(s.member.full_name),1)]),s.isAdmin?(I(),O("div",vKe,[r[0]||(r[0]=be(" Email: ")),_("span",yKe,Q(s.member.email),1)])):re("",!0),_("div",wKe,[r[1]||(r[1]=be(" Vai trò: ")),_("span",xKe,Q(s.member.user_community?y(fKe)[s.member.user_community.role]:""),1)])]),_("section",{onClick:i,class:"text-base pt-4 py-1 mb-1"},[(o=s.member)!=null&&o.blacklist?(I(),O("div",kKe,"Bỏ chặn")):(I(),O("div",_Ke,"Chặn"))]),s.isAdmin?(I(),O("section",EKe,[s.canManage||s.isOwner?(I(),O("div",TKe,[_("div",{onClick:e,class:"text-base py-1 mb-1 items-center"},[r[2]||(r[2]=be(" Đình chỉ thành viên ")),(l=(a=s.member)==null?void 0:a.user_community)!=null&&l.unlock_message_at?(I(),O("span",CKe,Q("Còn ".concat(y(_t)((d=(c=s.member)==null?void 0:c.user_community)==null?void 0:d.unlock_message_at).from(y(_t)(),!0))),1)):re("",!0)]),_("div",{onClick:t,class:"text-red-500 font-medium text-base py-1"}," Xóa thành viên khỏi cộng đồng ")])):re("",!0)])):re("",!0)])}}}),AKe={class:"pb-10 [overflow-wrap:anywhere]"},IKe={class:"mb-2"},PKe={class:"flex justify-between items-center mb-2 gap-4"},RKe={class:"text-center text-base text-gray2 font-medium"},$Ke={class:"flex mb-2 bg-white p-2 rounded-lg"},LKe={class:"size-10 rounded-full"},OKe=["src"],DKe={class:"flex-1 mr-4 ml-2.5"},MKe={class:"flex justify-between"},NKe={class:"flex-1"},FKe={class:"flex"},BKe=["onClick"],VKe={key:0},UKe={class:"text-blue2 font-light text-sm"},zKe={key:0,class:"text-sm text-gray2 pb-0.5"},HKe={key:0,class:"text-sm font-light mt-0.5"},jKe={key:1,class:"text-xs"},GKe={class:"text-sm text-gray2 font-light my-1"},WKe={class:"font-medium text-black"},qKe={class:"text-base font-normal [overflow-wrap:anywhere]"},KKe={key:1,class:"flex items-center justify-between my-1 font-light"},YKe={key:0,class:"flex items-center gap-2"},XKe={class:"flex items-center gap-2"},QKe={key:2},ZKe={class:"flex gap-2.5"},JKe={key:2,class:"flex gap-3"},eYe=Fe({__name:"TabMember",props:{toRequestMember:{type:Boolean,default:!1},onCallbackUnMount:{type:Function,default:()=>{}}},setup(n){var le,Se,ne;const e=n,t=(le=Object.values(jy))==null?void 0:le.map((ie,me)=>({value:++me,label:ie})),i=[{value:void 0,label:"Tất cả"},...t,{value:"wait",label:"Chờ duyệt"}],s=ln(),r=Li(),o=en(),{userCommunity:a}=et(r),{community:l,communityLevel:c,communityLevelPluck:d}=et(s),{userInfo:u}=et(o),h=Rr(),f=Va(),m=gn(),g=ie=>{var me;h.sendMessageSocket("createSingleChatRoom",{user_id:ie,community_id:(me=l.value)==null?void 0:me._id},async V=>{V!=null&&V._id&&(await f.setActiveRoom(V),m.push({name:"ChatRoom",params:{id:V==null?void 0:V._id}},Wt))})},b=K([{value:"all",label:"Tất cả Level"},{value:"zero",label:"Level 0"},...(ne=(Se=c.value)==null?void 0:Se.map((ie,me)=>({value:ie._id,label:"Level ".concat(me+1)})))!=null?ne:[]]),w=K([]),x=K(""),k=K(e.toRequestMember?i.pop():i[0]),E=K(b.value[0]),T=K(!1),P=K(1),C=K(!1),A=lt(()=>{var ie,me,V;return((ie=a.value)==null?void 0:ie.status)===ms.Joined||((me=u.value)==null?void 0:me._id)===((V=l.value)==null?void 0:V.owner_id)}),R=lt(()=>{var ie,me,V,F;return(((ie=a.value)==null?void 0:ie.role)===Ei.Admin||((me=u.value)==null?void 0:me._id)===((V=l.value)==null?void 0:V.owner_id))&&J.isEmpty((F=l.value)==null?void 0:F.member_last_limit_package)}),M=lt(()=>{var ie;return((ie=a.value)==null?void 0:ie.role)===Ei.Admin}),N=async(ie=1,me=!1)=>{var z,se,Te,ke,Ce,ge,He,Ge,mt;me||(C.value=!0);const V={page:ie,limit:20,keyword:(z=x.value)!=null?z:void 0,"filter[status]":((se=k.value)==null?void 0:se.value)==="wait"?ms.Waiting:ms.Joined,"filter[role]":((Te=k.value)==null?void 0:Te.value)==="wait"||(ke=k.value)==null?void 0:ke.value,"filter[level_id]":((Ce=k.value)==null?void 0:Ce.value)==="wait"?void 0:E.value.value},{data:F}=await Qe.get("/community/".concat((ge=l.value)==null?void 0:ge._id,"/users"),{params:V});J.isEmpty(F)?T.value=!1:((He=F==null?void 0:F.meta)!=null&&He.hasNextPage?(P.value++,T.value=!0):T.value=!1,me?w.value=[...w.value,...(Ge=F.data)!=null?Ge:[]]:w.value=(mt=F==null?void 0:F.data)!=null?mt:[]),C.value=!1},U=()=>{A.value&&(N(1,!1),P.value=1,T.value=!1)};tr(async()=>{U()}),ki([E,k],()=>{U()});const G=ie=>{var z,se;const me=ie.point;if(me<=0)return 0;const V=(z=d.value)==null?void 0:z.sort((Te,ke)=>Te-ke),F=(se=V==null?void 0:V.findIndex(Te=>Te>me))!=null?se:0;return F>0&&F!=null?F:0},B=async()=>{const ie=await qe.create({component:cKe,componentProps:{roles:R.value?i:[{value:void 0,label:"Tất cả"},...t],selectedRole:k.value},initialBreakpoint:.5,mode:"ios"});await ie.present();const{data:me,role:V}=await ie.onWillDismiss();V==="confirm"&&(k.value=me)},te=async(ie,me,V=!1)=>{var Te,ke,Ce,ge,He;const F=((Te=ie.user_community)==null?void 0:Te.role)!==Ei.Admin&&ie._id!==((ke=a.value)==null?void 0:ke.user_id)&&ie._id!==((Ce=l.value)==null?void 0:Ce.owner_id),z=await qe.create({component:SKe,componentProps:{member:ie,isAdmin:V,canManage:F,isOwner:((ge=u.value)==null?void 0:ge._id)===((He=l.value)==null?void 0:He.owner_id)},mode:"ios",initialBreakpoint:.35});z.present();const{data:se}=await z.onWillDismiss();switch(se){case"suspend":X(ie,me);break;case"remove":he(ie,me);break;case"block":de(ie,ie==null?void 0:ie.blacklist);break}},X=async(ie,me)=>{(await qe.create({component:oKe,componentProps:{member:ie,callback:F=>ue(me,F)},mode:"ios",cssClass:"confirmrm"})).present()},ue=(ie,me)=>{console.log("asdasds",ie,me),w.value[ie]&&w.value[ie].user_community&&(w.value[ie].user_community.unlock_message_at=me!=null?me:null)},he=async(ie,me)=>{(await qe.create({component:Zqe,componentProps:{member:ie,callback:()=>Ie(me)},mode:"ios",cssClass:"confirmrm"})).present()},Ie=ie=>{console.log("dleetee"),w.value.splice(ie,1)},xe=async()=>{const ie=await qe.create({component:hKe,componentProps:{levels:b.value,selectedLevel:E.value},initialBreakpoint:.5,mode:"ios"});await ie.present();const{data:me,role:V}=await ie.onWillDismiss();V==="confirm"&&(E.value=me)},Be=async ie=>{N(P.value,!0),setTimeout(()=>ie.target.complete(),500)},Pe=async(ie,me)=>{ie&&await(await vx.create({message:ie!=null?ie:"",duration:1500,position:"top",swipeGesture:"vertical",mode:"ios",cssClass:me})).present()},Ae=async(ie,me=ms.Joined)=>{var V;try{const F={status:me,community_id:(V=l.value)==null?void 0:V._id},{status:z}=await Qe.patch("/user-community/".concat(ie),F);z===200?Pe("Đã ".concat(me===ms.Joined?"chấp nhận":"từ chối"," thành viên mới"),"success"):Pe("Đã ".concat(me===ms.Joined?"chấp nhận":"từ chối"," thành viên mới"),"warning")}catch(F){Pe("Có lỗi khi duyệt thành viên","warning")}finally{U()}};_h(()=>{e.onCallbackUnMount()});const de=async(ie,me)=>{var F,z;const{status:V}=await Qe.patch("/user-community/black-list-user",{blacklist:ie==null?void 0:ie._id,community_id:(F=l.value)==null?void 0:F._id});(V===200||V===201)&&(w.value=(z=w.value)==null?void 0:z.map(se=>se._id===(ie==null?void 0:ie._id)?{...se,blacklist:!me}:se),Pe(me?"Đã bỏ chặn ".concat(ie==null?void 0:ie.full_name,"."):"Đã chặn ".concat(ie==null?void 0:ie.full_name,"."),"success"))},we=ie=>{ie.target.src="/upload-user.png"},ze=ie=>{m.push({name:"DetectUserCommunityScreen",params:{userId:ie}})};return(ie,me)=>(I(),ve(y(At),{class:"flex-col ion-padding",color:"white1"},{default:j(()=>{var V,F;return[_("div",AKe,[_("section",IKe,[_("div",PKe,[_("div",{onClick:B,class:"shadow-sm flex-1 py-1.5 text-base px-3.5 text-nowrap rounded-lg bg-gray1"},Q((V=k.value)==null?void 0:V.label),1),((F=k.value)==null?void 0:F.value)!=="wait"?(I(),O("div",{key:0,onClick:xe,class:"shadow-sm py-1.5 flex-1 text-base px-3.5 flex text-nowrap rounded-lg bg-gray1"},Q(E.value.label),1)):re("",!0)]),_("form",{class:"w-full",onSubmit:qt(U,["prevent"])},[si(_("input",{"onUpdate:modelValue":me[0]||(me[0]=z=>x.value=z),class:"shadow-st w-full text-base py-1.5 px-2.5 rounded-lg bg-white",placeholder:"Tìm kiếm"},null,512),[[Ti,x.value]])],32)]),y(J.isEmpty)(w.value)||C.value?(I(),O(Ue,{key:0},[me[1]||(me[1]=_("div",{class:"flex justify-center mt-[20%]"},[_("img",{src:hm,class:"mr-1"})],-1)),_("div",RKe,Q(C.value?"Đang tải danh sách thành viên...":"Không tìm thấy thành viên"),1)],64)):(I(!0),O(Ue,{key:1},ct(w.value,(z,se)=>{var Te,ke,Ce,ge,He,Ge,mt,ut,xt,kt,It,Je,rt,Ct,Pt,Xt;return I(),O("section",{key:z==null?void 0:z._id},[_("div",$Ke,[_("section",null,[_("div",LKe,[(I(),O("img",{src:(Te=z==null?void 0:z.avatar)!=null?Te:"/upload-user.png",key:(ke=z==null?void 0:z.avatar)!=null?ke:"/upload-user.png",class:"size-10 rounded-full object-cover",onError:we,placeholder:"/upload-user.png"},null,40,OKe))])]),_("section",DKe,[_("div",MKe,[_("div",NKe,[_("div",FKe,[_("div",{onClick:mn=>ze(z._id),class:"text-base font-medium flex-1"},[be(Q((Ce=z==null?void 0:z.full_name)!=null?Ce:"-")+" ",1),(ge=z==null?void 0:z.user_community)!=null&&ge.role&&z.user_community.role!=y(Ei).Member?(I(),O("span",VKe,[me[2]||(me[2]=be(" • ")),_("span",UKe,Q(y(jy)[z.user_community.role]),1)])):re("",!0)],8,BKe)]),M.value?(I(),O("div",zKe,Q(z.email),1)):re("",!0)])]),M.value?(I(),O(Ue,{key:0},[((He=k.value)==null?void 0:He.value)!=="wait"?(I(),O("div",HKe," Tham gia: "+Q(y(_t)(z==null?void 0:z.created_at).from(y(_t)())),1)):(I(),O("div",jKe,[_("div",null,Q("Email: ".concat(z==null?void 0:z.email)),1),_("div",null,Q("Điện thoại: ".concat(z==null?void 0:z.phone)),1)]))],64)):re("",!0),_("div",GKe,[me[3]||(me[3]=be(Q("Hoạt động ")+" ")),_("span",WKe,Q(y(_t)(z==null?void 0:z.last_deactivated_at).fromNow()),1)]),_("div",qKe,Q((Ge=z==null?void 0:z.bio)!=null?Ge:""),1),((mt=k.value)==null?void 0:mt.value)!=="wait"?(I(),O("div",KKe,[M.value?(I(),O("div",YKe,[L(y(fe),{icon:y(uB),class:"size-4"},null,8,["icon"]),_("span",null,Q((ut=z.user_community)!=null&&ut.expiration_at?"Trả phí":"Miễn phí"),1)])):re("",!0),_("div",XKe,[L(y(fe),{icon:y(Ybe),class:"size-4"},null,8,["icon"]),_("span",null,"Level "+Q(G(z==null?void 0:z.user_community)),1)])])):re("",!0),(xt=z==null?void 0:z.user_community)!=null&&xt.unlock_message_at&&y(_t)((kt=z==null?void 0:z.user_community)==null?void 0:kt.unlock_message_at).isAfter(y(_t)())?(I(),O("div",QKe,Q("Còn ".concat(y(_t)((It=z==null?void 0:z.user_community)==null?void 0:It.unlock_message_at).to(y(_t)(),!0)," đình chỉ")),1)):re("",!0)]),_("section",ZKe,[y(u)&&((Je=y(u))==null?void 0:Je._id)!=(z==null?void 0:z._id)?(I(),ve(y(fe),{key:0,onClick:mn=>g(z._id),icon:y(Ax),class:"size-6 text-gray2"},null,8,["onClick","icon"])):re("",!0),z._id!==((rt=y(a))==null?void 0:rt.user_id)?(I(),ve(y(fe),{key:1,onClick:mn=>{var In,ci;return te(z,se,((In=y(u))==null?void 0:In._id)===((ci=y(l))==null?void 0:ci.owner_id)||M.value)},icon:y(qbe),class:"size-6 text-gray2"},null,8,["onClick","icon"])):re("",!0),((Ct=k.value)==null?void 0:Ct.value)==="wait"&&(M.value||((Pt=y(u))==null?void 0:Pt._id)===((Xt=y(l))==null?void 0:Xt.owner_id))?(I(),O("div",JKe,[L(y(fe),{onClick:mn=>{var In;return Ae((In=z==null?void 0:z.user_community)==null?void 0:In._id,y(ms).Joined)},icon:y(nB),class:"size-6 text-green-500 shadow-st rounded-md"},null,8,["onClick","icon"]),L(y(fe),{onClick:mn=>{var In;return Ae((In=z==null?void 0:z.user_community)==null?void 0:In._id,y(ms).Refuse)},icon:y(ks),class:"size-6 text-red-500 shadow-st rounded-md"},null,8,["onClick","icon"])])):re("",!0)])])])}),128))]),T.value?(I(),ve(y(Zn),{key:0,onIonInfinite:Be,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1}))}}),tYe={key:0,fill:"none",height:"36",viewBox:"0 0 33 32",width:"36",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},nYe={key:1,fill:"none",height:"36",viewBox:"0 0 33 32",width:"36",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},iYe={key:2,fill:"none",height:"36",viewBox:"0 0 33 32",width:"36",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},sYe=Fe({__name:"RankMedal",props:{type:{default:"none"}},setup(n){return(e,t)=>(I(),O("div",lJ(G7(e.$attrs)),[e.type==="gold"?(I(),O("svg",tYe,t[0]||(t[0]=[_("rect",{fill:"url(#pattern0_3333_12538)",height:"32",width:"32",x:"0.330078"},null,-1),_("defs",null,[_("pattern",{id:"pattern0_3333_12538",height:"1",patternContentUnits:"objectBoundingBox",width:"1"},[_("use",{transform:"scale(0.0078125)","xlink:href":"#image0_3333_12538"})]),_("image",{id:"image0_3333_12538",height:"128",width:"128","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABZcSURBVHic7Z15kB1XdcZ/p/sts2vfNTMytmwTV7C8sBSkAENRLGEPsmUbnCJQJpAykEARW7bjCdiSMZBQUBVTprKAwbIsE7aAgwuIQygICXgJMQELYUsz2jyafd7Wr/ue/NEzGkkz87rfzO3Xb2x/VVOaebrd57y+X5977r3nnCs8Q6FH+trwq78HbEX0XJRzgeeBdoK0AcuBjqnmk8AoaBGVcYQnEZ5A5QlgP5nsr2RjXzGlr5IoJG0FbEGPfbSdSu6lCK8AXgm8EMhZur0H/BfIQ6j8O9nMT54phFjSBFDd7nLovMtw9BpU38bMG500yoh8H8OXmcx+Uy7o8xok1zqWJAG0/6atqPkwcAWwKmV1hoB7EfNZ6b79tynrUjeWFAF0YOc2VP4C1asAN219zoBB5LtgbpXu3T9LW5m4WBIE0P6bfx8NPgO8Jm1dYuJ7qPsR6f3E42krEoWmJoAevH4FjvSh8gEgk7Y+dcJH+Afc3I2yse9E2srMh6YlgB684Y8R+TSwOm1dFolBVD8ivbvvTluRudB0BND9fV3kKn+HyNVp62IVwv0Yc6303j6StiqnoqkIoAM3vgSjXwWeZ+2mXhUqHnhe+HvVB2MgMKAmbCMOuA44DmQzkMtCLgf5XPi7PRwCfaf07P4PmzddDJqGAHpo558AXwAW98SDACYKUCxDsQh+sDjFMi60tYY/ne3gLnryEYBeJz2771zsjWwgdQKoIhzaeQvCLYu5CRMFGJ+AyQQX6ESgvQ26OkIyyCIen+jn2Jz/c5E+Y0/BBaiRpnDdf12efMc/gly5oBsEJuz04dHQtDcSrgsrlsHKLnAWbBXuYSL37jRXElMjgOp2l4Gte1C2L+BiGB6DoZFwPE8Tjgurl4dkWJhF+Abdue0ifQ1mcIhUCKDa59Dv3Q1cVffFhSIcPxE6dM2EfA7WrIKOtvqvFe5n8/4dIvsW6bDUD6fRAlUR+r0vUm/nBwaODUL/0ebrfAhnGgNH4cjx+q2S8g4OnXunauNfyIYL1P4b/gqVv67rolIFjhxr/Di/UOSysHEdtOTru07ZKb27diej1NxoKAH04M7XIDxAPRs5E5Nw5Olw3F9KEIH1a2BZZz1XGYQ3SveuB5JS60w0jAD65PVbcJ2fU8/27cgYPH0Clljfn4bVK2H1inquGAHnhdJz64GkVDoVDfEB9PG+HI7zderp/MGh0Nlbyp0PcGIYjg/Vc8UKMPfpz6+1ugQ5HxrjBHZ4OxG2xW4/OARDowkq1GCMjIZEiI+LWbv6Y0mpcyoSHwL0qZuej2MeAeJ5REMjMFjXw1o6WLMKVi2P27qCupckHVOQKAFUt7v0b/0pYYBmNCYLcPhYsmbfdaGzDTJZcE75+sZAqQzFUnLyBdi0oZ61gp/Rvf9lSa4PJBtkMbD13cTt/Io35e0nqM+yTli3Otz1mw/lCgwcAz+BKacCR49D76ZwtzEaL+bQ1quBL9tXJkRiFkAf78vR6f0aOCu6scJTAyEJkkJ7K2zeGO8bex48OZDc1LMlD1s2x2srHKQ8cZ5s/XwlCVWScwI7vPcTp/MhHPeT7HzHgQ1r49M9l6t3/l4fyhU4ETMuROkl3/nepFRJhAB67KPtCDfEalzx4j+MhWLlcsjUOdq1tiSjyzTqI/2NeqRvAZsM0UjGAnj5dwHrYrU9nnC8ZDZTj+c9g1p+gg2o1vPdNxBUEgmRS+ZbCtfGajdZDL3uJLFuzeICN5JEsQSFmN/fyAeSUME6AfTgDS9D9aLohoQLPkmivXVh27ONxOBQvJmPsE37b3yRbfH2LYDjvC9Wu0IhWcdPBNYugYjyciWMcYgD1ffbFm+VALr/uvxUkmY0RsZtip6NFcvCII2lgJGxuC3fofuvq3OPuTbsWoCWjlcTJ0PXq4YRu0khk6l3By5dFIpxg1w6yHW+3KZouwRQeWOsduMTya74rV2VvBdvG+OTcVu+yaZYu09JeEOsdhMFq2JPheZdtGP+ObypTBKUY5vcxmEyJgEc3mxTrDUC6OGbzkPpjWw4namTEIKcwR8/hgazZZjKBP7kYHNGF5W9eCFvSq/2X3+OLbH2NoOMXhqrXVyPd4FQFzTwqI4dxsm2I5ksqGKqRdRv8kIek4XQeY2CupcAVopR2BsC1Fwcq12pbE3kXJDpt1sV400SFEcISqPN3/kQTgnjQIn3rGPAog8gl8RqljABnMjbC04p5WSS+RD32Tga71nHuZWtGwEXRrYIgsRDu50KODVe9syEQUyTLg171TD/IQpaR3hdBKwQQPf3dRHW3auNBiV0ZMYVt8RpU00JIDOmMSxEyqjGekar9Ok+KxXR7DiBbf4G4gQtLTZVOy4U3EnFLYROIQakSa3+LFT9eAklFX8DsH+x4uwMAYYNsdr5DU7pUhB/CXU+xA9FU433zCNghwBxlYkzvj3bEcS1krrRhjhLTqC/MlYz0/Dk16WH2ImlgZUCmVYIYKqFeAF0sdn9LEbMZ2SqRStOoB0CeNXWWA31OQJEQuP5AKZcthLpYskHiDm5b8Y1+GZD3Gdk7Cxt2iGA7xdiKW6CmdJsz2E2VCHOfFoNatTKlqqdIUC9Qxp40Zpn3OeGgVpQH9zopRn1q75q+aANkXZWAgMzqn45Org/m1tik/IGQ4IwZzECxi8NG4yV9GkrBHCQwaBajo5vbmmFaiIZTs8MVL3wGUVAvbLnOFkrCRVWCJAtmyc0qERTt6UVKsXnnMG5oAqVErTGIICpZHND2UUvA4MlAshL95VQjXbwMplwjPObfUcmBfjl0EeK8gE0QFWNXPZPVh6ite1gUT1gvBjRPh2dYJZAcEajYTzo6IrRrISIPmFLrMV4gOBhUy1Es3LZstDUPTcbmIEJwqGxKzoczFSLJQyP2hJtLyhU5T+NV3Qix/fO5YCGX/g5hJi2nF3RIRXGK7gq+lNboq0RoFoNfohq1kSN723tYf599TlnMISCX4J8Hlprr+4arwSqWU+y/2ZLujUCdLxo3zHggCnHSPlatTZ0GL3k8gOWDCqFcAhYuTayqamMgfCbzgvvftqWeKuJIQLfM9WiqonYGli9JvzXKzy7l4aNAW8qIWT6mcwDNQGmWlRR+Z5NFawSwMADqIqpTNRu2NoO7R1h51dip0Q98+BNhsNge0e0+a+MgyLG8K82VbBKgHzQ9aAoQ6Y8Hj2+r98U/usVIGh09e8YvkfS/klQnRkCN0QUjFLFlMcRGMyPH/2+TTXsDgGX3lVF5CtqAoJKRP7dyjUzy56l0YY6hBpjx01j7ssvGOWppfyWFlhRu45BUB5DTQAqd8tlD1lVzH4KrZG7AYLSWO3xXZhhvvEhatiwCCPVOXMHT0INgSZYuqY8DsFUP27sqV29TA3BNFlErJ89aJ0AuUvu+QUiv8QEIQlqYfU6aG8Pf/cK4dSwEQgM/sTTaDDHy6QGf+J4cvGL1dKM6W/rCGdENRCUx6bjBB/LXXSPtQWgaSSTRK/mk3CK6ZoPAvSeM1PEqTzeGH/Aq04lkA4QFIcx1SKmWiQojVAd7cdUS8lkMAVVmH4pRKD37Jpvvwb+zEukert9hRIiQG6/uRf4HWoIChFT1o5OWD31FqhCcST56OHpyFs1BKVR/PFj+OPHCIojM4T1LU9PjQ+lYU46oGvWQmftWNqgODg9jD6V+63ZZ1ehEIkQQC7fFwjcDuHqlYma6vWcBfmpog4aQGEoURLUyh2sp01smAAKwzPEy7dAd+3DUU1lMlz5A0T043J5MgWjE6ujks0FX0LoB/CLQ7WHAjcD55wfHuEKIQmKw4mRQHxwyvPPOqSqOBVLsxLjQ3FoZvNLBLaeX/MEUtUAv3gy3uOprL/sK3aUmY3ECCAX7PNAPwyACQgmI879ae+Ani0zfxsfiieglre+CGQm5k4ldzzI2ipgFnhQOHE6kXvPDp2/+aAQTDx90lqoIx+US+9KzDFKPE+68siOfwH+EMBtXYbbFpHQcvBJOH749M9alkMuXupBvVAXdCqWSXxBfEtvvleametPY/2mcLirgaAwdGoNo2/lL7r3LXYUmhuJl9LSQD+E4EG4NmCiNoB6z5pxCqdRHoXSSCL7BhKElsApY6fz1YQLW2d2/qo10L2l5qWnFbASKsYJPrx4hWojcQK0XLr3ACp903/7k4OoHxEYetY5sOIMS1Etw+QJCJo4qDSohCa/esYi0srV8Lxza9Ys1moFvzA487fqza0X7nsyKVWn0ZBierlt531SkHANWw3V8aNorY4UB855Pqxdf/rnOuVNF0dCH6FZoEH41hfmcFzXrIWzz6vd+b5HdeLYjI8kPJjf9vzPJKjxSTSsVsrEY+9am1f/f1Q1LCPvuGS7NiBuRDnXwwfhcP/sz0Ug2wa59sWc3r04mCBc1ZtvWNvUC5u6a95Cgyr+2BF0apYgIoOe579gKr4icTS0WE7p0csvc3C+j4aWR5wMma710SQYHYbfPTF38QQRyLSERHAbctTezE6eX557ZpPNwlnnwvLa5Wo18PDHj54yRZbA0eBV2Yvv+5F9pedGw6sleQ/v+FMV7pzRwCHTsQ4nysuvVODAb2CyxhzNyUC2BTKtsVKs6oKphn5ItVx7+OnsgrPPjzwUylRL4Z7DKY6tqnyw5eI9n7elchykUi6r8uiOj6PcPKOFkGlbjdMSUWZAFQaPw8DB6HIz4kImB24utAxOJv7BEaphJwdV8D0wlejCDZkMbN4Ca9ZFyjlZsfR0mbfkL9778XgK2kNq9dLKD1/xBRE57WyBcJ1gJZFqVauhbzB4vL44AnHCItIy9XNSzlRSi5qwo+uZboqEnb55S4xziZSgMDyrVrHCnS0X3ZvIiSBRSPbcwBrI/9b8mbc10wp6zfRnQWkMUy2R6Vhb2y/IZmHLObCxG44ehsFj8UqrqLFXp0gcWLkqdPRaog+Y0qCKP3F8rjiEL+X3B9fZUap+pFoxURWpPnbFp1TlI6f9R9whYRrVKpx4Gk4ch1LCMQVt7eGizup1IRFjwFTG8QvDc1gWvSO3be/1Iukdkd0UJTPLj1zxIUH+hjPWJSSTJ9O2CsnWcYRbsQDDJ2B8DAoTiw81E4H2Tli2PFycamuPfakGFfzJIXR2roSCXJ+/aM8di1Nu8WgKAgBUHr5iByJfZI4TR5yWTtzWlUi98/0ggMkJKE5CpQylEnjl8PMzp5SZTLhDl2sJzwzMt4ad3dFVc+duLqgGBIVh5o6OlgmE9+a37bmvvi+TDJqGAADBE9e9zy8O34wGm2b9pwhuvgunZRlia4o37Q+4lkolGR9TGiOozBMV7bgDmdZVn3DP/dxdVgRaQGpO4FxwWjp25PIdm/zCCTWVidPJqUpQHiMoj+HkO3FbliGZRR4KZavjfY+gPFoz8MVp6TKZtlWbQXYATUOAprEA+tTODTj0Ay6ECyVBYahm9K64OZx8O06+E3Eay2U1AcabxFQKc43xJyFuFrdt9akLXQaRHum+7fC8FzUQzWMBHHYw1fkATrYVZ/kmguJoGBY9h0nVwCMoegTFESTTEl6TbUUyefunhapi/DLqlzFeqWanAyBOuK7Rupwz3jMHw3bgs3YVXBiahwBw5eyPBLdtBU5LJ0FxZB6nKoT6ZQK/TFAaAREkk8dx84ibBTeDuLnYVkKNH1qewEeDKibwwg6POaNw8p24bSvmlyd6JU1CgKYYAvTQTWeD2U+EPmp8gtIopjxBrPSuMyEADjK9EjhtJabK26gawCzo1oiEHd+6PB7RxDlXum+1UudnMWgOC6DBNUi0zRYnQ6Z9Ndq6AlOZwFQm0HryCBRguqPtYMYP6apzmqrvBG6xpsgC0RwEEP6oruaOi9u6HLd1OVotE3iTaKVwck89aYi4OPkOnHxH6G8sBKrbaQICpD4EaP/OF6A8ZuVexkerRYxXDrN7bBFCHJxMC5Jrwcm0LX76efK+7guk+xO/tHOzhaEJLIBcubBBd447ORkk34WTD6tthc5cFYIqarwwF9Aoqr6PCQonU4BFMjhuu0gmgyOIk51yHrNTzmNCEUcaXAk8ewmgitCvVyR1f3EyoUOWnRVskgGWAT8PPUF7x7DVBeEqVW5MczMo3ROWD9/wEqB2oHyyuBd0T2rSlV4O3/ji1OSTNgGUHSlKNzj+Xhx/L5BeoSI1c6x/NA6pEUB1u4s6l6clH/ixbL5jQDbfMQD8ODUtDDtU+1IbitOzAIe2vgp0fXTDpCB75v690WrIWg75r0xLfHoEkDTNvxwjk73/5J+Z7P0gDYnDn1ud9IaBVAigj/flgLemITtUgIdlY9/J/Ovwd30kNX3g7br/ugWuKC0O6ViAzsobgHhnDSYBZw7PX1OcDcBy8l2vS0NwSkOApOn5linnvjXr07bgG0CCpcGikM4w0HAC6LGPtjNVLyAVCN+WrX2z0otkzR0TCN9JQ6UpDd5k60TwetB4C1DNvxWIH1prHbU8/lSHgTYq3psbLTSFIUDTNP/jUJy/1q6f/y5g5TSuhaHxQ2NDCaD9fStRXtNImadDvibdfzvvOC9n9ZWBbzRQodOh+loduMHKodBx0VgLYCrbAUt7qQtALE/fpDkMZAmcumIjFovGEkBS9f4H6clFn7TRfeAHwPHk1ZkHDV4UahgB9NDHNgJ/0Ch5c2iwV6Qvsq6MyL4AuD+qXXKQl2v/jbMTYxJCAy1A9rSw74bDOPFNe7qLQg6qDdskayABUvX+D9F7W/yTtnp2/wR4KjFtotGwZ9UQAoRh36QTdQMg7Kkn6kYERSXN5M0Xav9NWxshqEEWwFxFmgGoEtRv0t1UhwHQILFQuVPRIAIkF/cXCeHXsvmTdUcdy+ZdjwK/SkCjmArI1Y0Qk3yp2IGd20AuSFrO/Apwz4KvFd1rUZP6oJyvA395YdJikrcAQapzfxDn3gVfq+5XsRWzvjD5iT+7RAmgiiCNm9LMgf9eTP6d9Nx6APiFRX3qg3KlarK+U7LBiAdvOh/HbKnjilHQw+AcBo6i2oHwdhbsQMrC3/6Ze+wBvXSBFyvKPyMyCWwAswlkExB9SnSIHg7edD7c+n8LlB+JZAmQyxwkqD6C6gXAMYQB4AhweOrnKGg/wlGc/IBs7JtV4kv7b3gPKndRv7UyCIsfw4W9KJ9amHy9Vnp2//2Z/6FH+towlc0oG0C6gQ3ApqmfjSibgfXA/+IWnlrkN6iJ1HMD40AP7dwB3E1dhNWHpGf3ZZbkPwS8oo5LAlTfI727v2RDfpJINzEkJqRn170oVwPxc8G1jqXfyHvVtSYQoPrupdD5sEQIACC9u+5D9SrikaCKa75mTbiT3wfEObwoQLhGendbP+EzKSwZAgBI7+77MbwNqF2gR3hQNu8esia3u28YlahDmz1Etkv3roWvO6SAJUUAANmy6ztTM4MaJEgg02euUPIZeCCXS/dtX7cuN2EsOQIASPeuB8C8hbnDuIvks9+0LjTrfR2Y62iQCirvkJ7b7MtsAJYkAQCk5/YHQV4HnFGdUb8ta/sijipdgLz1ny7ArLDxIuq8UXpv+7ZteY3CkiUAgPTc9iNUXo9ySv04i97/LJw2DBQwzpuk99Yo36CpsaQJACC9t/0Y9PXAAYQfMJF9IDFhE/nvIvpD4ACqr5Utt/4wMVkNwv8DXU7LqUk1PMQAAAAASUVORK5CYII="})],-1)]))):re("",!0),e.type==="silver"?(I(),O("svg",nYe,t[1]||(t[1]=[_("rect",{fill:"url(#pattern0_3333_12617)",height:"32",width:"32",x:"0.330078"},null,-1),_("defs",null,[_("pattern",{id:"pattern0_3333_12617",height:"1",patternContentUnits:"objectBoundingBox",width:"1"},[_("use",{transform:"scale(0.0078125)","xlink:href":"#image0_3333_12617"})]),_("image",{id:"image0_3333_12617",height:"128",width:"128","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABkDSURBVHic3V17cFxXef999+57Vw/LsmwpknZXtuREcmRLluMkZQDTyUAhlEeJcQhNy6NAYSivmQ6lA6G0nQ7QdvqYKUxpp8MjTQKhQDMQJjxKKYOZNJYcS3Ity9LuSrIsy5L1WGnv7n2d/iHtem2vds9dnXuvzG/GM/Luuff79p7fPec73+Mcwq8pZmdnQ7qudxuG0SlJUhdjrAtAB4AaACEA9QAim83XACwDyABYBZAgooumaV6UZXnc4/Gcb2lpybjxO+wGua2AKMzNzYVzudyDjLFXAXg1gGMAfIJurwJ4EcDPiOi/vV7vL39dCHFHE4AxJk9NTZ1gjD0O4C248UbbjSyAHxPR19bW1r7X09OjOiRXOO5IAkxMTHTKsvxRAG8HsNtldRYBPG0Yxt/v379/3GVdLOOOIkAikThCRB8H8A4Astv63AITwA8YY38Zj8d/5bYyvLgjCDA9PX2vrut/Q0QPua0LDxhjP/J4PJ9oa2sbdluXStjRBEilUrtM0/wsEX0QgMdtfSzCBPCkz+f7eEtLy4LbymyFHUuARCLxe0T01wAa3dZlm1ggok9Eo9Gvua1IKew4AoyPj9d6vd5/AvCY27oIxreJ6A+i0eiS24oUY0cRIJFI3E9ET2LDYWMbTNOEaZrQdR0A4PF4IEkSJEmyUywATEmS9M729vb/sVsQL3YMAZLJ5LsBfBmAV9Q9c7kclpaWsLa2hkwmA0VRoCgKTNMs2V6SJASDQQSDQYTDYYTDYdTX1yMQCIhSCQAMxtiH4/H4l0TetFq4TgDGGCWTySeI6AkB98LS0hLm5+extLQERVFEqIhgMIhdu3ahqakJu3btAtH2Hxtj7B9isdjHiKg0Gx2CqwQYHx/3e73efwPw6Hbuk8lkcPnyZVy9ehWqaq9Tzu/3o6mpCa2trQgGg9u93VPr6+u/76Yn0TUCMMbkVCr1FIBHqr3H6uoqpqamcO3aNTDGBGpXGUSEPXv2oL29HbW1tdu51Xej0egjRKSL0s0KXCEAY0xKpVJfx4ZHzzKy2SwmJycxNzcnWLPq0NjYiM7Ozu2MCM9Go9FTRGSI1IsHjhOAMUapVOpfALzb6rWmaSKVSiGVSm1pyLkFSZIQjUYRi8WqtRG+Eo1G309Ejg5ljhMglUp9hjH2Z1avW19fx/nz55FOp+1QSxgikQi6u7sRiVgPTDLGPhWPx//KBrW2hKMESKVSDzHGnofFQM7s7CwuXry44976rSDLMjo7O9HS0mL1UhPAw7FY7Hkb1CoJxwiQSCRiRPQSLIRvGWOYnJxEKpWyUTP70NbWhgMHDlidEpYkSTrW3t4+YZdexbDd9QUAo6OjPiL6Dix0vmEYGBkZuWM7HwCmp6cxPDxsdeTaZZrmN1966SVhDrFycIQAoVDoUwCO8LZnjGFkZATXrl2zUStnsLCwgHPnzlklQX9jY+Mf26VTMWyfApLJ5D0AhgD4edozxjA8PIyFhR0bQa0KDQ0N6O3ttRJvyBHR0Wg0OmqnXrYSYDNn75eMsft4rxkZGcH8/LydasHr9aKmpgZ+vx9+vx9EBFVVkclksLq6CsOwZzm+b98+dHd3W7nkdDQafYWd7mJbkyxSqdS7AHB3fiqVsq3zJUlCc3MzmpqaUFdXt+WbyBjD4uIiZmZmcP36daE6zM3NIRKJoL29nfeSB6amph4D8HWhihTBthFgdHTUFw6HLwCI87S/fv06Xn75ZVtcuvv27UNHR4flqN7169cxNjYmLKgEbLiQDx8+jIaGBt5Lkpqm3d3Z2ZkTpkQRbDMCI5HIH4Kz8zVNw/nz54V3vizLOHToELq7u6sK6TY0NGBgYMBKZ1UEYwznz5+Hpmm8l8S8Xu97hSlwC2whwNzcXJgx9ie87cfGxoRH8bxeL/r7+9HU1LTt+/T29golgaqqGB+3lEH+p7OzsyFhChTBFgIoivK7APbytF1YWBA+7xMR7r33XtTU1Ai5nyRJOHTokIjwbwFzc3NWVjrNmqbZkiJnCwGI6H087RhjuHTpknD5Bw8eRH19vdB7ejwe3HPPPULvOT4+zu0fYIx9SKjwTQgnQCqV+g0AfTxtZ2dnkcmILbGrra2txgfPhfr6euzZs0fY/RRFsRLSPpxIJI4LE74J4QRgjL2fp51pmkgmk6LF48CBA8LvWQwLSzguJBIJ7lFAkqQPCBUOwQQYHx/3Y6NIsyLm5uaQy4ld2dTV1Vka+lVVxeLiIpaXl7mdP3V1dUJtgVwuh6tXr3K1ZYy9bfMZC4NQR5DX6/1NcFboXr58WaRoABuZOTzQNA1jY2M3pZJ5vV709PRwWfv19fVCfQMzMzNobm7maRrx+XyvBPAjUbJFTwEP8zRaWVmxJbGDZ37WdR2Dg4OYn5+/ye+gaRqGh4e51ueiVhd5pNNprK6ucrVljL1RpGzRBHg9TyM7cvnyOf2VMD09jfX19ZLfGYbBtST1+UTtO3EDvNMAgDeJlCuMAJOTkwcBRHnaLi4uihJbgNfr5Uq8qES+fLVQOdhRQWQh9N0+PT0tzNIV9kskSRrgabe6uopsNitKbAE8b6VpmhVl8wzvdkQLs9ks97So6/pRUXJFUrmfp5HoCFsePHN3LpcrG29oaGjgMgJFGoDFsPBsuJ41D0QSgIuVvMaOVWSzWaytrZVtU871GgwGuWP1dv2GlZUVrnZEtCNHgMM8jex6eMBGUGkrp0o2m93S8eTxeNDb28s1jRiGgaUleyq8LayMuNPrKkEIAcbHx2uxse9eWWSzWVtr91ZWVjA0NHTbSLCwsIAzZ86UnCbygZ5wOMwl4+rVq7ZlDOVyOV7n2O65uTk+hStAiCNIlmUuL4Ydxt+tWFlZwYsvvohgMAifzwdFUcqSrrOzkzvUa5f7uhjZbBZ+f2Vnn6ZpzQC2HUkTMgIQERcBRLt+y0FRFKysrJTt/La2Ntx1113c90wmk7aTmPcZaZomJOIlygbYMSMALxobGy0FjpaWlhypUeB9RkS0cwhARFxjqIU0KFsRDofR3d3NXbGjKApGR0cdKUG3YCPtEiFPCAE0TeNyju+EEcDn8+HIkSPwePjMH03TcPbsWds3nsiDV04ulxOyLa4QAqiqyhUfdbu4U5Ik9Pb2chlZwI0KJbscP6XA44oGAMMwhOQICiGAYRhcWju9i8etuOeeeyzt5jE2Nmbbmn8r8D4j0zSFDEmijMA1HsVN03SNBB0dHdi7lytPFcBGkcrs7KyNGt0O3mfDGINpmqVDmhYhhAC6rk/zjAJ+v597iBOJpqYmxGIx7vYLCwuYnJy0T6EtoGka1/Sk67pmmqaQJYmoEWBZ1/WKkYxgMOi4HVBXV2epHi+dTjtm8ZcCTwGLruuLRCTEpy6KANd0Xa9o4tfW1trmRi2FQCBgqSI3l8vh3LlzjupYDF3XuWwUwzBUXdeFlE8LIUA2m72o63rFDQ1qamqQyWQcebtkWUZvby+8Xr59FkzTxPDwsKPeymIwxqAoClc+gq7r3nQ6LeRwCiEEePDBBxXTNKlSx/p8Pni9XtsfMhGhp6eHe6MmxhhGR0dtjVRWgqqq8Hq9FQnLGANjjJ04cUKIU0VYOJiILvF4+hobG213qnR1dXFnCAPA5OSk67uRqKrKpfPmsxsTJVcYARhjQ7lcrqLHZO/evVBV1TZjsKWlxVKA58qVK67vQ2QYBrLZLNcyVdO0ddM0z4mSLXIE+JWmaXKlaWDv3r2F+U40IpEIurq6uNsvLy/jwoULwvWwiryLnIcAqqp6AZwWJVsYATRN+ykAbyULuq6uDoFAANlsVrgx2NXVxW3xK4qCkZER172TjDFks1mEQqGKK4DNKdbr8Xj+S5R8YQS477775ojoEk/AJxaLwTRNoaNAY2Mjd1mY0wGecsifXxCNVs6oz+VyDMCFw4cPC6unF53g/oKmaazS/J73yolcEvIWbboR4CmnS746uhIBTNOEpmlgjL0gUgfRBHieMUaVlnl1dXVoaGgAY2zLKh0rCAaD3G+/GwGerbC+vg7GGBoaGlBXV1e27WZKOwH4oUgdhBaHGobxgiRJC9lstjEQCJRNuDh48CBOnz4NRVEQCAS44/OlwLvkMwwDTU1NVW8bk81mMT8/L6S2QdO0wih08ODBsm0ZY8jlciCi+ZWVlR9vW3gRhBJgYGBAO3PmzJMAPpLL5cr6tdva2jAyMoJ0Oo10Oo36+vqqj2LhfftlWd72Xj8tLS24cuUKLly4sK3pK58CHolE0NbWVrZtLpfLL5u/ceLECaHRNDu2iPk6gIpWPhEVtlzRdX1bO4U4bck3NzdX7LRyWFtbK8Qbenp6yhI/v0oAACISvl+gcAIcPXr0DIBhnjq8WCxWeHszmUzVLmJJkhw16lRVrXoPolwuV9B1165dFY2/bDabf/vP9vX1na1KaBnYtUnU54GblN+qHY4dO1Z4A9LptOV8ASICEUFRlELhqa7rtvxTVRXpdBpra2uQJMmy3aLremHoJyIcPXq07Nt/y0v0eUvCOGHLVrHj4+NPHzhw4LOMsQPr6+tlI1wNDQ2IxWJIJBJgjGFlZQX19fWQZb4zJTaDIyCiQkc5BStTj67rWFlZKVzT0dGB3bvL756fXyUQ0eT4+Pi3tqXsFrBlBDh58qRBRF8ANqzdSg6Xvr6+QuTONE0sLy9bihVUKgq1A4qicOcNGIaB1dXVwm+KRCI4fLh8KaWqqoU0etM0/+LkyZO2JCnYtlWsz+f7KoApoLLDx+v14oEHHii4cfMk4H3AV65ccTzTiHePI8MwbvotkiThwQcfLBv2LXYQEVGCMfaN7WtcGrYRoKenR2WMfQzY6NC1tbWKtflHjtwoes1X4fKEmBVFQSKRcKTwxDAMJJNJrlFH07TbRrO+vj7s2rV1TQdjDOl0unCNaZofGRgYsO2H2X5gxNDQ0HOMsYcBFM7lrdAeFy9evOmzmpoarlw5IkJtbS18Pp+Q412LwRgrGIE8o02pHT8OHjx4E8lLIZPJFBt+3+vv739zlSpzwdbzAgDAMIyPyrL8EGPMrygKJEkqm/na19cHVVVvqsJNp9NQVRWRSKRstC9vRLoJxhjW1tZuWwJHo1Gueb/ouqwsyx+zR8sbsP3MoIGBgQkAhXMCM5lMxbn92LFjtyV15HI5LC8v74gI3lZQVRXXr1+/rfNbW1tx/PjxsqOSrus3xUWI6DOHDx9O2KZsXo7dAoCNo2KHhoZ+COAhYGOorqmpKbuOZozhzJkzmJi4/fQ0n8+HSCTCvVS0G6ZpYn19vaTjKx6PY2BgoOzIlV8lFNlIP+zr63uDEyeLO3JqGBGZsiy/E8AccMPQKTcSEBEGBgbQ09Nz23eqqmJpaekml6obyBu3i4uLJTv/0KFDuO+++8p2vmmaN3U+Ec3ruv4up46Vd/Tk0LNnz55gjP2YMSYBG0uimpqaim/y7OwsXnzxxS1dxYFAAIFAgDsFfLvQdR2Komzp6vb7/Th+/HjF7V8Nw7jVqDQAvKa/v//nQhUuA8fPDh4cHPwAgC8Vf1ZTU1Ox8zKZDE6fPl12py+Px1M4CUz09KDremEPn3Kjzp49e3D//fcjFCpfvKtpWqml8R/19/f/oxiN+eDK8fGDg4OfA/DpghJECIVCFevi8kfJnjt3rqIxKElSoQ5BlmXIssydL2iaJgzDgK7r0DQNmqZVXPr5/X709vYiHo9XXIKqqlrKj/BEf3//57gUFAhXCAAAg4ODXwZw09kCgUCg4psD3CjhyscPeEFEkGUZRHQbGfKVy4ZhWL5nR0cH7r33Xq7CzlvW+Xl8qb+//4PcQgXCdj/AVrh06dKHDhw4EATweP6zfCSv0nrf7/fj2LFj6OnpwdjYGCYmJriMQcaYsGCRJElob29Hd3c39/ayWxitX7106dKHhShVBVwbAQCAMUZDQ0NfBPCJ4s95p4Q8stksEokEUqmU7Y6g+vp6RKNRxGIx7qPostksFEW5bWQhoi8cOXLkk0TkWm66qwTIY2ho6COMsb/FLctSj8eDUChkKe6+tLSEmZmZQu7edoNERITdu3dj7969aG1ttZQIks90KjHqMMbYJ48ePfqFbSknADuCAAAwODh4CsBXUOLEEb/fj1AoZNm/r2la4UiYfO7h+vp6IbmjGD6fDx6PB+FwGLW1tYhEIqivr8fu3bstLy/z0bxSy1bGWBrAe48ePfpNSze1CTuGAABw8eLF96+vr3+aMXZbcR8Rwe/3IxAICNuvP/9mbicjuRj5DJ6tdiUnoplwOPznXV1d/yxEoAC4ZgSWgs/nO+X1eu9SFIVls9mbyJlPjsxvpRoIBLa91hfV8fniznI5jX6/3wyFQq1EdArAjiHAjhkBkslkM4BpADJwIzhSzrqXZRk+nw8+n8/xuIBpmlBVFaqqll1ZyLKMUChUPI2Ysiy3t7W1iT81qwrsmBGAMXaKiAq96PF4UFdXV3C5lhpSDcOAoihQFAVerxcej6fg+LEjH8AwjIJjqNJykogQCARK5T9Iuq4/AuDvhCpYJXYMAQA8WupD3l2/8x2jKErB4ePxeAoewGo8gcUeQSsOIr/fj2AwuKU8SZIexQ4hwI6YAqampvabpjmOCvrkK4qrrR/Ijwr5VPJi5LOL839Xc2+fz1e244thGEbX/v37hezzsx04Eg6uBMMwHgcHGSVJQjgcRn19PfeDLka+k/NvdvG/vCvYaufnj6urq6tDOBzm1snj8bzTkiCbsCOmACL6HSvt8w89GAwWonSqqjpWIpZfkuZ9B9WAMfYIgCfEamYdrk8Bk5OTvZIkvSziXnkjLR/FE0UIIoLH4ykYmaKWj7Is97a1tQ0LuVmVcH0EkGX5UVEdlQ/75nGrMZcf5k3T1E3TXGeM6QBARB5JksKSJHnykcJqjEerME3zUQCuEsD1YFAqlZoAEHdJhZew8QyEHcNmEaloNBp3MxjkqhGYSqXuh3udDwBPA3jKRfnRZDJ53EX57hKAMXbKRfGmx+N5xuPxPAPAzZMsSvo/nIJrBGCMyUR00i35RPSL1tbWmdbW1hki+oWLepxijLlmi7lGgKmpqdcA2OeWfNM0nyr1twtompqaerVbwt0cAdwc/uf8fv+z+f9s/l3+XHkbwRhzbRpwhQCjo6M+ALYWPVbAYEtLSyG/fPPvIRf1eev4+Dhf/ptguEKAUCj0egDb265rGyCi24b8Up85iHqPx/M6NwS7NQW4aflmVVX9z1s/VBTluwBc2z50M0LovFynBc7NzYWJ6A1Oyy3Cc52dnbedDHH33XenAXzfBX0AAIyxN87Pzws5DNIKHCdANpt9MwAhR59XiXJDvZvTQCiTyfy200LdmALcHP5XZVnecq9dxtgPACw7qM+tcPzZOEqA6enpBmzuEeASvt3W1rblPB+Px7NE9F0nFboFr52ZmSm/d5xgOEqAzVw4n5Myi8Fj6RuG4eY04DUMw1JuxHbhKAGIyM3h/1p7e3vFkzbi8fhPAFx1QJ+ScNop5BgBpqamWgC8wil5JfAMEVWsDCUiA8CzldrZiFdOT0/zn3q1TThGANM0T2Ez598lcA/tLjuFJF3XHQuSOTkFuDn8T0WjUe6Tttrb238JIGmfOhXh2LNyhABTU1P74V7WDRhjT1nJuiEixhhzrXiTiI5NTEx0OiHLEQKYpvkOuJh+xhirZkh3cxqALMtvd0KOU1OAIz9mC1zo6OiwnHUcj8fPAjhvgz68eMwJIbYTIJFIHAFw+2Z/zuHfq72QiJ4RqYhF3D05OVl+b1kBcGIEcDXnzTCMp6u9loieBODe9i0O+E1sJQBjjNzM+2OM/e926u/a29snAJwRqJIlENGjm2cF2gZbkxFTqdTdAGIWLlkGcJmILgO4whiLAHgrqjQgiajqt78ITwEYqPJaBuA/iGgNQPPmzid3AeDdaKh98xn+X5XyK8JWAvh8vpSqqkPYsAHmAMwAmGWMXSaiy0R0xTTNadM0rwSDwZmWlpbbzo5LJpPvwcaOGlZHK1OW5W3P4bIsP2MYxherkQ/gfbFY7F9v/WJ2djakKEqrJEnNkiS1McaaGWN3EdFdAFoAtGIjYXZEluXkdn9DObheG8iDRCJxavPMPCuE/VksFjshQn4ymfwZgFdZuMRgjL0nHo9/VYR8O7EjysMrIR6PP01EjwHgPjpFpDvXoh/BIKJ33QmdD9whBACAaDT6TSJ6B/hIoMmy/G1Rsj0ez7cA8JxUYQB4PBqNCj/h0y7cMQQAgGg0+iyAtwAofyQp8EJra+uiKLltbW3XAVQ6tFkF8EgsFqva7+AG7igCAEAsFvs+NlYG5Ugg3I1bYUpRGWMnY7HYd0TLtRt3HAEAIBaLPW+a5ptQOo07EwqFvidapt/v/w6A9RJf5YjobfF4XLhMJ3BHEgAAOjo6XjBN83UAbtp4n4iea2pqEn6U6L59+9YZY7emjWeI6OFoNPqcaHlO4Y4lAAB0dHT8nIh+C0DhgD6bCz2L770O4I3RaLSSbbCjcUcTAACi0egvNkkwAeAnmUzmebtkZTKZHwD4KYAJInptLBb7qV2ynML/AyKap8OoEC4BAAAAAElFTkSuQmCC"})],-1)]))):re("",!0),e.type==="bronze"?(I(),O("svg",iYe,t[2]||(t[2]=[_("rect",{fill:"url(#pattern0_3333_12623)",height:"32",width:"32",x:"0.330078"},null,-1),_("defs",null,[_("pattern",{id:"pattern0_3333_12623",height:"1",patternContentUnits:"objectBoundingBox",width:"1"},[_("use",{transform:"scale(0.0078125)","xlink:href":"#image0_3333_12623"})]),_("image",{id:"image0_3333_12623",height:"128",width:"128","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABsOSURBVHic3Z1/lF1Xdd8/+9773pv35veMpNGMxvphWbYbAyFxQLLJSqApK3EKNKHIsU1CFwUsmbQkgVXqwKK4tAkEmiyWEyyLtOkCCraFKVBWcEogcVNqSU68oJQYLxvZkvVjRj/mza/38/7a/eOONJJm5t373jv3vVG+a2nZM3Pe3fvds8/e++y9zz7CP1DowVsLqP0TYO9C9EZCbkS4HqQftAAMAX1Lw0vAHEgFwgVUXsLieVSeh+AFJHhW9j1T6d63SQ/SbQZMQT//ql4q+dsR+XmU1wOvAbKGHu8CTwNPYvG/UO+pfygCcU0LgB7aazN38g2ovAPVX2V5RaeNGvBtRD7P8MLX5c6/dztE1ziuSQHQh3fvAvlt4NeA0S6zMwP6KIH1afnNwz/uMi9N45oSAP3s7a9G9f2o3gPY3ebnKoTANxH+o+w7crTbzCTFNSEAevC2V6L6h8Abu81LMuj/xAo/IPf+7d93m5M4rGsB0Id+dhjxH0B4L+B0m58m4YP8GeJ+WPY9c6HbzKyFdSsAenDPv0D5T8CGbvPSFpTzoB+Q+45+odusrIZ1JwD64O4BsvIQ8PZu82IW8jihfa+897uz3ebkcqwrAdCHdu/Bsr4Ien2qdIAwVIIw+tm2wLKkEy/jZcLw1+W9T//v9Eklw7oRAD1w279E9GEgY+qZrq+UqiHVekjdU+quUvdBVVcdLyLkMpDLWuQyQj4r9OctMo7R1xQg/GvZd+SAyYe2iq4LgCrCw3s+ivBRA8+iVA2ZLQeUKtGkm0AuI/TlLYb7bPryFmLirSkPcvbI78gDhAae1jK6KgD64B05ssX/CnJ3O8+pe8qF+YDZRR8vMMXd6sg4MNznsGHQJpdp8/UpX2J08Z3djCR2TQD00F6b4slHgL2tPqNSDzk76zNX6vwiEoHBXpuxIZtCj9XGk/RrTOf3ygNP+saYawJdEQB9AIuxPV9AuKeVz3u+cmbGo7jYVe15CYMFm8mNDtmWNYI8zsjkXXLnl1PWXyvRjui2BFWE8d1/2srkqypTRY9nT9TXzeQDzFcCfvRynamizxr+ZQz0bRRPHlDt/ILsOEF9+LZ/B/rvm/1czVOOT3tU6+tn4ldDT9Zi+5hDPtfK2pIPyf7DHzfOVCOKnSSmD+9+I8gTNJnIubDgc/q8T2jGqU8dlsDkhgyjg03nq0Is3iT3HnkiDb5WQ8cEQA/s2Y7wdzSRvlWFqaLP2dmu+EdtY+OQzeSGpsMas4j1Gtn31LE0eLoaHfEB9NAtWUS/ShOTHyq8NO1es5MPcH4u4MVpr1nNNYyGh/TgrcYCYo3QGSdwpv9DIK9OOlyXJn++vL7tfRLMlwJenHKbFYKfJsx8MCWWrkDqJkA/s+cfYfM9IJdovMJLUx7zlY7viFLFQMHm+nEHSR5GrGMFt6ZdU5CqAOihvTYzJw8jvCbZB+D4WZfZFAM7tm1R6CuQyThkshlEBLfu4fselVIV309P8Ib7bbaPNaXZjzJy3evSjA+kW2Qxe/KdiScfODvnpzL5IsLIhiGGRwbpG+hdcxWqQnmxzFxxgZnzRcLWNvVrYnYxoJCz2DSUeHewm+KptwOfN8rIZUhNA+ihW7IU+58DdiQZv1AJeXHKbTGQsjaGRgaYmBwj15PIAl2C63pMnTpL8cI8UQLZDERg53iW/kJC90s4QX34JnnfE3VjTFyG9JzAYt99JJx8P4QT5zyjky+WxdYdW9hxw9amJx8gm82w7fpJdt60Fds295pU4cRZlyBI+GWVbeSK7zbGwFVIRQNEhzQKx4CxJOOPT5u1+7Zts/PGbfT2F4w8r1qpcez5E3iuZ+R5ACP9FtvGkp5bkSnEvSGNwyjpaIBK4TdIOPnz5dDo5IvA9p3XGZt8gHyhh527tmJZ5l5XcTFkIfE2V8cJM6mUyKVlAu5NMkgVTl8wt6oAtmydYGDI/AGhfG+erTu2GH3mqRkvuXch+l6jxJdgXAD0wJ7XAT+VZOzMQmCsageg0Jtn46YRY8+7GsOjg0aFq+4qxYWkOzx5tR647bXGiC/BvAawZF+SYaHC9KzZ1T8xuTn10NbE5GYzJWFLmCo2keQSvc8c5QhGBUAfvCO3dEgzFrMLAZ7BMH9vX4H+wd7E430/YHG+xMJ8Ca8JRvKFHgYGB1phcVV4vjK7mDjO8zZ98I7mtzQNYDYQlC3+AkgiHXlhwWySZ3C4P9G4IAg4fWKa4szsZdtOYWhkgOu2T+A48UGaweF+5ucWWmf2KpyfDxgdSBQc6iNb/DngL03RNmsCVN6UZFi5FlKpm434DA4Nxo4JQ+XHzx1n5sLsVTEHZa44z/PPvkgQxK/GweF+o2agWg8p1xLbgTebo2xaACx+OcmwYnKVlwhiWfT0xO+pz01foFKurvn3eq3O1Kmzsc9xHIdMxmy2draUUCMKbzFJ15gA6EOvuwllW/xAjKd5M46TyPkrno8/lVWcmU8UkcxkzQrAXClMFnFWtulnbrvBFF1zGkCCn0kyrOKGeL5Z9Z/JxttPVaXuxpffB36A78XvTpyM2fYEnq9U3IQLw9ZbTdE1KAD8dJJhyaNfyZEkru7WvcQ5HcuOn9wwhQLFxUrCd5PwXSeBwSwHiaSyktjZSY5atY4bE6dfnC8lelahkE+U/PFN7mGXUE7qGCd810lgUAPoTyYZVk6q5pqCcvrl6TVXuO/5TE+dS/SkzZMbE9GLE7hWUKkldo4Tl9fFwYgA6IO7B0CG4sZ5vuIbtv8XMVec5/iLJ1dU9FTKNV740Ut4btyKFbZct5nBofggT7lUI0ihcsjzSRocG9XPvN5ITNpMIMhxxiH+hZiM+6+G2Zl55mcX6O0v4NgOtbpLtVJdUzPYtk02l6FQyLNhbJRCb08iOgsGg0BXw/VCMk6CdWlXx4EX2qVnRgAkGE8yzLT3vxrCUFmcLzccMzQywPjkGD0tFIqoKsWZuVbZi4UbKMkC2vZ6EgAZT+Jiu0mrYFLExrERJrdNtPz5mfOz0Y4iJST2LTVo/UtcBjNOYFhPlINNwW9qCrbjMLSh9Z5Tvh8wfTqZM9kqEpvJ0DeS9zYjAEElUSbG9bp70CPf20/VFaq1VvhQTrx4sqnMYSuoJ31HYWkdOYFeJU8mdhNAvQM+QCPYTvR1S9WASi3AcQTbFhxbyGWk4aGNxYUyC3PJYgntwEuqAfxq3gQ9UyYgkXJX7W5LIj9YZjNUcD2lWgtZLAcU533cBi+/f6CPkQ3xQt4uEgcY/aoRVWRGALReQuNVVxiqwQr75lErldbsEBYqLJQD/AaO6nXbJ8gaTgJdDtWEAqAh4C2aoGlKA7yM1mIzLRlH8Lt42DfwfebOnWWtHYuqUq6uLciWZbFl6+aUuAM/VJwkRjmougTuCRM0DQmALuCVi3HD8jkh6HKXh/LCPOdPn8atVllNEFwvbJgOHhoeJJeg9qAV+AH0Jshs4pdnCEIj0ShDcQD7PH6pRq5xHH2wz+bls+mqANu26RvoJZNxqNddSgvlFWq/XilzrlJGRLAch0wuR9/gED2FKASjytoVPwKjG4c5czK+cKRZ+AEM9CVYk37FxbaNNKA2IwC18gvgxBrHvpzg+oqqGC2puogNm0aYuG7zFdm8et3l+I9PrloJpKoEnkfgedRKJQZGRhkY3UDc+Y/BoX7jAqAKfqD05RK8GL+cJVs2cjmFERMgD1BBfYuwcT7AsQXHBi+FiODwhiGu2z6xIpWby2W54abtidT2QnGGoN44jAzQ09NjvCDEDRTbEpy4trQaAKHK+1m7tq0JmKwJfJ4g3jEdKNgNt1utQAQ2T2xa8++2YzM2kSTNC3MX4jWromRzyRJHSeF5MFBIsvoXFA2fM0XXYEFI+APc+DTZhgEL14fQYFDQyeaIy8729ycLnFUrNYKgMXNRMNDcqwtDxfWVDUm6itXnFoD/Z4q2uW9hcQRvIReXFBpeqn83mRoWsWIzjZmsQ9JjQ2GMdNbqgdF4xsUw2kh/nEum4C/2AIdN0TYnAIH8NapZvMbh0r5c1IrdZFg49D380GpYGygi9OTjgziOY5NpYN/DMBLeIEHhaBKoRiHyXEbojXMAvRKoZnHsvzZCHIMCIB+uTAHP415ovHwENo84hCHUXDNCcPEwRyUmyTO6Ib5L3ejGERppimo9WKJpZjtb95QwhPGRBKXt9Qsh6LPyb0rGUpKGTwbxbbxFIWy8OsaHI1VX9dRI909VxavXqblhQwdz4+aRhucHC709bN6ytrPoB0qlFhL4vhEBUIXq0iIYG4mx/6EH3oKAfKdtwpfB8MkgeQJVwW0cFOzNRzdxqEEtUC1Fpmex4q/pYIoIO3dtY2x8I9Zl20XLEjaMjbDr5uvXbAKhCgulaPXXymUjbYOqrqIKA70WfXEt5+tFAEHkL9qnvAyzh0OHK99iJn+e2oVRchstZO0vtW3M4YfHXequknWi+EA7qJYXGRgdJQxhruQz1OesGtARy2LiujE2T26iVq2BQk8+17D7hyrMLfqXwtiVUvt5GD/US8K/dVOcbxKCeyFEOU+9YuxgKBjWALIPD+FLqG9Rn2k4dtOQQ6FHUIgORrbZIcqr16mWIy0QBMpcyaPROU9LhEIhT6E333Dyg1CZK/mXsoRurUq9Gh8sagQFytXoefmsxaa47V/tAoS+hcUX5QGMxtJTaBEj0f14tbNLUas1RglsW2qaGIRKxYApmL9w4ZIcBQHMLrbXXr5WD5ld8K8oZZ+/cL5t9V+tLd9YtmOz0zgsriHUlny+wDJ+96BxAZDfrTwD/AANoH6+4djxYedSv7ya235swHfrLM4uax5VKFUCigsetXrjLN/yZ6LbxWYXfBYrwRWfKc/PU6+2F4Gt+0pt6Xv2Fyw2j8RY4fq5aCEJ35cPl7/fFvFVkFKTKP0ksKS61t4RiMDN12Uv7X4qdRoWZCTBQvEC1atsdBDAYiVgZt5jvuRTqYXU6tGOwfWUmhtSqYXMlwJm5gMWyv4KPurVKnPn20sA+eHy0TgBbprMNF79oRu9wwh/0BbxNZCOAOysPQq8gAZQOdlw6EDBivbARKuvVNX2WrQqFM9OU6ustNO6VAZWrgYsVgLmSz7zJZ/FckC5GizVAqxSI1CrMnPm1JrVREkQhLBY0UsaZWLUYbA3xvZXTkWrXznG9dUvt0y8AVIRALmTAJVPAVHlktv4XP6uLRny2WgpRKVZyzayFWgYMnPm1BXmoFVUFhY4f+pkbHi4EcJQWawuC1c+Z3HDlpjsZL14WdWX/p7cmeDoVQtIr1WsW/kcEJUtVU6Dru28Oo7wih25S9u2UKOj0u1oAtXIKTx38kRLdttzXWamzlA8O9X+yq/qpdiEJcIrt2cbb3tDH6pnLv70IqO1/9YyAzFIt1387+ffivAVADL90LejIcmT532eP7VcWigCfXmLtlPvAvnePvJ9/fQU+q4IAl3BbxhSq5SpLpaolhfa7l3sB9HkXy5AN01mmdzYyPFTKL20vPpF3iL3V77RHidrI/0LIz6e/wYQNY/q2QT5xscInz/tcfLcsuMoQKFH2r+l8+LzRMhkc9iOg+04qEDo+wS+j1evt7XaL4frKeXalVXQW8ccdk3EqP7Kmct3T1+X363+ihGG1kC69wUA2OFvE1j/BOihdg6cPI0Okdw4kcEPlKmZyGRcDBR5AfTm2i8lU1Xceg1Sab5+kd9wxTG4zSMON8RNvjt7+eRX8fV3UmDxCqR+Z5B8sH4M9GOXflE+BUGDptcCN09m2XhVdMz1lPlKGFv40U14gTJfWjn5mwZtfmJrtrG69cuR17+Mj8pHai+Z5/JKdObSqHrtD0C+BUTbmsVj4K/tmFkWvHJHji2jVyqoMIwullishuvqDsFQoVRVFisrs5vjozavuD7XWHMFtcjuXzpco39BvfqHafF7OTp3b+Cn+jbhB98DomPNlgN9O8FuXFv34pTHS2dXafAkQi4D+UyUzesGQoVaXal7q5x4Erh+c4Ydm2MSPUEdSj+OPP8I09jWT8kHy9PmOV6Jzt4c+ns9b8CSv+TizaFWZkkIGjdquLAQ8Oxxd81q4qwj9GTbzygmhR9AzVup6i8i48AtW3PxN4cGNVh8EfTSg3xEf0Hur/2NSX4bofN3B3+8sB/0wDIHNvRui7aJDVBzQ354vPFdgrYF2YyQdQSDt7wAUTjZ9aPizUZBqqFei1dsz5HLxpV3LULlBFeU0gvvk/urf2yG42TozvXxHy98DPQjV7BRmIRc454HCpyZ8Tl2xostArUkOoeQccC2wRYS39mnqgQKvh/l7T1fYreHGVu4YSLD+AYn/qW6xcgZvtxwiH5U7q99bM3PpISundfW3+95GLnqboGejdAz3uBcVgTXU45Ne0zNNHdduyWRgykiCMtfXi/+0yhi14yDKQITIw47t2TI2HGvM4TK9MosqXJAPlRN5UaQOHRPAA5hc6zwZ6DvuOIPdh76toIVf/Ci5ikvn/O6crO4ZUXbu+snMuSzCexNUIPyyxBcvfuRz7Gz8q60Yv1x6GrHBlWET+Q/BXzgij+IBfktsSbhIlxfmSr6TM8ElFpq/5IcfXmLzcM246MO2bhjXBdRL0L1NCt6KAif5N9W7xfpXtuE7rbsWIJ+Iv9bKH/E1XEJpwCFLWAnvwFssRpyfi6gWApZKLV/gEMkSlmPDFhsGnToyzfhXfrVaOL9FalpRblfPlT9ZJvstY11IQAA+on8XSh/Cqw8w5UbiXII0lzkOqrniy5jKNdDKrWoENMPFD/UZR9MwLGiXkE92eiARqHHojcvDPVa2M3GGUIfqtPgrpqOXkR4t9xfPdTcQ9PBuhEAAP30rn3Upj+C+ivvZxMrEoTcRrDMNGi4WDSaoDl4MoRu5ODViyvVPYA4p8hv+Q/yW8991hDFtpF+MqgZ9IzeRW54C9UzSn3mSuHUMCqPqs1AdjjaMcREEeNgbOL9ajTx7hxrVozmRkPyE5OIdRewbgRg3WgAPXjrOJo5ycUooVeKCknC2tofsnsgOxQJhCGtkBihB958NOkrbfwyrFzkxywHukJUtsp9h093gs04rB8NEGbuQlhek5k+GNwF1fNLZdGrqNSgFtna6jQ4veD0Lf0r0OhQSkvQMMpi+uUoitdo0iGi37Mp0lRX+rYWFnuBT5tlsDWsHwGAu1f+yoL8GOSGoXp2qbZwrUsBykuTcjZ6+U4hiilYuUg72LnkWiJ0oyRN6EJYj1R8UFndrq+ARPz2jK1NT/Vu1okArAsToAdv34mGLxDHT+hG2qA+y6oaIRYCIorYCpaFLCmcqO1KiAYSdbNsYfMo1pJvsimhoOmNsv9o292+28X60AB++BvYKHECYGWjnEHP5miL5c5GKzUxNGpXquFqdFqzGVYP5IYgOxqluJMhBOvXgY+2RNMg1ocA2PI20OQTYDmRiu0Zi1RzvQjufMPKY6OwnKisLTscmZoWnoDoXtaBAHTdBOhDu1+FJf/XyMNCN9o9+IuRo9bgbGJTEDuaaKcv8uZtI32aQeRVsu+wsX4/raD7GkCsu40ctofIRORGlnMIoRftFEJ3+b8agvo+YVDmUuNax8GyexHHQSyws5Fqt7LRVtNKqT+whndjsOFTK+iqAKgiHNRfS42AlVlr8hxgEOTvEBWT17A1BZF7VPlwN5NBnSkKXQsHb98D7OgafQkfBX3E2POanUZlGwd27zZGvwV0VwA0vKuL1EMsHsPiMVrbU65EKx6VyCrxj86hawKgh/baCHd2iz7od+U9R0/Je46eAv1u19gQ7tIHXt81U9w9DVB8+R8D6TXfj4U8svr/dxybmKi9vlvEuycAQhfVv0wh3uPLP3qPg0x1jZ0oNNwVdEUA9NAtWVRSPfQYw8H3ZN8zl1pvyL5nLqBqvP1KcnZ4qz54R/O3WBpAdzTA7MAvA0buvWsNq3n+BncDTUOGyBZ/qRuUuyMAXVR5QA2X/7Hit1nna2CmB39r6M5uoOMCoJ9/VS/wTztN9zJ8Q953dEVbe3nX/1kE+fNuMLSEN5u6EbwZdF4DlAu/AgnvR04D2sjj76YZoIBTf0uniXZeALob+Figytq9dnM93wRN72rwOHTBNHZUAPQ/3zYC+sZO0rwKX5H3H17Tzss7n6yBfK2TDF2FX9Q/eW18T3uD6KwG8NgLdLh683IkUPHSVTOQISP/vJMEO2wCuuj9K+eZzsfftDG89TuA+UsBk0I7ayI7JgD6x6+bQPjZTtFbAYvH5IEnY0uG5M4vB6CPx41LET+nB25beTAmJXROA2SCu4AO9fBYBdJEvL/hTiF1WKAdS5J10AR01ft/mfccTn7T1v4jTwHHU+MmHh17Vx0RAD14+07Q7lTdRHikmaobERShe4c3hdfow7t3dYJUhzRAcA9dLUANm1fpYnXTDACSXqncZeiMAKjVkS+zBp6T/U83XXUs9z71feDZFPhJird3gkjqAqCfvf3VoLekTWdNiH6pjQ8/Zo6RpnGzPvzan0ybSPoaICp97h6UR1v+rMgXMVaz3gqs1N9dqgKgiqBdrPtT/rad83ey76ljIM+YZKlJ3K2aru+UbjHiQ3tuxmZ78g/oHFingdOoTmHRh/JWWnUgpY3Vv8zTI8DPtPphhP9OSAmRcWALhFtA1m6XfiW28tCem+HIj1qkH4t0BcDxTqCZ7wG3ANMopxA5A5xGOI2GU1jWSQim0OCU7HtmRRtxffi2d4F+lua1VYgasOEqjyH6qZboI/fKvsP/ZcUjD95aQOxJsMcJw+sQaxxlC7AF1QmESaKC2R9Sl+Ntf4cG6PrZwCTQA7vvQuQLNCewT8r+I28wQ3/Pkwg/38RHAoR3yb4jnzNBP01092BIQsh9Rx9FeTuQ/M52o1m9pkLDAarvvBYmH64RAQCQ+44cAr2HZELg4elXjBHP8GXAjR0HASLvkPuOGr/hMy1cMwIAIPuPPo6Evwo06BwFIN+Sf/V0+3fGXXzauw8XgW/HDHNR2Sv7DrcRd+g8rikBAJB9T/85Fm+lkRBoGkUdDZ/pgt4p9x3+qnm66eKaEwAAuffIE4j+M1Yv464Q9nzdONFC9avAaq3B6sDbZP9R8zQ7gGtSAABk39FvgfVLQOmqP31DfvPJq3/XPr13/KAMXF02XsHiTbL/SGr3+qWNa1YAAGT/U3+D6B3AZbdFp1jTd2VRSRkN3yz3HonzDdY1rmkBAJB9R7+LcgdwDPgOI6UnUiM2vPBNkL8CjqH8otz39F+lRqtD+P9cRATF0wM0iQAAAABJRU5ErkJggg=="})],-1)]))):re("",!0)],16))}});var ey=(n=>(n.WEEKLY="WEEKLY",n.MONTHLY="MONTHLY",n.ALLTIME="ALLTIME",n))(ey||{});const rYe={class:"ion-padding-bottom border-b-[0.5px] border-gray2"},oYe={class:"flex flex-1 items-center ion-padding-top"},aYe={key:0,class:"size-8 text-center text-base text-[#929292] font-medium content-center"},lYe={class:"flex flex-1 mx-4 gap-4"},cYe=["src"],dYe={class:"line-clamp-1 flex-1"},oE=Fe({__name:"LevelLeaderboard",props:{title:{default:""},type:{default:"NONE"}},setup(n){const e=n,t=ln(),i=Li(),s=en(),{community:r}=et(t),{isLoggedIn:o}=et(s),{userCommunity:a}=et(i),l=K([]),c=lt(()=>!a.value||!r.value||a.value.community_id===r.value._id&&!(a.value.status===ms.Joined||a.value.status===ms.Waiting)),d=h=>{switch(h){case 0:return"gold";case 1:return"silver";case 2:return"bronze";default:return"none"}},u=async()=>{var h;try{if(!J.isEmpty(a==null?void 0:a.value)&&o.value&&!c.value){const f={type:e.type==="7D"?ey.WEEKLY:e.type==="30D"?ey.MONTHLY:ey.ALLTIME,community_id:(h=a.value)==null?void 0:h.community_id},{data:m}=await Qe.get("/user-communities-history-point/leaderboard",{params:f});l.value=m!=null?m:[]}}catch(f){console.log(f)}};return on(()=>{u()}),(h,f)=>(I(),O("section",null,[_("div",rYe,Q(h.title),1),y(J.isEmpty)(l.value)?(I(),O(Ue,{key:1},[],64)):(I(!0),O(Ue,{key:0},ct(l.value,(m,g)=>{var b,w,x;return I(),O("div",{key:m==null?void 0:m._id},[_("div",oYe,[_("div",null,[L(sYe,{type:d(g),class:"flex-none"},null,8,["type"]),d(g)==="none"?(I(),O("div",aYe,Q(g+1),1)):re("",!0)]),_("div",lYe,[_("img",{src:(b=m==null?void 0:m.user)==null?void 0:b.avatar,class:"size-9 rounded-full"},null,8,cYe),_("div",dYe,Q((w=m.user.full_name)!=null?w:""),1)]),_("div",null,Q((x=m==null?void 0:m.point)!=null?x:0),1)])])}),128))]))}}),uYe={class:"pb-8 flex-col flex gap-y-4"},hYe={class:"bg-white ion-padding rounded-lg"},fYe={class:"size-36 mx-auto relative"},pYe=["src"],mYe={class:"bg-[#1782FB] absolute h-[30px] w-[30px] content-center text-center text-sm font-medium rounded-full text-white translate-x-[105px] -translate-y-7 border-[2px] drop-shadow border-white"},gYe={class:"text-center mt-3 mx-auto"},bYe={class:"text-[#050505] text-[20px] font-medium"},vYe={class:"text-[#003555] text-sm font-medium py-2"},yYe={class:"text-sm font-light text-[#929292] flex justify-center items-center gap-x-1"},wYe={class:"text-[#1782FB] font-medium"},xYe={class:"mt-3"},_Ye={key:0,class:"flex-none h-9 w-9 mr-3 bg-[#003555] rounded-full text-white text-center content-center"},kYe={key:1,class:"flex-none h-9 w-9 mr-3 bg-[#DADADA] rounded-full content-center items-center flex justify-center"},EYe={class:"text-[#050505] text-base font-medium"},TYe={class:"bg-white ion-padding rounded-lg"},CYe={class:"bg-white ion-padding rounded-lg"},SYe={class:"bg-white ion-padding rounded-lg"},AYe=Fe({__name:"TabRank",setup(n){const e=en(),t=ln(),i=Li(),{userCommunity:s}=et(i),{userInfo:r}=et(e),{communityLevel:o}=et(t),a=()=>{var u,h;const d=(h=(u=o.value)==null?void 0:u.find(f=>{var m,g;return f.level_id===((g=(m=s.value)==null?void 0:m.level)==null?void 0:g._id)}))==null?void 0:h.name;return J.isEmpty(d)?"":d},l=(d,u)=>{var h,f;if(d&&u){const m=d.findIndex(b=>(b==null?void 0:b.point)>(u==null?void 0:u.point)),g=((f=(h=d[m])==null?void 0:h.point)!=null?f:0)-(u==null?void 0:u.point);return{lvl:m!=null?m:0,point:g!=null?g:0}}return{lvl:0,point:0}},c=async()=>{await(await qe.create({component:eH,mode:"ios",cssClass:"noteLevel"})).present()};return console.log(o.value),(d,u)=>(I(),ve(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>{var h,f,m,g,b,w,x,k,E,T;return[_("section",uYe,[_("div",hYe,[_("div",fYe,[_("img",{src:(f=(h=y(r))==null?void 0:h.avatar)!=null?f:"/upload-user.png",class:"size-36 rounded-full",placeholder:"/upload-user.png"},null,8,pYe),_("div",mYe,Q(l(y(o),y(s)).lvl),1)]),_("div",gYe,[_("div",bYe,Q((g=(m=y(r))==null?void 0:m.full_name)!=null?g:"-"),1),_("p",vYe,Q((b=y(s))!=null&&b.level&&((w=y(s))==null?void 0:w.point)>0?(x=y(s).level)==null?void 0:x.name:"Level 0")+" "+Q((k=y(s))!=null&&k.level&&y(s).point>0&&!y(J.isEmpty)((E=y(s))==null?void 0:E.level)&&((T=y(s).level)==null?void 0:T.name)!==a()?" - "+a():""),1),_("div",yYe,[_("span",wYe,Q(Math.abs(l(y(o),y(s)).point)),1),u[0]||(u[0]=be(" điểm để lên level tiếp theo ")),L(y(fe),{onClick:c,icon:y(aB),class:"size-5"},null,8,["icon"])])]),_("div",xYe,[(I(!0),O(Ue,null,ct(y(o),(P,C)=>(I(),O("div",{key:P==null?void 0:P._id,class:"flex py-3 items-center"},[y(s)&&y(s).point>=(P==null?void 0:P.point)?(I(),O("div",_Ye,Q(C+1),1)):y(s)&&y(s).point<(P==null?void 0:P.point)?(I(),O("div",kYe,[L(y(fe),{icon:y(Px),class:"size-5 text-[#050505]"},null,8,["icon"])])):re("",!0),_("div",EYe,Q("Level ".concat(C+1))+Q(y(J.isEmpty)(P==null?void 0:P.name)?"":" - ".concat(P==null?void 0:P.name)),1)]))),128))])]),_("div",TYe,[L(oE,{type:"7D",title:"Bảng xếp hạng 7 ngày"})]),_("div",CYe,[L(oE,{type:"30D",title:"Bảng xếp hạng 30 ngày"})]),_("div",SYe,[L(oE,{type:"ALL_TIME",title:"Bảng xếp hạng toàn bộ thời gian"})])])]}),_:1}))}}),IYe={class:"flex justify-between items-center"},PYe={class:"flex gap-4"},RYe=["onClick"],$Ye={key:0,class:"bg-blue1 size-8 flex justify-center items-center rounded-lg shadow-st"},LYe={key:0,class:"py-5"},OYe={key:1,class:"flex flex-col justify-center items-center text-gray2 mt-[25%]"},DYe=!0,MYe=Fe({__name:"TabEvent",setup(n){const{DEV:e,VITE_API_URL:t,VITE_API_URL_DEV:i}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},s=[{label:"Sắp diễn ra",value:"comingSoon"},{label:"Đã diễn ra",value:"tookPlace"}],r=ln(),{community:o}=et(r),{userCommunity:a}=et(Li()),l=K(s[0].value),c=K([]),d=K(1),u=K(!1),h=x=>{l.value=x},f=async(x=1,k=!1)=>{var P,C,A,R;const E={page:x,limit:10},{data:T}=await Qe.get("/event/community/".concat((P=o.value)==null?void 0:P._id,"/").concat(l.value),{params:E});J.isEmpty(T)?u.value=!1:((C=T==null?void 0:T.meta)!=null&&C.hasNextPage?(d.value++,u.value=!0):u.value=!1,k?c.value=[...c.value,...(A=T==null?void 0:T.data)!=null?A:[]]:c.value=(R=T==null?void 0:T.data)!=null?R:[]),console.log("🌸  data 👉",T==null?void 0:T.data)},m=()=>{f(1,!1),d.value=1,u.value=!1};tr(()=>{m()}),ki([l],()=>{m()});const g=x=>{f(d.value,!0),setTimeout(()=>x.target.complete(),500)},b=async x=>{var P;const k=[{text:"Chỉnh sửa",handler:()=>{}},{text:"Chia sẻ",handler:()=>w(x)},{text:"Huỷ",role:"cancel"}],E=[{text:"Chia sẻ",handler:()=>w(x)},{text:"Huỷ",role:"cancel"}];await(await Bd.create({mode:"ios",translucent:!0,buttons:((P=a.value)==null?void 0:P.role)===Ei.Admin?k:E})).present()},w=async x=>{const k=e?i:t;x!=null&&x.use_landing_page?(await Cc.write({string:x==null?void 0:x.url}),tt("Đã lưu link sự kiện.","success")):(await Cc.write({string:J.isEmpty(x==null?void 0:x.link_event)?"".concat(k,"/event/").concat(x==null?void 0:x.url):x==null?void 0:x.link_event}),tt("Đã lưu link sự kiện.","success"))};return(x,k)=>(I(),ve(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>[_("div",IYe,[_("div",PYe,[(I(),O(Ue,null,ct(s,E=>_("div",{key:E.value},[_("div",{onClick:T=>h(E.value),class:gt(["px-2.5 py-1.5 rounded-lg text-base font-normal",l.value===E.value?"bg-gray1 ":"bg-white shadow-st"])},Q(E.label),11,RYe)])),64))]),DYe?re("",!0):(I(),O("div",$Ye,[L(y(fe),{icon:y(l0),class:"size-6 text-white"},null,8,["icon"])]))]),y(J.isEmpty)(c.value)?(I(),O("section",OYe,[L(y(fe),{src:"/icEmpty.svg",class:"size-36"}),k[0]||(k[0]=_("div",null,"Chưa có sự kiện nào",-1))])):(I(),O("section",LYe,[(I(!0),O(Ue,null,ct(c.value,E=>(I(),O("div",{key:E==null?void 0:E._id,class:"rounded-lg shadow-st overflow-hidden mb-4"},[L(r5,{event:E,"has-setting":l.value==="comingSoon",onSetting:()=>b(E)},null,8,["event","has-setting","onSetting"])]))),128))])),u.value?(I(),ve(y(Zn),{key:2,onIonInfinite:g,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),NYe={class:"ion-padding"},FYe={class:"mx-auto text-center table-auto"},BYe={class:"py-3 px-2"},VYe={class:"block font-semibold text-sm text-slate-800"},UYe={class:"text-center"},zYe={class:"block font-semibold text-sm text-slate-800"},HYe=Fe({__name:"ModalDetaiLevelCommission",setup(n){const e=ln(),t=Li(),{currentLevel:i}=et(t),{communityLevel:s}=et(e);return(r,o)=>(I(),O("div",NYe,[_("table",FYe,[o[0]||(o[0]=_("thead",{class:"sticky top-0 bg-white"},[_("tr",{class:"bg-gray1"},[_("th",{class:"p-2 py-3.5 rounded-tl-xl rounded-bl-xl w-1/2"},[_("p",{class:"text-sm leading-none text-gray-600 font-bold"},"Level")]),_("th",{class:"p-2 py-3.5 rounded-tr-xl rounded-br-xl"},[_("p",{class:"text-sm leading-none text-gray-600 font-bold"}," Hoa hồng (%) ")])])],-1)),_("tbody",null,[(I(!0),O(Ue,null,ct(y(s),a=>(I(),O("tr",{key:a._id,class:gt([a._id==y(i)._id?"bg-blue-100":"bg-white","hover:bg-slate-50 border-b border-slate-200"])},[_("td",BYe,[_("p",VYe,Q(a.name),1)]),_("td",UYe,[_("p",zYe,Q(a.user_commission),1)])],2))),128))])])]))}}),jYe={class:"ion-padding"},GYe={class:"my-6"},WYe={class:"flex justify-start items-center gap-x-2 mt-3"},qYe={class:"border border-gray-400 rounded-md shadow-sm !mb-3 bg-white"},KYe={class:"flex justify-between flex-wrap sm:flex-nowrap max-sm:gap-3 w-full p-2 pr-1"},YYe={class:"w-full"},XYe={class:"md:pl-3 py-2 text-gray-700 whitespace-pre-wrap"},QYe=["textContent"],ZYe={class:"flex gap-2 items-center"},JYe={key:0,class:"mx-1"},eXe={class:"mt-5"},tXe={key:0,class:"mt-5"},nXe={class:"mt-4 text-base"},iXe=Fe({__name:"CommunityAffiliateTabGetLink",setup(n){var x,k,E,T;const e=Li(),{currentLevel:t,currentCommission:i}=et(e),s=en(),r=ln(),{community:o,packageCommunity:a}=et(r),{userInfo:l}=et(s),d=K("".concat("https://unica.expert","/").concat(((x=o.value)==null?void 0:x.short_name)||((k=o.value)==null?void 0:k._id)||"","?ref=")),u=K(((E=l.value)==null?void 0:E.username)||((T=l.value)==null?void 0:T._id)),h=Yi({username:u.value}),f="".concat(d.value).concat(h.username),m=K(!1),g=async()=>{try{const{data:P,status:C}=await Qe.patch("/users/me",{...h,form:$b.Ref});C==200?(await s.setUserInfo(P),await tt("Cập nhật mã giới thiệu thành công!","success")):await tt("Cập nhật mã giới thiệu thất bại!","warning")}catch(P){await tt("Cập nhật mã giới thiệu thất bại!","warning"),console.error(P)}finally{m.value=!1}m.value=!1},b=async()=>{const P="".concat(d.value).concat(h.username);await Cc.write({string:P}),await tt("Sao chép mã giới thiệu thành công!","success")},w=async()=>{const P=await qe.create({component:HYe,componentProps:{data:[1,2,3]},initialBreakpoint:.5,breakpoints:[0,.5,.75],mode:"ios"});await P.present();const{data:C,role:A}=await P.onWillDismiss();A==="confirm"&&console.log(C)};return(P,C)=>{var A,R,M,N;return I(),O("section",jYe,[C[9]||(C[9]=_("div",{class:"text-lg font-bold mb-3"},"Lấy link giới thiệu",-1)),_("div",null,[C[7]||(C[7]=_("p",null," Giới thiệu thành viên mới vào cộng đồng bạn sẽ nhận được 2 điểm để tăng level và nhận được hoa hồng khi thành viên này trả phí ",-1)),_("div",GYe,[_("div",WYe,[L(y(fe),{class:"size-5","aria-hidden":"true",icon:y(Nbe)},null,8,["icon"]),C[2]||(C[2]=_("span",{class:"font-medium"},"Link giới thiệu của bạn:",-1))]),_("div",qYe,[_("div",KYe,[_("div",YYe,[_("span",XYe,Q(d.value),1),m.value?si((I(),O("input",{key:0,"onUpdate:modelValue":C[0]||(C[0]=U=>h.username=U),class:"border-2 border-dashed p-1 rounded-lg mx-1 outline-0 w-auto"},null,512)),[[Ti,h.username]]):(I(),O("span",{key:1,textContent:Q(h.username)},null,8,QYe))]),_("div",ZYe,[m.value?(I(),O("button",{key:1,class:"px-2",type:"button",onClick:g},C[4]||(C[4]=[_("svg",{height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg"},[_("path",{d:"m27.71 9.29l-5-5A1 1 0 0 0 22 4H6a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2V10a1 1 0 0 0-.29-.71M12 6h8v4h-8Zm8 20h-8v-8h8Zm2 0v-8a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v8H6V6h4v4a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6.41l4 4V26Z",fill:"currentColor"})],-1)]))):(I(),O("div",JYe,[(I(),O("svg",{fill:"none",height:"24",viewBox:"0 0 16 17",width:"24",xmlns:"http://www.w3.org/2000/svg",onClick:C[1]||(C[1]=U=>m.value=!0)},C[3]||(C[3]=[_("path",{d:"M7.33301 3.1665H2.66634C2.31272 3.1665 1.97358 3.30698 1.72353 3.55703C1.47348 3.80708 1.33301 4.14622 1.33301 4.49984V13.8332C1.33301 14.1868 1.47348 14.5259 1.72353 14.776C1.97358 15.026 2.31272 15.1665 2.66634 15.1665H11.9997C12.3533 15.1665 12.6924 15.026 12.9425 14.776C13.1925 14.5259 13.333 14.1868 13.333 13.8332V9.1665",stroke:"#1782FB","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_("path",{d:"M12.333 2.16665C12.5982 1.90144 12.9579 1.75244 13.333 1.75244C13.7081 1.75244 14.0678 1.90144 14.333 2.16665C14.5982 2.43187 14.7472 2.79158 14.7472 3.16665C14.7472 3.54173 14.5982 3.90144 14.333 4.16665L7.99967 10.5L5.33301 11.1667L5.99967 8.49999L12.333 2.16665Z",fill:"#1782FB",stroke:"#1782FB","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))])),_("button",{class:"px-2",type:"button",onClick:b},C[5]||(C[5]=[_("svg",{height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg"},[_("path",{d:"M28 10v18H10V10zm0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2",fill:"currentColor"}),_("path",{d:"M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z",fill:"currentColor"})],-1)]))])])])]),_("i",null,"Bạn có thể gắn mã giới thiệu vào bất kỳ link nào, ví dụ : https://unica.expert/.....?ref="+Q(((A=y(l))==null?void 0:A.username)||((R=y(l))==null?void 0:R._id)),1),_("div",eXe,[C[6]||(C[6]=_("p",{class:"pb-1 text-base"},"Mã QR giới thiệu bạn",-1)),L(u_,{size:120,value:f,level:"L","render-as":"svg"})])]),y(a).code!=="START"?(I(),O("div",tXe,[_("p",nXe,[be(" Bạn đang ở level: "+Q((N=(M=y(t))==null?void 0:M.name)!=null?N:"")+" - Hoa hồng: ",1),_("strong",null,Q(y(i))+"%",1)]),_("p",{class:"mt-2"},[C[8]||(C[8]=be(" Level càng cao thì hoa hồng càng lớn. ")),_("button",{onClick:w,class:"text-blue-500"}," Chi tiết ")])])):re("",!0)])}}}),sXe={class:"ion-padding-horizontal"},rXe={key:0},oXe={class:"w-full text-left table-auto"},aXe={class:"py-3 px-2 break-all"},lXe={class:"block font-semibold text-sm text-slate-800"},cXe={class:"text-sm text-slate-500"},dXe={class:"text-sm text-slate-500"},uXe={class:""},hXe={class:"text-sm text-center text-slate-500"},fXe={key:1,class:"flex justify-center flex-col items-center text-gray2 mt-[20%]"},pXe=Fe({__name:"CommunityAffiliateTabMember",setup(n){var c;const e=ln(),{community:t}=et(e),i=K(!1),s=K(1),r=Yi({"filter[community_id]":(c=t.value)==null?void 0:c._id,page:s}),o=K([]),a=async()=>{const{data:d}=await Qe.get("/users/member-introduced-by-me",{params:r});d.meta&&(d.meta.hasNextPage?i.value=!0:i.value=!1),J.isEmpty(d.data)||o.value.push(...d.data)},l=async d=>{i.value&&(s.value++,await a(),setTimeout(()=>d.target.complete(),500))};return tr(async()=>{await a()}),(d,u)=>(I(),O("div",sXe,[u[2]||(u[2]=_("div",{class:"text-lg font-bold mb-3"},"Thành viên tôi giới thiệu",-1)),y(J.isEmpty)(o.value)?(I(),O("div",fXe,[L(y(fe),{src:"/icEmpty.svg",class:"size-36"}),u[1]||(u[1]=_("div",null,"Chưa có thành viên nào",-1))])):(I(),O("div",rXe,[_("table",oXe,[u[0]||(u[0]=_("thead",{class:"sticky top-0 bg-white"},[_("tr",{class:"bg-gray1"},[_("th",{class:"p-2 rounded-tl-xl rounded-bl-xl w-2/3"},[_("p",{class:"text-sm pl-2 leading-none text-gray-600 font-medium"}," Thành viên ")]),_("th",{class:"p-2 rounded-tr-xl rounded-br-xl"},[_("p",{class:"text-sm leading-none text-gray-600 font-medium text-nowrap"}," Ngày tham gia ")])])],-1)),_("tbody",null,[(I(!0),O(Ue,null,ct(o.value,h=>(I(),O("tr",{key:h._id,class:"hover:bg-slate-50 border-b-[1px] border-gray1"},[_("td",aXe,[_("p",lXe,Q(h.full_name),1),_("p",cXe,Q(h.email),1),_("p",dXe," Ngày tạo: "+Q(y(_t)(h.created_at).format("DD/MM/YYYY")),1)]),_("td",uXe,[_("p",hXe,Q(h!=null&&h.join_date?y(_t)(h==null?void 0:h.join_date).format("DD/MM/YYYY"):"-"),1)])]))),128))])]),i.value?(I(),ve(y(Zn),{key:0,onIonInfinite:l,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]))]))}}),mXe={class:"ion-padding"},gXe={class:"h-full p-1 flex gap-3 md:block overflow-x-auto scrollbar-hide"},bXe=["onClick"],vXe=Fe({__name:"TabAffiliate",setup(n){const e=K("Link"),t=K([{title:"Lấy link",key:"Link"},{title:"Thành viên",key:"Member"}]),i=s=>{s.key&&(e.value=s.key)};return(s,r)=>(I(),ve(y(At),{class:"flex-col scrollbar-hidden",color:"white1"},{default:j(()=>[_("div",mXe,[_("div",gXe,[(I(!0),O(Ue,null,ct(t.value.filter(o=>!o.hidden),(o,a)=>(I(),O("div",{key:a,class:gt([{"!bg-blue1-tint1":e.value==o.key},"bg-white px-3 py-1.5 rounded-lg shadow-st"]),onClick:l=>i(o)},Q(o.title),11,bXe))),128))])]),_("div",null,[e.value=="Link"?(I(),ve(iXe,{key:0})):re("",!0),e.value=="Member"?(I(),ve(pXe,{key:1})):re("",!0)])]),_:1}))}}),yXe=Xi(vXe,[["__scopeId","data-v-2cc5bccf"]]),wXe={class:"flex items-center flex-1"},xXe=["src"],_Xe={class:"text-sm flex-1 font-medium text-black2 mx-2.5"},kXe={key:0,slot:"end",class:"flex items-center gap-2"},EXe={key:1,class:"flex flex-1 items-center justify-center"},TXe=Fe({__name:"CommunityScreen",setup(n){var G;const e=ln(),t=Li(),i=Ba(),s=en(),{isLoggedIn:r}=et(s),{routeParams:o}=et(i),{userCommunity:a}=et(t),l=lt(()=>{var B;return(B=et(e).community.value)==null?void 0:B._id}),c=lt(()=>{const B=a.value;return(B==null?void 0:B.status)===ms.Joined||(B==null?void 0:B.role)===Ei.Admin||(B==null?void 0:B.role)===Ei.Sale}),d=K(),u=K(),h=K(),f=K(1),m=Zr(),g=gn(),b=[{key:"discuss",title:"Thảo luận"},{key:"course",title:"Khóa học"},{key:"event",title:"Sự kiện"},{key:"member",title:"Thành viên"},{key:"rank",title:"Xếp hạng"},{key:"aff",title:"Affiliate"},{key:"about",title:"Giới thiệu"}],w=K(!1),x=K((G=m.params.tab)!=null?G:b[0].key),k=()=>{g.back(Wt)},E=()=>{var B;g.push({name:"CommunitySetting",params:{id:(B=l.value)!=null?B:m.params.id}},Wt)},T=B=>{x.value=B},P=async()=>{var te;const{data:B}=await Qe.get("user-community/check/".concat((te=l.value)!=null?te:m.params.id));return u.value=B,t.setUserCommunity(B),B};ki([r],()=>{P()});const C=async()=>{var te;const{data:B}=await li.get("community/".concat((te=m.params.id)!=null?te:l.value));J.isEmpty(B)||(d.value=B,e.setCommunity(B))},{isPending:A}=Kqe({queryKey:["user-community-check"],queryFn:P}),R=async()=>{const B={page:f.value,limit:20,"sort[order]":1,"sort[_id]":-1,"filter[community_id]":l.value},{data:te}=await Qe.get("community-topic",{params:B});h.value=te==null?void 0:te.data,e.setTopics(te==null?void 0:te.data)},M=async()=>{const B={community_id:l.value},{data:te}=await Qe.get("/community-level",{params:B});e.setCommunityLevel(te)},N=()=>{w.value=!0,T("member")},U=()=>{w.value=!1};return _A(()=>{var B;P(),R(),C(),M(),(B=o==null?void 0:o.value)!=null&&B.showSetting&&(i.setRouteParams({...o.value,showSetting:!1}),E())}),(B,te)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>{var X,ue,he,Ie;return[L(y(fe),{slot:"start",onClick:k,icon:y(Eo),class:"size-6 p-2"},null,8,["icon"]),_("div",wXe,[_("img",{src:(ue=(X=d.value)==null?void 0:X.icon)!=null?ue:"/favicon.ico",class:"size-[30px] rounded-lg",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,xXe),_("span",_Xe,Q((he=d.value)==null?void 0:he.name),1)]),y(r)&&y(a)?(I(),O("div",kXe,[y(a).status===y(ms).Joined||((Ie=y(a))==null?void 0:Ie.role)===y(Ei).Admin?(I(),ve(y(fe),{key:0,onClick:E,icon:y(oB),class:"size-6 p-1"},null,8,["icon"])):re("",!0)])):re("",!0)]}),_:1})]),_:1}),y(A)?(I(),O("div",EXe,[L(y(fb),{name:"crescent",color:"blue1",class:"size-12"})])):(I(),O(Ue,{key:0},[!y(J.isEmpty)(y(a))&&c.value&&y(r)?(I(),ve(Ob,{key:0,routes:b,onChangeTab:T,"tab-key":x.value},{scene:j(()=>[x.value==="discuss"?(I(),ve(wqe,{key:0,topics:h.value,onChangeTab:N},null,8,["topics"])):re("",!0),x.value==="course"?(I(),ve(KWe,{key:1})):re("",!0),x.value==="event"?(I(),ve(MYe,{key:2})):re("",!0),x.value==="member"?(I(),ve(eYe,{key:3,"to-request-member":w.value,onCallbackUnMount:U},null,8,["to-request-member"])):re("",!0),x.value==="rank"?(I(),ve(AYe,{key:4})):re("",!0),x.value==="about"?(I(),ve(FO,{key:5})):re("",!0),x.value==="aff"?(I(),ve(yXe,{key:6})):re("",!0)]),_:1},8,["tab-key"])):(I(),ve(FO,{key:1}))],64))]),_:1}))}}),CXe=Xi(TXe,[["__scopeId","data-v-d7ce073d"]]),SXe={class:"overflow-y-scroll pb-6 mt-2 h-[50%]"},AXe=["onClick"],IXe=Fe({__name:"ModalTopicGlobal",props:{topics:{},selectedTopic:{}},setup(n){var a;const e=n,t=K(),i=K((a=e.topics)!=null?a:[]),s=K(e==null?void 0:e.selectedTopic),r=async()=>{var d;const l={"filter[keyword]":t.value},{data:c}=await Qe.get("topic",{params:l});J.isEmpty(c)||(i.value=(d=c==null?void 0:c.data)!=null?d:[])},o=l=>{s.value=l,qe.dismiss(l,"confirm")};return(l,c)=>(I(),ve(y(At),{class:"ion-padding-vertical shadow-st",color:"white1"},{default:j(()=>[_("form",{onSubmit:qt(r,["prevent"]),class:"flex items-center gap-2 rounded-lg shadow-st bg-white px-4 ion-margin-horizontal"},[L(y(fe),{icon:y(Qd),class:"text-gray2 size-6"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>t.value=d),class:"bg-white text-black text-base py-2 flex flex-1 mx-auto outline-none",placeholder:"Tìm kiếm"},null,512),[[Ti,t.value]])],32),_("section",SXe,[(I(!0),O(Ue,null,ct(i.value,(d,u)=>{var h;return I(),O("div",{key:u},[_("div",{onClick:f=>o(d),class:gt(["flex flex-1 py-2.5 rounded-md px-8",{"bg-blue1-tint1":(d==null?void 0:d._id)===((h=l.selectedTopic)==null?void 0:h._id)}])},Q(d==null?void 0:d.title),11,AXe)])}),128))])]),_:1}))}}),PXe={class:"flex items-baseline gap-8 mb-6 flex-1"},RXe=["src"],$Xe={key:1,class:"size-24 bg-[#ddd] rounded-lg flex justify-center items-center"},LXe={class:"flex-1"},OXe=["src"],DXe={key:1,class:"h-[140px] w-full bg-[#ddd] rounded-lg flex justify-center items-center"},MXe={slot:"label"},NXe={slot:"label"},FXe={slot:"end",class:"flex items-center"},BXe={slot:"label"},VXe={slot:"label"},UXe={class:"mt-2 mb-2"},zXe={class:"flex items-center gap-2 pb-1"},HXe={class:"flex items-center gap-2 pb-1"},jXe={class:"text-base font-medium flex items-center gap-2"},GXe={class:"flex"},WXe={class:"border-b-[1px] border-gray1 pb-4"},qXe={slot:"label"},KXe={class:"flex items-center gap-2"},YXe={slot:"label"},XXe=["onClick"],QXe=Fe({__name:"TabBasicInfo",setup(n){var g,b,w,x,k,E,T,P,C,A,R,M,N,U;const e=ln(),{community:t}=et(e),i=Yi({name:(g=t.value)==null?void 0:g.name,description:(w=(b=t.value)==null?void 0:b.description)!=null?w:"",topic_id:(x=t.value)==null?void 0:x.topic_id,icon:(E=(k=t.value)==null?void 0:k.icon)!=null?E:"",thumbnail:(P=(T=t.value)==null?void 0:T.thumbnail)!=null?P:"",status:(C=t.value)==null?void 0:C.status,short_name:((A=t.value)==null?void 0:A.short_name)||"",socials:(N=(M=(R=t.value)==null?void 0:R.socials)==null?void 0:M.map(({title:G,url:B,id:te})=>({title:G,url:B,id:te})))!=null?N:[]}),s=K([]),r=K((U=t.value)==null?void 0:U.topic),o=G=>{i.status=G},a=async()=>{var B;const{data:G}=await Qe.get("topic",{params:{page:1,limit:20}});s.value=(B=G==null?void 0:G.data)!=null?B:[]},l=async()=>{const G=await qe.create({component:IXe,componentProps:{topics:s.value,selectedTopic:r.value},initialBreakpoint:.55,mode:"ios"});await G.present();const{data:B,role:te}=await G.onWillDismiss();te==="confirm"&&(r.value=B,i.topic_id=B==null?void 0:B._id)};tr(()=>{var G;e.getCommunityInfo((G=t.value)==null?void 0:G._id)}),on(()=>{a()});const c=()=>{i.socials=[{title:"",url:"",id:Sd()},...i.socials]},d=G=>{var B;(B=i.socials)==null||B.splice(G,1)},u=lt(()=>!J.isEmpty(i.name)&&!J.isEmpty(i.short_name)&&!J.isEmpty(i.topic_id)&&!J.isEmpty(i.description)),h=()=>{const G=/^[a-zA-Z0-9]+$/;return J.isEmpty(i.name)?(tt("Tên cộng đồng không được để trống !","warning"),!1):i.short_name.length<4?(tt("Username tối thiểu 4 kí tự !","warning"),!1):G.test(i.short_name)?!0:(tt("Username hỗ trợ định dạng chữ cái và số !","warning"),!1)},f=async()=>{var G,B,te;if(h())try{const X=await Qe.patch("community/".concat((G=t.value)==null?void 0:G._id),i);if(X.status===200)e.setCommunity(X==null?void 0:X.data),tt("Cập nhật thông tin cộng đồng thành công!","success");else if((X==null?void 0:X.status)===409){const ue=((te=(B=X==null?void 0:X.response)==null?void 0:B.data)==null?void 0:te.message)||"Username đã được sử dụng.";tt(ue,"error")}else tt("Cập nhật thông tin thất bại!","error")}catch(X){tt("Đã có lỗi xảy ra. Vui lòng thử lại sau!","error")}},m=G=>{G.target.src="/upload-user.png"};return(G,B)=>(I(),ve(y(At),{class:"ion-padding"},{default:j(()=>{var te,X,ue,he,Ie,xe,Be,Pe;return[_("form",{class:"pb-5 w-full",onSubmit:qt(f,["prevent"])},[_("section",PXe,[_("div",null,[B[5]||(B[5]=_("span",{class:"text-base font-medium"},"Icon",-1)),B[6]||(B[6]=_("div",{class:"text-sm text-gray2 font-medium pb-2"},"56 x 56",-1)),y(J.isEmpty)((te=y(t))==null?void 0:te.icon)?(I(),O("div",$Xe,[L(y(fe),{icon:y(L6),class:"size-14 text-gray2"},null,8,["icon"])])):(I(),O("img",{src:(X=y(t))==null?void 0:X.icon,key:(ue=y(t))==null?void 0:ue.icon,onError:m,class:"size-24 rounded-lg flex bg-[#ddd]"},null,40,RXe))]),_("div",LXe,[B[7]||(B[7]=_("span",{class:"text-base font-medium"},"Cover",-1)),B[8]||(B[8]=_("div",{class:"text-sm text-gray2 font-medium pb-2"},"1200 x 680",-1)),y(J.isEmpty)((he=y(t))==null?void 0:he.thumbnail)?(I(),O("div",DXe,[L(y(fe),{icon:y(L6),class:"size-14 text-gray2"},null,8,["icon"])])):(I(),O("img",{src:(Ie=y(t))==null?void 0:Ie.thumbnail,key:(xe=y(t))==null?void 0:xe.thumbnail,onError:m,class:"h-[140px] w-full rounded-lg bg-[#ddd]"},null,40,OXe))])]),_("section",null,[L(y(Tn),{modelValue:i.name,"onUpdate:modelValue":B[0]||(B[0]=Ae=>i.name=Ae),mode:"md",required:"",fill:"outline",placeholder:"Tên cộng đồng",class:"outline-none text-sm font-light mb-1",type:"text","label-placement":"stacked",color:"blue1",counter:!0,maxlength:30},{default:j(()=>[_("div",MXe,[B[10]||(B[10]=be(" Tên cộng đồng")),L(y(Ai),{color:"danger"},{default:j(()=>B[9]||(B[9]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Tn),{value:(Pe=(Be=r.value)==null?void 0:Be.title)!=null?Pe:"Chọn mục đăng",mode:"md",fill:"outline",placeholder:"Lĩnh vực",class:"outline-none text-sm font-light mb-6",type:"text","label-placement":"floating",color:"blue1",readonly:"",required:"",onClick:qt(l,["stop"])},{default:j(()=>[_("div",NXe,[B[12]||(B[12]=be("Lĩnh vực")),L(y(Ai),{color:"danger"},{default:j(()=>B[11]||(B[11]=[be("*")])),_:1})]),_("div",FXe,[L(y(fe),{onClick:qt(()=>{},["stop"]),icon:y(c0),slot:"icon-only",class:"text-gray2 size-5","aria-hidden":"true"},null,8,["icon"])])]),_:1},8,["value"]),L(y(Tn),{modelValue:i.short_name,"onUpdate:modelValue":B[1]||(B[1]=Ae=>i.short_name=Ae),mode:"md",fill:"outline",placeholder:"Username",required:"",class:"outline-none text-sm font-light mb-1",type:"text","label-placement":"stacked",color:"blue1",counter:!0,maxlength:30},{default:j(()=>[_("div",BXe,[B[14]||(B[14]=be("Username")),L(y(Ai),{color:"danger"},{default:j(()=>B[13]||(B[13]=[be("*")])),_:1})])]),_:1},8,["modelValue"])]),L(y(Ep),{modelValue:i.description,"onUpdate:modelValue":B[2]||(B[2]=Ae=>i.description=Ae),mode:"md",required:"","label-placement":"stacked",fill:"outline",rows:8,placeholder:"Mô tả cộng đồng",class:"outline-none text-sm font-light mt-1",counter:!0,maxlength:255},{default:j(()=>[_("div",VXe,[B[16]||(B[16]=be("Mô tả")),L(y(Ai),{color:"danger"},{default:j(()=>B[15]||(B[15]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),_("section",UXe,[_("div",{onClick:B[3]||(B[3]=Ae=>o(1)),class:gt(["border-[1px] rounded-lg p-4 mb-3",i.status==1?"border-blue1 text-black":"border-gray2 text-gray2"])},[_("div",zXe,[L(y(fe),{icon:i.status==1?y(qy):y(Ap),class:gt(["size-6",i.status==1?"text-blue1":"text-gray2"])},null,8,["icon","class"]),B[17]||(B[17]=_("span",{class:"text-sm font-medium"},"Cộng đồng công khai",-1))]),B[18]||(B[18]=_("div",{class:"text-wrap text-sm font-light w-full"}," Mọi người đều có thể thấy nhóm của bạn ",-1))],2),_("div",{onClick:B[4]||(B[4]=Ae=>o(0)),class:gt(["border-[1px] rounded-lg p-4",i.status==0?"border-blue1 text-black":" border-gray2 text-gray2"])},[_("div",HXe,[L(y(fe),{icon:i.status==0?y(qy):y(Ap),class:gt(["size-6",i.status==0?"text-blue1":"text-gray2"])},null,8,["icon","class"]),B[19]||(B[19]=_("span",{class:"text-sm font-medium"},"Cộng đồng riêng tư",-1))]),B[20]||(B[20]=_("div",{class:"text-wrap text-sm font-light w-full"}," Chỉ thành viên hoặc những người có link mới có thể thấy nhóm của bạn ",-1))],2)]),_("section",null,[_("div",jXe,[B[21]||(B[21]=_("div",null,"Link",-1)),_("div",GXe,[L(y(fe),{onClick:c,icon:y(OA),class:"size-6 text-blue1"},null,8,["icon"])])]),(I(!0),O(Ue,null,ct(i.socials,(Ae,de)=>(I(),O("div",{key:de},[_("div",WXe,[L(y(Tn),{modelValue:Ae.title,"onUpdate:modelValue":we=>Ae.title=we,mode:"md",fill:"outline",placeholder:"Tiêu đề",class:"outline-none text-sm font-light my-4",type:"text","label-placement":"stacked",color:"blue1",required:""},{default:j(()=>[_("div",qXe,[B[23]||(B[23]=be("Tiêu đề")),L(y(Ai),{color:"danger"},{default:j(()=>B[22]||(B[22]=[be("*")])),_:1})])]),_:2},1032,["modelValue","onUpdate:modelValue"]),_("div",KXe,[L(y(Tn),{modelValue:Ae.url,"onUpdate:modelValue":we=>Ae.url=we,mode:"md",fill:"outline",placeholder:"URL",class:"outline-none text-sm font-light",type:"text","label-placement":"stacked",color:"blue1",required:""},{default:j(()=>[_("div",YXe,[B[25]||(B[25]=be("URL")),L(y(Ai),{color:"danger"},{default:j(()=>B[24]||(B[24]=[be("*")])),_:1})])]),_:2},1032,["modelValue","onUpdate:modelValue"]),_("div",{onClick:we=>d(de),class:"flex items-center"},[L(y(fe),{icon:y(BA),class:"size-6 text-gray3"},null,8,["icon"])],8,XXe)])])]))),128))]),L(y(ko),{disabled:!u.value,type:"submit",color:u.value?"blue1":"gray3",class:"mt-4 h-12 w-full text-base uppercase text-center shadow-st rounded-xl"},{default:j(()=>B[26]||(B[26]=[be(" Lưu Lại ")])),_:1},8,["disabled","color"])],32)]}),_:1}))}}),ZXe=Xi(QXe,[["__scopeId","data-v-b83695a2"]]),JXe={class:"ion-padding"},eQe={class:"flex items-center text-lg font-medium justify-between"},tQe=Fe({__name:"ModalAddPrice",setup(n){const e=()=>qe.dismiss(null,"cancel"),t=()=>{e()};return(i,s)=>(I(),O("div",JXe,[_("div",eQe,[s[0]||(s[0]=be(" Thêm giá ")),L(y(fe),{onClick:e,icon:y(ks),class:"size-7 text-black"},null,8,["icon"])]),_("form",{onSubmit:qt(t,["prevent"])},[s[2]||(s[2]=_("div",{class:"border flex text-nowrap p-2.5 text-gray2 rounded-lg"},[_("span",null,"VND"),_("input",{value:99e3,type:"number",pattern:"[0-9]*",title:"Nhập vào ký tự số",class:"text-base text-black font-normal w-full mx-2 px-1 outline-none"}),_("span",null,"/ tháng")],-1)),_("div",{class:"flex justify-end text-sm font-medium gap-2 uppercase mt-3"},[_("div",{class:"py-1.5 px-2.5",onClick:e},"Hủy"),s[1]||(s[1]=_("button",{type:"submit",class:"uppercase py-1.5 px-2.5 bg-blue1 text-white rounded-md"}," Thêm ",-1))])],32)]))}}),nQe={class:"bg-[#EBEBEB] my-3.5 text-sm p-2.5 rounded-lg flex flex-1 items-center justify-between"},iQe={class:"items-center flex gap-1.5"},sQe={class:"text-blue1"},rQe=Fe({__name:"TabMemberFee",setup(n){const e=[{id:1,price:"99K/tháng",numOfMem:3},{id:2,price:"Miễn phí",numOfMem:3}],t=K(e[0]),i=async()=>{const r=await Bd.create({mode:"ios",buttons:[{text:"Chỉnh sửa",handler:()=>console.log("asasas")},{text:"Đặt làm giá hiện tại",handler:()=>console.log("asasas")},{text:"Xoá",role:"destructive",handler:()=>console.log("asasas")},{text:"Huỷ",role:"cancel"}],translucent:!0});await r.present();const o=await r.onWillDismiss();console.log(o)},s=async()=>{(await qe.create({id:"add-price",component:tQe})).present()};return(r,o)=>(I(),ve(y(At),{class:"ion-padding flex-col"},{default:j(()=>[_("div",{class:"flex justify-between items-center mt-2"},[o[0]||(o[0]=_("span",{class:"text-xl font-medium"},"Phí thành viên",-1)),_("div",{onClick:s,class:"p-1 px-2 rounded-md bg-blue1 text-white text-base font-medium"}," Thêm giá ")]),o[1]||(o[1]=_("div",{class:"text-sm font-normal text-black2 my-4"},[be(" Kiếm tiền bằng cách tính phí đăng ký hàng tháng để truy cập vào cộng đồng của bạn. "),_("span",{class:"text-blue1"},"Tìm hiểu thêm.")],-1)),_("section",null,[(I(),O(Ue,null,ct(e,a=>_("div",{key:a.id},[_("div",nQe,[_("div",iQe,[L(y(fe),{src:"/tag.svg",class:"size-4"}),be(" "+Q(a.price),1)]),_("span",sQe,Q(a.numOfMem)+" thành viên ",1),_("span",{class:gt(["px-1 py-1",t.value.id===a.id?"block bg-[#0D804F] text-white rounded-md font-normal":"text-transparent"])}," Giá hiện tại",2),L(y(fe),{onClick:i,icon:y(oB),class:"size-5 text-gray2"},null,8,["icon"])])])),64))])]),_:1}))}}),oQe={class:"ion-padding"},aQe={class:"flex items-stretch gap-1.5"},lQe={class:"text-sm"},cQe={class:"font-medium"},dQe=Fe({__name:"ModalConfirmDelTopic",props:{topic:{}},setup(n){const e=n,t=()=>qe.dismiss(null,"cancel"),i=async()=>{try{const{status:s}=await Qe.delete("community-topic/".concat(e.topic._id));s===200?(tt("Xoá danh mục thành công","success"),qe.dismiss("done","confirm")):qe.dismiss(null,"confirm")}catch(s){tt("Có lỗi xảy ra khi xoá danh mục. Vui lòng thử lại sau!","error")}};return(s,r)=>{var o;return I(),O("div",oQe,[_("section",aQe,[L(y(fe),{onClick:t,icon:y(ZF),class:"size-7 text-orange1"},null,8,["icon"]),_("div",null,[r[2]||(r[2]=_("div",{class:"flex items-center text-lg font-medium justify-between mb-2.5"}," Xóa danh mục ",-1)),_("div",lQe,[r[0]||(r[0]=be(" Khi xóa danh mục ")),_("span",cQe,Q((o=s.topic)==null?void 0:o.title),1),r[1]||(r[1]=be(" toàn bộ đã tạo sẽ bị xóa "))])])]),_("div",{class:"flex justify-end uppercase mt-4 text-base gap-2 items-center"},[_("div",{onClick:t,class:"px-4 py-1 border-[1px] rounded-lg border-gray3"}," Hủy "),_("div",{onClick:i,class:"px-3 py-1.5 bg-blue1 text-white rounded-lg"}," Xác nhận ")])])}}}),uQe={class:"bg-white1 overflow-y-scroll"},hQe=["onClick"],QO=Fe({__name:"ModalPermissionLevel",setup(n){const e=[{value:0,label:"Mọi người"},{value:1,label:"Level 1"},{value:2,label:"Level 2"},{value:3,label:"Level 3"},{value:4,label:"Level 4"},{value:5,label:"Level 5"},{value:6,label:"Level 6"},{value:7,label:"Level 7"},{value:8,label:"Level 8"},{value:9,label:"Level 9"}],t=async i=>{await qe.dismiss(i,"done")};return(i,s)=>(I(),ve(y(At),{color:"white1"},{default:j(()=>[_("section",uQe,[(I(),O(Ue,null,ct(e,(r,o)=>_("div",{key:o},[_("div",{onClick:a=>t(r.value),class:"py-2 ion-padding-horizontal"},Q(r.label),9,hQe)])),64))])]),_:1}))}}),fQe={class:"text-black font-medium text-lg text-center"},pQe={slot:"label"},mQe={slot:"label"},gQe={slot:"end",class:"flex items-center"},bQe={slot:"end",class:"flex items-center"},ZO=Fe({__name:"ModalCreateTopic",props:{type:{},topic:{}},setup(n){var c,d,u,h,f,m,g,b,w;const e=n,{community:t}=et(ln()),i=Yi({community_id:(c=t.value)==null?void 0:c._id,description:(u=(d=e==null?void 0:e.topic)==null?void 0:d.description)!=null?u:"",read_permission:hv[(f=(h=e.topic)==null?void 0:h.read_permission)!=null?f:0].value,title:(g=(m=e==null?void 0:e.topic)==null?void 0:m.title)!=null?g:"",write_permission:hv[(w=(b=e.topic)==null?void 0:b.write_permission)!=null?w:0].value}),s=async()=>await qe.dismiss(),r=lt(()=>!J.isEmpty(i.title)),o=async()=>{const x=await qe.create({component:QO,showBackdrop:!0,initialBreakpoint:.55});await x.present();const{data:k,role:E}=await x.onWillDismiss();E==="done"&&(i.read_permission=k)},a=async()=>{const x=await qe.create({component:QO,showBackdrop:!0,initialBreakpoint:.55});await x.present();const{data:k,role:E}=await x.onWillDismiss();E==="done"&&(i.write_permission=k)},l=async()=>{var x;if(!J.isEmpty(i.title))try{if(e.type==="create"){const{data:k,status:E}=await Qe.post("/community-topic",i);E===201&&!J.isEmpty(k)&&(tt("Tạo danh mục thành công","success"),qe.dismiss(k,"created"))}if(e.type==="edit"){const{data:k,status:E}=await Qe.patch("/community-topic/".concat((x=e.topic)==null?void 0:x._id),i);E===200&&!J.isEmpty(k)&&(tt("Cập nhật danh mục thành công","success"),qe.dismiss(k,"edited"))}}catch(k){tt("Xảy ra lỗi khi tạo danh mục!","error")}};return(x,k)=>(I(),O(Ue,null,[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{color:"white",mode:"ios"},{default:j(()=>[L(y(fe),{slot:"start",onClick:s,icon:y(ks),class:"size-7 text-gray2 mr-4"},null,8,["icon"]),_("div",fQe,Q(x.type==="create"?"Thêm danh mục":"Chỉnh sửa danh mục"),1),_("div",{onClick:l,slot:"end",class:gt(["text-gray2 uppercase text-sm font-medium px-4 py-1 rounded-lg",r.value?"bg-blue1 text-white":"bg-gray1"])}," Xong ",2)]),_:1})]),_:1}),L(y(At),{class:"ion-padding"},{default:j(()=>[_("form",null,[L(y(Tn),{modelValue:i.title,"onUpdate:modelValue":k[0]||(k[0]=E=>i.title=E),mode:"md",required:"",fill:"outline",placeholder:"Tên",class:"outline-none text-sm font-light mb-2 mt-2",type:"text","label-placement":"stacked",color:"blue1",counter:!0,maxlength:30},{default:j(()=>[_("div",pQe,[k[3]||(k[3]=be("Tên")),L(y(Nd),{color:"danger"},{default:j(()=>k[2]||(k[2]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Ep),{modelValue:i.description,"onUpdate:modelValue":k[1]||(k[1]=E=>i.description=E),mode:"md",required:"","label-placement":"stacked",fill:"outline",placeholder:"Mô tả danh mục",class:"outline-none text-sm font-light mt-1 h-28",counter:!0,maxlength:150},{default:j(()=>[_("div",mQe,[k[4]||(k[4]=be("Mô tả")),L(y(Nd),{color:"danger"})])]),_:1},8,["modelValue"]),L(y(Tn),{value:y(hv)[i.read_permission].label,mode:"md",required:"",fill:"outline",placeholder:"Quyền truy cập",label:"Quyền truy cập",class:"outline-none text-sm font-light mb-4 mt-8","label-placement":"stacked",color:"blue1",readonly:"",onClick:qt(o,["prevent"])},{default:j(()=>[_("div",gQe,[L(y(fe),{icon:y(Al),slot:"icon-only",class:"text-gray2 size-5","aria-hidden":"true"},null,8,["icon"])])]),_:1},8,["value"]),L(y(Tn),{value:y(hv)[i.write_permission].label,mode:"md",required:"",fill:"outline",placeholder:"Quyền đăng bài",label:"Quyền đăng bài",class:"outline-none text-sm font-light mb-4 mt-8","label-placement":"stacked",color:"blue1",readonly:"",onClick:qt(a,["prevent"])},{default:j(()=>[_("div",bQe,[L(y(fe),{icon:y(Al),slot:"icon-only",class:"text-gray2 size-5","aria-hidden":"true"},null,8,["icon"])])]),_:1},8,["value"])])]),_:1})],64))}}),vQe={class:"flex justify-between items-center mt-2 ion-padding"},yQe={key:0,class:"flex items-center justify-between text-sm text-orange-400 ion-padding-horizontal"},wQe={class:"flex items-center gap-1"},xQe={class:"flex gap-4 items-stretch my-3 flex-1"},_Qe={class:"text-base font-medium flex-1 w-full"},kQe={class:"text-sm text-gray2 mt-1.5 font-normal"},EQe=Fe({__name:"TabDiscussTopic",setup(n){const{community:e}=et(ln()),t=K([]),i=K(1),s=K(!1),r=K(!1),o=K([]),a=w=>{t.value=w.detail.complete(t.value)},l=async w=>{const k=[{text:"Chỉnh sửa",handler:()=>c(w)},{text:"Di chuyển",id:"move",handler:()=>{r.value=!0,o.value=[...t.value]}},{text:"Xoá",role:"destructive",handler:()=>d(w)},{text:"Huỷ",role:"cancel"}].filter(T=>t.value.length<2?T.id!="move":T);await(await Bd.create({mode:"ios",buttons:k,translucent:!0})).present()},c=async w=>{const x=await qe.create({mode:"ios",initialBreakpoint:.9,component:ZO,componentProps:{type:"edit",topic:w}});await x.present();const{data:k,role:E}=await x.onWillDismiss();E==="edited"&&!J.isEmpty(k)&&(t.value=t.value.map(T=>T._id===(w==null?void 0:w._id)?k:T))},d=async(w,x=!0)=>{x&&await Bd.dismiss(null,"cancel");const k=await qe.create({component:dQe,componentProps:{topic:w},cssClass:"confirmtp",mode:"ios"});await k.present();const{data:E,role:T}=await k.onWillDismiss();if(T==="confirm"&&E==="done"){const P=t.value.findIndex(C=>C._id===(w==null?void 0:w._id));t.value.splice(P,1)}},u=async()=>{const w=await qe.create({component:ZO,mode:"ios",initialBreakpoint:.9,componentProps:{type:"create"}});await w.present();const{data:x,role:k}=await w.onWillDismiss();k==="created"&&!J.isEmpty(x)&&t.value.unshift(x)},h=()=>{t.value=o.value,o.value=[],r.value=!1},f=async()=>{var w;try{const x=t.value.map((E,T)=>({...E,order:T})),{status:k}=await Qe.patch("community-topic/".concat((w=e.value)==null?void 0:w._id,"/reorder"),{list:x});k===200&&tt("Cập nhật thứ tự danh mục thành công.","success")}catch(x){tt("Đã có lỗi xảy ra. Vui lòng thử lại sau!","error")}finally{o.value=[],r.value=!1}},m=async(w=1,x=!1)=>{var E,T,P,C;const{data:k}=await Qe.get("community-topic",{params:{page:w,limit:20,"filter[community_id]":(E=e.value)==null?void 0:E._id,"sort[order]":1,"sort[_id]":-1}});J.isEmpty(k)?s.value=!1:((T=k==null?void 0:k.meta)!=null&&T.hasNextPage?(i.value++,s.value=!0):s.value=!1,x?t.value=[...t.value,...(P=k.data)!=null?P:[]]:t.value=(C=k==null?void 0:k.data)!=null?C:[])};on(()=>{m(),i.value=1,s.value=!1});const g=async w=>{m(i.value,!0),setTimeout(()=>w.target.complete(),500)},b=async w=>{m(),i.value=1,s.value=!1,setTimeout(()=>{w.target.complete()},500)};return(w,x)=>(I(),ve(y(At),{class:"flex-col"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:b},{default:j(()=>[L(y(eo))]),_:1}),_("div",vQe,[x[0]||(x[0]=_("span",{class:"text-xl font-medium"},"Danh mục thảo luận",-1)),_("div",{onClick:u,class:"p-0.5 rounded-full flex bg-blue1"},[L(y(fe),{icon:y(l0),class:"size-5 text-white"},null,8,["icon"])])]),r.value?(I(),O("div",yQe,[_("div",wQe,[L(y(fe),{onClick:h,icon:y(Cp),class:"size-6 text-red-400"},null,8,["icon"]),x[1]||(x[1]=be(" Di chuyển danh mục để thay đổi thứ tự "))]),L(y(fe),{onClick:f,icon:y(NT),class:"size-6 text-green-500"},null,8,["icon"])])):re("",!0),L(y(kT),{disabled:!1,onIonItemReorder:a},{default:j(()=>[(I(!0),O(Ue,null,ct(t.value,k=>(I(),ve(y(KN),{key:k._id},{default:j(()=>[_("div",xQe,[r.value?(I(),ve(y(_T),{key:0},{default:j(()=>[L(y(fe),{icon:y(BT),class:"size-7 text-gray2"},null,8,["icon"])]),_:1})):re("",!0),_("div",_Qe,[be(Q(k.title)+" ",1),_("div",kQe,Q(k.description),1)]),r.value?re("",!0):(I(),ve(y(fe),{key:1,onClick:qt(E=>l(k),["stop"]),icon:y(Sp),class:"size-6 px-1 text-gray2"},null,8,["onClick","icon"]))])]),_:2},1024))),128))]),_:1}),s.value?(I(),ve(y(Zn),{key:1,onIonInfinite:g},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}))}}),TQe={key:0},CQe={class:"flex items-center gap-1 mt-4 mb-2"},SQe={class:"border border-gray1 rounded-md mb-3 bg-white"},AQe={class:"flex justify-between flex-wrap sm:flex-nowrap max-sm:gap-3 w-full p-2 pr-1"},IQe={class:"w-full"},PQe={class:"md:pl-3 py-2 text-gray-700 whitespace-pre-wrap"},RQe=["textContent"],$Qe={class:"flex gap-2 items-center"},LQe={key:0,class:"mx-1 flex items-center"},OQe={class:"mt-4"};const DQe=Fe({__name:"TabAffiliate",setup(n){var f,m;const e="https://unica.expert",{community:t}=et(ln()),{userCommunity:i}=et(Li()),s=en(),{userInfo:r}=et(s),o=K(!1),a=lt(()=>{var g,b;return"".concat(e,"/").concat(((g=t==null?void 0:t.value)==null?void 0:g.short_name)||((b=t==null?void 0:t.value)==null?void 0:b._id)||"","?ref=")}),l=K(((f=r.value)==null?void 0:f.username)||((m=r.value)==null?void 0:m._id)),c=Yi({username:l.value}),d="".concat(a.value).concat(c.username),u=async()=>{try{const{data:g,status:b}=await Qe.patch("/users/me",{...c,form:$b.Ref});b==200?(await s.setUserInfo(g),await tt("Cập nhật mã giới thiệu thành công!","success")):await tt("Cập nhật mã giới thiệu thất bại!","warning")}catch(g){await tt("Cập nhật mã giới thiệu thất bại!","warning"),console.error(g)}finally{o.value=!1}o.value=!1},h=async()=>{const g="".concat(a.value).concat(c.username);await Cc.write({string:g}),await tt("Sao chép mã giới thiệu thành công!","success")};return lt(()=>{var g;return((g=i.value)==null?void 0:g.role)===Ei.Admin}),(g,b)=>(I(),ve(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>{var w,x,k,E;return[(I(),O("div",TQe,[_("div",null," Giới thiệu thành viên tham gia cộng đồng nhận "+Q((x=(w=y(t))==null?void 0:w.aff_com_rate)!=null?x:0)+"% ",1),_("div",CQe,[L(y(fe),{icon:y(Ix),class:"size-6 text-gray2"},null,8,["icon"]),b[2]||(b[2]=_("span",null,"Link giới thiệu của bạn:",-1))]),_("section",SQe,[_("div",AQe,[_("div",IQe,[_("span",PQe,Q(a.value),1),o.value?si((I(),O("input",{key:0,"onUpdate:modelValue":b[0]||(b[0]=P=>c.username=P),class:"border-2 border-dashed p-1 rounded-lg mx-1 outline-0 w-auto"},null,512)),[[Ti,c.username]]):(I(),O("span",{key:1,textContent:Q(c.username),class:"text-base font-medium"},null,8,RQe))]),_("div",$Qe,[o.value?(I(),O("button",{key:1,onClick:u,class:"px-2 flex items-center",type:"button"},[L(y(fe),{icon:y(hB),class:"size-6 text-gray2"},null,8,["icon"])])):(I(),O("div",LQe,[L(y(fe),{onClick:b[1]||(b[1]=P=>o.value=!0),icon:y(sB),class:"size-6 text-blue1"},null,8,["icon"])])),_("button",{onClick:h,class:"px-2 flex items-center text-gray2",type:"button"},[L(y(fe),{icon:y(vb),class:"size-6"},null,8,["icon"])])])])]),_("i",null,"Bạn có thể gắn mã giới thiệu vào bất kỳ link nào. ví dụ : https://unica.expert/.....?ref="+Q(((k=y(r))==null?void 0:k.username)||((E=y(r))==null?void 0:E._id)),1),_("div",OQe,[b[3]||(b[3]=_("div",{class:"mb-3"},"Mã QR giới thiệu của bạn:",-1)),L(u_,{value:d,"render-as":"svg",size:160,level:"Q"})])]))]}),_:1}))}}),MQe={class:"ion-padding"},NQe={class:"font-light pb-5"},FQe={class:"font-normal pl-1"},BQe={slot:"label"},VQe={class:"flex justify-end mt-4 gap-2"},UQe=Fe({__name:"ModalEditLevel",props:{level:{},index:{default:1}},setup(n){var o;const e=n,{community:t}=et(ln()),i=K((o=e.level.name)!=null?o:""),s=async()=>{var a,l;try{if(!J.isEmpty(i.value)){const{status:c}=await Qe.post("community-level",{name:i.value,level_id:(a=e.level.level_id)!=null?a:e.level._id,community_id:(l=t.value)==null?void 0:l._id});c===201&&(tt("Cập nhật level thành công!","success"),qe.dismiss(null,"success"))}}catch(c){tt("Đã có lỗi xảy ra. Vui lòng thử lại sau!","error")}finally{r()}},r=()=>qe.dismiss(null,"cancel");return(a,l)=>(I(),O("div",MQe,[_("div",NQe,[l[1]||(l[1]=be(" Chỉnh sửa level: ")),_("span",FQe,Q("Level ".concat(a.index)),1)]),L(y(Tn),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=c=>i.value=c),mode:"md",required:"",fill:"outline",placeholder:"Tên Level",class:"outline-none text-sm font-light",autocomplete:"off",type:"email","label-placement":"floating",color:"blue1",counter:"",maxlength:255},{default:j(()=>[_("div",BQe,[l[3]||(l[3]=be("Tên Level")),L(y(Ai),{color:"danger"},{default:j(()=>l[2]||(l[2]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),_("section",VQe,[_("div",{onClick:r,class:"px-5 py-1 rounded-lg font-medium text-[#4a4848]"}," Huỷ "),_("div",{onClick:s,class:gt(["px-5 py-1 rounded-lg text-white font-medium",y(J.isEmpty)(i.value)?"bg-gray3":"bg-blue1"])}," Lưu ",2)])]))}}),zQe={class:"flex items-center border-b-[1px] border-b-gray1 px-2"},HQe={key:0,class:"px-2.5"},jQe={key:1},GQe=Fe({__name:"TabLevelSetting",setup(n){const{community:e}=et(ln()),t=K([]),i=async()=>{var o;const{data:r}=await Qe.get("community-level",{params:{community_id:(o=e.value)==null?void 0:o._id}});t.value=r!=null?r:[]},s=async(r,o)=>{const a=await qe.create({component:UQe,componentProps:{level:r,index:o+""},mode:"ios",cssClass:"confirmlv"});await a.present();const{role:l}=await a.onWillDismiss();l==="success"&&i()};return on(()=>{i()}),(r,o)=>(I(),ve(y(At),{color:"white",class:"ion-padding"},{default:j(()=>[_("section",null,[(I(!0),O(Ue,null,ct(t.value,(a,l)=>(I(),O("div",{key:a._id},[_("div",zQe,[_("div",{class:gt(["font-medium text-base py-4 flex-1",l===t.value.length-1&&"border-b-[0px]"])},[be(Q("Level ".concat(l+1))+" ",1),y(J.isEmpty)(a.name)?re("",!0):(I(),O("span",HQe,"-")),y(J.isEmpty)(a.name)?re("",!0):(I(),O("span",jQe,Q(" ".concat(a.name)),1))],2),L(y(fe),{onClick:c=>s(a,l+1),src:"/icons/icEdit.svg",class:"text-blue1 size-5"},null,8,["onClick"])])]))),128))])]),_:1}))}}),WQe={class:"ion-padding"},qQe={class:"flex items-stretch gap-1.5"},KQe={class:"text-sm"},YQe={class:"font-medium"},XQe=Fe({__name:"ModalConfirmDelCoupon",props:{coupon:{}},setup(n){const e=n,{community:t}=et(ln()),i=()=>qe.dismiss(null,"cancel"),s=async()=>{var r;try{const{status:o}=await Qe.delete("community-coupon/".concat(e.coupon._id),{data:{community_id:(r=t.value)==null?void 0:r._id}});o===200?(tt("Xoá danh mục thành công","success"),qe.dismiss("done","confirm")):qe.dismiss(null,"confirm")}catch(o){tt("Có lỗi xảy ra khi xoá danh mục. Vui lòng thử lại sau!","error")}};return(r,o)=>(I(),O("div",WQe,[_("section",qQe,[L(y(fe),{onClick:i,icon:y(ZF),class:"size-7 text-orange1"},null,8,["icon"]),_("div",null,[o[1]||(o[1]=_("div",{class:"flex items-center text-lg font-medium justify-between mb-2.5"}," Xóa Coupon ",-1)),_("div",KQe,[o[0]||(o[0]=be(" Bạn có chắc chắn muốn xoá coupon ")),_("span",YQe,Q(r.coupon.name),1)])])]),_("div",{class:"flex justify-end uppercase mt-4 text-base gap-2 items-center"},[_("div",{onClick:i,class:"px-4 py-1 border-[1px] rounded-lg border-gray3"}," Hủy "),_("div",{onClick:s,class:"px-3 py-1.5 bg-blue1 text-white rounded-lg"}," Xác nhận ")])]))}});var Ou=(n=>(n[n.Amount=0]="Amount",n[n.Rate=1]="Rate",n))(Ou||{}),Hu=(n=>(n.ALL="ALL",n.COURSE="COURSE",n.EVENT="EVENT",n.PRODUCT="PRODUCT",n))(Hu||{});const _j={[Hu.ALL]:"Tất cả",[Hu.COURSE]:"Khóa học",[Hu.EVENT]:"Sự kiện",[Hu.PRODUCT]:"Sản phẩm"},QQe={class:"bg-white1 h-full"},ZQe=["onClick"],JQe=Fe({__name:"ModalSelectProductType",props:{selected:{}},setup(n){const e=t=>{qe.dismiss(t,"done")};return(t,i)=>(I(),O("section",QQe,[(I(!0),O(Ue,null,ct(y(_j),(s,r)=>(I(),O("div",{key:r},[_("div",{onClick:o=>e(r),class:gt(["py-2 ion-padding-horizontal",t.selected===y(Hu)[r]&&"bg-blue1-tint1"])},Q(s),11,ZQe)]))),128))]))}}),eZe={class:"text-black font-medium text-lg text-center"},tZe={slot:"label"},nZe={slot:"label"},iZe={class:"mb-4"},sZe={class:"flex gap-8"},rZe={class:"flex items-center gap-1"},oZe={class:"flex items-center gap-1"},aZe={slot:"label"},lZe={slot:"label"},cZe={slot:"end",class:"flex items-center"},dZe={class:"flex items-center gap-2"},uZe={key:0,slot:"start",class:"text-gray2"},hZe={key:1,slot:"start",class:"text-base font-normal"},fZe={key:2,slot:"end",class:"flex items-center"},pZe=Fe({__name:"ModalCreateCoupon",props:{type:{},coupon:{}},setup(n){var f,m,g,b,w,x,k,E,T,P,C,A,R,M;const e=()=>qe.dismiss(),t=n;console.log(t.coupon);const{community:i}=et(ln()),s=Yi({community_id:(m=(f=i.value)==null?void 0:f._id)!=null?m:"",name:((g=t==null?void 0:t.coupon)==null?void 0:g.name)||"",code:((b=t==null?void 0:t.coupon)==null?void 0:b.code)||"",type_discount:((w=t==null?void 0:t.coupon)==null?void 0:w.type_discount)||Ou.Amount,discount_price:((x=t==null?void 0:t.coupon)==null?void 0:x.discount_price)||void 0,inventory:(k=t==null?void 0:t.coupon)==null?void 0:k.inventory,expiry_date:(E=t==null?void 0:t.coupon)!=null&&E.expiry_date?_t(new Date((T=t==null?void 0:t.coupon)==null?void 0:T.expiry_date)).toISOString():_t(new Date).add(1,"days").format("YYYY-MM-DD"),classify_discount:((P=t==null?void 0:t.coupon)==null?void 0:P.classify_discount)||Hu.ALL}),r=K(((C=t==null?void 0:t.coupon)==null?void 0:C.type_discount)||Ou.Amount),o=K(!!((A=t==null?void 0:t.coupon)!=null&&A.expiry_date)),a=K((R=t==null?void 0:t.coupon)!=null&&R.expiry_date?_t(new Date((M=t==null?void 0:t.coupon)==null?void 0:M.expiry_date)).toISOString():_t(new Date).add(1,"days").toISOString()),l=async()=>{if(!o.value)return;const N=await qe.create({component:SH,componentProps:{selectedDate:_t(a.value).toISOString(),minDate:_t(new Date).add(1,"day").toISOString(),value:a.value},showBackdrop:!0,mode:"ios",initialBreakpoint:.5});await N.present();const{data:U,role:G}=await N.onDidDismiss();G==="confirm"&&(a.value=U,s.expiry_date=_t(U).format("YYYY-MM-DD"))},c=async()=>{const N=await qe.create({component:JQe,componentProps:{selected:s.classify_discount},mode:"ios",initialBreakpoint:.2});await N.present();const{role:U,data:G}=await N.onWillDismiss();U==="done"&&!J.isEmpty(G)&&(s.classify_discount=G)},d=lt(()=>!J.isEmpty(s.name)&&!J.isEmpty(s.code)&&!J.isEmpty(s.inventory+"")&&!J.isEmpty(s.discount_price+"")),u=()=>{const N=Number(s.discount_price);return J.isNaN(N)||N<0||N>100?(tt("Giá trị phải từ 0 đến 100","warning"),!1):!0},h=async()=>{var N;if(u()){try{if(t.type==="create"){const{status:U,data:G}=await Qe.post("community-coupon",{...s,type_discount:r.value,inventory:J.isNaN(Number(s.inventory))?0:Number(s.inventory),discount_price:J.isNaN(Number(s.discount_price))?0:Number(s.discount_price),expiry_date:s.expiry_date&&o.value?_t(s.expiry_date).format("YYYY-MM-DD"):""});U===201&&!J.isEmpty(G)&&(tt("Tạo coupon thành công","success"),qe.dismiss(G,"success"))}else if(t.type==="edit"){const U={...s,type_discount:r.value,inventory:J.isNaN(Number(s.inventory))?0:Number(s.inventory),discount_price:J.isNaN(Number(s.discount_price))?0:Number(s.discount_price),expiry_date:s.expiry_date&&o.value?_t(s.expiry_date).format("YYYY-MM-DD"):""},{status:G,data:B}=await Qe.patch("community-coupon/".concat((N=t.coupon)==null?void 0:N._id),U);G===200&&!J.isEmpty(B)&&(tt("Cập nhật coupon thành công","success"),qe.dismiss({...U,expiry_date:_t(new Date(s.expiry_date)).toISOString()},"edited"))}}catch(U){tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}return}};return(N,U)=>(I(),O(Ue,null,[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{color:"white",mode:"ios"},{default:j(()=>[L(y(fe),{slot:"start",onClick:e,icon:y(ks),class:"size-7 text-gray2 mr-4"},null,8,["icon"]),_("div",eZe,Q(N.type==="create"?"Thêm Coupon":"Chỉnh sửa Coupon"),1),_("div",{onClick:h,slot:"end",class:gt(["text-gray2 uppercase text-sm font-medium px-4 py-1 rounded-lg",d.value?"bg-blue1 text-white":"bg-gray1"])}," Xong ",2)]),_:1})]),_:1}),L(y(At),{class:"ion-padding"},{default:j(()=>[_("form",null,[L(y(Tn),{modelValue:s.name,"onUpdate:modelValue":U[0]||(U[0]=G=>s.name=G),mode:"md",required:"",fill:"outline",placeholder:"Tên",class:"outline-none text-sm font-light mb-4",type:"text","label-placement":"stacked",color:"blue1"},{default:j(()=>[_("div",tZe,[U[7]||(U[7]=be("Tên")),L(y(Ai),{color:"danger"},{default:j(()=>U[6]||(U[6]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Tn),{modelValue:s.code,"onUpdate:modelValue":U[1]||(U[1]=G=>s.code=G),mode:"md",required:"",fill:"outline",placeholder:"Mã Coupon",class:"outline-none text-sm font-light",type:"text","label-placement":"stacked",color:"blue1",counter:!0,maxlength:20},{default:j(()=>[_("div",nZe,[U[9]||(U[9]=be("Mã Coupon")),L(y(Ai),{color:"danger"},{default:j(()=>U[8]||(U[8]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),_("section",iZe,[U[15]||(U[15]=_("div",{class:"pb-2"},"Loại giảm giá",-1)),L(y(Tc),{value:y(Ou).Amount,modelValue:r.value,"onUpdate:modelValue":U[2]||(U[2]=G=>r.value=G)},{default:j(()=>[_("div",sZe,[_("div",rZe,[L(y(La),{value:y(Ou).Amount,mode:"md","label-placement":"end",color:"blue1",justify:"start",alignment:"start"},null,8,["value"]),U[10]||(U[10]=_("div",{class:"text-base"},"VNĐ",-1))]),_("div",oZe,[L(y(La),{value:y(Ou).Rate,mode:"md","label-placement":"end",color:"blue1",justify:"start",alignment:"start"},null,8,["value"]),U[11]||(U[11]=_("div",{class:"text-base"},"%",-1))])])]),_:1},8,["value","modelValue"]),L(y(Tn),{modelValue:s.discount_price,"onUpdate:modelValue":U[3]||(U[3]=G=>s.discount_price=G),mode:"md",required:"",fill:"outline",placeholder:"0",class:"outline-none text-sm font-light mt-4",type:"number","label-placement":"stacked",color:"blue1"},{default:j(()=>[_("div",aZe,[be(Q(r.value===y(Ou).Rate?"Giá trị (%)":"Giá trị"),1),L(y(Ai),{color:"danger"},{default:j(()=>U[12]||(U[12]=[be("*")])),_:1})])]),_:1},8,["modelValue"]),L(y(Tn),{modelValue:s.inventory,"onUpdate:modelValue":U[4]||(U[4]=G=>s.inventory=G),mode:"md",required:"",fill:"outline",placeholder:"0",class:"outline-none text-sm font-light my-4",type:"number","label-placement":"stacked",color:"blue1",min:0},{default:j(()=>[_("div",lZe,[U[14]||(U[14]=be(" Số lượng sử dụng")),L(y(Ai),{color:"danger"},{default:j(()=>U[13]||(U[13]=[be("*")])),_:1})])]),_:1},8,["modelValue"])]),U[17]||(U[17]=_("div",null,"Áp dụng với",-1)),L(y(Tn),{value:y(_j)[s.classify_discount],mode:"md",required:"",fill:"outline",placeholder:"Loại sản phẩm",label:"Loại sản phẩm",class:"outline-none text-sm font-light mb-4 mt-4","label-placement":"stacked",color:"blue1",readonly:"",onClick:qt(c,["prevent"])},{default:j(()=>[_("div",cZe,[L(y(fe),{icon:y(Al),slot:"icon-only",class:"text-gray2 size-5","aria-hidden":"true"},null,8,["icon"])])]),_:1},8,["value"]),_("div",null,[_("div",dZe,[L(y(Xp),{mode:"md",modelValue:o.value,"onUpdate:modelValue":U[5]||(U[5]=G=>o.value=G),alignment:"start",justify:"start","label-placement":"end",color:"blue1"},null,8,["modelValue"]),U[16]||(U[16]=_("div",{class:"text-[13px]"},"Thời gian hết hạn",-1))]),L(y(Tn),{mode:"md",required:"",fill:"outline",class:gt(["outline-none text-sm font-light mb-4 mt-4",!o.value&&"disabled"]),type:"text",color:"blue1",readonly:"",disabled:!o.value,onClick:qt(l,["prevent"])},{default:j(()=>[o.value?(I(),O("div",hZe,Q(y(_t)(a.value).format("DD/MM/YYYY")),1)):(I(),O("div",uZe," DD/MM/YYYYY ")),o.value?(I(),O("div",fZe,[L(y(fe),{onClick:qt(()=>{},["stop"]),icon:y(eB),slot:"icon-only",class:"text-gray2 size-5","aria-hidden":"true"},null,8,["icon"])])):re("",!0)]),_:1},8,["class","disabled"])])])]),_:1})],64))}}),JO=Xi(pZe,[["__scopeId","data-v-73503b70"]]),mZe={class:"pt-4 ion-padding-horizontal flex items-center gap-3"},gZe={class:"pb-10"},bZe={key:0},vZe={class:"bg-white1 p-2.5 rounded-lg"},yZe={class:"font-normal text-base pb-1 flex items-start justify-between"},wZe={class:"flex items-center gap-2"},xZe={class:"font-medium pl-1"},_Ze={key:0,class:"font-medium pl-1"},kZe={key:1,class:"font-medium pl-1"},EZe={class:"font-medium pl-1"},TZe={key:0},CZe={key:1},SZe={key:2},AZe={key:3},IZe={class:"font-medium pl-1"},PZe={class:"font-medium pl-1"},RZe={key:0,class:"text-red-500 font-normal"},$Ze={key:1,class:"text-green-500"},LZe={key:1,class:"justify-center items-center flex flex-col mt-[20%]"},OZe=Fe({__name:"TabCouponSetting",setup(n){const{community:e}=et(ln()),t=K([]),i=K(1),s=K(!1),r=K(""),o=async(h=1,f=!1)=>{var g,b,w,x;const{data:m}=await Qe.get("community-coupon",{params:{"filter[community_id]":(g=e.value)==null?void 0:g._id,"filter[name]":J.isEmpty(r.value)?null:r.value,limit:15,page:h}});J.isEmpty(m)?s.value=!1:((b=m==null?void 0:m.meta)!=null&&b.hasNextPage?(i.value++,s.value=!0):s.value=!1,f?t.value=[...t.value,...(w=m.data)!=null?w:[]]:t.value=(x=m==null?void 0:m.data)!=null?x:[])};on(()=>{o(),i.value=1,s.value=!1});const a=async h=>{o(i.value,!0),setTimeout(()=>h.target.complete(),500)},l=()=>{o(),i.value=1,s.value=!1},c=async h=>{const f=await qe.create({component:XQe,componentProps:{coupon:h},mode:"ios",cssClass:"confirmcp"});await f.present();const{data:m,role:g}=await f.onWillDismiss();if(g==="confirm"&&m==="done"){const b=t.value.findIndex(w=>w._id===(h==null?void 0:h._id));t.value.splice(b,1)}},d=async()=>{const h=await qe.create({component:JO,mode:"ios",componentProps:{type:"create"}});await h.present();const{data:f,role:m}=await h.onWillDismiss();m==="success"&&!J.isEmpty(f)&&t.value.unshift(f)},u=async h=>{var b;const f=await qe.create({component:JO,mode:"ios",componentProps:{type:"edit",coupon:h}});await f.present();const{data:m,role:g}=await f.onWillDismiss();g==="edited"&&!J.isEmpty(m)&&(t.value=(b=t.value)==null?void 0:b.map(w=>w._id===(h==null?void 0:h._id)?{...w,...m}:w))};return(h,f)=>(I(),O(Ue,null,[_("section",mZe,[_("form",{onSubmit:qt(l,["prevent"]),class:"flex items-center border-[1px] bg-white flex-1 border-gray3 rounded-lg overflow-hidden"},[L(y(fe),{onClick:l,icon:y(Qd),class:"text-gray2 size-6 pl-2"},null,8,["icon"]),si(_("input",{"onUpdate:modelValue":f[0]||(f[0]=m=>r.value=m),placeholder:"Tìm coupon",class:"py-1.5 px-2 w-full"},null,512),[[Ti,r.value]])],32),L(y(fe),{onClick:d,icon:y(OA),class:"size-7 text-blue1"},null,8,["icon"])]),L(y(At),{class:"ion-padding"},{default:j(()=>[_("div",gZe,[y(J.isEmpty)(t.value)?(I(),O("div",LZe,[L(y(fe),{src:"/icEmpty.svg",class:"size-32"}),f[6]||(f[6]=_("p",{class:"text-gray2 text-base"},"Không có dữ liệu",-1))])):(I(),O("section",bZe,[(I(!0),O(Ue,null,ct(t.value,m=>{var g;return I(),O("div",{class:"text-sm font-light my-2",key:m._id},[_("section",vZe,[_("div",yZe,[be(Q(m.name)+" ",1),_("div",wZe,[L(y(fe),{onClick:b=>u(m),src:"/icons/icEdit.svg",class:"size-5 text-blue1"},null,8,["onClick"]),L(y(fe),{onClick:b=>c(m),icon:y(Rx),class:"size-5 text-red-500"},null,8,["onClick","icon"])])]),_("div",null,[f[1]||(f[1]=be(" Code:")),_("span",xZe,Q(m.code),1)]),_("div",null,[f[2]||(f[2]=be(" Giá trị:")),m.type_discount==0?(I(),O("span",_Ze,Q(m.discount_price.toLocaleString("vi-VN",{style:"currency",currency:"VND"})),1)):(I(),O("span",kZe,Q(m.discount_price)+"%",1))]),_("div",null,[f[3]||(f[3]=be(" Loại: ")),_("span",EZe,[m.classify_discount==="ALL"?(I(),O("span",TZe,"Tất cả")):re("",!0),m.classify_discount==="COURSE"?(I(),O("span",CZe,"Khóa học")):re("",!0),m.classify_discount==="EVENT"?(I(),O("span",SZe,"Sự kiện")):re("",!0),m.classify_discount==="PRODUCT"?(I(),O("span",AZe,"Sản phẩm")):re("",!0)])]),_("div",null,[f[5]||(f[5]=be(" Đã dùng: ")),_("span",IZe,Q((g=m==null?void 0:m.usage_count)!=null?g:0)+"/"+Q(m.inventory),1),_("div",null,[f[4]||(f[4]=be(" Hạn sử dụng:")),_("span",PZe,Q(m.expiry_date?y(_t)(m.expiry_date).format("DD/MM/YYYY"):"Không giới hạn"),1)])]),m.expiry_date&&y(_t)().isAfter(y(_t)(m.expiry_date))||m.usage_count==m.inventory?(I(),O("div",RZe," Tạm dừng ")):(I(),O("div",$Ze,"Hoạt động"))])])}),128))]))]),s.value?(I(),ve(y(Zn),{key:0,onIonInfinite:a},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})],64))}}),DZe={class:"mt-4"},MZe={key:0,class:"font-medium text-lg mt-3 mb-2"},NZe={class:"text-wrap"},FZe=Fe({__name:"TabNotification",setup(n){const{userInfo:e}=et(en()),{userCommunity:t}=et(Li()),{community:i}=et(ln()),s=K(!0),r=lt(()=>{var h;return((h=t.value)==null?void 0:h.role)===Ei.Admin}),o=lt(()=>r.value?PLe:RLe),a=lt(()=>[{groupName:void 0,values:o.value},{groupName:"Email",values:ILe}]),c=Yi(a.value.reduce((h,f)=>(Object.keys(f.values).forEach(m=>{h[m]=!0}),h),{})),d=async()=>{var h;try{const{data:f,status:m}=await Qe.get("/notification/user-setting/".concat((h=i.value)==null?void 0:h._id));if(m===200&&!J.isEmpty(f)){const b=f.type_notification_receive;Object.keys(b).forEach(w=>{var x;w in c&&(c[w]=(x=b[w])!=null?x:!1)}),s.value=!1}}catch(f){console.log(f)}finally{s.value=!1}},u=async()=>{var h,f;try{if(s.value){tt("Đang lưu cài đặt!","warning");return}const{data:m,status:g}=await Qe.patch("/notification/user-setting",{type_notification_receive:c,community_id:(h=i.value)==null?void 0:h._id,user_id:(f=e.value)==null?void 0:f._id});console.log(m,g),g===200?tt("Cập nhật thông báo thành công!","success"):tt("Đã có lỗi xảy ra. Vui lòng thử lại!","error")}catch(m){console.log(m)}finally{s.value=!1}};return tr(()=>{d(),s.value=!1}),(h,f)=>(I(),O(Ue,null,[L(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>[f[0]||(f[0]=_("h1",{class:"font-medium"},"Cài đặt thông báo",-1)),_("div",DZe,[(I(!0),O(Ue,null,ct(a.value,(m,g)=>(I(),O("div",{key:g},[m.groupName?(I(),O("div",MZe,Q(m.groupName),1)):re("",!0),(I(!0),O(Ue,null,ct(m.values,(b,w)=>(I(),O("div",{key:w,class:"flex items-center my-0.5"},[L(y(Xp),{modelValue:c[w],"onUpdate:modelValue":x=>c[w]=x,mode:"md",alignment:"center","label-placement":"end",justify:"start"},{default:j(()=>[_("div",NZe,Q(b),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]))),128))]),_("div",{onClick:u,class:"bg-blue1 py-1.5 text-base text-white font-medium rounded-lg text-center mt-8"}," LƯU ")]),_:1}),L(em,{"is-open":s.value,"backdrop-opacity":.2},null,8,["is-open"])],64))}}),BZe={class:"flex items-center flex-1"},VZe=["src"],UZe={class:"flex-1 ml-2.5 mr-1.5"},zZe={class:"text-sm font-medium text-black2"},HZe={class:"text-xs text-gray2"},jZe=Fe({__name:"CommunitySetting",setup(n){const e=ln(),t=Li(),i=K(),s=K(),r=gn(),o=Zr(),a=[{key:"info",title:"Thông tin cơ bản"},{key:"topics",title:"Danh mục thảo luận"},{key:"level",title:"Level"},{key:"aff",title:"Affiliate"},{key:"notify",title:"Thông báo"},{key:"coupon",title:"Coupon"}],l=[{key:"aff",title:"Affiliate"},{key:"notify",title:"Thông báo"}],c=lt(()=>{var g;return((g=s.value)==null?void 0:g.role)===Ei.Admin}),d=K(a[0].key),u=g=>{d.value=g},h=async()=>{const{data:g}=await Qe.get("community/".concat(o.params.id));J.isEmpty(g)?m():(i.value=g,e.setCommunity(g))},f=async()=>{const{data:g}=await Qe.get("user-community/check/".concat(o.params.id));J.isEmpty(g)?m():(g.role===Ei.Admin?d.value=a[0].key:d.value=l[0].key,s.value=g,t.setUserCommunity(g))},m=()=>{r.back()};return on(()=>{h(),f()}),(g,b)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>{var w,x,k;return[L(y(fe),{slot:"start",onClick:m,icon:y(Eo),class:"size-6 p-2"},null,8,["icon"]),_("div",BZe,[_("img",{src:(x=(w=i.value)==null?void 0:w.icon)!=null?x:"/favicon.ico",class:"size-[30px] rounded-lg"},null,8,VZe),_("div",UZe,[_("div",zZe,Q((k=i.value)==null?void 0:k.name),1),_("div",HZe,Q(c.value?"Cài đặt cộng đồng":"Cài đặt thành viên"),1)])])]}),_:1})]),_:1}),L(Ob,{routes:c.value?a:l,onChangeTab:u,"tab-key":d.value,"normal-text":""},{scene:j(()=>[d.value==="info"?(I(),ve(ZXe,{key:0})):re("",!0),d.value==="topics"?(I(),ve(EQe,{key:1})):re("",!0),d.value==="fee"?(I(),ve(rQe,{key:2})):re("",!0),d.value==="level"?(I(),ve(GQe,{key:3})):re("",!0),d.value==="aff"?(I(),ve(DQe,{key:4})):re("",!0),d.value==="notify"?(I(),ve(FZe,{key:5})):re("",!0),d.value==="coupon"?(I(),ve(OZe,{key:6})):re("",!0)]),_:1},8,["routes","tab-key"])]),_:1}))}}),GZe={class:"flex"},WZe={class:"flex flex-row overflow-x-scroll ion-text-nowrap py-1 gap-2 scrollbar-hidden items-center"},qZe=["onClick"],KZe={key:0},YZe=Fe({__name:"TopicsList",props:{topicSelected:{default:void 0},topics:{default:[]},onFilterPress:{type:Function,default:()=>{}}},emits:["onSelectTopic"],setup(n,{emit:e}){const t=e,i=s=>{t("onSelectTopic",s)};return(s,r)=>(I(),O("div",GZe,[_("div",WZe,[_("div",{onClick:r[0]||(r[0]=o=>i()),class:gt(["shadow-st flex flex-1 text-nowrap p-2.5 px-4 gap-2 text-sm rounded-xl",s.topicSelected?"bg-white":"bg-blue1 text-white border-blue1"])}," Tất cả ",2),(I(!0),O(Ue,null,ct(s.topics,(o,a)=>{var l;return I(),O("div",{key:a},[_("div",{outline:!0,onClick:c=>i(o._id),class:gt(["shadow-st flex flex-1 text-nowrap ion-text-nowrap p-2.5 gap-2 text-sm rounded-xl",s.topicSelected==o.id?"bg-blue1 text-white  border-blue1":"bg-white"])},[o.icon?(I(),O("span",KZe,Q(o.prefix),1)):re("",!0),be(" "+Q((l=o.title)!=null?l:""),1)],10,qZe)])}),128))]),_("div",{onClick:r[1]||(r[1]=(...o)=>s.onFilterPress&&s.onFilterPress(...o)),class:"shadow-st bg-white items-center ml-2 flex my-auto flex-row text-nowrap p-[9.5px] px-2.5 gap-2 text-sm rounded-xl"},[L(y(fe),{icon:y(dB),class:"size-5",color:"gray2"},null,8,["icon"])])]))}}),XZe=["src"],QZe={class:"p-4"},ZZe={class:"flex items-center gap-3"},JZe=["src"],eJe={class:"text-base text-black2 font-medium"},tJe={class:"line-clamp-3 text-base text-black2 font-light my-3"},nJe={class:"text-base font-medium text-black2"},iJe=Fe({__name:"CardCommunity",props:{community:{}},setup(n){const e=gn(),t=ln(),i=n,s=async()=>{t.setCommunity(i.community),e.push({name:"CommunityScreen",params:{id:i.community.short_name||i.community._id}},Wt)};return lt(()=>{var o,a;const r=((a=(o=i.community)==null?void 0:o.communityFee)==null?void 0:a.price)||0;return r>0?"".concat(r.toLocaleString("vi-VN",{currency:"VND"}),"đ/tháng"):"Miễn phí"}),(r,o)=>(I(),ve(y(qN),{onClick:s,class:"rounded-lg overflow-hidden shadow-st bg-white mx-4 my-6"},{default:j(()=>{var a,l;return[y(J.isEmpty)(r.community.thumbnail)?re("",!0):(I(),O("img",{key:0,src:r.community.thumbnail,class:"object-cover w-full aspect-video rounded-t-lg",placeholder:"https://via.placeholder.com/200x200/ddd/ddd"},null,8,XZe)),_("div",QZe,[_("div",ZZe,[_("img",{src:(a=r.community.icon)!=null?a:"/favicon.ico",class:"size-10 rounded-lg",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,JZe),_("span",eJe,Q(r.community.name),1)]),_("div",tJe,Q(r.community.description),1),_("div",nJe,[be(Q(y(oj)[r.community.status])+" ",1),o[0]||(o[0]=_("span",{class:"mx-1"},"•",-1)),be(" "+Q((l=r.community.total_member)!=null?l:0)+" thành viên ",1)])])]}),_:1}))}}),sJe={key:1,class:"flex items-center",slot:"end"},rJe={class:"mx-4"},oJe={class:"flex bg-white w-full px-4 gap-3 shadow-as items-center rounded-xl mb-4"},aJe={key:1,class:"mt-[30%] justify-center w-full text-center text-gray2 font-normal text-base"},lJe={class:"p-8"},cJe={class:"font-bold"},dJe={class:"ion-margin-horizontal py-1 font-normal"},uJe={class:"sradio text-base"},hJe=["id","value"],fJe={class:"font-bold mt-1"},pJe={class:"ion-margin-horizontal py-1 font-normal"},mJe={class:"sradio text-base"},gJe=["id","value"],bJe=Fe({__name:"HomeScreen",setup(n){const e=gn(),t=en(),{isLoggedIn:i}=et(t),s=K(),r=K(!1),o=K(1),a=K([]),l=K([]),c=K(),d=K(""),u=Yi({filterStatus:void 0,filterFee:"all"}),h=async()=>{await pc.open("sidemenu")},f=C=>{s.value=C},m=async()=>{const{data:C}=await li.get("/topic/all");J.isEmpty(C)||(a.value=C)},g=C=>{b(o.value,!0),setTimeout(()=>C.target.complete(),500)},b=async(C=1,A=!1,R=!1)=>{const M={"filter[topic_id]":s.value,"filter[status]":u.filterStatus,"filter[keyword]":d.value,"filter[fee]":u.filterFee,"filter[type]":2,"w[]":"communityFee","sort[scores]":-1,"sort[_id]":-1,page:C,limit:10},{data:N}=await Qe.get("/community",{params:M});J.isEmpty(N)?(R&&(l.value=[]),r.value=!1):(N.meta.hasNextPage?(o.value++,r.value=!0):r.value=!1,A?l.value=[...l.value,...N.data]:l.value=N.data)};ki([s,u],()=>{b(1,!1,!0),o.value=1,r.value=!1}),_A(()=>{b(1),o.value=1,r.value=!1}),ome(()=>{m()});const w=C=>{b(1,!1),m(),o.value=1,r.value=!1,setTimeout(()=>{C.target.complete()},2e3)},x=async()=>{await c.value.$el.present()},k=()=>{b(1,!1,!0),o.value=1,r.value=!1},E=()=>{e.push({name:"CreateCommunityScreen"},Wt)},T=async()=>{e.push({name:"LoginScreen"},Wt)},P=lt(()=>mi("tablet")||mi("ipad"));return(C,A)=>(I(),ve(y(Dn),{id:"sidemenu"},{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white px-3.5"},{default:j(()=>[A[4]||(A[4]=_("div",{slot:"start",class:"flex items-center"},[_("img",{src:Ol,class:"w-auto size-8"})],-1)),y(i)?(I(),O("div",sJe,[L(y(fe),{onClick:h,src:"/icMenu.svg",class:"size-7"})])):(I(),O("div",{key:0,onClick:T,slot:"end",class:"text-lg text-black font-medium"}," Đăng nhập "))]),_:1})]),_:1}),L(y(At),{class:"flex-1",color:"white1"},{default:j(()=>[L(y(Jr),{slot:"fixed",mode:"md",onIonRefresh:w},{default:j(()=>[L(y(eo))]),_:1}),_("div",rJe,[_("section",{class:"flex flex-col text-center text-[#050505] my-7"},[A[6]||(A[6]=_("div",{class:"text-[32px] font-semibold"},"Khám phá cộng đồng",-1)),_("span",{class:"text-lg font-normal"},[A[5]||(A[5]=be(" hoặc ")),_("span",{onClick:E,class:"text-blue1"},"tạo cộng đồng của bạn ")])]),_("div",oJe,[L(y(fe),{src:"/icSearch.svg",class:"size-7",onClick:k}),_("form",{onSubmit:qt(k,["prevent"]),class:"w-full"},[si(_("input",{"onUpdate:modelValue":A[0]||(A[0]=R=>d.value=R),class:"w-full py-4 text-base outline-none bg-white",placeholder:"Tìm kiếm"},null,512),[[Ti,d.value]])],32),y(J.isEmpty)(d.value)?re("",!0):(I(),ve(y(fe),{key:0,onClick:A[1]||(A[1]=()=>d.value=""),icon:y(ks),class:"size-8 text-gray2"},null,8,["icon"]))]),L(YZe,{topics:a.value,"topic-selected":s.value,onOnSelectTopic:f,onFilterPress:x},null,8,["topics","topic-selected"])]),y(J.isEmpty)(l.value)?(I(),O("div",aJe," Chưa có cộng đồng ")):(I(),O("div",{key:0,class:gt(P.value?"grid grid-cols-2":"")},[(I(!0),O(Ue,null,ct(l.value,R=>(I(),ve(iJe,{community:R,key:R._id},null,8,["community"]))),128))],2)),r.value?(I(),ve(y(Zn),{key:2,onIonInfinite:g,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1}),L(y(kA),{id:"filter",ref_key:"refOptionFilter",ref:c},{default:j(()=>[_("div",lJe,[_("div",cJe,[A[8]||(A[8]=be(" Loại ")),_("div",dJe,[(I(!0),O(Ue,null,ct(y(cWe),R=>{var M;return I(),O("div",{key:R.id},[_("label",uJe,[be(Q(R.label)+" ",1),si(_("input",{"onUpdate:modelValue":A[2]||(A[2]=N=>u.filterStatus=N),id:(M=R.id)==null?void 0:M.toString(),value:R.id,class:"size-[24px] absolute opacity-0 cursor-pointer",type:"radio"},null,8,hJe),[[ZE,u.filterStatus]]),A[7]||(A[7]=_("span",{class:"absolute top-0 left-0 size-6 bg-white rounded-full border-2 border-[#909090]"},null,-1))])])}),128))])]),_("div",fJe,[A[10]||(A[10]=be(" Giá ")),_("div",pJe,[(I(!0),O(Ue,null,ct(y(dWe),R=>{var M;return I(),O("div",{key:R.id},[_("label",mJe,[be(Q(R.label)+" ",1),si(_("input",{"onUpdate:modelValue":A[3]||(A[3]=N=>u.filterFee=N),id:(M=R.id)==null?void 0:M.toString(),value:R.id,class:"size-[24px] absolute opacity-0 cursor-pointer",type:"radio"},null,8,gJe),[[ZE,u.filterFee]]),A[9]||(A[9]=_("span",{class:"absolute top-0 left-0 size-6 bg-white rounded-full border-2 border-[#909090]"},null,-1))])])}),128))])])])]),_:1},512)]),_:1}))}}),vJe=Xi(bJe,[["__scopeId","data-v-76276a37"]]),yJe={class:"flex items-stretch gap-1.5 my-4"},wJe={class:"size-11 rounded-full flex relative"},xJe=["src"],_Je={class:"flex-1"},kJe=["innerHTML"],EJe={class:"flex gap-5 mt-1.5 text-sm text-gray2 font-normal items-center"},TJe={class:"flex items-center text-sm font-medium text-gray2"},CJe={key:0},SJe={key:0},AJe={key:0,class:"items-center flex gap-2 text-sm text-blue1 mt-2 font-medium"},IJe={key:0,class:"items-center flex gap-2 text-sm text-blue1 mt-2 font-medium"},PJe=5,RJe=Fe({__name:"CommentComp",props:{onCommentPress:{type:Function,default:()=>{}},onReply:{type:Function,default:()=>{}},isChild:{type:Boolean,default:!1},comments:{},isSuspend:{type:Boolean,default:!1}},setup(n){var C,A,R,M,N;const e=n,t=K(1),i=K(!1),s=K(!1),r=K([]),o=K((A=(C=e.comments)==null?void 0:C.total_reactions)!=null?A:0),a=K(0),l=ln(),c=en(),{isLoggedIn:d,userInfo:u}=et(c),{community:h}=et(l),f=Li(),{userCommunity:m}=et(f),g=K(((M=(R=e.comments)==null?void 0:R.user_reaction)==null?void 0:M.responder_id)===((N=u.value)==null?void 0:N._id)&&d),b=lt(()=>{var U,G,B;return m.value&&m.value.role===Ei.Member&&((U=h.value)!=null&&U.member_last_limit_package)?_t((G=h.value)==null?void 0:G.member_last_limit_package).isBefore((B=m.value)==null?void 0:B.created_at):!1}),w=()=>!m.value||m.value.status!==ms.Joined?(tt("Bạn phải là thành viên của cộng đồng trước. Hãy đăng ký làm thành viên.","warning"),!1):b.value?(tt("Tài khoản bị giới hạn!","warning"),!1):!0,x=async()=>{var G,B,te,X;if(a.value==5){tt("Bạn đã đạt giới hạn like bài viết này vui lòng load lại trang để tiếp tục","warning");return}if(w()&&d.value&&a.value<5){const ue={comment_id:(G=e.comments)==null?void 0:G._id,responder_id:(B=u.value)==null?void 0:B._id,community_id:(te=h.value)==null?void 0:te._id},{data:he}=await Qe.post("/community-reaction",ue);(he==null?void 0:he.responder_id)===((X=u.value)==null?void 0:X._id)?(o.value++,g.value=!0):(o.value>0&&o.value--,g.value=!1),a.value++}},k=()=>{s.value=!0,E()},E=async(U=!1)=>{var te,X,ue,he;const G={"w[]":["creator","reply_count","total_reactions","user_reaction"],"filter[post_id]":(te=e.comments)==null?void 0:te.post_id,"filter[reply_comment_id]":(X=e.comments)==null?void 0:X._id,page:t.value,limit:PJe},{data:B}=await Qe.get("/community-comment",{params:G});J.isEmpty(B)?(i.value=!1,t.value=1):((ue=B==null?void 0:B.meta)!=null&&ue.hasNextPage?(t.value++,i.value=!0):(i.value=!1,t.value=1),U?r.value=[...r.value,...(he=B==null?void 0:B.data)!=null?he:[]]:r.value=B==null?void 0:B.data)},T=()=>{E(!0)},P=()=>{console.log("USER_NAME")};return(U,G)=>{var te,X,ue,he,Ie,xe,Be,Pe,Ae,de,we,ze,le,Se,ne,ie;const B=nb("CommentComp",!0);return I(),O("section",yJe,[_("div",wJe,[_("img",{src:(ue=(X=(te=U.comments)==null?void 0:te.creator)==null?void 0:X.avatar)!=null?ue:"/upload-user.png",class:"w-full rounded-full",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,xJe)]),_("div",_Je,[_("div",{onClick:G[0]||(G[0]=(...me)=>U.onCommentPress&&U.onCommentPress(...me)),class:"bg-white1 p-2 rounded-lg"},[_("span",{onClick:qt(P,["stop"]),class:"text-base font-medium text-black2"},Q((Ie=(he=U.comments)==null?void 0:he.creator)==null?void 0:Ie.full_name),1),_("div",{class:"text-base font-light pt-1",innerHTML:(xe=U.comments)==null?void 0:xe.content},null,8,kJe)]),_("div",EJe,[_("div",TJe,[L(y(fe),{onClick:x,src:g.value?"/icons/icThumbupsFill.svg":"/icons/icThumbups.svg",class:"size-4 px-2"},null,8,["src"]),Number(o.value)>0?(I(),O("span",CJe,Q(o.value),1)):re("",!0)]),_("span",null,Q(y(_t)((Be=U.comments)==null?void 0:Be.created_at).fromNow()),1),U.isSuspend?re("",!0):(I(),O("span",{key:0,onClick:G[1]||(G[1]=me=>U.onReply(U.comments))},"Phản hồi"))]),y(J.isEmpty)((Pe=U.comments)==null?void 0:Pe.repliesChild)?re("",!0):(I(),O("div",SJe,[(I(!0),O(Ue,null,ct((Ae=U.comments)==null?void 0:Ae.repliesChild,me=>(I(),O("div",{key:me._id},[L(B,{"is-child":"",comments:me,onReply:G[2]||(G[2]=V=>U.onReply(U.comments))},null,8,["comments"])]))),128))])),s.value?(I(),O(Ue,{key:1},[(I(!0),O(Ue,null,ct(r.value,me=>(I(),O("div",{key:me._id},[L(B,{"is-child":!0,comments:me,onReply:G[3]||(G[3]=V=>U.onReply(U.comments))},null,8,["comments"])]))),128)),((we=(de=U.comments)==null?void 0:de.reply_count)!=null?we:0)-r.value.length>0&&i.value&&!U.isSuspend?(I(),O("div",AJe,[L(y(fe),{src:"/icons/icReturnRight.svg",class:"text-blue1 size-4 pb-1"}),_("div",{onClick:T}," Xem "+Q(((le=(ze=U.comments)==null?void 0:ze.reply_count)!=null?le:0)-r.value.length)+" phản hồi... ",1)])):re("",!0)],64)):re("",!0),(Se=U.comments)!=null&&Se.reply_count&&((ne=U.comments)==null?void 0:ne.reply_count)>0&&!U.isSuspend&&!U.isChild?(I(),O(Ue,{key:2},[s.value?re("",!0):(I(),O("div",IJe,[L(y(fe),{src:"/icons/icReturnRight.svg",class:"text-blue1 size-4 pb-1"}),_("div",{onClick:k}," Xem "+Q((ie=U.comments)==null?void 0:ie.reply_count)+" phản hồi... ",1)]))],64)):re("",!0)])])}}}),$Je={slot:"start",class:"flex items-center"},LJe=["src"],OJe={key:1,class:"text-base font-medium text-black2 mx-2.5"},DJe={key:0,class:"text-black text-sm py-2.5 font-normal bg-gray1 text-center"},MJe={key:2,class:"text-black text-sm py-2.5 font-normal bg-gray1 text-center"},NJe={key:0,class:"mb-2 flex gap-5"},FJe={class:"border-l-[3px] border-l-blue1 rounded-lg flex-1"},BJe={class:"bg-[#F0F2F5] rounded-lg px-3 py-1.5 text-sm font-medium"},VJe=["innerHTML"],UJe={class:"flex items-end gap-1.5"},zJe=["src"],HJe={class:"w-[90%]"},jJe={class:"gap-1 flex py-1.5 items-center justify-between"},GJe={class:"flex justify-center text-center items-center gap-2"},WJe=Fe({__name:"PostDetailScreen",setup(n){var Ae;const{DEV:e,VITE_API_URL_DEV:t,VITE_API_URL:i}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},s=e?t:i,r=Zr(),o=(Ae=r==null?void 0:r.params)==null?void 0:Ae.postId,a=ln(),l=en(),{userInfo:c,accessToken:d}=et(l),u=Li(),{userCommunity:h,usersLimitedByPackage:f}=et(u),{community:m}=et(a),g=K(),b=K(""),w=Yi({comment:void 0}),x=K(),k=gn(),E=K([]),T=K(1),P=K(!1),C=lt(()=>{var de;return((de=h.value)==null?void 0:de.role)===Ei.Admin}),A=lt(()=>{var de;if(ln!=null&&((de=h.value)!=null&&de.unlock_message_at)){const we=_t(h.value.unlock_message_at),ze=_t();return we.isAfter(ze)}return!1}),R=()=>{k.back()},M=[i$e,vRe,ARe,R3,L3,S0,N3,Xx,e_,F3,Jx,Zx,Qx,B3],N=async de=>{var le;const{data:we,status:ze}=await Qe.get("community/".concat((le=m.value)==null?void 0:le._id,"/users"),{params:{keyword:de}});if(ze===200&&(we!=null&&we.data))return we==null?void 0:we.data.map(Se=>({avatar:Se==null?void 0:Se.avatar,name:Se==null?void 0:Se.full_name,id:"@"+(Se==null?void 0:Se._id),text:Se==null?void 0:Se.full_name}))},U={feeds:[{marker:"@",feed:async de=>await N(de),minimumCharacters:0,itemRenderer:G}]};function G(de){const we=document.createElement("span");we.classList.add("custom-item"),we.classList.add("customItemRenderer"),we.id="data-id-".concat(de.id);const ze=document.createElement("div");ze.classList.add("flex","items-center");const le=document.createElement("img");le.src=de.avatar||"/icUser.png",le.alt="".concat(de.text," avatar"),le.style.width="32px",le.style.height="32px",le.style.objectFit="cover",le.style.borderRadius="100%",ze.appendChild(le);const Se=document.createElement("span");if(Se.style.marginLeft="8px",ze.appendChild(Se),de.text||de.name){const ne=document.createTextNode((de==null?void 0:de.text)||"");ze.appendChild(ne)}return we.appendChild(ze),we}const B=de=>{var we;x.value=de,b.value='<span class="mention" data-mention="@'.concat(de==null?void 0:de._id,'">').concat((we=de==null?void 0:de.creator)==null?void 0:we.full_name,"</span>&nbsp;")},te=()=>{x.value=void 0,b.value=""},X=async()=>{var de,we,ze,le;if(!J.isEmpty(b.value)){const Se={post_id:o!=null?o:(de=g.value)==null?void 0:de._id,reply_comment_id:(we=x.value)==null?void 0:we._id,content:b.value,creator_id:(ze=c.value)==null?void 0:ze._id,community_id:(le=m.value)==null?void 0:le._id,attachments:[],files:[]},ne=new FormData,ie=(F,z="")=>{F&&(typeof F=="object"&&!(F instanceof File)?Object.keys(F).forEach(se=>{ie(F[se],z?"".concat(z,"[").concat(se,"]"):se)}):ne.append(z,F))};ie(Se);const me=await fetch("".concat(s,"/community-comment"),{method:"POST",body:ne,headers:{Authorization:"Bearer ".concat(d.value)}}),V=await me.json();if(!J.isEmpty(V)&&me.status===201)if(w.comment++,!J.isEmpty(V==null?void 0:V.reply_comment_id)&&!J.isEmpty(Se.reply_comment_id)){const F=E.value.map(z=>{var se;return(V==null?void 0:V.reply_comment_id)===z._id?{...z,repliesChild:[V,...(se=z==null?void 0:z.repliesChild)!=null?se:[]]}:z});E.value=F}else E.value=[V,...E.value]}x.value=void 0,b.value=""},ue=async()=>{const de=await qe.create({component:r_,componentProps:{isPage:!0,post:g.value,onCallback:Ie},initialBreakpoint:.5,mode:"ios"});de.present();const{data:we,role:ze}=await de.onWillDismiss();ze==="confirm"&&console.log(we)},he=async()=>{},Ie=async()=>{const{data:de,status:we}=await Qe.get("/community-post/".concat(o),{params:{"w[]":["creator","topic","total_comments","total_reactions","user_reaction","poll"]}});!J.isEmpty(de)&&we===200&&(g.value=de,w.comment=de==null?void 0:de.total_comments)},xe=async(de=1,we=!1)=>{var Se,ne,ie;const ze={"w[]":["creator","reply_count","total_reactions","user_reaction"],"filter[post_id]":o!=null?o:(Se=g.value)==null?void 0:Se._id,"filter[reply_comment_id]":"null",page:de,limit:5},{data:le}=await Qe.get("/community-comment",{params:ze});J.isEmpty(le)?P.value=!1:((ne=le==null?void 0:le.meta)!=null&&ne.hasNextPage?(T.value++,P.value=!0):P.value=!1,we?E.value=[...E.value,...(ie=le==null?void 0:le.data)!=null?ie:[]]:E.value=le==null?void 0:le.data)},Be=()=>{var de;(!((de=g.value)!=null&&de.disabled_comment)||C)&&xe(1,!1),T.value=1,P.value=!1},Pe=async de=>{var we;(!((we=g.value)!=null&&we.disabled_comment)||C)&&xe(T.value,!0),setTimeout(()=>de.target.complete(),500)};return tr(()=>{Ie(),Be()}),(de,we)=>{const ze=nb("ckeditor");return I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>{var le,Se,ne,ie,me;return[_("div",$Je,[L(y(fe),{onClick:R,icon:y(Eo),class:"size-6 p-2"},null,8,["icon"]),((le=g.value)==null?void 0:le.type)===y(rh).Community?(I(),O("img",{key:0,src:(ne=(Se=y(m))==null?void 0:Se.icon)!=null?ne:"/favicon.ico",class:"size-8 rounded-lg",placeholder:"https://via.placeholder.com/100x100/ddd/ddd"},null,8,LJe)):re("",!0),((ie=g.value)==null?void 0:ie.type)===y(rh).Community?(I(),O("span",OJe,Q((me=y(m))==null?void 0:me.name),1)):re("",!0)])]}),_:1})]),_:1}),L(y(At),null,{default:j(()=>{var le,Se,ne,ie,me;return[(I(),ve($0,{key:(le=g.value)==null?void 0:le._id,"is-a-page":!0,onOptionPress:ue,post:g.value,"comment-count":(Se=w==null?void 0:w.comment)!=null?Se:0},null,8,["post","comment-count"])),C.value&&((ne=g.value)!=null&&ne.disabled_comment)?(I(),O("div",DJe," Đã ẩn bình luận bài viết này! ")):re("",!0),!C.value&&((ie=g.value)!=null&&ie.disabled_comment)?(I(),O("div",MJe," Đã ẩn bình luận bài viết này! ")):(I(!0),O(Ue,{key:1},ct(E.value,V=>(I(),O("section",{class:"px-4",key:V._id},[L(RJe,{comments:V,onReply:B,onCommentPress:he},null,8,["comments"])]))),128)),P.value&&(C.value||!((me=g.value)!=null&&me.disabled_comment))?(I(),ve(y(Zn),{key:3,onIonInfinite:Pe,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]}),_:1}),L(y(xA),{mode:"md"},{default:j(()=>{var le;return[C.value||!((le=g.value)!=null&&le.disabled_comment)?(I(),O(Ue,{key:0},[A.value?(I(),ve(y(An),{key:1,color:"white",class:"px-4"},{default:j(()=>[_("div",GJe,[L(y(fe),{icon:y(iB),class:"size-5 text-gray2"},null,8,["icon"]),we[2]||(we[2]=_("span",{class:"text-sm text-gray2"},"Quản trị viên tạm thời tắt bình luận của bạn",-1))])]),_:1})):(I(),O(Ue,{key:0},[y(f)?re("",!0):(I(),ve(y(An),{key:0,color:"white",class:"px-4 py-2"},{default:j(()=>{var Se,ne,ie;return[y(J.isEmpty)(x.value)?re("",!0):(I(),O("section",NJe,[_("div",FJe,[_("div",BJe,[be(Q((Se=x.value.creator)==null?void 0:Se.full_name)+" ",1),_("div",{class:"text-sm text-gray2 font-light pt-1 line-clamp-1",innerHTML:x.value.content},null,8,VJe)])]),L(y(fe),{onClick:te,icon:y(ks),class:"size-6 text-gray2"},null,8,["icon"])])),_("section",UJe,[_("img",{src:(ie=(ne=y(c))==null?void 0:ne.avatar)!=null?ie:"/upload-user.png",class:"size-9 rounded-full mb-0.5"},null,8,zJe),_("div",HJe,[L(ze,{modelValue:b.value,"onUpdate:modelValue":we[0]||(we[0]=me=>b.value=me),editor:y(P3),config:{plugins:M,removePlugins:["MediaEmbedToolbar"],placeholder:"Nhập bình luận",mention:U}},null,8,["modelValue","editor","config"])])]),_("div",jJe,[we[1]||(we[1]=_("div",{class:"gap-1.5 flex"},null,-1)),_("div",null,[_("div",{onClick:X,class:gt(["p-1 px-2 rounded-md text-sm",y(J.isEmpty)(b.value)?"text-gray2 bg-gray1":"bg-blue1 text-white"])}," Phản hồi ",2)])])]}),_:1}))],64))],64)):re("",!0)]}),_:1})]),_:1})}}}),qJe=Xi(WJe,[["__scopeId","data-v-e16c547c"]]),KJe={class:"p-2"},YJe={key:0},XJe={key:1},QJe={key:2},ZJe=Fe({__name:"PopoverCreateCommunity",props:{code:{}},setup(n){const e=["10 khóa học miễn phí","10 sự kiện miễn phí","1.000 thành viên"],t=["Không giới hạn khóa học","Không giới hạn sự kiện","Không giới hạn thành viên","4.9% phí giao dịch","10 mức hoa hồng"],i=["Không giới hạn khóa học","Không giới hạn sự kiện","Không giới hạn thành viên","2.9% phí giao dịch","10 mức hoa hồng","Khóa học VIP","Landing page","Tên miền riêng","Expert Club"];return(s,r)=>(I(),ve(y(At),null,{default:j(()=>[_("div",KJe,[s.code==="START"?(I(),O("ul",YJe,[(I(),O(Ue,null,ct(e,(o,a)=>_("li",{key:a},Q(o),1)),64))])):s.code==="PRO_MONTHLY"||s.code==="PRO_ANNUALY"?(I(),O("ul",XJe,[(I(),O(Ue,null,ct(t,(o,a)=>_("li",{key:a},Q(o),1)),64))])):s.code==="VIP_MONTHLY"||s.code==="VIP_ANNUALY"?(I(),O("ul",QJe,[(I(),O(Ue,null,ct(i,(o,a)=>_("li",{key:a},Q(o),1)),64))])):re("",!0)])]),_:1}))}}),JJe={class:"text-black"},eet=["onClick"],tet={key:1,class:"flex-1 flex justify-center mt-[25%]"},net=Fe({__name:"ModalTopicDropdown",props:{selectedItem:{}},setup(n){const e=K([]),t=async o=>{var c;const a={"filter[keyword]":o!=null?o:"",limit:8},{data:l}=await li.get("/topic",{params:a});J.isEmpty(l)||(e.value=(c=l==null?void 0:l.data)!=null?c:[])};on(()=>{t("")});const i=K(""),s=()=>{t(i.value)},r=o=>{qe.dismiss(o,"confirm")};return(o,a)=>(I(),ve(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>[_("form",{onSubmit:qt(s,["prevent"])},[si(_("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l),class:"w-full px-3.5 py-2 border-gray3 text-black bg-white border-[1.5px] rounded-lg",placeholder:"Tìm kiếm"},null,512),[[Ti,i.value]])],32),a[1]||(a[1]=_("div",{class:"w-full h-[1.5px] bg-gray1 my-2.5"},null,-1)),_("section",JJe,[y(J.isEmpty)(e.value)?(I(),O("div",tet,[L(y(fb),{name:"crescent",color:"blue1",class:"size-8"})])):(I(!0),O(Ue,{key:0},ct(e.value,(l,c)=>{var d;return I(),O("div",{onClick:u=>r(l),key:c,class:gt(["py-2 my-1 text-base font-normal px-3 rounded-lg",{"bg-blue1-tint1":l.id===((d=o.selectedItem)==null?void 0:d.id)}])},Q(l==null?void 0:l.title),11,eet)}),128))])]),_:1}))}});var kj={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(n){(function(e,t){n.exports?n.exports=t():e.numeral=t()})(Ar,function(){var e,t,i="2.0.6",s={},r={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},a={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function l(c,d){this._input=c,this._value=d}return e=function(c){var d,u,h,f;if(e.isNumeral(c))d=c.value();else if(c===0||typeof c>"u")d=0;else if(c===null||t.isNaN(c))d=null;else if(typeof c=="string")if(a.zeroFormat&&c===a.zeroFormat)d=0;else if(a.nullFormat&&c===a.nullFormat||!c.replace(/[^0-9]+/g,"").length)d=null;else{for(u in s)if(f=typeof s[u].regexps.unformat=="function"?s[u].regexps.unformat():s[u].regexps.unformat,f&&c.match(f)){h=s[u].unformat;break}h=h||e._.stringToNumber,d=h(c)}else d=Number(c)||null;return new l(c,d)},e.version=i,e.isNumeral=function(c){return c instanceof l},e._=t={numberToFormat:function(c,d,u){var h=r[e.options.currentLocale],f=!1,m=!1,g=0,b="",w=1e12,x=1e9,k=1e6,E=1e3,T="",P=!1,C,A,R,M,N,U,G;if(c=c||0,A=Math.abs(c),e._.includes(d,"(")?(f=!0,d=d.replace(/[\(|\)]/g,"")):(e._.includes(d,"+")||e._.includes(d,"-"))&&(N=e._.includes(d,"+")?d.indexOf("+"):c<0?d.indexOf("-"):-1,d=d.replace(/[\+|\-]/g,"")),e._.includes(d,"a")&&(C=d.match(/a(k|m|b|t)?/),C=C?C[1]:!1,e._.includes(d," a")&&(b=" "),d=d.replace(new RegExp(b+"a[kmbt]?"),""),A>=w&&!C||C==="t"?(b+=h.abbreviations.trillion,c=c/w):A<w&&A>=x&&!C||C==="b"?(b+=h.abbreviations.billion,c=c/x):A<x&&A>=k&&!C||C==="m"?(b+=h.abbreviations.million,c=c/k):(A<k&&A>=E&&!C||C==="k")&&(b+=h.abbreviations.thousand,c=c/E)),e._.includes(d,"[.]")&&(m=!0,d=d.replace("[.]",".")),R=c.toString().split(".")[0],M=d.split(".")[1],U=d.indexOf(","),g=(d.split(".")[0].split(",")[0].match(/0/g)||[]).length,M?(e._.includes(M,"[")?(M=M.replace("]",""),M=M.split("["),T=e._.toFixed(c,M[0].length+M[1].length,u,M[1].length)):T=e._.toFixed(c,M.length,u),R=T.split(".")[0],e._.includes(T,".")?T=h.delimiters.decimal+T.split(".")[1]:T="",m&&Number(T.slice(1))===0&&(T="")):R=e._.toFixed(c,0,u),b&&!C&&Number(R)>=1e3&&b!==h.abbreviations.trillion)switch(R=String(Number(R)/1e3),b){case h.abbreviations.thousand:b=h.abbreviations.million;break;case h.abbreviations.million:b=h.abbreviations.billion;break;case h.abbreviations.billion:b=h.abbreviations.trillion;break}if(e._.includes(R,"-")&&(R=R.slice(1),P=!0),R.length<g)for(var B=g-R.length;B>0;B--)R="0"+R;return U>-1&&(R=R.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h.delimiters.thousands)),d.indexOf(".")===0&&(R=""),G=R+T+(b||""),f?G=(f&&P?"(":"")+G+(f&&P?")":""):N>=0?G=N===0?(P?"-":"+")+G:G+(P?"-":"+"):P&&(G="-"+G),G},stringToNumber:function(c){var d=r[a.currentLocale],u=c,h={thousand:3,million:6,billion:9,trillion:12},f,m,g;if(a.zeroFormat&&c===a.zeroFormat)m=0;else if(a.nullFormat&&c===a.nullFormat||!c.replace(/[^0-9]+/g,"").length)m=null;else{m=1,d.delimiters.decimal!=="."&&(c=c.replace(/\./g,"").replace(d.delimiters.decimal,"."));for(f in h)if(g=new RegExp("[^a-zA-Z]"+d.abbreviations[f]+"(?:\\)|(\\"+d.currency.symbol+")?(?:\\))?)?$"),u.match(g)){m*=Math.pow(10,h[f]);break}m*=(c.split("-").length+Math.min(c.split("(").length-1,c.split(")").length-1))%2?1:-1,c=c.replace(/[^0-9\.]+/g,""),m*=Number(c)}return m},isNaN:function(c){return typeof c=="number"&&isNaN(c)},includes:function(c,d){return c.indexOf(d)!==-1},insert:function(c,d,u){return c.slice(0,u)+d+c.slice(u)},reduce:function(c,d){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof d!="function")throw new TypeError(d+" is not a function");var u=Object(c),h=u.length>>>0,f=0,m;if(arguments.length===3)m=arguments[2];else{for(;f<h&&!(f in u);)f++;if(f>=h)throw new TypeError("Reduce of empty array with no initial value");m=u[f++]}for(;f<h;f++)f in u&&(m=d(m,u[f],f,u));return m},multiplier:function(c){var d=c.toString().split(".");return d.length<2?1:Math.pow(10,d[1].length)},correctionFactor:function(){var c=Array.prototype.slice.call(arguments);return c.reduce(function(d,u){var h=t.multiplier(u);return d>h?d:h},1)},toFixed:function(c,d,u,h){var f=c.toString().split("."),m=d-(h||0),g,b,w,x;return f.length===2?g=Math.min(Math.max(f[1].length,m),d):g=m,w=Math.pow(10,g),x=(u(c+"e+"+g)/w).toFixed(g),h>d-g&&(b=new RegExp("\\.?0{1,"+(h-(d-g))+"}$"),x=x.replace(b,"")),x}},e.options=a,e.formats=s,e.locales=r,e.locale=function(c){return c&&(a.currentLocale=c.toLowerCase()),a.currentLocale},e.localeData=function(c){if(!c)return r[a.currentLocale];if(c=c.toLowerCase(),!r[c])throw new Error("Unknown locale : "+c);return r[c]},e.reset=function(){for(var c in o)a[c]=o[c]},e.zeroFormat=function(c){a.zeroFormat=typeof c=="string"?c:null},e.nullFormat=function(c){a.nullFormat=typeof c=="string"?c:null},e.defaultFormat=function(c){a.defaultFormat=typeof c=="string"?c:"0.0"},e.register=function(c,d,u){if(d=d.toLowerCase(),this[c+"s"][d])throw new TypeError(d+" "+c+" already registered.");return this[c+"s"][d]=u,u},e.validate=function(c,d){var u,h,f,m,g,b,w,x;if(typeof c!="string"&&(c+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",c)),c=c.trim(),c.match(/^\d+$/))return!0;if(c==="")return!1;try{w=e.localeData(d)}catch(k){w=e.localeData(e.locale())}return f=w.currency.symbol,g=w.abbreviations,u=w.delimiters.decimal,w.delimiters.thousands==="."?h="\\.":h=w.delimiters.thousands,x=c.match(/^[^\d]+/),x!==null&&(c=c.substr(1),x[0]!==f)||(x=c.match(/[^\d]+$/),x!==null&&(c=c.slice(0,-1),x[0]!==g.thousand&&x[0]!==g.million&&x[0]!==g.billion&&x[0]!==g.trillion))?!1:(b=new RegExp(h+"{2}"),c.match(/[^\d.,]/g)?!1:(m=c.split(u),m.length>2?!1:m.length<2?!!m[0].match(/^\d+.*\d$/)&&!m[0].match(b):m[0].length===1?!!m[0].match(/^\d+$/)&&!m[0].match(b)&&!!m[1].match(/^\d+$/):!!m[0].match(/^\d+.*\d$/)&&!m[0].match(b)&&!!m[1].match(/^\d+$/)))},e.fn=l.prototype={clone:function(){return e(this)},format:function(c,d){var u=this._value,h=c||a.defaultFormat,f,m,g;if(d=d||Math.round,u===0&&a.zeroFormat!==null)m=a.zeroFormat;else if(u===null&&a.nullFormat!==null)m=a.nullFormat;else{for(f in s)if(h.match(s[f].regexps.format)){g=s[f].format;break}g=g||e._.numberToFormat,m=g(u,h,d)}return m},value:function(){return this._value},input:function(){return this._input},set:function(c){return this._value=Number(c),this},add:function(c){var d=t.correctionFactor.call(null,this._value,c);function u(h,f,m,g){return h+Math.round(d*f)}return this._value=t.reduce([this._value,c],u,0)/d,this},subtract:function(c){var d=t.correctionFactor.call(null,this._value,c);function u(h,f,m,g){return h-Math.round(d*f)}return this._value=t.reduce([c],u,Math.round(this._value*d))/d,this},multiply:function(c){function d(u,h,f,m){var g=t.correctionFactor(u,h);return Math.round(u*g)*Math.round(h*g)/Math.round(g*g)}return this._value=t.reduce([this._value,c],d,1),this},divide:function(c){function d(u,h,f,m){var g=t.correctionFactor(u,h);return Math.round(u*g)/Math.round(h*g)}return this._value=t.reduce([this._value,c],d),this},difference:function(c){return Math.abs(e(this._value).subtract(c).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(c){var d=c%10;return~~(c%100/10)===1?"th":d===1?"st":d===2?"nd":d===3?"rd":"th"},currency:{symbol:"$"}}),function(){e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(c,d,u){var h=e._.includes(d," BPS")?" ":"",f;return c=c*1e4,d=d.replace(/\s?BPS/,""),f=e._.numberToFormat(c,d,u),e._.includes(f,")")?(f=f.split(""),f.splice(-1,0,h+"BPS"),f=f.join("")):f=f+h+"BPS",f},unformat:function(c){return+(e._.stringToNumber(c)*1e-4).toFixed(15)}})}(),function(){var c={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},d={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},u=c.suffixes.concat(d.suffixes.filter(function(f){return c.suffixes.indexOf(f)<0})),h=u.join("|");h="("+h.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(h)},format:function(f,m,g){var b,w=e._.includes(m,"ib")?d:c,x=e._.includes(m," b")||e._.includes(m," ib")?" ":"",k,E,T;for(m=m.replace(/\s?i?b/,""),k=0;k<=w.suffixes.length;k++)if(E=Math.pow(w.base,k),T=Math.pow(w.base,k+1),f===null||f===0||f>=E&&f<T){x+=w.suffixes[k],E>0&&(f=f/E);break}return b=e._.numberToFormat(f,m,g),b+x},unformat:function(f){var m=e._.stringToNumber(f),g,b;if(m){for(g=c.suffixes.length-1;g>=0;g--){if(e._.includes(f,c.suffixes[g])){b=Math.pow(c.base,g);break}if(e._.includes(f,d.suffixes[g])){b=Math.pow(d.base,g);break}}m*=b||1}return m}})}(),function(){e.register("format","currency",{regexps:{format:/(\$)/},format:function(c,d,u){var h=e.locales[e.options.currentLocale],f={before:d.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:d.match(/([\+|\-|\)|\s|\$]*)$/)[0]},m,g,b;for(d=d.replace(/\s?\$\s?/,""),m=e._.numberToFormat(c,d,u),c>=0?(f.before=f.before.replace(/[\-\(]/,""),f.after=f.after.replace(/[\-\)]/,"")):c<0&&!e._.includes(f.before,"-")&&!e._.includes(f.before,"(")&&(f.before="-"+f.before),b=0;b<f.before.length;b++)switch(g=f.before[b],g){case"$":m=e._.insert(m,h.currency.symbol,b);break;case" ":m=e._.insert(m," ",b+h.currency.symbol.length-1);break}for(b=f.after.length-1;b>=0;b--)switch(g=f.after[b],g){case"$":m=b===f.after.length-1?m+h.currency.symbol:e._.insert(m,h.currency.symbol,-(f.after.length-(1+b)));break;case" ":m=b===f.after.length-1?m+" ":e._.insert(m," ",-(f.after.length-(1+b)+h.currency.symbol.length-1));break}return m}})}(),function(){e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(c,d,u){var h,f=typeof c=="number"&&!e._.isNaN(c)?c.toExponential():"0e+0",m=f.split("e");return d=d.replace(/e[\+|\-]{1}0/,""),h=e._.numberToFormat(Number(m[0]),d,u),h+"e"+m[1]},unformat:function(c){var d=e._.includes(c,"e+")?c.split("e+"):c.split("e-"),u=Number(d[0]),h=Number(d[1]);h=e._.includes(c,"e-")?h*=-1:h;function f(m,g,b,w){var x=e._.correctionFactor(m,g),k=m*x*(g*x)/(x*x);return k}return e._.reduce([u,Math.pow(10,h)],f,1)}})}(),function(){e.register("format","ordinal",{regexps:{format:/(o)/},format:function(c,d,u){var h=e.locales[e.options.currentLocale],f,m=e._.includes(d," o")?" ":"";return d=d.replace(/\s?o/,""),m+=h.ordinal(c),f=e._.numberToFormat(c,d,u),f+m}})}(),function(){e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(c,d,u){var h=e._.includes(d," %")?" ":"",f;return e.options.scalePercentBy100&&(c=c*100),d=d.replace(/\s?\%/,""),f=e._.numberToFormat(c,d,u),e._.includes(f,")")?(f=f.split(""),f.splice(-1,0,h+"%"),f=f.join("")):f=f+h+"%",f},unformat:function(c){var d=e._.stringToNumber(c);return e.options.scalePercentBy100?d*.01:d}})}(),function(){e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(c,d,u){var h=Math.floor(c/60/60),f=Math.floor((c-h*60*60)/60),m=Math.round(c-h*60*60-f*60);return h+":"+(f<10?"0"+f:f)+":"+(m<10?"0"+m:m)},unformat:function(c){var d=c.split(":"),u=0;return d.length===3?(u=u+Number(d[0])*60*60,u=u+Number(d[1])*60,u=u+Number(d[2])):d.length===2&&(u=u+Number(d[0])*60,u=u+Number(d[1])),Number(u)}})}(),e})})(kj);var iet=kj.exports;const aE=mb(iet),set={class:"ion-padding"},ret={class:"py-3.5 font-normal text-lg"},oet={class:"gap-y-4 flex flex-col"},aet={class:"flex justify-between"},cet={class:"flex justify-between"},det={class:"flex justify-between"},uet={class:"flex justify-between"},het={class:"flex font-medium text-lg justify-between py-4 mt-3.5 border-t-2"},fet=Fe({__name:"ModalCreateCommunityPayment",props:{payload:{},package:{},community_id:{}},setup(n){const e=n,t=()=>qe.dismiss(),{loadingIAP:i,buyCreateCommunity:s}=cj("create-community",t),r=()=>{var l,c,d,u,h,f,m,g,b;const a={total_amount:(c=(l=e.package)==null?void 0:l.price)!=null?c:0,period:(u=(d=e.package)==null?void 0:d.duration)!=null?u:3,package_name:(f=(h=e.package)==null?void 0:h.packageName)!=null?f:"PRO",unit_price:(g=(m=e.package)==null?void 0:m.unit)!=null?g:0,community_id:e.community_id};mi("ios")&&s((b=e.package)==null?void 0:b.sku,a)},o=()=>qe.dismiss();return(a,l)=>{var c,d,u,h;return I(),O(Ue,null,[_("div",set,[l[6]||(l[6]=_("h1",{class:"uppercase text-lg text-center font-medium"}," Nâng cấp cộng đồng ",-1)),_("div",ret,Q(a.payload.name),1),_("section",oet,[_("div",aet,[l[0]||(l[0]=_("div",null,"Gói phần mềm",-1)),_("div",null,Q(a.package.packageName),1)]),_("div",cet,[l[1]||(l[1]=_("div",null,"Thời hạn",-1)),_("div",null,Q((c=a.package)==null?void 0:c.duration)+" tháng",1)]),_("div",det,[l[2]||(l[2]=_("div",null,"Đơn giá /tháng",-1)),_("div",null,Q(y(aE)((d=a.package)==null?void 0:d.unit).format())+"đ",1)]),_("div",uet,[l[3]||(l[3]=_("div",null,"Tổng tiền",-1)),_("div",null,Q(y(aE)((u=a.package)==null?void 0:u.price).format())+"đ",1)])]),_("section",het,[l[4]||(l[4]=_("div",null,"Thanh toán",-1)),_("div",null,Q(y(aE)((h=a.package)==null?void 0:h.price).format())+"đ",1)]),_("div",{onClick:r,class:"uppercase text-lg py-2 rounded-lg text-center mb-1 font-medium bg-blue1 text-white"}," Đăng ký ngay "),_("div",{onClick:o,class:"text-gray2 text-sm text-center w-fit px-3 py-1 mx-auto"},l[5]||(l[5]=[_("div",{class:""},"Huỷ",-1)]))]),L(em,{"is-open":y(i),"backdrop-opacity":.2},null,8,["is-open"])],64)}}}),pet={class:"mt-8"},met={class:"mt-2 mx-2"},get=["src"],bet={class:"text-lg font-medium py-3"},vet={class:"bg-white rounded-lg shadow-st mt-2 mb-16 flex flex-col items-center ion-padding text-base"},yet={class:"w-full relative my-1 mt-8"},wet={slot:"label"},xet={class:"w-full relative mb-2"},_et={slot:"label"},ket={class:"w-full relative mb-4"},Eet={slot:"label"},Tet={slot:"end"},Cet={key:0,class:"w-full"},Aet=Fe({__name:"CreateCommunityScreen",setup(n){const e=[{name:"Tỉ lệ tương tác cao",icon:"/images/ic_chart.png"},{name:"Khởi tạo đơn giản",icon:"/images/ic_simple.png"},{name:"Thú vị khi sử dụng",icon:"/images/ic_interesting.png"},{name:"Thu phí thành viên",icon:"/images/ic_feem.png"},{name:"1000+ users online mỗi ngày",icon:"/images/ic_earth.png"},{name:"Tích hợp affiliate 2 tầng",icon:"/images/ic_aff.png"},{name:"Hỗ trợ gắn tên miền riêng",icon:"/images/ic_domain.png"}],t=gn(),i=K({}),s=K(!1),{userInfo:r}=et(en()),o=Yi({communityName:"",username:"",pack_code_idx:0,isAcceptPrivacy:!1}),a=lt(()=>o.isAcceptPrivacy&&!J.isEmpty(o.username)&&!J.isEmpty(o.communityName)&&!J.isEmpty(i.value)),l=()=>{t.back()},c=async(b,w)=>{b&&await(await vx.create({message:b!=null?b:"",duration:1500,position:"top",swipeGesture:"vertical",mode:"ios",cssClass:w})).present()},d=()=>{const b=/^[a-zA-Z0-9]+$/;return J.isEmpty(o.communityName)?(c("Tên cộng đồng không được để trống !","warning"),!1):o.username.length<4?(c("Username tối thiểu 4 kí tự !","warning"),!1):b.test(o.username)?!0:(c("Username hỗ trợ định dạng chữ cái và số !","warning"),!1)},u=async()=>{var b;if(d())try{const w={name:o.communityName,short_name:o.username,topic_id:i.value._id,package_code:iE[o.pack_code_idx].code,terms_of_service:o.isAcceptPrivacy},{data:x}=await Qe.get("/community/".concat(w.short_name));if(!J.isEmpty(x))w.package_code==="START"?c("Username đã tồn tại trên hệ thống!","warning"):x.owner_id===((b=r.value)==null?void 0:b._id)?h(w,x==null?void 0:x._id):c("Username đã tồn tại trên hệ thống!","warning");else{const k={...w,package_code:"START"},{data:E,status:T}=await Qe.post("/community",k);T===201&&(w.package_code==="START"?(c("Tạo cộng đồng thành công!","success"),t.replace({name:"CommunityScreen",params:{id:E.short_name||E._id}},Wt)):h(w,E._id))}}catch(w){console.log("🌸  error 👉",w)}},h=async(b,w)=>{(await qe.create({component:fet,componentProps:{payload:b,package:iE[o.pack_code_idx],community_id:w},mode:"ios",cssClass:"modalNoTrans",backdropDismiss:!1})).present()},f=async(b,w)=>{await(await EA.create({component:ZJe,componentProps:{code:w},event:b})).present()},m=async()=>{if(s.value===!0)return;s.value=!0;const b=await qe.create({component:net,initialBreakpoint:.5,mode:"ios",componentProps:{selectedItem:i.value}});b.onDidDismiss().then(()=>{s.value=!1}),b.present();const{data:w,role:x}=await b.onWillDismiss();x==="confirm"&&(i.value=w)},g=async()=>{await Xr.open({url:"https://unica.expert/policy/terms.html"})};return(b,w)=>(I(),ve(y(Dn),{class:"bg-white1"},{default:j(()=>[L(y(At),{class:"ion-padding noscroll",color:"white1"},{default:j(()=>{var x,k;return[_("div",pet,[L(y(fe),{onClick:l,icon:y(JF),class:"size-6"},null,8,["icon"])]),_("section",met,[w[4]||(w[4]=_("div",{class:"items-center mb-6"},[_("img",{src:Ol,class:"w-auto size-10"})],-1)),w[5]||(w[5]=_("div",{class:"text-xl font-medium mb-4"}," Mọi thứ bạn cần để xây dựng cộng đồng và kiếm tiền trực tuyến. ",-1)),(I(),O(Ue,null,ct(e,(E,T)=>_("div",{key:T,class:"flex items-center gap-4"},[_("img",{src:E.icon,class:"size-7"},null,8,get),_("div",bet,Q(E.name),1)])),64))]),_("section",vet,[w[15]||(w[15]=_("div",{class:"text-2xl font-medium mt-5"},"Tạo cộng đồng của bạn",-1)),_("form",{class:"w-full",onSubmit:qt(u,["prevent"])},[_("div",yet,[L(y(Tn),{modelValue:o.communityName,"onUpdate:modelValue":w[0]||(w[0]=E=>o.communityName=E),mode:"md",fill:"outline",required:"",placeholder:"Tên cộng đồng",class:"outline-none text-sm font-light",type:"text","label-placement":"floating",color:"blue1",counter:"",maxlength:30},{default:j(()=>[_("div",wet,[w[7]||(w[7]=be(" Tên cộng đồng")),L(y(Ai),{color:"danger"},{default:j(()=>w[6]||(w[6]=[be("*")])),_:1})])]),_:1},8,["modelValue"])]),_("div",xet,[L(y(Tn),{modelValue:o.username,"onUpdate:modelValue":w[1]||(w[1]=E=>o.username=E),mode:"md",fill:"outline",required:"",placeholder:"Username (Tên người dùng)",class:"outline-none text-sm font-light",type:"text","label-placement":"floating",color:"blue1",counter:"",maxlength:30},{default:j(()=>[_("div",_et,[w[9]||(w[9]=be(" Username (Tên người dùng) ")),L(y(Ai),{color:"danger"},{default:j(()=>w[8]||(w[8]=[be("*")])),_:1})])]),_:1},8,["modelValue"])]),_("div",ket,[L(y(Tn),{mode:"md",fill:"outline",required:"",placeholder:"Lĩnh vực",class:"select-none outline-none text-sm font-light",type:"text","label-placement":"floating",color:"blue1",value:(k=(x=i.value)==null?void 0:x.title)!=null?k:"Chọn lĩnh vực",readonly:"",onClick:m},{default:j(()=>[_("div",Eet,[w[11]||(w[11]=be(" Lĩnh vực ")),L(y(Ai),{color:"danger"},{default:j(()=>w[10]||(w[10]=[be("*")])),_:1})]),_("div",Tet,[L(y(fe),{icon:y(Al)},null,8,["icon"])])]),_:1},8,["value"])]),y(mi)("ios")?(I(),O("div",Cet,[L(y(Tc),{modelValue:o.pack_code_idx,"onUpdate:modelValue":w[2]||(w[2]=E=>o.pack_code_idx=E)},{default:j(()=>[(I(!0),O(Ue,null,ct(y(iE),(E,T)=>(I(),O("div",{key:T,class:"py-2.5 flex items-center gap-1"},[L(y(La),{alignment:"start",mode:"md",value:T,"label-placement":"end",color:"blue1",justify:"start"},{default:j(()=>[L(y(Nd),{class:"text-wrap text-base"},{default:j(()=>[be(Q(E.name),1)]),_:2},1024)]),_:2},1032,["value"]),L(y(fe),{onClick:P=>f(P,E.code),icon:y(Mbe),class:"size-5"},null,8,["onClick","icon"])]))),128))]),_:1},8,["modelValue"])])):re("",!0),L(y(ko),{type:"submit",color:a.value?"blue1":"gray1",strong:"",disabled:!a.value,class:"mt-5 w-full text-base uppercase text-center shadow-st rounded-xl"},{default:j(()=>w[12]||(w[12]=[be(" TIẾP TỤC ")])),_:1},8,["color","disabled"]),L(y(Xp),{modelValue:o.isAcceptPrivacy,"onUpdate:modelValue":w[3]||(w[3]=E=>o.isAcceptPrivacy=E),"label-placement":"end",mode:"md",class:"my-2 items-center",color:"blue1"},{default:j(()=>[_("div",{class:"text-xs text-wrap"},[w[13]||(w[13]=be(" Tôi đồng ý với ")),_("span",{onClick:g,class:"font-semibold"},"điều khoản dịch vụ của"),w[14]||(w[14]=be(" Unica.expert "))])]),_:1},8,["modelValue"])],32)])]}),_:1})]),_:1}))}}),Iet={class:"mt-8"},Pet=["onClick"],Ret={class:"text-base font-medium pb-1"},$et={class:"text-sm font-normal"},Let={key:0},Oet={class:"flex items-center shadow-st rounded-lg bg-white"},Det={key:0,class:"my-4"},Met=["onClick"],Net=["src"],Fet={class:"my-4"},Bet=Fe({__name:"PaymentMethodSelectScreen",setup(n){const e=gn(),t=K(BO[0].type),i=K(VO[0].id),s=()=>{e.back()},r=d=>{t.value=d},o=Yi({cardNumber:"",expirationDate:"",cvc:""}),a=d=>{d.inputType!="deleteContentBackward"&&[4,9,14].includes(d.target.value.length)&&(o.cardNumber+=" ")},l=d=>{d.inputType!="deleteContentBackward"?(d.target.value.length===1&&Number(d.target.value)>1?o.expirationDate="0".concat(d.target.value," / "):d.target.value.length===2&&d.target.value[0]==1&&d.target.value[1]>2&&(o.expirationDate="01 / "),d.target.value.length===2&&(o.expirationDate+=" / "),d.target.value.length===3&&J.isNumber(Number(d.target.value[2]))&&(o.expirationDate="".concat(d.target.value.slice(0,2)," / ").concat(d.target.value[2]))):(d.target.value.length==5||d.target.value.length==4)&&(o.expirationDate=d.target.value.replace("/","").trim())},c=d=>{i.value=d};return(d,u)=>(I(),ve(y(Dn),{class:"bg-white1"},{default:j(()=>[L(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>[_("div",Iet,[L(y(fe),{onClick:s,icon:y(JF),class:"size-6"},null,8,["icon"])]),_("section",null,[(I(!0),O(Ue,null,ct(y(BO),h=>(I(),O("div",{key:h.type},[_("div",{onClick:f=>r(h.type),class:"flex gap-2 bg-white my-2 mb-4 shadow-st p-3.5 rounded-lg"},[L(y(fe),{class:gt(["size-7",h.type==t.value?"text-blue1":"text-gray2"]),icon:h.type===t.value?y(qy):y(Ap)},null,8,["icon","class"]),_("div",{class:gt(["flex-1",h.type==t.value?"text-black2":"text-gray2"])},[_("div",Ret,Q(h.title),1),_("p",$et,Q(h.description),1)],2)],8,Pet)]))),128))]),_("section",null,[u[3]||(u[3]=_("div",{class:"text-lg font-medium mb-4"},"Phương thức thanh toán",-1)),t.value==="auto"?(I(),O("form",Let,[_("div",Oet,[si(_("input",{"onUpdate:modelValue":u[0]||(u[0]=h=>o.cardNumber=h),onInput:a,placeholder:"Số thẻ",pattern:"\\d*",class:"flex-1 py-4 px-4 rounded-s-lg",maxlength:19},null,544),[[Ti,o.cardNumber]]),si(_("input",{"onUpdate:modelValue":u[1]||(u[1]=h=>o.expirationDate=h),onInput:l,placeholder:"MM / YY",pattern:"\\d*",class:"w-full py-4 text-start",maxlength:7},null,544),[[Ti,o.expirationDate]]),u[2]||(u[2]=_("input",{placeholder:"CVC",pattern:"\\d*",class:"w-full py-4 rounded-e-lg text-center",maxlength:3},null,-1))])])):re("",!0)]),t.value=="manual"?(I(),O("section",Det,[(I(!0),O(Ue,null,ct(y(VO),(h,f)=>(I(),O("div",{key:f},[_("div",{onClick:m=>c(h.id),class:gt(["border my-3 py-4 px-2 rounded-lg text-sm font-normal text-wrap flex items-center gap-2.5",i.value==h.id?"bg-white border border-blue1":" border-gray2"])},[L(y(fe),{class:gt(["size-7",i.value===h.id?"text-blue1":"text-gray2"]),icon:i.value===h.id?y(qy):y(Ap)},null,8,["icon","class"]),_("img",{src:h.logoSrc,class:"h-6"},null,8,Net),be(" "+Q(h.name),1)],10,Met)]))),128))])):re("",!0),_("section",Fet,[u[5]||(u[5]=_("div",{class:"text-lg font-medium"},"Đơn hàng",-1)),u[6]||(u[6]=_("div",{class:"flex text-base font-normal justify-between mt-2 border-b-2 border-gray1 pb-3"},[be(" Gói 3 tháng: "),_("div",null,"599.000đ/tháng")],-1)),u[7]||(u[7]=_("div",{class:"flex justify-between mt-4 text-xl font-medium"},[be(" Tổng "),_("div",null,"1.798.000đ")],-1)),L(y(ko),{type:"submit",color:"blue1",class:"mt-8 w-full text-sm uppercase text-center shadow-st rounded-xl"},{default:j(()=>u[4]||(u[4]=[be(" Thanh toán ")])),_:1})])]),_:1})]),_:1}))}}),Vet=Xi(Bet,[["__scopeId","data-v-38579d14"]]),Uet=Fe({__name:"TabCourseInfo",setup(n){return(e,t)=>(I(),ve(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>t[0]||(t[0]=[be(" info ")])),_:1}))}}),zet={slot:"start",class:"text-xl font-medium"},Het={class:"mt-6"},jet={class:"flex items-center gap-2"},Get=Fe({__name:"ModalNewLesson",props:{data:{}},setup(n){const e=()=>qe.dismiss(null,"cancel");return(t,i)=>(I(),O(Ue,null,[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",zet," Thêm bài học "+Q(t.data.type=="video"?"video":"văn bản"),1),L(y(fe),{slot:"end",onClick:e,icon:y(ks),class:"size-8 text-black"},null,8,["icon"])]),_:1})]),_:1}),L(y(At),{class:"ion-padding"},{default:j(()=>[_("section",null,[L(y(Tn),{mode:"md",fill:"outline",placeholder:"Tên khoá học",class:"outline-none text-sm font-light mb-2",label:"Tên khoá học",type:"text","label-placement":"floating",color:"blue1",counter:!0,maxlength:80}),L(y(Ep),{mode:"md",label:"Mô tả ngắn","label-placement":"floating",fill:"outline",placeholder:"Mô tả ngắn",rows:5,class:"outline-none text-sm font-light",counter:!0,maxlength:200}),t.data.type==="video"?(I(),ve(y(Tn),{key:0,mode:"md",fill:"outline",placeholder:"https://...",class:"outline-none text-sm font-light mt-4",label:"Link youtube hoặc vimeo",type:"text","label-placement":"stacked",color:"blue1"})):re("",!0),t.data.type!=="video"?(I(),ve(y(Ep),{key:1,mode:"md",label:"Văn bản","label-placement":"floating",fill:"outline",placeholder:"Văn bản",class:"outline-none text-sm font-light mt-2 min-h-28",rows:10})):re("",!0)]),_("section",Het,[i[1]||(i[1]=_("div",{class:"text-sm font-normal mb-2.5"},"Tài liệu",-1)),_("div",jet,[L(y(fe),{icon:y(Pbe),class:"size-5"},null,8,["icon"]),i[0]||(i[0]=_("span",{class:"flex-1 text-sm break-words overflow-hidden text-nowrap text-ellipsis"}," Meeting aligment nhà bằng mọi giá ngoài 1234567.pdf ",-1)),L(y(fe),{icon:y(Rx),class:"flex size-5 text-red-500"},null,8,["icon"])])]),i[2]||(i[2]=_("section",{class:"mt-10 flex items-center justify-between"},[_("div",{class:"p-2 text-gray2 border border-gray2 rounded-lg"}," Thêm tài liệu "),_("div",{class:"flex items-center uppercase"},[_("div",{class:"p-2"},"Đóng"),_("div",{class:"ml-3 p-2 bg-blue1 px-3.5 text-white rounded-lg"}," Lưu lại ")])],-1))]),_:1})],64))}}),Wet={section:"",class:"px-6 py-3 bg-white justify-center mt-1 rounded-md flex flex-col gap-4"},qet=Fe({__name:"ModalLessonType",props:{data:{}},setup(n){const e=t=>qe.dismiss(null,t);return(t,i)=>(I(),ve(y(At),{class:"ion-padding",color:"white1","scroll-y":!1},{default:j(()=>[_("section",Wet,[_("div",{onClick:i[0]||(i[0]=s=>e("video")),class:"flex items-center gap-3 text-base font-medium border-b pb-3"},[L(y(fe),{icon:y(FA),class:"size-7"},null,8,["icon"]),i[2]||(i[2]=be(" Video "))]),_("div",{onClick:i[1]||(i[1]=s=>e("document")),class:"flex items-center gap-3 text-base font-medium"},[L(y(fe),{icon:y(Rbe),class:"size-7"},null,8,["icon"]),i[3]||(i[3]=be(" Văn bản "))])])]),_:1}))}}),Ket={class:"bg-white ion-padding-horizontal pt-4 pb-6"},Yet={key:0,class:"flex items-center justify-between text-sm text-red-500"},Xet={class:"flex text-base items-stretch gap-2 font-medium justify-between px-4 py-2",slot:"header"},Qet={class:"flex gap-2 items-stretch"},Zet={class:"flex-1"},Jet={class:"flex"},ett={slot:"content",class:"p-4 pt-0"},ttt={class:"my-3"},ntt={key:0,class:"flex items-center justify-between text-sm text-red-500"},itt={class:"flex items-stretch justify-between bg-white border border-gray2 p-2 py-3 my-2 rounded-lg gap-2"},stt={class:"flex flex-1 items-stretch gap-2"},rtt={class:"flex-1 text-base font-light"},ott={class:"flex items-baseline"},att=["onClick"],ltt={id:"open-lesson-part",class:"flex items-center mt-3 w-fit bg-white p-2 rounded-lg text-sm font-medium gap-2 outline outline-1 outline-gray2"},ctt={class:"ion-padding bg-white rounded-lg flex flex-col"},dtt={class:"flex items-center justify-between text-lg font-medium"},utt=Fe({__name:"TabCourseContent",setup(n){const e=K(),t=K(!1),i=K(!1),s=K(""),r=K([{part_id:"p1",name:"Phần 1: Tổng quan về khoá học",lessons:[{id:1,name:"Bài 1: Giới thiệu chung về khoá học"},{id:2,name:"Bài 2: Giới thiệu chung về khoá học"},{id:3,name:"Bài 3: Giới thiệu chung về khoá học"}]},{part_id:"p2",name:"Phần 2: Tổng quan về khoá học",lessons:[{id:4,name:"Bài 1: Bắt đầu học"},{id:5,name:"Bài 2: Bắt đầu học"},{id:6,name:"Bài 3: Bắt đầu học"}]}]),o=K(),a=x=>{r.value=x.detail.complete(r.value)},l=x=>{const k=r.value.map(E=>E.part_id==o.value.part_id?{...E,lessons:x.detail.complete(E.lessons)}:E);r.value=k},c=x=>{o.value=x,t.value=!0},d=()=>{o.value=null,t.value=!1},u=()=>{e.value.$el.dismiss(null,"cancel")},h=()=>{s.value="",u()},f=async x=>{const k=await Bd.create({mode:"ios",buttons:[{text:"Chỉnh sửa"},{text:"Di chuyển",handler:()=>c(x)},{text:"Xoá",role:"destructive"},{text:"Huỷ",role:"cancel"}],translucent:!0});await k.present();const E=await k.onWillDismiss();console.log("x :",E)},m=async()=>{const x=await Bd.create({mode:"ios",buttons:[{text:"Chỉnh sửa"},{text:"Di chuyển",handler:()=>i.value=!0},{text:"Xoá",role:"destructive"},{text:"Huỷ",role:"cancel"}],translucent:!0});await x.present();const k=await x.onWillDismiss();console.log("🚀 ~ onOptionPartPress ~ x:",k)},g=()=>{console.log(r)},b=async x=>{const k=await qe.create({component:qet,componentProps:{data:{part_id:x}},mode:"ios",initialBreakpoint:.2,cssClass:"bdr"});k.present();const{role:E}=await k.onDidDismiss();["video","document"].includes(E)&&w(E)},w=async x=>{(await qe.create({component:Get,componentProps:{data:{type:x}},mode:"ios",cssClass:"bdr"})).present()};return(x,k)=>(I(),O(Ue,null,[L(y(At),{class:"ion-padding-vertical",color:"white1"},{default:j(()=>[_("div",Ket,[_("section",null,[_("div",{class:"flex justify-between items-center mb-4 text-base font-medium"},[k[3]||(k[3]=be(" Thêm bài học ")),_("span",{onClick:g,class:"border border-gray2 p-1.5 rounded-lg text-sm font-medium"},"Xem trước")]),i.value?(I(),O("section",Yet,[k[4]||(k[4]=be(" Di chuyển bài học để thay đổi thứ tự ")),L(y(fe),{onClick:k[0]||(k[0]=E=>i.value=!1),icon:y(NT),class:"size-6 text-blue1"},null,8,["icon"])])):re("",!0),L(y(kT),{disabled:!i.value,onIonItemReorder:a},{default:j(()=>[(I(!0),O(Ue,null,ct(r.value,E=>(I(),ve(y(WN),{key:E==null?void 0:E.part_id,class:"mb-4 mt-3"},{default:j(()=>[L(y(GN),{value:E==null?void 0:E.part_id,class:"border border-gray2 bg-white1 rounded-lg py-2"},{default:j(()=>{var T,P;return[_("div",Xet,[_("div",Qet,[L(y(fe),{icon:y(Al),class:"size-6"},null,8,["icon"]),_("div",Zet,Q(E==null?void 0:E.name),1)]),_("div",Jet,[i.value?re("",!0):(I(),ve(y(fe),{key:0,onClick:qt(m,["stop"]),icon:y(Sp),class:"size-6"},null,8,["icon"])),i.value?(I(),ve(y(_T),{key:1},{default:j(()=>[L(y(fe),{icon:y(BT),class:"size-6 text-gray2"},null,8,["icon"])]),_:1})):re("",!0)])]),_("div",ett,[_("section",ttt,[t.value&&((T=o.value)==null?void 0:T.part_id)==(E==null?void 0:E.part_id)?(I(),O("div",ntt,[k[5]||(k[5]=be(" Di chuyển bài học để thay đổi thứ tự ")),L(y(fe),{onClick:d,icon:y(NT),class:"size-6 text-blue1"},null,8,["icon"])])):re("",!0),L(y(kT),{disabled:!t.value&&((P=o.value)==null?void 0:P.part_id)==(E==null?void 0:E.part_id),onIonItemReorder:k[1]||(k[1]=C=>l(C))},{default:j(()=>[(I(!0),O(Ue,null,ct(E==null?void 0:E.lessons,C=>{var A,R;return I(),O("div",{key:C.id,class:"rounded-lg"},[_("div",itt,[_("div",stt,[L(y(fe),{icon:y(FA),class:"size-6 flex"},null,8,["icon"]),_("div",rtt,Q(C.name),1)]),_("div",ott,[L(y(fe),{onClick:M=>f(E),icon:y(Sp),class:gt(["size-6 text-gray2",t.value&&((A=o.value)==null?void 0:A.part_id)==(E==null?void 0:E.part_id)&&"hidden"])},null,8,["onClick","icon","class"]),t.value&&((R=o.value)==null?void 0:R.part_id)==(E==null?void 0:E.part_id)?(I(),ve(y(_T),{key:0,slot:"end"},{default:j(()=>[L(y(fe),{icon:y(BT),class:"size-6 text-gray2"},null,8,["icon"])]),_:1})):re("",!0)])])])}),128))]),_:2},1032,["disabled"])]),_("button",{onClick:C=>b(E==null?void 0:E.part_id),class:"flex items-center w-fit bg-white p-2 rounded-lg text-sm font-medium gap-2 outline outline-1 outline-gray2"},[L(y(fe),{icon:y(l0),class:"size-5 text-blue1"},null,8,["icon"]),k[6]||(k[6]=be(" Bài học "))],8,att)])]}),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["disabled"]),_("button",ltt,[L(y(fe),{icon:y(l0),class:"size-5 text-blue1"},null,8,["icon"]),k[7]||(k[7]=be(" Phần học "))])])])]),_:1}),L(y(kA),{ref_key:"refModalAddPart",ref:e,trigger:"open-lesson-part",id:"add-lesson-part"},{default:j(()=>[_("template",ctt,[_("div",dtt,[k[8]||(k[8]=be(" Thêm phần học ")),L(y(fe),{onClick:u,icon:y(ks),class:"size-7"},null,8,["icon"])]),L(y(Tn),{modelValue:s.value,"onUpdate:modelValue":k[2]||(k[2]=E=>s.value=E),mode:"md",fill:"outline",placeholder:"Tên phần học",class:"outline-none text-base font-light mb-2 mt-4",label:"Tên phần học",type:"text","label-placement":"stacked",color:"blue1",counter:!0,maxlength:80},null,8,["modelValue"]),_("div",{class:"flex items-center justify-end gap-3 uppercase"},[_("div",{onClick:u,class:"text-base font-medium"},"Đóng"),_("div",{onClick:h,class:"text-sm font-medium bg-blue1 p-2 px-3 rounded-lg text-white"}," Lưu lại ")])])]),_:1},512)],64))}}),htt=Fe({__name:"CourseEditInfomationScreen",setup(n){const e=gn(),t=Yi([{key:"info",title:"Thông tin"},{key:"content",title:"Danh sách bài học"}]),i=K(t[0].key),s=()=>e.back(),r=o=>{i.value=o};return(o,a)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{slot:"start",onClick:s,icon:y(Eo),class:"size-6 p-2"},null,8,["icon"]),a[0]||(a[0]=_("div",{class:"text-lg mr-4 font-medium text-ellipsis flex-1 overflow-hidden break-words text-nowrap"}," Bán hàng đỉnh cao ",-1))]),_:1})]),_:1}),L(Ob,{routes:t,onChangeTab:r,"tab-key":i.value,slot:"start"},{scene:j(()=>[i.value==="info"?(I(),ve(y(Uet),{key:0})):re("",!0),i.value==="content"?(I(),ve(y(utt),{key:1})):re("",!0)]),_:1},8,["routes","tab-key"])]),_:1}))}}),Ej=Yd("course",()=>{const{userCommunity:n}=et(Li()),{community:e}=et(ln()),t=K(),i=K();return{course:t,userCourse:i,setCourse:async u=>{t.value=u},setUserCourse:async u=>{i.value=u},checkAccessCourse:async()=>{var u,h,f,m,g;if(Li().checkUserAdminCommunity(e.value,n.value))return"";if(t.value&&t.value.status===uo.Publish){if(!J.isEmpty((u=i.value)==null?void 0:u.expired_at)&&new Date((h=i.value)==null?void 0:h.expired_at)<=new Date)return"Khóa học của bạn đã hết hạn";let b=!1;if(J.isEmpty(i.value))return"Bạn chưa được gắn khóa học này";if(J.isEmpty(i.value)||(t.value.type!==If.Vip&&i.value.paid||t.value.type===If.Free&&i.value.is_attached)&&(b=!0),!J.isEmpty(i.value)){const w=t.value.level_point||0,x=((f=n.value)==null?void 0:f.point)||0;let k=!1;if(t.value.type!==If.Vip&&x<w&&!b)return"Bạn chưa đủ cấp để học";if(k=!0,((m=t.value)==null?void 0:m.type)==If.Paid&&!((g=i.value)!=null&&g.paid)&&!k)return"Bạn cần mua khóa học để truy cập"}}return""},checkUserCourseExpired:(u,h)=>{if(J.isEmpty(u)||J.isEmpty(h))return!1;if(J.isEmpty(h==null?void 0:h.expired_at))return!0;const f=new Date(h==null?void 0:h.expired_at),m=new Date;return(u.status==uo.Publish||u.status==uo.StopSelling)&&f>m},checkUserCourse:()=>{var u,h;return!J.isEmpty(t.value)&&(((u=t.value)==null?void 0:u.status)==uo.Publish||((h=t.value)==null?void 0:h.status)==uo.StopSelling)&&!J.isEmpty(i.value)},checkLevelUserCommunitySatisfy:(u,h)=>J.isEmpty(u)||J.isEmpty(h)?!1:!J.isEmpty(u)&&!J.isUndefined(h)&&!J.isUndefined(u.level)&&(u.status==uo.Publish||u.status==uo.StopSelling)&&h.point>=u.level,checkUserCoursePaid:(u,h)=>J.isEmpty(u)||J.isEmpty(h)?!1:!J.isEmpty(u)&&(u.status==uo.Publish||u.status==uo.StopSelling)&&u.type==If.Paid&&h.paid}});function ftt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tj={exports:{}};(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,d){if(d=d||{},l=l.trim(),c=c.trim(),!c){if(!d.alwaysNormalize)return l;var u=a.parseURL(l);if(!u)throw new Error("Error trying to parse base URL.");return u.path=a.normalizePath(u.path),a.buildURLFromParts(u)}var h=a.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return d.alwaysNormalize?(h.path=a.normalizePath(h.path),a.buildURLFromParts(h)):c;var f=a.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var m=s.exec(f.path);f.netLoc=m[1],f.path=m[2]}f.netLoc&&!f.path&&(f.path="/");var g={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(g.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)g.path=f.path,h.params||(g.params=f.params,h.query||(g.query=f.query));else{var b=f.path,w=b.substring(0,b.lastIndexOf("/")+1)+h.path;g.path=a.normalizePath(w)}return g.path===null&&(g.path=d.alwaysNormalize?a.normalizePath(h.path):h.path),a.buildURLFromParts(g)},parseURL:function(l){var c=i.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=a})()})(Tj);var d5=Tj.exports;function eD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function Xs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eD(Object(t),!0).forEach(function(i){gtt(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ptt(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mtt(n){var e=ptt(n,"string");return typeof e=="symbol"?e:String(e)}function gtt(n,e,t){return e=mtt(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Is(){return Is=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Is.apply(this,arguments)}const Mt=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},btt=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=vtt},vtt=Number.MAX_SAFE_INTEGER||9007199254740991;let W=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n}({}),fn=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),Xe=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.UNKNOWN="unknown",n}({});const Du=function(){},sS={trace:Du,debug:Du,log:Du,warn:Du,info:Du,error:Du};let Mg=sS;function ytt(n){const e=self.console[n];return e?e.bind(self.console,"[".concat(n,"] >")):Du}function wtt(n,...e){e.forEach(function(t){Mg[t]=n[t]?n[t].bind(n):ytt(t)})}function xtt(n,e){if(typeof console=="object"&&n===!0||typeof n=="object"){wtt(n,"debug","log","info","warn","error");try{Mg.log('Debug logs enabled for "'.concat(e,'" in hls.js version 1.5.18'))}catch(t){Mg=sS}}else Mg=sS}const Ve=Mg,_tt=/^(\d+)x(\d+)$/,tD=/(.+?)=(".*?"|.*?)(?:,|$)/g;class as{constructor(e){typeof e=="string"&&(e=as.parseAttrList(e)),Is(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let s=0;s<t.length/2;s++)i[s]=parseInt(t.slice(s*2,s*2+2),16);return i}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=_tt.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const i={},s='"';for(tD.lastIndex=0;(t=tD.exec(e))!==null;){let r=t[2];r.indexOf(s)===0&&r.lastIndexOf(s)===r.length-1&&(r=r.slice(1,-1));const o=t[1].trim();i[o]=r}return i}}function ktt(n){return n!=="ID"&&n!=="CLASS"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function Ett(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"}class Cj{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const i=t.attr;for(const s in i)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==i[s]){Ve.warn('DATERANGE tag attribute: "'.concat(s,'" does not match for tags with ID: "').concat(e.ID,'"')),this._badValueForSameId=s;break}e=Is(new as({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=new Date(this.attr["END-DATE"]);Mt(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Mt(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Mt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class h_{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var _i={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Sj{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[_i.AUDIO]:null,[_i.VIDEO]:null,[_i.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const i=e.split("@",2);let s;i.length===1?s=(t==null?void 0:t.byteRangeEndOffset)||0:s=parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=d5.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class lE extends Sj{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new h_,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Mt(this.programDateTime))return null;const e=Mt(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),i=t.length;if(i>1||i===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,s,r,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:r,partial:o};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,r)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[_i.AUDIO]=null,e[_i.VIDEO]=null,e[_i.AUDIOVIDEO]=null}}class Ttt extends Sj{constructor(e,t,i,s,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new h_,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const Ctt=10;class Stt{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Mt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Ctt}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function u5(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function Att(n){const e=rS(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function Itt(n){const e=function(i,s,r){const o=i[s];i[s]=i[r],i[r]=o};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function Ptt(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),s=i[i.length-1].split(",");if(s.length===2){const r=s[0]==="base64",o=s[1];r?(i.splice(-1,1),t=u5(o)):t=Att(o)}}return t}function rS(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}const Fp=typeof self<"u"?self:void 0;var Hi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Gr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function nD(n){switch(n){case Gr.FAIRPLAY:return Hi.FAIRPLAY;case Gr.PLAYREADY:return Hi.PLAYREADY;case Gr.WIDEVINE:return Hi.WIDEVINE;case Gr.CLEARKEY:return Hi.CLEARKEY}}var ag={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function iD(n){if(n===ag.WIDEVINE)return Hi.WIDEVINE;if(n===ag.PLAYREADY)return Hi.PLAYREADY;if(n===ag.CENC||n===ag.CLEARKEY)return Hi.CLEARKEY}function sD(n){switch(n){case Hi.FAIRPLAY:return Gr.FAIRPLAY;case Hi.PLAYREADY:return Gr.PLAYREADY;case Hi.WIDEVINE:return Gr.WIDEVINE;case Hi.CLEARKEY:return Gr.CLEARKEY}}function cE(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[Hi.FAIRPLAY,Hi.WIDEVINE,Hi.PLAYREADY,Hi.CLEARKEY].filter(s=>!!e[s]):[];return!i[Hi.WIDEVINE]&&t&&i.push(Hi.WIDEVINE),i}const Aj=function(n){return Fp!=null&&(n=Fp.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Rtt(n,e,t,i){let s;switch(n){case Hi.FAIRPLAY:s=["cenc","sinf"];break;case Hi.WIDEVINE:case Hi.PLAYREADY:s=["cenc"];break;case Hi.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error("Unknown key-system: ".concat(n))}return $tt(s,e,t,i)}function $tt(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:'audio/mp4; codecs="'.concat(r,'"'),robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(r=>({contentType:'video/mp4; codecs="'.concat(r,'"'),robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function oh(n,e,t){return Uint8Array.prototype.slice?n.slice(e,t):new Uint8Array(Array.prototype.slice.call(n,e,t))}const h5=(n,e)=>e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,Ij=(n,e)=>e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128,F0=(n,e)=>{const t=e;let i=0;for(;h5(n,e);){i+=10;const s=f_(n,e+6);i+=s,Ij(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)},f_=(n,e)=>{let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t},Ltt=(n,e)=>h5(n,e)&&f_(n,e+6)+10<=n.length-e,f5=n=>{const e=Rj(n);for(let t=0;t<e.length;t++){const i=e[t];if(Pj(i))return Btt(i)}},Pj=n=>n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp",Ott=n=>{const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=f_(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}},Rj=n=>{let e=0;const t=[];for(;h5(n,e);){const i=f_(n,e+6);e+=10;const s=e+i;for(;e+8<s;){const r=Ott(n.subarray(e)),o=Dtt(r);o&&t.push(o),e+=r.size+10}Ij(n,e)&&(e+=10)}return t},Dtt=n=>n.type==="PRIV"?Mtt(n):n.type[0]==="W"?Ftt(n):Ntt(n),Mtt=n=>{if(n.size<2)return;const e=Tl(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}},Ntt=n=>{if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=Tl(n.data.subarray(t),!0);t+=i.length+1;const s=Tl(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=Tl(n.data.subarray(1));return{key:n.type,data:e}},Ftt=n=>{if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=Tl(n.data.subarray(t),!0);t+=i.length+1;const s=Tl(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=Tl(n.data);return{key:n.type,data:e}},Btt=n=>{if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}},Tl=(n,e=!1)=>{const t=Vtt();if(t){const c=t.decode(n);if(e){const d=c.indexOf("\0");return d!==-1?c.substring(0,d):c}return c.replace(/\0/g,"")}const i=n.length;let s,r,o,a="",l=0;for(;l<i;){if(s=n[l++],s===0&&e)return a;if(s===0||s===3)continue;switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:r=n[l++],a+=String.fromCharCode((s&31)<<6|r&63);break;case 14:r=n[l++],o=n[l++],a+=String.fromCharCode((s&15)<<12|(r&63)<<6|(o&63)<<0);break}}return a};let dE;function Vtt(){if(!navigator.userAgent.includes("PlayStation 4"))return!dE&&typeof self.TextDecoder<"u"&&(dE=new self.TextDecoder("utf-8")),dE}const ll={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}},Tw=Math.pow(2,32)-1,Utt=[].push,$j={video:1,audio:2,id3:3,text:4};function Ls(n){return String.fromCharCode.apply(null,n)}function Lj(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function nn(n,e){const t=Oj(n,e);return t<0?4294967296+t:t}function rD(n,e){let t=nn(n,e);return t*=Math.pow(2,32),t+=nn(n,e+4),t}function Oj(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function uE(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function ztt(n){const e=n.byteLength;for(let t=0;t<e;){const i=nn(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function kn(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let s=0;s<i;){const r=nn(n,s),o=Ls(n.subarray(s+4,s+8)),a=r>1?s+r:i;if(o===e[0])if(e.length===1)t.push(n.subarray(s+8,a));else{const l=kn(n.subarray(s+8,a),e.slice(1));l.length&&Utt.apply(t,l)}s=a}return t}function Htt(n){const e=[],t=n[0];let i=8;const s=nn(n,i);i+=4;let r=0,o=0;t===0?(r=nn(n,i),o=nn(n,i+4),i+=8):(r=rD(n,i),o=rD(n,i+8),i+=16),i+=2;let a=n.length+o;const l=Lj(n,i);i+=2;for(let c=0;c<l;c++){let d=i;const u=nn(n,d);d+=4;const h=u&2147483647;if((u&2147483648)>>>31===1)return Ve.warn("SIDX has hierarchical references (not supported)"),null;const m=nn(n,d);d+=4,e.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/s,start:a,end:a+h-1}}),a+=h,d+=4,i=d}return{earliestPresentationTime:r,timescale:s,version:t,referencesCount:l,references:e}}function Dj(n){const e=[],t=kn(n,["moov","trak"]);for(let s=0;s<t.length;s++){const r=t[s],o=kn(r,["tkhd"])[0];if(o){let a=o[0];const l=nn(o,a===0?12:20),c=kn(r,["mdia","mdhd"])[0];if(c){a=c[0];const d=nn(c,a===0?12:20),u=kn(r,["mdia","hdlr"])[0];if(u){const h=Ls(u.subarray(8,12)),f={soun:_i.AUDIO,vide:_i.VIDEO}[h];if(f){const m=kn(r,["mdia","minf","stbl","stsd"])[0],g=jtt(m);e[l]={timescale:d,type:f},e[f]=Xs({timescale:d,id:l},g)}}}}}return kn(n,["moov","mvex","trex"]).forEach(s=>{const r=nn(s,4),o=e[r];o&&(o.default={duration:nn(s,12),flags:nn(s,20)})}),e}function jtt(n){const e=n.subarray(8),t=e.subarray(86),i=Ls(e.subarray(4,8));let s=i;const r=i==="enca"||i==="encv";if(r){const a=kn(e,[i])[0].subarray(i==="enca"?28:78);kn(a,["sinf"]).forEach(c=>{const d=kn(c,["schm"])[0];if(d){const u=Ls(d.subarray(4,8));if(u==="cbcs"||u==="cenc"){const h=kn(c,["frma"])[0];h&&(s=Ls(h))}}})}switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const o=kn(t,["avcC"])[0];s+="."+pv(o[1])+pv(o[2])+pv(o[3]);break}case"mp4a":{const o=kn(e,[i])[0],a=kn(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=hE(a,l),l+=2;const c=a[l++];if(c&128&&(l+=2),c&64&&(l+=a[l++]),a[l++]!==4)break;l=hE(a,l);const d=a[l++];if(d===64)s+="."+pv(d);else break;if(l+=12,a[l++]!==5)break;l=hE(a,l);const u=a[l++];let h=(u&248)>>3;h===31&&(h+=1+((u&7)<<3)+((a[l]&224)>>5)),s+="."+h}break}case"hvc1":case"hev1":{const o=kn(t,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],c=a&31,d=nn(o,2),u=(a&32)>>5?"H":"L",h=o[12],f=o.subarray(6,12);s+="."+l+c,s+="."+d.toString(16).toUpperCase(),s+="."+u+h;let m="";for(let g=f.length;g--;){const b=f[g];(b||m)&&(m="."+b.toString(16).toUpperCase()+m)}s+=m;break}case"dvh1":case"dvhe":{const o=kn(t,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;s+="."+nl(a)+"."+nl(l);break}case"vp09":{const o=kn(t,["vpcC"])[0],a=o[4],l=o[5],c=o[6]>>4&15;s+="."+nl(a)+"."+nl(l)+"."+nl(c);break}case"av01":{const o=kn(t,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,c=o[2]>>>7?"H":"M",d=(o[2]&64)>>6,u=(o[2]&32)>>5,h=a===2&&d?u?12:10:d?10:8,f=(o[2]&16)>>4,m=(o[2]&8)>>3,g=(o[2]&4)>>2,b=o[2]&3;s+="."+a+"."+nl(l)+c+"."+nl(h)+"."+f+"."+m+g+b+"."+nl(1)+"."+nl(1)+"."+nl(1)+"."+0;break}}return{codec:s,encrypted:r}}function hE(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function pv(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function nl(n){return(n<10?"0":"")+n}function Gtt(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&kn(n,["moov","trak"]).forEach(s=>{const o=kn(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=kn(o,["enca"]);const l=a.length>0;l||(a=kn(o,["encv"])),a.forEach(c=>{const d=l?c.subarray(28):c.subarray(78);kn(d,["sinf"]).forEach(h=>{const f=Mj(h);if(f){const m=f.subarray(8,24);m.some(g=>g!==0)||(Ve.log("[eme] Patching keyId in 'enc".concat(l?"a":"v",">sinf>>tenc' box: ").concat(ll.hexDump(m)," -> ").concat(ll.hexDump(t))),f.set(t,8))}})})}),n}function Mj(n){const e=kn(n,["schm"])[0];if(e){const t=Ls(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return kn(n,["schi","tenc"])[0]}return null}function Wtt(n,e){return kn(e,["moof","traf"]).reduce((t,i)=>{const s=kn(i,["tfdt"])[0],r=s[0],o=kn(i,["tfhd"]).reduce((a,l)=>{const c=nn(l,4),d=n[c];if(d){let u=nn(s,4);if(r===1){if(u===Tw)return Ve.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;u*=Tw+1,u+=nn(s,8)}const h=d.timescale||9e4,f=u/h;if(Mt(f)&&(a===null||f<a))return f}return a},null);return o!==null&&Mt(o)&&(t===null||o<t)?o:t},null)}function qtt(n,e){let t=0,i=0,s=0;const r=kn(n,["moof","traf"]);for(let o=0;o<r.length;o++){const a=r[o],l=kn(a,["tfhd"])[0],c=nn(l,4),d=e[c];if(!d)continue;const u=d.default,h=nn(l,0)|(u==null?void 0:u.flags);let f=u==null?void 0:u.duration;h&8&&(h&2?f=nn(l,12):f=nn(l,8));const m=d.timescale||9e4,g=kn(a,["trun"]);for(let b=0;b<g.length;b++){if(t=Ktt(g[b]),!t&&f){const w=nn(g[b],4);t=f*w}d.type===_i.VIDEO?i+=t/m:d.type===_i.AUDIO&&(s+=t/m)}}if(i===0&&s===0){let o=1/0,a=0,l=0;const c=kn(n,["sidx"]);for(let d=0;d<c.length;d++){const u=Htt(c[d]);if(u!=null&&u.references){o=Math.min(o,u.earliestPresentationTime/u.timescale);const h=u.references.reduce((f,m)=>f+m.info.duration||0,0);a=Math.max(a,h+u.earliestPresentationTime/u.timescale),l=a-o}}if(l&&Mt(l))return l}return i||s}function Ktt(n){const e=nn(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let i=0;const s=nn(n,4);for(let r=0;r<s;r++){if(e&256){const o=nn(n,t);i+=o,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return i}function Ytt(n,e,t){kn(e,["moof","traf"]).forEach(i=>{kn(i,["tfhd"]).forEach(s=>{const r=nn(s,4),o=n[r];if(!o)return;const a=o.timescale||9e4;kn(i,["tfdt"]).forEach(l=>{const c=l[0],d=t*a;if(d){let u=nn(l,4);if(c===0)u-=d,u=Math.max(u,0),uE(l,4,u);else{u*=Math.pow(2,32),u+=nn(l,8),u-=d,u=Math.max(u,0);const h=Math.floor(u/(Tw+1)),f=Math.floor(u%(Tw+1));uE(l,4,h),uE(l,8,f)}}})})})}function Xtt(n){const e={valid:null,remainder:null},t=kn(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=oh(n,0,i.byteOffset-8),e.remainder=oh(n,i.byteOffset-8),e}function Zo(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function oD(n,e){const t=[],i=e.samples,s=e.timescale,r=e.id;let o=!1;return kn(i,["moof"]).map(l=>{const c=l.byteOffset-8;kn(l,["traf"]).map(u=>{const h=kn(u,["tfdt"]).map(f=>{const m=f[0];let g=nn(f,4);return m===1&&(g*=Math.pow(2,32),g+=nn(f,8)),g/s})[0];return h!==void 0&&(n=h),kn(u,["tfhd"]).map(f=>{const m=nn(f,4),g=nn(f,0)&16777215,b=(g&1)!==0,w=(g&2)!==0,x=(g&8)!==0;let k=0;const E=(g&16)!==0;let T=0;const P=(g&32)!==0;let C=8;m===r&&(b&&(C+=8),w&&(C+=4),x&&(k=nn(f,C),C+=4),E&&(T=nn(f,C),C+=4),P&&(C+=4),e.type==="video"&&(o=Qtt(e.codec)),kn(u,["trun"]).map(A=>{const R=A[0],M=nn(A,0)&16777215,N=(M&1)!==0;let U=0;const G=(M&4)!==0,B=(M&256)!==0;let te=0;const X=(M&512)!==0;let ue=0;const he=(M&1024)!==0,Ie=(M&2048)!==0;let xe=0;const Be=nn(A,4);let Pe=8;N&&(U=nn(A,Pe),Pe+=4),G&&(Pe+=4);let Ae=U+c;for(let de=0;de<Be;de++){if(B?(te=nn(A,Pe),Pe+=4):te=k,X?(ue=nn(A,Pe),Pe+=4):ue=T,he&&(Pe+=4),Ie&&(R===0?xe=nn(A,Pe):xe=Oj(A,Pe),Pe+=4),e.type===_i.VIDEO){let we=0;for(;we<ue;){const ze=nn(i,Ae);if(Ae+=4,Ztt(o,i[Ae])){const le=i.subarray(Ae,Ae+ze);Nj(le,o?2:1,n+xe/s,t)}Ae+=ze,we+=ze+4}}n+=te/s}}))})})}),t}function Qtt(n){if(!n)return!1;const e=n.indexOf("."),t=e<0?n:n.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function Ztt(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Nj(n,e,t,i){const s=Fj(n);let r=0;r+=e;let o=0,a=0,l=0;for(;r<s.length;){o=0;do{if(r>=s.length)break;l=s[r++],o+=l}while(l===255);a=0;do{if(r>=s.length)break;l=s[r++],a+=l}while(l===255);const c=s.length-r;let d=r;if(a<c)r+=a;else if(a>c){Ve.error("Malformed SEI payload. ".concat(a," is too small, only ").concat(c," bytes left to parse."));break}if(o===4){if(s[d++]===181){const h=Lj(s,d);if(d+=2,h===49){const f=nn(s,d);if(d+=4,f===1195456820){const m=s[d++];if(m===3){const g=s[d++],b=31&g,w=64&g,x=w?2+b*3:0,k=new Uint8Array(x);if(w){k[0]=g;for(let E=1;E<x;E++)k[E]=s[d++]}i.push({type:m,payloadType:o,pts:t,bytes:k})}}}}}else if(o===5&&a>16){const u=[];for(let m=0;m<16;m++){const g=s[d++].toString(16);u.push(g.length==1?"0"+g:g),(m===3||m===5||m===7||m===9)&&u.push("-")}const h=a-16,f=new Uint8Array(h);for(let m=0;m<h;m++)f[m]=s[d++];i.push({payloadType:o,pts:t,uuid:u.join(""),userData:Tl(f),userDataBytes:f})}}}function Fj(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const s=e-t.length,r=new Uint8Array(s);let o=0;for(i=0;i<s;o++,i++)o===t[0]&&(o++,t.shift()),r[i]=n[o];return r}function Jtt(n){const e=n[0];let t="",i="",s=0,r=0,o=0,a=0,l=0,c=0;if(e===0){for(;Ls(n.subarray(c,c+1))!=="\0";)t+=Ls(n.subarray(c,c+1)),c+=1;for(t+=Ls(n.subarray(c,c+1)),c+=1;Ls(n.subarray(c,c+1))!=="\0";)i+=Ls(n.subarray(c,c+1)),c+=1;i+=Ls(n.subarray(c,c+1)),c+=1,s=nn(n,12),r=nn(n,16),a=nn(n,20),l=nn(n,24),c=28}else if(e===1){c+=4,s=nn(n,c),c+=4;const u=nn(n,c);c+=4;const h=nn(n,c);for(c+=4,o=2**32*u+h,btt(o)||(o=Number.MAX_SAFE_INTEGER,Ve.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=nn(n,c),c+=4,l=nn(n,c),c+=4;Ls(n.subarray(c,c+1))!=="\0";)t+=Ls(n.subarray(c,c+1)),c+=1;for(t+=Ls(n.subarray(c,c+1)),c+=1;Ls(n.subarray(c,c+1))!=="\0";)i+=Ls(n.subarray(c,c+1)),c+=1;i+=Ls(n.subarray(c,c+1)),c+=1}const d=n.subarray(c,n.byteLength);return{schemeIdUri:t,value:i,timeScale:s,presentationTime:o,presentationTimeDelta:r,eventDuration:a,id:l,payload:d}}function ent(n,...e){const t=e.length;let i=8,s=t;for(;s--;)i+=e[s].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),s=0,i=8;s<t;s++)r.set(e[s],i),i+=e[s].byteLength;return r}function tnt(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,s;i=0,s=new Uint8Array;let r;i>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const o=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(o.buffer).setUint32(0,t.byteLength,!1),ent([112,115,115,104],new Uint8Array([i,0,0,0]),n,r,s,o,t||new Uint8Array)}function nnt(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const s=new DataView(n,i),r=int(s);e.push(r),i+=r.size}}return e}function int(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const r=n.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:t,size:e};const o=n.buffer,a=ll.hexDump(new Uint8Array(o,t+12,16)),l=n.getUint32(28);let c=null,d=null;if(r===0){if(e-32<l||l<22)return{offset:t,size:e};d=new Uint8Array(o,t+32,l)}else if(r===1){if(!l||i<t+32+l*16+16)return{offset:t,size:e};c=[];for(let u=0;u<l;u++)c.push(new Uint8Array(o,t+32+u*16,16))}return{version:r,systemId:a,kids:c,data:d,offset:t,size:e}}let mv={};class B0{static clearKeyUriToKeyIdMap(){mv={}}constructor(e,t,i,s=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Gr.FAIRPLAY:case Gr.WIDEVINE:case Gr.PLAYREADY:case Gr.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&Ve.warn('missing IV for initialization segment with method="'.concat(this.method,'" - compliance issue')),e=0);const i=snt(e);return new B0(this.method,this.uri,"identity",this.keyFormatVersions,i)}const t=Ptt(this.uri);if(t)switch(this.keyFormat){case Gr.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Gr.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=tnt(i,null,t);const s=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),r=String.fromCharCode.apply(null,Array.from(s)),o=r.substring(r.indexOf("<"),r.length),c=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(c){const d=c.childNodes[0]?c.childNodes[0].nodeValue:c.getAttribute("VALUE");if(d){const u=u5(d).subarray(0,16);Itt(u),this.keyId=u}}break}default:{let i=t.subarray(0,16);if(i.length!==16){const s=new Uint8Array(16);s.set(i,16-i.length),i=s}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=mv[this.uri];if(!i){const s=Object.keys(mv).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,s),mv[this.uri]=i}this.keyId=i}return this}}function snt(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const Bj=/\{\$([a-zA-Z0-9-_]+)\}/g;function aD(n){return Bj.test(n)}function Vr(n,e,t){if(n.variableList!==null||n.hasVariableRefs)for(let i=t.length;i--;){const s=t[i],r=e[s];r&&(e[s]=oS(n,r))}}function oS(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(Bj,i=>{const s=i.substring(2,i.length-1),r=t==null?void 0:t[s];return r===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'.concat(s,'"'))),i):r})}return e}function lD(n,e,t){let i=n.variableList;i||(n.variableList=i={});let s,r;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(t).searchParams;if(o.has(s))r=o.get(s);else throw new Error('"'.concat(s,'" does not match any query parameter in URI: "').concat(t,'"'))}catch(o){n.playlistParsingError||(n.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: ".concat(o.message)))}}else s=e.NAME,r=e.VALUE;s in i?n.playlistParsingError||(n.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'.concat(s,'"'))):i[s]=r||""}function rnt(n,e,t){const i=e.IMPORT;if(t&&i in t){let s=n.variableList;s||(n.variableList=s={}),s[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'.concat(i,'"')))}function wh(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function ont(n){return typeof self<"u"&&n===self.ManagedMediaSource}const Cw={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function ant(n,e){const t=Cw[e];return!!t&&!!t[n.slice(0,4)]}function fE(n,e,t=!0){return!n.split(",").some(i=>!Vj(i,e,t))}function Vj(n,e,t=!0){var i;const s=wh(t);return(i=s==null?void 0:s.isTypeSupported(V0(n,e)))!=null?i:!1}function V0(n,e){return"".concat(e,'/mp4;codecs="').concat(n,'"')}function cD(n){if(n){const e=n.substring(0,4);return Cw.video[e]}return 2}function Sw(n){return n.split(",").reduce((e,t)=>{const i=Cw.video[t];return i?(i*2+e)/(e?3:2):(Cw.audio[t]+e)/(e?2:1)},0)}const pE={};function lnt(n,e=!0){if(pE[n])return pE[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[n];for(let i=0;i<t.length;i++)if(Vj(t[i],"audio",e))return pE[n]=t[i],t[i];return n}const cnt=/flac|opus/i;function Aw(n,e=!0){return n.replace(cnt,t=>lnt(t.toLowerCase(),e))}function dD(n,e){return n&&n!=="mp4a"?n:e&&e.split(",")[0]}function dnt(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");if(i.length>2){let s=i.shift()+".";s+=parseInt(i.shift()).toString(16),s+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[t]=s}}return e.join(",")}const uD=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,hD=/#EXT-X-MEDIA:(.*)/g,unt=/^#EXT(?:INF|-X-TARGETDURATION):/m,fD=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),hnt=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class yl{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return d5.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return unt.test(e)}static parseMasterPlaylist(e,t){const i=aD(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];uD.lastIndex=0;let o;for(;(o=uD.exec(e))!=null;)if(o[1]){var a;const c=new as(o[1]);Vr(s,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const d=oS(s,o[2]),u={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:yl.resolve(d,t)},h=c.decimalResolution("RESOLUTION");h&&(u.width=h.width,u.height=h.height),fnt(c.CODECS,u),(a=u.unknownCodecs)!=null&&a.length||r.push(u),s.levels.push(u)}else if(o[3]){const c=o[3],d=o[4];switch(c){case"SESSION-DATA":{const u=new as(d);Vr(s,u,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=u["DATA-ID"];h&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[h]=u);break}case"SESSION-KEY":{const u=pD(d,t,s);u.encrypted&&u.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(u)):Ve.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'.concat(d,'"'));break}case"DEFINE":{{const u=new as(d);Vr(s,u,["NAME","VALUE","QUERYPARAM"]),lD(s,u,t)}break}case"CONTENT-STEERING":{const u=new as(d);Vr(s,u,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:yl.resolve(u["SERVER-URI"],t),pathwayId:u["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=mD(d);break}}}const l=r.length>0&&r.length<s.levels.length;return s.levels=l?r:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,i){let s;const r={},o=i.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(hD.lastIndex=0;(s=hD.exec(e))!==null;){const c=new as(s[1]),d=c.TYPE;if(d){const u=a[d],h=r[d]||[];r[d]=h,Vr(i,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const f=c.LANGUAGE,m=c["ASSOC-LANGUAGE"],g=c.CHANNELS,b=c.CHARACTERISTICS,w=c["INSTREAM-ID"],x={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||f||"",type:d,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:f,url:c.URI?yl.resolve(c.URI,t):""};if(m&&(x.assocLang=m),g&&(x.channels=g),b&&(x.characteristics=b),w&&(x.instreamId=w),u!=null&&u.length){const k=yl.findGroup(u,x.groupId)||u[0];gD(x,k,"audioCodec"),gD(x,k,"textCodec")}h.push(x)}}return r}static parseLevelPlaylist(e,t,i,s,r,o){const a=new Stt(t),l=a.fragments;let c=null,d=0,u=0,h=0,f=0,m=null,g=new lE(s,t),b,w,x,k=-1,E=!1,T=null;for(fD.lastIndex=0,a.m3u8=e,a.hasVariableRefs=aD(e);(b=fD.exec(e))!==null;){E&&(E=!1,g=new lE(s,t),g.start=h,g.sn=d,g.cc=f,g.level=i,c&&(g.initSegment=c,g.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,T&&(g.setByteRange(T),T=null)));const R=b[1];if(R){g.duration=parseFloat(R);const M=(" "+b[2]).slice(1);g.title=M||null,g.tagList.push(M?["INF",R,M]:["INF",R])}else if(b[3]){if(Mt(g.duration)){g.start=h,x&&yD(g,x,a),g.sn=d,g.level=i,g.cc=f,l.push(g);const M=(" "+b[3]).slice(1);g.relurl=oS(a,M),bD(g,m),m=g,h+=g.duration,d++,u=0,E=!0}}else if(b[4]){const M=(" "+b[4]).slice(1);m?g.setByteRange(M,m):g.setByteRange(M)}else if(b[5])g.rawProgramDateTime=(" "+b[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),k===-1&&(k=l.length);else{if(b=b[0].match(hnt),!b){Ve.warn("No matches on slow regex match for level playlist!");continue}for(w=1;w<b.length&&!(typeof b[w]<"u");w++);const M=(" "+b[w]).slice(1),N=(" "+b[w+1]).slice(1),U=b[w+2]?(" "+b[w+2]).slice(1):"";switch(M){case"PLAYLIST-TYPE":a.type=N.toUpperCase();break;case"MEDIA-SEQUENCE":d=a.startSN=parseInt(N);break;case"SKIP":{const G=new as(N);Vr(a,G,["RECENTLY-REMOVED-DATERANGES"]);const B=G.decimalInteger("SKIPPED-SEGMENTS");if(Mt(B)){a.skippedSegments=B;for(let X=B;X--;)l.unshift(null);d+=B}const te=G.enumeratedString("RECENTLY-REMOVED-DATERANGES");te&&(a.recentlyRemovedDateranges=te.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(N),1);break;case"VERSION":a.version=parseInt(N);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(N||U)&&g.tagList.push(U?[N,U]:[N]);break;case"DISCONTINUITY":f++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([M]);break;case"BITRATE":g.tagList.push([M,N]);break;case"DATERANGE":{const G=new as(N);Vr(a,G,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Vr(a,G,G.clientAttrs);const B=new Cj(G,a.dateRanges[G.ID]);B.isValid||a.skippedSegments?a.dateRanges[B.id]=B:Ve.warn('Ignoring invalid DATERANGE tag: "'.concat(N,'"')),g.tagList.push(["EXT-X-DATERANGE",N]);break}case"DEFINE":{{const G=new as(N);Vr(a,G,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in G?rnt(a,G,o):lD(a,G,t)}break}case"DISCONTINUITY-SEQUENCE":f=parseInt(N);break;case"KEY":{const G=pD(N,t,a);if(G.isSupported()){if(G.method==="NONE"){x=void 0;break}x||(x={}),x[G.keyFormat]&&(x=Is({},x)),x[G.keyFormat]=G}else Ve.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'.concat(N,'"'));break}case"START":a.startTimeOffset=mD(N);break;case"MAP":{const G=new as(N);if(Vr(a,G,["BYTERANGE","URI"]),g.duration){const B=new lE(s,t);vD(B,G,i,x),c=B,g.initSegment=c,c.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=c.rawProgramDateTime)}else{const B=g.byteRangeEndOffset;if(B){const te=g.byteRangeStartOffset;T="".concat(B-te,"@").concat(te)}else T=null;vD(g,G,i,x),c=g,E=!0}break}case"SERVER-CONTROL":{const G=new as(N);a.canBlockReload=G.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=G.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&G.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=G.optionalFloat("PART-HOLD-BACK",0),a.holdBack=G.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const G=new as(N);a.partTarget=G.decimalFloatingPoint("PART-TARGET");break}case"PART":{let G=a.partList;G||(G=a.partList=[]);const B=u>0?G[G.length-1]:void 0,te=u++,X=new as(N);Vr(a,X,["BYTERANGE","URI"]);const ue=new Ttt(X,g,t,te,B);G.push(ue),g.duration+=ue.duration;break}case"PRELOAD-HINT":{const G=new as(N);Vr(a,G,["URI"]),a.preloadHint=G;break}case"RENDITION-REPORT":{const G=new as(N);Vr(a,G,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(G);break}default:Ve.warn("line parsed but not handled: ".concat(b));break}}}m&&!m.relurl?(l.pop(),h-=m.duration,a.partList&&(a.fragmentHint=m)):a.partList&&(bD(g,m),g.cc=f,a.fragmentHint=g,x&&yD(g,x,a));const P=l.length,C=l[0],A=l[P-1];if(h+=a.skippedSegments*a.targetduration,h>0&&P&&A){a.averagetargetduration=h/P;const R=A.sn;a.endSN=R!=="initSegment"?R:0,a.live||(A.endList=!0),C&&(a.startCC=C.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(h+=a.fragmentHint.duration),a.totalduration=h,a.endCC=f,k>0&&pnt(l,k),a}}function pD(n,e,t){var i,s;const r=new as(n);Vr(t,r,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(i=r.METHOD)!=null?i:"",a=r.URI,l=r.hexadecimalInteger("IV"),c=r.KEYFORMATVERSIONS,d=(s=r.KEYFORMAT)!=null?s:"identity";a&&r.IV&&!l&&Ve.error("Invalid IV: ".concat(r.IV));const u=a?yl.resolve(a,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new B0(o,u,d,h,l)}function mD(n){const t=new as(n).decimalFloatingPoint("TIME-OFFSET");return Mt(t)?t:null}function fnt(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const s=t.filter(r=>ant(r,i));s.length&&(e["".concat(i,"Codec")]=s.join(","),t=t.filter(r=>s.indexOf(r)===-1))}),e.unknownCodecs=t}function gD(n,e,t){const i=e[t];i&&(n[t]=i)}function pnt(n,e){let t=n[e];for(let i=e;i--;){const s=n[i];if(!s)return;s.programDateTime=t.programDateTime-s.duration*1e3,t=s}}function bD(n,e){n.rawProgramDateTime?n.programDateTime=Date.parse(n.rawProgramDateTime):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime),Mt(n.programDateTime)||(n.programDateTime=null,n.rawProgramDateTime=null)}function vD(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function yD(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&i.push(n)}var Yn={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},sn={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function wD(n){const{type:e}=n;switch(e){case Yn.AUDIO_TRACK:return sn.AUDIO;case Yn.SUBTITLE_TRACK:return sn.SUBTITLE;default:return sn.MAIN}}function mE(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class mnt{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(W.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_LOADING,this.onLevelLoading,this),e.off(W.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(W.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,r=i||s,o=new r(t);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Yn.MANIFEST,url:i,deliveryDirectives:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:r,url:o,deliveryDirectives:a}=t;this.load({id:i,level:s,pathwayId:r,responseType:"text",type:Yn.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:o}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Yn.AUDIO_TRACK,url:r,deliveryDirectives:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:o}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Yn.SUBTITLE_TRACK,url:r,deliveryDirectives:o})}load(e){var t;const i=this.hls.config;let s=this.getInternalLoader(e);if(s){const c=s.context;if(c&&c.url===e.url&&c.level===e.level){Ve.trace("[playlist-loader]: playlist request ongoing");return}Ve.log("[playlist-loader]: aborting previous loader for type: ".concat(e.type)),s.abort()}let r;if(e.type===Yn.MANIFEST?r=i.manifestLoadPolicy.default:r=Is({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Mt((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Yn.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Yn.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Yn.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const d=c.partTarget,u=c.targetduration;if(d&&u){const h=Math.max(d*3,u*.8)*1e3;r=Is({},r,{maxTimeToFirstByteMs:Math.min(h,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,r.maxTimeToFirstByteMs)})}}}const o=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,d,u,h)=>{const f=this.getInternalLoader(u);this.resetInternalLoader(u.type);const m=c.data;if(m.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,u,new Error("no EXTM3U delimiter"),h||null,d);return}d.parsing.start=performance.now(),yl.isMediaPlaylist(m)?this.handleTrackOrLevelPlaylist(c,d,u,h||null,f):this.handleMasterPlaylist(c,d,u,h)},onError:(c,d,u,h)=>{this.handleNetworkError(d,u,!1,c,h)},onTimeout:(c,d,u)=>{this.handleNetworkError(d,u,!0,void 0,c)}};s.load(e,a,l)}handleMasterPlaylist(e,t,i,s){const r=this.hls,o=e.data,a=mE(e,i),l=yl.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,i,l.playlistParsingError,s,t);return}const{contentSteering:c,levels:d,sessionData:u,sessionKeys:h,startTimeOffset:f,variableList:m}=l;this.variableList=m;const{AUDIO:g=[],SUBTITLES:b,"CLOSED-CAPTIONS":w}=yl.parseMasterPlaylistMedia(o,a,l);g.length&&!g.some(k=>!k.url)&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(Ve.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new as({}),bitrate:0,url:""})),r.trigger(W.MANIFEST_LOADED,{levels:d,audioTracks:g,subtitles:b,captions:w,contentSteering:c,url:a,stats:t,networkDetails:s,sessionData:u,sessionKeys:h,startTimeOffset:f,variableList:m})}handleTrackOrLevelPlaylist(e,t,i,s,r){const o=this.hls,{id:a,level:l,type:c}=i,d=mE(e,i),u=0,h=Mt(l)?l:Mt(a)?a:0,f=wD(i),m=yl.parseLevelPlaylist(e.data,d,h,f,u,this.variableList);if(c===Yn.MANIFEST){const g={attrs:new as({}),bitrate:0,details:m,name:"",url:d};o.trigger(W.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:d,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=m,this.handlePlaylistLoaded(m,e,t,i,s,r)}handleManifestParsingError(e,t,i,s,r){this.hls.trigger(W.ERROR,{type:fn.NETWORK_ERROR,details:Xe.MANIFEST_PARSING_ERROR,fatal:t.type===Yn.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:r})}handleNetworkError(e,t,i=!1,s,r){let o="A network ".concat(i?"timeout":"error"+(s?" (status "+s.code+")":"")," occurred while loading ").concat(e.type);e.type===Yn.LEVEL?o+=": ".concat(e.level," id: ").concat(e.id):(e.type===Yn.AUDIO_TRACK||e.type===Yn.SUBTITLE_TRACK)&&(o+=" id: ".concat(e.id,' group-id: "').concat(e.groupId,'"'));const a=new Error(o);Ve.warn("[playlist-loader]: ".concat(o));let l=Xe.UNKNOWN,c=!1;const d=this.getInternalLoader(e);switch(e.type){case Yn.MANIFEST:l=i?Xe.MANIFEST_LOAD_TIMEOUT:Xe.MANIFEST_LOAD_ERROR,c=!0;break;case Yn.LEVEL:l=i?Xe.LEVEL_LOAD_TIMEOUT:Xe.LEVEL_LOAD_ERROR,c=!1;break;case Yn.AUDIO_TRACK:l=i?Xe.AUDIO_TRACK_LOAD_TIMEOUT:Xe.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Yn.SUBTITLE_TRACK:l=i?Xe.SUBTITLE_TRACK_LOAD_TIMEOUT:Xe.SUBTITLE_LOAD_ERROR,c=!1;break}d&&this.resetInternalLoader(e.type);const u={type:fn.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:d,context:e,error:a,networkDetails:t,stats:r};if(s){const h=(t==null?void 0:t.url)||e.url;u.response=Xs({url:h,data:void 0},s)}this.hls.trigger(W.ERROR,u)}handlePlaylistLoaded(e,t,i,s,r,o){const a=this.hls,{type:l,level:c,id:d,groupId:u,deliveryDirectives:h}=s,f=mE(t,s),m=wD(s),g=typeof s.level=="number"&&m===sn.MAIN?c:void 0;if(!e.fragments.length){const w=new Error("No Segments found in Playlist");a.trigger(W.ERROR,{type:fn.NETWORK_ERROR,details:Xe.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:w,reason:w.message,response:t,context:s,level:g,parent:m,networkDetails:r,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const b=e.playlistParsingError;if(b){a.trigger(W.ERROR,{type:fn.NETWORK_ERROR,details:Xe.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:b,reason:b.message,response:t,context:s,level:g,parent:m,networkDetails:r,stats:i});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Yn.MANIFEST:case Yn.LEVEL:a.trigger(W.LEVEL_LOADED,{details:e,level:g||0,id:d||0,stats:i,networkDetails:r,deliveryDirectives:h});break;case Yn.AUDIO_TRACK:a.trigger(W.AUDIO_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:i,networkDetails:r,deliveryDirectives:h});break;case Yn.SUBTITLE_TRACK:a.trigger(W.SUBTITLE_TRACK_LOADED,{details:e,id:d||0,groupId:u||"",stats:i,networkDetails:r,deliveryDirectives:h});break}}}function Uj(n,e){let t;try{t=new Event("addtrack")}catch(i){t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function zj(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error("addCue is failed for: ".concat(e))}catch(i){Ve.debug("[texttrack-utils]: ".concat(i));try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,n.addCue(s)}catch(s){Ve.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: ".concat(s))}}t==="disabled"&&(n.mode=t)}function Df(n){const e=n.mode;if(e==="disabled"&&(n.mode="hidden"),n.cues)for(let t=n.cues.length;t--;)n.removeCue(n.cues[t]);e==="disabled"&&(n.mode=e)}function aS(n,e,t,i){const s=n.mode;if(s==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const r=bnt(n.cues,e,t);for(let o=0;o<r.length;o++)(!i||i(r[o]))&&n.removeCue(r[o])}s==="disabled"&&(n.mode=s)}function gnt(n,e){if(e<n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,s=t;for(;i<=s;){const r=Math.floor((s+i)/2);if(e<n[r].startTime)s=r-1;else if(e>n[r].startTime&&i<t)i=r+1;else return r}return n[i].startTime-e<e-n[s].startTime?i:s}function bnt(n,e,t){const i=[],s=gnt(n,e);if(s>-1)for(let r=s,o=n.length;r<o;r++){const a=n[r];if(a.startTime>=e&&a.endTime<=t)i.push(a);else if(a.startTime>t)return i}return i}function ty(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}var ya={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const vnt=.25;function lS(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function xD(n,e,t,i,s){let r=new n(e,t,"");try{r.value=i,s&&(r.type=s)}catch(o){r=new n(e,t,JSON.stringify(s?Xs({type:s},i):i))}return r}const gv=(()=>{const n=lS();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function gE(n,e){return n.getTime()/1e3-e}function ynt(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class wnt{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Df(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return Uj(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=lS();if(o)for(let a=0;a<r.length;a++){const l=r[a].type;if(l===ya.emsg&&!i||!s)continue;const c=Rj(r[a].data);if(c){const d=r[a].pts;let u=d+r[a].duration;u>gv&&(u=gv),u-d<=0&&(u=d+vnt);for(let f=0;f<c.length;f++){const m=c[f];if(!Pj(m)){this.updateId3CueEnds(d,l);const g=xD(o,d,u,m,l);g&&this.id3Track.addCue(g)}}}}}updateId3CueEnds(e,t){var i;const s=(i=this.id3Track)==null?void 0:i.cues;if(s)for(let r=s.length;r--;){const o=s[r];o.type===t&&o.startTime<e&&o.endTime===gv&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:r,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(r&&(a||l)){let c;s==="audio"?c=d=>d.type===ya.audioId3&&l:s==="video"?c=d=>d.type===ya.emsg&&a:c=d=>d.type===ya.audioId3&&l||d.type===ya.emsg&&a,aS(r,t,i,c)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:s}=this,{dateRanges:r}=t,o=Object.keys(r);if(s){const d=Object.keys(i).filter(u=>!o.includes(u));for(let u=d.length;u--;){const h=d[u];Object.keys(i[h].cues).forEach(f=>{s.removeCue(i[h].cues[f])}),delete i[h]}}const a=t.fragments[t.fragments.length-1];if(o.length===0||!Mt(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,c=lS();for(let d=0;d<o.length;d++){const u=o[d],h=r[u],f=gE(h.startDate,l),m=i[u],g=(m==null?void 0:m.cues)||{};let b=(m==null?void 0:m.durationKnown)||!1,w=gv;const x=h.endDate;if(x)w=gE(x,l),b=!0;else if(h.endOnNext&&!b){const E=o.reduce((T,P)=>{if(P!==h.id){const C=r[P];if(C.class===h.class&&C.startDate>h.startDate&&(!T||h.startDate<T.startDate))return C}return T},null);E&&(w=gE(E.startDate,l),b=!0)}const k=Object.keys(h.attr);for(let E=0;E<k.length;E++){const T=k[E];if(!ktt(T))continue;const P=g[T];if(P)b&&!m.durationKnown&&(P.endTime=w);else if(c){let C=h.attr[T];Ett(T)&&(C=ynt(C));const A=xD(c,f,w,{key:T,data:C},ya.dateRange);A&&(A.id=u,this.id3Track.addCue(A),g[T]=A)}}i[u]={cues:g,dateRange:h,durationKnown:b}}}}class xnt{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&i||t;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=r!==void 0?r:o*s);const d=s;return c+Math.min(this.stallCount*1,d)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,i=this.levelDetails;if(e===null||t===null||i===null)return null;const s=i.edge,r=e-t-this.edgeStalled,o=s-i.totalduration,a=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(o,r),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(W.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(W.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(W.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(W.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var i;t.details===Xe.BUFFER_STALLED_ERROR&&(this.stallCount++,(i=this.levelDetails)!=null&&i.live&&Ve.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:r}=this.config;if(!s||r===1||!t.live)return;const o=this.targetLatency;if(o===null)return;const a=i-o,l=Math.min(this.maxLatency,o+t.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,r)),u=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(d,Math.max(1,u))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const cS=["NONE","TYPE-0","TYPE-1",null];function _nt(n){return cS.indexOf(n)>-1}const Iw=["SDR","PQ","HLG"];function knt(n){return!!n&&Iw.indexOf(n)>-1}var ny={No:"",Yes:"YES",v2:"v2"};function _D(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,s=i<e/2;return e&&s?t?ny.v2:ny.Yes:ny.No}class kD{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Bp{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return ED(this._audioGroups,e)}hasSubtitleGroup(e){return ED(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function ED(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function bE(n,e){const t=e.startPTS;if(Mt(t)){let i=0,s;e.sn>n.sn?(i=t-n.start,s=n):(i=n.start-t,s=e),s.duration!==i&&(s.duration=i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.start=n.start+(n.minEndPTS-n.start):e.start=n.start+n.duration:e.start=Math.max(n.start-e.duration,0)}function Hj(n,e,t,i,s,r){i-t<=0&&(Ve.warn("Fragment should have a positive duration",e),i=t+e.duration,r=s+e.duration);let a=t,l=i;const c=e.startPTS,d=e.endPTS;if(Mt(c)){const b=Math.abs(c-t);Mt(e.deltaPTS)?e.deltaPTS=Math.max(b,e.deltaPTS):e.deltaPTS=b,a=Math.max(t,c),t=Math.min(t,c),s=Math.min(s,e.startDTS),l=Math.min(i,d),i=Math.max(i,d),r=Math.max(r,e.endDTS)}const u=t-e.start;e.start!==0&&(e.start=t),e.duration=i-e.start,e.startPTS=t,e.maxStartPTS=a,e.startDTS=s,e.endPTS=i,e.minEndPTS=l,e.endDTS=r;const h=e.sn;if(!n||h<n.startSN||h>n.endSN)return 0;let f;const m=h-n.startSN,g=n.fragments;for(g[m]=e,f=m;f>0;f--)bE(g[f],g[f-1]);for(f=m;f<g.length-1;f++)bE(g[f],g[f+1]);return n.fragmentHint&&bE(g[g.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,u}function Ent(n,e){let t=null;const i=n.fragments;for(let l=i.length-1;l>=0;l--){const c=i[l].initSegment;if(c){t=c;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let s=0,r;if(Snt(n,e,(l,c)=>{l.relurl&&(s=l.cc-c.cc),Mt(l.startPTS)&&Mt(l.endPTS)&&(c.start=c.startPTS=l.startPTS,c.startDTS=l.startDTS,c.maxStartPTS=l.maxStartPTS,c.endPTS=l.endPTS,c.endDTS=l.endDTS,c.minEndPTS=l.minEndPTS,c.duration=l.endPTS-l.startPTS,c.duration&&(r=c),e.PTSKnown=e.alignedSliding=!0),c.elementaryStreams=l.elementaryStreams,c.loader=l.loader,c.stats=l.stats,l.initSegment&&(c.initSegment=l.initSegment,t=l.initSegment)}),t&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(c=>{var d;c&&(!c.initSegment||c.initSegment.relurl===((d=t)==null?void 0:d.relurl))&&(c.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){Ve.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=Tnt(n.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const o=e.fragments;if(s){Ve.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<o.length;l++)o[l].cc+=s}e.skippedSegments&&(e.startCC=e.fragments[0].cc),Cnt(n.partList,e.partList,(l,c)=>{c.elementaryStreams=l.elementaryStreams,c.stats=l.stats}),r?Hj(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):jj(n,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const l=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=l),e.driftEndTime=a,e.driftEnd=l}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime}function Tnt(n,e,t){const i=Is({},n);return t&&t.forEach(s=>{delete i[s]}),Object.keys(e).forEach(s=>{const r=new Cj(e[s].attr,i[s]);r.isValid?i[s]=r:Ve.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'.concat(JSON.stringify(e[s].attr),'"'))}),i}function Cnt(n,e,t){if(n&&e){let i=0;for(let s=0,r=n.length;s<=r;s++){const o=n[s],a=e[s+i];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?t(o,a):i--}}}function Snt(n,e,t){const i=e.skippedSegments,s=Math.max(n.startSN,e.startSN)-e.startSN,r=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,o=e.startSN-n.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let c=s;c<=r;c++){const d=l[o+c];let u=a[c];i&&!u&&c<i&&(u=e.fragments[c]=d),d&&u&&t(d,u)}}function jj(n,e){const t=e.startSN+e.skippedSegments-n.startSN,i=n.fragments;t<0||t>=i.length||dS(e,i[t].start)}function dS(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].start+=e;n.fragmentHint&&(n.fragmentHint.start+=e)}}function Ant(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const r=i[i.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function Int(n,e,t){if(!(n!=null&&n.details))return null;const i=n.details;let s=i.fragments[e-i.startSN];return s||(s=i.fragmentHint,s&&s.sn===e)?s:e<i.startSN&&t&&t.sn===e?t:null}function TD(n,e,t){var i;return n!=null&&n.details?Gj((i=n.details)==null?void 0:i.partList,e,t):null}function Gj(n,e,t){if(n)for(let i=n.length;i--;){const s=n[i];if(s.index===t&&s.fragment.sn===e)return s}return null}function Wj(n){n.forEach((e,t)=>{const{details:i}=e;i!=null&&i.fragments&&i.fragments.forEach(s=>{s.level=t})})}function Pw(n){switch(n.details){case Xe.FRAG_LOAD_TIMEOUT:case Xe.KEY_LOAD_TIMEOUT:case Xe.LEVEL_LOAD_TIMEOUT:case Xe.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function CD(n,e){const t=Pw(e);return n.default["".concat(t?"timeout":"error","Retry")]}function p5(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function SD(n){return Xs(Xs({},n),{errorRetry:null,timeoutRetry:null})}function Rw(n,e,t,i){if(!n)return!1;const s=i==null?void 0:i.code,r=e<n.maxNumRetry&&(Pnt(s)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,r):r}function Pnt(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}const qj={search:function(n,e){let t=0,i=n.length-1,s=null,r=null;for(;t<=i;){s=(t+i)/2|0,r=n[s];const o=e(r);if(o>0)t=s+1;else if(o<0)i=s-1;else return r}return null}};function Rnt(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Mt(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const s=n[n.length-1].endProgramDateTime;if(e>=(s||0))return null;t=t||0;for(let r=0;r<n.length;++r){const o=n[r];if(Lnt(e,t,o))return o}return null}function $w(n,e,t=0,i=0,s=.005){let r=null;if(n){r=e[n.sn-e[0].sn+1]||null;const a=n.endDTS-t;a>0&&a<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(r=e[0]);if(r&&((!n||n.level===r.level)&&uS(t,i,r)===0||$nt(r,n,Math.min(s,i))))return r;const o=qj.search(e,uS.bind(null,t,i));return o&&(o!==n||!r)?o:r}function $nt(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((s,r)=>(r[0]==="INF"&&(s+=parseFloat(r[1])),s),t);return n.start<=i}return!1}function uS(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function Lnt(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function Ont(n,e){return qj.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}var er={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ca={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class Dnt{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=Ve.log.bind(Ve,"[info]:"),this.warn=Ve.warn.bind(Ve,"[warning]:"),this.error=Ve.error.bind(Ve,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(W.ERROR,this.onError,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(W.ERROR,this.onError,this),e.off(W.ERROR,this.onErrorOut,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===sn.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i,s;if(t.fatal)return;const r=this.hls,o=t.context;switch(t.details){case Xe.FRAG_LOAD_ERROR:case Xe.FRAG_LOAD_TIMEOUT:case Xe.KEY_LOAD_ERROR:case Xe.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Xe.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction={action:er.DoNothing,flags:ca.None};return}case Xe.FRAG_GAP:case Xe.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=er.SendAlternateToPenaltyBox;return}case Xe.LEVEL_EMPTY_ERROR:case Xe.LEVEL_PARSING_ERROR:{var a,l;const c=t.parent===sn.MAIN?t.level:r.loadLevel;t.details===Xe.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(l=a.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case Xe.LEVEL_LOAD_ERROR:case Xe.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case Xe.AUDIO_TRACK_LOAD_ERROR:case Xe.AUDIO_TRACK_LOAD_TIMEOUT:case Xe.SUBTITLE_LOAD_ERROR:case Xe.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=r.levels[r.loadLevel];if(c&&(o.type===Yn.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===Yn.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=er.SendAlternateToPenaltyBox,t.errorAction.flags=ca.MoveAllAlternatesMatchingHost;return}}return;case Xe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=r.levels[r.loadLevel],d=c==null?void 0:c.attrs["HDCP-LEVEL"];d?t.errorAction={action:er.SendAlternateToPenaltyBox,flags:ca.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(t)}return;case Xe.BUFFER_ADD_CODEC_ERROR:case Xe.REMUX_ALLOC_ERROR:case Xe.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(s=t.level)!=null?s:r.loadLevel);return;case Xe.INTERNAL_EXCEPTION:case Xe.BUFFER_APPENDING_ERROR:case Xe.BUFFER_FULL_ERROR:case Xe.LEVEL_SWITCH_ERROR:case Xe.BUFFER_STALLED_ERROR:case Xe.BUFFER_SEEK_OVER_HOLE:case Xe.BUFFER_NUDGE_ON_STALL:t.errorAction={action:er.DoNothing,flags:ca.None};return}t.type===fn.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,s=CD(i.config.playlistLoadPolicy,e),r=this.playlistError++;if(Rw(s,r,Pw(e),e.response))return{action:er.RetryRequest,flags:ca.None,retryConfig:s,retryCount:r};const a=this.getLevelSwitchAction(e,t);return s&&(a.retryConfig=s,a.retryCount=r),a}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:o}=t.config,a=CD(e.details.startsWith("key")?o:r,e),l=t.levels.reduce((d,u)=>d+u.fragmentError,0);if(s&&(e.details!==Xe.FRAG_GAP&&s.fragmentError++,Rw(a,l,Pw(e),e.response)))return{action:er.RetryRequest,flags:ca.None,retryConfig:a,retryCount:l};const c=this.getLevelSwitchAction(e,i);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const s=this.hls.levels[t];if(s){var r,o;const c=e.details;s.loadError++,c===Xe.BUFFER_APPEND_ERROR&&s.fragmentError++;let d=-1;const{levels:u,loadLevel:h,minAutoLevel:f,maxAutoLevel:m}=i;i.autoLevelEnabled||(i.loadLevel=-1);const g=(r=e.frag)==null?void 0:r.type,w=(g===sn.AUDIO&&c===Xe.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===Xe.BUFFER_ADD_CODEC_ERROR||c===Xe.BUFFER_APPEND_ERROR))&&u.some(({audioCodec:P})=>s.audioCodec!==P),k=e.sourceBufferName==="video"&&(c===Xe.BUFFER_ADD_CODEC_ERROR||c===Xe.BUFFER_APPEND_ERROR)&&u.some(({codecSet:P,audioCodec:C})=>s.codecSet!==P&&s.audioCodec===C),{type:E,groupId:T}=(o=e.context)!=null?o:{};for(let P=u.length;P--;){const C=(P+h)%u.length;if(C!==h&&C>=f&&C<=m&&u[C].loadError===0){var a,l;const A=u[C];if(c===Xe.FRAG_GAP&&g===sn.MAIN&&e.frag){const R=u[C].details;if(R){const M=$w(e.frag,R.fragments,e.frag.start);if(M!=null&&M.gap)continue}}else{if(E===Yn.AUDIO_TRACK&&A.hasAudioGroup(T)||E===Yn.SUBTITLE_TRACK&&A.hasSubtitleGroup(T))continue;if(g===sn.AUDIO&&(a=s.audioGroups)!=null&&a.some(R=>A.hasAudioGroup(R))||g===sn.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(R=>A.hasSubtitleGroup(R))||w&&s.audioCodec===A.audioCodec||!w&&s.audioCodec!==A.audioCodec||k&&s.codecSet===A.codecSet)continue}d=C;break}}if(d>-1&&i.loadLevel!==d)return e.levelRetry=!0,this.playlistError=0,{action:er.SendAlternateToPenaltyBox,flags:ca.None,nextAutoLevel:d}}return{action:er.SendAlternateToPenaltyBox,flags:ca.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case er.DoNothing:break;case er.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Xe.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn('MediaSource ended after "'.concat(t.sourceBufferName,'" sourceBuffer append error. Attempting to recover from media error.')),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s,hdcpLevel:r,nextAutoLevel:o}=i;switch(s){case ca.None:this.switchLevel(e,o);break;case ca.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=cS[cS.indexOf(r)-1],i.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'.concat(t.maxHdcpLevel,'" or lower'));break}i.resolved||this.switchLevel(e,o)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn("switching to level ".concat(t," after ").concat(e.details)),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class m5{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Ve.log.bind(Ve,"".concat(t,":")),this.warn=Ve.warn.bind(Ve,"".concat(t,":")),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=t==null?void 0:t.renditionReports;if(s){let r=-1;for(let o=0;o<s.length;o++){const a=s[o];let l;try{l=new self.URL(a.URI,t.url).href}catch(c){Ve.warn("Could not construct new URL for Rendition Report: ".concat(c)),l=a.URI||""}if(l===e){r=o;break}else l===e.substring(0,l.length)&&(r=o)}if(r!==-1){const o=s[r],a=parseInt(o["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let l=parseInt(o["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const d=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&d>t.partTarget&&(l+=1)}const c=i&&_D(i);return new kD(a,l>=0?l:void 0,c)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,i){const{details:s,stats:r}=t,o=self.performance.now(),a=r.loading.first?Math.max(0,o-r.loading.first):0;if(s.advancedDateTime=Date.now()-a,s.live||i!=null&&i.live){if(s.reloaded(i),i&&this.log("live playlist ".concat(e," ").concat(s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED")),i&&s.fragments.length>0&&Ent(i,s),!this.canLoad||!s.live)return;let l,c,d;if(s.canBlockReload&&s.endSN&&s.advanced){const b=this.hls.config.lowLatencyMode,w=s.lastPartSn,x=s.endSN,k=s.lastPartIndex,E=k!==-1,T=w===x,P=b?0:k;E?(c=T?x+1:w,d=T?P:k+1):c=x+1;const C=s.age,A=C+s.ageHeader;let R=Math.min(A-s.partTarget,s.targetduration*1.5);if(R>0){if(i&&R>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: ".concat(i.tuneInGoal," to: ").concat(R," with playlist age: ").concat(s.age)),R=0;else{const M=Math.floor(R/s.targetduration);if(c+=M,d!==void 0){const N=Math.round(R%s.targetduration/s.partTarget);d+=N}this.log("CDN Tune-in age: ".concat(s.ageHeader,"s last advanced ").concat(C.toFixed(2),"s goal: ").concat(R," skip sn ").concat(M," to part ").concat(d))}s.tuneInGoal=R}if(l=this.getDeliveryDirectives(s,t.deliveryDirectives,c,d),b||!T){this.loadPlaylist(l);return}}else(s.canBlockReload||s.canSkipUntil)&&(l=this.getDeliveryDirectives(s,t.deliveryDirectives,c,d));const u=this.hls.mainForwardBufferInfo,h=u?u.end-u.len:0,f=(s.edge-h)*1e3,m=Ant(s,f);s.updated&&o>this.requestScheduled+m&&(this.requestScheduled=r.loading.start),c!==void 0&&s.canBlockReload?this.requestScheduled=r.loading.first+m-(s.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+m<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=m);let g=this.requestScheduled-o;g=Math.max(0,g),this.log("reload live playlist ".concat(e," in ").concat(Math.round(g)," ms")),this.timer=self.setTimeout(()=>this.loadPlaylist(l),g)}else this.clearTimer()}getDeliveryDirectives(e,t,i,s){let r=_D(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,r=ny.No),new kD(i,s,r)}checkRetry(e){const t=e.details,i=Pw(e),s=e.errorAction,{action:r,retryCount:o=0,retryConfig:a}=s||{},l=!!s&&!!a&&(r===er.RetryRequest||!s.resolved&&r===er.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn("Retrying playlist loading ".concat(o+1,"/").concat(a.maxNumRetry,' after "').concat(t,'" without delivery-directives')),this.loadPlaylist();else{const d=p5(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),d),this.warn("Retrying playlist loading ".concat(o+1,"/").concat(a.maxNumRetry,' after "').concat(t,'" in ').concat(d,"ms"))}e.levelRetry=!0,s.resolved=!0}return l}}class ff{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Mnt{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ff(e),this.fast_=new ff(t),this.defaultTTFB_=s,this.ttfb_=new ff(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new ff(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new ff(t,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new ff(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,s=e/1e3,r=i/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Kj={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},AD={};function Nnt(n,e,t,i,s,r){const o=n.audioCodec?n.audioGroups:null,a=r==null?void 0:r.audioCodec,l=r==null?void 0:r.channels,c=l?parseInt(l):a?1/0:2;let d=null;if(o!=null&&o.length)try{o.length===1&&o[0]?d=e.groups[o[0]].channels:d=o.reduce((u,h)=>{if(h){const f=e.groups[h];if(!f)throw new Error("Audio track group ".concat(h," not found"));Object.keys(f.channels).forEach(m=>{u[m]=(u[m]||0)+f.channels[m]})}return u},{2:0})}catch(u){return!0}return n.videoCodec!==void 0&&(n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(s,8e6))||!!d&&Mt(c)&&Object.keys(d).some(u=>parseInt(u)>c)}function Fnt(n,e,t){const i=n.videoCodec,s=n.audioCodec;if(!i||!s||!t)return Promise.resolve(Kj);const r={width:n.width,height:n.height,bitrate:Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)),framerate:n.frameRate||30},o=n.videoRange;o!=="SDR"&&(r.transferFunction=o.toLowerCase());const a=i.split(",").map(l=>({type:"media-source",video:Xs(Xs({},r),{},{contentType:V0(l,"video")})}));return s&&n.audioGroups&&n.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(d=>{if(d.groupId===l){const u=d.channels||"",h=parseFloat(u);Mt(h)&&h>2&&a.push.apply(a,s.split(",").map(f=>({type:"media-source",audio:{contentType:V0(f,"audio"),channels:""+h}})))}}))}),Promise.all(a.map(l=>{const c=Bnt(l);return AD[c]||(AD[c]=t.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function Bnt(n){const{audio:e,video:t}=n,i=t||e;if(i){const s=i.contentType.split('"')[1];if(t)return"r".concat(t.height,"x").concat(t.width,"f").concat(Math.ceil(t.framerate)).concat(t.transferFunction||"sd","_").concat(s,"_").concat(Math.ceil(t.bitrate/1e5));if(e)return"c".concat(e.channels).concat(e.spatialRendering?"s":"n","_").concat(s)}return""}function Vnt(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function Unt(n,e){let t=!1,i=[];return n&&(t=n!=="SDR",i=[n]),e&&(i=e.allowedVideoRanges||Iw.slice(0),t=e.preferHDR!==void 0?e.preferHDR:Vnt(),t?i=i.filter(s=>s!=="SDR"):i=["SDR"]),{preferHDR:t,allowedVideoRanges:i}}function znt(n,e,t,i,s){const r=Object.keys(n),o=i==null?void 0:i.channels,a=i==null?void 0:i.audioCodec,l=o&&parseInt(o)===2;let c=!0,d=!1,u=1/0,h=1/0,f=1/0,m=0,g=[];const{preferHDR:b,allowedVideoRanges:w}=Unt(e,s);for(let T=r.length;T--;){const P=n[r[T]];c=P.channels[2]>0,u=Math.min(u,P.minHeight),h=Math.min(h,P.minFramerate),f=Math.min(f,P.minBitrate);const C=w.filter(A=>P.videoRanges[A]>0);C.length>0&&(d=!0,g=C)}u=Mt(u)?u:0,h=Mt(h)?h:0;const x=Math.max(1080,u),k=Math.max(30,h);return f=Mt(f)?f:t,t=Math.max(f,t),d||(e=void 0,g=[]),{codecSet:r.reduce((T,P)=>{const C=n[P];if(P===T)return T;if(C.minBitrate>t)return Zl(P,"min bitrate of ".concat(C.minBitrate," > current estimate of ").concat(t)),T;if(!C.hasDefaultAudio)return Zl(P,"no renditions with default or auto-select sound found"),T;if(a&&P.indexOf(a.substring(0,4))%5!==0)return Zl(P,'audio codec preference "'.concat(a,'" not found')),T;if(o&&!l){if(!C.channels[o])return Zl(P,"no renditions with ".concat(o," channel sound found (channels options: ").concat(Object.keys(C.channels),")")),T}else if((!a||l)&&c&&C.channels[2]===0)return Zl(P,"no renditions with stereo sound found"),T;return C.minHeight>x?(Zl(P,"min resolution of ".concat(C.minHeight," > maximum of ").concat(x)),T):C.minFramerate>k?(Zl(P,"min framerate of ".concat(C.minFramerate," > maximum of ").concat(k)),T):g.some(A=>C.videoRanges[A]>0)?C.maxScore<m?(Zl(P,"max score of ".concat(C.maxScore," < selected max of ").concat(m)),T):T&&(Sw(P)>=Sw(T)||C.fragmentError>n[T].fragmentError)?T:(m=C.maxScore,P):(Zl(P,"no variants with VIDEO-RANGE of ".concat(JSON.stringify(g)," found")),T)},void 0),videoRanges:g,preferHDR:b,minFramerate:h,minBitrate:f}}function Zl(n,e){Ve.log('[abr] start candidates with "'.concat(n,'" ignored because ').concat(e))}function Hnt(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function jnt(n,e,t,i){return n.slice(t,i+1).reduce((s,r)=>{if(!r.codecSet)return s;const o=r.audioGroups;let a=s[r.codecSet];a||(s[r.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,r.bitrate);const l=Math.min(r.height,r.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,r.frameRate),a.maxScore=Math.max(a.maxScore,r.score),a.fragmentError+=r.fragmentError,a.videoRanges[r.videoRange]=(a.videoRanges[r.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;const d=e.groups[c];d&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(u=>{a.channels[u]=(a.channels[u]||0)+d.channels[u]}))}),s},{})}function wl(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const s=e[i];if(Kf(n,s,t))return i}return-1}function Kf(n,e,t){const{groupId:i,name:s,lang:r,assocLang:o,characteristics:a,default:l}=n,c=n.forced;return(i===void 0||e.groupId===i)&&(s===void 0||e.name===s)&&(r===void 0||e.lang===r)&&(r===void 0||e.assocLang===o)&&(l===void 0||e.default===l)&&(c===void 0||e.forced===c)&&(a===void 0||Gnt(a,e.characteristics))&&(t===void 0||t(n,e))}function Gnt(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(s=>i.indexOf(s)===-1)}function pf(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function Wnt(n,e,t,i,s){const r=e[i],a=e.reduce((h,f,m)=>{const g=f.uri;return(h[g]||(h[g]=[])).push(m),h},{})[r.uri];a.length>1&&(i=Math.max.apply(Math,a));const l=r.videoRange,c=r.frameRate,d=r.codecSet.substring(0,4),u=ID(e,i,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==d)return!1;const f=h.audioGroups,m=t.filter(g=>!f||f.indexOf(g.groupId)!==-1);return wl(n,m,s)>-1});return u>-1?u:ID(e,i,h=>{const f=h.audioGroups,m=t.filter(g=>!f||f.indexOf(g.groupId)!==-1);return wl(n,m,s)>-1})}function ID(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}class qnt{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:i,hls:s}=this,{autoLevelEnabled:r,media:o}=s;if(!t||!o)return;const a=performance.now(),l=i?i.stats:t.stats,c=i?i.duration:t.duration,d=a-l.loading.start,u=s.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||t.level<=u){this.clearTimer(),this._nextAutoLevel=-1;return}if(!r||o.paused||!o.playbackRate||!o.readyState)return;const h=s.mainForwardBufferInfo;if(h===null)return;const f=this.bwEstimator.getEstimateTTFB(),m=Math.abs(o.playbackRate);if(d<=Math.max(f,1e3*(c/(m*2))))return;const g=h.len/m,b=l.loading.first?l.loading.first-l.loading.start:-1,w=l.loaded&&b>-1,x=this.getBwEstimate(),k=s.levels,E=k[t.level],T=l.total||Math.max(l.loaded,Math.round(c*E.averageBitrate/8));let P=w?d-b:d;P<1&&w&&(P=Math.min(d,l.loaded*8/x));const C=w?l.loaded*1e3/P:0,A=C?(T-l.loaded)/C:T*8/x+f/1e3;if(A<=g)return;const R=C?C*8:x;let M=Number.POSITIVE_INFINITY,N;for(N=t.level-1;N>u;N--){const G=k[N].maxBitrate;if(M=this.getTimeToLoadFrag(f/1e3,R,c*G,!k[N].details),M<g)break}if(M>=A||M>c*10)return;s.nextLoadLevel=s.nextAutoLevel=N,w?this.bwEstimator.sample(d-Math.min(f,b),l.loaded):this.bwEstimator.sampleTTFB(d);const U=k[N].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>U&&this.resetEstimator(U),this.clearTimer(),Ve.warn("[abr] Fragment ".concat(t.sn).concat(i?" part "+i.index:""," of level ").concat(t.level," is loading too slowly;\n      Time to underbuffer: ").concat(g.toFixed(3)," s\n      Estimated load time for current fragment: ").concat(A.toFixed(3)," s\n      Estimated load time for down switch fragment: ").concat(M.toFixed(3)," s\n      TTFB estimate: ").concat(b|0," ms\n      Current BW estimate: ").concat(Mt(x)?x|0:"Unknown"," bps\n      New BW estimate: ").concat(this.getBwEstimate()|0," bps\n      Switching to level ").concat(N," @ ").concat(U|0," bps")),s.trigger(W.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:i,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(Ve.log("setting initial bwe to ".concat(e)),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Mnt(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.FRAG_LOADING,this.onFragLoading,this),e.on(W.FRAG_LOADED,this.onFragLoaded,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this),e.on(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.FRAG_LOADING,this.onFragLoading,this),e.off(W.FRAG_LOADED,this.onFragLoaded,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this),e.off(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(W.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var s;this.fragCurrent=i,this.partCurrent=(s=t.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Xe.BUFFER_ADD_CODEC_ERROR:case Xe.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Xe.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:s,partCurrent:r}=this;if(i&&s&&i.sn===s.sn&&i.level===s.level){const o=performance.now(),a=r?r.stats:i.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){const u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(u,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,i,s){const r=e+i/t,o=s?this.lastLevelLoadSec:0;return r+o}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,r=s.end-s.start;Mt(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===sn.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=i?i.duration:t.duration,o=this.hls.levels[t.level],a=(o.loaded?o.loaded.bytes:0)+s.loaded,l=(o.loaded?o.loaded.duration:0)+r;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(t.bitrateTest){const r={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(W.FRAG_BUFFERED,r),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,r=s!=null&&s.stats.loaded?s.stats:i.stats;if(r.aborted||this.ignoreFragment(i))return;const o=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==sn.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,t,e,0,s,1,1);if(r>-1)return r;const o=this.hls.firstLevel,a=Math.min(Math.max(o,t),e);return Ve.warn("[abr] Could not find best starting auto level. Defaulting to first in playlist ".concat(o," clamped to ").concat(a)),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,r)&&o[e].loadError<=o[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return"".concat(this.getBwEstimate(),"_").concat(this.getStarvationDelay().toFixed(2))}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this,{maxAutoLevel:s,config:r,minAutoLevel:o}=i,a=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let d=r.abrBandWidthFactor,u=r.abrBandWidthUpFactor;if(c){const b=this.findBestLevel(l,o,s,c,0,d,u);if(b>=0)return b}let h=a?Math.min(a,r.maxStarvationDelay):r.maxStarvationDelay;if(!c){const b=this.bitrateTestDelay;b&&(h=(a?Math.min(a,r.maxLoadingDelay):r.maxLoadingDelay)-b,Ve.info("[abr] bitrate test took ".concat(Math.round(1e3*b),"ms, set first fragment max fetchDuration to ").concat(Math.round(1e3*h)," ms")),d=u=1)}const f=this.findBestLevel(l,o,s,c,h,d,u);if(Ve.info("[abr] ".concat(c?"rebuffering expected":"buffer is empty",", optimal quality level ").concat(f)),f>-1)return f;const m=i.levels[o],g=i.levels[i.loadLevel];return(m==null?void 0:m.bitrate)<(g==null?void 0:g.bitrate)?o:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,r,o,a){var l;const c=s+r,d=this.lastLoadedFragLevel,u=d===-1?this.hls.firstLevel:d,{fragCurrent:h,partCurrent:f}=this,{levels:m,allAudioTracks:g,loadLevel:b,config:w}=this.hls;if(m.length===1)return 0;const x=m[u],k=!!(x!=null&&(l=x.details)!=null&&l.live),E=b===-1||d===-1;let T,P="SDR",C=(x==null?void 0:x.frameRate)||0;const{audioPreference:A,videoPreference:R}=w,M=this.audioTracksByGroup||(this.audioTracksByGroup=Hnt(g));if(E){if(this.firstSelection!==-1)return this.firstSelection;const te=this.codecTiers||(this.codecTiers=jnt(m,M,t,i)),X=znt(te,P,e,A,R),{codecSet:ue,videoRanges:he,minFramerate:Ie,minBitrate:xe,preferHDR:Be}=X;T=ue,P=Be?he[he.length-1]:he[0],C=Ie,e=Math.max(e,xe),Ve.log("[abr] picked start tier ".concat(JSON.stringify(X)))}else T=x==null?void 0:x.codecSet,P=x==null?void 0:x.videoRange;const N=f?f.duration:h?h.duration:0,U=this.bwEstimator.getEstimateTTFB()/1e3,G=[];for(let te=i;te>=t;te--){var B;const X=m[te],ue=te>u;if(!X)continue;if(w.useMediaCapabilities&&!X.supportedResult&&!X.supportedPromise){const de=navigator.mediaCapabilities;typeof(de==null?void 0:de.decodingInfo)=="function"&&Nnt(X,M,P,C,e,A)?(X.supportedPromise=Fnt(X,M,de),X.supportedPromise.then(we=>{if(!this.hls)return;X.supportedResult=we;const ze=this.hls.levels,le=ze.indexOf(X);we.error?Ve.warn('[abr] MediaCapabilities decodingInfo error: "'.concat(we.error,'" for level ').concat(le," ").concat(JSON.stringify(we))):we.supported||(Ve.warn("[abr] Unsupported MediaCapabilities decodingInfo result for level ".concat(le," ").concat(JSON.stringify(we))),le>-1&&ze.length>1&&(Ve.log("[abr] Removing unsupported level ".concat(le)),this.hls.removeLevel(le)))})):X.supportedResult=Kj}if(T&&X.codecSet!==T||P&&X.videoRange!==P||ue&&C>X.frameRate||!ue&&C>0&&C<X.frameRate||X.supportedResult&&!((B=X.supportedResult.decodingInfoResults)!=null&&B[0].smooth)){G.push(te);continue}const he=X.details,Ie=(f?he==null?void 0:he.partTarget:he==null?void 0:he.averagetargetduration)||N;let xe;ue?xe=a*e:xe=o*e;const Be=N&&s>=N*2&&r===0?m[te].averageBitrate:m[te].maxBitrate,Pe=this.getTimeToLoadFrag(U,xe,Be*Ie,he===void 0);if(xe>=Be&&(te===d||X.loadError===0&&X.fragmentError===0)&&(Pe<=U||!Mt(Pe)||k&&!this.bitrateTestDelay||Pe<c)){const de=this.forcedAutoLevel;return te!==b&&(de===-1||de!==b)&&(G.length&&Ve.trace("[abr] Skipped level(s) ".concat(G.join(",")," of ").concat(i,' max with CODECS and VIDEO-RANGE:"').concat(m[G[0]].codecs,'" ').concat(m[G[0]].videoRange,'; not compatible with "').concat(x.codecs,'" ').concat(P)),Ve.info("[abr] switch candidate:".concat(u,"->").concat(te," adjustedbw(").concat(Math.round(xe),")-bitrate=").concat(Math.round(xe-Be)," ttfb:").concat(U.toFixed(1)," avgDuration:").concat(Ie.toFixed(1)," maxFetchDuration:").concat(c.toFixed(1)," fetchDuration:").concat(Pe.toFixed(1)," firstSelection:").concat(E," codecSet:").concat(T," videoRange:").concat(P," hls.loadLevel:").concat(b))),E&&(this.firstSelection=te),te}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls,s=Math.min(Math.max(e,i),t);this._nextAutoLevel!==s&&(this.nextAutoLevelKey="",this._nextAutoLevel=s)}}class Knt{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Ws={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Ynt{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(W.BUFFER_APPENDED,this.onBufferAppended,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this),e.on(W.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.BUFFER_APPENDED,this.onBufferAppended,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this),e.off(W.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let s=i.length;s--;){const r=i[s];if(!r)break;const o=r.end;if(r.start<=e&&o!==null&&e<=o)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:i}=this,s=Object.keys(i);for(let r=s.length;r--;){const o=i[s[r]];if((o==null?void 0:o.body.type)===t&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,t,i,s){this.timeRanges&&(this.timeRanges[e]=t);const r=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||r>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===i&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(c=>{const d=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return d&&this.removeFragment(a.body),d})})}detectPartialFragments(e){const t=this.timeRanges,{frag:i,part:s}=e;if(!t||i.sn==="initSegment")return;const r=mf(i),o=this.fragments[r];if(!o||o.buffered&&i.gap)return;const a=!i.relurl;Object.keys(t).forEach(l=>{const c=i.elementaryStreams[l];if(!c)return;const d=t[l],u=a||c.partial===!0;o.range[l]=this.getBufferedTimes(i,s,u,d)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=i.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),bv(o)||this.removeParts(i.sn-1,i.type)):this.removeFragment(o.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter(s=>s.fragment.sn>=e))}fragBuffered(e,t){const i=mf(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,i,s){const r={time:[],partial:i},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let d=0;d<s.length;d++){const u=s.start(d)-this.bufferPadding,h=s.end(d)+this.bufferPadding;if(c>=u&&l<=h){r.time.push({startPTS:Math.max(o,s.start(d)),endPTS:Math.min(a,s.end(d))});break}else if(o<h&&a>u){const f=Math.max(o,s.start(d)),m=Math.min(a,s.end(d));m>f&&(r.partial=!0,r.time.push({startPTS:f,endPTS:m}))}else if(a<=u)break}return r}getPartialFragment(e){let t=null,i,s,r,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const d=l[c];d&&bv(d)&&(s=d.body.start-a,r=d.body.end+a,e>=s&&e<=r&&(i=Math.min(e-s,r-e),o<=i&&(t=d.body,o=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||bv(t))}getState(e){const t=mf(e),i=this.fragments[t];return i?i.buffered?bv(i)?Ws.PARTIAL:Ws.OK:Ws.APPENDING:Ws.NOT_LOADED}isTimeBuffered(e,t,i){let s,r;for(let o=0;o<i.length;o++){if(s=i.start(o)-this.bufferPadding,r=i.end(o)+this.bufferPadding,e>=s&&t<=r)return!0;if(t<=s)return!1}return!1}onFragLoaded(e,t){const{frag:i,part:s}=t;if(i.sn==="initSegment"||i.bitrateTest)return;const r=s?null:t,o=mf(i);this.fragments[o]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:r}=t;if(i.sn==="initSegment")return;const o=i.type;if(s){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(s)}this.timeRanges=r,Object.keys(r).forEach(a=>{const l=r[a];this.detectEvictedFragments(a,l,o,s)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=mf(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==i||s&&!l.gap||l.start<t&&l.end>e&&(a.buffered||r)&&this.removeFragment(l)})}removeFragment(e){const t=mf(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const s=e.sn;this.activePartLists[e.type]=i.filter(r=>r.fragment.sn!==s)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function bv(n){var e,t,i;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((i=n.range.audiovideo)==null?void 0:i.partial))}function mf(n){return"".concat(n.type,"_").concat(n.level,"_").concat(n.sn)}const Xnt={length:0,start:()=>0,end:()=>0};class zi{static isBuffered(e,t){try{if(e){const i=zi.getBuffered(e);for(let s=0;s<i.length;s++)if(t>=i.start(s)&&t<=i.end(s))return!0}}catch(i){}return!1}static bufferInfo(e,t,i){try{if(e){const s=zi.getBuffered(e),r=[];let o;for(o=0;o<s.length;o++)r.push({start:s.start(o),end:s.end(o)});return this.bufferedInfo(r,t,i)}}catch(s){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.sort(function(c,d){const u=c.start-d.start;return u||d.end-c.end});let s=[];if(i)for(let c=0;c<e.length;c++){const d=s.length;if(d){const u=s[d-1].end;e[c].start-u<i?e[c].end>u&&(s[d-1].end=e[c].end):s.push(e[c])}else s.push(e[c])}else s=e;let r=0,o,a=t,l=t;for(let c=0;c<s.length;c++){const d=s[c].start,u=s[c].end;if(t+i>=d&&t<u)a=d,l=u,r=l-t;else if(t+i<d){o=d;break}}return{len:r,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(t){return Ve.log("failed to get media.buffered",t),Xnt}}}class g5{constructor(e,t,i,s=0,r=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=vv(),this.buffering={audio:vv(),video:vv(),audiovideo:vv()},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=r,this.partial=o}}function vv(){return{start:0,executeStart:0,executeEnd:0,end:0}}function iy(n,e){for(let i=0,s=n.length;i<s;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function Qnt(n,e,t){return!!(e&&(t.endCC>t.startCC||n&&n.cc<t.startCC))}function Znt(n,e){const t=n.fragments,i=e.fragments;if(!i.length||!t.length){Ve.log("No fragments to align");return}const s=iy(t,i[0].cc);if(!s||s&&!s.startPTS){Ve.log("No frag in previous level to align on");return}return s}function PD(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function Yj(n,e){const t=e.fragments;for(let i=0,s=t.length;i<s;i++)PD(t[i],n);e.fragmentHint&&PD(e.fragmentHint,n),e.alignedSliding=!0}function Jnt(n,e,t){e&&(eit(n,t,e),!t.alignedSliding&&e&&Lw(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&jj(e,t))}function eit(n,e,t){if(Qnt(n,t,e)){const i=Znt(t,e);i&&Mt(i.start)&&(Ve.log("Adjusting PTS using last level due to CC increase within current level ".concat(e.url)),Yj(i.start,e))}}function Lw(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let s,r;const o=Math.min(e.endCC,n.endCC);e.startCC<o&&n.startCC<o&&(s=iy(i,o),r=iy(t,o)),(!s||!r)&&(s=i[Math.floor(i.length/2)],r=iy(t,s.cc)||t[Math.floor(t.length/2)]);const a=s.programDateTime,l=r.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(r.start-s.start);Yj(c,n)}const RD=Math.pow(2,17);class tit{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new sc({type:fn.NETWORK_ERROR,details:Xe.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a ".concat(i?"part list":"url")),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(f=>f[0]==="GAP")){l(LD(e));return}else e.gap=!1;const c=this.loader=e.loader=r?new r(s):new o(s),d=$D(e),u=SD(s.fragLoadPolicy.default),h={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:RD};e.stats=c.stats,c.load(d,h,{onSuccess:(f,m,g,b)=>{this.resetLoader(e,c);let w=f.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(w.slice(0,16)),w=w.slice(16)),a({frag:e,part:null,payload:w,networkDetails:b})},onError:(f,m,g,b)=>{this.resetLoader(e,c),l(new sc({type:fn.NETWORK_ERROR,details:Xe.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Xs({url:i,data:void 0},f),error:new Error("HTTP Error ".concat(f.code," ").concat(f.text)),networkDetails:g,stats:b}))},onAbort:(f,m,g)=>{this.resetLoader(e,c),l(new sc({type:fn.NETWORK_ERROR,details:Xe.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:f}))},onTimeout:(f,m,g)=>{this.resetLoader(e,c),l(new sc({type:fn.NETWORK_ERROR,details:Xe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after ".concat(h.timeout,"ms")),networkDetails:g,stats:f}))},onProgress:(f,m,g,b)=>{t&&t({frag:e,part:null,payload:g,networkDetails:b})}})})}loadPart(e,t,i){this.abort();const s=this.config,r=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(LD(e,t));return}const c=this.loader=e.loader=r?new r(s):new o(s),d=$D(e,t),u=SD(s.fragLoadPolicy.default),h={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:RD};t.stats=c.stats,c.load(d,h,{onSuccess:(f,m,g,b)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const w={frag:e,part:t,payload:f.data,networkDetails:b};i(w),a(w)},onError:(f,m,g,b)=>{this.resetLoader(e,c),l(new sc({type:fn.NETWORK_ERROR,details:Xe.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Xs({url:d.url,data:void 0},f),error:new Error("HTTP Error ".concat(f.code," ").concat(f.text)),networkDetails:g,stats:b}))},onAbort:(f,m,g)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new sc({type:fn.NETWORK_ERROR,details:Xe.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:g,stats:f}))},onTimeout:(f,m,g)=>{this.resetLoader(e,c),l(new sc({type:fn.NETWORK_ERROR,details:Xe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after ".concat(h.timeout,"ms")),networkDetails:g,stats:f}))}})})}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,r=s.total;if(i.loaded+=s.loaded,r){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(i.loaded/r),l),u=(l-c)*Math.round(i.loaded/c);i.total=i.loaded+u}else i.total=Math.max(i.loaded,i.total);const o=i.loading,a=s.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function $D(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(Mt(s)&&Mt(r)){var o;let a=s,l=r;if(n.sn==="initSegment"&&((o=n.decryptdata)==null?void 0:o.method)==="AES-128"){const c=r-s;c%16&&(l=r+(16-c%16)),s!==0&&(i.resetIV=!0,a=s-16)}i.rangeStart=a,i.rangeEnd=l}return i}function LD(n,e){const t=new Error("GAP ".concat(n.gap?"tag":"attribute"," found")),i={type:fn.MEDIA_ERROR,details:Xe.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new sc(i)}class sc extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class nit{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class iit{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function sit(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?oh(n,0,e-t):n}class rit{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=t.getUint32(s*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],r=i[1],o=i[2],a=i[3],l=this.invSubMix,c=l[0],d=l[1],u=l[2],h=l[3],f=new Uint32Array(256);let m=0,g=0,b=0;for(b=0;b<256;b++)b<128?f[b]=b<<1:f[b]=b<<1^283;for(b=0;b<256;b++){let w=g^g<<1^g<<2^g<<3^g<<4;w=w>>>8^w&255^99,e[m]=w,t[w]=m;const x=f[m],k=f[x],E=f[k];let T=f[w]*257^w*16843008;s[m]=T<<24|T>>>8,r[m]=T<<16|T>>>16,o[m]=T<<8|T>>>24,a[m]=T,T=E*16843009^k*65537^x*257^m*16843008,c[w]=T<<24|T>>>8,d[w]=T<<16|T>>>16,u[w]=T<<8|T>>>24,h[w]=T,m?(m=x^f[f[f[E^x]]],g^=f[f[g]]):m=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;for(;s<t.length&&i;)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const o=this.ksRows=(r+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),d=this.invKeySchedule=new Uint32Array(o),u=this.sBox,h=this.rcon,f=this.invSubMix,m=f[0],g=f[1],b=f[2],w=f[3];let x,k;for(a=0;a<o;a++){if(a<r){x=c[a]=t[a];continue}k=x,a%r===0?(k=k<<8|k>>>24,k=u[k>>>24]<<24|u[k>>>16&255]<<16|u[k>>>8&255]<<8|u[k&255],k^=h[a/r|0]<<24):r>6&&a%r===4&&(k=u[k>>>24]<<24|u[k>>>16&255]<<16|u[k>>>8&255]<<8|u[k&255]),c[a]=x=(c[a-r]^k)>>>0}for(l=0;l<o;l++)a=o-l,l&3?k=c[a]:k=c[a-4],l<4||a<=4?d[l]=k:d[l]=m[u[k>>>24]]^g[u[k>>>16&255]]^b[u[k>>>8&255]]^w[u[k&255]],d[l]=d[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,r=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],d=a[2],u=a[3],h=this.uint8ArrayToUint32Array_(i);let f=h[0],m=h[1],g=h[2],b=h[3];const w=new Int32Array(e),x=new Int32Array(w.length);let k,E,T,P,C,A,R,M,N,U,G,B,te,X;const ue=this.networkToHostOrderSwap;for(;t<w.length;){for(N=ue(w[t]),U=ue(w[t+1]),G=ue(w[t+2]),B=ue(w[t+3]),C=N^r[0],A=B^r[1],R=G^r[2],M=U^r[3],te=4,X=1;X<s;X++)k=l[C>>>24]^c[A>>16&255]^d[R>>8&255]^u[M&255]^r[te],E=l[A>>>24]^c[R>>16&255]^d[M>>8&255]^u[C&255]^r[te+1],T=l[R>>>24]^c[M>>16&255]^d[C>>8&255]^u[A&255]^r[te+2],P=l[M>>>24]^c[C>>16&255]^d[A>>8&255]^u[R&255]^r[te+3],C=k,A=E,R=T,M=P,te=te+4;k=o[C>>>24]<<24^o[A>>16&255]<<16^o[R>>8&255]<<8^o[M&255]^r[te],E=o[A>>>24]<<24^o[R>>16&255]<<16^o[M>>8&255]<<8^o[C&255]^r[te+1],T=o[R>>>24]<<24^o[M>>16&255]<<16^o[C>>8&255]<<8^o[A&255]^r[te+2],P=o[M>>>24]<<24^o[C>>16&255]<<16^o[A>>8&255]<<8^o[R&255]^r[te+3],x[t]=ue(k^f),x[t+1]=ue(P^m),x[t+2]=ue(T^g),x[t+3]=ue(E^b),f=N,m=U,g=G,b=B,t=t+4}return x.buffer}}const oit=16;class b5{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(i){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?sit(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i){return this.useSoftware?new Promise((s,r)=>{this.softwareDecrypt(new Uint8Array(e),t,i);const o=this.flush();o?s(o.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i)}softwareDecrypt(e,t,i){const{currentIV:s,currentResult:r,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=Zo(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;s&&(i=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new rit),l.expandKey(t);const c=r;return this.currentResult=l.decrypt(a.buffer,0,i),this.currentIV=oh(a,-16).buffer,c||null}webCryptoDecrypt(e,t,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i));this.key=t,this.fastAesKey=new iit(this.subtle,t)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new nit(this.subtle,new Uint8Array(i)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Ve.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, ".concat(s.name,": ").concat(s.message)),this.onWebCryptoError(e,t,i)))}onWebCryptoError(e,t,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%oit;return i!==e.length&&(t=oh(e,0,i),this.remainderData=oh(e,i)),t}logOnce(e){this.logEnabled&&(Ve.log("[decrypter]: ".concat(e)),this.logEnabled=!1)}}const ait={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+="[".concat(n.start(i).toFixed(3),"-").concat(n.end(i).toFixed(3),"]");return e}},ht={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class v5 extends Knt{constructor(e,t,i,s,r){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ht.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=r,this.logPrefix=s,this.log=Ve.log.bind(Ve,"".concat(s,":")),this.warn=Ve.warn.bind(Ve,"".concat(s,":")),this.hls=e,this.fragmentLoader=new tit(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new b5(e.config),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ht.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const i=t.partList;if(i!=null&&i.length){const r=i[i.length-1];return zi.isBuffered(this.media,r.start+r.duration/2)}const s=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===ht.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:i,mediaBuffer:s,state:r}=this,o=i?i.currentTime:0,a=zi.bufferInfo(s||i,o,e.maxBufferHole);if(this.log("media seeking to ".concat(Mt(o)?o.toFixed(3):o,", state: ").concat(r)),this.state===ht.ENDED)this.resetLoadingState();else if(t){const l=e.maxFragLookUpTolerance,c=t.start-l,d=t.start+t.duration+l;if(!a.len||d<a.start||c>a.end){const u=o>d;(o<c||u)&&(u&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=ht.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const s=r=>{if(this.fragContextChanged(e)){this.warn("Fragment ".concat(e.sn).concat(r.part?" p: "+r.part.index:""," of level ").concat(e.level," was dropped during download.")),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,i,s).then(r=>{if(!r)return;const o=this.state;if(this.fragContextChanged(e)){(o===ht.FRAG_LOADING||!this.fragCurrent&&o===ht.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ht.IDLE);return}"payload"in r&&(this.log("Loaded fragment ".concat(e.sn," of level ").concat(e.level)),this.hls.trigger(W.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===ht.STOPPED||this.state===ht.ERROR||(this.warn("Frag error: ".concat((r==null?void 0:r.message)||r)),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===Ws.APPENDING){const r=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,r),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===Ws.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(W.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{if(!i||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:s}=this,{payload:r}=i,o=e.decryptdata;if(r&&r.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),o.key.buffer,o.iv.buffer).catch(l=>{throw s.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return s.trigger(W.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:c}}),i.payload=l,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===ht.STOPPED||this.state===ht.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state=ht.IDLE,e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var i,s,r,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log("Buffered ".concat(e.type," sn: ").concat(e.sn).concat(t?" part: "+t.index:""," of ").concat(this.playlistType===sn.MAIN?"level":"track"," ").concat(e.level," (frag:[").concat(((i=e.startPTS)!=null?i:NaN).toFixed(3),"-").concat(((s=e.endPTS)!=null?s:NaN).toFixed(3),"] > buffer:").concat(a?ait.toString(zi.getBuffered(a)):"(detached)",")")),e.sn!=="initSegment"){var l;if(e.type!==sn.SUBTITLE){const d=e.elementaryStreams;if(!Object.keys(d).some(u=>!!d[u])){this.state=ht.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log("Resetting level fragment error count of ".concat(c.fragmentError," on frag buffered")),c.fragmentError=0)}this.state=ht.IDLE,a&&(!this.loadedmetadata&&e.type==sn.MAIN&&a.buffered.length&&((r=this.fragCurrent)==null?void 0:r.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:r}=e,o=!r||r.length===0||r.some(l=>!l),a=new g5(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!o);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var r;const o=t==null?void 0:t.details;if(!this.levels||!o)throw new Error("frag load aborted, missing level".concat(o?"":" detail","s"));let a=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)?(this.log("Loading key for ".concat(e.sn," of [").concat(o.startSN,"-").concat(o.endSN,"], ").concat(this.logPrefix==="[stream-controller]"?"level":"track"," ").concat(e.level)),this.state=ht.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(d=>{if(!this.fragContextChanged(d.frag))return this.hls.trigger(W.KEY_LOADED,d),this.state===ht.KEY_LOADING&&(this.state=ht.IDLE),d}),this.hls.trigger(W.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const d=o.partList;if(d&&s){i>e.end&&o.fragmentHint&&(e=o.fragmentHint);const u=this.getNextPart(d,e,i);if(u>-1){const h=d[u];this.log("Loading part sn: ".concat(e.sn," p: ").concat(h.index," cc: ").concat(e.cc," of playlist [").concat(o.startSN,"-").concat(o.endSN,"] parts [0-").concat(u,"-").concat(d.length-1,"] ").concat(this.logPrefix==="[stream-controller]"?"level":"track",": ").concat(e.level,", target: ").concat(parseFloat(i.toFixed(3)))),this.nextLoadPosition=h.start+h.duration,this.state=ht.FRAG_LOADING;let f;return a?f=a.then(m=>!m||this.fragContextChanged(m.frag)?null:this.doFragPartsLoad(e,h,t,s)).catch(m=>this.handleFragLoadError(m)):f=this.doFragPartsLoad(e,h,t,s).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(W.FRAG_LOADING,{frag:e,part:h,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):f}else if(!e.url||this.loadedEndOfParts(d,i))return Promise.resolve(null)}}this.log("Loading fragment ".concat(e.sn," cc: ").concat(e.cc," ").concat(o?"of ["+o.startSN+"-"+o.endSN+"] ":"").concat(this.logPrefix==="[stream-controller]"?"level":"track",": ").concat(e.level,", target: ").concat(parseFloat(i.toFixed(3)))),Mt(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ht.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(d=>!d||this.fragContextChanged(d==null?void 0:d.frag)?null:this.fragmentLoader.load(e,s)).catch(d=>this.handleFragLoadError(d)):c=Promise.all([this.fragmentLoader.load(e,l?s:void 0),a]).then(([d])=>(!l&&d&&s&&s(d),d)).catch(d=>this.handleFragLoadError(d)),this.hls.trigger(W.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,i,s){return new Promise((r,o)=>{var a;const l=[],c=(a=i.details)==null?void 0:a.partList,d=u=>{this.fragmentLoader.loadPart(e,u,s).then(h=>{l[u.index]=h;const f=h.part;this.hls.trigger(W.FRAG_LOADED,h);const m=TD(i,e.sn,u.index+1)||Gj(c,e.sn,u.index+1);if(m)d(m);else return r({frag:e,part:f,partsLoaded:l})}).catch(o)};d(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===Xe.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(W.ERROR,t)}else this.hls.trigger(W.ERROR,{type:fn.OTHER_ERROR,details:Xe.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ht.PARSING){!this.fragCurrent&&this.state!==ht.STOPPED&&this.state!==ht.ERROR&&(this.state=ht.IDLE);return}const{frag:i,part:s,level:r}=t,o=self.performance.now();i.stats.parsing.end=o,s&&(s.stats.parsing.end=o),this.updateLevelTiming(i,s,r,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:r,part:o}=e;if(!(t!=null&&t[s]))return this.warn("Levels object was unset while buffering fragment ".concat(r," of level ").concat(s,". The current chunk will not be buffered.")),null;const a=t[s],l=o>-1?TD(a,r,o):null,c=l?l.fragment:Int(a,r,i);return c?(i&&i!==c&&(c.stats=i.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,i,s,r){var o;if(!e||this.state!==ht.PARSING)return;const{data1:a,data2:l}=e;let c=a;if(a&&l&&(c=Zo(a,l)),!((o=c)!=null&&o.length))return;const d={type:e.type,frag:t,part:i,chunkMeta:s,parent:t.type,data:c};if(this.hls.trigger(W.BUFFER_APPENDING,d),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!zi.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,s=zi.bufferInfo(t,i,0),r=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),a=Math.max(Math.min(e.start-o,s.end-o),i+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const i=this.getLoadPosition();return Mt(i)?this.getFwdBufferInfoAtPos(e,i,t):null}getFwdBufferInfoAtPos(e,t,i){const{config:{maxBufferHole:s}}=this,r=zi.bufferInfo(e,t,s);if(r.len===0&&r.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(t,i);if(o&&r.nextStart<o.end)return zi.bufferInfo(e,t,Math.max(r.nextStart,s))}return r}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-t*3,i.maxMaxBufferLength/2,s);return r>=s?(i.maxMaxBufferLength=r,this.warn("Reduce max buffer length to ".concat(r,"s")),!0):!1}getAppendedFrag(e,t=sn.MAIN){const i=this.fragmentTracker.getAppendedFrag(e,sn.MAIN);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:r}=this,o=i[0].start;let a;if(t.live){const l=r.initialLiveManifestSize;if(s<l)return this.warn("Not enough fragments to start playback (have: ".concat(s,", need: ").concat(l,")")),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(t,i),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=i[0]);if(!a){const l=r.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===Ws.OK||i===Ws.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,r){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(a===null)return a;if(e=a,o&&e&&!e.gap&&i.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s);if(l!==null&&i.len+l.len>=r)return this.log('buffer full after gaps in "'.concat(s,'" playlist starting at sn: ').concat(e.sn)),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let s=-1,r=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,s>-1&&i<c.start)break;const d=c.loaded;d?s=-1:(r||c.independent||o)&&c.fragment===t&&(s=a),r=d}return s}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: ".concat(i.programDateTime)),s=Rnt(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const o=t[r-e.startSN];i.cc===o.cc&&(s=o,this.log("Live playlist, switching playlist, load frag with next SN: ".concat(s.sn)))}s||(s=Ont(t,i.cc),s&&this.log("Live playlist, switching playlist, load frag with same CC: ".concat(s.sn)))}}else{const r=this.hls.liveSyncPosition;r!==null&&(s=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:r}=this,{fragments:o,endSN:a}=i;const{fragmentHint:l}=i,{maxFragLookUpTolerance:c}=s,d=i.partList,u=!!(s.lowLatencyMode&&d!=null&&d.length&&l);u&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let h;if(e<t){const f=e>t-c?0:c;h=$w(r,o,e,f)}else h=o[o.length-1];if(h){const f=h.sn-i.startSN,m=this.fragmentTracker.getState(h);if((m===Ws.OK||m===Ws.PARTIAL&&h.gap)&&(r=h),r&&h.sn===r.sn&&(!u||d[0].fragment.sn>h.sn)&&r&&h.level===r.level){const b=o[f+1];h.sn<a&&this.fragmentTracker.getState(b)!==Ws.OK?h=b:h=null}}return h}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,r=i.currentTime,o=e.fragments[0].start,a=e.edge,l=r>=o-t.maxFragLookUpTolerance&&r<=a;if(s!==null&&i.duration>s&&(r<s||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&i.readyState<4||r<a-c)&&(this.loadedmetadata||(this.nextLoadPosition=s),i.readyState&&(this.warn("Playback: ".concat(r.toFixed(3)," is located too far from the end of live sliding playlist: ").concat(a,", reset currentTime to : ").concat(s.toFixed(3))),i.currentTime=s))}}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragments[0].start,o=!t,a=e.alignedSliding&&Mt(r);if(o||!a&&!r){const{fragPrevious:l}=this;Jnt(l,i,e);const c=e.fragments[0].start;return this.log("Live playlist sliding: ".concat(c.toFixed(2)," start-sn: ").concat(t?t.startSN:"na","->").concat(e.startSN," prev-sn: ").concat(l?l.sn:"na"," fragments: ").concat(s)),c}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;if(i<t&&(i=-1),i===-1||this.lastCurrentTime===-1){const s=this.startTimeOffset!==null,r=s?this.startTimeOffset:e.startTimeOffset;r!==null&&Mt(r)?(i=t+r,r<0&&(i+=e.totalduration),i=Math.min(Math.max(t,i),t+e.totalduration),this.log("Start time offset ".concat(r," found in ").concat(s?"multivariant":"media"," playlist, adjust startPosition to ").concat(i)),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn("Fragment ".concat(e.sn).concat(t?" part "+t.index:""," of level ").concat(e.level," was aborted")),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ht.FRAG_LOADING_WAITING_RETRY)&&(this.state=ht.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const d=this.getCurrentContext(t.chunkMeta);d&&(t.frag=d.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn("Frag load error must match current frag to retry ".concat(i.url," > ").concat((s=this.fragCurrent)==null?void 0:s.url));return}const r=t.details===Xe.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(i,!0);const o=t.errorAction,{action:a,retryCount:l=0,retryConfig:c}=o||{};if(o&&a===er.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const d=p5(c,l);this.warn("Fragment ".concat(i.sn," of ").concat(e," ").concat(i.level," errored with ").concat(t.details,", retrying loading ").concat(l+1,"/").concat(c.maxNumRetry," in ").concat(d,"ms")),o.resolved=!0,this.retryDate=self.performance.now()+d,this.state=ht.FRAG_LOADING_WAITING_RETRY}else if(c&&o)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!r&&a!==er.RemoveAlternatePermanently&&(o.resolved=!0);else{Ve.warn("".concat(t.details," reached or exceeded max retry (").concat(l,")"));return}else(o==null?void 0:o.action)===er.SendAlternateToPenaltyBox?this.state=ht.WAITING_LEVEL:this.state=ht.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ht.PARSING||this.state===ht.PARSED){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,(t==null?void 0:t.duration)||10);const o=!r;return o&&this.warn("Buffer full error while media.currentTime is not buffered, flush ".concat(i," buffer")),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===sn.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ht.STOPPED&&(this.state=ht.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const s=zi.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===ht.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ht.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn("The loading context changed while buffering fragment ".concat(e.sn," of level ").concat(e.level,". This chunk will not be buffered.")),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){var r;const o=i.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const d=e.elementaryStreams[c];if(d){const u=d.endPTS-d.startPTS;if(u<=0)return this.warn("Could not parse fragment ".concat(e.sn," ").concat(c," duration reliably (").concat(u,")")),l||!1;const h=s?0:Hj(o,e,d.startPTS,d.endPTS,d.startDTS,d.endDTS);return this.hls.trigger(W.LEVEL_PTS_UPDATED,{details:o,level:i,drift:h,type:c,frag:e,start:d.startPTS,end:d.endPTS}),!0}return l},!1)&&((r=this.transmuxer)==null?void 0:r.error)===null){const l=new Error("Found no media in fragment ".concat(e.sn," of level ").concat(e.level," resetting transmuxer to fallback to playlist timing"));if(i.fragmentError===0&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:"Found no media in msn ".concat(e.sn,' of level "').concat(i.url,'"')}),!this.hls)return;this.resetTransmuxer()}this.state=ht.PARSED,this.hls.trigger(W.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log("".concat(t,"->").concat(e)))}get state(){return this._state}}class Xj{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=lit(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function lit(n,e){const t=new Uint8Array(e);let i=0;for(let s=0;s<n.length;s++){const r=n[s];t.set(r,i),i+=r.length}return t}function cit(){return typeof __HLS_WORKER_BUNDLE__=="function"}function dit(){const n=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(".concat(__HLS_WORKER_BUNDLE__.toString(),")(true);")],{type:"text/javascript"}),e=self.URL.createObjectURL(n);return{worker:new self.Worker(e),objectURL:e}}function uit(n){const e=new self.URL(n,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function pl(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class y5{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=Zo(this.cachedData,e),this.cachedData=null);let i=F0(e,0),s=i?i.length:0,r;const o=this._audioTrack,a=this._id3Track,l=i?f5(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Mt(l))&&(this.basePTS=hit(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ya.audioId3,duration:Number.POSITIVE_INFINITY});s<c;){if(this.canParse(e,s)){const d=this.appendFrame(o,e,s);d?(this.frameIndex++,this.lastPTS=d.sample.pts,s+=d.length,r=s):s=c}else Ltt(e,s)?(i=F0(e,s),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ya.audioId3,duration:Number.POSITIVE_INFINITY}),s+=i.length,r=s):s++;if(s===c&&r!==c){const d=oh(e,r);this.cachedData?this.cachedData=Zo(this.cachedData,d):this.cachedData=d}}return{audioTrack:o,videoTrack:pl(),id3Track:a,textTrack:pl()}}demuxSampleAes(e,t,i){return Promise.reject(new Error("[".concat(this,"] This demuxer does not support Sample-AES decryption")))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:pl(),id3Track:this._id3Track,textTrack:pl()}}destroy(){}}const hit=(n,e,t)=>{if(Mt(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};function fit(n,e,t,i){let s,r,o,a;const l=navigator.userAgent.toLowerCase(),c=i,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((e[t+2]&192)>>>6)+1;const u=(e[t+2]&60)>>>2;if(u>d.length-1){const h=new Error("invalid ADTS sampling index:".concat(u));n.emit(W.ERROR,W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}return o=(e[t+2]&1)<<2,o|=(e[t+3]&192)>>>6,Ve.log("manifest codec:".concat(i,", ADTS type:").concat(s,", samplingIndex:").concat(u)),/firefox/i.test(l)?u>=6?(s=5,a=new Array(4),r=u-3):(s=2,a=new Array(2),r=u):l.indexOf("android")!==-1?(s=2,a=new Array(2),r=u):(s=5,a=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&u>=6?r=u-3:((i&&i.indexOf("mp4a.40.2")!==-1&&(u>=6&&o===1||/vivaldi/i.test(l))||!i&&o===1)&&(s=2,a=new Array(2)),r=u)),a[0]=s<<3,a[0]|=(u&14)>>1,a[1]|=(u&1)<<7,a[1]|=o<<3,s===5&&(a[1]|=(r&14)>>1,a[2]=(r&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:d[u],channelCount:o,codec:"mp4a.40."+s,manifestCodec:c}}function Qj(n,e){return n[e]===255&&(n[e+1]&246)===240}function Zj(n,e){return n[e+1]&1?7:9}function w5(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function pit(n,e){return e+5<n.length}function Ow(n,e){return e+1<n.length&&Qj(n,e)}function mit(n,e){return pit(n,e)&&Qj(n,e)&&w5(n,e)<=n.length-e}function git(n,e){if(Ow(n,e)){const t=Zj(n,e);if(e+t>=n.length)return!1;const i=w5(n,e);if(i<=t)return!1;const s=e+i;return s===n.length||Ow(n,s)}return!1}function Jj(n,e,t,i,s){if(!n.samplerate){const r=fit(e,t,i,s);if(!r)return;n.config=r.config,n.samplerate=r.samplerate,n.channelCount=r.channelCount,n.codec=r.codec,n.manifestCodec=r.manifestCodec,Ve.log("parsed codec:".concat(n.codec,", rate:").concat(r.samplerate,", channels:").concat(r.channelCount))}}function eG(n){return 1024*9e4/n}function bit(n,e){const t=Zj(n,e);if(e+t<=n.length){const i=w5(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function tG(n,e,t,i,s){const r=eG(n.samplerate),o=i+s*r,a=bit(e,t);let l;if(a){const{frameLength:u,headerLength:h}=a,f=h+u,m=Math.max(0,t+f-e.length);m?(l=new Uint8Array(f-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+f);const g={unit:l,pts:o};return m||n.samples.push(g),{sample:g,length:f,missing:m}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}let yv=null;const vit=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],yit=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],wit=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],xit=[0,1,1,4];function nG(n,e,t,i,s){if(t+24>e.length)return;const r=iG(e,t);if(r&&t+r.frameLength<=e.length){const o=r.samplesPerFrame*9e4/r.sampleRate,a=i+s*o,l={unit:e.subarray(t,t+r.frameLength),pts:a,dts:a};return n.config=[],n.channelCount=r.channelCount,n.samplerate=r.sampleRate,n.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function iG(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,s=n[e+2]>>4&15,r=n[e+2]>>2&3;if(t!==1&&s!==0&&s!==15&&r!==3){const o=n[e+2]>>1&1,a=n[e+3]>>6,l=t===3?3-i:i===3?3:4,c=vit[l*14+s-1]*1e3,u=yit[(t===3?0:t===2?1:2)*3+r],h=a===3?1:2,f=wit[t][i],m=xit[i],g=f*8*m,b=Math.floor(f*c/u+o)*m;if(yv===null){const k=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);yv=k?parseInt(k[1]):0}return!!yv&&yv<=87&&i===2&&c>=224e3&&a===0&&(n[e+3]=n[e+3]|128),{sampleRate:u,channelCount:h,frameLength:b,samplesPerFrame:g}}}function x5(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function sG(n,e){return e+1<n.length&&x5(n,e)}function _it(n,e){return x5(n,e)&&4<=n.length-e}function rG(n,e){if(e+1<n.length&&x5(n,e)){const i=iG(n,e);let s=4;i!=null&&i.frameLength&&(s=i.frameLength);const r=e+s;return r===n.length||sG(n,r)}return!1}class kit extends y5{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=F0(e,0);let i=(t==null?void 0:t.length)||0;if(rG(e,i))return!1;for(let s=e.length;i<s;i++)if(git(e,i))return Ve.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return mit(e,t)}appendFrame(e,t,i){Jj(e,this.observer,t,i,e.manifestCodec);const s=tG(e,t,i,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const Eit=/\/emsg[-/]ID3/i;class Tit{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const r=this.videoTrack=pl("video",1),o=this.audioTrack=pl("audio",1),a=this.txtTrack=pl("text",1);if(this.id3Track=pl("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Dj(e);if(l.video){const{id:c,timescale:d,codec:u}=l.video;r.id=c,r.timescale=a.timescale=d,r.codec=u}if(l.audio){const{id:c,timescale:d,codec:u}=l.audio;o.id=c,o.timescale=d,o.codec=u}a.id=$j.text,r.sampleDuration=0,r.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return ztt(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Zo(this.remainderData,e));const a=Xtt(i);this.remainderData=a.remainder,s.samples=a.valid||new Uint8Array}else s.samples=i;const o=this.extractID3Track(s,t);return r.samples=oD(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=oD(e,t),{videoTrack:t,audioTrack:pl(),id3Track:s,textTrack:pl()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=kn(e.samples,["emsg"]);s&&s.forEach(r=>{const o=Jtt(r);if(Eit.test(o.schemeIdUri)){const a=Mt(o.presentationTime)?o.presentationTime/o.timeScale:t+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;i.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:ya.emsg,duration:l})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const oG=(n,e)=>{let t=0,i=5;e+=i;const s=new Uint32Array(1),r=new Uint32Array(1),o=new Uint8Array(1);for(;i>0;){o[0]=n[e];const a=Math.min(i,8),l=8-a;r[0]=4278190080>>>24+l<<l,s[0]=(o[0]&r[0])>>l,t=t?t<<a|s[0]:s[0],e+=1,i-=a}return t};class Cit extends y5{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=aG(e,t,i,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=F0(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&f5(t)!==void 0&&oG(e,i)<16}}function aG(n,e,t,i,s){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const r=e[t+4]>>6;if(r>=3)return-1;const a=[48e3,44100,32e3][r],l=e[t+4]&63,d=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+r]*2;if(t+d>e.length)return-1;const u=e[t+6]>>5;let h=0;u===2?h+=2:(u&1&&u!==1&&(h+=2),u&4&&(h+=2));const f=(e[t+6]<<8|e[t+7])>>12-h&1,g=[2,1,2,3,3,4,4,5][u]+f,b=e[t+5]>>3,w=e[t+5]&7,x=new Uint8Array([r<<6|b<<1|w>>2,(w&3)<<6|u<<3|f<<2|l>>4,l<<4&224]),k=1536/a*9e4,E=i+s*k,T=e.subarray(t,t+d);return n.config=x,n.channelCount=g,n.samplerate=a,n.samples.push({unit:T,pts:E}),d}class Sit{constructor(){this.VideoSample=null}createVideoSample(e,t,i,s){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:s,length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,s;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const r=i.units;s=r[r.length-1]}return s}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,s=i.length;if(s){const r=i[s-1];e.pts=r.pts,e.dts=r.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&Ve.log(e.pts+"/"+e.dts+":"+e.debug)}}class OD{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");s.set(e.subarray(i,i+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&Ve.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,i=8,s;for(let r=0;r<e;r++)i!==0&&(s=this.readEG(),i=(t+s+256)%256),t=i===0?t:i}readSPS(){let e=0,t=0,i=0,s=0,r,o,a;const l=this.readUByte.bind(this),c=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),h=this.skipBits.bind(this),f=this.skipEG.bind(this),m=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);l();const b=l();if(c(5),h(3),l(),m(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){const P=d();if(P===3&&h(1),m(),m(),h(1),u())for(o=P!==3?8:12,a=0;a<o;a++)u()&&(a<6?g(16):g(64))}m();const w=d();if(w===0)d();else if(w===1)for(h(1),f(),f(),r=d(),a=0;a<r;a++)f();m(),h(1);const x=d(),k=d(),E=c(1);E===0&&h(1),h(1),u()&&(e=d(),t=d(),i=d(),s=d());let T=[1,1];if(u()&&u())switch(l()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:{T=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((x+1)*16-e*2-t*2),height:(2-E)*(k+1)*16-(E?2:4)*(i+s),pixelRatio:T}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Ait extends Sit{parseAVCPES(e,t,i,s,r){const o=this.parseAVCNALu(e,i.data);let a=this.VideoSample,l,c=!1;i.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),o.forEach(d=>{var u;switch(d.type){case 1:{let g=!1;l=!0;const b=d.data;if(c&&b.length>4){const w=new OD(b).readSliceType();(w===2||w===4||w===7||w===9)&&(g=!0)}if(g){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.frame=!0,a.key=g;break}case 5:l=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,Nj(d.data,1,i.pts,t.samples);break}case 7:{var f,m;l=!0,c=!0;const g=d.data,w=new OD(g).readSPS();if(!e.sps||e.width!==w.width||e.height!==w.height||((f=e.pixelRatio)==null?void 0:f[0])!==w.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==w.pixelRatio[1]){e.width=w.width,e.height=w.height,e.pixelRatio=w.pixelRatio,e.sps=[g],e.duration=r;const x=g.subarray(1,4);let k="avc1.";for(let E=0;E<3;E++){let T=x[E].toString(16);T.length<2&&(T="0"+T),k+=T}e.codec=k}break}case 8:l=!0,e.pps=[d.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+d.type+" ");break}a&&l&&a.units.push(d)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,t){const i=t.byteLength;let s=e.naluState||0;const r=s,o=[];let a=0,l,c,d,u=-1,h=0;for(s===-1&&(u=0,h=t[0]&31,s=0,a=1);a<i;){if(l=t[a++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(c=a-s-1,u>=0){const f={data:t.subarray(u,c),type:h};o.push(f)}else{const f=this.getLastNalUnit(e.samples);f&&(r&&a<=4-r&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-r)),c>0&&(f.data=Zo(f.data,t.subarray(0,c)),f.state=0))}a<i?(d=t[a]&31,u=a,h=d,s=0):s=-1}else s=0}if(u>=0&&s>=0){const f={data:t.subarray(u,i),type:h,state:s};o.push(f)}if(o.length===0){const f=this.getLastNalUnit(e.samples);f&&(f.data=Zo(f.data,t))}return e.naluState=s,o}}class Iit{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new b5(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),o=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)})}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(i.subarray(s,s+16),r);return e}decryptAvcSample(e,t,i,s,r){const o=Fj(r.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)})}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){s();return}const r=e[t].units;for(;!(i>=r.length);i++){const o=r[i];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,t,i,s,o),!this.decrypter.isSync()))return}}}}const Bs=188;class fd{constructor(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.videoParser=new Ait}static probe(e){const t=fd.syncOffset(e);return t>0&&Ve.warn("MPEG2-TS detected but first sync word found @ offset ".concat(t)),t!==-1}static syncOffset(e){const t=e.length;let i=Math.min(Bs*5,t-Bs)+1,s=0;for(;s<i;){let r=!1,o=-1,a=0;for(let l=s;l<t;l+=Bs)if(e[l]===71&&(t-l===Bs||e[l+Bs]===71)){if(a++,o===-1&&(o=l,o!==0&&(i=Math.min(o+Bs*99,e.length-Bs)+1)),r||(r=hS(e,l)===0),r&&a>1&&(o===0&&a>2||l+Bs>i))return o}else{if(a)return-1;break}s++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:$j[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=fd.createTrack("video"),this._audioTrack=fd.createTrack("audio",s),this._id3Track=fd.createTrack("id3"),this._txtTrack=fd.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){i||(this.sampleAes=null);let r;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let d=o.pid,u=o.pesData,h=a.pid,f=l.pid,m=a.pesData,g=l.pesData,b=null,w=this.pmtParsed,x=this._pmtId,k=e.length;if(this.remainderData&&(e=Zo(this.remainderData,e),k=e.length,this.remainderData=null),k<Bs&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const E=Math.max(0,fd.syncOffset(e));k-=(k-E)%Bs,k<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,k,e.buffer.byteLength-k));let T=0;for(let C=E;C<k;C+=Bs)if(e[C]===71){const A=!!(e[C+1]&64),R=hS(e,C),M=(e[C+3]&48)>>4;let N;if(M>1){if(N=C+5+e[C+4],N===C+Bs)continue}else N=C+4;switch(R){case d:A&&(u&&(r=gf(u))&&this.videoParser.parseAVCPES(o,c,r,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(N,C+Bs)),u.size+=C+Bs-N);break;case h:if(A){if(m&&(r=gf(m)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r);break;case"ac3":this.parseAC3PES(a,r);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(N,C+Bs)),m.size+=C+Bs-N);break;case f:A&&(g&&(r=gf(g))&&this.parseID3PES(l,r),g={data:[],size:0}),g&&(g.data.push(e.subarray(N,C+Bs)),g.size+=C+Bs-N);break;case 0:A&&(N+=e[N]+1),x=this._pmtId=Pit(e,N);break;case x:{A&&(N+=e[N]+1);const U=Rit(e,N,this.typeSupported,i,this.observer);d=U.videoPid,d>0&&(o.pid=d,o.segmentCodec=U.segmentVideoCodec),h=U.audioPid,h>0&&(a.pid=h,a.segmentCodec=U.segmentAudioCodec),f=U.id3Pid,f>0&&(l.pid=f),b!==null&&!w&&(Ve.warn("MPEG-TS PMT found at ".concat(C," after unknown PID '").concat(b,"'. Backtracking to sync byte @").concat(E," to parse all TS packets.")),b=null,C=E-188),w=this.pmtParsed=!0;break}case 17:case 8191:break;default:b=R;break}}else T++;T>0&&Dw(this.observer,new Error("Found ".concat(T," TS packet/s that do not start with 0x47"))),o.pesData=u,a.pesData=m,l.pesData=g;const P={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return s&&this.extractRemainingSamples(P),P}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:r}=e,o=i.pesData,a=t.pesData,l=s.pesData;let c;if(o&&(c=gf(o))?(this.videoParser.parseAVCPES(i,r,c,!0,this._duration),i.pesData=null):i.pesData=o,a&&(c=gf(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else a!=null&&a.size&&Ve.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;l&&(c=gf(l))?(this.parseID3PES(s,c),s.pesData=null):s.pesData=l}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new Iit(this.observer,this.config,t);return this.decrypt(s,r)}decrypt(e,t){return new Promise(i=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&s.segmentCodec==="aac"?t.decryptAacSamples(s.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{i(e)}):i(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{i(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let r=t.data;if(s){this.aacOverFlow=null;const u=s.missing,h=s.sample.unit.byteLength;if(u===-1)r=Zo(s.sample.unit,r);else{const f=h-u;s.sample.unit.set(r.subarray(0,u),f),e.samples.push(s.sample),i=s.missing}}let o,a;for(o=i,a=r.length;o<a-1&&!Ow(r,o);o++);if(o!==i){let u;const h=o<a-1;if(h?u="AAC PES did not start with ADTS header,offset:".concat(o):u="No ADTS header found in AAC PES",Dw(this.observer,new Error(u),h),!h)return}Jj(e,this.observer,r,o,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(s){const u=eG(e.samplerate);l=s.sample.pts+u}else{Ve.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,d;for(;o<a;)if(d=tG(e,r,o,l,c),o+=d.length,d.missing){this.aacOverFlow=d;break}else for(c++;o<a-1&&!Ow(r,o);o++);}parseMPEGPES(e,t){const i=t.data,s=i.length;let r=0,o=0;const a=t.pts;if(a===void 0){Ve.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(sG(i,o)){const l=nG(e,i,o,a,r);if(l)o+=l.length,r++;else break}else o++}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(s===void 0){Ve.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=i.length;let o=0,a=0,l;for(;a<r&&(l=aG(e,i,a,s,o++))>0;)a+=l}}parseID3PES(e,t){if(t.pts===void 0){Ve.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=Is({},t,{type:this._videoTrack?ya.emsg:ya.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function hS(n,e){return((n[e+1]&31)<<8)+n[e+2]}function Pit(n,e){return(n[e+10]&31)<<8|n[e+11]}function Rit(n,e,t,i,s){const r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(n[e+1]&15)<<8|n[e+2],a=e+3+o-4,l=(n[e+10]&15)<<8|n[e+11];for(e+=12+l;e<a;){const c=hS(n,e),d=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){vE("ADTS AAC");break}case 15:r.audioPid===-1&&(r.audioPid=c);break;case 21:r.id3Pid===-1&&(r.id3Pid=c);break;case 219:if(!i){vE("H.264");break}case 27:r.videoPid===-1&&(r.videoPid=c,r.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?Ve.log("MPEG audio found, not supported in this browser"):r.audioPid===-1&&(r.audioPid=c,r.segmentAudioCodec="mp3");break;case 193:if(!i){vE("AC-3");break}case 129:t.ac3?r.audioPid===-1&&(r.audioPid=c,r.segmentAudioCodec="ac3"):Ve.log("AC-3 audio found, not supported in this browser");break;case 6:if(r.audioPid===-1&&d>0){let u=e+5,h=d;for(;h>2;){switch(n[u]){case 106:t.ac3!==!0?Ve.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=c,r.segmentAudioCodec="ac3");break}const m=n[u+1]+2;u+=m,h-=m}}break;case 194:case 135:return Dw(s,new Error("Unsupported EC-3 in M2TS found")),r;case 36:return Dw(s,new Error("Unsupported HEVC in M2TS found")),r}e+=d+5}return r}function Dw(n,e,t){Ve.warn("parsing error: ".concat(e.message)),n.emit(W.ERROR,W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function vE(n){Ve.log("".concat(n," with AES-128-CBC encryption found in unencrypted stream"))}function gf(n){let e=0,t,i,s,r,o;const a=n.data;if(!n||n.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=Zo(a[0],a[1]),a.splice(1,1);if(t=a[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(i=(t[4]<<8)+t[5],i&&i>n.size-6)return null;const c=t[7];c&192&&(r=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,c&64?(o=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,r-o>60*9e4&&(Ve.warn("".concat(Math.round((r-o)/9e4),"s delta between PTS and DTS, align them")),r=o)):o=r),s=t[8];let d=s+9;if(n.size<=d)return null;n.size-=d;const u=new Uint8Array(n.size);for(let h=0,f=a.length;h<f;h++){t=a[h];let m=t.byteLength;if(d)if(d>m){d-=m;continue}else t=t.subarray(d),m-=d,d=0;u.set(t,e),e+=m}return i&&(i-=s+3),{data:u,pts:r,dts:o,len:i}}return null}class $it extends y5{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=F0(e,0);let i=(t==null?void 0:t.length)||0;if(t&&e[i]===11&&e[i+1]===119&&f5(t)!==void 0&&oG(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(rG(e,i))return Ve.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return _it(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return nG(e,t,i,this.basePTS,this.frameIndex)}}class DD{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const sd=Math.pow(2,32)-1;class je{static init(){je.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in je.types)je.types.hasOwnProperty(e)&&(je.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);je.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);je.STTS=je.STSC=je.STCO=r,je.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),je.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),je.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),je.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);je.FTYP=je.box(je.types.ftyp,o,l,o,a),je.DINF=je.box(je.types.dinf,je.box(je.types.dref,s))}static box(e,...t){let i=8,s=t.length;const r=s;for(;s--;)i+=t[s].byteLength;const o=new Uint8Array(i);for(o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=i&255,o.set(e,4),s=0,i=8;s<r;s++)o.set(t[s],i),i+=t[s].byteLength;return o}static hdlr(e){return je.box(je.types.hdlr,je.HDLR_TYPES[e])}static mdat(e){return je.box(je.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(sd+1)),s=Math.floor(t%(sd+1));return je.box(je.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return je.box(je.types.mdia,je.mdhd(e.timescale,e.duration),je.hdlr(e.type),je.minf(e))}static mfhd(e){return je.box(je.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?je.box(je.types.minf,je.box(je.types.smhd,je.SMHD),je.DINF,je.stbl(e)):je.box(je.types.minf,je.box(je.types.vmhd,je.VMHD),je.DINF,je.stbl(e))}static moof(e,t,i){return je.box(je.types.moof,je.mfhd(e),je.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=je.trak(e[t]);return je.box.apply(null,[je.types.moov,je.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(je.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=je.trex(e[t]);return je.box.apply(null,[je.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(sd+1)),s=Math.floor(t%(sd+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return je.box(je.types.mvhd,r)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,r;for(s=0;s<t.length;s++)r=t[s].flags,i[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return je.box(je.types.sdtp,i)}static stbl(e){return je.box(je.types.stbl,je.stsd(e),je.box(je.types.stts,je.STTS),je.box(je.types.stsc,je.STSC),je.box(je.types.stsz,je.STSZ),je.box(je.types.stco,je.STCO))}static avc1(e){let t=[],i=[],s,r,o;for(s=0;s<e.sps.length;s++)r=e.sps[s],o=r.byteLength,t.push(o>>>8&255),t.push(o&255),t=t.concat(Array.prototype.slice.call(r));for(s=0;s<e.pps.length;s++)r=e.pps[s],o=r.byteLength,i.push(o>>>8&255),i.push(o&255),i=i.concat(Array.prototype.slice.call(r));const a=je.box(je.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),l=e.width,c=e.height,d=e.pixelRatio[0],u=e.pixelRatio[1];return je.box(je.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,je.box(je.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),je.box(je.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,d&255,u>>24,u>>16&255,u>>8&255,u&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return je.box(je.types.mp4a,je.audioStsd(e),je.box(je.types.esds,je.esds(e)))}static mp3(e){return je.box(je.types[".mp3"],je.audioStsd(e))}static ac3(e){return je.box(je.types["ac-3"],je.audioStsd(e),je.box(je.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?je.box(je.types.stsd,je.STSD,je.mp3(e)):e.segmentCodec==="ac3"?je.box(je.types.stsd,je.STSD,je.ac3(e)):je.box(je.types.stsd,je.STSD,je.mp4a(e)):je.box(je.types.stsd,je.STSD,je.avc1(e))}static tkhd(e){const t=e.id,i=e.duration*e.timescale,s=e.width,r=e.height,o=Math.floor(i/(sd+1)),a=Math.floor(i%(sd+1));return je.box(je.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){const i=je.sdtp(e),s=e.id,r=Math.floor(t/(sd+1)),o=Math.floor(t%(sd+1));return je.box(je.types.traf,je.box(je.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),je.box(je.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,o>>24,o>>16&255,o>>8&255,o&255])),je.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,je.box(je.types.trak,je.tkhd(e),je.mdia(e))}static trex(e){const t=e.id;return je.box(je.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,r=12+16*s,o=new Uint8Array(r);let a,l,c,d,u,h;for(t+=8+r,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),a=0;a<s;a++)l=i[a],c=l.duration,d=l.size,u=l.flags,h=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,u.degradPrio&61440,u.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*a);return je.box(je.types.trun,o)}static initSegment(e){je.types||je.init();const t=je.moov(e);return Zo(je.FTYP,t)}}je.types=void 0;je.HDLR_TYPES=void 0;je.STTS=void 0;je.STSC=void 0;je.STCO=void 0;je.STSZ=void 0;je.VMHD=void 0;je.SMHD=void 0;je.STSD=void 0;je.FTYP=void 0;je.DINF=void 0;const lG=9e4;function _5(n,e,t=1,i=!1){const s=n*e*t;return i?Math.round(s):s}function Lit(n,e,t=1,i=!1){return _5(n,e,1/t,i)}function Xm(n,e=!1){return _5(n,1e3,1/lG,e)}function Oit(n,e=1){return _5(n,lG,1/e)}const Dit=10*1e3,MD=1024,Mit=1152,Nit=1536;let bf=null,yE=null;class sy{constructor(e,t,i,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,bf===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bf=o?parseInt(o[1]):0}if(yE===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);yE=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){Ve.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){Ve.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Ve.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,s=e.reduce((r,o)=>{let a=o.pts,l=a-r;return l<-4294967296&&(t=!0,a=Uo(a,i),l=a-r),l>0?r:a},i);return t&&Ve.debug("PTS rollover detected"),s}remux(e,t,i,s,r,o,a,l){let c,d,u,h,f,m,g=r,b=r;const w=e.pid>-1,x=t.pid>-1,k=t.samples.length,E=e.samples.length>0,T=a&&k>0||k>1;if((!w||E)&&(!x||T)||this.ISGenerated||a){if(this.ISGenerated){var C,A,R,M;const B=this.videoTrackConfig;B&&(t.width!==B.width||t.height!==B.height||((C=t.pixelRatio)==null?void 0:C[0])!==((A=B.pixelRatio)==null?void 0:A[0])||((R=t.pixelRatio)==null?void 0:R[1])!==((M=B.pixelRatio)==null?void 0:M[1]))&&this.resetInitSegment()}else u=this.generateIS(e,t,r,o);const N=this.isVideoContiguous;let U=-1,G;if(T&&(U=Fit(t.samples),!N&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,U>0){Ve.warn("[mp4-remuxer]: Dropped ".concat(U," out of ").concat(k," video samples due to a missing keyframe"));const B=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(U),t.dropped+=U,b+=(t.samples[0].pts-B)/t.inputTimeScale,G=b}else U===-1&&(Ve.warn("[mp4-remuxer]: No keyframe found out of ".concat(k," video samples")),m=!1);if(this.ISGenerated){if(E&&T){const B=this.getVideoStartPts(t.samples),X=(Uo(e.samples[0].pts,B)-B)/t.inputTimeScale;g+=Math.max(0,X),b+=Math.max(0,-X)}if(E){if(e.samplerate||(Ve.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,r,o)),d=this.remuxAudio(e,g,this.isAudioContiguous,o,x||T||l===sn.AUDIO?b:void 0),T){const B=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(Ve.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,r,o)),c=this.remuxVideo(t,b,N,B)}}else T&&(c=this.remuxVideo(t,b,N,0));c&&(c.firstKeyFrame=U,c.independent=U!==-1,c.firstKeyFramePTS=G)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(f=cG(i,r,this._initPTS,this._initDTS)),s.samples.length&&(h=dG(s,r,this._initPTS))),{audio:d,video:c,initSegment:u,independent:m,text:h,id3:f}}generateIS(e,t,i,s){const r=e.samples,o=t.samples,a=this.typeSupported,l={},c=this._initPTS;let d=!c||s,u="audio/mp4",h,f,m;if(d&&(h=f=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(u="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:u,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):je.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(m=e.inputTimeScale,!c||m!==c.timescale?h=f=r[0].pts-Math.round(m*i):d=!1)}if(t.sps&&t.pps&&o.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:je.initSegment([t]),metadata:{width:t.width,height:t.height}},d)if(m=t.inputTimeScale,!c||m!==c.timescale){const g=this.getVideoStartPts(o),b=Math.round(m*i);f=Math.min(f,Uo(o[0].dts,g)-b),h=Math.min(h,g-b)}else d=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,d?(this._initPTS={baseTime:h,timescale:m},this._initDTS={baseTime:f,timescale:m}):h=m=void 0,{tracks:l,initPTS:h,timescale:m}}remuxVideo(e,t,i,s){const r=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS;let d=this.nextAvcDts,u=8,h=this.videoSampleDuration,f,m,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,w=!1;if(!i||d===null){const Ie=t*r,xe=o[0].pts-Uo(o[0].dts,o[0].pts);bf&&d!==null&&Math.abs(Ie-xe-d)<15e3?i=!0:d=Ie-xe}const x=c.baseTime*r/c.timescale;for(let Ie=0;Ie<l;Ie++){const xe=o[Ie];xe.pts=Uo(xe.pts-x,d),xe.dts=Uo(xe.dts-x,d),xe.dts<o[Ie>0?Ie-1:Ie].dts&&(w=!0)}w&&o.sort(function(Ie,xe){const Be=Ie.dts-xe.dts,Pe=Ie.pts-xe.pts;return Be||Pe}),f=o[0].dts,m=o[o.length-1].dts;const k=m-f,E=k?Math.round(k/(l-1)):h||e.inputTimeScale/30;if(i){const Ie=f-d,xe=Ie>E,Be=Ie<-1;if((xe||Be)&&(xe?Ve.warn("AVC: ".concat(Xm(Ie,!0)," ms (").concat(Ie,"dts) hole between fragments detected at ").concat(t.toFixed(3))):Ve.warn("AVC: ".concat(Xm(-Ie,!0)," ms (").concat(Ie,"dts) overlapping between fragments detected at ").concat(t.toFixed(3))),!Be||d>=o[0].pts||bf)){f=d;const Pe=o[0].pts-Ie;if(xe)o[0].dts=f,o[0].pts=Pe;else for(let Ae=0;Ae<o.length&&!(o[Ae].dts>Pe);Ae++)o[Ae].dts-=Ie,o[Ae].pts-=Ie;Ve.log("Video: Initial PTS/DTS adjusted: ".concat(Xm(Pe,!0),"/").concat(Xm(f,!0),", delta: ").concat(Xm(Ie,!0)," ms"))}}f=Math.max(0,f);let T=0,P=0,C=f;for(let Ie=0;Ie<l;Ie++){const xe=o[Ie],Be=xe.units,Pe=Be.length;let Ae=0;for(let de=0;de<Pe;de++)Ae+=Be[de].data.length;P+=Ae,T+=Pe,xe.length=Ae,xe.dts<C?(xe.dts=C,C+=E/4|0||1):C=xe.dts,g=Math.min(xe.pts,g),b=Math.max(xe.pts,b)}m=o[l-1].dts;const A=P+4*T+8;let R;try{R=new Uint8Array(A)}catch(Ie){this.observer.emit(W.ERROR,W.ERROR,{type:fn.MUX_ERROR,details:Xe.REMUX_ALLOC_ERROR,fatal:!1,error:Ie,bytes:A,reason:"fail allocating video mdat ".concat(A)});return}const M=new DataView(R.buffer);M.setUint32(0,A),R.set(je.types.mdat,4);let N=!1,U=Number.POSITIVE_INFINITY,G=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,te=Number.NEGATIVE_INFINITY;for(let Ie=0;Ie<l;Ie++){const xe=o[Ie],Be=xe.units;let Pe=0;for(let we=0,ze=Be.length;we<ze;we++){const le=Be[we],Se=le.data,ne=le.data.byteLength;M.setUint32(u,ne),u+=4,R.set(Se,u),u+=ne,Pe+=4+ne}let Ae;if(Ie<l-1)h=o[Ie+1].dts-xe.dts,Ae=o[Ie+1].pts-xe.pts;else{const we=this.config,ze=Ie>0?xe.dts-o[Ie-1].dts:E;if(Ae=Ie>0?xe.pts-o[Ie-1].pts:E,we.stretchShortVideoTrack&&this.nextAudioPts!==null){const le=Math.floor(we.maxBufferHole*r),Se=(s?g+s*r:this.nextAudioPts)-xe.pts;Se>le?(h=Se-ze,h<0?h=ze:N=!0,Ve.log("[mp4-remuxer]: It is approximately ".concat(Se/90," ms to the next segment; using duration ").concat(h/90," ms for the last video frame."))):h=ze}else h=ze}const de=Math.round(xe.pts-xe.dts);U=Math.min(U,h),B=Math.max(B,h),G=Math.min(G,Ae),te=Math.max(te,Ae),a.push(new ND(xe.key,h,Pe,de))}if(a.length){if(bf){if(bf<70){const Ie=a[0].flags;Ie.dependsOn=2,Ie.isNonSync=0}}else if(yE&&te-G<B-U&&E/B<.025&&a[0].cts===0){Ve.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Ie=f;for(let xe=0,Be=a.length;xe<Be;xe++){const Pe=Ie+a[xe].duration,Ae=Ie+a[xe].cts;if(xe<Be-1){const de=Pe+a[xe+1].cts;a[xe].duration=de-Ae}else a[xe].duration=xe?a[xe-1].duration:E;a[xe].cts=0,Ie=Pe}}}h=N||!h?E:h,this.nextAvcDts=d=m+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const he={data1:je.moof(e.sequenceNumber++,f,Is({},e,{samples:a})),data2:R,startPTS:g/r,endPTS:(b+h)/r,startDTS:f/r,endDTS:d/r,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,he}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return Mit;case"ac3":return Nit;default:return MD}}remuxAudio(e,t,i,s,r){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=this.getSamplesPerFrame(e),d=c*l,u=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],m=r!==void 0;let g=e.samples,b=h?0:8,w=this.nextAudioPts||-1;const x=t*o,k=u.baseTime*o/u.timescale;if(this.isAudioContiguous=i=i||g.length&&w>0&&(s&&Math.abs(x-w)<9e3||Math.abs(Uo(g[0].pts-k,x)-w)<20*d),g.forEach(function(X){X.pts=Uo(X.pts-k,x)}),!i||w<0){if(g=g.filter(X=>X.pts>=0),!g.length)return;r===0?w=0:s&&!m?w=Math.max(0,x):w=g[0].pts}if(e.segmentCodec==="aac"){const X=this.config.maxAudioFramesDrift;for(let ue=0,he=w;ue<g.length;ue++){const Ie=g[ue],xe=Ie.pts,Be=xe-he,Pe=Math.abs(1e3*Be/o);if(Be<=-X*d&&m)ue===0&&(Ve.warn("Audio frame @ ".concat((xe/o).toFixed(3),"s overlaps nextAudioPts by ").concat(Math.round(1e3*Be/o)," ms.")),this.nextAudioPts=w=he=xe);else if(Be>=X*d&&Pe<Dit&&m){let Ae=Math.round(Be/d);he=xe-Ae*d,he<0&&(Ae--,he+=d),ue===0&&(this.nextAudioPts=w=he),Ve.warn("[mp4-remuxer]: Injecting ".concat(Ae," audio frame @ ").concat((he/o).toFixed(3),"s due to ").concat(Math.round(1e3*Be/o)," ms gap."));for(let de=0;de<Ae;de++){const we=Math.max(he,0);let ze=DD.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ze||(Ve.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ze=Ie.unit.subarray()),g.splice(ue,0,{unit:ze,pts:we}),he+=d,ue++}}Ie.pts=he,he+=d}}let E=null,T=null,P,C=0,A=g.length;for(;A--;)C+=g[A].unit.byteLength;for(let X=0,ue=g.length;X<ue;X++){const he=g[X],Ie=he.unit;let xe=he.pts;if(T!==null){const Pe=f[X-1];Pe.duration=Math.round((xe-T)/l)}else if(i&&e.segmentCodec==="aac"&&(xe=w),E=xe,C>0){C+=b;try{P=new Uint8Array(C)}catch(Pe){this.observer.emit(W.ERROR,W.ERROR,{type:fn.MUX_ERROR,details:Xe.REMUX_ALLOC_ERROR,fatal:!1,error:Pe,bytes:C,reason:"fail allocating audio mdat ".concat(C)});return}h||(new DataView(P.buffer).setUint32(0,C),P.set(je.types.mdat,4))}else return;P.set(Ie,b);const Be=Ie.byteLength;b+=Be,f.push(new ND(!0,c,Be,0)),T=xe}const R=f.length;if(!R)return;const M=f[f.length-1];this.nextAudioPts=w=T+l*M.duration;const N=h?new Uint8Array(0):je.moof(e.sequenceNumber++,E/l,Is({},e,{samples:f}));e.samples=[];const U=E/o,G=w/o,te={data1:N,data2:P,startPTS:U,endPTS:G,startDTS:U,endDTS:G,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.isAudioContiguous=!0,te}remuxEmptyAudio(e,t,i,s){const r=e.inputTimeScale,o=e.samplerate?e.samplerate:r,a=r/o,l=this.nextAudioPts,c=this._initDTS,d=c.baseTime*9e4/c.timescale,u=(l!==null?l:s.startDTS*r)+d,h=s.endDTS*r+d,f=a*MD,m=Math.ceil((h-u)/f),g=DD.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(Ve.warn("[mp4-remuxer]: remux empty Audio"),!g){Ve.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const b=[];for(let w=0;w<m;w++){const x=u+w*f;b.push({unit:g,pts:x,dts:x})}return e.samples=b,this.remuxAudio(e,t,i,!1)}}function Uo(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function Fit(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function cG(n,e,t,i){const s=n.samples.length;if(!s)return;const r=n.inputTimeScale;for(let a=0;a<s;a++){const l=n.samples[a];l.pts=Uo(l.pts-t.baseTime*r/t.timescale,e*r)/r,l.dts=Uo(l.dts-i.baseTime*r/i.timescale,e*r)/r}const o=n.samples;return n.samples=[],{samples:o}}function dG(n,e,t){const i=n.samples.length;if(!i)return;const s=n.inputTimeScale;for(let o=0;o<i;o++){const a=n.samples[o];a.pts=Uo(a.pts-t.baseTime*s/t.timescale,e*s)/s}n.samples.sort((o,a)=>o.pts-a.pts);const r=n.samples;return n.samples=[],{samples:r}}class ND{constructor(e,t,i,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=s,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class Bit{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(Gtt(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=Dj(e);s.audio&&(t=FD(s.audio,_i.AUDIO)),s.video&&(i=FD(s.video,_i.VIDEO));const r={};s.audio&&s.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:s.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:s.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:Ve.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,i,s,r,o){var a,l;let{initPTS:c,lastEndTime:d}=this;const u={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};Mt(d)||(d=this.lastEndTime=r||0);const h=t.samples;if(!(h!=null&&h.length))return u;const f={initPTS:void 0,timescale:1};let m=this.initData;if((a=m)!=null&&a.length||(this.generateInitSegment(h),m=this.initData),!((l=m)!=null&&l.length))return Ve.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const g=qtt(h,m),b=Wtt(m,h),w=b===null?r:b;(Vit(c,w,r,g)||f.timescale!==c.timescale&&o)&&(f.initPTS=w-r,c&&c.timescale===1&&Ve.warn("Adjusting initPTS by ".concat(f.initPTS-c.baseTime)),this.initPTS=c={baseTime:f.initPTS,timescale:1});const x=e?w-c.baseTime/c.timescale:d,k=x+g;Ytt(m,h,c.baseTime/c.timescale),g>0?this.lastEndTime=k:(Ve.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const E=!!m.audio,T=!!m.video;let P="";E&&(P+="audio"),T&&(P+="video");const C={data1:h,startPTS:x,startDTS:x,endPTS:k,endDTS:k,type:P,hasAudio:E,hasVideo:T,nb:1,dropped:0};return u.audio=C.type==="audio"?C:void 0,u.video=C.type!=="audio"?C:void 0,u.initSegment=f,u.id3=cG(i,r,c,c),s.samples.length&&(u.text=dG(s,r,c)),u}}function Vit(n,e,t,i){if(n===null)return!0;const s=Math.max(i,1),r=e-n.baseTime/n.timescale;return Math.abs(r-t)>s}function FD(n,e){const t=n==null?void 0:n.codec;if(t&&t.length>4)return t;if(e===_i.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return Aw(t,!1);const i="mp4a.40.5";return Ve.info('Parsed audio codec "'.concat(t,'" or audio object type not handled. Using "').concat(i,'"')),i}return Ve.warn('Unhandled video codec "'.concat(t,'"')),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let rc;try{rc=self.performance.now.bind(self.performance)}catch(n){Ve.debug("Unable to use Performance API on this environment"),rc=Fp==null?void 0:Fp.Date.now}const ry=[{demux:Tit,remux:Bit},{demux:fd,remux:sy},{demux:kit,remux:sy},{demux:$it,remux:sy}];ry.splice(2,0,{demux:Cit,remux:sy});class BD{constructor(e,t,i,s,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=s,this.id=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const r=i.transmuxing;r.executeStart=rc();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:c,discontinuity:d,trackSwitch:u,accurateTimeOffset:h,timeOffset:f,initSegmentChange:m}=s||a,{audioCodec:g,videoCodec:b,defaultInitPts:w,duration:x,initSegmentData:k}=l,E=Uit(o,t);if(E&&E.method==="AES-128"){const A=this.getDecrypter();if(A.isSync()){let R=A.softwareDecrypt(o,E.key.buffer,E.iv.buffer);if(i.part>-1&&(R=A.flush()),!R)return r.executeEnd=rc(),wE(i);o=new Uint8Array(R)}else return this.decryptionPromise=A.webCryptoDecrypt(o,E.key.buffer,E.iv.buffer).then(R=>{const M=this.push(R,null,i);return this.decryptionPromise=null,M}),this.decryptionPromise}const T=this.needsProbing(d,u);if(T){const A=this.configureTransmuxer(o);if(A)return Ve.warn("[transmuxer] ".concat(A.message)),this.observer.emit(W.ERROR,W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_PARSING_ERROR,fatal:!1,error:A,reason:A.message}),r.executeEnd=rc(),wE(i)}(d||u||m||T)&&this.resetInitSegment(k,g,b,x,t),(d||m||T)&&this.resetInitialTimestamp(w),c||this.resetContiguity();const P=this.transmux(o,E,f,h,i),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,r.executeEnd=rc(),P}flush(e){const t=e.transmuxing;t.executeStart=rc();const{decrypter:i,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return r.then(()=>this.flush(e));const o=[],{timeOffset:a}=s;if(i){const u=i.flush();u&&o.push(this.push(u,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return t.executeEnd=rc(),[wE(e)];const d=l.flush(a);return oy(d)?d.then(u=>(this.flushRemux(o,u,e),o)):(this.flushRemux(o,d,e),o)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:r,id3Track:o,textTrack:a}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;Ve.log("[transmuxer.ts]: Flushed fragment ".concat(i.sn).concat(i.part>-1?" p: "+i.part:""," of level ").concat(i.level));const d=this.remuxer.remux(s,r,o,a,c,l,!0,this.id);e.push({remuxResult:d,chunkMeta:i}),i.transmuxing.executeEnd=rc()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,r){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,t,i,s),a.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,r){let o;return t&&t.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,t,i,s,r):o=this.transmuxUnencrypted(e,i,s,r),o}transmuxUnencrypted(e,t,i,s){const{audioTrack:r,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,o,a,l,t,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,i,s,r){return this.demuxer.demuxSampleAes(e,t,i).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,i,s,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s,vendor:r}=this;let o;for(let h=0,f=ry.length;h<f;h++){var a;if((a=ry[h].demux)!=null&&a.probe(e)){o=ry[h];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,d=o.remux,u=o.demux;(!c||!(c instanceof d))&&(this.remuxer=new d(i,t,s,r)),(!l||!(l instanceof u))&&(this.demuxer=new u(i,t,s),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new b5(this.config)),e}}function Uit(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const wE=n=>({remuxResult:{},chunkMeta:n});function oy(n){return"then"in n&&n.then instanceof Function}class zit{constructor(e,t,i,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=r||null}}class Hit{constructor(e,t,i,s,r,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=o}}var uG={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function r(l,c,d,u,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new s(d,u||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,u;if(this._eventsCount===0)return c;for(u in d=this._events)e.call(d,u)&&c.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=t?t+c:c,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,m=new Array(f);h<f;h++)m[h]=u[h].fn;return m},a.prototype.listenerCount=function(c){var d=t?t+c:c,u=this._events[d];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,d,u,h,f,m){var g=t?t+c:c;if(!this._events[g])return!1;var b=this._events[g],w=arguments.length,x,k;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,u),!0;case 4:return b.fn.call(b.context,d,u,h),!0;case 5:return b.fn.call(b.context,d,u,h,f),!0;case 6:return b.fn.call(b.context,d,u,h,f,m),!0}for(k=1,x=new Array(w-1);k<w;k++)x[k-1]=arguments[k];b.fn.apply(b.context,x)}else{var E=b.length,T;for(k=0;k<E;k++)switch(b[k].once&&this.removeListener(c,b[k].fn,void 0,!0),w){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,d);break;case 3:b[k].fn.call(b[k].context,d,u);break;case 4:b[k].fn.call(b[k].context,d,u,h);break;default:if(!x)for(T=1,x=new Array(w-1);T<w;T++)x[T-1]=arguments[T];b[k].fn.apply(b[k].context,x)}}return!0},a.prototype.on=function(c,d,u){return r(this,c,d,u,!1)},a.prototype.once=function(c,d,u){return r(this,c,d,u,!0)},a.prototype.removeListener=function(c,d,u,h){var f=t?t+c:c;if(!this._events[f])return this;if(!d)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===d&&(!h||m.once)&&(!u||m.context===u)&&o(this,f);else{for(var g=0,b=[],w=m.length;g<w;g++)(m[g].fn!==d||h&&!m[g].once||u&&m[g].context!==u)&&b.push(m[g]);b.length?this._events[f]=b.length===1?b[0]:b:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=t?t+c:c,this._events[d]&&o(this,d)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(uG);var jit=uG.exports,k5=ftt(jit);class hG{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const o=(c,d)=>{d=d||{},d.frag=this.frag,d.id=this.id,c===W.ERROR&&(this.error=d.error),this.hls.trigger(c,d)};this.observer=new k5,this.observer.on(W.FRAG_DECRYPTED,o),this.observer.on(W.ERROR,o);const a=wh(r.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(r.workerPath||cit())){try{r.workerPath?(Ve.log("loading Web Worker ".concat(r.workerPath,' for "').concat(t,'"')),this.workerContext=uit(r.workerPath)):(Ve.log('injecting Web Worker for "'.concat(t,'"')),this.workerContext=dit()),this.onwmsg=u=>this.onWorkerMessage(u);const{worker:d}=this.workerContext;d.addEventListener("message",this.onwmsg),d.onerror=u=>{const h=new Error("".concat(u.message,"  (").concat(u.filename,":").concat(u.lineno,")"));r.enableWorker=!1,Ve.warn('Error in "'.concat(t,'" Web Worker, fallback to inline')),this.hls.trigger(W.ERROR,{type:fn.OTHER_ERROR,details:Xe.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})},d.postMessage({cmd:"init",typeSupported:l,vendor:"",id:t,config:JSON.stringify(r)})}catch(d){Ve.warn('Error setting up "'.concat(t,'" Web Worker, fallback to inline'),d),this.resetWorker(),this.error=null,this.transmuxer=new BD(this.observer,l,r,"",t)}return}this.transmuxer=new BD(this.observer,l,r,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,i,s,r,o,a,l,c,d){var u,h;c.transmuxing.start=self.performance.now();const{transmuxer:f}=this,m=o?o.start:r.start,g=r.decryptdata,b=this.frag,w=!(b&&r.cc===b.cc),x=!(b&&c.level===b.level),k=b?c.sn-b.sn:-1,E=this.part?c.part-this.part.index:-1,T=k===0&&c.id>1&&c.id===(b==null?void 0:b.stats.chunkCount),P=!x&&(k===1||k===0&&(E===1||T&&E<=0)),C=self.performance.now();(x||k||r.stats.parsing.start===0)&&(r.stats.parsing.start=C),o&&(E||!P)&&(o.stats.parsing.start=C);const A=!(b&&((u=r.initSegment)==null?void 0:u.url)===((h=b.initSegment)==null?void 0:h.url)),R=new Hit(w,P,l,x,m,A);if(!P||w||A){Ve.log("[transmuxer-interface, ".concat(r.type,"]: Starting new transmux session for sn: ").concat(c.sn," p: ").concat(c.part," level: ").concat(c.level," id: ").concat(c.id,"\n        discontinuity: ").concat(w,"\n        trackSwitch: ").concat(x,"\n        contiguous: ").concat(P,"\n        accurateTimeOffset: ").concat(l,"\n        timeOffset: ").concat(m,"\n        initSegmentChange: ").concat(A));const M=new zit(i,s,t,a,d);this.configureTransmuxer(M)}if(this.frag=r,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:c,state:R},e instanceof ArrayBuffer?[e]:[]);else if(f){const M=f.push(e,g,c,R);oy(M)?(f.async=!0,M.then(N=>{this.handleTransmuxComplete(N)}).catch(N=>{this.transmuxerError(N,c,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(M))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let i=t.flush(e);oy(i)||t.async?(oy(i)||(i=Promise.resolve(i)),i.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")})):this.handleFlushResult(i,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){Ve.warn("worker message received with no ".concat(t?"event name":"data"));return}const i=this.hls;if(this.hls)switch(t.event){case"init":{var s;const r=(s=this.workerContext)==null?void 0:s.objectURL;r&&self.URL.revokeObjectURL(r);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":Ve[t.data.logType]&&Ve[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function fG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Vp(n[t].attrs,e[t].attrs))return!1;return!0}function Vp(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>n[s]!==e[s])}function fS(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}const VD=100;class Git extends v5{constructor(e,t,i){super(e,t,i,"[audio-stream-controller]",sn.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(W.ERROR,this.onError,this),e.on(W.BUFFER_RESET,this.onBufferReset,this),e.on(W.BUFFER_CREATED,this.onBufferCreated,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(W.ERROR,this.onError,this),e.off(W.BUFFER_RESET,this.onBufferReset,this),e.off(W.BUFFER_CREATED,this.onBufferCreated,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){if(i==="main"){const o=t.cc;this.initPTS[t.cc]={baseTime:s,timescale:r},this.log("InitPTS for cc: ".concat(o," found from main: ").concat(s)),this.videoTrackCC=o,this.state===ht.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ht.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(VD),t>0&&e===-1?(this.log("Override startPosition with lastCurrentTime @".concat(t.toFixed(3))),e=t,this.state=ht.IDLE):(this.loadedmetadata=!1,this.state=ht.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ht.IDLE:this.doTickIdle();break;case ht.WAITING_TRACK:{var e;const{levels:i,trackId:s}=this,r=i==null||(e=i[s])==null?void 0:e.details;if(r){if(this.waitForCdnTuneIn(r))break;this.state=ht.WAITING_INIT_PTS}break}case ht.FRAG_LOADING_WAITING_RETRY:{var t;const i=performance.now(),s=this.retryDate;if(!s||i>=s||(t=this.media)!=null&&t.seeking){const{levels:r,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((r==null?void 0:r[o])||null),this.state=ht.IDLE}break}case ht.WAITING_INIT_PTS:{const i=this.waitingData;if(i){const{frag:s,part:r,cache:o,complete:a}=i;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ht.FRAG_LOADING;const l=o.flush(),c={frag:s,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc (".concat(s.cc,") cancelled because video is at cc ").concat(this.videoTrackCC)),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=zi.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);uS(c.end,this.config.maxFragLookUpTolerance,s)<0&&(this.log("Waiting fragment cc (".concat(s.cc,") @ ").concat(s.start," cancelled because another fragment at ").concat(c.end," is needed")),this.clearWaitingFragment())}}else this.state=ht.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ht.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:i,trackId:s}=this,r=e.config;if(!this.buffering||!i&&(this.startFragRequested||!r.startFragPrefetch)||!(t!=null&&t[s]))return;const o=t[s],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=ht.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,_i.AUDIO,sn.AUDIO));const c=this.getFwdBufferInfo(l,sn.AUDIO);if(c===null)return;const{bufferedTrack:d,switchingTrack:u}=this;if(!u&&this._streamEnded(c,a)){e.trigger(W.BUFFER_EOS,{type:"audio"}),this.state=ht.ENDED;return}const h=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,sn.MAIN),f=c.len,m=this.getMaxBufferLength(h==null?void 0:h.len),g=a.fragments,b=g[0].start;let w=this.flushing?this.getLoadPosition():c.end;if(u&&i){const T=this.getLoadPosition();d&&!Vp(u.attrs,d.attrs)&&(w=T),a.PTSKnown&&T<b&&(c.end>b||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=b+.05)}if(f>=m&&!u&&w<g[g.length-1].start)return;let x=this.getNextFragment(w,a),k=!1;if(x&&this.isLoopLoading(x,w)&&(k=!!x.gap,x=this.getNextFragmentLoopLoading(x,a,c,sn.MAIN,m)),!x){this.bufferFlushed=!0;return}const E=h&&x.start>h.end+a.targetduration;if(E||!(h!=null&&h.len)&&c.len){const T=this.getAppendedFrag(x.start,sn.MAIN);if(T===null||(k||(k=!!T.gap||!!E&&h.len===0),E&&!k||k&&c.nextStart&&c.nextStart<T.end))return}this.loadFragment(x,o,w)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new Bp(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?this.setInterval(VD):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state=ht.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=ht.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(W.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var i;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:s}=this,{details:r,id:o}=t;if(!s){this.warn("Audio tracks were reset while loading level ".concat(o));return}this.log("Audio track ".concat(o," loaded [").concat(r.startSN,",").concat(r.endSN,"]").concat(r.lastPartSn?"[part-".concat(r.lastPartSn,"-").concat(r.lastPartIndex,"]"):"",",duration:").concat(r.totalduration));const a=s[o];let l=0;if(r.live||(i=a.details)!=null&&i.live){this.checkLiveUpdate(r);const d=this.mainDetails;if(r.deltaUpdateFailed||!d)return;if(!a.details&&r.hasProgramDateTime&&d.hasProgramDateTime)Lw(r,d),l=r.fragments[0].start;else{var c;l=this.alignPlaylists(r,a.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}a.details=r,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!r.live)&&this.setStartPosition(this.mainDetails||r,l),this.state===ht.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=ht.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:s,payload:r}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn("Audio tracks were reset while fragment load was in progress. Fragment ".concat(i.sn," of level ").concat(i.level," will not be buffered"));return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const d=c.details;if(!d){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const u=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new hG(this.hls,sn.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[i.cc],m=(t=i.initSegment)==null?void 0:t.data;if(f!==void 0){const b=s?s.index:-1,w=b!==-1,x=new g5(i.level,i.sn,i.stats.chunkCount,r.byteLength,b,w);h.push(r,m,u,"",i,s,d.totalduration,!1,x,f)}else{this.log("Unknown video PTS for cc ".concat(i.cc,", waiting for video PTS before demuxing audio frag ").concat(i.sn," of [").concat(d.startSN," ,").concat(d.endSN,"],track ").concat(a));const{cache:g}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new Xj,complete:!1};g.push(new Uint8Array(r)),this.waitingVideoCC=this.videoTrackCC,this.state=ht.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type!==sn.AUDIO){if(!this.loadedmetadata&&i.type===sn.MAIN){const r=this.videoBuffer||this.media;r&&zi.getBuffered(r).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(i)){this.warn("Fragment ".concat(i.sn).concat(s?" p: "+s.index:""," of level ").concat(i.level," finished buffering, but was aborted. state: ").concat(this.state,", audioSwitch: ").concat(this.switchingTrack?this.switchingTrack.name:"false"));return}if(i.sn!=="initSegment"){this.fragPrevious=i;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(W.AUDIO_TRACK_SWITCHED,Xs({},r)))}this.fragBufferedComplete(i,s)}onError(e,t){var i;if(t.fatal){this.state=ht.ERROR;return}switch(t.details){case Xe.FRAG_GAP:case Xe.FRAG_PARSING_ERROR:case Xe.FRAG_DECRYPT_ERROR:case Xe.FRAG_LOAD_ERROR:case Xe.FRAG_LOAD_TIMEOUT:case Xe.KEY_LOAD_ERROR:case Xe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(sn.AUDIO,t);break;case Xe.AUDIO_TRACK_LOAD_ERROR:case Xe.AUDIO_TRACK_LOAD_TIMEOUT:case Xe.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ht.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===Yn.AUDIO_TRACK&&(this.state=ht.IDLE);break;case Xe.BUFFER_APPEND_ERROR:case Xe.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===Xe.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Xe.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==_i.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==_i.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ht.ENDED&&(this.state=ht.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,sn.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:r,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:d}=a,{details:u}=d,{audio:h,text:f,id3:m,initSegment:g}=r;if(this.fragContextChanged(l)||!u){this.fragmentTracker.removeFragment(l);return}if(this.state=ht.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const b=l.initSegment||l;this._bufferInitSegment(d,g.tracks,b,o),s.trigger(W.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:i,tracks:g.tracks})}if(h){const{startPTS:b,endPTS:w,startDTS:x,endDTS:k}=h;c&&(c.elementaryStreams[_i.AUDIO]={startPTS:b,endPTS:w,startDTS:x,endDTS:k}),l.setElementaryStreamInfo(_i.AUDIO,b,w,x,k),this.bufferFragmentData(h,l,c,o)}if(m!=null&&(t=m.samples)!=null&&t.length){const b=Is({id:i,frag:l,details:u},m);s.trigger(W.FRAG_PARSING_METADATA,b)}if(f){const b=Is({id:i,frag:l,details:u},f);s.trigger(W.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,t,i,s){if(this.state!==ht.PARSING)return;t.video&&delete t.video;const r=t.audio;if(!r)return;r.id="audio";const o=e.audioCodec;this.log("Init audio buffer, container:".concat(r.container,", codecs[level/parsed]=[").concat(o,"/").concat(r.codec,"]")),o&&o.split(",").length===1&&(r.levelCodec=o),this.hls.trigger(W.BUFFER_CODECS,t);const a=r.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:a};this.hls.trigger(W.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||s===Ws.NOT_LOADED||s===Ws.PARTIAL){var r;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((r=t.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log("Waiting for video PTS in continuity counter ".concat(e.cc," of live stream before loading audio fragment ").concat(e.sn," of level ").concat(this.trackId)),this.state=ht.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==t.details.fragments[0].start&&Lw(t.details,o)}else this.startFragRequested=!0,super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:i}=this,s=i==null?void 0:i.attrs,r=e.attrs;t&&s&&(s.CHANNELS!==r.CHANNELS||i.name!==e.name||i.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(W.AUDIO_TRACK_SWITCHED,Xs({},e))}}class Wit extends m5{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVEL_LOADING,this.onLevelLoading,this),e.off(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(W.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==s){this.warn("Audio track with id:".concat(i," and group:").concat(s," not found in active group ").concat(o==null?void 0:o.groupId));return}const a=o.details;o.details=t.details,this.log("Audio track ".concat(i,' "').concat(o.name,'" lang:').concat(o.lang," group:").concat(s," loaded [").concat(r.startSN,"-").concat(r.endSN,"]")),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(s==null?void 0:s.length)!==(i==null?void 0:i.length)||i!=null&&i.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,f)=>{h.id=f});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!r&&l){const h=wl(l,a,pf);if(h>-1)r=a[h];else{const f=wl(l,this.tracks);r=this.tracks[f]}}let c=this.findTrackId(r);c===-1&&r&&(c=this.findTrackId(null));const d={audioTracks:a};this.log("Updating audio tracks, ".concat(a.length," track(s) found in group(s): ").concat(i==null?void 0:i.join(","))),this.hls.trigger(W.AUDIO_TRACKS_UPDATED,d);const u=this.trackId;if(c!==-1&&u===-1)this.setAudioTrack(c);else if(a.length&&u===-1){var o;const h=new Error("No audio track selected for current audio group-ID(s): ".concat((o=this.groupIds)==null?void 0:o.join(",")," track count: ").concat(a.length));this.warn(h.message),this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}else this.shouldReloadPlaylist(r)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Yn.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&Kf(e,s,pf))return s;const r=wl(e,this.tracksInGroup,pf);if(r>-1){const o=this.tracksInGroup[r];return this.setAudioTrack(r),o}else if(s){let o=t.loadLevel;o===-1&&(o=t.firstAutoLevel);const a=Wnt(e,t.levels,i,o,pf);if(a===-1)return null;t.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=wl(e,i);if(o>-1)return i[o]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn("Invalid audio track id: ".concat(e));return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===i&&r||(this.log("Switching to audio-track ".concat(e,' "').concat(s.name,'" lang:').concat(s.lang," group:").concat(s.groupId," channels:").concat(s.channels)),this.trackId=e,this.currentTrack=s,this.hls.trigger(W.AUDIO_TRACK_SWITCHING,Xs({},s)),r))return;const o=this.switchParams(s.url,i==null?void 0:i.details,s.details);this.loadPlaylist(o)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(!(this.selectDefaultTrack&&!s.default)&&(!e||Kf(e,s,pf)))return i}if(e){const{name:i,lang:s,assocLang:r,characteristics:o,audioCodec:a,channels:l}=e;for(let c=0;c<t.length;c++){const d=t[c];if(Kf({name:i,lang:s,assocLang:r,characteristics:o,audioCodec:a,channels:l},d,pf))return c}for(let c=0;c<t.length;c++){const d=t[c];if(Vp(e.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const d=t[c];if(Vp(e.attrs,d.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const i=t.id,s=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(o))}this.log("loading audio-track playlist ".concat(i,' "').concat(t.name,'" lang:').concat(t.lang," group:").concat(s)),this.clearTimer(),this.hls.trigger(W.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:e||null})}}}const UD=500;class qit extends v5{constructor(e,t,i){super(e,t,i,"[subtitle-stream-controller]",sn.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.ERROR,this.onError,this),e.on(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(W.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(W.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.ERROR,this.onError,this),e.off(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(W.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(W.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ht.IDLE,this.setInterval(UD),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(this.fragPrevious=i,this.state=ht.IDLE,!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let o;const a=i.start;for(let c=0;c<r.length;c++)if(a>=r[c].start&&a<=r[c].end){o=r[c];break}const l=i.start+i.duration;o?o.end=l:(o={start:a,end:l},r.push(o)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(i===0&&s!==Number.POSITIVE_INFINITY){const r=s-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=r){o.shift();continue}else if(o[a].start<r)o[a].start=r;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(i,r,sn.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===sn.MAIN){var i;(i=this.media)!=null&&i.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const i=t.frag;(i==null?void 0:i.type)===sn.SUBTITLE&&(t.details===Xe.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ht.STOPPED&&(this.state=ht.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&fG(this.levels,t)){this.levels=t.map(i=>new Bp(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const s=new Bp(i);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,sn.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.setInterval(UD)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:r}=this,{details:o,id:a}=t;if(!r){this.warn("Subtitle tracks were reset while loading level ".concat(a));return}const l=r[a];if(a>=r.length||!l)return;this.log("Subtitle track ".concat(a," loaded [").concat(o.startSN,",").concat(o.endSN,"]").concat(o.lastPartSn?"[part-".concat(o.lastPartSn,"-").concat(o.lastPartIndex,"]"):"",",duration:").concat(o.totalduration)),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(i=l.details)!=null&&i.live){const u=this.mainDetails;if(o.deltaUpdateFailed||!u)return;const h=u.fragments[0];if(!l.details)o.hasProgramDateTime&&u.hasProgramDateTime?(Lw(o,u),c=o.fragments[0].start):h&&(c=h.start,dS(o,c));else{var d;c=this.alignPlaylists(o,l.details,(d=this.levelLastLoaded)==null?void 0:d.details),c===0&&h&&(c=h.start,dS(o,c))}}l.details=o,this.levelLastLoaded=l,a===s&&(!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,c),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===ht.IDLE&&($w(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&s!=null&&s.key&&s.iv&&s.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer).catch(a=>{throw r.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:t}),a}).then(a=>{const l=performance.now();r.trigger(W.FRAG_DECRYPTED,{frag:t,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn("".concat(a.name,": ").concat(a.message)),this.state=ht.IDLE})}}doTick(){if(!this.media){this.state=ht.IDLE;return}if(this.state===ht.IDLE){const{currentTrackId:e,levels:t}=this,i=t==null?void 0:t[e];if(!i||!t.length||!i.details)return;const{config:s}=this,r=this.getLoadPosition(),o=zi.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:a,len:l}=o,c=this.getFwdBufferInfo(this.media,sn.MAIN),d=i.details,u=this.getMaxBufferLength(c==null?void 0:c.len)+d.levelTargetDuration;if(l>u)return;const h=d.fragments,f=h.length,m=d.edge;let g=null;const b=this.fragPrevious;if(a<m){const w=s.maxFragLookUpTolerance,x=a>m-w?0:w;g=$w(b,h,Math.max(h[0].start,a),x),!g&&b&&b.start<h[0].start&&(g=h[0])}else g=h[f-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),g.sn!=="initSegment"){const w=g.sn-d.startSN,x=h[w-1];x&&x.cc===g.cc&&this.fragmentTracker.getState(x)===Ws.NOT_LOADED&&(g=x)}this.fragmentTracker.getState(g)===Ws.NOT_LOADED&&this.loadFragment(g,i,a)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,i){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,i))}get mediaBufferTimeRanges(){return new Kit(this.tracksBuffered[this.currentTrackId]||[])}}class Kit{constructor(e){this.buffered=void 0;const t=(i,s,r)=>{if(s=s>>>0,s>r-1)throw new DOMException("Failed to execute '".concat(i,"' on 'TimeRanges': The index provided (").concat(s,") is greater than the maximum bound (").concat(r,")"));return e[s][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}class Yit extends m5{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=ty(this.media.textTracks);for(let r=0;r<i.length;r++)if(i[r].mode==="hidden")t=i[r];else if(i[r].mode==="showing"){t=i[r];break}const s=this.findTrackForTextTrack(t);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVEL_LOADING,this.onLevelLoading,this),e.off(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(W.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),ty(this.media.textTracks).forEach(t=>{Df(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,o=this.tracksInGroup[i];if(!o||o.groupId!==s){this.warn("Subtitle track with id:".concat(i," and group:").concat(s," not found in active group ").concat(o==null?void 0:o.groupId));return}const a=o.details;o.details=t.details,this.log("Subtitle track ".concat(i,' "').concat(o.name,'" lang:').concat(o.lang," group:").concat(s," loaded [").concat(r.startSN,"-").concat(r.endSN,"]")),i===this.trackId&&this.playlistLoaded(i,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(s==null?void 0:s.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(d=>!i||i.indexOf(d.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(d=>d.default)&&(this.selectDefaultTrack=!1),o.forEach((d,u)=>{d.id=u});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!r&&a){this.selectDefaultTrack=!1;const d=wl(a,o);if(d>-1)r=o[d];else{const u=wl(a,this.tracks);r=this.tracks[u]}}let l=this.findTrackId(r);l===-1&&r&&(l=this.findTrackId(null));const c={subtitleTracks:o};this.log("Updating subtitle tracks, ".concat(o.length,' track(s) found in "').concat(i==null?void 0:i.join(","),'" group-id')),this.hls.trigger(W.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(r)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const r=t[s];if(!(i&&!r.default||!i&&!e)&&(!e||Kf(r,e)))return s}if(e){for(let s=0;s<t.length;s++){const r=t[s];if(Vp(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<t.length;s++){const r=t[s];if(Vp(e.attrs,r.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(fS(s,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Yn.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&Kf(e,i))return i;const s=wl(e,this.tracksInGroup);if(s>-1){const r=this.tracksInGroup[s];return this.setSubtitleTrack(s),r}else{if(i)return null;{const r=wl(e,t);if(r>-1)return t[r]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const i=t.id,s=t.groupId;let r=t.url;if(e)try{r=e.addDirectives(r)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(o))}this.log("Loading subtitle playlist for id ".concat(i)),this.hls.trigger(W.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=ty(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter(r=>fS(i,r))[0],s||this.warn('Unable to find subtitle TextTrack with name "'.concat(i.name,'" and language "').concat(i.lang,'"'))),[].slice.call(t).forEach(r=>{r.mode!=="disabled"&&r!==s&&(r.mode="disabled")}),s){const r=this.subtitleDisplay?"showing":"hidden";s.mode!==r&&(s.mode=r)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Mt(e)){this.warn("Invalid subtitle track id: ".concat(e));return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(W.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;this.log("Switching to subtitle-track ".concat(e)+(s?' "'.concat(s.name,'" lang:').concat(s.lang," group:").concat(s.groupId):""));const{id:o,groupId:a="",name:l,type:c,url:d}=s;this.hls.trigger(W.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:d});const u=this.switchParams(s.url,i==null?void 0:i.details,s.details);this.loadPlaylist(u)}}class Xit{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,i){const s=this.queues[t];s.push(e),s.length===1&&!i&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const i=new Promise(r=>{t=r}),s={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),i}executeNext(e){const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(s){Ve.warn('[buffer-operation-queue]: Exception executing "'.concat(e,'" SourceBuffer operation: ').concat(s)),i.onError(s);const r=this.buffers[e];r!=null&&r.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const zD=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class Qit{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=i=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:i,mediaSource:s}=this;this.log("Media source opened"),i&&(i.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(W.MEDIA_ATTACHED,{media:i,mediaSource:s})),s&&s.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:s}=this;i!==s&&Ve.error("Media element src was set while attaching MediaSource (".concat(s," > ").concat(i,")"))},this.hls=e;const t="[buffer-controller]";this.appendSource=ont(wh(e.config.preferManagedMediaSource)),this.log=Ve.log.bind(Ve,t),this.warn=Ve.warn.bind(Ve,t),this.error=Ve.error.bind(Ve,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.BUFFER_RESET,this.onBufferReset,this),e.on(W.BUFFER_APPENDING,this.onBufferAppending,this),e.on(W.BUFFER_CODECS,this.onBufferCodecs,this),e.on(W.BUFFER_EOS,this.onBufferEos,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(W.FRAG_PARSED,this.onFragParsed,this),e.on(W.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.BUFFER_RESET,this.onBufferReset,this),e.off(W.BUFFER_APPENDING,this.onBufferAppending,this),e.off(W.BUFFER_CODECS,this.onBufferCodecs,this),e.off(W.BUFFER_EOS,this.onBufferEos,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(W.FRAG_PARSED,this.onFragParsed,this),e.off(W.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new Xit(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log("".concat(this.bufferCodecEventsExpected," bufferCodec event(s) expected"))}onMediaAttaching(e,t){const i=this.media=t.media,s=wh(this.appendSource);if(i&&s){var r;const o=this.mediaSource=new s;this.log("created media source: ".concat((r=o.constructor)==null?void 0:r.name)),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{i.removeAttribute("src");const l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&o instanceof l,HD(i),Zit(i,a),i.load()}catch(l){i.src=a}else i.src=a;i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:i}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(s){this.warn("onMediaDetaching: ".concat(s.message," while calling endOfStream"))}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&HD(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(W.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var i;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(s){this.warn("onBufferReset ".concat(e),s)}}onBufferCodecs(e,t){const i=this.getSourceBufferTypes().length,s=Object.keys(t);if(s.forEach(o=>{if(i){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:c,codec:d,levelCodec:u,container:h,metadata:f}=t[o],m=dD(l.codec,l.levelCodec),g=m==null?void 0:m.replace(zD,"$1");let b=dD(d,u);const w=(a=b)==null?void 0:a.replace(zD,"$1");if(b&&g!==w){o.slice(0,5)==="audio"&&(b=Aw(b,this.appendSource));const x="".concat(h,";codecs=").concat(b);this.appendChangeType(o,x),this.log("switching codec ".concat(m," to ").concat(b)),this.tracks[o]={buffer:l.buffer,codec:d,container:h,levelCodec:u,metadata:f,id:c}}}}else this.pendingTracks[o]=t[o]}),i)return;const r=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==r&&(this.log("".concat(r," bufferCodec event(s) expected ").concat(s.join(","))),this.bufferCodecEventsExpected=r),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:i}=this,s={execute:()=>{const r=this.sourceBuffer[e];r&&(this.log("changing ".concat(e," sourceBuffer type to ").concat(t)),r.changeType(t)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:r=>{this.warn("Failed to change ".concat(e," SourceBuffer type"),r)}};i.append(s,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:i,operationQueue:s,tracks:r}=this,{data:o,type:a,frag:l,part:c,chunkMeta:d}=t,u=d.buffering[a],h=self.performance.now();u.start=h;const f=l.stats.buffering,m=c?c.stats.buffering:null;f.start===0&&(f.start=h),m&&m.start===0&&(m.start=h);const g=r.audio;let b=!1;a==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(b=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const w=l.start,x={execute:()=>{if(u.executeStart=self.performance.now(),b){const k=this.sourceBuffer[a];if(k){const E=w-k.timestampOffset;Math.abs(E)>=.1&&(this.log("Updating audio SourceBuffer timestampOffset to ".concat(w," (delta: ").concat(E,") sn: ").concat(l.sn,")")),k.timestampOffset=w)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const k=self.performance.now();u.executeEnd=u.end=k,f.first===0&&(f.first=k),m&&m.first===0&&(m.first=k);const{sourceBuffer:E}=this,T={};for(const P in E)T[P]=zi.getBuffered(E[P]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(W.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:d,parent:l.type,timeRanges:T})},onError:k=>{const E={type:fn.MEDIA_ERROR,parent:l.type,details:Xe.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:c,chunkMeta:d,error:k,err:k,fatal:!1};if(k.code===DOMException.QUOTA_EXCEEDED_ERR)E.details=Xe.BUFFER_FULL_ERROR;else{const T=++this.appendErrors[a];E.details=Xe.BUFFER_APPEND_ERROR,this.warn("Failed ".concat(T,"/").concat(i.config.appendErrorMaxRetry,' times to append segment in "').concat(a,'" sourceBuffer')),T>=i.config.appendErrorMaxRetry&&(E.fatal=!0)}i.trigger(W.ERROR,E)}};s.append(x,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:i}=this,s=r=>({execute:this.removeExecutor.bind(this,r,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(W.BUFFER_FLUSHED,{type:r})},onError:o=>{this.warn("Failed to remove from ".concat(r," SourceBuffer"),o)}});t.type?i.append(s(t.type),t.type):this.getSourceBufferTypes().forEach(r=>{i.append(s(r),r)})}onFragParsed(e,t){const{frag:i,part:s}=t,r=[],o=s?s.elementaryStreams:i.elementaryStreams;o[_i.AUDIOVIDEO]?r.push("audiovideo"):(o[_i.AUDIO]&&r.push("audio"),o[_i.VIDEO]&&r.push("video"));const a=()=>{const l=self.performance.now();i.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const c=s?s.stats:i.stats;this.hls.trigger(W.FRAG_BUFFERED,{frag:i,part:s,stats:c,id:i.type})};r.length===0&&this.warn("Fragments must have at least one ElementaryStreamType set. type: ".concat(i.type," level: ").concat(i.level," sn: ").concat(i.sn)),this.blockBuffers(a,r)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((s,r)=>{const o=this.sourceBuffer[r];return o&&(!t.type||t.type===r)&&(o.ending=!0,o.ended||(o.ended=!0,this.log("".concat(r," sourceBuffer now EOS")))),s&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(r=>{const o=this.sourceBuffer[r];o&&(o.ending=!1)});const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: ".concat(s.readyState));return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.getSourceBufferTypes().length)return;const r=e.config,o=i.currentTime,a=t.levelTargetDuration,l=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(Mt(l)&&l>0){const c=Math.max(l,a),d=Math.floor(o/a)*a-c;this.flushBackBuffer(o,a,d)}if(Mt(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const c=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),d=Math.max(c,a),u=Math.floor(o/a)*a+d;this.flushFrontBuffer(o,a,u)}}flushBackBuffer(e,t,i){const{details:s,sourceBuffer:r}=this;this.getSourceBufferTypes().forEach(a=>{const l=r[a];if(l){const c=zi.getBuffered(l);if(c.length>0&&i>c.start(0)){if(this.hls.trigger(W.BACK_BUFFER_REACHED,{bufferEnd:i}),s!=null&&s.live)this.hls.trigger(W.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l.ended&&c.end(c.length-1)-e<t*2){this.log("Cannot flush ".concat(a," back buffer while SourceBuffer is in ended state"));return}this.hls.trigger(W.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:a})}}})}flushFrontBuffer(e,t,i){const{sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(o=>{const a=s[o];if(a){const l=zi.getBuffered(a),c=l.length;if(c<2)return;const d=l.start(c-1),u=l.end(c-1);if(i>d||e>=d&&e<=u)return;if(a.ended&&e-u<2*t){this.log("Cannot flush ".concat(o," front buffer while SourceBuffer is in ended state"));return}this.hls.trigger(W.BUFFER_FLUSHING,{startOffset:d,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:i,mediaSource:s}=this,r=e.fragments[0].start+e.totalduration,o=i.duration,a=Mt(s.duration)?s.duration:0;e.live&&t.config.liveDurationInfinity?(s.duration=1/0,this.updateSeekableRange(e)):(r>a&&r>o||!Mt(o))&&(this.log("Updating Media Source duration to ".concat(r.toFixed(3))),s.duration=r)}updateSeekableRange(e){const t=this.mediaSource,i=e.fragments;if(i.length&&e.live&&t!=null&&t.setLiveSeekableRange){const r=Math.max(0,i[0].start),o=Math.max(r,r+e.totalduration);this.log("Media Source duration is set to ".concat(t.duration,". Setting seekable range to ").concat(r,"-").concat(o,".")),t.setLiveSeekableRange(r,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:i}=this,s=Object.keys(i).length;if(s&&(!e||s===2||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};const r=this.getSourceBufferTypes();if(r.length)this.hls.trigger(W.BUFFER_CREATED,{tracks:this.tracks}),r.forEach(o=>{t.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const r in e)if(!t[r]){var s;const o=e[r];if(!o)throw Error("source buffer exists for track ".concat(r,", however track does not"));let a=((s=o.levelCodec)==null?void 0:s.indexOf(","))===-1?o.levelCodec:o.codec;a&&r.slice(0,5)==="audio"&&(a=Aw(a,this.appendSource));const l="".concat(o.container,";codecs=").concat(a);this.log("creating sourceBuffer(".concat(l,")"));try{const c=t[r]=i.addSourceBuffer(l),d=r;this.addBufferListener(d,"updatestart",this._onSBUpdateStart),this.addBufferListener(d,"updateend",this._onSBUpdateEnd),this.addBufferListener(d,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(d,"bufferedchange",(u,h)=>{const f=h.removedRanges;f!=null&&f.length&&this.hls.trigger(W.BUFFER_FLUSHED,{type:r})}),this.tracks[r]={buffer:c,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(c){this.error("error while trying to add sourceBuffer: ".concat(c.message)),this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:r,mimeType:l})}}}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i==null?void 0:i.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:i}=this;i.current(e).onComplete(),i.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var i;const s=new Error("".concat(e," SourceBuffer error. MediaSource readyState: ").concat((i=this.mediaSource)==null?void 0:i.readyState));this.error("".concat(s),t),this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.operationQueue.current(e);r&&r.onError(s)}removeExecutor(e,t,i){const{media:s,mediaSource:r,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!s||!r||!l){this.warn("Attempting to remove from the ".concat(e," SourceBuffer, but it does not exist")),o.shiftAndExecuteNext(e);return}const c=Mt(s.duration)?s.duration:1/0,d=Mt(r.duration)?r.duration:1/0,u=Math.max(0,t),h=Math.min(i,c,d);h>u&&(!l.ending||l.ended)?(l.ended=!1,this.log("Removing [".concat(u,",").concat(h,"] from the ").concat(e," SourceBuffer")),l.remove(u,h)):o.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.sourceBuffer[t];if(!i){if(!this.pendingTracks[t])throw new Error("Attempting to append to the ".concat(t," SourceBuffer, but it does not exist"));return}i.ended=!1,i.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:i}=this,s=t.map(r=>i.appendBlocker(r));Promise.all(s).then(()=>{e(),t.forEach(r=>{const o=this.sourceBuffer[r];o!=null&&o.updating||i.shiftAndExecuteNext(r)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,i){const s=this.sourceBuffer[e];if(!s)return;const r=i.bind(this,e);this.listeners[e].push({event:t,listener:r}),s.addEventListener(t,r)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(i=>{t.removeEventListener(i.event,i.listener)})}}function HD(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function Zit(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}const Jit={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},pG=n=>String.fromCharCode(Jit[n]||n),ha=15,Jl=100,est={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},tst={17:2,18:4,21:6,22:8,23:10,19:13,20:15},nst={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},ist={25:2,26:4,29:6,30:8,31:10,27:13,28:15},sst=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class rst{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;Ve.log("".concat(this.time," [").concat(e,"] ").concat(i))}}}const Ru=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class mG{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class ost{constructor(){this.uchar=" ",this.penState=new mG}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class ast{constructor(e){this.chars=[],this.pos=0,this.currPenState=new mG,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Jl;t++)this.chars.push(new ost);this.logger=e}equals(e){for(let t=0;t<Jl;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Jl;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Jl;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Jl&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Jl)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=pG(e);if(this.pos>=Jl){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Jl;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Jl;i++){const s=this.chars[i].uchar;s!==" "&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class xE{constructor(e){this.rows=[],this.currRow=ha-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ha;t++)this.rows.push(new ast(e));this.logger=e}reset(){for(let e=0;e<ha;e++)this.rows[e].clear();this.currRow=ha-1}equals(e){let t=!0;for(let i=0;i<ha;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<ha;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ha;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let a=0;a<ha;a++)this.rows[a].clear();const r=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[r].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(o.rows[r+c])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,o=Math.max(r-1,0);i.setCursor(e.indent),e.color=i.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let r=0;r<ha;r++){const o=this.rows[r].getTextString();o&&(s=r+1,e?t.push("Row "+s+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join("\n")),i}getTextAndFormat(){return this.rows}}class jD{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new xE(i),this.nonDisplayedMemory=new xE(i),this.lastOutputScreen=new xE(i),this.currRollUpRow=this.displayedMemory.rows[ha-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ha-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class GD{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=cst(),this.logger=void 0;const s=this.logger=new rst;this.channels=[null,new jD(e,t,s),new jD(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const s=t[i]&127,r=t[i+1]&127;let o=!1,a=null;if(s===0&&r===0)continue;this.logger.log(3,()=>"["+Ru([t[i],t[i+1]])+"] -> ("+Ru([s,r])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(lst(s,r,l)){wv(null,null,l),this.logger.log(3,()=>"Repeated command ("+Ru([s,r])+") is dropped");continue}wv(s,r,this.cmdHistory),o=this.parseCmd(s,r),o||(o=this.parseMidrow(s,r)),o||(o=this.parsePAC(s,r)),o||(o=this.parseBackgroundAttributes(s,r))}else wv(null,null,l);if(!o&&(a=this.parseChars(s,r),a)){const d=this.currentChannel;d&&d>0?this.channels[d].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Ru([s,r])+" orig: "+Ru([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(i||s))return!1;const r=e===20||e===21||e===23?1:2,o=this.channels[r];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return s?(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ru([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(e===16||e===24)&&t>=64&&t<=95;if(!(s||r))return!1;const o=e<=23?1:2;t>=64&&t<=95?i=o===1?est[e]:nst[e]:i=o===1?tst[e]:ist[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(i,t)),this.currentChannel=o,!0):!1}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,s.underline=(i&1)===1,i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((i-16)/2)*4,s}parseChars(e,t){let i,s=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let o;r===17?o=t+80:r===18?o=t+112:o=t+144,this.logger.log(2,()=>"Special char '"+pG(o)+"' in channel "+i),s=[o]}else e>=32&&e<=127&&(s=t===0?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+Ru(s).join(",")),s}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=45&&t<=47;if(!(i||s))return!1;let r;const o={};e===16||e===24?(r=Math.floor((t-32)/2),o.background=sst[r],t%2===1&&(o.background=o.background+"_semi")):t===45?o.background="transparent":(o.foreground="black",t===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}wv(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function wv(n,e,t){t.a=n,t.b=e}function lst(n,e,t){return t.a===n&&t.b===e}function cst(){return{a:null,b:null}}class xv{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var E5=function(){if(Fp!=null&&Fp.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function i(a){return t(n,a)}function s(a){return t(e,a)}function r(a,...l){let c=1;for(;c<arguments.length;c++){const d=arguments[c];for(const u in d)a[u]=d[u]}return a}function o(a,l,c){const d=this,u={enumerable:!0};d.hasBeenReset=!1;let h="",f=!1,m=a,g=l,b=c,w=null,x="",k=!0,E="auto",T="start",P=50,C="middle",A=50,R="middle";Object.defineProperty(d,"id",r({},u,{get:function(){return h},set:function(M){h=""+M}})),Object.defineProperty(d,"pauseOnExit",r({},u,{get:function(){return f},set:function(M){f=!!M}})),Object.defineProperty(d,"startTime",r({},u,{get:function(){return m},set:function(M){if(typeof M!="number")throw new TypeError("Start time must be set to a number.");m=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",r({},u,{get:function(){return g},set:function(M){if(typeof M!="number")throw new TypeError("End time must be set to a number.");g=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",r({},u,{get:function(){return b},set:function(M){b=""+M,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",r({},u,{get:function(){return w},set:function(M){w=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",r({},u,{get:function(){return x},set:function(M){const N=i(M);if(N===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=N,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",r({},u,{get:function(){return k},set:function(M){k=!!M,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",r({},u,{get:function(){return E},set:function(M){if(typeof M!="number"&&M!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");E=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",r({},u,{get:function(){return T},set:function(M){const N=s(M);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");T=N,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",r({},u,{get:function(){return P},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");P=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",r({},u,{get:function(){return C},set:function(M){const N=s(M);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");C=N,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",r({},u,{get:function(){return A},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");A=M,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",r({},u,{get:function(){return R},set:function(M){const N=s(M);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");R=N,this.hasBeenReset=!0}})),d.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class dst{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function gG(n){function e(i,s,r,o){return(i|0)*3600+(s|0)*60+(r|0)+parseFloat(o||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class ust{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function bG(n,e,t,i){const s=i?n.split(i):[n];for(const r in s){if(typeof s[r]!="string")continue;const o=s[r].split(t);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const pS=new E5(0,0,""),_v=pS.align==="middle"?"middle":"center";function hst(n,e,t){const i=n;function s(){const a=gG(n);if(a===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),a}function r(a,l){const c=new ust;bG(a,function(h,f){let m;switch(h){case"region":for(let g=t.length-1;g>=0;g--)if(t[g].id===f){c.set(h,t[g].region);break}break;case"vertical":c.alt(h,f,["rl","lr"]);break;case"line":m=f.split(","),c.integer(h,m[0]),c.percent(h,m[0])&&c.set("snapToLines",!1),c.alt(h,m[0],["auto"]),m.length===2&&c.alt("lineAlign",m[1],["start",_v,"end"]);break;case"position":m=f.split(","),c.percent(h,m[0]),m.length===2&&c.alt("positionAlign",m[1],["start",_v,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,f);break;case"align":c.alt(h,f,["start",_v,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let d=c.get("line","auto");d==="auto"&&pS.line===-1&&(d=-1),l.line=d,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",_v);let u=c.get("position","auto");u==="auto"&&pS.position===50&&(u=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=u}function o(){n=n.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),o(),e.endTime=s(),o(),r(n,e)}function vG(n){return n.replace(/<br(?: \/)?>/gi,"\n")}class fst{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new dst,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let r=t.buffer,o=0;for(r=vG(r);o<r.length&&r[o]!=="\r"&&r[o]!=="\n";)++o;const a=r.slice(0,o);return r[o]==="\r"&&++o,r[o]==="\n"&&++o,t.buffer=r.slice(o),a}function s(r){bG(r,function(o,a){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=i();const a=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let o=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=i(),t.state){case"HEADER":/:/.test(r)?s(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new E5(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{hst(r,t.cue,t.regionList)}catch(a){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const a=r.indexOf("-->")!==-1;if(!r||a&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch(r){t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+="\n\n",e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const pst=/\r\n|\n\r|\n|\r/g,_E=function(e,t,i=0){return e.slice(i,i+t.length)===t},mst=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Mt(t)||!Mt(i)||!Mt(s)||!Mt(r))throw Error("Malformed X-TIMESTAMP-MAP: Local:".concat(e));return t+=1e3*i,t+=60*1e3*s,t+=60*60*1e3*r,t},kE=function(e){let t=5381,i=e.length;for(;i;)t=t*33^e.charCodeAt(--i);return(t>>>0).toString()};function T5(n,e,t){return kE(n.toString())+kE(e.toString())+kE(t)}const gst=function(e,t,i){let s=e[t],r=e[s.prevCC];if(!r||!r.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(o=r)!=null&&o.new;){var o;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=i};function bst(n,e,t,i,s,r,o){const a=new fst,l=Tl(new Uint8Array(n)).trim().replace(pst,"\n").split("\n"),c=[],d=e?Oit(e.baseTime,e.timescale):0;let u="00:00.000",h=0,f=0,m,g=!0;a.oncue=function(b){const w=t[i];let x=t.ccOffset;const k=(h-d)/9e4;if(w!=null&&w.new&&(f!==void 0?x=t.ccOffset=w.start:gst(t,i,k)),k){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}x=k-t.presentationOffset}const E=b.endTime-b.startTime,T=Uo((b.startTime+x-f)*9e4,s*9e4)/9e4;b.startTime=Math.max(T,0),b.endTime=Math.max(T+E,0);const P=b.text.trim();b.text=decodeURIComponent(encodeURIComponent(P)),b.id||(b.id=T5(b.startTime,b.endTime,P)),b.endTime>0&&c.push(b)},a.onparsingerror=function(b){m=b},a.onflush=function(){if(m){o(m);return}r(c)},l.forEach(b=>{if(g)if(_E(b,"X-TIMESTAMP-MAP=")){g=!1,b.slice(16).split(",").forEach(w=>{_E(w,"LOCAL:")?u=w.slice(6):_E(w,"MPEGTS:")&&(h=parseInt(w.slice(7)))});try{f=mst(u)/1e3}catch(w){m=w}return}else b===""&&(g=!1);a.parse(b+"\n")}),a.flush()}const EE="stpp.ttml.im1t",yG=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,wG=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,vst={left:"start",center:"center",right:"end",start:"start",end:"end"};function WD(n,e,t,i){const s=kn(new Uint8Array(n),["mdat"]);if(s.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const r=s.map(a=>Tl(a)),o=Lit(e.baseTime,1,e.timescale);try{r.forEach(a=>t(yst(a,o)))}catch(a){i(a)}}function yst(n,e){const s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(r).reduce((u,h)=>(u[h]=s.getAttribute("ttp:".concat(h))||r[h],u),{}),a=s.getAttribute("xml:space")!=="preserve",l=qD(TE(s,"styling","style")),c=qD(TE(s,"layout","region")),d=TE(s,"body","[begin]");return[].map.call(d,u=>{const h=xG(u,a);if(!h||!u.hasAttribute("begin"))return null;const f=SE(u.getAttribute("begin"),o),m=SE(u.getAttribute("dur"),o);let g=SE(u.getAttribute("end"),o);if(f===null)throw KD(u);if(g===null){if(m===null)throw KD(u);g=f+m}const b=new E5(f-e,g-e,h);b.id=T5(b.startTime,b.endTime,b.text);const w=c[u.getAttribute("region")],x=l[u.getAttribute("style")],k=wst(w,x,l),{textAlign:E}=k;if(E){const T=vst[E];T&&(b.lineAlign=T),b.align=E}return Is(b,k),b}).filter(u=>u!==null)}function TE(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function qD(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function xG(n,e){return[].slice.call(n.childNodes).reduce((t,i,s)=>{var r;return i.nodeName==="br"&&s?t+"\n":(r=i.childNodes)!=null&&r.length?xG(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function wst(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let s=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return o&&t.hasOwnProperty(o)&&(s=t[o]),r.reduce((a,l)=>{const c=CE(e,i,l)||CE(n,i,l)||CE(s,i,l);return c&&(a[l]=c),a},{})}function CE(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function KD(n){return new Error("Could not parse ttml timestamp ".concat(n))}function SE(n,e){if(!n)return null;let t=gG(n);return t===null&&(yG.test(n)?t=xst(n,e):wG.test(n)&&(t=_st(n,e))),t}function xst(n,e){const t=yG.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function _st(n,e){const t=wG.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class kst{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=XD(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(W.FRAG_LOADING,this.onFragLoading,this),e.on(W.FRAG_LOADED,this.onFragLoaded,this),e.on(W.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(W.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(W.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(W.FRAG_LOADING,this.onFragLoading,this),e.off(W.FRAG_LOADED,this.onFragLoaded,this),e.off(W.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(W.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(W.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new xv(this,"textTrack1"),t=new xv(this,"textTrack2"),i=new xv(this,"textTrack3"),s=new xv(this,"textTrack4");this.cea608Parser1=new GD(1,e,t),this.cea608Parser2=new GD(3,i,s)}}addCues(e,t,i,s,r){let o=!1;for(let a=r.length;a--;){const l=r[a],c=Est(l[0],l[1],t,i);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],i),o=!0,c/(i-t)>.5))return}if(o||r.push([t,i]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,t,i,s)}else{const a=this.Cues.newCue(null,t,i,s);this.hls.trigger(W.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){const{unparsedVttFrags:o}=this;i==="main"&&(this.initPTS[t.cc]={baseTime:s,timescale:r}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(W.FRAG_LOADED,a)}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const r=i.textTracks[s];if(YD(r,{name:e,lang:t,attrs:{}}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:r,languageCode:o}=t[e],a=this.getExistingTrack(r,o);if(a)i[e]=a,Df(i[e]),Uj(i[e],s);else{const l=this.createTextTrack("captions",r,o);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,s={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(W.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{Df(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=XD(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)Df(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some(r=>r.textCodec===EE);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(fG(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const o=this.media,a=o?ty(o.textTracks):null;if(this.tracks.forEach((l,c)=>{let d;if(a){let u=null;for(let h=0;h<a.length;h++)if(a[h]&&YD(a[h],l)){u=a[h],a[h]=null;break}u&&(d=u)}if(d)Df(d);else{const u=_G(l);d=this.createTextTrack(u,l.name,l.lang),d&&(d.mode="disabled")}d&&this.textTracks.push(d)}),a!=null&&a.length){const l=a.filter(c=>c!==null).map(c=>c.label);l.length&&Ve.warn("Media element contains unused subtitle tracks: ".concat(l.join(", "),". Replace media element for each source to clear TextTracks and captions menu."))}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(W.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const s=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!s)return;const r="textTrack".concat(s[1]),o=this.captionsProperties[r];o&&(o.label=i.name,i.lang&&(o.languageCode=i.lang),o.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===sn.MAIN){var i,s;const{cea608Parser1:r,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=t.frag,d=(i=(s=t.part)==null?void 0:s.index)!=null?i:-1;r&&o&&(c!==a+1||c===a&&d!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=d}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===sn.SUBTITLE)if(s.byteLength){const r=i.decryptdata,o="stats"in t;if(r==null||!r.encrypted||o){const a=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),a&&a.textCodec===EE?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;WD(t,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),i.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{Ve.log("Failed to parse IMSC1: ".concat(s)),i.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:r,unparsedVttFrags:o}=this,a=r.length-1;if(!r[i.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(t=i.initSegment)!=null&&t.data?Zo(i.initSegment.data,new Uint8Array(s)):s;bst(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,d=>{this._appendCues(d,i.level),l.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},d=>{const u=d.message==="Missing initPTS for VTT MPEGTS";u?o.push(e):this._fallbackToIMSC1(i,s),Ve.log("Failed to parse VTT cue: ".concat(d)),!(u&&a>i.cc)&&l.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:d})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||WD(t,this.initPTS[e.cc],()=>{i.textCodec=EE,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[t];if(!s||s.mode==="disabled")return;e.forEach(r=>zj(s,r))}else{const s=this.tracks[t];if(!s)return;const r=s.default?"default":"subtitles"+t;i.trigger(W.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===sn.SUBTITLE&&this.onFragLoaded(W.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:i,cea608Parser2:s}=this;if(!this.enabled||!i||!s)return;const{frag:r,samples:o}=t;if(!(r.type===sn.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const c=this.extractCea608Data(l);i.addData(o[a].pts,c[0]),s.addData(o[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:r}){const{media:o}=this;if(!(!o||o.currentTime<i)){if(!r||r==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>aS(a[l],t,i))}if(this.config.renderTextTracksNatively&&t===0&&s!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>aS(a[l],t,s))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let s=2;for(let r=0;r<i;r++){const o=e[s++],a=127&e[s++],l=127&e[s++];if(a===0&&l===0)continue;if((4&o)!==0){const d=3&o;(d===0||d===1)&&(t[d].push(a),t[d].push(l))}}return t}}function _G(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function YD(n,e){return!!n&&n.kind===_G(e)&&fS(e,n)}function Est(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function XD(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class C5{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(W.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.BUFFER_CODECS,this.onBufferCodecs,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(W.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.BUFFER_CODECS,this.onBufferCodecs,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Mt(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&Ve.log("Setting autoLevelCapping to ".concat(i,": ").concat(e[i].height,"p@").concat(e[i].bitrate," for media ").concat(this.mediaWidth,"x").concat(this.mediaHeight)),t.autoLevelCapping=i,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((s,r)=>this.isLevelAllowed(s)&&r<=e);return this.clientRect=null,C5.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(t){}return e}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const s=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let r=e.length-1;const o=Math.max(t,i);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&s(l,e[a+1])){r=a;break}}return r}}class Tst{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const s=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const r=s-this.lastTime,o=i-this.lastDroppedFrames,a=t-this.lastDecodedFrames,l=1e3*o/r,c=this.hls;if(c.trigger(W.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:i}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let d=c.currentLevel;Ve.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=d)&&(d=d-1,c.trigger(W.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const kv="[eme]";class Yf{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Yf.CDMCleanupPromise?[Yf.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Ve.debug.bind(Ve,kv),this.log=Ve.log.bind(Ve,kv),this.warn=Ve.warn.bind(Ve,kv),this.error=Ve.error.bind(Ve,kv),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(W.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(W.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(W.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(W.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t[e];if(s)return s.licenseUrl;if(e===Hi.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'.concat(e,'"'))}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'.concat(e,'"]'))}attemptKeySystemAccess(e){const t=this.hls.levels,i=(o,a,l)=>!!o&&l.indexOf(o)===a,s=t.map(o=>o.audioCodec).filter(i),r=t.map(o=>o.videoCodec).filter(i);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const d=c.shift();this.getMediaKeysPromise(d,s,r).then(u=>o({keySystem:d,mediaKeys:u})).catch(u=>{c.length?l(c):u instanceof Mo?a(u):a(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_NO_ACCESS,error:u,fatal:!0},u.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let s="Configured requestMediaKeySystemAccess is not a function ".concat(i);return Aj===null&&self.location.protocol==="http:"&&(s="navigator.requestMediaKeySystemAccess is not available over insecure protocol ".concat(location.protocol)),Promise.reject(new Error(s))}return i(e,t)}getMediaKeysPromise(e,t,i){const s=Rtt(e,t,i,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let o=r==null?void 0:r.keySystemAccess;if(!o){this.log('Requesting encrypted media "'.concat(e,'" key-system access with config: ').concat(JSON.stringify(s))),o=this.requestMediaKeySystemAccess(e,s);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log('Failed to obtain access to key-system "'.concat(e,'": ').concat(l))}),o.then(l=>{this.log('Access for key-system "'.concat(l.keySystem,'" obtained'));const c=this.fetchServerCertificate(e);return this.log('Create media-keys for "'.concat(e,'"')),a.mediaKeys=l.createMediaKeys().then(d=>(this.log('Media-keys created for "'.concat(e,'"')),c.then(u=>u?this.setMediaKeysServerCertificate(d,e,u):d))),a.mediaKeys.catch(d=>{this.error('Failed to create media-keys for "'.concat(e,'"}: ').concat(d))}),a.mediaKeys})}return o.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log('Creating key-system session "'.concat(t,'" keyId: ').concat(ll.hexDump(e.keyId||[])));const s=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,r,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return ll.hexDump(e.keyId)}updateKeySession(e,t){var i;const s=e.mediaKeysSession;return this.log('Updating key-session "'.concat(s.sessionId,'" for keyID ').concat(ll.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[]),"\n      } (data length: ").concat(t&&t.byteLength,")")),s.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: ".concat(e.sn," ").concat(e.type,": ").concat(e.level,") key formats ").concat(t.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,i)=>{const s=cE(this.config),r=e.map(nD).filter(o=>!!o&&s.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(r).then(({keySystem:o})=>{const a=sD(o);a?t(a):i(new Error('Unable to find format for key-system "'.concat(o,'"')))}).catch(i)})}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),s="(keyId: ".concat(i,' format: "').concat(t.keyFormat,'" method: ').concat(t.method," uri: ").concat(t.uri,")");this.log("Starting session for key ".concat(s));let r=this.keyIdToKeySessionPromise[i];return r||(r=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(t).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log("Handle encrypted media sn: ".concat(e.frag.sn," ").concat(e.frag.type,": ").concat(e.frag.level," using key ").concat(s)),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:t});return this.generateRequestWithPreferredKeySession(l,"cenc",t.pssh,"playlist-key")}))),r.catch(o=>this.handleError(o))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Mo?this.hls.trigger(W.ERROR,e.data):this.hls.trigger(W.ERROR,{type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const s=nD(e.keyFormat),r=s?[s]:cE(this.config);return this.attemptKeySystemAccess(r)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=cE(this.config)),e.length===0)throw new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options ".concat(JSON.stringify({drmSystems:this.config.drmSystems})));return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:i}=e,s='"'.concat(e.type,'" event: init data type: "').concat(t,'"');if(this.debug(s),i===null)return;let r,o;if(t==="sinf"&&this.config.drmSystems[Hi.FAIRPLAY]){const u=Ls(new Uint8Array(i));try{const h=u5(JSON.parse(u).sinf),f=Mj(new Uint8Array(h));if(!f)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");r=f.subarray(8,24),o=Hi.FAIRPLAY}catch(h){this.warn("".concat(s," Failed to parse sinf: ").concat(h));return}}else{const u=nnt(i),h=u.filter(f=>f.systemId===ag.WIDEVINE)[0];if(!h){u.length===0||u.some(f=>!f.systemId)?this.warn("".concat(s," contains incomplete or invalid pssh data")):this.log("ignoring ".concat(s," for ").concat(u.map(f=>iD(f.systemId)).join(",")," pssh data in favor of playlist keys"));return}if(o=iD(h.systemId),h.version===0&&h.data){const f=h.data.length-22;r=h.data.subarray(f,f+16)}}if(!o||!r)return;const a=ll.hexDump(r),{keyIdToKeySessionPromise:l,mediaKeySessions:c}=this;let d=l[a];for(let u=0;u<c.length;u++){const h=c[u],f=h.decryptdata;if(!f.keyId)continue;const m=ll.hexDump(f.keyId);if(a===m||f.uri.replace(/-/g,"").indexOf(a)!==-1){if(d=l[m],f.pssh)break;delete l[m],f.pssh=new Uint8Array(i),f.keyId=r,d=l[a]=d.then(()=>this.generateRequestWithPreferredKeySession(h,t,i,"encrypted-event-key-match"));break}}d||(d=l[a]=this.getKeySystemSelectionPromise([o]).then(({keySystem:u,mediaKeys:h})=>{var f;this.throwIfDestroyed();const m=new B0("ISO-23001-7",a,(f=sD(u))!=null?f:"");return m.pssh=new Uint8Array(i),m.keyId=r,this.attemptSetMediaKeys(u,h).then(()=>{this.throwIfDestroyed();const g=this.createMediaKeySessionContext({decryptdata:m,keySystem:u,mediaKeys:h});return this.generateRequestWithPreferredKeySession(g,t,i,"encrypted-event-no-match")})})),d.catch(u=>this.handleError(u))}_onWaitingForKey(e){this.log('"'.concat(e.type,'" event'))}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'.concat(e,'"'));const s=Promise.all(i).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log('Media-keys set for "'.concat(e,'"')),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>i.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,i,s){var r,o;const a=(r=this.config.drmSystems)==null||(o=r[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const m=a.call(this.hls,t,i,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");t=m.initDataType,i=e.decryptdata.pssh=m.initData?new Uint8Array(m.initData):null}catch(m){var l;if(this.warn(m.message),(l=this.hls)!=null&&l.config.debug)throw m}if(i===null)return this.log('Skipping key-session request for "'.concat(s,'" (no initData)')),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'.concat(s,'": ').concat(c," (init data type: ").concat(t," length: ").concat(i?i.byteLength:null,")"));const d=new k5,u=e._onmessage=m=>{const g=e.mediaKeysSession;if(!g){d.emit("error",new Error("invalid state"));return}const{messageType:b,message:w}=m;this.log('"'.concat(b,'" message event for session "').concat(g.sessionId,'" message size: ').concat(w.byteLength)),b==="license-request"||b==="license-renewal"?this.renewLicense(e,w).catch(x=>{this.handleError(x),d.emit("error",x)}):b==="license-release"?e.keySystem===Hi.FAIRPLAY&&(this.updateKeySession(e,rS("acknowledged")),this.removeSession(e)):this.warn('unhandled media key message type "'.concat(b,'"'))},h=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const b=e.keyStatus;d.emit("keyStatus",b),b==="expired"&&(this.warn("".concat(e.keySystem," expired for key ").concat(c)),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",u),e.mediaKeysSession.addEventListener("keystatuseschange",h);const f=new Promise((m,g)=>{d.on("error",g),d.on("keyStatus",b=>{b.startsWith("usable")?m():b==="output-restricted"?g(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):b==="internal-error"?g(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'.concat(b,'"'))):b==="expired"?g(new Error("key expired while generating request")):this.warn('unhandled key status change "'.concat(b,'"'))})});return e.mediaKeysSession.generateRequest(t,i).then(()=>{var m;this.log('Request generated for key-session "'.concat((m=e.mediaKeysSession)==null?void 0:m.sessionId,'" keyId: ').concat(c))}).catch(m=>{throw new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_NO_SESSION,error:m,fatal:!1},"Error generating key-session request: ".concat(m))}).then(()=>f).catch(m=>{throw d.removeAllListeners(),this.removeSession(e),m}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,i)=>{this.log('key status change "'.concat(t,'" for keyStatuses keyId: ').concat(ll.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))," session keyId: ").concat(ll.hexDump(new Uint8Array(e.decryptdata.keyId||[]))," uri: ").concat(e.decryptdata.uri)),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,i=t.loader,s=new i(t),r=this.getServerCertificateUrl(e);return r?(this.log('Fetching server certificate for "'.concat(e,'"')),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:r},c=t.certLoadPolicy.default,d={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(h,f,m,g)=>{o(h.data)},onError:(h,f,m,g)=>{a(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:Xs({url:l.url,data:void 0},h)},'"'.concat(e,'" certificate request failed (').concat(r,"). Status: ").concat(h.code," (").concat(h.text,")")))},onTimeout:(h,f,m)=>{a(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},'"'.concat(e,'" certificate request timed out (').concat(r,")")))},onAbort:(h,f,m)=>{a(new Error("aborted"))}};s.load(l,d,u)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((s,r)=>{e.setServerCertificate(i).then(o=>{this.log("setServerCertificate ".concat(o?"success":"not supported by CDM"," (").concat(i==null?void 0:i.byteLength,') on "').concat(t,'"')),s(e)}).catch(o=>{r(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(s=>{throw new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=new DOMParser().parseFromString(i,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let d;for(let u=0,h=r.length;u<h;u++){var o,a;d=r[u];const f=(o=d.querySelector("name"))==null?void 0:o.textContent,m=(a=d.querySelector("value"))==null?void 0:a.textContent;f&&m&&e.setRequestHeader(f,m)}}const l=s.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return rS(atob(c))}setupLicenseXHR(e,t,i,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,s)}).catch(o=>{if(!i.decryptdata)throw o;return e.open("POST",t,!0),r.call(this.hls,e,t,i,s)}).then(o=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((s,r)=>{const o=this.getLicenseServerUrl(e.keySystem);this.log("Sending license request to URL: ".concat(o));const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log("License received ".concat(l instanceof ArrayBuffer?l.byteLength:l));const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(d){this.error(d)}s(l)}else{const l=i.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)r(new Mo({type:fn.KEY_SYSTEM_ERROR,details:Xe.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},"License Request XHR failed (".concat(o,"). Status: ").concat(a.status," (").concat(a.statusText,")")));else{const d=c-this._requestLicenseFailureCount+1;this.warn("Retrying license request, ".concat(d," attempts left")),this.requestLicense(e,t).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==Hi.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},B0.clearKeyUriToKeyIdMap();const i=t.length;Yf.CDMCleanupPromise=Promise.all(t.map(s=>this.removeSession(s)).concat(e==null?void 0:e.setMediaKeys(null).catch(s=>{this.log("Could not clear media keys: ".concat(s))}))).then(()=>{i&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(s=>{this.log("Could not close sessions and clear media keys: ".concat(s))})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((s,r)=>(s.indexOf(r.keyFormat)===-1&&s.push(r.keyFormat),s),[]);this.log("Selecting key-system from session-keys ".concat(i.join(", "))),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log("Remove licenses and keys and close session ".concat(t.sessionId)),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),t.remove().catch(r=>{this.log("Could not remove session: ".concat(r))}).then(()=>t.close()).catch(r=>{this.log("Could not close session: ".concat(r))})}}}Yf.CDMCleanupPromise=void 0;class Mo extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var lr;(function(n){n.MANIFEST="m",n.AUDIO="a",n.VIDEO="v",n.MUXED="av",n.INIT="i",n.CAPTION="c",n.TIMED_TEXT="tt",n.KEY="k",n.OTHER="o"})(lr||(lr={}));var mS;(function(n){n.DASH="d",n.HLS="h",n.SMOOTH="s",n.OTHER="o"})(mS||(mS={}));var ju;(function(n){n.OBJECT="CMCD-Object",n.REQUEST="CMCD-Request",n.SESSION="CMCD-Session",n.STATUS="CMCD-Status"})(ju||(ju={}));const Cst={[ju.OBJECT]:["br","d","ot","tb"],[ju.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[ju.SESSION]:["cid","pr","sf","sid","st","v"],[ju.STATUS]:["bs","rtp"]};class Up{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(i=>i instanceof Up?i:new Up(i))),this.value=e,this.params=t}}class kG{constructor(e){this.description=void 0,this.description=e}}const Sst="Dict";function Ast(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function Ist(n,e,t,i){return new Error("failed to ".concat(n,' "').concat(Ast(e),'" as ').concat(t),{cause:i})}const QD="Bare Item",Pst="Boolean",Rst="Byte Sequence",$st="Decimal",Lst="Integer";function Ost(n){return n<-999999999999999||999999999999999<n}const Dst=/[\x00-\x1f\x7f]+/,Mst="Token",Nst="Key";function Rl(n,e,t){return Ist("serialize",n,e,t)}function Fst(n){if(typeof n!="boolean")throw Rl(n,Pst);return n?"?1":"?0"}function Bst(n){return btoa(String.fromCharCode(...n))}function Vst(n){if(ArrayBuffer.isView(n)===!1)throw Rl(n,Rst);return":".concat(Bst(n),":")}function EG(n){if(Ost(n))throw Rl(n,Lst);return n.toString()}function Ust(n){return"@".concat(EG(n.getTime()/1e3))}function TG(n,e){if(n<0)return-TG(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const s=Math.floor(n*t);return(s%2===0?s:s+1)/t}else return Math.round(n*t)/t}function zst(n){const e=TG(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Rl(n,$st);const t=e.toString();return t.includes(".")?t:"".concat(t,".0")}const Hst="String";function jst(n){if(Dst.test(n))throw Rl(n,Hst);return'"'.concat(n.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),'"')}function Gst(n){return n.description||n.toString().slice(7,-1)}function ZD(n){const e=Gst(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Rl(e,Mst);return e}function gS(n){switch(typeof n){case"number":if(!Mt(n))throw Rl(n,QD);return Number.isInteger(n)?EG(n):zst(n);case"string":return jst(n);case"symbol":return ZD(n);case"boolean":return Fst(n);case"object":if(n instanceof Date)return Ust(n);if(n instanceof Uint8Array)return Vst(n);if(n instanceof kG)return ZD(n);default:throw Rl(n,QD)}}function bS(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw Rl(n,Nst);return n}function S5(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?";".concat(bS(e)):";".concat(bS(e),"=").concat(gS(t))).join("")}function CG(n){return n instanceof Up?"".concat(gS(n.value)).concat(S5(n.params)):gS(n)}function Wst(n){return"(".concat(n.value.map(CG).join(" "),")").concat(S5(n.params))}function qst(n,e={whitespace:!0}){if(typeof n!="object")throw Rl(n,Sst);const t=n instanceof Map?n.entries():Object.entries(n),i=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([s,r])=>{r instanceof Up||(r=new Up(r));let o=bS(s);return r.value===!0?o+=S5(r.params):(o+="=",Array.isArray(r.value)?o+=Wst(r):o+=CG(r)),o}).join(",".concat(i))}function Kst(n,e){return qst(n,e)}const Yst=n=>n==="ot"||n==="sf"||n==="st",Xst=n=>typeof n=="number"?Mt(n):n!=null&&n!==""&&n!==!1;function Qst(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const s=t.pathname.split("/").slice(1),r=i.pathname.split("/").slice(1,-1);for(;s[0]===r[0];)s.shift(),r.shift();for(;r.length;)r.shift(),s.unshift("..");return s.join("/")}function Zst(){try{return crypto.randomUUID()}catch(n){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?r:r&3|8).toString(16)})}}}const ay=n=>Math.round(n),Jst=(n,e)=>(e!=null&&e.baseUrl&&(n=Qst(n,e.baseUrl)),encodeURIComponent(n)),Ev=n=>ay(n/100)*100,ert={br:ay,d:ay,bl:Ev,dl:Ev,mtp:Ev,nor:Jst,rtp:Ev,tb:ay};function trt(n,e){const t={};if(n==null||typeof n!="object")return t;const i=Object.keys(n).sort(),s=Is({},ert,e==null?void 0:e.formatters),r=e==null?void 0:e.filter;return i.forEach(o=>{if(r!=null&&r(o))return;let a=n[o];const l=s[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||Xst(a)&&(Yst(o)&&typeof a=="string"&&(a=new kG(a)),t[o]=a))}),t}function SG(n,e={}){return n?Kst(trt(n,e),Is({whitespace:!1},e)):""}function nrt(n,e={}){if(!n)return{};const t=Object.entries(n),i=Object.entries(Cst).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),s=t.reduce((r,o)=>{var a,l;const[c,d]=o,u=((a=i.find(h=>h[1].includes(c)))==null?void 0:a[0])||ju.REQUEST;return(l=r[u])!=null||(r[u]={}),r[u][c]=d,r},{});return Object.entries(s).reduce((r,[o,a])=>(r[o]=SG(a,e),r),{})}function irt(n,e,t){return Is(n,nrt(e,t))}const srt="CMCD";function rrt(n,e={}){if(!n)return"";const t=SG(n,e);return"".concat(srt,"=").concat(encodeURIComponent(t))}const JD=/CMCD=[^&#]+/;function ort(n,e,t){const i=rrt(e,t);if(!i)return n;if(JD.test(n))return n.replace(JD,i);const s=n.includes("?")?"&":"?";return"".concat(n).concat(s).concat(i)}class art{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:lr.MANIFEST,su:!this.initialized})}catch(r){Ve.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=s=>{try{const r=s.frag,o=this.hls.levels[r.level],a=this.getObjectType(r),l={d:r.duration*1e3,ot:a};(a===lr.VIDEO||a===lr.AUDIO||a==lr.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(s,l)}catch(r){Ve.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||Zst(),this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHED,this.onMediaDetached,this),e.on(W.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHED,this.onMediaDetached,this),e.off(W.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(s=t.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:mS.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Is(t,this.createData());const i=t.ot===lr.INIT||t.ot===lr.VIDEO||t.ot===lr.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((r,o)=>(s.includes(o)&&(r[o]=t[o]),r),{})),this.useHeaders?(e.headers||(e.headers={}),irt(e.headers,t)):e.url=ort(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return lr.TIMED_TEXT;if(e.sn==="initSegment")return lr.INIT;if(t==="audio")return lr.AUDIO;if(t==="main")return this.hls.audioTracks.length?lr.VIDEO:lr.MUXED}getTopBandwidth(e){let t=0,i;const s=this.hls;if(e===lr.AUDIO)i=s.audioTracks;else{const r=s.maxAutoLevel,o=r>-1?r+1:s.levels.length;i=s.levels.slice(0,o)}for(const r of i)r.bitrate>t&&(t=r.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,i=e===lr.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:zi.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,o,a){t(r),this.loader.load(r,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,o,a){t(r),this.loader.load(r,o,a)}}}}const lrt=3e5;class crt{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=Ve.log.bind(Ve,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((i==null?void 0:i.action)===er.SendAlternateToPenaltyBox&&i.flags===ca.MoveAllAlternatesMatchingHost){const s=this.levels;let r=this.pathwayPriority,o=this.pathwayId;if(t.context){const{groupId:a,pathwayId:l,type:c}=t.context;a&&s?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!r&&s&&(r=s.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==o),i.resolved||Ve.warn("Could not resolve ".concat(t.details,' ("').concat(t.error.message,'") with content-steering for Pathway: ').concat(o," levels: ").concat(s&&s.length," priorities: ").concat(JSON.stringify(r)," penalized: ").concat(JSON.stringify(this.penalizedPathways)))}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log("No levels found in Pathway ".concat(this.pathwayId,'. Setting initial Pathway to "').concat(i,'"')),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log("Found ".concat(t.length,"/").concat(e.length,' levels in Pathway "').concat(this.pathwayId,'"')),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach(r=>{s-i[r]>lrt&&delete i[r]});for(let r=0;r<e.length;r++){const o=e[r];if(o in i)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(t=this.getLevelsForPathway(o),t.length>0){this.log('Setting Pathway to "'.concat(o,'"')),this.pathwayId=o,Wj(t),this.hls.trigger(W.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log("Unstable Pathways change from bitrate ".concat(l.bitrate," to ").concat(c.bitrate)),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(t===Yn.AUDIO_TRACK&&s[r].hasAudioGroup(e)||t===Yn.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach(r=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=r;if(t.some(d=>d.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(d=>{const u=new as(d.attrs);u["PATHWAY-ID"]=o;const h=u.AUDIO&&"".concat(u.AUDIO,"_clone_").concat(o),f=u.SUBTITLES&&"".concat(u.SUBTITLES,"_clone_").concat(o);h&&(i[u.AUDIO]=h,u.AUDIO=h),f&&(s[u.SUBTITLES]=f,u.SUBTITLES=f);const m=AG(d.uri,u["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new Bp({attrs:u,audioCodec:d.audioCodec,bitrate:d.bitrate,height:d.height,name:d.name,url:m,videoCodec:d.videoCodec,width:d.width});if(d.audioGroups)for(let b=1;b<d.audioGroups.length;b++)g.addGroupId("audio","".concat(d.audioGroups[b],"_clone_").concat(o));if(d.subtitleGroups)for(let b=1;b<d.subtitleGroups.length;b++)g.addGroupId("text","".concat(d.subtitleGroups[b],"_clone_").concat(o));return g});t.push(...c),e9(this.audioTracks,i,l,o),e9(this.subtitleTracks,s,l,o)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let s;try{s=new self.URL(e)}catch(d){this.enabled=!1,this.log("Failed to parse Steering Manifest URI: ".concat(e));return}if(s.protocol!=="data:"){const d=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+d)}const r={responseType:"json",url:s.href},o=t.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(d,u,h,f)=>{this.log('Loaded steering manifest: "'.concat(s,'"'));const m=d.data;if(m.VERSION!==1){this.log("Steering VERSION ".concat(m.VERSION," not supported!"));return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":b,"PATHWAY-PRIORITY":w}=m;if(g)try{this.uri=new self.URL(g,s).href}catch(k){this.enabled=!1,this.log("Failed to parse Steering Manifest RELOAD-URI: ".concat(g));return}this.scheduleRefresh(this.uri||h.url),b&&this.clonePathways(b);const x={steeringManifest:m,url:s.toString()};this.hls.trigger(W.STEERING_MANIFEST_LOADED,x),w&&this.updatePathwayPriority(w)},onError:(d,u,h,f)=>{if(this.log("Error loading steering manifest: ".concat(d.code," ").concat(d.text," (").concat(u.url,")")),this.stopLoad(),d.code===410){this.enabled=!1,this.log("Steering manifest ".concat(u.url," no longer available"));return}let m=this.timeToLoad*1e3;if(d.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const b=g.getResponseHeader("Retry-After");b&&(m=parseFloat(b)*1e3)}this.log("Steering manifest ".concat(u.url," rate limited"));return}this.scheduleRefresh(this.uri||u.url,m)},onTimeout:(d,u,h)=>{this.log("Timeout loading steering manifest (".concat(u.url,")")),this.scheduleRefresh(this.uri||u.url)}};this.log("Requesting steering manifest: ".concat(s)),this.loader.load(r,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const s=(i=this.hls)==null?void 0:i.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function e9(n,e,t,i){n&&Object.keys(e).forEach(s=>{const r=n.filter(o=>o.groupId===s).map(o=>{const a=Is({},o);return a.details=void 0,a.attrs=new as(a.attrs),a.url=a.attrs.URI=AG(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),a.groupId=a.attrs["GROUP-ID"]=e[s],a.attrs["PATHWAY-ID"]=i,a});n.push(...r)})}function AG(n,e,t,i){const{HOST:s,PARAMS:r,[t]:o}=i;let a;e&&(a=o==null?void 0:o[e],a&&(n=a));const l=new self.URL(n);return s&&!a&&(l.host=s),r&&Object.keys(r).sort().forEach(c=>{c&&l.searchParams.set(c,r[c])}),l.href}const drt=/^age:\s*[\d.]+\s*$/im;class IG{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new h_,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return r(i,t.url)}).catch(o=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),r(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(o=>{this.callbacks.onError({code:i.status,text:o.message},t,i,s)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:o}=i.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&Mt(r)?r:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,r=this.config;if(!i.aborted&&s>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const o=t.status,a=t.responseType==="text"?t.responseText:null;if(o>=200&&o<300){const u=a!=null?a:t.response;if(u!=null){i.loading.end=Math.max(self.performance.now(),i.loading.first);const h=t.responseType==="arraybuffer"?u.byteLength:u.length;if(i.loaded=i.total=h,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first),!this.callbacks)return;const f=this.callbacks.onProgress;if(f&&f(i,e,u,t),!this.callbacks)return;const m={url:t.responseURL,data:u,code:o};this.callbacks.onSuccess(m,i,e,t);return}}const l=r.loadPolicy.errorRetry,c=i.retry,d={url:e.url,data:void 0,code:o};Rw(l,c,!1,d)?this.retry(l):(Ve.error("".concat(o," while loading ").concat(e.url)),this.callbacks.onError({code:o,text:t.statusText},e,t,i))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Rw(e,t,!0))this.retry(e);else{var i;Ve.warn("timeout while loading ".concat((i=this.context)==null?void 0:i.url));const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=p5(e,i.retry),i.retry++,Ve.warn("".concat(status?"HTTP Status "+status:"Timeout"," while loading ").concat(t==null?void 0:t.url,", retrying ").concat(i.retry,"/").concat(e.maxNumRetry," in ").concat(this.retryDelay,"ms")),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&drt.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp("^".concat(e,":\\s*[\\d.]+\\s*$"),"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function urt(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(n){}return!1}const hrt=/(\d+)-(\d+)\/(\d+)/;class t9{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||grt,this.controller=new self.AbortController,this.stats=new h_}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=frt(e,this.controller.signal),o=i.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=c&&Mt(c)?c:d,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(s,e,this.response)},t.timeout),self.fetch(this.request).then(u=>{this.response=this.loader=u;const h=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(s,e,this.response)},d-(h-s.loading.start)),!u.ok){const{status:f,statusText:m}=u;throw new brt(m||"fetch, bad network response",f,u)}return s.loading.first=h,s.total=mrt(u.headers)||s.total,o&&Mt(t.highWaterMark)?this.loadProgressively(u,s,e,t.highWaterMark,o):a?u.arrayBuffer():e.responseType==="json"?u.json():u.text()}).then(u=>{const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const f=u[l];f&&(s.loaded=s.total=f);const m={url:h.url,data:u,code:h.status};o&&!Mt(t.highWaterMark)&&o(s,e,u,h),i.onSuccess(m,s,e,h)}).catch(u=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const h=u&&u.code||0,f=u?u.message:null;i.onError({code:h,text:f},e,u?u.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,r){const o=new Xj,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&r(t,i,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const d=c.value,u=d.length;return t.loaded+=u,u<s||o.dataLength?(o.push(d),o.dataLength>=s&&r(t,i,o.flush(),e)):r(t,i,d,e),l()}).catch(()=>Promise.reject());return l()}}function frt(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Is({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function prt(n){const e=hrt.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function mrt(n){const e=n.get("Content-Range");if(e){const i=prt(e);if(Mt(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function grt(n,e){return new self.Request(n.url,e)}class brt extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const vrt=/\s/,yrt={newCue(n,e,t,i){const s=[];let r,o,a,l,c;const d=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(r=i.rows[h],a=!0,l=0,c="",!r.isEmpty()){var u;for(let g=0;g<r.chars.length;g++)vrt.test(r.chars[g].uchar)&&a?l++:(c+=r.chars[g].uchar,a=!1);r.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const f=vG(c.trim()),m=T5(e,t,f);n!=null&&(u=n.cues)!=null&&u.getCueById(m)||(o=new d(e,t,f),o.id=m,o.line=h+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(o))}return n&&s.length&&(s.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),s.forEach(h=>zj(n,h))),s}},wrt={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},PG=Xs(Xs({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:IG,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:qnt,bufferController:Qit,capLevelController:C5,errorController:Dnt,fpsController:Tst,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Aj,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:wrt},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},xrt()),{},{subtitleStreamController:qit,subtitleTrackController:Yit,timelineController:kst,audioStreamController:Git,audioTrackController:Wit,emeController:Yf,cmcdController:art,contentSteeringController:crt});function xrt(){return{cueHandler:yrt,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function _rt(n,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=vS(n),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(r=>{const o="".concat(r==="level"?"playlist":r,"LoadPolicy"),a=e[o]===void 0,l=[];s.forEach(c=>{const d="".concat(r,"Loading").concat(c),u=e[d];if(u!==void 0&&a){l.push(d);const h=t[o].default;switch(e[o]={default:h},c){case"TimeOut":h.maxLoadTimeMs=u,h.maxTimeToFirstByteMs=u;break;case"MaxRetry":h.errorRetry.maxNumRetry=u,h.timeoutRetry.maxNumRetry=u;break;case"RetryDelay":h.errorRetry.retryDelayMs=u,h.timeoutRetry.retryDelayMs=u;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=u,h.timeoutRetry.maxRetryDelayMs=u;break}}}),l.length&&Ve.warn('hls.js config: "'.concat(l.join('", "'),'" setting(s) are deprecated, use "').concat(o,'": ').concat(JSON.stringify(e[o])))}),Xs(Xs({},t),e)}function vS(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(vS):Object.keys(n).reduce((e,t)=>(e[t]=vS(n[t]),e),{}):n}function krt(n){const e=n.loader;e!==t9&&e!==IG?(Ve.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):urt()&&(n.loader=t9,n.progressive=!0,n.enableSoftwareAES=!0,Ve.log("[config]: Progressive streaming enabled, using FetchLoader"))}let AE;class Ert extends m5{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this),e.on(W.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this),e.off(W.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],r={},o={};let a=!1,l=!1,c=!1;t.levels.forEach(d=>{var u,h;const f=d.attrs;let{audioCodec:m,videoCodec:g}=d;((u=m)==null?void 0:u.indexOf("mp4a.40.34"))!==-1&&(AE||(AE=/chrome|firefox/i.test(navigator.userAgent)),AE&&(d.audioCodec=m=void 0)),m&&(d.audioCodec=m=Aw(m,i)),((h=g)==null?void 0:h.indexOf("avc1"))===0&&(g=d.videoCodec=dnt(g));const{width:b,height:w,unknownCodecs:x}=d;if(a||(a=!!(b&&w)),l||(l=!!g),c||(c=!!m),x!=null&&x.length||m&&!fE(m,"audio",i)||g&&!fE(g,"video",i))return;const{CODECS:k,"FRAME-RATE":E,"HDCP-LEVEL":T,"PATHWAY-ID":P,RESOLUTION:C,"VIDEO-RANGE":A}=f,R="".concat(P||".","-"),M="".concat(R).concat(d.bitrate,"-").concat(C,"-").concat(E,"-").concat(k,"-").concat(A,"-").concat(T);if(r[M])if(r[M].uri!==d.url&&!d.attrs["PATHWAY-ID"]){const N=o[M]+=1;d.attrs["PATHWAY-ID"]=new Array(N+1).join(".");const U=new Bp(d);r[M]=U,s.push(U)}else r[M].addGroupId("audio",f.AUDIO),r[M].addGroupId("text",f.SUBTITLES);else{const N=new Bp(d);r[M]=N,o[M]=1,s.push(N)}}),this.filterAndSortMediaOptions(s,t,a,l,c)}filterAndSortMediaOptions(e,t,i,s,r){let o=[],a=[],l=e;if((i||s)&&r&&(l=l.filter(({videoCodec:m,videoRange:g,width:b,height:w})=>(!!m||!!(b&&w))&&knt(g))),l.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn("One or more CODECS in variant not supported: ".concat(JSON.stringify(t.levels[0].attrs)));const m=new Error("no level with compatible codecs found in manifest");this.hls.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:m,reason:m.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:m}=this.hls.config;o=t.audioTracks.filter(g=>!g.audioCodec||fE(g.audioCodec,"audio",m)),n9(o)}t.subtitles&&(a=t.subtitles,n9(a));const c=l.slice(0);l.sort((m,g)=>{if(m.attrs["HDCP-LEVEL"]!==g.attrs["HDCP-LEVEL"])return(m.attrs["HDCP-LEVEL"]||"")>(g.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&m.height!==g.height)return m.height-g.height;if(m.frameRate!==g.frameRate)return m.frameRate-g.frameRate;if(m.videoRange!==g.videoRange)return Iw.indexOf(m.videoRange)-Iw.indexOf(g.videoRange);if(m.videoCodec!==g.videoCodec){const b=cD(m.videoCodec),w=cD(g.videoCodec);if(b!==w)return w-b}if(m.uri===g.uri&&m.codecSet!==g.codecSet){const b=Sw(m.codecSet),w=Sw(g.codecSet);if(b!==w)return w-b}return m.averageBitrate!==g.averageBitrate?m.averageBitrate-g.averageBitrate:0});let d=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let m=0;m<c.length;m++)if(c[m].pathwayId===l[0].pathwayId){d=c[m];break}}this._levels=l;for(let m=0;m<l.length;m++)if(l[m]===d){var u;this._firstLevel=m;const g=d.bitrate,b=this.hls.bandwidthEstimate;if(this.log("manifest loaded, ".concat(l.length," level(s) found, first bitrate: ").concat(g)),((u=this.hls.userConfig)==null?void 0:u.abrEwmaDefaultEstimate)===void 0){const w=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);w>b&&b===PG.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=w)}break}const h=r&&!s,f={levels:l,audioTracks:o,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:s,altAudio:!h&&o.some(m=>!!m.url)};this.hls.trigger(W.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const d=new Error("invalid level idx"),u=e<0;if(this.hls.trigger(W.ERROR,{type:fn.OTHER_ERROR,details:Xe.LEVEL_SWITCH_ERROR,level:e,fatal:u,error:d,reason:d.message}),u)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,o=t[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,i===e&&o.details&&s&&r===a)return;this.log("Switching to level ".concat(e," (").concat(o.height?o.height+"p ":"").concat(o.videoRange?o.videoRange+" ":"").concat(o.codecSet?o.codecSet+" ":"","@").concat(o.bitrate,")").concat(a?" with Pathway "+a:""," from level ").concat(i).concat(r?" with Pathway "+r:""));const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(W.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const d=this.switchParams(o.uri,s==null?void 0:s.details,c);this.loadPlaylist(d)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Yn.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===sn.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(r=>!!i[r]))return;const s=this._levels[t.level];s!=null&&s.loadError&&(this.log("Resetting level error count of ".concat(s.loadError," on frag buffered")),s.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:r}=t,o=this._levels[s];if(!o){var a;this.warn("Invalid level index ".concat(s)),(a=t.deliveryDirectives)!=null&&a.skip&&(r.deltaUpdateFailed=!0);return}s===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(s,t,o.details)):(i=t.deliveryDirectives)!=null&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){let s=i.uri;if(e)try{s=e.addDirectives(s)}catch(o){this.warn("Could not construct new URL with HLS Delivery Directives: ".concat(o))}const r=i.attrs["PATHWAY-ID"];this.log("Loading level index ".concat(t).concat((e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""," with").concat(r?" Pathway "+r:""," ").concat(s)),this.clearTimer(),this.hls.trigger(W.LEVEL_LOADING,{url:s,level:t,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const i=this._levels.filter((s,r)=>r!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));Wj(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(W.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(W.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function n9(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}class Trt{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var t;if(e&&e!==((t=s.context)==null?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=Xe.KEY_LOAD_ERROR,i,s,r){return new sc({type:fn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:s})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:s}=e;for(let r=0;r<t.length;r++){const o=t[r];if(s<=o.cc&&(i==="initSegment"||o.sn==="initSegment"||i<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const c=new Error(t?"Expected frag.decryptdata to be defined after setting format ".concat(t):"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Xe.KEY_LOAD_ERROR,c))}const o=r.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Xe.KEY_LOAD_ERROR,new Error('Invalid key URI: "'.concat(o,'"'))));let a=this.keyUriToKeyInfo[o];if((i=a)!=null&&i.decryptdata.key)return r.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((s=a)!=null&&s.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(c=>(r.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Xe.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'.concat(r.method,'"'))))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(i);if(s)return(e.keyLoadPromise=s.then(r=>(e.mediaKeySessionContext=r,i))).catch(r=>{throw e.keyLoadPromise=null,r})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=i.loader,r=new s(i);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,d={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(h,f,m,g)=>{const{frag:b,keyInfo:w,url:x}=m;if(!b.decryptdata||w!==this.keyUriToKeyInfo[x])return a(this.createKeyLoadError(b,Xe.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));w.decryptdata.key=b.decryptdata.key=new Uint8Array(h.data),b.keyLoader=null,w.loader=null,o({frag:b,keyInfo:w})},onError:(h,f,m,g)=>{this.resetLoader(f),a(this.createKeyLoadError(t,Xe.KEY_LOAD_ERROR,new Error("HTTP Error ".concat(h.code," loading key ").concat(h.text)),m,Xs({url:l.url,data:void 0},h)))},onTimeout:(h,f,m)=>{this.resetLoader(f),a(this.createKeyLoadError(t,Xe.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(h,f,m)=>{this.resetLoader(f),a(this.createKeyLoadError(t,Xe.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};r.load(l,d,u)})}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],r&&r.destroy()}}function RG(){return self.SourceBuffer||self.WebKitSourceBuffer}function $G(){if(!wh())return!1;const e=RG();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Crt(){if(!$G())return!1;const n=wh();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(V0(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(V0(e,"audio"))))}function Srt(){var n;const e=RG();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const Art=250,ly=2,Irt=.1,Prt=.05;class Rrt{constructor(e,t,i,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:i,media:s,stalled:r}=this;if(s===null)return;const{currentTime:o,seeking:a}=s,l=this.seeking&&!a,c=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),r!==null){if(this.stallReported){const b=self.performance.now()-r;Ve.warn("playback not stuck anymore @".concat(o,", after ").concat(Math.round(b),"ms")),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(s.paused&&!a||s.ended||s.playbackRate===0||!zi.getBuffered(s).length){this.nudgeRetry=0;return}const d=zi.bufferInfo(s,o,0),u=d.nextStart||0;if(a){const b=d.len>ly,w=!u||t&&t.start<=o||u-o>ly&&!this.fragmentTracker.getPartialFragment(o);if(b||w)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;if(!(d.len>0)&&!u)return;const w=Math.max(u,d.start||0)-o,x=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,E=(x==null||(h=x.details)==null?void 0:h.live)?x.details.targetduration*2:ly,T=this.fragmentTracker.getPartialFragment(o);if(w>0&&(w<=E||T)){s.paused||this._trySkipBufferHole(T);return}}const f=self.performance.now();if(r===null){this.stalled=f;return}const m=f-r;if(!a&&m>=Art&&(this._reportStall(d),!this.media))return;const g=zi.bufferInfo(s,o,i.maxBufferHole);this._tryFixBufferStall(g,m)}_tryFixBufferStall(e,t){const{config:i,fragmentTracker:s,media:r}=this;if(r===null)return;const o=r.currentTime,a=s.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-o<i.maxBufferHole)&&t>i.highBufferWatchdogPeriod*1e3&&(Ve.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:i,stallReported:s}=this;if(!s&&i){this.stallReported=!0;const r=new Error("Playback stalling at @".concat(i.currentTime," due to low buffer (").concat(JSON.stringify(e),")"));Ve.warn(r.message),t.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:i,media:s}=this;if(s===null)return 0;const r=s.currentTime,o=zi.bufferInfo(s,r,0),a=r<o.start?o.start:o.nextStart;if(a){const l=o.len<=t.maxBufferHole,c=o.len>0&&o.len<1&&s.readyState<3,d=a-r;if(d>0&&(l||c)){if(d>t.maxBufferHole){const{fragmentTracker:h}=this;let f=!1;if(r===0){const m=h.getAppendedFrag(0,sn.MAIN);m&&a<m.end&&(f=!0)}if(!f){const m=e||h.getAppendedFrag(r,sn.MAIN);if(m){let g=!1,b=m.end;for(;b<a;){const w=h.getPartialFragment(b);if(w)b+=w.duration;else{g=!0;break}}if(g)return 0}}}const u=Math.max(a+Prt,r+Irt);if(Ve.warn("skipping hole, adjusting currentTime from ".concat(r," to ").concat(u)),this.moved=!0,this.stalled=null,s.currentTime=u,e&&!e.gap){const h=new Error("fragment loaded with buffer holes, seeking from ".concat(r," to ").concat(u));i.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return u}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:i,nudgeRetry:s}=this;if(i===null)return;const r=i.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const o=r+(s+1)*e.nudgeOffset,a=new Error("Nudging 'currentTime' from ".concat(r," to ").concat(o));Ve.warn(a.message),i.currentTime=o,t.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error("Playhead still not moving while enough data buffered @".concat(r," after ").concat(e.nudgeMaxRetry," nudges"));Ve.error(o.message),t.trigger(W.ERROR,{type:fn.MEDIA_ERROR,details:Xe.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const $rt=100;class Lrt extends v5{constructor(e,t,i){super(e,t,i,"[stream-controller]",sn.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(W.ERROR,this.onError,this),e.on(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(W.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(W.BUFFER_CREATED,this.onBufferCreated,this),e.on(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(W.ERROR,this.onError,this),e.off(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(W.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(W.BUFFER_CREATED,this.onBufferCreated,this),e.off(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:i}=this;if(this.stopLoad(),this.setInterval($rt),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log("Override startPosition with lastCurrentTime @".concat(t.toFixed(3))),e=t),this.state=ht.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ht.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ht.WAITING_LEVEL:{const{levels:t,level:i}=this,s=t==null?void 0:t[i],r=s==null?void 0:s.details;if(r&&(!r.live||this.levelLastLoaded===s)){if(this.waitForCdnTuneIn(r))break;this.state=ht.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ht.IDLE;break}break}case ht.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||(e=this.media)!=null&&e.seeking){const{levels:s,level:r}=this,o=s==null?void 0:s[r];this.resetStartWhenNotLoaded(o||null),this.state=ht.IDLE}}break}this.state===ht.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(t===null||!s&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[r]))return;const o=i[r],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const g={};this.altAudio&&(g.type="video"),this.hls.trigger(W.BUFFER_EOS,g),this.state=ht.ENDED;return}if(!this.buffering)return;e.loadLevel!==r&&e.manualLevel===-1&&this.log("Adapting to level ".concat(r," from level ").concat(this.level)),this.level=e.nextLoadLevel=r;const c=o.details;if(!c||this.state===ht.WAITING_LEVEL||c.live&&this.levelLastLoaded!==o){this.level=r,this.state=ht.WAITING_LEVEL;return}const d=a.len,u=this.getMaxBufferLength(o.maxBitrate);if(d>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:a.end;let f=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&f&&f.sn!=="initSegment"&&this.fragmentTracker.getState(f)!==Ws.OK){var m;const b=((m=this.backtrackFragment)!=null?m:f).sn-c.startSN,w=c.fragments[b-1];w&&f.cc===w.cc&&(f=w,this.fragmentTracker.removeFragment(w))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const b=this.audioOnly&&!this.altAudio?_i.AUDIO:_i.VIDEO,w=(b===_i.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;w&&this.afterBufferFlushed(w,b,sn.MAIN)}f=this.getNextFragmentLoopLoading(f,c,a,sn.MAIN,u)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,o,h))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===Ws.NOT_LOADED||s===Ws.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment ".concat(e.sn," of level ").concat(e.level," is being downloaded to test bitrate and will not be buffered")),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,sn.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<r.targetduration*2)return}if(!t.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:i=0}else i=0;const o=this.getBufferedFrag(t.currentTime+i);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,d=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(d,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ht.KEY_LOADING:case ht.FRAG_LOADING:case ht.FRAG_LOADING_WAITING_RETRY:case ht.PARSING:case ht.PARSED:this.state=ht.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new Rrt(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Mt(t)&&this.log("Media seeked to ".concat(t.toFixed(3)));const i=this.getMainFwdBufferInfo();if(i===null||i.len===0){this.warn('Main forward buffer length on "seeked" event '.concat(i?i.len:"empty",")"));return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(W.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let i=!1,s=!1;t.levels.forEach(r=>{const o=r.audioCodec;o&&(i=i||o.indexOf("mp4a.40.2")!==-1,s=s||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&s&&!Srt(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==ht.IDLE)return;const s=i[t.level];(!s.details||s.details.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(s.details))&&(this.state=ht.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:s}=this,r=t.level,o=t.details,a=o.totalduration;if(!s){this.warn("Levels were reset while loading level ".concat(r));return}this.log("Level ".concat(r," loaded [").concat(o.startSN,",").concat(o.endSN,"]").concat(o.lastPartSn?"[part-".concat(o.lastPartSn,"-").concat(o.lastPartIndex,"]"):"",", cc [").concat(o.startCC,", ").concat(o.endCC,"] duration:").concat(a));const l=s[r],c=this.fragCurrent;c&&(this.state===ht.FRAG_LOADING||this.state===ht.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let d=0;if(o.live||(i=l.details)!=null&&i.live){var u;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(W.LEVEL_UPDATED,{details:o,level:r}),this.state===ht.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=ht.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,d),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:i,part:s,payload:r}=e,{levels:o}=this;if(!o){this.warn("Levels were reset while fragment load was in progress. Fragment ".concat(i.sn," of level ").concat(i.level," will not be buffered"));return}const a=o[i.level],l=a.details;if(!l){this.warn("Dropping fragment ".concat(i.sn," of level ").concat(i.level," after level details were reset")),this.fragmentTracker.removeFragment(i);return}const c=a.videoCodec,d=l.PTSKnown||!l.live,u=(t=i.initSegment)==null?void 0:t.data,h=this._getAudioCodec(a),f=this.transmuxer=this.transmuxer||new hG(this.hls,sn.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=s?s.index:-1,g=m!==-1,b=new g5(i.level,i.sn,i.stats.chunkCount,r.byteLength,m,g),w=this.initPTS[i.cc];f.push(r,u,h,c,i,s,l.totalduration,d,b,w)}onAudioTrackSwitching(e,t){const i=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const r=this.hls;i&&(r.trigger(W.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),r.trigger(W.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=t.id,s=!!this.hls.audioTracks[i].url;if(s){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=s,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,r,o=!1;for(const a in i){const l=i[a];if(l.id==="main"){if(r=a,s=l,a==="video"){const c=i[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&s?(this.log("Alternate track found, use ".concat(r,".buffered to schedule main fragment loading")),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i&&i.type!==sn.MAIN)return;if(this.fragContextChanged(i)){this.warn("Fragment ".concat(i.sn).concat(s?" p: "+s.index:""," of level ").concat(i.level," finished buffering, but was aborted. state: ").concat(this.state)),this.state===ht.PARSED&&(this.state=ht.IDLE);return}const r=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*r.total/(r.buffering.end-r.loading.first)),i.sn!=="initSegment"&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}onError(e,t){var i;if(t.fatal){this.state=ht.ERROR;return}switch(t.details){case Xe.FRAG_GAP:case Xe.FRAG_PARSING_ERROR:case Xe.FRAG_DECRYPT_ERROR:case Xe.FRAG_LOAD_ERROR:case Xe.FRAG_LOAD_TIMEOUT:case Xe.KEY_LOAD_ERROR:case Xe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(sn.MAIN,t);break;case Xe.LEVEL_LOAD_ERROR:case Xe.LEVEL_LOAD_TIMEOUT:case Xe.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ht.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===Yn.LEVEL&&(this.state=ht.IDLE);break;case Xe.BUFFER_APPEND_ERROR:case Xe.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===Xe.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Xe.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!zi.getBuffered(e).length){const i=this.state!==ht.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ht.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==_i.AUDIO||this.audioOnly&&!this.altAudio){const i=(t===_i.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,t,sn.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log("could not seek to ".concat(i,", already seeking at ").concat(t));return}const s=zi.getBuffered(e),o=(s.length?s.start(0):0)-i;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by ".concat(o," to match buffer start")),i+=o,this.startPosition=i),this.log("seek to target start position ".concat(i," from current time ").concat(t)),e.currentTime=i}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:s}=this;if(!i||this.fragContextChanged(e))return;t.fragmentError=0,this.state=ht.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const r=e.stats;r.parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),s.trigger(W.FRAG_LOADED,i),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const i="main",{hls:s}=this,{remuxResult:r,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:d}=a,{video:u,text:h,id3:f,initSegment:m}=r,{details:g}=d,b=this.altAudio?void 0:r.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ht.PARSING,m){if(m!=null&&m.tracks){const k=l.initSegment||l;this._bufferInitSegment(d,m.tracks,k,o),s.trigger(W.FRAG_PARSING_INIT_SEGMENT,{frag:k,id:i,tracks:m.tracks})}const w=m.initPTS,x=m.timescale;Mt(w)&&(this.initPTS[l.cc]={baseTime:w,timescale:x},s.trigger(W.INIT_PTS_FOUND,{frag:l,id:i,initPTS:w,timescale:x}))}if(u&&g&&l.sn!=="initSegment"){const w=g.fragments[l.sn-1-g.startSN],x=l.sn===g.startSN,k=!w||l.cc>w.cc;if(r.independent!==!1){const{startPTS:E,endPTS:T,startDTS:P,endDTS:C}=u;if(c)c.elementaryStreams[u.type]={startPTS:E,endPTS:T,startDTS:P,endDTS:C};else if(u.firstKeyFrame&&u.independent&&o.id===1&&!k&&(this.couldBacktrack=!0),u.dropped&&u.independent){const A=this.getMainFwdBufferInfo(),R=(A?A.end:this.getLoadPosition())+this.config.maxBufferHole,M=u.firstKeyFramePTS?u.firstKeyFramePTS:E;if(!x&&R<M-this.config.maxBufferHole&&!k){this.backtrack(l);return}else k&&(l.gap=!0);l.setElementaryStreamInfo(u.type,l.start,T,l.start,C,!0)}else x&&E>ly&&(l.gap=!0);l.setElementaryStreamInfo(u.type,E,T,P,C),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(u,l,c,o,x||k)}else if(x||k)l.gap=!0;else{this.backtrack(l);return}}if(b){const{startPTS:w,endPTS:x,startDTS:k,endDTS:E}=b;c&&(c.elementaryStreams[_i.AUDIO]={startPTS:w,endPTS:x,startDTS:k,endDTS:E}),l.setElementaryStreamInfo(_i.AUDIO,w,x,k,E),this.bufferFragmentData(b,l,c,o)}if(g&&f!=null&&(t=f.samples)!=null&&t.length){const w={id:i,frag:l,details:g,samples:f.samples};s.trigger(W.FRAG_PARSING_METADATA,w)}if(g&&h){const w={id:i,frag:l,details:g,samples:h.samples};s.trigger(W.FRAG_PARSING_USERDATA,w)}}_bufferInitSegment(e,t,i,s){if(this.state!==ht.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:r,video:o,audiovideo:a}=t;if(r){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const d=r.metadata;d&&"channelCount"in d&&(d.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log("Android: force audio codec to ".concat(l))),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'.concat(e.audioCodec,'" for "').concat(l,'"')),r.levelCodec=l,r.id="main",this.log("Init audio buffer, container:".concat(r.container,", codecs[selected/level/parsed]=[").concat(l||"","/").concat(e.audioCodec||"","/").concat(r.codec,"]"))}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:".concat(o.container,", codecs[level/parsed]=[").concat(e.videoCodec||"","/").concat(o.codec,"]"))),a&&this.log("Init audiovideo buffer, container:".concat(a.container,", codecs[level/parsed]=[").concat(e.codecs,"/").concat(a.codec,"]")),this.hls.trigger(W.BUFFER_CODECS,t),Object.keys(t).forEach(l=>{const d=t[l].initSegment;d!=null&&d.byteLength&&this.hls.trigger(W.BUFFER_APPENDING,{type:l,data:d,frag:i,part:null,chunkMeta:s,parent:i.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,sn.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ht.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(zi.isBuffered(e,i)?t=this.getAppendedFrag(i):zi.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const s=this.fragPlaying,r=t.level;(!s||t.sn!==s.sn||s.level!==r)&&(this.fragPlaying=t,this.hls.trigger(W.FRAG_CHANGED,{frag:t}),(!s||s.level!==r)&&this.hls.trigger(W.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,i=this.currentFrag;if(i&&Mt(t)&&Mt(i.programDateTime)){const s=i.programDateTime+(t-i.start)*1e3;return new Date(s)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class xl{static get version(){return"1.5.18"}static isMSESupported(){return $G()}static isSupported(){return Crt()}static getMediaSource(){return wh()}static get Events(){return W}static get ErrorTypes(){return fn}static get ErrorDetails(){return Xe}static get DefaultConfig(){return xl.defaultConfig?xl.defaultConfig:PG}static set DefaultConfig(e){xl.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new k5,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,xtt(e.debug||!1,"Hls instance");const t=this.config=_rt(xl.DefaultConfig,e);this.userConfig=e,t.progressive&&krt(t);const{abrController:i,bufferController:s,capLevelController:r,errorController:o,fpsController:a}=t,l=new o(this),c=this.abrController=new i(this),d=this.bufferController=new s(this),u=this.capLevelController=new r(this),h=new a(this),f=new mnt(this),m=new wnt(this),g=t.contentSteeringController,b=g?new g(this):null,w=this.levelController=new Ert(this,b),x=new Ynt(this),k=new Trt(this.config),E=this.streamController=new Lrt(this,x,k);u.setStreamController(E),h.setStreamController(E);const T=[f,w,E];b&&T.splice(1,0,b),this.networkControllers=T;const P=[c,d,u,h,m,x];this.audioTrackController=this.createController(t.audioTrackController,T);const C=t.audioStreamController;C&&T.push(new C(this,x,k)),this.subtitleTrackController=this.createController(t.subtitleTrackController,T);const A=t.subtitleStreamController;A&&T.push(new A(this,x,k)),this.createController(t.timelineController,P),k.emeController=this.emeController=this.createController(t.emeController,P),this.cmcdController=this.createController(t.cmcdController,P),this.latencyController=this.createController(xnt,P),this.coreComponents=P,T.push(l);const R=l.onErrorOut;typeof R=="function"&&this.on(W.ERROR,R,l)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(Ve.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const s=e===W.ERROR;this.trigger(W.ERROR,{type:fn.OTHER_ERROR,details:Xe.INTERNAL_EXCEPTION,fatal:s,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){Ve.log("destroy"),this.trigger(W.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){Ve.log("attachMedia"),this._media=e,this.trigger(W.MEDIA_ATTACHING,{media:e})}detachMedia(){Ve.log("detachMedia"),this.trigger(W.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,i=this.url,s=this.url=d5.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,Ve.log("loadSource:".concat(s)),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(W.MANIFEST_LOADING,{url:e})}startLoad(e=-1){Ve.log("startLoad(".concat(e,")")),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){Ve.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){Ve.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){Ve.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){Ve.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Ve.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){Ve.log("set currentLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){Ve.log("set nextLevel:".concat(e)),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){Ve.log("set loadLevel:".concat(e)),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){Ve.log("set firstLevel:".concat(e)),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){Ve.log("set startLevel:".concat(e)),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(Ve.log("set autoLevelCapping:".concat(e)),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){_nt(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(t===-1&&e!=null&&e.length?s=e.length-1:s=t,i)for(let r=s;r--;){const o=e[r].attrs["HDCP-LEVEL"];if(o&&o<=i)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}xl.defaultConfig=void 0;const Ort=["poster"],Drt=Fe({__name:"VideoPlayerLearnCourse",props:Hg({courseId:{},poster:{},src:{},userId:{},lessonId:{},controls:{default:()=>["play-large","play","progress","current-time","mute","volume","captions","settings","fullscreen"]},canRotate:{type:Boolean,default:!0}},{provider:{default:"html5"},providerModifiers:{}}),emits:["update:provider"],setup(n){const e=ln(),{community:t}=et(e),i=K(null),s=cee(n,["controls","canRotate"]),r=jg(n,"provider"),o=K([]),a=K(!1),l=K(0),c=K(!1);let d;const u=async h=>{console.log("initPlyr",h);const f={controls:n.controls,youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1},fullscreen:{enabled:!0,iosNative:!n.canRotate}};let m;const g=xl.isSupported()&&lye(h);if(g)if(m=new xl({xhrSetup:function(b,w){w.includes(".key")&&b.setRequestHeader("X-Stream-Origin","expert")}}),DB(h)){const b=await Qe.get("/course-lessons/".concat(s.lessonId,"/stream"),{});b.status==200&&(o.value=b.data),f.quality={default:480,options:[],forced:!0,onChange:w=>{const x=o.value.find(k=>k.label=="".concat(w,"P"));x&&(m.loadSource(x.src),c.value=!0)}};for(const w of o.value){const x=w.label.replace("P","");f.quality.options.push(Number(x))}}else h.endsWith(".m3u8")&&(m.loadSource(h),m.on(xl.Events.MANIFEST_PARSED,function(){const b=m.levels.map(w=>w.height);b.unshift(0),f.quality={default:0,options:b,forced:!0,onChange:w=>{w===0?m.currentLevel=-1:m.levels.forEach((x,k)=>{x.height===w&&(console.log("Found quality match with "+w),m.currentLevel=k)})}},f.i18n={qualityLabel:{0:"Auto"}},m.on(xl.Events.LEVEL_SWITCHED,function(w,x){const k=document.querySelector(".plyr__menu__container [data-plyr='quality'][value='0'] span");k&&(m.autoLevelEnabled?k.innerHTML="AUTO (".concat(m.levels[x.level].height,"p)"):k.innerHTML="AUTO")})}));d=new Np(i.value,f),g?m.attachMedia(i.value):d.source={type:"video",sources:[{src:h,provider:r.value}]},d.on("ready",()=>{const b=d.duration;setTimeout(()=>{d.currentTime=l.value},500);const w=async()=>{var x;c.value?(setTimeout(()=>{d.currentTime=l.value},500),c.value=!1):(l.value=d.currentTime,l.value/b*100>=80&&!a.value&&(await Qe.patch("/user-course",{user_id:s.userId,course_id:s.courseId,lesson_id:s.lessonId,community_id:(x=t.value)==null?void 0:x._id}),a.value=!0))};d.on("timeupdate",w)}),d.on("enterfullscreen",async()=>{await s0.lock({orientation:"landscape"})}),d.on("exitfullscreen",async()=>{await s0.lock({orientation:"portrait"})})};return on(async()=>{await u(s.src)}),(h,f)=>(I(),O("video",{ref_key:"playerRef",ref:i,controls:"",poster:h.poster},null,8,Ort))}}),Mrt={key:0,class:"pb-4"},Nrt={class:"text-base font-normal py-4 items-center"},Frt={class:"bg-white",slot:"content"},Brt=["onClick"],Vrt={class:"text-sm font-normal flex-1"},Urt={class:"text-sm font-normal"},zrt={key:1,class:"flex flex-col text-gray2 mt-[10%] items-center justify-center"},Hrt=Fe({__name:"TabLesson",props:{courseChapter:{},formatSeconds:{},onActiveLesson:{default:()=>{}},lessonActive:{}},setup(n){return(e,t)=>(I(),ve(y(At),{color:"white1"},{default:j(()=>[y(J.isEmpty)(e.courseChapter)?(I(),O("div",zrt,[L(y(fe),{icon:"/icEmpty.svg",class:"size-32"}),t[0]||(t[0]=be(" Chưa có bài học nào "))])):(I(),O("div",Mrt,[L(y(WN),null,{default:j(()=>[(I(!0),O(Ue,null,ct(e.courseChapter,i=>(I(),ve(y(GN),{mode:"ios","toggle-icon":y(Al),"toggle-icon-slot":"end",value:i._id,key:i._id,class:"bg-white1"},{default:j(()=>[L(y(KN),{slot:"header",color:"white1"},{default:j(()=>[_("div",Nrt,Q(i.title),1)]),_:2},1024),_("div",Frt,[(I(!0),O(Ue,null,ct(i.lessons,s=>(I(),O("div",{key:s._id,onClick:r=>e.onActiveLesson(i,s),class:gt([{"bg-[#D2E7FF]":!y(J.isUndefined)(e.lessonActive)&&e.lessonActive._id==s._id},"ion-padding-horizontal py-4 flex items-stretch gap-2"])},[L(y(fe),{icon:y(FA),class:"size-5"},null,8,["icon"]),_("div",Vrt,Q(s.title),1),_("div",Urt,Q(e.formatSeconds(s.time_video)),1)],10,Brt))),128))])]),_:2},1032,["toggle-icon","value"]))),128))]),_:1})]))]),_:1}))}}),jrt={class:"flex gap-1.5 pt-2.5 pb-1"},Grt=["src"],Wrt={class:"w-full"},qrt={class:"bg-white1 rounded-md p-2"},Krt={class:"text-sm font-medium"},Yrt=["innerHTML"],Xrt={class:"flex items-center gap-4 text-sm text-gray2 font-medium mt-1"},Qrt={class:"font-normal"},Zrt={key:0,class:"items-center flex gap-2 text-sm text-blue1 mt-2 font-medium"},Jrt={key:0,class:"items-center flex gap-2 text-sm text-blue1 mt-2 font-medium"},eot=5,tot=Fe({__name:"ReplyComp",props:{isChild:{type:Boolean,default:!1},comment:{},onReply:{type:Function,default:()=>{}}},setup(n){const e=n,t=K(1),i=K(!1),s=K(!1),r=K([]),o=async(c=!1)=>{var h,f,m,g,b,w,x,k,E;const d={"w[]":["creator","reply_count","total_reactions","user_reaction"],"filter[lesson_id]":(h=e.comment)==null?void 0:h.lesson_id,"filter[reply_comment_id]":(f=e.comment)==null?void 0:f._id,"sort[_id]":"desc",page:t.value,limit:eot},{data:u}=await Qe.get("/community-comment",{params:d});J.isEmpty(u)?(i.value=!1,t.value=1):((m=u==null?void 0:u.meta)!=null&&m.hasNextPage?(t.value++,i.value=!0):(i.value=!1,t.value=1),c?J.isEmpty((g=e.comment)==null?void 0:g.repliesChild)?r.value=[...r.value,...(b=u==null?void 0:u.data)!=null?b:[]]:r.value=[...r.value,...(w=u==null?void 0:u.data)!=null?w:[]].filter(T=>{var P,C;return!((C=(P=e.comment)==null?void 0:P.repliesChild)!=null&&C.some(A=>(A==null?void 0:A._id)===T._id))}):J.isEmpty((x=e.comment)==null?void 0:x.repliesChild)?r.value=(k=u==null?void 0:u.data)!=null?k:[]:r.value=((E=u==null?void 0:u.data)!=null?E:[]).filter(T=>{var P,C;return!((C=(P=e.comment)==null?void 0:P.repliesChild)!=null&&C.some(A=>(A==null?void 0:A._id)===(T==null?void 0:T._id)))}))},a=()=>{s.value=!0,o()},l=()=>{o(!0)};return(c,d)=>{var h,f,m,g,b,w,x,k,E,T,P,C,A,R,M,N;const u=nb("ReplyComp",!0);return I(),O("section",jrt,[_("img",{src:(m=(f=(h=c.comment)==null?void 0:h.creator)==null?void 0:f.avatar)!=null?m:"/icUser.png",class:"size-11 rounded-full"},null,8,Grt),_("div",Wrt,[_("div",qrt,[_("div",Krt,Q((b=(g=c.comment)==null?void 0:g.creator)==null?void 0:b.full_name),1),_("div",{innerHTML:(w=c.comment)==null?void 0:w.content,class:"text-sm font-light pt-1"},null,8,Yrt)]),_("div",Xrt,[_("span",Qrt,Q(y(_t)((x=c.comment)==null?void 0:x.created_at).fromNow().toString()),1),_("span",{onClick:d[0]||(d[0]=U=>c.onReply(c.comment))}," Trả lời ")]),y(J.isEmpty)((k=c.comment)==null?void 0:k.repliesChild)?re("",!0):(I(!0),O(Ue,{key:0},ct((E=c.comment)==null?void 0:E.repliesChild,U=>(I(),O("div",{key:U._id},[L(u,{"is-child":"",comment:U,onReply:d[1]||(d[1]=G=>c.onReply(c.comment))},null,8,["comment"])]))),128)),s.value?(I(),O(Ue,{key:1},[(I(!0),O(Ue,null,ct(r.value,U=>(I(),O("div",{key:U._id},[L(u,{"is-child":!0,comment:U,onReply:d[2]||(d[2]=G=>c.onReply(c.comment))},null,8,["comment"])]))),128)),((P=(T=c.comment)==null?void 0:T.reply_count)!=null?P:0)-r.value.length>0&&i.value?(I(),O("div",Zrt,[L(y(fe),{src:"/icons/icReturnRight.svg",class:"text-blue1 size-4 pb-1"}),_("div",{onClick:l}," Xem "+Q(((A=(C=c.comment)==null?void 0:C.reply_count)!=null?A:0)-r.value.length)+" phản hồi... ",1)])):re("",!0)],64)):re("",!0),(R=c.comment)!=null&&R.reply_count&&((M=c.comment)==null?void 0:M.reply_count)>0&&!c.isChild?(I(),O(Ue,{key:2},[s.value?re("",!0):(I(),O("div",Jrt,[L(y(fe),{src:"/icons/icReturnRight.svg",class:"text-blue1 size-4 pb-1"}),_("div",{onClick:a}," Xem "+Q((N=c.comment)==null?void 0:N.reply_count)+" phản hồi... ",1)]))],64)):re("",!0)])])}}}),not={key:0},iot={key:1,class:"flex flex-col justify-center items-center mt-[10%] text-gray2"},sot=Fe({__name:"TabLessonDiscuss",props:{onMount:{type:Function,default:()=>{}},onSelectReply:{type:Function,default:()=>{}},onInfiniteLoad:{type:Function,default:()=>{}},discusses:{},canLoadmore:{type:Boolean,default:!1}},setup(n){return on(n.onMount),(t,i)=>(I(),ve(y(At),{class:"ion-padding",color:"white","scroll-events":!0},{default:j(()=>[y(J.isEmpty)(t.discusses)?(I(),O("div",iot,[L(y(fe),{src:"/icEmpty.svg",class:"size-32"}),i[0]||(i[0]=_("div",null,"Thảo luận trống",-1))])):(I(),O("div",not,[(I(!0),O(Ue,null,ct(t.discusses,s=>(I(),O("div",{key:s._id},[L(tot,{comment:s,onReply:t.onSelectReply},null,8,["comment","onReply"])]))),128))])),t.canLoadmore?(I(),ve(y(Zn),{key:2,onIonInfinite:t.onInfiniteLoad},{default:j(()=>[L(y(Jn))]),_:1},8,["onIonInfinite"])):re("",!0)]),_:1}))}}),rot=["innerHTML"],oot={key:1,class:"flex flex-col text-gray2 mt-[10%] items-center justify-center"},aot=Fe({__name:"TabLessonContent",props:{lessonActive:{}},setup(n){return(e,t)=>(I(),ve(y(At),{class:"ion-padding"},{default:j(()=>{var i,s;return[(i=e.lessonActive)!=null&&i.description?(I(),O("div",{key:0,innerHTML:(s=e.lessonActive)==null?void 0:s.description},null,8,rot)):(I(),O("div",oot,[L(y(fe),{icon:"/icEmpty.svg",class:"size-32"}),t[0]||(t[0]=be(" Bài học này chưa có nội dung "))]))]}),_:1}))}}),lot=["onClick"],cot={class:"flex w-full items-stretch py-2 gap-2 overflow-hidden"},dot={class:"flex"},uot={class:"w-full text-blue-500"},hot={key:1,class:"flex justify-center items-center mt-[10%] flex-col text-center text-gray2"},fot=Fe({__name:"TabLessonDocument",props:{lessonActive:{},openExternalLink:{}},setup(n){return(e,t)=>(I(),ve(y(At),{class:"ion-padding",color:"white"},{default:j(()=>{var i,s;return[_("div",null,[y(J.isEmpty)((i=e.lessonActive)==null?void 0:i.attachments)?(I(),O("div",hot,[L(y(fe),{icon:"/icEmpty.svg",class:"size-32"}),t[0]||(t[0]=be(" Không có tài liệu trong bài học này. "))])):(I(!0),O(Ue,{key:0},ct((s=e.lessonActive)==null?void 0:s.attachments,r=>(I(),O("div",{key:r.url,onClick:o=>e.openExternalLink(r.url)},[_("div",cot,[_("div",dot,[L(y(fe),{icon:y(Ibe),class:"size-6 text-gray2"},null,8,["icon"])]),_("div",uot,Q(r.name),1)])],8,lot))),128))])]}),_:1}))}}),pot={slot:"start",class:"flex items-center text-lg font-medium"},mot={key:1,class:"aspect-video bg-gray1"},got=["src"],bot={class:"ion-padding-horizontal ion-padding-top"},vot={class:"text-lg font-medium line-clamp-2"},yot={key:0,class:"text-sm ml-11 my-2 font-light"},wot={class:"flex items-end gap-2 my-2"},xot=["src"],_ot={class:"w-full"},kot=Fe({__name:"CourseLearningScreen",setup(n){const{DEV:e,VITE_API_URL_DEV:t,VITE_API_URL:i}={VITE_API_URL:"https://api.unica.expert/v1",VITE_API_URL_DEV:"https://api.unica.expert/v1",VITE_API_URL_CHAT:"https://unica.expert/api/converse/v1",VITE_API_SOCKET:"https://chat.unica.expert",VITE_API_URL_ID:"https://id.unica.vn/api",VITE_APP_DOMAIN:"https://unica.expert",VITE_IMGUR_CLIENT_ID:"df39d2d64051f53b1acc5e54d06949b4",VITE_ANDROID_VERSION:"1.1.5",VITE_IOS_VERSION:"1.0.4",VITE_HOTLINE:"0868 526 560",VITE_MAIL:"cskh@unica.expert",VITE_IOS_SCHEME:"itms-apps://itunes.apple.com/us/app/id6740229112?mt=8",VITE_ANDROID_SCHEME:"market://details?id=com.unica.expert",VITE_CLIENT_ID_ANDROID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",VITE_CLIENT_ID_IOS:"259777504928-p4r5fqjqelapt3fn6tubi45u912fpqd0.apps.googleusercontent.com",VITE_CLIENT_ID:"259777504928-cckst6qhi1cup08rnauu9dgb2mguetfr.apps.googleusercontent.com",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},s=e?t:i,r=[R3,L3,S0,N3,Xx,e_,F3,Jx,Zx,Qx,B3],o={Lesson:"Lesson",Discuss:"Discuss",Document:"Document",Content:"Content"},a=[{key:"Lesson",title:"Bài học"},{key:"Discuss",title:"Thảo luận"},{key:"Document",title:"Tài liệu"},{key:"Content",title:"Nội dung"}],l=en(),{userInfo:c,accessToken:d}=et(l),u=Ej(),{course:h}=et(u),{community:f}=et(ln()),m=gn(),g=()=>m.back(),b=K(),w=K(),x=K(void 0),k=K(),E=K([]),T=K(a[0].key),P=K(""),C=K([]),A=K(1),R=K(!1),M=async(Ae=1,de=!1)=>{var le,Se,ne,ie;if(J.isEmpty(w.value))return;const we={"w[]":["creator","reply_count","total_reactions","user_reaction"],"filter[lesson_id]":(le=w.value)==null?void 0:le._id,"filter[reply_comment_id]":"null","sort[_id]":"desc",page:Ae,limit:10},{data:ze}=await Qe.get("/community-comment",{params:we});J.isEmpty(ze)?R.value=!1:((Se=ze==null?void 0:ze.meta)!=null&&Se.hasNextPage?(A.value++,R.value=!0):R.value=!1,de?C.value=[...C.value,...(ne=ze==null?void 0:ze.data)!=null?ne:[]]:C.value=(ie=ze==null?void 0:ze.data)!=null?ie:[])},N=Ae=>{T.value=Ae},U=async()=>{var de;const Ae=await Qe.get("/course-chapter",{params:{course_id:(de=h.value)==null?void 0:de._id}});Ae.status==200&&(E.value=Ae.data,!J.isEmpty(E.value)&&!J.isUndefined(E.value[0].lessons)&&await te(E.value[0],E.value[0].lessons[0]))},G=async Ae=>{if(!Ae)return;const de=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,we=/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/(?:\w+\/)?|album\/(?:\d+\/)?|video\/|)(\d+)(?:$|\/|\?)/;return de.test(Ae)?"youtube":we.test(Ae)?"vimeo":"html5"};tr(async()=>{await U()});const B=async Ae=>{Ae&&await Xr.open({url:Ae})},te=async(Ae,de)=>{x.value=await G(de.video_url),b.value=Ae,w.value=de},X=Ae=>{const de=Math.floor(Ae/3600),we=String(Math.floor(Ae%3600/60)).padStart(2,"0"),ze=String(Ae%60).padStart(2,"0");return de>0?"".concat(de,":").concat(we,":").concat(ze):"".concat(we,":").concat(ze)},ue=Ae=>{k.value=Ae},he=()=>{k.value=void 0},Ie=()=>{P.value="",k.value=void 0},xe=async()=>{var Ae,de,we,ze,le;try{const Se={lesson_id:(Ae=w.value)==null?void 0:Ae._id,content:P.value,creator_id:(de=c.value)==null?void 0:de._id,community_id:(we=f.value)==null?void 0:we._id,reply_comment_id:(le=(ze=k.value)==null?void 0:ze._id)!=null?le:void 0,attachments:[],files:[]},ne=new FormData,ie=(V,F="")=>{V&&(typeof V=="object"&&!(V instanceof File)?Object.keys(V).forEach(z=>{ie(V[z],F?"".concat(F,"[").concat(z,"]"):z)}):ne.append(F,V))};ie(Se);const me=await fetch("".concat(s,"/community-comment"),{method:"POST",headers:{Authorization:"Bearer ".concat(d.value)},body:ne});if(me.status===201){Ie();const V=await me.json();if(!J.isEmpty(V))if(!J.isEmpty(V.reply_comment_id)&&!J.isEmpty(Se.reply_comment_id)){const F=C.value.map(z=>{var se;return(V==null?void 0:V.reply_comment_id)===z._id?{...z,repliesChild:[V,...(se=z==null?void 0:z.repliesChild)!=null?se:[]]}:z});C.value=F}else C.value=[V,...C.value]}}catch(Se){console.log(Se)}},Be=()=>{M(1,!1),A.value=1,R.value=!1},Pe=Ae=>{M(A.value,!0),setTimeout(()=>Ae.target.complete(),500)};return(Ae,de)=>{const we=nb("ckeditor");return I(),ve(y(Dn),null,{default:j(()=>{var ze,le,Se,ne,ie,me,V;return[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>{var F;return[_("div",pot,[L(y(fe),{onClick:g,icon:y(ea),class:"size-6 px-2"},null,8,["icon"]),be(" "+Q((F=y(h))==null?void 0:F.title),1)])]}),_:1})]),_:1}),w.value&&((ze=y(c))!=null&&ze._id)&&((le=y(h))!=null&&le._id)&&!y(J.isUndefined)(x.value)?(I(),O("div",{key:w.value._id},[L(Drt,{"course-id":(Se=y(h))==null?void 0:Se._id,"lesson-id":w.value._id,src:w.value.video_url,provider:x.value,"user-id":(ne=y(c))==null?void 0:ne._id,poster:w.value.thumbnail},null,8,["course-id","lesson-id","src","provider","user-id","poster"])])):(I(),O("div",mot,[_("img",{src:(me=(ie=y(h))==null?void 0:ie.thumbnail)!=null?me:"https://via.placeholder.com/100x100/ddd/ddd",class:"aspect-video"},null,8,got)])),_("section",bot,[_("div",vot,Q((V=w.value)==null?void 0:V.title),1)]),L(Ob,{routes:a,onChangeTab:N,"tab-key":T.value},{scene:j(()=>[T.value==o.Lesson?(I(),ve(Hrt,{key:0,"course-chapter":E.value,"format-seconds":X,onActiveLesson:te,"lesson-active":w.value},null,8,["course-chapter","lesson-active"])):re("",!0),T.value==o.Discuss?(I(),ve(sot,{key:1,onSelectReply:ue,onMount:Be,onInfiniteLoad:Pe,discusses:C.value,"can-loadmore":R.value},null,8,["discusses","can-loadmore"])):re("",!0),T.value==o.Document?(I(),ve(fot,{key:2,"lesson-active":w.value,"open-external-link":B},null,8,["lesson-active"])):re("",!0),T.value==o.Content?(I(),ve(aot,{key:3,"lesson-active":w.value},null,8,["lesson-active"])):re("",!0)]),_:1},8,["tab-key"]),T.value==o.Discuss?(I(),ve(y(xA),{key:2,mode:"md"},{default:j(()=>[L(y(An),{class:"px-4",color:"white"},{default:j(()=>{var F,z,se,Te,ke,Ce,ge,He;return[y(J.isEmpty)(k.value)?re("",!0):(I(),O("div",yot,[de[1]||(de[1]=be(" Đang trả lời ")),_("span",{class:gt(["text-black",((F=k.value.creator)==null?void 0:F._id)===((z=y(c))==null?void 0:z._id)?"font-light":"font-medium"])},Q(((se=k.value.creator)==null?void 0:se._id)===((Te=y(c))==null?void 0:Te._id)?"chính mình":(Ce=(ke=k.value)==null?void 0:ke.creator)==null?void 0:Ce.full_name),3),de[2]||(de[2]=_("span",{class:"text-xs text-gray2"}," • ",-1)),_("span",{onClick:he,class:"font-medium text-gray2"},"Huỷ")])),_("div",wot,[_("img",{src:(He=(ge=y(c))==null?void 0:ge.avatar)!=null?He:"/icUser.png",class:"size-9 rounded-full"},null,8,xot),_("div",_ot,[L(we,{modelValue:P.value,"onUpdate:modelValue":de[0]||(de[0]=Ge=>P.value=Ge),editor:y(P3),config:{plugins:r,removePlugins:["MediaEmbedToolbar"],placeholder:"Nhập gì đó..."}},null,8,["modelValue","editor","config"])]),y(J.isEmpty)(P.value)?re("",!0):(I(),O("div",{key:0,class:"flex",onClick:xe},[L(y(fe),{icon:y(fB),class:"text-blue1 h-9 w-7"},null,8,["icon"])]))])]}),_:1})]),_:1})):re("",!0)]}),_:1})}}}),Eot=Fe({__name:"PaymentCreateCommunity",setup(n){return Sh(),(e,t)=>(I(),ve(y(Dn)))}}),IE=(n,e,t)=>{const i=en(),s=Ba(),{routerCallback:r}=et(s),{isLoggedIn:o}=et(i);o.value?t():(s.setRouterCallback({name:n==null?void 0:n.name,params:n==null?void 0:n.params,...r}),t({name:"LoginScreen"}))},Tot={key:1,class:"pb-10"},Cot={class:"bg-white p-4 mb-4 rounded-lg"},Sot={class:"text-base"},Aot={class:"text-base font-semibold"},Iot={class:"text-base font-semibold"},Pot={key:0},Rot={class:"text-base font-semibold"},$ot={key:1},Lot={class:"flex justify-center gap-4 mt-2.5"},Oot=["onClick"],Dot=["onClick"],Mot={class:"flex gap-2.5"},Not=["src"],Fot={class:"text-lg font-semibold"},Bot={class:"font-normal text-sm"},Vot={key:0},Uot={key:1},zot={class:"mt-4 line-clamp-1 uppercase font-semibold"},Hot=["innerHTML"],jot=["innerHTML"],Got=Fe({__name:"CommunityReportPostScreen",setup(n){const e=Sh(),t=async()=>{e.back()},i=ln(),{community:s}=et(i),r=K([]),o=K(1),a=K(!1),l=async(x=1,k=!1)=>{var P,C,A,R;const E={"filter[community_id]":(P=s.value)==null?void 0:P._id,"filter[status]":kw.Processing,"w[]":["reporter","post","comment"],page:x,limit:20},{data:T}=await Qe.get("/community-post-report",{params:E});J.isEmpty(T)?a.value=!1:((C=T==null?void 0:T.meta)!=null&&C.hasNextPage?(o.value++,a.value=!0):a.value=!1,k?r.value=[...r.value,...(A=T==null?void 0:T.data)!=null?A:[]]:r.value=(R=T==null?void 0:T.data)!=null?R:[])},c=async x=>{l(o.value,!0),setTimeout(()=>x.target.complete(),500)},d=()=>{l(1,!1),o.value=1,a.value=!1};tr(async()=>{d()});const u=x=>x?"bài viết":"bình luận",h=async x=>{try{const k={status:kw.Processed};await Qe.patch("/community-post-report/".concat(x._id),k)}catch(k){console.log(k)}finally{d()}},f=async(x,k)=>{x&&await(await vx.create({message:x!=null?x:"",duration:1500,position:"top",swipeGesture:"vertical",mode:"ios",cssClass:k})).present()},m=async x=>{try{if(J.isEmpty(x==null?void 0:x.comment)&&!J.isEmpty(x==null?void 0:x.post)){const{status:k}=await Qe.delete("/community-post/".concat(x.post_id));k===200&&(await h(x),f("Gỡ bài viết thành công","success"))}}catch(k){f("Đã có lỗi xảy ra","warning")}},g=async x=>{try{if(!J.isEmpty(x==null?void 0:x.comment)&&J.isEmpty(x==null?void 0:x.post)){const{status:k}=await Qe.delete("/community-comment/".concat(x==null?void 0:x.comment_id));k===200&&(await h(x),f("Gỡ bình luận thành công","success"))}}catch(k){f("Đã có lỗi xảy ra","warning")}},b=async x=>{try{J.isEmpty(x==null?void 0:x.post_id)?J.isEmpty(x==null?void 0:x.comment_id)||await g(x):await m(x)}catch(k){f("Đã có lỗi xảy ra","warning")}finally{d()}},w=async x=>{await(await Fd.create({mode:"ios",header:J.isEmpty(x==null?void 0:x.post_id)?"Bạn muốn gỡ bình luận này?":"Bạn muốn gỡ bài viết này?",cssClass:"ionalert",buttons:[{text:"Huỷ",role:"cancel"},{text:"Đồng ý",role:"confirm",handler:()=>b(x)}]})).present()};return(x,k)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{slot:"start",onClick:t,icon:y(Eo),class:"size-6 p-2"},null,8,["icon"]),k[0]||(k[0]=_("div",{class:"flex-1 text-base font-medium text-black"}," Nội dung bị thành viên báo cáo ",-1))]),_:1})]),_:1}),L(y(At),{class:"ion-padding",color:"white1"},{default:j(()=>[y(J.isEmpty)(r.value)?(I(),O(Ue,{key:0},[k[1]||(k[1]=_("div",{class:"flex justify-center mt-[20%]"},[_("img",{src:hm,class:"mr-1"})],-1)),k[2]||(k[2]=_("div",{class:"text-center font-medium text-gray2"}," Không có nội dung bị báo cáo ",-1))],64)):(I(),O("div",Tot,[(I(!0),O(Ue,null,ct(r.value,E=>{var T,P,C,A,R,M,N,U,G,B,te,X,ue,he,Ie,xe,Be,Pe,Ae,de,we;return I(),O("div",{key:E._id},[_("section",Cot,[_("div",null,[_("section",Sot,[_("span",Aot,Q((T=E==null?void 0:E.reporter)==null?void 0:T.full_name),1),k[4]||(k[4]=be(" đã báo cáo ")),_("span",Iot,Q(u(!y(J.isEmpty)(E==null?void 0:E.post)&&y(J.isEmpty)(E==null?void 0:E.comment))),1),y(J.isEmpty)(E==null?void 0:E.comment)?re("",!0):(I(),O("span",Pot,[k[3]||(k[3]=be(" này trên bài viết của ")),_("span",Rot,Q((A=(C=(P=E.comment)==null?void 0:P.post)==null?void 0:C.creator)==null?void 0:A.full_name),1)])),y(J.isEmpty)(E==null?void 0:E.post)?re("",!0):(I(),O("span",$ot," này vì "+Q(E==null?void 0:E.reason),1))]),_("section",Lot,[_("div",{onClick:ze=>h(E),class:"px-6 py-1 bg-blue2 rounded-lg text-sm text-white shadow-st uppercase font-medium"}," Giữ lại ",8,Oot),_("div",{onClick:ze=>w(E),class:"px-6 py-1 bg-white rounded-lg text-sm text-black shadow-st uppercase font-medium"}," Gỡ ",8,Dot)])]),k[5]||(k[5]=_("div",{class:"bg-gray3 h-[1.5px] my-4"},null,-1)),_("div",null,[_("div",Mot,[_("img",{src:(B=(G=(M=(R=E==null?void 0:E.post)==null?void 0:R.creator)==null?void 0:M.avatar)!=null?G:(U=(N=E==null?void 0:E.comment)==null?void 0:N.creator)==null?void 0:U.avatar)!=null?B:"/upload-user.png",class:"size-12 rounded-full object-cover",placeholder:"/upload-user.png"},null,8,Not),_("div",Fot,[be(Q((Ie=(X=(te=E==null?void 0:E.post)==null?void 0:te.creator)==null?void 0:X.full_name)!=null?Ie:(he=(ue=E==null?void 0:E.comment)==null?void 0:ue.creator)==null?void 0:he.full_name)+" ",1),_("div",Bot,[y(J.isEmpty)(E==null?void 0:E.post)?re("",!0):(I(),O("span",Vot,Q(y(_t)((xe=E.post)==null?void 0:xe.created_at).from(y(_t)())),1)),y(J.isEmpty)(E==null?void 0:E.comment)?re("",!0):(I(),O("span",Uot,Q(y(_t)((Be=E.comment)==null?void 0:Be.created_at).from(y(_t)())),1))])])]),_("div",null,[y(J.isEmpty)(E==null?void 0:E.post)?y(J.isEmpty)(E==null?void 0:E.comment)?re("",!0):(I(),O("div",{key:1,class:"mt-2.5 text-base",innerHTML:(we=E==null?void 0:E.comment.content)!=null?we:""},null,8,jot)):(I(),O(Ue,{key:0},[_("div",zot,Q((Ae=(Pe=E==null?void 0:E.post)==null?void 0:Pe.title)!=null?Ae:""),1),_("div",{class:"mt-2.5 text-base",innerHTML:(de=E==null?void 0:E.post)==null?void 0:de.description},null,8,Hot)],64))])])])])}),128))])),a.value?(I(),ve(y(Zn),{key:2,onIonInfinite:c,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]),_:1}))}}),Wot={slot:"start",class:"flex items-center p-3"},qot={class:"font-medium text-lg"},Kot={class:"space-y-6 p-4 rounded-lg bg-white pb-10"},Yot=["onClick"],Xot=["src"],Qot={class:"flex-col gap-2 w-full"},Zot={class:"gap-2 text-lg font-medium line-clamp-1 w-full"},Jot={class:"flex items-center gap-2"},eat={class:"text-neutral-500 text-sm font-light"},tat={class:"text-neutral-500 text-sm font-light"},nat={class:"text-neutral-500 text-sm font-light"},iat={key:0},sat={key:1},rat=Fe({__name:"ListCommunityUserScreen",setup(n){const e=gn(),t=Zr(),i=K(1),s=K([]),r=K(!1),o=ln(),a=async(h=1,f=!1)=>{var g,b,w;const m={page:h,limit:20,"filter[role]":J.isEmpty(t.params.username)?null:2};try{const{data:x}=await Qe.get("/user-community/profile/".concat(t.params.userId),{params:m});J.isEmpty(x)?r.value=!1:((g=x==null?void 0:x.meta)!=null&&g.hasNextPage?(i.value++,r.value=!0):r.value=!1,f?s.value=[...s.value,...(b=x==null?void 0:x.data)!=null?b:[]]:s.value=(w=x==null?void 0:x.data)!=null?w:[])}catch(x){console.error("❌ Error fetching data:",x)}},l=async h=>{o.setCommunity(h),e.push({name:"CommunityScreen",params:{id:h.short_name||h._id}})};on(()=>{d()});const c=async h=>{await a(i.value,!0),setTimeout(()=>h.target.complete(),1e3)},d=()=>{a(1,!1),i.value=1,r.value=!1},u=()=>e.back();return(h,f)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[_("div",Wot,[L(y(fe),{onClick:u,icon:y(ea),class:"size-7 mr-2"},null,8,["icon"]),_("h1",qot,Q(y(J.isEmpty)(y(t).params.username)?"Thành viên của cộng đồng ":"Được tạo bởi ".concat(y(t).params.username)),1)])]),_:1})]),_:1}),L(y(At),{color:"white"},{default:j(()=>[_("div",Kot,[s.value?(I(!0),O(Ue,{key:0},ct(s.value,m=>{var g,b,w,x,k,E,T,P,C,A,R;return I(),O("div",{key:m._id,class:"flex-col w-full"},[_("use",{onClick:M=>l(m.community),class:"flex items-center gap-3 w-full"},[_("img",{src:(b=(g=m.community)==null?void 0:g.icon)!=null?b:"/favicon.ico",class:"w-12 h-12 rounded-lg shadow",fit:"cover",placeholder:"favicon.ico"},null,8,Xot),_("div",Qot,[_("div",Zot,Q((w=m.community)==null?void 0:w.name),1),_("div",Jot,[_("div",eat,Q(((x=m.community)==null?void 0:x.status)===0?"Riêng tư":"Công khai"),1),L(y(fe),{class:"w-1 h-1 text-gray-500 bg-black rounded-full"}),_("div",tat,Q((E=(k=m.community)==null?void 0:k.total_member)!=null?E:0)+" thành viên ",1),L(y(fe),{class:"w-1 h-1 text-gray-500 bg-black rounded-full"}),_("div",nat,[((P=(T=m.community)==null?void 0:T.communityFee)==null?void 0:P.price)==null?(I(),O("div",iat," Miễn phí ")):(I(),O("div",sat," Giá "+Q((R=(A=(C=m.community)==null?void 0:C.communityFee)==null?void 0:A.price)==null?void 0:R.toLocaleString("vi-VN"))+"đ ",1))])])])],8,Yot)])}),128)):re("",!0)]),r.value?(I(),ve(y(Zn),{key:0,onIonInfinite:c,threshold:"0.9%"},{default:j(()=>[L(y(Jn))]),_:1})):re("",!0)]),_:1})]),_:1}))}}),oat={key:0,class:"ion-padding flex flex-col justify-center items-center mt-[35%]"},aat=["src"],lat={class:"ion-padding"},cat={class:"text-xl font-medium mb-4"},dat={class:"mb-1.5"},uat={class:"flex items-center justify-between"},hat={class:"flex items-center gap-2"},fat={class:"text-base"},pat={class:"flex items-center justify-between"},mat={class:"flex items-center gap-2"},gat={class:"font-normal text-base"},bat={class:"mt-1.5 flex gap-2 items-start"},vat={key:0,class:"flex items-center gap-4 mt-0.5 text-base text-gray2"},yat={key:1,class:"mt-0.5 text-base text-gray2"},wat={class:"flex gap-2 mt-1.5 items-center"},xat={class:"text-base text-black"},_at={class:"flex justify-between bg-gray1 px-4 py-2 rounded-lg mt-10 items-center"},kat={class:"text-base text-black font-medium"},Eat={key:1,class:"flex flex-col items-center gap-3.5 mt-10"},Tat={key:2,class:"flex flex-col items-center gap-3.5 mt-10"},Cat={class:"mt-4 sm:text-sm rounded-lg bg-white p-4"},Sat=["innerHTML"],Aat=Fe({__name:"EventDetailScreen",setup(n){const e=gn(),t=Zr(),i=()=>{e.back()},s=K(),r=K(),o=K(1),a=K(!0),l=en(),c=Li(),{userCommunity:d}=et(c),{isLoggedIn:u,userInfo:h}=et(l),f=async()=>{const{data:E}=await Qe.get("/event/".concat(t.params.eventId));J.isEmpty(E)||(s.value=E)},m=async()=>{var E,T,P;try{if(a.value=!0,!J.isEmpty(h.value&&((E=s.value)==null?void 0:E._id))){const{data:C}=await Qe.get("/event-subscribe/event/".concat((T=h.value)==null?void 0:T._id),{params:{event_id:(P=s.value)==null?void 0:P._id}});r.value=C!=null?C:[]}}catch(C){console.log(C)}finally{a.value=!1}};on(()=>{f()}),ki([s],()=>{m()});const g=(E,T)=>{const P=_t(E!=null?E:new Date),C=_t(T!=null?T:new Date),A=C.format("DD/MM/YYYY"),R=P.diff(C,"year"),M=P.diff(C,"month"),N=P.diff(C,"day");return R!=0?P.format("DD/MM/YYYY")+" - "+A:M!=0?P.format("DD/MM")+" - "+A:N!=0?P.format("DD")+" - "+A:A},b=async()=>{var E,T;J.isEmpty((E=s.value)==null?void 0:E.link_event)||(await Cc.write({string:(T=s.value)==null?void 0:T.link_event}),tt("Đã copy link sự kiện","success"))},w=async()=>{var E,T,P,C,A,R;try{if(u.value){if(J.isEmpty((E=r.value)==null?void 0:E._id)){const M={event_id:(T=s.value)==null?void 0:T._id,user_id:(P=h.value)==null?void 0:P._id,quantity:o.value,status:Af.Register,unit_price:(C=s.value)==null?void 0:C.price,guest:{}},{status:N}=await Qe.post("/event-subscribe",M);N===201&&(f(),tt("Đăng kí thành công","success"))}else if(((A=r.value)==null?void 0:A.status)===Af.Cancel){const{status:M}=await Qe.patch("/event-subscribe/".concat((R=r.value)==null?void 0:R._id),{status:Af.Register,quantity:o.value});M===201&&(f(),tt("Đăng kí thành công","success"))}}else e.push({name:"LoginScreen"},Wt)}catch(M){console.log(M)}},x=async()=>{var E,T;try{if(u.value){if(!J.isEmpty((E=r.value)==null?void 0:E._id)){const{status:P}=await Qe.patch("/event-subscribe/".concat((T=r.value)==null?void 0:T._id),{status:Af.Cancel});P===201&&(m(),tt("Huỷ thành công","success"))}}else e.push({name:"LoginScreen"},Wt)}catch(P){tt("Có lỗi xảy ra !","warning")}},k=async()=>{const E=await qe.create({component:sj,mode:"ios",cssClass:"confirmmd"});await E.present();const{role:T}=await E.onWillDismiss();T==="confirm"&&x()};return(E,T)=>(I(),ve(y(Dn),null,{default:j(()=>[L(y(Bn),{mode:"ios",class:"ion-no-border"},{default:j(()=>[L(y(An),{mode:"ios",color:"white"},{default:j(()=>[L(y(fe),{slot:"start",onClick:i,icon:y(Eo),class:"size-6 p-2"},null,8,["icon"])]),_:1})]),_:1}),L(y(At),{color:"white"},{default:j(()=>{var P,C,A,R,M,N,U,G,B,te,X,ue;return[y(J.isEmpty)(s.value)?(I(),O("div",oat,T[2]||(T[2]=[_("img",{src:hm},null,-1),_("div",{class:"text-gray2 font-normal"},"Sự kiện này không tồn tại",-1)]))):(I(),O(Ue,{key:1},[_("img",{class:"aspect-video w-full",src:s.value.image},null,8,aat),_("div",lat,[_("div",cat,Q(s.value.name),1),_("section",dat,[_("div",uat,[_("div",hat,[L(y(fe),{icon:y(DA),class:"size-5 text-gray2"},null,8,["icon"]),_("div",fat,Q(g(s.value.start_date,s.value.end_date)),1)])])]),_("section",null,[_("div",pat,[_("div",mat,[L(y(fe),{icon:y(pB),class:"size-5 text-gray2"},null,8,["icon"]),_("div",gat,Q(y(_t)(s.value.start_date).format("HH:mm"))+" - "+Q(y(_t)(s.value.end_date).format("HH:mm")),1)])])]),_("section",bat,[L(y(fe),{icon:s.value.type===y(rg).Online?y($be):y(Fbe),class:"size-5 text-gray2"},null,8,["icon"]),_("div",null,[_("div",null,Q(s.value.type===y(rg).Online?"Online":"Offline"),1),s.value.type===y(rg).Online&&((P=r.value)==null?void 0:P.status)===1?(I(),O("div",vat,[be(Q((A=(C=s.value)==null?void 0:C.link_event)!=null?A:"-")+" ",1),L(y(fe),{icon:y(vb),class:"text-gray2 size-5",onClick:b},null,8,["icon"])])):s.value.type===y(rg).Offline&&((R=r.value)==null?void 0:R.status)===1?(I(),O("div",yat,Q((N=(M=s.value)==null?void 0:M.address)!=null?N:"-"),1)):re("",!0)])]),_("section",wat,[L(y(fe),{icon:y(uB),class:"size-5 text-gray2"},null,8,["icon"]),_("div",xat,Q(((U=s.value)==null?void 0:U.price)==0?"Miễn phí":(B=(G=s.value)==null?void 0:G.price)==null?void 0:B.toLocaleString("vi-VN",{style:"currency",currency:"VND"})),1)]),_("section",null,[((te=r.value)==null?void 0:te.status)!==y(Af).Register?(I(),O(Ue,{key:0},[_("div",_at,[L(y(fe),{onClick:T[0]||(T[0]=he=>o.value==1?void 0:o.value--),icon:y(Wbe),class:"size-6 text-gray2"},null,8,["icon"]),_("div",kat,Q(o.value)+" vé ",1),L(y(fe),{onClick:T[1]||(T[1]=he=>o.value==10?void 0:o.value++),icon:y(l0),class:"size-6 text-gray2"},null,8,["icon"])]),L(y(ko),{onClick:w,type:"button",color:"blue1",class:"mt-4 h-12 w-full text-base uppercase text-center shadow-st rounded-xl"},{default:j(()=>T[3]||(T[3]=[be(" Đăng ký ngay ")])),_:1})],64)):(I(),O("div",Eat,[T[4]||(T[4]=_("div",{class:"mt-4 h-12 w-full text-base uppercase text-center rounded-xl bg-gray1 items-center justify-center flex font-medium"}," Đã đăng ký ",-1)),_("div",{onClick:k,class:"flex text-sm text-gray2 font-medium text-center"}," Huỷ đăng ký ")])),((X=y(d))==null?void 0:X.role)===y(Ei).Admin?(I(),O("div",Tat,T[5]||(T[5]=[_("div",{class:"font-semibold"},"Bạn là quản lý sự kiện này",-1)]))):re("",!0),_("div",Cat,[_("div",{innerHTML:(ue=s.value)==null?void 0:ue.description},null,8,Sat)])])])],64))]}),_:1})]),_:1}))}}),Iat=async(n,e,t)=>{var b,w,x,k,E,T,P,C,A;const i=ln(),{community:s}=et(i),r=Li(),{userCommunity:o}=et(r),a=Ej(),{course:l,userCourse:c}=et(a),d=en(),{isLoggedIn:u,userInfo:h}=et(d),f=Ba(),{routerCallback:m}=et(f),g=r.checkUserAdminCommunity(s.value,o.value);if(u.value||(f.setRouterCallback({name:n==null?void 0:n.name,params:n==null?void 0:n.params,...m}),t({name:"LoginScreen"})),n.params.courseId){const R=(b=n.params.courseId)==null?void 0:b.toString(),{data:M}=await Qe.get("/course/detail/".concat(R),{});if(J.isEmpty(M))return await tt("Khóa học không tồn tại","warning"),t(e.fullPath);if(await a.setCourse(M),!g&&((w=l.value)==null?void 0:w.status)!=uo.Publish)return t(e.fullPath);if(u.value&&h.value&&s.value){const G=K(),{data:B}=await Qe.get("/user-course",{params:{user_id:h.value._id,course_id:(x=l.value)==null?void 0:x._id,community_id:s.value._id}});if(!J.isEmpty(B))G.value=B==null?void 0:B.shift();else{const te=await Qe.patch("/user-course",{user_id:h.value._id,course_id:(k=l.value)==null?void 0:k._id,community_id:s.value._id});G.value=te.data}await a.setUserCourse(G.value)}if(r.checkUserAdminCommunity(s.value,o.value))return t();if(!a.checkUserCourseExpired(l.value,c.value))return await tt("Khóa học của bạn đã hết hạn","warning"),t(e.fullPath);const N=a.checkLevelUserCommunitySatisfy(l.value,o.value),U=a.checkUserCoursePaid(l.value,c.value);if(N){if(!((E=c.value)!=null&&E.paid)){const B=await Qe.patch("/user-course",{user_id:(T=h.value)==null?void 0:T._id,course_id:(P=l.value)==null?void 0:P._id,community_id:(C=s.value)==null?void 0:C._id,paid:!0,access_by_level:!0});await a.setUserCourse(B.data)}return t()}else{if(((A=l.value)==null?void 0:A.type)!=If.Free)if(!U)tt("Bạn cần mua khóa học để truy cập","warning");else return t();else tt("Bạn chưa đủ cấp để học","warning");return t(e.fullPath)}}return t(e.fullPath)},Pat=async(n,e,t)=>{var o;const i=(o=n==null?void 0:n.params)==null?void 0:o.id,s=ln(),r=Li();return await s.getCommunityInfo(i),await r.getUserCommunityInfo(i),console.log("communityMiddleware",i),t()},Rat=[{name:"HomeTab",component:vJe},{name:"ChatTab",component:qye},{name:"NotificationTab",component:VLe},{name:"AccountTab",component:CNe}],$at=()=>Rat.map(n=>({...n,path:"".concat(n.name.toLowerCase())})),Lat=[{name:"SplashScreen",component:Tbe},{name:"FirstAccess",component:Sbe},{name:"LoginScreen",component:t1e},{name:"RegisterScreen",component:c1e},{name:"EnterAuthCodeScreen",path:"/enterauthcodescreen/:email",component:x1e},{name:"ImproveBioScreen",component:m1e},{name:"ForgotPassScreen",component:T1e},{name:"SentResetSuccessScreen",component:A1e},{name:"HomeBottomtab",component:IGe,children:[{name:"defaultBottomTab",path:"",redirect:"/homebottomtab/hometab"},...$at()]},{name:"CommunityScreen",component:CXe,path:"/hometab/commnunityscreen/:id/:tab?",beforeEnter:Pat},{name:"CommunityReportPostScreen",component:Got,beforeEnter:IE},{name:"CourseLearningScreen",component:kot,beforeEnter:Iat,path:"/courselearningscreen/:courseId"},{name:"CreateCommunityScreen",component:Aet,beforeEnter:IE},{name:"CourseEditInfomationScreen",component:htt,path:"/courseeditinfomationscreen/:courseId"},{name:"PaymentMethodSelectScreen",component:Vet},{name:"PostDetailScreen",component:qJe,path:"/postdetailscreen/:postId"},{name:"CommunitySetting",component:jZe,path:"/communitysetting/:id"},{name:"DetectUserCommunityScreen",component:aNe,beforeEnter:IE,path:"/detectusercommunityscreen/:userId/:t?"},{name:"ListCommunityUserScreen",component:rat,path:"/listcommunityuserscreen/:userId/:username?"},{name:"EventDetailScreen",component:Aat,path:"/eventdetailscreen/:eventId"},{name:"UserCommunityScreen",component:qNe},{name:"UserCommunityContributeScreen",component:xHe,path:"/usercommunitycontributescreen/:userId/:communityId/:name?"},{name:"UserProfileScreen",component:Sze},{name:"UserAffiliateScreen",component:mHe},{name:"AccountDetailScreen",component:Cje},{name:"UserEventScreen",component:WHe},{name:"UserTicketScreen",component:_je},{name:"AppAboutScreen",component:Rje},{name:"ChangePassword",component:Lje},{name:"PaymentCreateCommunity",component:Eot},{name:"ChatRoom",component:M$e,path:"/chatrooms/:id"},{name:"ChatDetail",component:hLe,path:"/chatdetail/:id?"},{name:"ChatMembers",component:ALe,path:"/chatmembers/:id?"},{name:"FriendScreen",component:Zje},{name:"FriendMyRequestedScreen",component:mGe},{name:"FriendRequestScreen",component:aGe}],Oat=()=>Lat.map(n=>{var e;return{path:"/".concat((e=n==null?void 0:n.name)==null?void 0:e.toLowerCase()),...n}}),Dat=[{path:"/",name:"Starter",redirect:"/splashscreen"},...Oat()],yS=c0e({history:d0e("/"),routes:Dat});function Tv(n){if(typeof n!="string"||!n)throw new Error("expected a non-empty string, got: "+n)}function PE(n){if(typeof n!="number")throw new Error("expected a number, got: "+n)}const Mat=1,Nat=1,Dh="emoji",zp="keyvalue",A5="favorites",Fat="tokens",LG="tokens",Bat="unicode",OG="count",Vat="group",Uat="order",DG="group-order",wS="eTag",Mw="url",i9="skinTone",pm="readonly",I5="readwrite",MG="skinUnicodes",zat="skinUnicodes",Hat="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",jat="en";function Gat(n,e){const t=new Set,i=[];for(const s of n){const r=e(s);t.has(r)||(t.add(r),i.push(s))}return i}function s9(n){return Gat(n,e=>e.unicode)}function Wat(n){function e(t,i,s){const r=i?n.createObjectStore(t,{keyPath:i}):n.createObjectStore(t);if(s)for(const[o,[a,l]]of Object.entries(s))r.createIndex(o,a,{multiEntry:l});return r}e(zp),e(Dh,Bat,{[LG]:[Fat,!0],[DG]:[[Vat,Uat]],[MG]:[zat,!0]}),e(A5,void 0,{[OG]:[""]})}const xS={},cy={},Nw={};function NG(n,e,t){t.onerror=()=>e(t.error),t.onblocked=()=>e(new Error("IDB blocked")),t.onsuccess=()=>n(t.result)}async function qat(n){const e=await new Promise((t,i)=>{const s=indexedDB.open(n,Mat);xS[n]=s,s.onupgradeneeded=r=>{r.oldVersion<Nat&&Wat(s.result)},NG(t,i,s)});return e.onclose=()=>P5(n),e}function Kat(n){return cy[n]||(cy[n]=qat(n)),cy[n]}function zc(n,e,t,i){return new Promise((s,r)=>{const o=n.transaction(e,t,{durability:"relaxed"}),a=typeof e=="string"?o.objectStore(e):e.map(c=>o.objectStore(c));let l;i(a,o,c=>{l=c}),o.oncomplete=()=>s(l),o.onerror=()=>r(o.error)})}function P5(n){const e=xS[n],t=e&&e.result;if(t){t.close();const i=Nw[n];if(i)for(const s of i)s()}delete xS[n],delete cy[n],delete Nw[n]}function Yat(n){return new Promise((e,t)=>{P5(n);const i=indexedDB.deleteDatabase(n);NG(e,t,i)})}function Xat(n,e){let t=Nw[n];t||(t=Nw[n]=[]),t.push(e)}const Qat=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Xf(n){return n.split(/[\s_]+/).map(e=>!e.match(/\w/)||Qat.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const Zat=2;function FG(n){return n.filter(Boolean).map(e=>e.toLowerCase()).filter(e=>e.length>=Zat)}function Jat(n){return n.map(({annotation:t,emoticon:i,group:s,order:r,shortcodes:o,skins:a,tags:l,emoji:c,version:d})=>{const u=[...new Set(FG([...(o||[]).map(Xf).flat(),...(l||[]).map(Xf).flat(),...Xf(t),i]))].sort(),h={annotation:t,group:s,order:r,tags:l,tokens:u,unicode:c,version:d};if(i&&(h.emoticon=i),o&&(h.shortcodes=o),a){h.skinTones=[],h.skinUnicodes=[],h.skinVersions=[];for(const{tone:f,emoji:m,version:g}of a)h.skinTones.push(f),h.skinUnicodes.push(m),h.skinVersions.push(g)}return h})}function BG(n,e,t,i){n[e](t).onsuccess=s=>i&&i(s.target.result)}function xh(n,e,t){BG(n,"get",e,t)}function VG(n,e,t){BG(n,"getAll",e,t)}function R5(n){n.commit&&n.commit()}function elt(n,e){let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(t)>e(s)&&(t=s)}return t}function UG(n,e){const t=elt(n,s=>s.length),i=[];for(const s of t)n.some(r=>r.findIndex(o=>e(o)===e(s))===-1)||i.push(s);return i}async function tlt(n){return!await $5(n,zp,Mw)}async function nlt(n,e,t){const[i,s]=await Promise.all([wS,Mw].map(r=>$5(n,zp,r)));return i===t&&s===e}async function ilt(n,e){return zc(n,Dh,pm,(i,s,r)=>{let o;const a=()=>{i.getAll(o&&IDBKeyRange.lowerBound(o,!0),50).onsuccess=l=>{const c=l.target.result;for(const d of c)if(o=d.unicode,e(d))return r(d);if(c.length<50)return r();a()}};a()})}async function zG(n,e,t,i){try{const s=Jat(e);await zc(n,[Dh,zp],I5,([r,o],a)=>{let l,c,d=0;function u(){++d===2&&h()}function h(){if(!(l===i&&c===t)){r.clear();for(const f of s)r.put(f);o.put(i,wS),o.put(t,Mw),R5(a)}}xh(o,wS,f=>{l=f,u()}),xh(o,Mw,f=>{c=f,u()})})}finally{}}async function slt(n,e){return zc(n,Dh,pm,(t,i,s)=>{const r=IDBKeyRange.bound([e,0],[e+1,0],!1,!0);VG(t.index(DG),r,s)})}async function HG(n,e){const t=FG(Xf(e));return t.length?zc(n,Dh,pm,(i,s,r)=>{const o=[],a=()=>{o.length===t.length&&l()},l=()=>{const c=UG(o,d=>d.unicode);r(c.sort((d,u)=>d.order<u.order?-1:1))};for(let c=0;c<t.length;c++){const d=t[c],u=c===t.length-1?IDBKeyRange.bound(d,d+"￿",!1,!0):IDBKeyRange.only(d);VG(i.index(LG),u,h=>{o.push(h),a()})}}):[]}async function rlt(n,e){const t=await HG(n,e);return t.length?t.filter(i=>(i.shortcodes||[]).map(r=>r.toLowerCase()).includes(e.toLowerCase()))[0]||null:await ilt(n,s=>(s.shortcodes||[]).includes(e.toLowerCase()))||null}async function olt(n,e){return zc(n,Dh,pm,(t,i,s)=>xh(t,e,r=>{if(r)return s(r);xh(t.index(MG),e,o=>s(o||null))}))}function $5(n,e,t){return zc(n,e,pm,(i,s,r)=>xh(i,t,r))}function alt(n,e,t,i){return zc(n,e,I5,(s,r)=>{s.put(i,t),R5(r)})}function llt(n,e){return zc(n,A5,I5,(t,i)=>xh(t,e,s=>{t.put((s||0)+1,e),R5(i)}))}function clt(n,e,t){return t===0?[]:zc(n,[A5,Dh],pm,([i,s],r,o)=>{const a=[];i.index(OG).openCursor(void 0,"prev").onsuccess=l=>{const c=l.target.result;if(!c)return o(a);function d(f){if(a.push(f),a.length===t)return o(a);c.continue()}const u=c.primaryKey,h=e.byName(u);if(h)return d(h);xh(s,u,f=>{if(f)return d(f);c.continue()})}})}const Cv="";function dlt(n,e){const t=new Map;for(const s of n){const r=e(s);for(const o of r){let a=t;for(let c=0;c<o.length;c++){const d=o.charAt(c);let u=a.get(d);u||(u=new Map,a.set(d,u)),a=u}let l=a.get(Cv);l||(l=[],a.set(Cv,l)),l.push(s)}}return(s,r)=>{let o=t;for(let c=0;c<s.length;c++){const d=s.charAt(c),u=o.get(d);if(u)o=u;else return[]}if(r)return o.get(Cv)||[];const a=[],l=[o];for(;l.length;){const d=[...l.shift().entries()].sort((u,h)=>u[0]<h[0]?-1:1);for(const[u,h]of d)u===Cv?a.push(...h):l.push(h)}return a}}const ult=["name","url"];function hlt(n){const e=n&&Array.isArray(n),t=e&&n.length&&(!n[0]||ult.some(i=>!(i in n[0])));if(!e||t)throw new Error("Custom emojis are in the wrong format")}function r9(n){hlt(n);const e=(h,f)=>h.name.toLowerCase()<f.name.toLowerCase()?-1:1,t=n.sort(e),s=dlt(n,h=>{const f=new Set;if(h.shortcodes)for(const m of h.shortcodes)for(const g of Xf(m))f.add(g);return f}),r=h=>s(h,!0),o=h=>s(h,!1),a=h=>{const f=Xf(h),m=f.map((g,b)=>(b<f.length-1?r:o)(g));return UG(m,g=>g.name).sort(e)},l=new Map,c=new Map;for(const h of n){c.set(h.name.toLowerCase(),h);for(const f of h.shortcodes||[])l.set(f.toLowerCase(),h)}return{all:t,search:a,byShortcode:h=>l.get(h.toLowerCase()),byName:h=>c.get(h.toLowerCase())}}const flt=typeof wrappedJSObject<"u";function Qm(n){if(!n)return n;if(flt&&(n=structuredClone(n)),delete n.tokens,n.skinTones){const e=n.skinTones.length;n.skins=Array(e);for(let t=0;t<e;t++)n.skins[t]={tone:n.skinTones[t],unicode:n.skinUnicodes[t],version:n.skinVersions[t]};delete n.skinTones,delete n.skinUnicodes,delete n.skinVersions}return n}function jG(n){n||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const plt=["annotation","emoji","group","order","version"];function mlt(n){if(!n||!Array.isArray(n)||!n[0]||typeof n[0]!="object"||plt.some(e=>!(e in n[0])))throw new Error("Emoji data is in the wrong format")}function GG(n,e){if(Math.floor(n.status/100)!==2)throw new Error("Failed to fetch: "+e+":  "+n.status)}async function glt(n){const e=await fetch(n,{method:"HEAD"});GG(e,n);const t=e.headers.get("etag");return jG(t),t}async function _S(n){const e=await fetch(n);GG(e,n);const t=e.headers.get("etag");jG(t);const i=await e.json();return mlt(i),[t,i]}function blt(n){for(var e="",t=new Uint8Array(n),i=t.byteLength,s=-1;++s<i;)e+=String.fromCharCode(t[s]);return e}function vlt(n){for(var e=n.length,t=new ArrayBuffer(e),i=new Uint8Array(t),s=-1;++s<e;)i[s]=n.charCodeAt(s);return t}async function WG(n){const e=JSON.stringify(n);let t=vlt(e);const i=await crypto.subtle.digest("SHA-1",t),s=blt(i);return btoa(s)}async function ylt(n,e){let t,i=await glt(e);if(!i){const s=await _S(e);i=s[0],t=s[1],i||(i=await WG(t))}await nlt(n,e,i)||(t||(t=(await _S(e))[1]),await zG(n,t,e,i))}async function wlt(n,e){let[t,i]=await _S(e);t||(t=await WG(i)),await zG(n,i,e,t)}async function xlt(n,e){try{await ylt(n,e)}catch(t){if(t.name!=="InvalidStateError")throw t}}class _lt{constructor({dataSource:e=Hat,locale:t=jat,customEmoji:i=[]}={}){this.dataSource=e,this.locale=t,this._dbName="emoji-picker-element-".concat(this.locale),this._db=void 0,this._lazyUpdate=void 0,this._custom=r9(i),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await Kat(this._dbName);Xat(this._dbName,this._clear);const t=this.dataSource;await tlt(e)?await wlt(e,t):this._lazyUpdate=xlt(e,t)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return PE(e),await this.ready(),s9(await slt(this._db,e)).map(Qm)}async getEmojiBySearchQuery(e){Tv(e),await this.ready();const t=this._custom.search(e),i=s9(await HG(this._db,e)).map(Qm);return[...t,...i]}async getEmojiByShortcode(e){Tv(e),await this.ready();const t=this._custom.byShortcode(e);return t||Qm(await rlt(this._db,e))}async getEmojiByUnicodeOrName(e){Tv(e),await this.ready();const t=this._custom.byName(e);return t||Qm(await olt(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await $5(this._db,zp,i9)||0}async setPreferredSkinTone(e){return PE(e),await this.ready(),alt(this._db,zp,i9,e)}async incrementFavoriteEmojiCount(e){return Tv(e),await this.ready(),llt(this._db,e)}async getTopFavoriteEmoji(e){return PE(e),await this.ready(),(await clt(this._db,this._custom,e)).map(Qm)}set customEmoji(e){this._custom=r9(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await P5(this._dbName)}async delete(){await this._shutdown(),await Yat(this._dbName)}}const kS=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map(([n,e,t])=>({id:n,emoji:e,name:t})),RE=kS.slice(1),klt=2,o9=6,qG=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function a9(n){return n.unicode.includes("‍")}const Elt={"🫩":16,"🫨":15.1,"🫠":14,"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},Tlt=1e3,Clt="🖐️",Slt=8,Alt=["😊","😒","❤️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],KG='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Ilt=(n,e)=>n<e?-1:n>e?1:0,l9=(n,e)=>{const t=document.createElement("canvas");t.width=t.height=1;const i=t.getContext("2d",{willReadFrequently:!0});return i.textBaseline="top",i.font="100px ".concat(KG),i.fillStyle=e,i.scale(.01,.01),i.fillText(n,0,0),i.getImageData(0,0,1,1).data},Plt=(n,e)=>{const t=[...n].join(","),i=[...e].join(",");return t===i&&!t.startsWith("0,0,0,")};function Rlt(n){const e=l9(n,"#000"),t=l9(n,"#fff");return e&&t&&Plt(e,t)}function $lt(){const n=Object.entries(Elt);try{for(const[e,t]of n)if(Rlt(e))return t}catch(e){}finally{}return n[0][1]}let $E;const LE=()=>($E||($E=new Promise(n=>qG(()=>n($lt())))),$E),ES=new Map,Llt="️",Olt="\uD83C",Dlt="‍",Mlt=127995,Nlt=57339;function Flt(n,e){if(e===0)return n;const t=n.indexOf(Dlt);return t!==-1?n.substring(0,t)+String.fromCodePoint(Mlt+e-1)+n.substring(t):(n.endsWith(Llt)&&(n=n.substring(0,n.length-1)),n+Olt+String.fromCodePoint(Nlt+e-1))}function il(n){n.preventDefault(),n.stopPropagation()}function OE(n,e,t){return e+=n?-1:1,e<0?e=t.length-1:e>=t.length&&(e=0),e}function YG(n,e){const t=new Set,i=[];for(const s of n){const r=e(s);t.has(r)||(t.add(r),i.push(s))}return i}function Blt(n,e){const t=i=>{const s={};for(const r of i)typeof r.tone=="number"&&r.version<=e&&(s[r.tone]=r.unicode);return s};return n.map(({unicode:i,skins:s,shortcodes:r,url:o,name:a,category:l,annotation:c})=>({unicode:i,name:a,shortcodes:r,url:o,category:l,annotation:c,id:i||a,skins:s&&t(s)}))}const dy=requestAnimationFrame;let Vlt=typeof ResizeObserver=="function";function Ult(n,e,t){let i;Vlt?(i=new ResizeObserver(t),i.observe(n)):dy(t),e.addEventListener("abort",()=>{i&&i.disconnect()})}function c9(n){{const e=document.createRange();return e.selectNode(n.firstChild),e.getBoundingClientRect().width}}let DE;function zlt(n,e,t){let i=!0;for(const s of n){const r=t(s);if(!r)continue;const o=c9(r);typeof DE>"u"&&(DE=c9(e));const a=o/1.8<DE;ES.set(s.unicode,a),a||(i=!1)}return i}function Hlt(n){return YG(n,e=>e)}function jlt(n){n&&(n.scrollTop=0)}function Ng(n,e,t){let i=n.get(e);return i||(i=t(),n.set(e,i)),i}function d9(n){return""+n}function Glt(n){const e=document.createElement("template");return e.innerHTML=n,e}const Wlt=new WeakMap,qlt=new WeakMap,Klt=Symbol("un-keyed"),Ylt="replaceChildren"in Element.prototype;function Xlt(n,e){Ylt?n.replaceChildren(...e):(n.innerHTML="",n.append(...e))}function Qlt(n,e){let t=n.firstChild,i=0;for(;t;){if(e[i]!==t)return!0;t=t.nextSibling,i++}return i!==e.length}function Zlt(n,e){const{targetNode:t}=e;let{targetParentNode:i}=e,s=!1;i?s=Qlt(i,n):(s=!0,e.targetNode=void 0,e.targetParentNode=i=t.parentNode),s&&Xlt(i,n)}function Jlt(n,e){for(const t of e){const{targetNode:i,currentExpression:s,binding:{expressionIndex:r,attributeName:o,attributeValuePre:a,attributeValuePost:l}}=t,c=n[r];if(s!==c)if(t.currentExpression=c,o)if(c===null)i.removeAttribute(o);else{const d=a+d9(c)+l;i.setAttribute(o,d)}else{let d;Array.isArray(c)?Zlt(c,t):c instanceof Element?(d=c,i.replaceWith(d)):i.nodeValue=d9(c),d&&(t.targetNode=d)}}}function ect(n){let e="",t=!1,i=!1,s=-1;const r=new Map,o=[];let a=0;for(let c=0,d=n.length;c<d;c++){const u=n[c];if(e+=u.slice(a),c===d-1)break;for(let x=0;x<u.length;x++)switch(u.charAt(x)){case"<":{u.charAt(x+1)==="/"?o.pop():(t=!0,o.push(++s));break}case">":{t=!1,i=!1;break}case"=":{i=!0;break}}const h=o[o.length-1],f=Ng(r,h,()=>[]);let m,g,b;if(i){const x=/(\S+)="?([^"=]*)$/.exec(u);m=x[1],g=x[2];const k=/^([^">]*)("?)/.exec(n[c+1]);b=k[1],e=e.slice(0,-1*x[0].length),a=k[0].length}else a=0;const w={attributeName:m,attributeValuePre:g,attributeValuePost:b,expressionIndex:c};f.push(w),!t&&!i&&(e+=" ")}return{template:Glt(e),elementsToBindings:r}}function u9(n,e,t){for(let i=0;i<n.length;i++){const s=n[i],r=s.attributeName?e:e.firstChild,o={binding:s,targetNode:r,targetParentNode:void 0,currentExpression:void 0};t.push(o)}}function tct(n,e){const t=[];let i;if(e.size===1&&(i=e.get(0)))u9(i,n,t);else{const s=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);let r=n,o=-1;do{const a=e.get(++o);a&&u9(a,r,t)}while(r=s.nextNode())}return t}function nct(n){const{template:e,elementsToBindings:t}=Ng(Wlt,n,()=>ect(n)),i=e.cloneNode(!0).content.firstElementChild,s=tct(i,t);return function(o){return Jlt(o,s),i}}function ict(n){const e=Ng(qlt,n,()=>new Map);let t=Klt;function i(r,...o){const a=Ng(e,r,()=>new Map);return Ng(a,t,()=>nct(r))(o)}function s(r,o,a){return r.map((l,c)=>{const d=t;t=a(l);try{return o(l,c)}finally{t=d}})}return{map:s,html:i}}var E9,T9,C9,S9,A9;function sct(n,e,t,i,s,r,o,a,l){const{labelWithSkin:c,titleForEmoji:d,unicodeWithSkin:u}=t,{html:h,map:f}=ict(e);function m(x,k,E){return f(x,(T,P)=>h(E9||(E9=Jh(['<button role="','" aria-selected="','" aria-label="','" title="','" class="','" id="','" style="','">',"</button>"])),k?"option":"menuitem",k?P===e.activeSearchItem:null,c(T,e.currentSkinTone),d(T),"emoji"+(k&&P===e.activeSearchItem?" active":"")+(T.unicode?"":" custom-emoji"),"".concat(E,"-").concat(T.id),T.unicode?null:"--custom-emoji-background: url(".concat(JSON.stringify(T.url),")"),T.unicode?u(T,e.currentSkinTone):""),T=>"".concat(E,"-").concat(T.id))}const b=h(A9||(A9=Jh(['<section data-ref="rootElement" class="picker" aria-label="','" style="','"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="','" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="','" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="','" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">','</label> <span id="search-description" class="sr-only">','</span></div><div class="skintone-button-wrapper ','"><button id="skintone-button" class="emoji ','" aria-label="','" title="','" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="','" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">','</button></div><span id="skintone-description" class="sr-only">','</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ','" style="transform:translateY(',')" role="listbox" aria-label="','" aria-activedescendant="skintone-','" aria-hidden="','" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">','</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(',',1fr)" aria-label="','" data-on-keydown="onNavKeydown" data-on-click="onNavClick">','</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(','%)"></div></div><div class="message ','" role="alert" aria-live="polite">','</div><div data-ref="tabpanelElement" class="tabpanel ','" role="','" aria-label="','" id="','" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">','</div></div><div class="favorites onscreen emoji-menu ','" role="menu" aria-label="','" data-on-click="onEmojiClick">','</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>'])),e.i18n.regionLabel,e.pickerStyle||"",e.i18n.searchLabel,!!(e.searchMode&&e.currentEmojis.length),e.activeSearchItemId?"emo-".concat(e.activeSearchItemId):null,e.i18n.searchLabel,e.i18n.searchDescription,e.skinTonePickerExpandedAfterAnimation?"expanded":"",e.skinTonePickerExpanded?"hide-focus":"",e.skinToneButtonLabel,e.skinToneButtonLabel,e.skinTonePickerExpanded,e.skinToneButtonText||"",e.i18n.skinToneDescription,e.skinTonePickerExpanded?"":"hidden no-animate",e.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))",e.i18n.skinTonesLabel,e.activeSkinTone,!e.skinTonePickerExpanded,f(e.skinTones,(x,k)=>h(T9||(T9=Jh(['<div id="skintone-','" class="emoji ','" aria-selected="','" role="option" title="','" aria-label="','">',"</div>"])),k,k===e.activeSkinTone?"active":"",k===e.activeSkinTone,e.i18n.skinTones[k],e.i18n.skinTones[k],x),x=>x),e.groups.length,e.i18n.categoriesLabel,f(e.groups,x=>h(C9||(C9=Jh(['<button role="tab" class="nav-button" aria-controls="tab-','" aria-label="','" aria-selected="','" title="','" data-group-id="','"><div class="nav-emoji emoji">',"</div></button>"])),x.id,e.i18n.categories[x.name],!e.searchMode&&e.currentGroup.id===x.id,e.i18n.categories[x.name],x.id,x.emoji),x=>x.id),(e.isRtl?-1:1)*e.currentGroupIndex*100,e.message?"":"gone",e.message||"",!e.databaseLoaded||e.message?"gone":"",e.searchMode?"region":"tabpanel",e.searchMode?e.i18n.searchResultsLabel:e.i18n.categories[e.currentGroup.name],e.searchMode?null:"tab-".concat(e.currentGroup.id),f(e.currentEmojisWithCategories,(x,k)=>h(S9||(S9=Jh(['<div><div id="menu-label-','" class="category ','" aria-hidden="true">','</div><div class="emoji-menu ','" style="','" data-action="updateOnIntersection" role="','" aria-labelledby="menu-label-','" id="','">',"</div></div>"])),k,e.currentEmojisWithCategories.length===1&&e.currentEmojisWithCategories[0].category===""?"gone":"",e.searchMode?e.i18n.searchResultsLabel:x.category?x.category:e.currentEmojisWithCategories.length>1?e.i18n.categories.custom:e.i18n.categories[e.currentGroup.name],k!==0&&!e.searchMode&&e.currentGroup.id===-1?"visibility-auto":"","--num-rows: ".concat(Math.ceil(x.emojis.length/e.numColumns)),e.searchMode?"listbox":"menu",k,e.searchMode?"search-results":null,m(x.emojis,e.searchMode,"emo")),x=>x.category),e.message?"gone":"",e.i18n.favoritesLabel,m(e.currentFavorites,!1,"fav")),w=(x,k)=>{for(const E of n.querySelectorAll("[".concat(x,"]")))k(E,E.getAttribute(x))};if(l){n.appendChild(b);for(const x of["click","focusout","input","keydown","keyup"])w("data-on-".concat(x),(k,E)=>{k.addEventListener(x,i[E])});w("data-ref",(x,k)=>{r[k]=x}),o.addEventListener("abort",()=>{n.removeChild(b)})}w("data-action",(x,k)=>{let E=a.get(k);E||a.set(k,E=new WeakSet),E.has(x)||(E.add(x),s[k](x))})}const Fw=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n);function rct(n){let e=!1,t;const i=new Map,s=new Set;let r;const o=()=>{if(e)return;const c=[...s];s.clear();try{for(const d of c)d()}finally{r=!1,s.size&&(r=!0,Fw(o))}},a=new Proxy({},{get(c,d){if(t){let u=i.get(d);u||(u=new Set,i.set(d,u)),u.add(t)}return c[d]},set(c,d,u){if(c[d]!==u){c[d]=u;const h=i.get(d);if(h){for(const f of h)s.add(f);r||(r=!0,Fw(o))}}return!0}}),l=c=>{const d=()=>{const u=t;t=d;try{return c()}finally{t=u}};return d()};return n.addEventListener("abort",()=>{e=!0}),{state:a,createEffect:l}}function ME(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}const h9=new WeakMap;function oct(n,e,t){{const i=n.closest(".tabpanel");let s=h9.get(i);s||(s=new IntersectionObserver(t,{root:i,rootMargin:"50% 0px 50% 0px",threshold:0}),h9.set(i,s),e.addEventListener("abort",()=>{s.disconnect()})),s.observe(n)}}const NE=[],{assign:Sv}=Object;function act(n,e){const t={},i=new AbortController,s=i.signal,{state:r,createEffect:o}=rct(s),a=new Map;Sv(r,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),Sv(r,e),Sv(r,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:Slt,isRtl:!1,currentGroupIndex:0,groups:RE,databaseLoaded:!1,activeSearchItemId:void 0}),o(()=>{r.currentGroup!==r.groups[r.currentGroupIndex]&&(r.currentGroup=r.groups[r.currentGroupIndex])});const l=ne=>{n.getElementById(ne).focus()},c=ne=>n.getElementById("emo-".concat(ne.id)),d=(ne,ie)=>{t.rootElement.dispatchEvent(new CustomEvent(ne,{detail:ie,bubbles:!0,composed:!0}))},u=(ne,ie)=>ne.id===ie.id,h=(ne,ie)=>{const{category:me,emojis:V}=ne,{category:F,emojis:z}=ie;return me!==F?!1:ME(V,z,u)},f=ne=>{ME(r.currentEmojis,ne,u)||(r.currentEmojis=ne)},m=ne=>{r.searchMode!==ne&&(r.searchMode=ne)},g=ne=>{ME(r.currentEmojisWithCategories,ne,h)||(r.currentEmojisWithCategories=ne)},b=(ne,ie)=>ie&&ne.skins&&ne.skins[ie]||ne.unicode,k={labelWithSkin:(ne,ie)=>Hlt([ne.name||b(ne,ie),ne.annotation,...ne.shortcodes||NE].filter(Boolean)).join(", "),titleForEmoji:ne=>ne.annotation||(ne.shortcodes||NE).join(", "),unicodeWithSkin:b},E={onClickSkinToneButton:de,onEmojiClick:Be,onNavClick:he,onNavKeydown:Ie,onSearchKeydown:ue,onSkinToneOptionsClick:Ae,onSkinToneOptionsFocusOut:le,onSkinToneOptionsKeydown:we,onSkinToneOptionsKeyup:ze,onSearchInput:Se},T={calculateEmojiGridStyle:A,updateOnIntersection:R};let P=!0;o(()=>{sct(n,r,k,E,T,t,s,a,P),P=!1}),r.emojiVersion||LE().then(ne=>{ne||(r.message=r.i18n.emojiUnsupportedMessage)}),o(()=>{async function ne(){let ie=!1;const me=setTimeout(()=>{ie=!0,r.message=r.i18n.loadingMessage},Tlt);try{await r.database.ready(),r.databaseLoaded=!0}catch(V){console.error(V),r.message=r.i18n.networkErrorMessage}finally{clearTimeout(me),ie&&(ie=!1,r.message="")}}r.database&&ne()}),o(()=>{r.pickerStyle="\n      --num-groups: ".concat(r.groups.length,"; \n      --indicator-opacity: ").concat(r.searchMode?0:1,"; \n      --num-skintones: ").concat(o9,";")}),o(()=>{r.customEmoji&&r.database&&C()}),o(()=>{r.customEmoji&&r.customEmoji.length?r.groups!==kS&&(r.groups=kS):r.groups!==RE&&(r.currentGroupIndex&&r.currentGroupIndex--,r.groups=RE)}),o(()=>{async function ne(){r.databaseLoaded&&(r.currentSkinTone=await r.database.getPreferredSkinTone())}ne()}),o(()=>{r.skinTones=Array(o9).fill().map((ne,ie)=>Flt(r.skinToneEmoji,ie))}),o(()=>{r.skinToneButtonText=r.skinTones[r.currentSkinTone]}),o(()=>{r.skinToneButtonLabel=r.i18n.skinToneLabel.replace("{skinTone}",r.i18n.skinTones[r.currentSkinTone])}),o(()=>{async function ne(){const{database:ie}=r,me=(await Promise.all(Alt.map(V=>ie.getEmojiByUnicodeOrName(V)))).filter(Boolean);r.defaultFavoriteEmojis=me}r.databaseLoaded&&ne()});function C(){const{customEmoji:ne,database:ie}=r,me=ne||NE;ie.customEmoji!==me&&(ie.customEmoji=me)}o(()=>{async function ne(){C();const{database:ie,defaultFavoriteEmojis:me,numColumns:V}=r,F=await ie.getTopFavoriteEmoji(V),z=await B(YG([...F,...me],se=>se.unicode||se.name).slice(0,V));r.currentFavorites=z}r.databaseLoaded&&r.defaultFavoriteEmojis&&ne()});function A(ne){Ult(ne,s,()=>{{const ie=getComputedStyle(t.rootElement),me=parseInt(ie.getPropertyValue("--num-columns"),10),V=ie.getPropertyValue("direction")==="rtl";r.numColumns=me,r.isRtl=V}})}function R(ne){oct(ne,s,ie=>{for(const{target:me,isIntersecting:V}of ie)me.classList.toggle("onscreen",V)})}o(()=>{async function ne(){const{searchText:ie,currentGroup:me,databaseLoaded:V,customEmoji:F}=r;if(!V)r.currentEmojis=[],r.searchMode=!1;else if(ie.length>=klt){const z=await X(ie);r.searchText===ie&&(f(z),m(!0))}else{const{id:z}=me;if(z!==-1||F&&F.length){const se=await te(z);r.currentGroup.id===z&&(f(se),m(!1))}}}ne()});const M=()=>{dy(()=>jlt(t.tabpanelElement))};o(()=>{const{currentEmojis:ne,emojiVersion:ie}=r,me=ne.filter(V=>V.unicode).filter(V=>a9(V)&&!ES.has(V.unicode));if(!ie&&me.length)f(ne),dy(()=>N(me));else{const V=ie?ne:ne.filter(U);f(V),M()}});function N(ne){zlt(ne,t.baselineEmoji,c)?M():r.currentEmojis=[...r.currentEmojis]}function U(ne){return!ne.unicode||!a9(ne)||ES.get(ne.unicode)}async function G(ne){const ie=r.emojiVersion||await LE();return ne.filter(({version:me})=>!me||me<=ie)}async function B(ne){return Blt(ne,r.emojiVersion||await LE())}async function te(ne){const ie=ne===-1?r.customEmoji:await r.database.getEmojiByGroup(ne);return B(await G(ie))}async function X(ne){return B(await G(await r.database.getEmojiBySearchQuery(ne)))}o(()=>{}),o(()=>{function ne(){const{searchMode:me,currentEmojis:V}=r;if(me)return[{category:"",emojis:V}];const F=new Map;for(const z of V){const se=z.category||"";let Te=F.get(se);Te||(Te=[],F.set(se,Te)),Te.push(z)}return[...F.entries()].map(([z,se])=>({category:z,emojis:se})).sort((z,se)=>r.customCategorySorting(z.category,se.category))}const ie=ne();g(ie)}),o(()=>{r.activeSearchItemId=r.activeSearchItem!==-1&&r.currentEmojis[r.activeSearchItem].id}),o(()=>{const{rawSearchText:ne}=r;qG(()=>{r.searchText=(ne||"").trim(),r.activeSearchItem=-1})});function ue(ne){if(!r.searchMode||!r.currentEmojis.length)return;const ie=me=>{il(ne),r.activeSearchItem=OE(me,r.activeSearchItem,r.currentEmojis)};switch(ne.key){case"ArrowDown":return ie(!1);case"ArrowUp":return ie(!0);case"Enter":if(r.activeSearchItem===-1)r.activeSearchItem=0;else return il(ne),xe(r.currentEmojis[r.activeSearchItem].id)}}function he(ne){const{target:ie}=ne,me=ie.closest(".nav-button");if(!me)return;const V=parseInt(me.dataset.groupId,10);t.searchElement.value="",r.rawSearchText="",r.searchText="",r.activeSearchItem=-1,r.currentGroupIndex=r.groups.findIndex(F=>F.id===V)}function Ie(ne){const{target:ie,key:me}=ne,V=F=>{F&&(il(ne),F.focus())};switch(me){case"ArrowLeft":return V(ie.previousElementSibling);case"ArrowRight":return V(ie.nextElementSibling);case"Home":return V(ie.parentElement.firstElementChild);case"End":return V(ie.parentElement.lastElementChild)}}async function xe(ne){const ie=await r.database.getEmojiByUnicodeOrName(ne),me=[...r.currentEmojis,...r.currentFavorites].find(F=>F.id===ne),V=me.unicode&&b(me,r.currentSkinTone);await r.database.incrementFavoriteEmojiCount(ne),d("emoji-click",{emoji:ie,skinTone:r.currentSkinTone,...V&&{unicode:V},...me.name&&{name:me.name}})}async function Be(ne){const{target:ie}=ne;if(!ie.classList.contains("emoji"))return;il(ne);const me=ie.id.substring(4);xe(me)}function Pe(ne){r.currentSkinTone=ne,r.skinTonePickerExpanded=!1,l("skintone-button"),d("skin-tone-change",{skinTone:ne}),r.database.setPreferredSkinTone(ne)}function Ae(ne){const{target:{id:ie}}=ne,me=ie&&ie.match(/^skintone-(\d)/);if(!me)return;il(ne);const V=parseInt(me[1],10);Pe(V)}function de(ne){r.skinTonePickerExpanded=!r.skinTonePickerExpanded,r.activeSkinTone=r.currentSkinTone,r.skinTonePickerExpanded&&(il(ne),dy(()=>l("skintone-list")))}o(()=>{r.skinTonePickerExpanded?t.skinToneDropdown.addEventListener("transitionend",()=>{r.skinTonePickerExpandedAfterAnimation=!0},{once:!0}):r.skinTonePickerExpandedAfterAnimation=!1});function we(ne){if(!r.skinTonePickerExpanded)return;const ie=async me=>{il(ne),r.activeSkinTone=me};switch(ne.key){case"ArrowUp":return ie(OE(!0,r.activeSkinTone,r.skinTones));case"ArrowDown":return ie(OE(!1,r.activeSkinTone,r.skinTones));case"Home":return ie(0);case"End":return ie(r.skinTones.length-1);case"Enter":return il(ne),Pe(r.activeSkinTone);case"Escape":return il(ne),r.skinTonePickerExpanded=!1,l("skintone-button")}}function ze(ne){if(r.skinTonePickerExpanded)switch(ne.key){case" ":return il(ne),Pe(r.activeSkinTone)}}async function le(ne){const{relatedTarget:ie}=ne;(!ie||ie.id!=="skintone-list")&&(r.skinTonePickerExpanded=!1)}function Se(ne){r.rawSearchText=ne.target.value}return{$set(ne){Sv(r,ne)},$destroy(){i.abort()}}}const lct="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",cct="en";var dct={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}},uct=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}';const XG=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],hct=":host{--emoji-font-family:".concat(KG,"}");class QG extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=uct+hct,this.shadowRoot.appendChild(t),this._ctx={locale:cct,dataSource:lct,skinToneEmoji:Clt,customCategorySorting:Ilt,customEmoji:null,i18n:dct,emojiVersion:null,...e};for(const i of XG)i!=="database"&&Object.prototype.hasOwnProperty.call(this,i)&&(this._ctx[i]=this[i],delete this[i]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=act(this.shadowRoot,this._ctx))}disconnectedCallback(){Fw(()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch(t=>console.error(t))}})}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,i){this._set(e.replace(/-([a-z])/g,(s,r)=>r.toUpperCase()),e==="emoji-version"?parseFloat(i):i)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:e,dataSource:t,database:i}=this._ctx;(!i||i.locale!==e||i.dataSource!==t)&&this._set("database",new _lt({locale:e,dataSource:t}))}_dbFlush(){Fw(()=>this._dbCreate())}}const ZG={};for(const n of XG)ZG[n]={get(){return n==="database"&&this._dbCreate(),this._ctx[n]},set(e){if(n==="database")throw new Error("database is read-only");this._set(n,e)}};Object.defineProperties(QG.prototype,ZG);customElements.get("emoji-picker")||customElements.define("emoji-picker",QG);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function fct(n,e){const t=n.extraPlugins||[];return{...n,extraPlugins:[...t,...e.filter(i=>!t.includes(i))]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function JG(n){return!!n&&/^\d+\.\d+\.\d+/.test(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function eW(n){return n?["nightly","alpha","internal"].some(e=>n.includes(e)):!1}function pct(n){return JG(n)||eW(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function mct(n){if(!JG(n))throw new Error("Invalid semantic version: ".concat(n||"<blank>","."));const[e,t,i]=n.split(".");return{major:Number.parseInt(e,10),minor:Number.parseInt(t,10),patch:Number.parseInt(i,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function gct(n){if(eW(n))return 3;const{major:e}=mct(n);switch(!0){case e>=44:return 3;case e>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function bct(){const{CKEDITOR_VERSION:n,CKEDITOR:e}=window;return pct(n)?{source:e?"cdn":"npm",version:n}:null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function vct(){const n=bct();return n?gct(n.version):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function tW(n,e){switch(e||(e=vct()||void 0),e){case 1:case 2:return n===void 0;case 3:return n==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function yct(n,e){return function(i){tW(i.config.get("licenseKey"))||i.on("collectUsageData",(s,{setUsageData:r})=>{r("integration.".concat(n),e)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */const wct=yct("vue",{version:"7.3.0",frameworkVersion:HS});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */function xct(n){return tW(n.licenseKey)?n:fct(n,[wct])}const FE="Lock from Vue integration (@ckeditor/ckeditor5-vue)",_ct=300,kct=Fe({name:"CKEditor",__name:"ckeditor",props:Hg({editor:{},config:{default:()=>({})},tagName:{default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:Hg(["ready","destroy","blur","focus","input","update:modelValue"],["update:modelValue"]),setup(n,{expose:e,emit:t}){const i=jg(n,"modelValue"),s=n,r=t,o=K(),a=K(),l=K();e({instance:a,lastEditorData:l}),ki(i,u=>{a.value&&u!==l.value&&a.value.data.set(u)}),ki(()=>s.disabled,u=>{u?a.value.enableReadOnlyMode(FE):a.value.disableReadOnlyMode(FE)});function c(){const u=window.CKEDITOR_VERSION;if(!u)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[h]=u.split(".").map(Number);h>=42||u.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}function d(u){const h=Sc(f=>{if(s.disableTwoWayDataBinding)return;const m=l.value=u.data.get();r("update:modelValue",m,f,u),r("input",m,f,u)},_ct,{leading:!0});u.model.document.on("change:data",h),u.editing.view.document.on("focus",f=>{r("focus",f,u)}),u.editing.view.document.on("blur",f=>{r("blur",f,u)})}return c(),on(()=>{const u=xct(Object.assign({},s.config));i.value&&(u.initialData=i.value),s.editor.create(o.value,u).then(h=>{a.value=Qw(h),d(h),i.value!==u.initialData&&h.data.set(i.value),s.disabled&&h.enableReadOnlyMode(FE),r("ready",h)}).catch(h=>{console.error(h)})}),_h(()=>{a.value&&(a.value.destroy(),a.value=void 0),r("destroy")}),(u,h)=>(I(),ve(GE(u.tagName),{ref_key:"element",ref:o},null,512))}});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 *//* istanbul ignore if -- @preserve */if(!HS.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const Ect={install(n){n.component("Ckeditor",kct)}};function Av(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nW={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,d){if(!s[c]){if(!i[c]){var u=typeof Av=="function"&&Av;if(!d&&u)return u(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=s[c]={exports:{}};i[c][0].call(f.exports,function(m){var g=i[c][1][m];return o(g||m)},f,f.exports,t,i,s,r)}return s[c].exports}for(var a=typeof Av=="function"&&Av,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,i,s){(function(r){var o=r.MutationObserver||r.WebKitMutationObserver,a;if(o){var l=0,c=new o(m),d=r.document.createTextNode("");c.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(!r.setImmediate&&typeof r.MessageChannel<"u"){var u=new r.MessageChannel;u.port1.onmessage=m,a=function(){u.port2.postMessage(0)}}else"document"in r&&"onreadystatechange"in r.document.createElement("script")?a=function(){var b=r.document.createElement("script");b.onreadystatechange=function(){m(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},r.document.documentElement.appendChild(b)}:a=function(){setTimeout(m,0)};var h,f=[];function m(){h=!0;for(var b,w,x=f.length;x;){for(w=f,f=[],b=-1;++b<x;)w[b]();x=f.length}h=!1}i.exports=g;function g(b){f.push(b)===1&&!h&&a()}}).call(this,typeof Ar<"u"?Ar:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,i,s){var r=t(1);function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];i.exports=u;function u(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,T!==o&&g(this,T)}u.prototype.catch=function(T){return this.then(null,T)},u.prototype.then=function(T,P){if(typeof T!="function"&&this.state===c||typeof P!="function"&&this.state===l)return this;var C=new this.constructor(o);if(this.state!==d){var A=this.state===c?T:P;f(C,A,this.outcome)}else this.queue.push(new h(C,T,P));return C};function h(T,P,C){this.promise=T,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},h.prototype.otherCallFulfilled=function(T){f(this.promise,this.onFulfilled,T)},h.prototype.callRejected=function(T){a.reject(this.promise,T)},h.prototype.otherCallRejected=function(T){f(this.promise,this.onRejected,T)};function f(T,P,C){r(function(){var A;try{A=P(C)}catch(R){return a.reject(T,R)}A===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,A)})}a.resolve=function(T,P){var C=b(m,P);if(C.status==="error")return a.reject(T,C.value);var A=C.value;if(A)g(T,A);else{T.state=c,T.outcome=P;for(var R=-1,M=T.queue.length;++R<M;)T.queue[R].callFulfilled(P)}return T},a.reject=function(T,P){T.state=l,T.outcome=P;for(var C=-1,A=T.queue.length;++C<A;)T.queue[C].callRejected(P);return T};function m(T){var P=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof P=="function")return function(){P.apply(T,arguments)}}function g(T,P){var C=!1;function A(U){C||(C=!0,a.reject(T,U))}function R(U){C||(C=!0,a.resolve(T,U))}function M(){P(R,A)}var N=b(M);N.status==="error"&&A(N.value)}function b(T,P){var C={};try{C.value=T(P),C.status="success"}catch(A){C.status="error",C.value=A}return C}u.resolve=w;function w(T){return T instanceof this?T:a.resolve(new this(o),T)}u.reject=x;function x(T){var P=new this(o);return a.reject(P,T)}u.all=k;function k(T){var P=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=T.length,A=!1;if(!C)return this.resolve([]);for(var R=new Array(C),M=0,N=-1,U=new this(o);++N<C;)G(T[N],N);return U;function G(B,te){P.resolve(B).then(X,function(ue){A||(A=!0,a.reject(U,ue))});function X(ue){R[te]=ue,++M===C&&!A&&(A=!0,a.resolve(U,R))}}}u.race=E;function E(T){var P=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=T.length,A=!1;if(!C)return this.resolve([]);for(var R=-1,M=new this(o);++R<C;)N(T[R]);return M;function N(U){P.resolve(U).then(function(G){A||(A=!0,a.resolve(M,G))},function(G){A||(A=!0,a.reject(M,G))})}}},{1:1}],3:[function(t,i,s){(function(r){typeof r.Promise!="function"&&(r.Promise=t(2))}).call(this,typeof Ar<"u"?Ar:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,i,s){var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z};function o(Z,ye){if(!(Z instanceof ye))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch(Z){return}}var l=a();function c(){try{if(!l||!l.open)return!1;var Z=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ye=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Z||ye)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch(oe){return!1}}function d(Z,ye){Z=Z||[],ye=ye||{};try{return new Blob(Z,ye)}catch(Re){if(Re.name!=="TypeError")throw Re;for(var oe=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Oe=new oe,Ne=0;Ne<Z.length;Ne+=1)Oe.append(Z[Ne]);return Oe.getBlob(ye.type)}}typeof Promise>"u"&&t(3);var u=Promise;function h(Z,ye){ye&&Z.then(function(oe){ye(null,oe)},function(oe){ye(oe)})}function f(Z,ye,oe){typeof ye=="function"&&Z.then(ye),typeof oe=="function"&&Z.catch(oe)}function m(Z){return typeof Z!="string"&&(console.warn(Z+" used as a key, but it is not a string."),Z=String(Z)),Z}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var b="local-forage-detect-blob-support",w=void 0,x={},k=Object.prototype.toString,E="readonly",T="readwrite";function P(Z){for(var ye=Z.length,oe=new ArrayBuffer(ye),Oe=new Uint8Array(oe),Ne=0;Ne<ye;Ne++)Oe[Ne]=Z.charCodeAt(Ne);return oe}function C(Z){return new u(function(ye){var oe=Z.transaction(b,T),Oe=d([""]);oe.objectStore(b).put(Oe,"key"),oe.onabort=function(Ne){Ne.preventDefault(),Ne.stopPropagation(),ye(!1)},oe.oncomplete=function(){var Ne=navigator.userAgent.match(/Chrome\/(\d+)/),Re=navigator.userAgent.match(/Edge\//);ye(Re||!Ne||parseInt(Ne[1],10)>=43)}}).catch(function(){return!1})}function A(Z){return typeof w=="boolean"?u.resolve(w):C(Z).then(function(ye){return w=ye,w})}function R(Z){var ye=x[Z.name],oe={};oe.promise=new u(function(Oe,Ne){oe.resolve=Oe,oe.reject=Ne}),ye.deferredOperations.push(oe),ye.dbReady?ye.dbReady=ye.dbReady.then(function(){return oe.promise}):ye.dbReady=oe.promise}function M(Z){var ye=x[Z.name],oe=ye.deferredOperations.pop();if(oe)return oe.resolve(),oe.promise}function N(Z,ye){var oe=x[Z.name],Oe=oe.deferredOperations.pop();if(Oe)return Oe.reject(ye),Oe.promise}function U(Z,ye){return new u(function(oe,Oe){if(x[Z.name]=x[Z.name]||Pe(),Z.db)if(ye)R(Z),Z.db.close();else return oe(Z.db);var Ne=[Z.name];ye&&Ne.push(Z.version);var Re=l.open.apply(l,Ne);ye&&(Re.onupgradeneeded=function(it){var pt=Re.result;try{pt.createObjectStore(Z.storeName),it.oldVersion<=1&&pt.createObjectStore(b)}catch(yt){if(yt.name==="ConstraintError")console.warn('The database "'+Z.name+'" has been upgraded from version '+it.oldVersion+" to version "+it.newVersion+', but the storage "'+Z.storeName+'" already exists.');else throw yt}}),Re.onerror=function(it){it.preventDefault(),Oe(Re.error)},Re.onsuccess=function(){var it=Re.result;it.onversionchange=function(pt){pt.target.close()},oe(it),M(Z)}})}function G(Z){return U(Z,!1)}function B(Z){return U(Z,!0)}function te(Z,ye){if(!Z.db)return!0;var oe=!Z.db.objectStoreNames.contains(Z.storeName),Oe=Z.version<Z.db.version,Ne=Z.version>Z.db.version;if(Oe&&(Z.version!==ye&&console.warn('The database "'+Z.name+"\" can't be downgraded from version "+Z.db.version+" to version "+Z.version+"."),Z.version=Z.db.version),Ne||oe){if(oe){var Re=Z.db.version+1;Re>Z.version&&(Z.version=Re)}return!0}return!1}function X(Z){return new u(function(ye,oe){var Oe=new FileReader;Oe.onerror=oe,Oe.onloadend=function(Ne){var Re=btoa(Ne.target.result||"");ye({__local_forage_encoded_blob:!0,data:Re,type:Z.type})},Oe.readAsBinaryString(Z)})}function ue(Z){var ye=P(atob(Z.data));return d([ye],{type:Z.type})}function he(Z){return Z&&Z.__local_forage_encoded_blob}function Ie(Z){var ye=this,oe=ye._initReady().then(function(){var Oe=x[ye._dbInfo.name];if(Oe&&Oe.dbReady)return Oe.dbReady});return f(oe,Z,Z),oe}function xe(Z){R(Z);for(var ye=x[Z.name],oe=ye.forages,Oe=0;Oe<oe.length;Oe++){var Ne=oe[Oe];Ne._dbInfo.db&&(Ne._dbInfo.db.close(),Ne._dbInfo.db=null)}return Z.db=null,G(Z).then(function(Re){return Z.db=Re,te(Z)?B(Z):Re}).then(function(Re){Z.db=ye.db=Re;for(var it=0;it<oe.length;it++)oe[it]._dbInfo.db=Re}).catch(function(Re){throw N(Z,Re),Re})}function Be(Z,ye,oe,Oe){Oe===void 0&&(Oe=1);try{var Ne=Z.db.transaction(Z.storeName,ye);oe(null,Ne)}catch(Re){if(Oe>0&&(!Z.db||Re.name==="InvalidStateError"||Re.name==="NotFoundError"))return u.resolve().then(function(){if(!Z.db||Re.name==="NotFoundError"&&!Z.db.objectStoreNames.contains(Z.storeName)&&Z.version<=Z.db.version)return Z.db&&(Z.version=Z.db.version+1),B(Z)}).then(function(){return xe(Z).then(function(){Be(Z,ye,oe,Oe-1)})}).catch(oe);oe(Re)}}function Pe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ae(Z){var ye=this,oe={db:null};if(Z)for(var Oe in Z)oe[Oe]=Z[Oe];var Ne=x[oe.name];Ne||(Ne=Pe(),x[oe.name]=Ne),Ne.forages.push(ye),ye._initReady||(ye._initReady=ye.ready,ye.ready=Ie);var Re=[];function it(){return u.resolve()}for(var pt=0;pt<Ne.forages.length;pt++){var yt=Ne.forages[pt];yt!==ye&&Re.push(yt._initReady().catch(it))}var wt=Ne.forages.slice(0);return u.all(Re).then(function(){return oe.db=Ne.db,G(oe)}).then(function(Et){return oe.db=Et,te(oe,ye._defaultConfig.version)?B(oe):Et}).then(function(Et){oe.db=Ne.db=Et,ye._dbInfo=oe;for(var Vt=0;Vt<wt.length;Vt++){var $n=wt[Vt];$n!==ye&&($n._dbInfo.db=oe.db,$n._dbInfo.version=oe.version)}})}function de(Z,ye){var oe=this;Z=m(Z);var Oe=new u(function(Ne,Re){oe.ready().then(function(){Be(oe._dbInfo,E,function(it,pt){if(it)return Re(it);try{var yt=pt.objectStore(oe._dbInfo.storeName),wt=yt.get(Z);wt.onsuccess=function(){var Et=wt.result;Et===void 0&&(Et=null),he(Et)&&(Et=ue(Et)),Ne(Et)},wt.onerror=function(){Re(wt.error)}}catch(Et){Re(Et)}})}).catch(Re)});return h(Oe,ye),Oe}function we(Z,ye){var oe=this,Oe=new u(function(Ne,Re){oe.ready().then(function(){Be(oe._dbInfo,E,function(it,pt){if(it)return Re(it);try{var yt=pt.objectStore(oe._dbInfo.storeName),wt=yt.openCursor(),Et=1;wt.onsuccess=function(){var Vt=wt.result;if(Vt){var $n=Vt.value;he($n)&&($n=ue($n));var ti=Z($n,Vt.key,Et++);ti!==void 0?Ne(ti):Vt.continue()}else Ne()},wt.onerror=function(){Re(wt.error)}}catch(Vt){Re(Vt)}})}).catch(Re)});return h(Oe,ye),Oe}function ze(Z,ye,oe){var Oe=this;Z=m(Z);var Ne=new u(function(Re,it){var pt;Oe.ready().then(function(){return pt=Oe._dbInfo,k.call(ye)==="[object Blob]"?A(pt.db).then(function(yt){return yt?ye:X(ye)}):ye}).then(function(yt){Be(Oe._dbInfo,T,function(wt,Et){if(wt)return it(wt);try{var Vt=Et.objectStore(Oe._dbInfo.storeName);yt===null&&(yt=void 0);var $n=Vt.put(yt,Z);Et.oncomplete=function(){yt===void 0&&(yt=null),Re(yt)},Et.onabort=Et.onerror=function(){var ti=$n.error?$n.error:$n.transaction.error;it(ti)}}catch(ti){it(ti)}})}).catch(it)});return h(Ne,oe),Ne}function le(Z,ye){var oe=this;Z=m(Z);var Oe=new u(function(Ne,Re){oe.ready().then(function(){Be(oe._dbInfo,T,function(it,pt){if(it)return Re(it);try{var yt=pt.objectStore(oe._dbInfo.storeName),wt=yt.delete(Z);pt.oncomplete=function(){Ne()},pt.onerror=function(){Re(wt.error)},pt.onabort=function(){var Et=wt.error?wt.error:wt.transaction.error;Re(Et)}}catch(Et){Re(Et)}})}).catch(Re)});return h(Oe,ye),Oe}function Se(Z){var ye=this,oe=new u(function(Oe,Ne){ye.ready().then(function(){Be(ye._dbInfo,T,function(Re,it){if(Re)return Ne(Re);try{var pt=it.objectStore(ye._dbInfo.storeName),yt=pt.clear();it.oncomplete=function(){Oe()},it.onabort=it.onerror=function(){var wt=yt.error?yt.error:yt.transaction.error;Ne(wt)}}catch(wt){Ne(wt)}})}).catch(Ne)});return h(oe,Z),oe}function ne(Z){var ye=this,oe=new u(function(Oe,Ne){ye.ready().then(function(){Be(ye._dbInfo,E,function(Re,it){if(Re)return Ne(Re);try{var pt=it.objectStore(ye._dbInfo.storeName),yt=pt.count();yt.onsuccess=function(){Oe(yt.result)},yt.onerror=function(){Ne(yt.error)}}catch(wt){Ne(wt)}})}).catch(Ne)});return h(oe,Z),oe}function ie(Z,ye){var oe=this,Oe=new u(function(Ne,Re){if(Z<0){Ne(null);return}oe.ready().then(function(){Be(oe._dbInfo,E,function(it,pt){if(it)return Re(it);try{var yt=pt.objectStore(oe._dbInfo.storeName),wt=!1,Et=yt.openKeyCursor();Et.onsuccess=function(){var Vt=Et.result;if(!Vt){Ne(null);return}Z===0||wt?Ne(Vt.key):(wt=!0,Vt.advance(Z))},Et.onerror=function(){Re(Et.error)}}catch(Vt){Re(Vt)}})}).catch(Re)});return h(Oe,ye),Oe}function me(Z){var ye=this,oe=new u(function(Oe,Ne){ye.ready().then(function(){Be(ye._dbInfo,E,function(Re,it){if(Re)return Ne(Re);try{var pt=it.objectStore(ye._dbInfo.storeName),yt=pt.openKeyCursor(),wt=[];yt.onsuccess=function(){var Et=yt.result;if(!Et){Oe(wt);return}wt.push(Et.key),Et.continue()},yt.onerror=function(){Ne(yt.error)}}catch(Et){Ne(Et)}})}).catch(Ne)});return h(oe,Z),oe}function V(Z,ye){ye=g.apply(this,arguments);var oe=this.config();Z=typeof Z!="function"&&Z||{},Z.name||(Z.name=Z.name||oe.name,Z.storeName=Z.storeName||oe.storeName);var Oe=this,Ne;if(!Z.name)Ne=u.reject("Invalid arguments");else{var Re=Z.name===oe.name&&Oe._dbInfo.db,it=Re?u.resolve(Oe._dbInfo.db):G(Z).then(function(pt){var yt=x[Z.name],wt=yt.forages;yt.db=pt;for(var Et=0;Et<wt.length;Et++)wt[Et]._dbInfo.db=pt;return pt});Z.storeName?Ne=it.then(function(pt){if(pt.objectStoreNames.contains(Z.storeName)){var yt=pt.version+1;R(Z);var wt=x[Z.name],Et=wt.forages;pt.close();for(var Vt=0;Vt<Et.length;Vt++){var $n=Et[Vt];$n._dbInfo.db=null,$n._dbInfo.version=yt}var ti=new u(function(ni,Zi){var Ci=l.open(Z.name,yt);Ci.onerror=function(mr){var Hc=Ci.result;Hc.close(),Zi(mr)},Ci.onupgradeneeded=function(){var mr=Ci.result;mr.deleteObjectStore(Z.storeName)},Ci.onsuccess=function(){var mr=Ci.result;mr.close(),ni(mr)}});return ti.then(function(ni){wt.db=ni;for(var Zi=0;Zi<Et.length;Zi++){var Ci=Et[Zi];Ci._dbInfo.db=ni,M(Ci._dbInfo)}}).catch(function(ni){throw(N(Z,ni)||u.resolve()).catch(function(){}),ni})}}):Ne=it.then(function(pt){R(Z);var yt=x[Z.name],wt=yt.forages;pt.close();for(var Et=0;Et<wt.length;Et++){var Vt=wt[Et];Vt._dbInfo.db=null}var $n=new u(function(ti,ni){var Zi=l.deleteDatabase(Z.name);Zi.onerror=function(){var Ci=Zi.result;Ci&&Ci.close(),ni(Zi.error)},Zi.onblocked=function(){console.warn('dropInstance blocked for database "'+Z.name+'" until all open connections are closed')},Zi.onsuccess=function(){var Ci=Zi.result;Ci&&Ci.close(),ti(Ci)}});return $n.then(function(ti){yt.db=ti;for(var ni=0;ni<wt.length;ni++){var Zi=wt[ni];M(Zi._dbInfo)}}).catch(function(ti){throw(N(Z,ti)||u.resolve()).catch(function(){}),ti})})}return h(Ne,ye),Ne}var F={_driver:"asyncStorage",_initStorage:Ae,_support:c(),iterate:we,getItem:de,setItem:ze,removeItem:le,clear:Se,length:ne,key:ie,keys:me,dropInstance:V};function z(){return typeof openDatabase=="function"}var se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Te="~~local_forage_type~",ke=/^~~local_forage_type~([^~]+)~/,Ce="__lfsc__:",ge=Ce.length,He="arbf",Ge="blob",mt="si08",ut="ui08",xt="uic8",kt="si16",It="si32",Je="ur16",rt="ui32",Ct="fl32",Pt="fl64",Xt=ge+He.length,mn=Object.prototype.toString;function In(Z){var ye=Z.length*.75,oe=Z.length,Oe,Ne=0,Re,it,pt,yt;Z[Z.length-1]==="="&&(ye--,Z[Z.length-2]==="="&&ye--);var wt=new ArrayBuffer(ye),Et=new Uint8Array(wt);for(Oe=0;Oe<oe;Oe+=4)Re=se.indexOf(Z[Oe]),it=se.indexOf(Z[Oe+1]),pt=se.indexOf(Z[Oe+2]),yt=se.indexOf(Z[Oe+3]),Et[Ne++]=Re<<2|it>>4,Et[Ne++]=(it&15)<<4|pt>>2,Et[Ne++]=(pt&3)<<6|yt&63;return wt}function ci(Z){var ye=new Uint8Array(Z),oe="",Oe;for(Oe=0;Oe<ye.length;Oe+=3)oe+=se[ye[Oe]>>2],oe+=se[(ye[Oe]&3)<<4|ye[Oe+1]>>4],oe+=se[(ye[Oe+1]&15)<<2|ye[Oe+2]>>6],oe+=se[ye[Oe+2]&63];return ye.length%3===2?oe=oe.substring(0,oe.length-1)+"=":ye.length%3===1&&(oe=oe.substring(0,oe.length-2)+"=="),oe}function ri(Z,ye){var oe="";if(Z&&(oe=mn.call(Z)),Z&&(oe==="[object ArrayBuffer]"||Z.buffer&&mn.call(Z.buffer)==="[object ArrayBuffer]")){var Oe,Ne=Ce;Z instanceof ArrayBuffer?(Oe=Z,Ne+=He):(Oe=Z.buffer,oe==="[object Int8Array]"?Ne+=mt:oe==="[object Uint8Array]"?Ne+=ut:oe==="[object Uint8ClampedArray]"?Ne+=xt:oe==="[object Int16Array]"?Ne+=kt:oe==="[object Uint16Array]"?Ne+=Je:oe==="[object Int32Array]"?Ne+=It:oe==="[object Uint32Array]"?Ne+=rt:oe==="[object Float32Array]"?Ne+=Ct:oe==="[object Float64Array]"?Ne+=Pt:ye(new Error("Failed to get type for BinaryArray"))),ye(Ne+ci(Oe))}else if(oe==="[object Blob]"){var Re=new FileReader;Re.onload=function(){var it=Te+Z.type+"~"+ci(this.result);ye(Ce+Ge+it)},Re.readAsArrayBuffer(Z)}else try{ye(JSON.stringify(Z))}catch(it){console.error("Couldn't convert value into a JSON string: ",Z),ye(null,it)}}function wn(Z){if(Z.substring(0,ge)!==Ce)return JSON.parse(Z);var ye=Z.substring(Xt),oe=Z.substring(ge,Xt),Oe;if(oe===Ge&&ke.test(ye)){var Ne=ye.match(ke);Oe=Ne[1],ye=ye.substring(Ne[0].length)}var Re=In(ye);switch(oe){case He:return Re;case Ge:return d([Re],{type:Oe});case mt:return new Int8Array(Re);case ut:return new Uint8Array(Re);case xt:return new Uint8ClampedArray(Re);case kt:return new Int16Array(Re);case Je:return new Uint16Array(Re);case It:return new Int32Array(Re);case rt:return new Uint32Array(Re);case Ct:return new Float32Array(Re);case Pt:return new Float64Array(Re);default:throw new Error("Unkown type: "+oe)}}var Mn={serialize:ri,deserialize:wn,stringToBuffer:In,bufferToString:ci};function Oi(Z,ye,oe,Oe){Z.executeSql("CREATE TABLE IF NOT EXISTS "+ye.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],oe,Oe)}function $r(Z){var ye=this,oe={db:null};if(Z)for(var Oe in Z)oe[Oe]=typeof Z[Oe]!="string"?Z[Oe].toString():Z[Oe];var Ne=new u(function(Re,it){try{oe.db=openDatabase(oe.name,String(oe.version),oe.description,oe.size)}catch(pt){return it(pt)}oe.db.transaction(function(pt){Oi(pt,oe,function(){ye._dbInfo=oe,Re()},function(yt,wt){it(wt)})},it)});return oe.serializer=Mn,Ne}function us(Z,ye,oe,Oe,Ne,Re){Z.executeSql(oe,Oe,Ne,function(it,pt){pt.code===pt.SYNTAX_ERR?it.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ye.storeName],function(yt,wt){wt.rows.length?Re(yt,pt):Oi(yt,ye,function(){yt.executeSql(oe,Oe,Ne,Re)},Re)},Re):Re(it,pt)},Re)}function Lr(Z,ye){var oe=this;Z=m(Z);var Oe=new u(function(Ne,Re){oe.ready().then(function(){var it=oe._dbInfo;it.db.transaction(function(pt){us(pt,it,"SELECT * FROM "+it.storeName+" WHERE key = ? LIMIT 1",[Z],function(yt,wt){var Et=wt.rows.length?wt.rows.item(0).value:null;Et&&(Et=it.serializer.deserialize(Et)),Ne(Et)},function(yt,wt){Re(wt)})})}).catch(Re)});return h(Oe,ye),Oe}function to(Z,ye){var oe=this,Oe=new u(function(Ne,Re){oe.ready().then(function(){var it=oe._dbInfo;it.db.transaction(function(pt){us(pt,it,"SELECT * FROM "+it.storeName,[],function(yt,wt){for(var Et=wt.rows,Vt=Et.length,$n=0;$n<Vt;$n++){var ti=Et.item($n),ni=ti.value;if(ni&&(ni=it.serializer.deserialize(ni)),ni=Z(ni,ti.key,$n+1),ni!==void 0){Ne(ni);return}}Ne()},function(yt,wt){Re(wt)})})}).catch(Re)});return h(Oe,ye),Oe}function no(Z,ye,oe,Oe){var Ne=this;Z=m(Z);var Re=new u(function(it,pt){Ne.ready().then(function(){ye===void 0&&(ye=null);var yt=ye,wt=Ne._dbInfo;wt.serializer.serialize(ye,function(Et,Vt){Vt?pt(Vt):wt.db.transaction(function($n){us($n,wt,"INSERT OR REPLACE INTO "+wt.storeName+" (key, value) VALUES (?, ?)",[Z,Et],function(){it(yt)},function(ti,ni){pt(ni)})},function($n){if($n.code===$n.QUOTA_ERR){if(Oe>0){it(no.apply(Ne,[Z,yt,oe,Oe-1]));return}pt($n)}})})}).catch(pt)});return h(Re,oe),Re}function ja(Z,ye,oe){return no.apply(this,[Z,ye,oe,1])}function Ga(Z,ye){var oe=this;Z=m(Z);var Oe=new u(function(Ne,Re){oe.ready().then(function(){var it=oe._dbInfo;it.db.transaction(function(pt){us(pt,it,"DELETE FROM "+it.storeName+" WHERE key = ?",[Z],function(){Ne()},function(yt,wt){Re(wt)})})}).catch(Re)});return h(Oe,ye),Oe}function Wa(Z){var ye=this,oe=new u(function(Oe,Ne){ye.ready().then(function(){var Re=ye._dbInfo;Re.db.transaction(function(it){us(it,Re,"DELETE FROM "+Re.storeName,[],function(){Oe()},function(pt,yt){Ne(yt)})})}).catch(Ne)});return h(oe,Z),oe}function sa(Z){var ye=this,oe=new u(function(Oe,Ne){ye.ready().then(function(){var Re=ye._dbInfo;Re.db.transaction(function(it){us(it,Re,"SELECT COUNT(key) as c FROM "+Re.storeName,[],function(pt,yt){var wt=yt.rows.item(0).c;Oe(wt)},function(pt,yt){Ne(yt)})})}).catch(Ne)});return h(oe,Z),oe}function nr(Z,ye){var oe=this,Oe=new u(function(Ne,Re){oe.ready().then(function(){var it=oe._dbInfo;it.db.transaction(function(pt){us(pt,it,"SELECT key FROM "+it.storeName+" WHERE id = ? LIMIT 1",[Z+1],function(yt,wt){var Et=wt.rows.length?wt.rows.item(0).key:null;Ne(Et)},function(yt,wt){Re(wt)})})}).catch(Re)});return h(Oe,ye),Oe}function qa(Z){var ye=this,oe=new u(function(Oe,Ne){ye.ready().then(function(){var Re=ye._dbInfo;Re.db.transaction(function(it){us(it,Re,"SELECT key FROM "+Re.storeName,[],function(pt,yt){for(var wt=[],Et=0;Et<yt.rows.length;Et++)wt.push(yt.rows.item(Et).key);Oe(wt)},function(pt,yt){Ne(yt)})})}).catch(Ne)});return h(oe,Z),oe}function To(Z){return new u(function(ye,oe){Z.transaction(function(Oe){Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ne,Re){for(var it=[],pt=0;pt<Re.rows.length;pt++)it.push(Re.rows.item(pt).name);ye({db:Z,storeNames:it})},function(Ne,Re){oe(Re)})},function(Oe){oe(Oe)})})}function Ts(Z,ye){ye=g.apply(this,arguments);var oe=this.config();Z=typeof Z!="function"&&Z||{},Z.name||(Z.name=Z.name||oe.name,Z.storeName=Z.storeName||oe.storeName);var Oe=this,Ne;return Z.name?Ne=new u(function(Re){var it;Z.name===oe.name?it=Oe._dbInfo.db:it=openDatabase(Z.name,"","",0),Z.storeName?Re({db:it,storeNames:[Z.storeName]}):Re(To(it))}).then(function(Re){return new u(function(it,pt){Re.db.transaction(function(yt){function wt(ti){return new u(function(ni,Zi){yt.executeSql("DROP TABLE IF EXISTS "+ti,[],function(){ni()},function(Ci,mr){Zi(mr)})})}for(var Et=[],Vt=0,$n=Re.storeNames.length;Vt<$n;Vt++)Et.push(wt(Re.storeNames[Vt]));u.all(Et).then(function(){it()}).catch(function(ti){pt(ti)})},function(yt){pt(yt)})})}):Ne=u.reject("Invalid arguments"),h(Ne,ye),Ne}var Co={_driver:"webSQLStorage",_initStorage:$r,_support:z(),iterate:to,getItem:Lr,setItem:ja,removeItem:Ga,clear:Wa,length:sa,key:nr,keys:qa,dropInstance:Ts};function Jt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch(Z){return!1}}function ir(Z,ye){var oe=Z.name+"/";return Z.storeName!==ye.storeName&&(oe+=Z.storeName+"/"),oe}function Or(){var Z="_localforage_support_test";try{return localStorage.setItem(Z,!0),localStorage.removeItem(Z),!1}catch(ye){return!0}}function tu(){return!Or()||localStorage.length>0}function Nl(Z){var ye=this,oe={};if(Z)for(var Oe in Z)oe[Oe]=Z[Oe];return oe.keyPrefix=ir(Z,ye._defaultConfig),tu()?(ye._dbInfo=oe,oe.serializer=Mn,u.resolve()):u.reject()}function nu(Z){var ye=this,oe=ye.ready().then(function(){for(var Oe=ye._dbInfo.keyPrefix,Ne=localStorage.length-1;Ne>=0;Ne--){var Re=localStorage.key(Ne);Re.indexOf(Oe)===0&&localStorage.removeItem(Re)}});return h(oe,Z),oe}function iu(Z,ye){var oe=this;Z=m(Z);var Oe=oe.ready().then(function(){var Ne=oe._dbInfo,Re=localStorage.getItem(Ne.keyPrefix+Z);return Re&&(Re=Ne.serializer.deserialize(Re)),Re});return h(Oe,ye),Oe}function su(Z,ye){var oe=this,Oe=oe.ready().then(function(){for(var Ne=oe._dbInfo,Re=Ne.keyPrefix,it=Re.length,pt=localStorage.length,yt=1,wt=0;wt<pt;wt++){var Et=localStorage.key(wt);if(Et.indexOf(Re)===0){var Vt=localStorage.getItem(Et);if(Vt&&(Vt=Ne.serializer.deserialize(Vt)),Vt=Z(Vt,Et.substring(it),yt++),Vt!==void 0)return Vt}}});return h(Oe,ye),Oe}function ru(Z,ye){var oe=this,Oe=oe.ready().then(function(){var Ne=oe._dbInfo,Re;try{Re=localStorage.key(Z)}catch(it){Re=null}return Re&&(Re=Re.substring(Ne.keyPrefix.length)),Re});return h(Oe,ye),Oe}function Ka(Z){var ye=this,oe=ye.ready().then(function(){for(var Oe=ye._dbInfo,Ne=localStorage.length,Re=[],it=0;it<Ne;it++){var pt=localStorage.key(it);pt.indexOf(Oe.keyPrefix)===0&&Re.push(pt.substring(Oe.keyPrefix.length))}return Re});return h(oe,Z),oe}function ou(Z){var ye=this,oe=ye.keys().then(function(Oe){return Oe.length});return h(oe,Z),oe}function Fl(Z,ye){var oe=this;Z=m(Z);var Oe=oe.ready().then(function(){var Ne=oe._dbInfo;localStorage.removeItem(Ne.keyPrefix+Z)});return h(Oe,ye),Oe}function Mh(Z,ye,oe){var Oe=this;Z=m(Z);var Ne=Oe.ready().then(function(){ye===void 0&&(ye=null);var Re=ye;return new u(function(it,pt){var yt=Oe._dbInfo;yt.serializer.serialize(ye,function(wt,Et){if(Et)pt(Et);else try{localStorage.setItem(yt.keyPrefix+Z,wt),it(Re)}catch(Vt){(Vt.name==="QuotaExceededError"||Vt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pt(Vt),pt(Vt)}})})});return h(Ne,oe),Ne}function Nh(Z,ye){if(ye=g.apply(this,arguments),Z=typeof Z!="function"&&Z||{},!Z.name){var oe=this.config();Z.name=Z.name||oe.name,Z.storeName=Z.storeName||oe.storeName}var Oe=this,Ne;return Z.name?Ne=new u(function(Re){Z.storeName?Re(ir(Z,Oe._defaultConfig)):Re(Z.name+"/")}).then(function(Re){for(var it=localStorage.length-1;it>=0;it--){var pt=localStorage.key(it);pt.indexOf(Re)===0&&localStorage.removeItem(pt)}}):Ne=u.reject("Invalid arguments"),h(Ne,ye),Ne}var ae={_driver:"localStorageWrapper",_initStorage:Nl,_support:Jt(),iterate:su,getItem:iu,setItem:Mh,removeItem:Fl,clear:nu,length:ou,key:ru,keys:Ka,dropInstance:Nh},Ye=function(ye,oe){return ye===oe||typeof ye=="number"&&typeof oe=="number"&&isNaN(ye)&&isNaN(oe)},vt=function(ye,oe){for(var Oe=ye.length,Ne=0;Ne<Oe;){if(Ye(ye[Ne],oe))return!0;Ne++}return!1},Ft=Array.isArray||function(Z){return Object.prototype.toString.call(Z)==="[object Array]"},En={},hs={},Qi={INDEXEDDB:F,WEBSQL:Co,LOCALSTORAGE:ae},au=[Qi.INDEXEDDB._driver,Qi.WEBSQL._driver,Qi.LOCALSTORAGE._driver],lu=["dropInstance"],Fh=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(lu),Mb={description:"",driver:au.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function p_(Z,ye){Z[ye]=function(){var oe=arguments;return Z.ready().then(function(){return Z[ye].apply(Z,oe)})}}function mm(){for(var Z=1;Z<arguments.length;Z++){var ye=arguments[Z];if(ye)for(var oe in ye)ye.hasOwnProperty(oe)&&(Ft(ye[oe])?arguments[0][oe]=ye[oe].slice():arguments[0][oe]=ye[oe])}return arguments[0]}var m_=function(){function Z(ye){o(this,Z);for(var oe in Qi)if(Qi.hasOwnProperty(oe)){var Oe=Qi[oe],Ne=Oe._driver;this[oe]=Ne,En[Ne]||this.defineDriver(Oe)}this._defaultConfig=mm({},Mb),this._config=mm({},this._defaultConfig,ye),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Z.prototype.config=function(oe){if((typeof oe>"u"?"undefined":r(oe))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Oe in oe){if(Oe==="storeName"&&(oe[Oe]=oe[Oe].replace(/\W/g,"_")),Oe==="version"&&typeof oe[Oe]!="number")return new Error("Database version must be a number.");this._config[Oe]=oe[Oe]}return"driver"in oe&&oe.driver?this.setDriver(this._config.driver):!0}else return typeof oe=="string"?this._config[oe]:this._config},Z.prototype.defineDriver=function(oe,Oe,Ne){var Re=new u(function(it,pt){try{var yt=oe._driver,wt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!oe._driver){pt(wt);return}for(var Et=Fh.concat("_initStorage"),Vt=0,$n=Et.length;Vt<$n;Vt++){var ti=Et[Vt],ni=!vt(lu,ti);if((ni||oe[ti])&&typeof oe[ti]!="function"){pt(wt);return}}var Zi=function(){for(var Hc=function(Fb){return function(){var v_=new Error("Method "+Fb+" is not implemented by the current driver"),Bb=u.reject(v_);return h(Bb,arguments[arguments.length-1]),Bb}},gm=0,Nb=lu.length;gm<Nb;gm++){var Bh=lu[gm];oe[Bh]||(oe[Bh]=Hc(Bh))}};Zi();var Ci=function(Hc){En[yt]&&console.info("Redefining LocalForage driver: "+yt),En[yt]=oe,hs[yt]=Hc,it()};"_support"in oe?oe._support&&typeof oe._support=="function"?oe._support().then(Ci,pt):Ci(!!oe._support):Ci(!0)}catch(mr){pt(mr)}});return f(Re,Oe,Ne),Re},Z.prototype.driver=function(){return this._driver||null},Z.prototype.getDriver=function(oe,Oe,Ne){var Re=En[oe]?u.resolve(En[oe]):u.reject(new Error("Driver not found."));return f(Re,Oe,Ne),Re},Z.prototype.getSerializer=function(oe){var Oe=u.resolve(Mn);return f(Oe,oe),Oe},Z.prototype.ready=function(oe){var Oe=this,Ne=Oe._driverSet.then(function(){return Oe._ready===null&&(Oe._ready=Oe._initDriver()),Oe._ready});return f(Ne,oe,oe),Ne},Z.prototype.setDriver=function(oe,Oe,Ne){var Re=this;Ft(oe)||(oe=[oe]);var it=this._getSupportedDrivers(oe);function pt(){Re._config.driver=Re.driver()}function yt(Vt){return Re._extend(Vt),pt(),Re._ready=Re._initStorage(Re._config),Re._ready}function wt(Vt){return function(){var $n=0;function ti(){for(;$n<Vt.length;){var ni=Vt[$n];return $n++,Re._dbInfo=null,Re._ready=null,Re.getDriver(ni).then(yt).catch(ti)}pt();var Zi=new Error("No available storage method found.");return Re._driverSet=u.reject(Zi),Re._driverSet}return ti()}}var Et=this._driverSet!==null?this._driverSet.catch(function(){return u.resolve()}):u.resolve();return this._driverSet=Et.then(function(){var Vt=it[0];return Re._dbInfo=null,Re._ready=null,Re.getDriver(Vt).then(function($n){Re._driver=$n._driver,pt(),Re._wrapLibraryMethodsWithReady(),Re._initDriver=wt(it)})}).catch(function(){pt();var Vt=new Error("No available storage method found.");return Re._driverSet=u.reject(Vt),Re._driverSet}),f(this._driverSet,Oe,Ne),this._driverSet},Z.prototype.supports=function(oe){return!!hs[oe]},Z.prototype._extend=function(oe){mm(this,oe)},Z.prototype._getSupportedDrivers=function(oe){for(var Oe=[],Ne=0,Re=oe.length;Ne<Re;Ne++){var it=oe[Ne];this.supports(it)&&Oe.push(it)}return Oe},Z.prototype._wrapLibraryMethodsWithReady=function(){for(var oe=0,Oe=Fh.length;oe<Oe;oe++)p_(this,Fh[oe])},Z.prototype.createInstance=function(oe){return new Z(oe)},Z}(),g_=new m_;i.exports=g_},{3:3}]},{},[4])(4)})})(nW);var Tct=nW.exports;const Bw=mb(Tct),Qf={SecureStorage:"ionicSecureStorage",IndexedDB:Bw.INDEXEDDB,LocalStorage:Bw.LOCALSTORAGE},f9={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[Qf.SecureStorage,Qf.IndexedDB,Qf.LocalStorage]};class Cct{constructor(e=f9){this._db=null,this._secureStorageDriver=null;const t=Object.assign({},f9,e||{});this._config=t}async create(){const e=Bw.createInstance(this._config);return this._db=e,await e.setDriver(this._config.driverOrder||[]),this}async defineDriver(e){return e._driver===Qf.SecureStorage&&(this._secureStorageDriver=e),Bw.defineDriver(e)}get driver(){var e;return((e=this._db)===null||e===void 0?void 0:e.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(e){return this.assertDb().getItem(e)}set(e,t){return this.assertDb().setItem(e,t)}remove(e){return this.assertDb().removeItem(e)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(e){return this.assertDb().iterate(e)}setEncryptionKey(e){var t;if(this._secureStorageDriver)(t=this._secureStorageDriver)===null||t===void 0||t.setEncryptionKey(e);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}}function Sct(n){return{info:(e,...t)=>{n&&console.info("[PersistPlugin] INFO: ".concat(e),...t)},warn:(e,...t)=>{n&&console.warn("[PersistPlugin] WARN: ".concat(e),...t)},error:(e,...t)=>{n&&console.error("[PersistPlugin] ERROR: ".concat(e),...t)}}}const Act=(n,e)=>e.split(".").reduce((t,i)=>t==null?void 0:t[i],n);function Ict(n,e,t){e.split(".").reduce((i,s,r,o)=>(r===o.length-1?i[s]=t:i[s]=i[s]||{},i[s]),n)}function Pct(n,e,t){const i=e?[].concat(e):null,s=t?[].concat(t):null,r=i?i.reduce((o,a)=>{const l=Act(n,a);return l!==void 0&&Ict(o,a,l),o},{}):{...n};return s==null||s.forEach(o=>{const a=o.split("."),l=a.slice(0,-1).reduce((c,d)=>c==null?void 0:c[d],r);l&&delete l[a.at(-1)]}),r}function p9(n,e,t){return n[e]||(n[e]=Promise.resolve()),n[e]=n[e].then(t).catch(i=>console.error("Error processing queue for key '".concat(e,"':"),i)),n[e]}function Rct(n,e){return Object.fromEntries(Object.entries(n).filter(([t])=>!(t in e)))}function $ct(n){const e=n,t={},i=Sct(e.debug),s=()=>typeof window>"u"?(i.info("Running in SSR environment. No storage available."),null):window.localStorage?(i.info("Using localStorage as the default storage."),window.localStorage):(i.error("No valid storage found. PersistPlugin will be disabled."),null);return r=>{const o=r.options.persist;if(!o)return;const{key:a=r.store.$id,overwrite:l=!1,storage:c=s(),filter:d=()=>!0,serialize:u=JSON.stringify,deserialize:h=JSON.parse,clientOnly:f=!1,include:m=null,exclude:g=null}={...e,key:void 0,...typeof o=="object"&&o};if(!c||(f||c.constructor.name.includes("LocalForage"))&&typeof window>"u")return;const b=k=>e.key?"".concat(e.key,":").concat(k):k,w=()=>{const k=[],E=T=>{const P=p9(t,T,async()=>{try{return await c.getItem(T)}catch(C){i.error("Error loading key ".concat(T,": ").concat(C))}});return k.push(P),P};return E(typeof a=="string"?a:r.store.$id).then(T=>{if(T){const P=typeof T=="object"?T:h(T);l?r.store.$state=P:r.store.$patch(P)}}),typeof a=="object"&&Object.entries(a).forEach(([T,P])=>E(P).then(C=>{C&&r.store.$patch({[T]:typeof C=="object"?C:h(C)})})),Promise.all(k)},x=(k,E)=>{if(!d(k,E))return;const T=[],P=Pct(E,m,g),C=(A,R)=>{const M=p9(t,A,async()=>{try{await c.setItem(b(A),R)}catch(N){i.error('Failed to persist state for key "'.concat(A,'":').concat(N))}});T.push(M)};if(typeof a=="string")C(a,u(P));else{C(r.store.$id,u(Rct(P,a)));for(const[A,R]of Object.entries(a))P[A]!==void 0&&C(R,u(P[A]))}return Promise.all(T)};r.store.$restore=w,r.store.$persist=()=>x({type:"persist",storeId:r.store.$id},r.store.$state),w(),r.store.$subscribe(x)}}const Lct=async()=>{const n=u0e(),e=new Cct({driverOrder:[Qf.IndexedDB,Qf.LocalStorage]});return await e.create(),n.use($ct({storage:{getItem(t){return e.get(t)},setItem(t,i){return e.set(t,i)},removeItem(t){return e.remove(t)}}})),n};_t.extend(vme);_t.locale(gme);yg.requestPermissions().then(async n=>{console.log("resultpermisson",n.receive),n.receive!=="granted"&&await yg.requestPermissions()});No.hasPermission().then(n=>{n||No.requestPermission()});const Oct=async()=>{const n=await Lct(),e=Ste(r0e).use(lme,{rippleEffect:!1}).use(Wqe).use(Ect).use(yS).use(n);yS.isReady().then(()=>{e.mount("#app")})};Oct();export{Nct as A,lt as B,ve as C,j as D,OL as E,qr as F,y as G,GE as H,re as I,L as J,aN as K,bo as L,ml as M,K as N,on as O,Fct as P,Ld as Q,KH as R,vc as S,J3 as T,be as U,Q as V,yx as W,Kn as _,Mct as __vite_legacy_guard,qo as a,bt as b,hb as c,Kr as d,Ra as e,hx as f,ndt as g,pp as h,md as i,Xg as j,lT as k,xi as l,Qn as m,vp as n,odt as o,Bct as p,Ame as q,Cl as r,rdt as s,fm as t,Fe as u,I as v,fi as w,O as x,_ as y,gt as z};
